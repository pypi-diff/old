--- tmp/lndb-0.40.1.tar.gz
+++ tmp/lndb-0.40.2.tar.gz
â”œâ”€â”€ filetype from file(1)
â”‚ @@ -1 +1 @@
â”‚ -gzip compressed data, was "lndb-0.40.1.tar", last modified: Fri Apr  7 04:41:48 2023, max compression
â”‚ +gzip compressed data, was "lndb-0.40.2.tar", last modified: Fri Apr  7 09:42:29 2023, max compression
â”‚   --- lndb-0.40.1.tar
â”œâ”€â”€ +++ lndb-0.40.2.tar
â”‚ â”œâ”€â”€ file list
â”‚ â”‚ @@ -1,77 +1,77 @@
â”‚ â”‚ --rw-r--r--   0        0        0     3899 2023-04-05 12:41:02.524447 lndb-0.40.1/.github/workflows/build.yml
â”‚ â”‚ --rw-r--r--   0        0        0      133 2023-01-15 12:18:16.566196 lndb-0.40.1/.github/workflows/latest-changes.jinja2
â”‚ â”‚ --rw-r--r--   0        0        0      597 2023-01-15 12:18:16.566256 lndb-0.40.1/.github/workflows/latest-changes.yml
â”‚ â”‚ --rw-r--r--   0        0        0     1204 2023-01-15 12:18:16.566326 lndb-0.40.1/.gitignore
â”‚ â”‚ --rw-r--r--   0        0        0     1772 2023-01-16 03:13:03.815140 lndb-0.40.1/.pre-commit-config.yaml
â”‚ â”‚ --rw-r--r--   0        0        0    11324 2023-01-15 12:18:16.566501 lndb-0.40.1/LICENSE
â”‚ â”‚ --rw-r--r--   0        0        0      173 2023-03-27 04:37:15.707800 lndb-0.40.1/README.md
â”‚ â”‚ --rw-r--r--   0        0        0       52 2023-03-06 11:50:26.265030 lndb-0.40.1/docs/api.md
â”‚ â”‚ --rw-r--r--   0        0        0    45186 2023-04-07 04:41:11.024667 lndb-0.40.1/docs/changelog.md
â”‚ â”‚ --rw-r--r--   0        0        0     4832 2023-03-22 14:41:54.962234 lndb-0.40.1/docs/faq/check-synchronization.ipynb
â”‚ â”‚ --rw-r--r--   0        0        0     3334 2023-03-09 09:28:04.965028 lndb-0.40.1/docs/faq/clone.ipynb
â”‚ â”‚ --rw-r--r--   0        0        0     8397 2023-03-22 05:59:33.863010 lndb-0.40.1/docs/faq/edge-cases-login-init.ipynb
â”‚ â”‚ --rw-r--r--   0        0        0      166 2023-03-22 14:56:35.817208 lndb-0.40.1/docs/faq/index.md
â”‚ â”‚ --rw-r--r--   0        0        0     1180 2023-04-05 05:10:26.112382 lndb-0.40.1/docs/faq/manage-migrations.ipynb
â”‚ â”‚ --rw-r--r--   0        0        0     3248 2023-03-09 09:28:04.965998 lndb-0.40.1/docs/faq/switch-environment.ipynb
â”‚ â”‚ --rw-r--r--   0        0        0     2798 2023-04-05 05:10:26.112662 lndb-0.40.1/docs/faq/test-migrations-e2e.ipynb
â”‚ â”‚ --rw-r--r--   0        0        0     2073 2023-04-05 05:10:26.112933 lndb-0.40.1/docs/faq/test-migrations-unit.ipynb
â”‚ â”‚ --rw-r--r--   0        0        0     5163 2023-03-22 05:59:33.863390 lndb-0.40.1/docs/guide/01-setup-user.ipynb
â”‚ â”‚ --rw-r--r--   0        0        0    10400 2023-03-22 05:59:33.863723 lndb-0.40.1/docs/guide/02-init-instance.ipynb
â”‚ â”‚ --rw-r--r--   0        0        0     5573 2023-03-22 14:56:35.818426 lndb-0.40.1/docs/guide/03-load-instance.ipynb
â”‚ â”‚ --rw-r--r--   0        0        0     5290 2023-03-09 09:28:04.966850 lndb-0.40.1/docs/guide/04-set-storage.ipynb
â”‚ â”‚ --rw-r--r--   0        0        0     3724 2023-03-22 05:59:33.864269 lndb-0.40.1/docs/guide/05-schema-modules.ipynb
â”‚ â”‚ --rw-r--r--   0        0        0     1496 2023-03-22 05:59:33.864524 lndb-0.40.1/docs/guide/06-info.ipynb
â”‚ â”‚ --rw-r--r--   0        0        0     3282 2023-03-22 05:59:33.864793 lndb-0.40.1/docs/guide/07-delete.ipynb
â”‚ â”‚ --rw-r--r--   0        0        0      129 2023-02-16 15:52:14.590660 lndb-0.40.1/docs/guide/index.md
â”‚ â”‚ --rw-r--r--   0        0        0     3152 2023-03-25 20:23:06.444401 lndb-0.40.1/docs/guide/migrate.md
â”‚ â”‚ --rw-r--r--   0        0        0      126 2023-02-16 21:53:37.660107 lndb-0.40.1/docs/index.md
â”‚ â”‚ --rw-r--r--   0        0        0      118 2023-02-17 10:58:37.191812 lndb-0.40.1/lamin-project.yaml
â”‚ â”‚ --rw-r--r--   0        0        0     1932 2023-04-07 04:41:06.516334 lndb-0.40.1/lndb/__init__.py
â”‚ â”‚ --rw-r--r--   0        0        0     4242 2023-02-27 18:35:12.951712 lndb-0.40.1/lndb/__main__.py
â”‚ â”‚ --rw-r--r--   0        0        0      100 2023-02-12 04:51:38.272115 lndb-0.40.1/lndb/_assets/__init__.py
â”‚ â”‚ --rw-r--r--   0        0        0      216 2023-04-03 04:25:19.341088 lndb-0.40.1/lndb/_check_versions.py
â”‚ â”‚ --rw-r--r--   0        0        0      360 2023-02-16 21:53:37.660535 lndb-0.40.1/lndb/_close.py
â”‚ â”‚ --rw-r--r--   0        0        0     2146 2023-04-05 13:47:39.618861 lndb-0.40.1/lndb/_delete.py
â”‚ â”‚ --rw-r--r--   0        0        0      222 2023-02-16 21:53:37.660919 lndb-0.40.1/lndb/_info.py
â”‚ â”‚ --rw-r--r--   0        0        0     5755 2023-04-05 12:41:02.525310 lndb-0.40.1/lndb/_init_instance.py
â”‚ â”‚ --rw-r--r--   0        0        0     3752 2023-04-05 05:10:26.113362 lndb-0.40.1/lndb/_load_instance.py
â”‚ â”‚ --rw-r--r--   0        0        0      135 2023-04-05 05:10:26.113647 lndb-0.40.1/lndb/_migrate/__init__.py
â”‚ â”‚ --rw-r--r--   0        0        0      723 2023-04-05 05:10:26.113978 lndb-0.40.1/lndb/_migrate/alembic.ini
â”‚ â”‚ --rw-r--r--   0        0        0     3469 2023-04-05 12:41:02.533096 lndb-0.40.1/lndb/_migrate/core.py
â”‚ â”‚ --rw-r--r--   0        0        0     6303 2023-04-05 05:10:26.114561 lndb-0.40.1/lndb/_migrate/deploy.py
â”‚ â”‚ --rw-r--r--   0        0        0     3179 2023-02-16 21:53:37.661733 lndb-0.40.1/lndb/_migrate/env.py
â”‚ â”‚ --rw-r--r--   0        0        0      341 2023-02-16 21:53:37.661843 lndb-0.40.1/lndb/_migrate/script.py.mako
â”‚ â”‚ --rw-r--r--   0        0        0     4840 2023-04-05 05:10:26.114776 lndb-0.40.1/lndb/_migrate/utils.py
â”‚ â”‚ --rw-r--r--   0        0        0     1020 2023-02-12 04:51:38.274334 lndb-0.40.1/lndb/_schema.py
â”‚ â”‚ --rw-r--r--   0        0        0     1490 2023-04-05 12:41:02.525753 lndb-0.40.1/lndb/_set.py
â”‚ â”‚ --rw-r--r--   0        0        0     2165 2023-04-07 02:52:01.648931 lndb-0.40.1/lndb/_settings.py
â”‚ â”‚ --rw-r--r--   0        0        0       87 2023-02-16 21:53:37.662311 lndb-0.40.1/lndb/_settings_load.py
â”‚ â”‚ --rw-r--r--   0        0        0       72 2023-02-16 21:53:37.662460 lndb-0.40.1/lndb/_settings_store.py
â”‚ â”‚ --rw-r--r--   0        0        0     5291 2023-03-12 15:04:39.932675 lndb-0.40.1/lndb/_setup_user.py
â”‚ â”‚ --rw-r--r--   0        0        0      363 2023-04-05 12:41:02.526023 lndb-0.40.1/lndb/dev/__init__.py
â”‚ â”‚ --rw-r--r--   0        0        0     4030 2023-03-27 17:35:42.591834 lndb-0.40.1/lndb/dev/_clone.py
â”‚ â”‚ --rw-r--r--   0        0        0     6341 2023-04-05 12:41:02.526216 lndb-0.40.1/lndb/dev/_db.py
â”‚ â”‚ --rw-r--r--   0        0        0     2491 2023-02-16 21:53:37.663214 lndb-0.40.1/lndb/dev/_deprecated.py
â”‚ â”‚ --rw-r--r--   0        0        0      240 2023-02-16 21:53:37.663286 lndb-0.40.1/lndb/dev/_docs.py
â”‚ â”‚ --rw-r--r--   0        0        0     5284 2023-04-05 12:41:02.526831 lndb-0.40.1/lndb/dev/_exclusion.py
â”‚ â”‚ --rw-r--r--   0        0        0     8389 2023-04-05 12:41:02.527633 lndb-0.40.1/lndb/dev/_settings_instance.py
â”‚ â”‚ --rw-r--r--   0        0        0     2629 2023-03-22 05:59:33.865686 lndb-0.40.1/lndb/dev/_settings_load.py
â”‚ â”‚ --rw-r--r--   0        0        0     2061 2023-02-16 21:53:37.663723 lndb-0.40.1/lndb/dev/_settings_save.py
â”‚ â”‚ --rw-r--r--   0        0        0     2454 2023-04-07 04:13:56.734044 lndb-0.40.1/lndb/dev/_settings_store.py
â”‚ â”‚ --rw-r--r--   0        0        0      976 2023-02-16 21:53:37.663901 lndb-0.40.1/lndb/dev/_settings_user.py
â”‚ â”‚ --rw-r--r--   0        0        0     2446 2023-03-21 06:52:10.981980 lndb-0.40.1/lndb/dev/_setup_knowledge.py
â”‚ â”‚ --rw-r--r--   0        0        0     6996 2023-03-30 17:54:01.453792 lndb-0.40.1/lndb/dev/_setup_schema.py
â”‚ â”‚ --rw-r--r--   0        0        0     4004 2023-04-05 12:41:02.528400 lndb-0.40.1/lndb/dev/_storage.py
â”‚ â”‚ --rw-r--r--   0        0        0      140 2023-02-24 20:31:36.945684 lndb-0.40.1/lndb/dev/_testdb.py
â”‚ â”‚ --rw-r--r--   0        0        0      356 2023-04-05 05:10:26.115134 lndb-0.40.1/lndb/test/__init__.py
â”‚ â”‚ --rw-r--r--   0        0        0       50 2023-02-24 20:31:36.946187 lndb-0.40.1/lndb/test/_env.py
â”‚ â”‚ --rw-r--r--   0        0        0     3856 2023-03-30 17:54:01.454075 lndb-0.40.1/lndb/test/_migrations_e2e.py
â”‚ â”‚ --rw-r--r--   0        0        0     6646 2023-04-05 05:10:26.115464 lndb-0.40.1/lndb/test/_migrations_unit.py
â”‚ â”‚ --rw-r--r--   0        0        0      310 2023-02-24 20:31:36.946490 lndb-0.40.1/lndb/test/_nox.py
â”‚ â”‚ --rw-r--r--   0        0        0      188 2023-02-22 22:13:54.788863 lndb-0.40.1/lndb/test/nox.py
â”‚ â”‚ --rw-r--r--   0        0        0     1514 2023-03-09 09:28:04.969263 lndb-0.40.1/noxfile.py
â”‚ â”‚ --rw-r--r--   0        0        0     1305 2023-04-07 04:41:04.152199 lndb-0.40.1/pyproject.toml
â”‚ â”‚ --rw-r--r--   0        0        0      506 2023-02-12 04:51:38.276939 lndb-0.40.1/tests/test_bionty.py
â”‚ â”‚ --rw-r--r--   0        0        0      680 2023-03-09 09:28:04.969725 lndb-0.40.1/tests/test_init_instance.py
â”‚ â”‚ --rw-r--r--   0        0        0      385 2023-02-21 15:53:42.076396 lndb-0.40.1/tests/test_notebooks.py
â”‚ â”‚ --rw-r--r--   0        0        0     1190 1970-01-01 00:00:00.000000 lndb-0.40.1/PKG-INFO
â”‚ â”‚ +-rw-r--r--   0        0        0     3899 2023-04-05 12:41:02.524447 lndb-0.40.2/.github/workflows/build.yml
â”‚ â”‚ +-rw-r--r--   0        0        0      133 2023-01-15 12:18:16.566196 lndb-0.40.2/.github/workflows/latest-changes.jinja2
â”‚ â”‚ +-rw-r--r--   0        0        0      597 2023-01-15 12:18:16.566256 lndb-0.40.2/.github/workflows/latest-changes.yml
â”‚ â”‚ +-rw-r--r--   0        0        0     1204 2023-01-15 12:18:16.566326 lndb-0.40.2/.gitignore
â”‚ â”‚ +-rw-r--r--   0        0        0     1772 2023-01-16 03:13:03.815140 lndb-0.40.2/.pre-commit-config.yaml
â”‚ â”‚ +-rw-r--r--   0        0        0    11324 2023-01-15 12:18:16.566501 lndb-0.40.2/LICENSE
â”‚ â”‚ +-rw-r--r--   0        0        0      173 2023-03-27 04:37:15.707800 lndb-0.40.2/README.md
â”‚ â”‚ +-rw-r--r--   0        0        0       52 2023-03-06 11:50:26.265030 lndb-0.40.2/docs/api.md
â”‚ â”‚ +-rw-r--r--   0        0        0    45342 2023-04-07 09:41:52.757903 lndb-0.40.2/docs/changelog.md
â”‚ â”‚ +-rw-r--r--   0        0        0     4832 2023-03-22 14:41:54.962234 lndb-0.40.2/docs/faq/check-synchronization.ipynb
â”‚ â”‚ +-rw-r--r--   0        0        0     3334 2023-03-09 09:28:04.965028 lndb-0.40.2/docs/faq/clone.ipynb
â”‚ â”‚ +-rw-r--r--   0        0        0     8397 2023-03-22 05:59:33.863010 lndb-0.40.2/docs/faq/edge-cases-login-init.ipynb
â”‚ â”‚ +-rw-r--r--   0        0        0      166 2023-03-22 14:56:35.817208 lndb-0.40.2/docs/faq/index.md
â”‚ â”‚ +-rw-r--r--   0        0        0     1180 2023-04-05 05:10:26.112382 lndb-0.40.2/docs/faq/manage-migrations.ipynb
â”‚ â”‚ +-rw-r--r--   0        0        0     3248 2023-03-09 09:28:04.965998 lndb-0.40.2/docs/faq/switch-environment.ipynb
â”‚ â”‚ +-rw-r--r--   0        0        0     2798 2023-04-05 05:10:26.112662 lndb-0.40.2/docs/faq/test-migrations-e2e.ipynb
â”‚ â”‚ +-rw-r--r--   0        0        0     2073 2023-04-05 05:10:26.112933 lndb-0.40.2/docs/faq/test-migrations-unit.ipynb
â”‚ â”‚ +-rw-r--r--   0        0        0     5163 2023-03-22 05:59:33.863390 lndb-0.40.2/docs/guide/01-setup-user.ipynb
â”‚ â”‚ +-rw-r--r--   0        0        0    10679 2023-04-07 09:41:26.324653 lndb-0.40.2/docs/guide/02-init-instance.ipynb
â”‚ â”‚ +-rw-r--r--   0        0        0     5573 2023-03-22 14:56:35.818426 lndb-0.40.2/docs/guide/03-load-instance.ipynb
â”‚ â”‚ +-rw-r--r--   0        0        0     5290 2023-03-09 09:28:04.966850 lndb-0.40.2/docs/guide/04-set-storage.ipynb
â”‚ â”‚ +-rw-r--r--   0        0        0     3724 2023-03-22 05:59:33.864269 lndb-0.40.2/docs/guide/05-schema-modules.ipynb
â”‚ â”‚ +-rw-r--r--   0        0        0     1496 2023-03-22 05:59:33.864524 lndb-0.40.2/docs/guide/06-info.ipynb
â”‚ â”‚ +-rw-r--r--   0        0        0     3282 2023-03-22 05:59:33.864793 lndb-0.40.2/docs/guide/07-delete.ipynb
â”‚ â”‚ +-rw-r--r--   0        0        0      129 2023-02-16 15:52:14.590660 lndb-0.40.2/docs/guide/index.md
â”‚ â”‚ +-rw-r--r--   0        0        0     3152 2023-03-25 20:23:06.444401 lndb-0.40.2/docs/guide/migrate.md
â”‚ â”‚ +-rw-r--r--   0        0        0      126 2023-02-16 21:53:37.660107 lndb-0.40.2/docs/index.md
â”‚ â”‚ +-rw-r--r--   0        0        0      118 2023-02-17 10:58:37.191812 lndb-0.40.2/lamin-project.yaml
â”‚ â”‚ +-rw-r--r--   0        0        0     1932 2023-04-07 09:41:45.725396 lndb-0.40.2/lndb/__init__.py
â”‚ â”‚ +-rw-r--r--   0        0        0     4242 2023-02-27 18:35:12.951712 lndb-0.40.2/lndb/__main__.py
â”‚ â”‚ +-rw-r--r--   0        0        0      100 2023-02-12 04:51:38.272115 lndb-0.40.2/lndb/_assets/__init__.py
â”‚ â”‚ +-rw-r--r--   0        0        0      216 2023-04-03 04:25:19.341088 lndb-0.40.2/lndb/_check_versions.py
â”‚ â”‚ +-rw-r--r--   0        0        0      360 2023-02-16 21:53:37.660535 lndb-0.40.2/lndb/_close.py
â”‚ â”‚ +-rw-r--r--   0        0        0     2146 2023-04-05 13:47:39.618861 lndb-0.40.2/lndb/_delete.py
â”‚ â”‚ +-rw-r--r--   0        0        0      222 2023-02-16 21:53:37.660919 lndb-0.40.2/lndb/_info.py
â”‚ â”‚ +-rw-r--r--   0        0        0     5724 2023-04-07 09:41:26.324840 lndb-0.40.2/lndb/_init_instance.py
â”‚ â”‚ +-rw-r--r--   0        0        0     3752 2023-04-05 05:10:26.113362 lndb-0.40.2/lndb/_load_instance.py
â”‚ â”‚ +-rw-r--r--   0        0        0      135 2023-04-05 05:10:26.113647 lndb-0.40.2/lndb/_migrate/__init__.py
â”‚ â”‚ +-rw-r--r--   0        0        0      723 2023-04-05 05:10:26.113978 lndb-0.40.2/lndb/_migrate/alembic.ini
â”‚ â”‚ +-rw-r--r--   0        0        0     3469 2023-04-05 12:41:02.533096 lndb-0.40.2/lndb/_migrate/core.py
â”‚ â”‚ +-rw-r--r--   0        0        0     6303 2023-04-05 05:10:26.114561 lndb-0.40.2/lndb/_migrate/deploy.py
â”‚ â”‚ +-rw-r--r--   0        0        0     3179 2023-02-16 21:53:37.661733 lndb-0.40.2/lndb/_migrate/env.py
â”‚ â”‚ +-rw-r--r--   0        0        0      341 2023-02-16 21:53:37.661843 lndb-0.40.2/lndb/_migrate/script.py.mako
â”‚ â”‚ +-rw-r--r--   0        0        0     4840 2023-04-05 05:10:26.114776 lndb-0.40.2/lndb/_migrate/utils.py
â”‚ â”‚ +-rw-r--r--   0        0        0     1020 2023-02-12 04:51:38.274334 lndb-0.40.2/lndb/_schema.py
â”‚ â”‚ +-rw-r--r--   0        0        0     1490 2023-04-05 12:41:02.525753 lndb-0.40.2/lndb/_set.py
â”‚ â”‚ +-rw-r--r--   0        0        0     2181 2023-04-07 09:41:26.325000 lndb-0.40.2/lndb/_settings.py
â”‚ â”‚ +-rw-r--r--   0        0        0       87 2023-02-16 21:53:37.662311 lndb-0.40.2/lndb/_settings_load.py
â”‚ â”‚ +-rw-r--r--   0        0        0       72 2023-02-16 21:53:37.662460 lndb-0.40.2/lndb/_settings_store.py
â”‚ â”‚ +-rw-r--r--   0        0        0     5291 2023-03-12 15:04:39.932675 lndb-0.40.2/lndb/_setup_user.py
â”‚ â”‚ +-rw-r--r--   0        0        0      437 2023-04-07 09:41:26.325162 lndb-0.40.2/lndb/dev/__init__.py
â”‚ â”‚ +-rw-r--r--   0        0        0     4030 2023-03-27 17:35:42.591834 lndb-0.40.2/lndb/dev/_clone.py
â”‚ â”‚ +-rw-r--r--   0        0        0     6226 2023-04-07 09:41:26.325330 lndb-0.40.2/lndb/dev/_db.py
â”‚ â”‚ +-rw-r--r--   0        0        0     2491 2023-02-16 21:53:37.663214 lndb-0.40.2/lndb/dev/_deprecated.py
â”‚ â”‚ +-rw-r--r--   0        0        0      240 2023-02-16 21:53:37.663286 lndb-0.40.2/lndb/dev/_docs.py
â”‚ â”‚ +-rw-r--r--   0        0        0     5284 2023-04-05 12:41:02.526831 lndb-0.40.2/lndb/dev/_exclusion.py
â”‚ â”‚ +-rw-r--r--   0        0        0     8435 2023-04-07 09:41:26.325515 lndb-0.40.2/lndb/dev/_settings_instance.py
â”‚ â”‚ +-rw-r--r--   0        0        0     2629 2023-03-22 05:59:33.865686 lndb-0.40.2/lndb/dev/_settings_load.py
â”‚ â”‚ +-rw-r--r--   0        0        0     2061 2023-02-16 21:53:37.663723 lndb-0.40.2/lndb/dev/_settings_save.py
â”‚ â”‚ +-rw-r--r--   0        0        0     2314 2023-04-07 05:02:28.778847 lndb-0.40.2/lndb/dev/_settings_store.py
â”‚ â”‚ +-rw-r--r--   0        0        0      976 2023-02-16 21:53:37.663901 lndb-0.40.2/lndb/dev/_settings_user.py
â”‚ â”‚ +-rw-r--r--   0        0        0     2446 2023-03-21 06:52:10.981980 lndb-0.40.2/lndb/dev/_setup_knowledge.py
â”‚ â”‚ +-rw-r--r--   0        0        0     6996 2023-03-30 17:54:01.453792 lndb-0.40.2/lndb/dev/_setup_schema.py
â”‚ â”‚ +-rw-r--r--   0        0        0     4922 2023-04-07 09:41:26.325689 lndb-0.40.2/lndb/dev/_storage.py
â”‚ â”‚ +-rw-r--r--   0        0        0      140 2023-02-24 20:31:36.945684 lndb-0.40.2/lndb/dev/_testdb.py
â”‚ â”‚ +-rw-r--r--   0        0        0      356 2023-04-05 05:10:26.115134 lndb-0.40.2/lndb/test/__init__.py
â”‚ â”‚ +-rw-r--r--   0        0        0       50 2023-02-24 20:31:36.946187 lndb-0.40.2/lndb/test/_env.py
â”‚ â”‚ +-rw-r--r--   0        0        0     3856 2023-03-30 17:54:01.454075 lndb-0.40.2/lndb/test/_migrations_e2e.py
â”‚ â”‚ +-rw-r--r--   0        0        0     6646 2023-04-05 05:10:26.115464 lndb-0.40.2/lndb/test/_migrations_unit.py
â”‚ â”‚ +-rw-r--r--   0        0        0      310 2023-02-24 20:31:36.946490 lndb-0.40.2/lndb/test/_nox.py
â”‚ â”‚ +-rw-r--r--   0        0        0      188 2023-02-22 22:13:54.788863 lndb-0.40.2/lndb/test/nox.py
â”‚ â”‚ +-rw-r--r--   0        0        0     1514 2023-03-09 09:28:04.969263 lndb-0.40.2/noxfile.py
â”‚ â”‚ +-rw-r--r--   0        0        0     1305 2023-04-07 04:41:04.152199 lndb-0.40.2/pyproject.toml
â”‚ â”‚ +-rw-r--r--   0        0        0      506 2023-02-12 04:51:38.276939 lndb-0.40.2/tests/test_bionty.py
â”‚ â”‚ +-rw-r--r--   0        0        0      680 2023-03-09 09:28:04.969725 lndb-0.40.2/tests/test_init_instance.py
â”‚ â”‚ +-rw-r--r--   0        0        0      385 2023-02-21 15:53:42.076396 lndb-0.40.2/tests/test_notebooks.py
â”‚ â”‚ +-rw-r--r--   0        0        0     1190 1970-01-01 00:00:00.000000 lndb-0.40.2/PKG-INFO
â”‚ â”‚   --- lndb-0.40.1/.github/workflows/build.yml
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/.github/workflows/build.yml
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- lndb-0.40.1/.github/workflows/latest-changes.yml
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/.github/workflows/latest-changes.yml
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- lndb-0.40.1/.gitignore
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/.gitignore
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- lndb-0.40.1/.pre-commit-config.yaml
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/.pre-commit-config.yaml
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- lndb-0.40.1/LICENSE
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/LICENSE
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- lndb-0.40.1/docs/changelog.md
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/docs/changelog.md
â”‚ â”‚â”„ Files 0% similar despite different names
â”‚ â”‚ @@ -1,12 +1,13 @@
â”‚ â”‚  # Changelog
â”‚ â”‚  
â”‚ â”‚  <!-- prettier-ignore -->
â”‚ â”‚  Name | PR | Developer | Date | Version
â”‚ â”‚  --- | --- | --- | --- | ---
â”‚ â”‚ +ðŸš¸ Expose `id` in `StorageSettings` | [351](https://github.com/laminlabs/lndb/pull/351) | [falexwolf](https://github.com/falexwolf) | 2023-04-07 | 0.40.2
â”‚ â”‚  âž• Add cloudpathlib back | [350](https://github.com/laminlabs/lndb/pull/350) | [falexwolf](https://github.com/falexwolf) | 2023-04-07 | 0.40.1
â”‚ â”‚  ðŸš¸ Rename settings directory to `.lamin` | [349](https://github.com/laminlabs/lndb/pull/349) | [falexwolf](https://github.com/falexwolf) | 2023-04-07 | 0.40.0
â”‚ â”‚  ðŸš¸ Expose storage in settings | [348](https://github.com/laminlabs/lndb/pull/348) | [falexwolf](https://github.com/falexwolf) | 2023-04-07 |
â”‚ â”‚  â™»ï¸ Move storage related code to lndb_storage | [338](https://github.com/laminlabs/lndb/pull/338) | [Koncopd](https://github.com/Koncopd) | 2023-04-05 |
â”‚ â”‚  â™»ï¸ Refactor migrations | [346](https://github.com/laminlabs/lndb/pull/346) | [falexwolf](https://github.com/falexwolf) | 2023-04-04 |
â”‚ â”‚  ðŸ§‘â€ðŸ’» Enable to load instance from hub using access token | [343](https://github.com/laminlabs/lndb/pull/343) | [fredericenard](https://github.com/fredericenard) | 2023-04-03 | 0.39.2
â”‚ â”‚  â¬†ï¸ Upgrade lnhub-rest to 0.7.2 | [341](https://github.com/laminlabs/lndb/pull/341) | [falexwolf](https://github.com/falexwolf) | 2023-03-31 | 0.39.1
â”‚ â”‚   --- lndb-0.40.1/docs/faq/check-synchronization.ipynb
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/docs/faq/check-synchronization.ipynb
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- lndb-0.40.1/docs/faq/clone.ipynb
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/docs/faq/clone.ipynb
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- lndb-0.40.1/docs/faq/edge-cases-login-init.ipynb
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/docs/faq/edge-cases-login-init.ipynb
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- lndb-0.40.1/docs/faq/manage-migrations.ipynb
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/docs/faq/manage-migrations.ipynb
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- lndb-0.40.1/docs/faq/switch-environment.ipynb
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/docs/faq/switch-environment.ipynb
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- lndb-0.40.1/docs/faq/test-migrations-e2e.ipynb
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/docs/faq/test-migrations-e2e.ipynb
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- lndb-0.40.1/docs/faq/test-migrations-unit.ipynb
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/docs/faq/test-migrations-unit.ipynb
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- lndb-0.40.1/docs/guide/01-setup-user.ipynb
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/docs/guide/01-setup-user.ipynb
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- lndb-0.40.1/docs/guide/02-init-instance.ipynb
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/docs/guide/02-init-instance.ipynb
â”‚ â”‚â”„ Files 1% similar despite different names
â”‚ â”‚ â”œâ”€â”€ Pretty-printed
â”‚ â”‚ â”‚â”„ Similarity: 0.9946808510638299%
â”‚ â”‚ â”‚â”„ Differences: {"'cells'": "{insert: [(45, OrderedDict([('cell_type', 'markdown'), ('metadata', OrderedDict()), "
â”‚ â”‚ â”‚â”„             "('source', ['For now, only assert the type.'])])), (46, OrderedDict([('cell_type', "
â”‚ â”‚ â”‚â”„             "'code'), ('execution_count', None), ('metadata', OrderedDict()), ('outputs', []), "
â”‚ â”‚ â”‚â”„             "('source', ['assert type(ln.setup.settings.storage.id)'])]))]}"}
â”‚ â”‚ â”‚ @@ -450,14 +450,30 @@
â”‚ â”‚ â”‚              "cell_type": "code",
â”‚ â”‚ â”‚              "execution_count": null,
â”‚ â”‚ â”‚              "metadata": {},
â”‚ â”‚ â”‚              "outputs": [],
â”‚ â”‚ â”‚              "source": [
â”‚ â”‚ â”‚                  "assert ln.setup.init(storage=\"mydata\") == \"migrate-unnecessary\""
â”‚ â”‚ â”‚              ]
â”‚ â”‚ â”‚ +        },
â”‚ â”‚ â”‚ +        {
â”‚ â”‚ â”‚ +            "cell_type": "markdown",
â”‚ â”‚ â”‚ +            "metadata": {},
â”‚ â”‚ â”‚ +            "source": [
â”‚ â”‚ â”‚ +                "For now, only assert the type."
â”‚ â”‚ â”‚ +            ]
â”‚ â”‚ â”‚ +        },
â”‚ â”‚ â”‚ +        {
â”‚ â”‚ â”‚ +            "cell_type": "code",
â”‚ â”‚ â”‚ +            "execution_count": null,
â”‚ â”‚ â”‚ +            "metadata": {},
â”‚ â”‚ â”‚ +            "outputs": [],
â”‚ â”‚ â”‚ +            "source": [
â”‚ â”‚ â”‚ +                "assert type(ln.setup.settings.storage.id)"
â”‚ â”‚ â”‚ +            ]
â”‚ â”‚ â”‚          }
â”‚ â”‚ â”‚      ],
â”‚ â”‚ â”‚      "metadata": {
â”‚ â”‚ â”‚          "kernelspec": {
â”‚ â”‚ â”‚              "display_name": "Python 3 (ipykernel)",
â”‚ â”‚ â”‚              "language": "python",
â”‚ â”‚ â”‚              "name": "python3"
â”‚ â”‚   --- lndb-0.40.1/docs/guide/03-load-instance.ipynb
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/docs/guide/03-load-instance.ipynb
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- lndb-0.40.1/docs/guide/04-set-storage.ipynb
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/docs/guide/04-set-storage.ipynb
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- lndb-0.40.1/docs/guide/05-schema-modules.ipynb
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/docs/guide/05-schema-modules.ipynb
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- lndb-0.40.1/docs/guide/06-info.ipynb
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/docs/guide/06-info.ipynb
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- lndb-0.40.1/docs/guide/07-delete.ipynb
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/docs/guide/07-delete.ipynb
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- lndb-0.40.1/docs/guide/migrate.md
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/docs/guide/migrate.md
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- lndb-0.40.1/lndb/__init__.py
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/lndb/__init__.py
â”‚ â”‚â”„ Files 1% similar despite different names
â”‚ â”‚ @@ -46,15 +46,15 @@
â”‚ â”‚  
â”‚ â”‚  .. autosummary::
â”‚ â”‚     :toctree:
â”‚ â”‚  
â”‚ â”‚     dev
â”‚ â”‚  """
â”‚ â”‚  
â”‚ â”‚ -__version__ = "0.40.1"  # denote a release candidate for 0.1.0 with 0.1rc1
â”‚ â”‚ +__version__ = "0.40.2"  # denote a release candidate for 0.1.0 with 0.1rc1
â”‚ â”‚  
â”‚ â”‚  import sys
â”‚ â”‚  from os import name as _os_name
â”‚ â”‚  
â”‚ â”‚  from . import _check_versions  # noqa
â”‚ â”‚  from . import dev, test
â”‚ â”‚  from ._close import close  # noqa
â”‚ â”‚   --- lndb-0.40.1/lndb/__main__.py
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/lndb/__main__.py
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- lndb-0.40.1/lndb/_delete.py
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/lndb/_delete.py
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- lndb-0.40.1/lndb/_init_instance.py
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/lndb/_init_instance.py
â”‚ â”‚â”„ Files 2% similar despite different names
â”‚ â”‚ @@ -22,15 +22,15 @@
â”‚ â”‚  from .dev._setup_schema import load_schema, setup_schema
â”‚ â”‚  from .dev._storage import Storage
â”‚ â”‚  
â”‚ â”‚  
â”‚ â”‚  def register(isettings: InstanceSettings, usettings):
â”‚ â”‚      """Register user & storage in DB."""
â”‚ â”‚      upsert.user(usettings.email, usettings.id, usettings.handle, usettings.name)
â”‚ â”‚ -    insert_if_not_exists.storage(isettings.storage.root, isettings.storage.region)
â”‚ â”‚ +    insert_if_not_exists.storage(isettings.storage)
â”‚ â”‚  
â”‚ â”‚  
â”‚ â”‚  def import_schema_lamin_root_api():
â”‚ â”‚      # only touch lamindb if we're operating from lamindb
â”‚ â”‚      if "lamindb" in sys.modules:
â”‚ â”‚          import lamindb
â”‚ â”‚   --- lndb-0.40.1/lndb/_load_instance.py
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/lndb/_load_instance.py
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- lndb-0.40.1/lndb/_migrate/alembic.ini
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/lndb/_migrate/alembic.ini
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- lndb-0.40.1/lndb/_migrate/core.py
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/lndb/_migrate/core.py
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- lndb-0.40.1/lndb/_migrate/deploy.py
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/lndb/_migrate/deploy.py
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- lndb-0.40.1/lndb/_migrate/env.py
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/lndb/_migrate/env.py
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- lndb-0.40.1/lndb/_migrate/utils.py
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/lndb/_migrate/utils.py
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- lndb-0.40.1/lndb/_schema.py
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/lndb/_schema.py
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- lndb-0.40.1/lndb/_set.py
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/lndb/_set.py
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- lndb-0.40.1/lndb/_settings.py
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/lndb/_settings.py
â”‚ â”‚â”„ Files 10% similar despite different names
â”‚ â”‚ @@ -1,11 +1,11 @@
â”‚ â”‚  import os
â”‚ â”‚  from typing import Union
â”‚ â”‚  
â”‚ â”‚ -from lndb.dev import InstanceSettings, Storage, UserSettings
â”‚ â”‚ +from lndb.dev import InstanceSettings, StorageSettings, UserSettings
â”‚ â”‚  from lndb.dev._settings_load import load_instance_settings, load_or_create_user_settings
â”‚ â”‚  
â”‚ â”‚  
â”‚ â”‚  # https://stackoverflow.com/questions/128573/using-property-on-classmethods/64738850#64738850
â”‚ â”‚  class classproperty(object):
â”‚ â”‚      def __init__(self, fget):
â”‚ â”‚          self.fget = fget
â”‚ â”‚ @@ -50,15 +50,15 @@
â”‚ â”‚              or cls._instance_settings_env != get_env_name()  # noqa
â”‚ â”‚          ):
â”‚ â”‚              cls._instance_settings = load_instance_settings()
â”‚ â”‚              cls._instance_settings_env = get_env_name()
â”‚ â”‚          return cls._instance_settings  # type: ignore
â”‚ â”‚  
â”‚ â”‚      @classproperty
â”‚ â”‚ -    def storage(cls) -> Storage:
â”‚ â”‚ +    def storage(cls) -> StorageSettings:
â”‚ â”‚          """Storage."""
â”‚ â”‚          return cls.instance.storage
â”‚ â”‚  
â”‚ â”‚      @classproperty
â”‚ â”‚      def _instance_exists(cls):
â”‚ â”‚          try:
â”‚ â”‚              cls.instance
â”‚ â”‚   --- lndb-0.40.1/lndb/_setup_user.py
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/lndb/_setup_user.py
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- lndb-0.40.1/lndb/dev/_clone.py
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/lndb/dev/_clone.py
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- lndb-0.40.1/lndb/dev/_db.py
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/lndb/dev/_db.py
â”‚ â”‚â”„ Files 10% similar despite different names
â”‚ â”‚ @@ -1,19 +1,18 @@
â”‚ â”‚  # We see a lot of import statements for lnschema_core below
â”‚ â”‚  # This is currently needed as we can only import the schema module
â”‚ â”‚  # once isettings have been adjusted
â”‚ â”‚ -from pathlib import Path
â”‚ â”‚ -from typing import Any, List, Optional, Union
â”‚ â”‚ +from typing import Any, List
â”‚ â”‚  
â”‚ â”‚  import sqlmodel as sqm
â”‚ â”‚  from lamin_logger import logger
â”‚ â”‚ -from lndb_storage import UPath
â”‚ â”‚  from sqlalchemy.exc import ProgrammingError
â”‚ â”‚  
â”‚ â”‚  from .._settings import settings
â”‚ â”‚ +from ._storage import StorageSettings
â”‚ â”‚  
â”‚ â”‚  
â”‚ â”‚  class upsert:
â”‚ â”‚      @classmethod
â”‚ â”‚      def user(cls, email: str, user_id: str, handle: str, name: str = None):
â”‚ â”‚          import lnschema_core as schema_core
â”‚ â”‚  
â”‚ â”‚ @@ -65,28 +64,24 @@
â”‚ â”‚  class insert_if_not_exists:
â”‚ â”‚      """Insert data if it does not yet exist.
â”‚ â”‚  
â”‚ â”‚      A wrapper around the `insert` class below.
â”‚ â”‚      """
â”‚ â”‚  
â”‚ â”‚      @classmethod
â”‚ â”‚ -    def storage(cls, root: Union[Path, UPath], region: Optional[str]):
â”‚ â”‚ -        from lnschema_core import Storage
â”‚ â”‚ +    def storage(cls, storage_settings: StorageSettings):
â”‚ â”‚ +        from lnschema_core import Storage as StorageORM
â”‚ â”‚  
â”‚ â”‚ -        if isinstance(root, UPath):
â”‚ â”‚ -            root_str = root.as_posix().rstrip("/")
â”‚ â”‚ -        else:
â”‚ â”‚ -            root_str = root.resolve().as_posix()
â”‚ â”‚ +        root_str = storage_settings.root_as_str
â”‚ â”‚          with sqm.Session(settings.instance.engine) as session:
â”‚ â”‚              storage = session.exec(
â”‚ â”‚ -                sqm.select(Storage).where(Storage.root == root_str)
â”‚ â”‚ +                sqm.select(StorageORM).where(StorageORM.root == root_str)
â”‚ â”‚              ).first()
â”‚ â”‚          if storage is None:
â”‚ â”‚ -            storage = insert.storage(root_str, region)
â”‚ â”‚ -
â”‚ â”‚ +            storage = insert.storage(root_str, storage_settings.region)
â”‚ â”‚          return storage
â”‚ â”‚  
â”‚ â”‚  
â”‚ â”‚  class insert:
â”‚ â”‚      """Insert data."""
â”‚ â”‚  
â”‚ â”‚      # this here actually first checks for existence
â”‚ â”‚   --- lndb-0.40.1/lndb/dev/_deprecated.py
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/lndb/dev/_deprecated.py
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- lndb-0.40.1/lndb/dev/_exclusion.py
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/lndb/dev/_exclusion.py
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- lndb-0.40.1/lndb/dev/_settings_instance.py
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/lndb/dev/_settings_instance.py
â”‚ â”‚â”„ Files 0% similar despite different names
â”‚ â”‚ @@ -39,15 +39,17 @@
â”‚ â”‚          storage_root: Union[str, Path, UPath],  # storage location on cloud
â”‚ â”‚          storage_region: Optional[str] = None,
â”‚ â”‚          db: Optional[PostgresDsn] = None,  # DB URI
â”‚ â”‚          schema: Optional[str] = None,  # comma-separated string of schema names
â”‚ â”‚      ):
â”‚ â”‚          self._owner: str = owner
â”‚ â”‚          self._name: str = name
â”‚ â”‚ -        self._storage: Storage = Storage(storage_root, region=storage_region)
â”‚ â”‚ +        self._storage: Storage = Storage(
â”‚ â”‚ +            storage_root, instance_settings=self, region=storage_region
â”‚ â”‚ +        )
â”‚ â”‚          self._db: Optional[str] = db
â”‚ â”‚          self._schema_str: Optional[str] = schema
â”‚ â”‚          self._engine: Engine = sqm.create_engine(self.db)
â”‚ â”‚  
â”‚ â”‚      def __repr__(self):
â”‚ â”‚          """Rich string representation."""
â”‚ â”‚          representation = f"Current instance: {self.identifier}"
â”‚ â”‚   --- lndb-0.40.1/lndb/dev/_settings_load.py
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/lndb/dev/_settings_load.py
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- lndb-0.40.1/lndb/dev/_settings_save.py
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/lndb/dev/_settings_save.py
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- lndb-0.40.1/lndb/dev/_settings_store.py
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/lndb/dev/_settings_store.py
â”‚ â”‚â”„ Files 4% similar despite different names
â”‚ â”‚ @@ -3,18 +3,15 @@
â”‚ â”‚  from pathlib import Path
â”‚ â”‚  
â”‚ â”‚  from lamin_logger import logger
â”‚ â”‚  from pydantic import BaseSettings
â”‚ â”‚  
â”‚ â”‚  
â”‚ â”‚  def get_settings_dir():
â”‚ â”‚ -    if "LAMIN_BASE_SETTINGS_DIR" in os.environ:
â”‚ â”‚ -        settings_dir = Path(os.environ["LAMIN_BASE_SETTINGS_DIR"]) / ".lamin"
â”‚ â”‚ -    else:
â”‚ â”‚ -        settings_dir = Path.home() / ".lamin"
â”‚ â”‚ +    settings_dir = Path.home() / ".lamin"
â”‚ â”‚      settings_dir.mkdir(parents=True, exist_ok=True)
â”‚ â”‚      # deal with legacy settings directory
â”‚ â”‚      legacy_dir = settings_dir.with_name(".lndb")
â”‚ â”‚      if legacy_dir.exists():
â”‚ â”‚          if not settings_dir.exists():
â”‚ â”‚              legacy_dir.rename(settings_dir)
â”‚ â”‚              logger.info(f"Renamed legacy settings dir {legacy_dir} to {settings_dir}")
â”‚ â”‚   --- lndb-0.40.1/lndb/dev/_settings_user.py
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/lndb/dev/_settings_user.py
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- lndb-0.40.1/lndb/dev/_setup_knowledge.py
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/lndb/dev/_setup_knowledge.py
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- lndb-0.40.1/lndb/dev/_setup_schema.py
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/lndb/dev/_setup_schema.py
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- lndb-0.40.1/lndb/dev/_storage.py
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/lndb/dev/_storage.py
â”‚ â”‚â”„ Files 19% similar despite different names
â”‚ â”‚ @@ -1,58 +1,82 @@
â”‚ â”‚  import os
â”‚ â”‚  from pathlib import Path
â”‚ â”‚  from typing import Literal, Optional, Union
â”‚ â”‚  
â”‚ â”‚ +import sqlmodel as sqm
â”‚ â”‚  from appdirs import AppDirs
â”‚ â”‚  from lndb_storage import UPath
â”‚ â”‚  
â”‚ â”‚  DIRS = AppDirs("lamindb", "laminlabs")
â”‚ â”‚  
â”‚ â”‚  
â”‚ â”‚ -class Storage:
â”‚ â”‚ -    """Manage cloud or local storage."""
â”‚ â”‚ +class StorageSettings:
â”‚ â”‚ +    """Manage cloud or local storage settings."""
â”‚ â”‚  
â”‚ â”‚ -    def __init__(self, root: Union[str, Path, UPath], region: Optional[str] = None):
â”‚ â”‚ +    # we can't type instance_settings if we keep it in this separate file
â”‚ â”‚ +    def __init__(
â”‚ â”‚ +        self,
â”‚ â”‚ +        root: Union[str, Path, UPath],
â”‚ â”‚ +        instance_settings,
â”‚ â”‚ +        region: Optional[str] = None,
â”‚ â”‚ +    ):
â”‚ â”‚          if isinstance(root, UPath):
â”‚ â”‚              root_path = root
â”‚ â”‚          elif isinstance(root, Path):
â”‚ â”‚              root.mkdir(parents=True, exist_ok=True)  # resolve fails for nonexisting dir
â”‚ â”‚              root_path = root.resolve()
â”‚ â”‚          elif isinstance(root, str):
â”‚ â”‚              root_path = Storage._str_to_path(root)
â”‚ â”‚          else:
â”‚ â”‚              raise ValueError("root should be of type Union[str, Path, UPath].")
â”‚ â”‚          self._root = root_path
â”‚ â”‚          self._region = region
â”‚ â”‚ +        self._id: Optional[str] = None
â”‚ â”‚ +        self._instance_settings = instance_settings
â”‚ â”‚  
â”‚ â”‚      @staticmethod
â”‚ â”‚      def _str_to_path(storage: str) -> Union[Path, UPath]:
â”‚ â”‚          if storage.startswith("s3://"):
â”‚ â”‚              # for new buckets there could be problems if the region is not specified
â”‚ â”‚              storage_root = UPath(storage, cache_regions=True)
â”‚ â”‚          elif storage.startswith("gs://"):
â”‚ â”‚              storage_root = UPath(storage)
â”‚ â”‚          else:  # local path
â”‚ â”‚              os.makedirs(storage, exist_ok=True)  # resolve fails for nonexisting dir
â”‚ â”‚              storage_root = Path(storage).resolve()
â”‚ â”‚          return storage_root
â”‚ â”‚  
â”‚ â”‚      @property
â”‚ â”‚ +    def id(self) -> str:
â”‚ â”‚ +        """Storage id."""
â”‚ â”‚ +        if self._id is None:
â”‚ â”‚ +            from lnschema_core import Storage
â”‚ â”‚ +
â”‚ â”‚ +            with sqm.Session(self._instance_settings.engine) as session:
â”‚ â”‚ +                # needs to have been registered before!
â”‚ â”‚ +                storage = session.exec(
â”‚ â”‚ +                    sqm.select(Storage).where(Storage.root == self.root_as_str)
â”‚ â”‚ +                ).one_or_none()
â”‚ â”‚ +            if storage is None:
â”‚ â”‚ +                raise RuntimeError(
â”‚ â”‚ +                    f"{self.root_as_str} wasn't registered in the db! "
â”‚ â”‚ +                    "Check ln.select(ln.Storage).all()"
â”‚ â”‚ +                )
â”‚ â”‚ +            self._id = storage.id
â”‚ â”‚ +        return self._id
â”‚ â”‚ +
â”‚ â”‚ +    @property
â”‚ â”‚      def root(self) -> Union[Path, UPath]:
â”‚ â”‚          """Root storage location."""
â”‚ â”‚          return self._root
â”‚ â”‚  
â”‚ â”‚      @property
â”‚ â”‚      def root_as_str(self) -> str:
â”‚ â”‚          """Formatted root string."""
â”‚ â”‚ -        root_str = self.root.as_posix()
â”‚ â”‚ -        if root_str[-1] == "/":
â”‚ â”‚ -            return root_str[:-1]
â”‚ â”‚ -        else:
â”‚ â”‚ -            return root_str
â”‚ â”‚ +        return self.root.as_posix().rstrip("/")
â”‚ â”‚  
â”‚ â”‚      @property
â”‚ â”‚      def cache_dir(
â”‚ â”‚          self,
â”‚ â”‚      ) -> Union[Path, None]:
â”‚ â”‚          """Cache root, a local directory to cache cloud files."""
â”‚ â”‚          if self.is_cloud:
â”‚ â”‚ @@ -107,7 +131,11 @@
â”‚ â”‚          if self.is_cloud:
â”‚ â”‚              return self.cache_dir.joinpath(filepath._url.netloc, *filepath.parts[1:])  # type: ignore # noqa
â”‚ â”‚          return filepath
â”‚ â”‚  
â”‚ â”‚      def local_filepath(self, filekey: Union[Path, UPath, str]) -> Path:
â”‚ â”‚          """Local (cache) filepath from filekey: `local(filepath(...))`."""
â”‚ â”‚          return self.cloud_to_local(self.key_to_filepath(filekey))
â”‚ â”‚ +
â”‚ â”‚ +
â”‚ â”‚ +# below is for backward compat
â”‚ â”‚ +Storage = StorageSettings
â”‚ â”‚   --- lndb-0.40.1/lndb/test/_migrations_e2e.py
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/lndb/test/_migrations_e2e.py
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- lndb-0.40.1/lndb/test/_migrations_unit.py
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/lndb/test/_migrations_unit.py
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- lndb-0.40.1/noxfile.py
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/noxfile.py
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- lndb-0.40.1/pyproject.toml
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/pyproject.toml
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- lndb-0.40.1/tests/test_init_instance.py
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/tests/test_init_instance.py
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- lndb-0.40.1/PKG-INFO
â”‚ â”œâ”€â”€ +++ lndb-0.40.2/PKG-INFO
â”‚ â”‚â”„ Files 0% similar despite different names
â”‚ â”‚ @@ -1,10 +1,10 @@
â”‚ â”‚  Metadata-Version: 2.1
â”‚ â”‚  Name: lndb
â”‚ â”‚ -Version: 0.40.1
â”‚ â”‚ +Version: 0.40.2
â”‚ â”‚  Summary: LaminDB setup.
â”‚ â”‚  Author-email: Lamin Labs <laminlabs@gmail.com>
â”‚ â”‚  Description-Content-Type: text/markdown
â”‚ â”‚  Requires-Dist: lnhub_rest==0.7.2
â”‚ â”‚  Requires-Dist: lndb_storage==0.2rc2
â”‚ â”‚  Requires-Dist: laminci>=0.3.0
â”‚ â”‚  Requires-Dist: lnschema_core>=0.28.0
