<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="x-ua-compatible" content="IE=edge">
  <meta name="referrer" content="no-referrer" />
  <meta name="generator" content="diffoscope" />
  <link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAADdgAAA3YBfdWCzAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAM8SURBVFiF7dZdaJZlGAfw3/O+e9XNjy3XllZzWImBxIpifqTgsmUHBSIeBNFBdRh0UHQ0xGdb66CFBIERZEFRQRRUw0HkQkLMYQSBdpCFWdgSP6jpNn2393k68Nn2bj3vXtb6UOh/cl/39b/u67mem/913zf/4z9GUDw5xNI8n5WIzW9m/QF2YluJmI8203mALzEvLWAerRs4Pz6vSIkZSlsYk0/GkaB0zEgyDgWMlijyWsJuS2fkQwu8pqpMTA0ypeiShG71Bp0rU8Q+A47MWEDgvHZbZl/Av4SpIgxVYB3IqwZDmoUuYkzosDaNchpAoFqkSmgjGPWzLieF1k3JHVsjvCJQHBYaSy9g1E3m+QImQiK9SbNGqJDzuiDZ0lggQJCsyelDq8BB47sbCWTsnvhG3kqcLL833eqF4hk1EOoTOjZjnnaRdq2l6KtMAyl4/g23bKJrun+Mt9uOq7nvqOVbebWYy9Adc1fM/R/3CO780dONbIeFPHsPw+ULeM5ZHTbXHfUtXpxOZzgT5z02UGsZThRzF/ilht9G+fr4zfbfccIxXIa7uVTup69i7LJXaEEqF3on1d9ludBLpVLOVoT1lky9QYtwQ6p3WAVqSyUslWwSbRrkPJrMtgn0iBVk7BPJ4sGE24EPQKW3jLgdzWKLBTbg0yTuZeGkDsp2gcUGDesHGQ/gK5G8nLMigWiCe3jCrnTRiJ9EYjm1ImsUEq5l8hScPXbpsVtlKhfan+pv0yD0ZqmU5XegGBmnDIo/pylj8oYLOP3Eab/v5Zmi6EtZ3vv1FU/2r7LioYSL2dNybbdiMdptFU57++20Vqh+iq/Tap1WpaWY611wmyWyUzxZDbIWTvEV1Ildn5agfBumoUMTtoisFvhebAAHZWxX0ChwTuScvHdVeVykToysMyJ7ittwbmj31J+6IrRDp5XTfBt1WJ+WYnZdMB0F3xlUgD5uDVj2Sa+a4SrzH+FeyHHmw17V112waBOZgP4WczkLZsILar1fpIliMU4XZoK/poE0XHl+N8v6QcGAUbVymnDIZVnzrTXqGzmnhKLxZX/niyiDjIJgwg4Se1GR/Y8idGPysh6fr0i1i/AHMWHgrwUJgNAAAAAASUVORK5CYII=" />
  <title>/srv/diffoscope/bin/diffoscope --no-progress tmp/ovos_local_backend-0.1.6a9-py3-none-any.whl.zip tmp/ovos_local_backend-0.2.0a2-py3-none-any.whl.zip --html versions/o/ovos-local-backend/0.1.6a9-0.2.0a2/index.html --text versions/o/ovos-local-backend/0.1.6a9-0.2.0a2/diff.txt --markdown versions/o/ovos-local-backend/0.1.6a9-0.2.0a2/diff.md</title>
<style>
body.diffoscope {
  background: white;
  color: black;
}
.diffoscope .footer {
  font-size: small;
}
.diffoscope .difference {
  border: outset #888 1px;
  background: #E8E8E8;
  background: rgba(0,0,0,.1);
  padding: 0.5em;
  margin: 0.5em 0;
}
.diffoscope .difference table {
  table-layout: fixed;
  width: 100%;
  border: 0;
}
.diffoscope .difference th,
.diffoscope .difference td {
  border: 0;
}
.diffoscope table.diff {
  border: 0;
  border-collapse:collapse;
  font-size:0.75em;
  font-family: 'Lucida Console', monospace;
  word-break: break-word;
}
.diffoscope table.diff tr:hover td {
  background: #FFFF00;
}
.diffoscope .line {
  color:#8080a0
}
.diffoscope th {
  background: black;
  color: white
}
.diffoscope .diffunmodified td {
  background: #D0D0E0
}
.diffoscope .diffhunk td {
  background: #A0A0A0
}
.diffoscope .diffadded td {
  background: #CCFFCC
}
.diffoscope .diffdeleted td {
  background: #FFCCCC
}
.diffoscope .diffchanged td {
  background: #FFFFA0
}
.diffoscope ins, del {
  background: #E0C880;
  text-decoration: none
}
.diffoscope .dp {
  color: #B08080
}
.diffoscope .comment {
  font-style: italic;
}
.diffoscope .comment.multiline {
  font-style: normal;
  font-family: monospace;
  white-space: pre;
}
.diffoscope .source {
  font-weight: bold;
}
.diffoscope .error {
  border: solid black 1px;
  background: red;
  color: white;
  padding: 0.2em;
}
.diffoscope .anchor {
  margin-left: 0.5em;
  font-size: 80%;
  color: #333;
  text-decoration: none;
  display: none;
}
.diffoscope .diffheader:hover .anchor {
  display: inline;
}
.diffoscope .diffcontrol, .diffoscope .diffcontrol-nochildren {
  float: left;
  margin-right: 0.3em;
  cursor: pointer;
  display: none; /* currently, only available in html-dir output where jquery is enabled */
}
.diffoscope .colines {
  width: 3em;
}
.diffoscope .coldiff {
  width: 99%;
}
.diffoscope .diffsize {
  float: right;
}
.diffoscope table.diff tr.ondemand td, .diffoscope div.ondemand-details {
  background: #f99;
  text-align: center;
  padding: 0.5em 0;
}
.diffoscope table.diff tr.ondemand:hover td, .diffoscope div.ondemand-details:hover {
  background: #faa;
  cursor: pointer;
}
</style>
</head>
<body class="diffoscope">
<div class="difference">
  <div class="diffheader">
  <div class="diffcontrol diffcontrol-double">⊟</div>
  <div><span class="diffsize">37.2 KB</span></div>
  <div><span class="source">tmp/ovos_local_backend-0.1.6a9-py3-none-any.whl.zip</span> vs.</div>
  <div id="top"><span class="source">tmp/ovos_local_backend-0.2.0a2-py3-none-any.whl.zip</span>
    <a class="anchor" href="#top">¶</a>
  </div>
  </div>
  <div class="difference">
    <div class="diffheader">
    <div class="diffcontrol">⊟</div>
    <div><span class="diffsize">4.98 KB</span></div>
    <div id="zipinfo---"><span class="source">zipinfo {}</span>
      <a class="anchor" href="#zipinfo---">¶</a>
    </div>
    </div>
<table class="diff">
<colgroup><col class="colines"/><col class="coldiff"/>
<col class="colines"/><col class="coldiff"/></colgroup>
<tr style="display:none;"><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr class="diffhunk"><td colspan="2">Offset 1, 30 lines modified</td><td colspan="2">Offset 1, 26 lines modified</td></tr>
<tr class="diffchanged"><td class="diffline">1 </td><td class="diffpresent">Zip<span class="dp">·</span>file<span class="dp">·</span>size:<span class="dp">·</span>3<del>2282</del><span class="dp">·</span>bytes,<span class="dp">·</span>number<span class="dp">·</span>of<span class="dp">·</span>entries:<span class="dp">·</span>2<del>8</del></td><td class="diffline">1 </td><td class="diffpresent">Zip<span class="dp">·</span>file<span class="dp">·</span>size:<span class="dp">·</span>3<ins>3674</ins><span class="dp">·</span>bytes,<span class="dp">·</span>number<span class="dp">·</span>of<span class="dp">·</span>entries:<span class="dp">·</span>2<ins>4</ins></td></tr>
<tr class="diffchanged"><td class="diffline">2 </td><td class="diffpresent">-rw-r--r--<span class="dp">·</span><span class="dp">·</span>2.0<span class="dp">·</span>unx<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>53<span class="dp">·</span>b-<span class="dp">·</span>defN<span class="dp">·</span>23-<del>Ma</del>r-<del>30</del><span class="dp">·</span>0<del>6</del>:<del>3</del>4<span class="dp">·</span>ovos_local_backend/__init__.py</td><td class="diffline">2 </td><td class="diffpresent">-rw-r--r--<span class="dp">·</span><span class="dp">·</span>2.0<span class="dp">·</span>unx<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>53<span class="dp">·</span>b-<span class="dp">·</span>defN<span class="dp">·</span>23-<ins>Ap</ins>r-<ins>07</ins><span class="dp">·</span>0<ins>1</ins>:<ins>0</ins>4<span class="dp">·</span>ovos_local_backend/__init__.py</td></tr>
<tr class="diffchanged"><td class="diffline">3 </td><td class="diffpresent">-rw-r--r--<span class="dp">·</span><span class="dp">·</span>2.0<span class="dp">·</span>unx<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>555<span class="dp">·</span>b-<span class="dp">·</span>defN<span class="dp">·</span>23-<del>Ma</del>r-<del>30</del><span class="dp">·</span>0<del>6</del>:<del>3</del>4<span class="dp">·</span>ovos_local_backend/__main__.py</td><td class="diffline">3 </td><td class="diffpresent">-rw-r--r--<span class="dp">·</span><span class="dp">·</span>2.0<span class="dp">·</span>unx<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>555<span class="dp">·</span>b-<span class="dp">·</span>defN<span class="dp">·</span>23-<ins>Ap</ins>r-<ins>07</ins><span class="dp">·</span>0<ins>1</ins>:<ins>0</ins>4<span class="dp">·</span>ovos_local_backend/__main__.py</td></tr>
<tr class="diffchanged"><td class="diffline">4 </td><td class="diffpresent">-rw-r--r--<span class="dp">·</span><span class="dp">·</span>2.0<span class="dp">·</span>unx<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>9<del>030</del><span class="dp">·</span>b-<span class="dp">·</span>defN<span class="dp">·</span>23-<del>Ma</del>r-<del>30</del><span class="dp">·</span>0<del>6</del>:<del>3</del>4<span class="dp">·</span>ovos_local_backend/configuration.py</td><td class="diffline">4 </td><td class="diffpresent">-rw-r--r--<span class="dp">·</span><span class="dp">·</span>2.0<span class="dp">·</span>unx<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>9<ins>116</ins><span class="dp">·</span>b-<span class="dp">·</span>defN<span class="dp">·</span>23-<ins>Ap</ins>r-<ins>07</ins><span class="dp">·</span>0<ins>1</ins>:<ins>0</ins>4<span class="dp">·</span>ovos_local_backend/configuration.py</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">5 </td><td class="diffpresent">-rw-r--r--<span class="dp">·</span><span class="dp">·</span>2.0<span class="dp">·</span>unx<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>33972<span class="dp">·</span>b-<span class="dp">·</span>defN<span class="dp">·</span>23-Apr-07<span class="dp">·</span>01:04<span class="dp">·</span>ovos_local_backend/database.py</td></tr>
<tr class="diffchanged"><td class="diffline">5 </td><td class="diffpresent">-rw-r--r--<span class="dp">·</span><span class="dp">·</span>2.0<span class="dp">·</span>unx<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>103<span class="dp">·</span>b-<span class="dp">·</span>defN<span class="dp">·</span>23-<del>Ma</del>r-<del>30</del><span class="dp">·</span>0<del>6</del>:<del>3</del>4<span class="dp">·</span>ovos_local_backend/session.py</td><td class="diffline">6 </td><td class="diffpresent">-rw-r--r--<span class="dp">·</span><span class="dp">·</span>2.0<span class="dp">·</span>unx<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>103<span class="dp">·</span>b-<span class="dp">·</span>defN<span class="dp">·</span>23-<ins>Ap</ins>r-<ins>07</ins><span class="dp">·</span>0<ins>1</ins>:<ins>0</ins>4<span class="dp">·</span>ovos_local_backend/session.py</td></tr>
<tr class="diffchanged"><td class="diffline">6 </td><td class="diffpresent">-rw-r--r--<span class="dp">·</span><span class="dp">·</span>2.0<span class="dp">·</span>unx<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>177<span class="dp">·</span>b-<span class="dp">·</span>defN<span class="dp">·</span>23-<del>Ma</del>r-<del>30</del><span class="dp">·</span>0<del>6</del>:<del>3</del>4<span class="dp">·</span>ovos_local_backend/version.py</td><td class="diffline">7 </td><td class="diffpresent">-rw-r--r--<span class="dp">·</span><span class="dp">·</span>2.0<span class="dp">·</span>unx<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>177<span class="dp">·</span>b-<span class="dp">·</span>defN<span class="dp">·</span>23-<ins>Ap</ins>r-<ins>07</ins><span class="dp">·</span>0<ins>1</ins>:<ins>0</ins>4<span class="dp">·</span>ovos_local_backend/version.py</td></tr>
<tr class="diffchanged"><td class="diffline">7 </td><td class="diffpresent">-rw-r--r--<span class="dp">·</span><span class="dp">·</span>2.0<span class="dp">·</span>unx<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>1<del>9</del>2<del>0</del><span class="dp">·</span>b-<span class="dp">·</span>defN<span class="dp">·</span>23-<del>Ma</del>r-<del>30</del><span class="dp">·</span>0<del>6</del>:<del>3</del>4<span class="dp">·</span>ovos_local_backend/backend/__init__.py</td><td class="diffline">8 </td><td class="diffpresent">-rw-r--r--<span class="dp">·</span><span class="dp">·</span>2.0<span class="dp">·</span>unx<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><ins>2</ins>1<ins>0</ins>2<span class="dp">·</span>b-<span class="dp">·</span>defN<span class="dp">·</span>23-<ins>Ap</ins>r-<ins>07</ins><span class="dp">·</span>0<ins>1</ins>:<ins>0</ins>4<span class="dp">·</span>ovos_local_backend/backend/__init__.py</td></tr>
<tr class="diffchanged"><td class="diffline">8 </td><td class="diffpresent">-rw-r--r--<span class="dp">·</span><span class="dp">·</span>2.0<span class="dp">·</span>unx<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><del>4584</del><span class="dp">·</span>b-<span class="dp">·</span>defN<span class="dp">·</span>23-<del>Ma</del>r-<del>30</del><span class="dp">·</span>0<del>6</del>:<del>3</del>4<span class="dp">·</span>ovos_local_backend/backend/admin.py</td><td class="diffline">9 </td><td class="diffpresent">-rw-r--r--<span class="dp">·</span><span class="dp">·</span>2.0<span class="dp">·</span>unx<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><ins>2220</ins><span class="dp">·</span>b-<span class="dp">·</span>defN<span class="dp">·</span>23-<ins>Ap</ins>r-<ins>07</ins><span class="dp">·</span>0<ins>1</ins>:<ins>0</ins>4<span class="dp">·</span>ovos_local_backend/backend/admin.py</td></tr>
<tr class="diffchanged"><td class="diffline">9 </td><td class="diffpresent">-rw-r--r--<span class="dp">·</span><span class="dp">·</span>2.0<span class="dp">·</span>unx<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>4<del>232</del><span class="dp">·</span>b-<span class="dp">·</span>defN<span class="dp">·</span>23-<del>Ma</del>r-<del>30</del><span class="dp">·</span>0<del>6</del>:<del>3</del>4<span class="dp">·</span>ovos_local_backend/backend/auth.py</td><td class="diffline">10 </td><td class="diffpresent">-rw-r--r--<span class="dp">·</span><span class="dp">·</span>2.0<span class="dp">·</span>unx<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>4<ins>453</ins><span class="dp">·</span>b-<span class="dp">·</span>defN<span class="dp">·</span>23-<ins>Ap</ins>r-<ins>07</ins><span class="dp">·</span>0<ins>1</ins>:<ins>0</ins>4<span class="dp">·</span>ovos_local_backend/backend/auth.py</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">11 </td><td class="diffpresent">-rw-r--r--<span class="dp">·</span><span class="dp">·</span>2.0<span class="dp">·</span>unx<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>13647<span class="dp">·</span>b-<span class="dp">·</span>defN<span class="dp">·</span>23-Apr-07<span class="dp">·</span>01:04<span class="dp">·</span>ovos_local_backend/backend/crud.py</td></tr>
<tr class="diffchanged"><td class="diffline">10 </td><td class="diffpresent">-rw-r--r--<span class="dp">·</span><span class="dp">·</span>2.0<span class="dp">·</span>unx<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>33<del>70</del><span class="dp">·</span>b-<span class="dp">·</span>defN<span class="dp">·</span>23-<del>Ma</del>r-<del>30</del><span class="dp">·</span>0<del>6</del>:<del>3</del>4<span class="dp">·</span>ovos_local_backend/backend/decorators.py</td><td class="diffline">12 </td><td class="diffpresent">-rw-r--r--<span class="dp">·</span><span class="dp">·</span>2.0<span class="dp">·</span>unx<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>33<ins>88</ins><span class="dp">·</span>b-<span class="dp">·</span>defN<span class="dp">·</span>23-<ins>Ap</ins>r-<ins>07</ins><span class="dp">·</span>0<ins>1</ins>:<ins>0</ins>4<span class="dp">·</span>ovos_local_backend/backend/decorators.py</td></tr>
<tr class="diffchanged"><td class="diffline">11 </td><td class="diffpresent">-rw-r--r--<span class="dp">·</span><span class="dp">·</span>2.0<span class="dp">·</span>unx<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><del>812</del>3<span class="dp">·</span>b-<span class="dp">·</span>defN<span class="dp">·</span>23-<del>Ma</del>r-<del>30</del><span class="dp">·</span>0<del>6</del>:<del>3</del>4<span class="dp">·</span>ovos_local_backend/backend/device.py</td><td class="diffline">13 </td><td class="diffpresent">-rw-r--r--<span class="dp">·</span><span class="dp">·</span>2.0<span class="dp">·</span>unx<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><ins>794</ins>3<span class="dp">·</span>b-<span class="dp">·</span>defN<span class="dp">·</span>23-<ins>Ap</ins>r-<ins>07</ins><span class="dp">·</span>0<ins>1</ins>:<ins>0</ins>4<span class="dp">·</span>ovos_local_backend/backend/device.py</td></tr>
<tr class="diffchanged"><td class="diffline">12 </td><td class="diffpresent">-rw-r--r--<span class="dp">·</span><span class="dp">·</span>2.0<span class="dp">·</span>unx<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>4<del>727</del><span class="dp">·</span>b-<span class="dp">·</span>defN<span class="dp">·</span>23-<del>Ma</del>r-<del>30</del><span class="dp">·</span>0<del>6</del>:<del>3</del>4<span class="dp">·</span>ovos_local_backend/backend/external_apis.py</td><td class="diffline">14 </td><td class="diffpresent">-rw-r--r--<span class="dp">·</span><span class="dp">·</span>2.0<span class="dp">·</span>unx<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>4<ins>663</ins><span class="dp">·</span>b-<span class="dp">·</span>defN<span class="dp">·</span>23-<ins>Ap</ins>r-<ins>07</ins><span class="dp">·</span>0<ins>1</ins>:<ins>0</ins>4<span class="dp">·</span>ovos_local_backend/backend/external_apis.py</td></tr>
<tr class="diffchanged"><td class="diffline">13 </td><td class="diffpresent">-rw-r--r--<span class="dp">·</span><span class="dp">·</span>2.0<span class="dp">·</span>unx<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><del>1149</del><span class="dp">·</span>b-<span class="dp">·</span>defN<span class="dp">·</span>23-<del>Ma</del>r-<del>30</del><span class="dp">·</span>0<del>6</del>:<del>3</del>4<span class="dp">·</span>ovos_local_backend/backend/precise.py</td><td class="diffline">15 </td><td class="diffpresent">-rw-r--r--<span class="dp">·</span><span class="dp">·</span>2.0<span class="dp">·</span>unx<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><ins>2253</ins><span class="dp">·</span>b-<span class="dp">·</span>defN<span class="dp">·</span>23-<ins>Ap</ins>r-<ins>07</ins><span class="dp">·</span>0<ins>1</ins>:<ins>0</ins>4<span class="dp">·</span>ovos_local_backend/backend/precise.py</td></tr>
<tr class="diffchanged"><td class="diffline">14 </td><td class="diffpresent">-rw-r--r--<span class="dp">·</span><span class="dp">·</span>2.0<span class="dp">·</span>unx<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><del>1944</del><span class="dp">·</span>b-<span class="dp">·</span>defN<span class="dp">·</span>23-<del>Ma</del>r-<del>30</del><span class="dp">·</span>0<del>6</del>:<del>3</del>4<span class="dp">·</span>ovos_local_backend/backend/stt.py</td><td class="diffline">16 </td><td class="diffpresent">-rw-r--r--<span class="dp">·</span><span class="dp">·</span>2.0<span class="dp">·</span>unx<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><ins>2107</ins><span class="dp">·</span>b-<span class="dp">·</span>defN<span class="dp">·</span>23-<ins>Ap</ins>r-<ins>07</ins><span class="dp">·</span>0<ins>1</ins>:<ins>0</ins>4<span class="dp">·</span>ovos_local_backend/backend/stt.py</td></tr>
<tr class="diffdeleted"><td class="diffline">15 </td><td class="diffpresent">-rw-r--r--<span class="dp">·</span><span class="dp">·</span>2.0<span class="dp">·</span>unx<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>0<span class="dp">·</span>b-<span class="dp">·</span>defN<span class="dp">·</span>23-Mar-30<span class="dp">·</span>06:34<span class="dp">·</span>ovos_local_backend/database/__init__.py</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">16 </td><td class="diffpresent">-rw-r--r--<span class="dp">·</span><span class="dp">·</span>2.0<span class="dp">·</span>unx<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>1195<span class="dp">·</span>b-<span class="dp">·</span>defN<span class="dp">·</span>23-Mar-30<span class="dp">·</span>06:34<span class="dp">·</span>ovos_local_backend/database/metrics.py</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">17 </td><td class="diffpresent">-rw-r--r--<span class="dp">·</span><span class="dp">·</span>2.0<span class="dp">·</span>unx<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>112<span class="dp">·</span>b-<span class="dp">·</span>defN<span class="dp">·</span>23-Mar-30<span class="dp">·</span>06:34<span class="dp">·</span>ovos_local_backend/database/oauth.py</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">18 </td><td class="diffpresent">-rw-r--r--<span class="dp">·</span><span class="dp">·</span>2.0<span class="dp">·</span>unx<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>14676<span class="dp">·</span>b-<span class="dp">·</span>defN<span class="dp">·</span>23-Mar-30<span class="dp">·</span>06:34<span class="dp">·</span>ovos_local_backend/database/settings.py</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">19 </td><td class="diffpresent">-rw-r--r--<span class="dp">·</span><span class="dp">·</span>2.0<span class="dp">·</span>unx<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>1659<span class="dp">·</span>b-<span class="dp">·</span>defN<span class="dp">·</span>23-Mar-30<span class="dp">·</span>06:34<span class="dp">·</span>ovos_local_backend/database/utterances.py</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">20 </td><td class="diffpresent">-rw-r--r--<span class="dp">·</span><span class="dp">·</span>2.0<span class="dp">·</span>unx<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>2895<span class="dp">·</span>b-<span class="dp">·</span>defN<span class="dp">·</span>23-Mar-30<span class="dp">·</span>06:34<span class="dp">·</span>ovos_local_backend/database/wakewords.py</td><td colspan="2"> </td></tr>
<tr class="diffchanged"><td class="diffline">21 </td><td class="diffpresent">-rw-r--r--<span class="dp">·</span><span class="dp">·</span>2.0<span class="dp">·</span>unx<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>9836<span class="dp">·</span>b-<span class="dp">·</span>defN<span class="dp">·</span>23-<del>Ma</del>r-<del>30</del><span class="dp">·</span>0<del>6</del>:<del>3</del>4<span class="dp">·</span>ovos_local_backend/utils/__init__.py</td><td class="diffline">17 </td><td class="diffpresent">-rw-r--r--<span class="dp">·</span><span class="dp">·</span>2.0<span class="dp">·</span>unx<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>9836<span class="dp">·</span>b-<span class="dp">·</span>defN<span class="dp">·</span>23-<ins>Ap</ins>r-<ins>07</ins><span class="dp">·</span>0<ins>1</ins>:<ins>0</ins>4<span class="dp">·</span>ovos_local_backend/utils/__init__.py</td></tr>
<tr class="diffchanged"><td class="diffline">22 </td><td class="diffpresent">-rw-r--r--<span class="dp">·</span><span class="dp">·</span>2.0<span class="dp">·</span>unx<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>6203<span class="dp">·</span>b-<span class="dp">·</span>defN<span class="dp">·</span>23-<del>Ma</del>r-<del>30</del><span class="dp">·</span>0<del>6</del>:<del>3</del>4<span class="dp">·</span>ovos_local_backend/utils/geolocate.py</td><td class="diffline">18 </td><td class="diffpresent">-rw-r--r--<span class="dp">·</span><span class="dp">·</span>2.0<span class="dp">·</span>unx<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>6203<span class="dp">·</span>b-<span class="dp">·</span>defN<span class="dp">·</span>23-<ins>Ap</ins>r-<ins>07</ins><span class="dp">·</span>0<ins>1</ins>:<ins>0</ins>4<span class="dp">·</span>ovos_local_backend/utils/geolocate.py</td></tr>
<tr class="diffchanged"><td class="diffline">23 </td><td class="diffpresent">-rw-r--r--<span class="dp">·</span><span class="dp">·</span>2.0<span class="dp">·</span>unx<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>1020<span class="dp">·</span>b-<span class="dp">·</span>defN<span class="dp">·</span>23-<del>Ma</del>r-<del>30</del><span class="dp">·</span>0<del>6</del>:<del>3</del>4<span class="dp">·</span>ovos_local_backend/utils/mail.py</td><td class="diffline">19 </td><td class="diffpresent">-rw-r--r--<span class="dp">·</span><span class="dp">·</span>2.0<span class="dp">·</span>unx<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>1020<span class="dp">·</span>b-<span class="dp">·</span>defN<span class="dp">·</span>23-<ins>Ap</ins>r-<ins>07</ins><span class="dp">·</span>0<ins>1</ins>:<ins>0</ins>4<span class="dp">·</span>ovos_local_backend/utils/mail.py</td></tr>
<tr class="diffchanged"><td class="diffline">24 </td><td class="diffpresent">-rw-r--r--<span class="dp">·</span><span class="dp">·</span>2.0<span class="dp">·</span>unx<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>11349<span class="dp">·</span>b-<span class="dp">·</span>defN<span class="dp">·</span>23-<del>Ma</del>r-<del>30</del><span class="dp">·</span>0<del>6</del>:<del>3</del>5<span class="dp">·</span>ovos_local_backend-0.<del>1</del>.<del>6</del>a<del>9</del>.dist-info/LICENSE</td><td class="diffline">20 </td><td class="diffpresent">-rw-r--r--<span class="dp">·</span><span class="dp">·</span>2.0<span class="dp">·</span>unx<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>11349<span class="dp">·</span>b-<span class="dp">·</span>defN<span class="dp">·</span>23-<ins>Ap</ins>r-<ins>07</ins><span class="dp">·</span>0<ins>1</ins>:<ins>0</ins>5<span class="dp">·</span>ovos_local_backend-0.<ins>2</ins>.<ins>0</ins>a<ins>2</ins>.dist-info/LICENSE</td></tr>
<tr class="diffchanged"><td class="diffline">25 </td><td class="diffpresent">-rw-r--r--<span class="dp">·</span><span class="dp">·</span>2.0<span class="dp">·</span>unx<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>6<del>13</del><span class="dp">·</span>b-<span class="dp">·</span>defN<span class="dp">·</span>23-<del>Ma</del>r-<del>30</del><span class="dp">·</span>0<del>6</del>:<del>3</del>5<span class="dp">·</span>ovos_local_backend-0.<del>1</del>.<del>6</del>a<del>9</del>.dist-info/METADATA</td><td class="diffline">21 </td><td class="diffpresent">-rw-r--r--<span class="dp">·</span><span class="dp">·</span>2.0<span class="dp">·</span>unx<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>6<ins>89</ins><span class="dp">·</span>b-<span class="dp">·</span>defN<span class="dp">·</span>23-<ins>Ap</ins>r-<ins>07</ins><span class="dp">·</span>0<ins>1</ins>:<ins>0</ins>5<span class="dp">·</span>ovos_local_backend-0.<ins>2</ins>.<ins>0</ins>a<ins>2</ins>.dist-info/METADATA</td></tr>
<tr class="diffchanged"><td class="diffline">26 </td><td class="diffpresent">-rw-r--r--<span class="dp">·</span><span class="dp">·</span>2.0<span class="dp">·</span>unx<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>92<span class="dp">·</span>b-<span class="dp">·</span>defN<span class="dp">·</span>23-<del>Ma</del>r-<del>30</del><span class="dp">·</span>0<del>6</del>:<del>3</del>5<span class="dp">·</span>ovos_local_backend-0.<del>1</del>.<del>6</del>a<del>9</del>.dist-info/WHEEL</td><td class="diffline">22 </td><td class="diffpresent">-rw-r--r--<span class="dp">·</span><span class="dp">·</span>2.0<span class="dp">·</span>unx<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>92<span class="dp">·</span>b-<span class="dp">·</span>defN<span class="dp">·</span>23-<ins>Ap</ins>r-<ins>07</ins><span class="dp">·</span>0<ins>1</ins>:<ins>0</ins>5<span class="dp">·</span>ovos_local_backend-0.<ins>2</ins>.<ins>0</ins>a<ins>2</ins>.dist-info/WHEEL</td></tr>
<tr class="diffchanged"><td class="diffline">27 </td><td class="diffpresent">-rw-r--r--<span class="dp">·</span><span class="dp">·</span>2.0<span class="dp">·</span>unx<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>73<span class="dp">·</span>b-<span class="dp">·</span>defN<span class="dp">·</span>23-<del>Ma</del>r-<del>30</del><span class="dp">·</span>0<del>6</del>:<del>3</del>5<span class="dp">·</span>ovos_local_backend-0.<del>1</del>.<del>6</del>a<del>9</del>.dist-info/entry_points.txt</td><td class="diffline">23 </td><td class="diffpresent">-rw-r--r--<span class="dp">·</span><span class="dp">·</span>2.0<span class="dp">·</span>unx<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>73<span class="dp">·</span>b-<span class="dp">·</span>defN<span class="dp">·</span>23-<ins>Ap</ins>r-<ins>07</ins><span class="dp">·</span>0<ins>1</ins>:<ins>0</ins>5<span class="dp">·</span>ovos_local_backend-0.<ins>2</ins>.<ins>0</ins>a<ins>2</ins>.dist-info/entry_points.txt</td></tr>
<tr class="diffchanged"><td class="diffline">28 </td><td class="diffpresent">-rw-r--r--<span class="dp">·</span><span class="dp">·</span>2.0<span class="dp">·</span>unx<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>19<span class="dp">·</span>b-<span class="dp">·</span>defN<span class="dp">·</span>23-<del>Ma</del>r-<del>30</del><span class="dp">·</span>0<del>6</del>:<del>3</del>5<span class="dp">·</span>ovos_local_backend-0.<del>1</del>.<del>6</del>a<del>9</del>.dist-info/top_level.txt</td><td class="diffline">24 </td><td class="diffpresent">-rw-r--r--<span class="dp">·</span><span class="dp">·</span>2.0<span class="dp">·</span>unx<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>19<span class="dp">·</span>b-<span class="dp">·</span>defN<span class="dp">·</span>23-<ins>Ap</ins>r-<ins>07</ins><span class="dp">·</span>0<ins>1</ins>:<ins>0</ins>5<span class="dp">·</span>ovos_local_backend-0.<ins>2</ins>.<ins>0</ins>a<ins>2</ins>.dist-info/top_level.txt</td></tr>
<tr class="diffchanged"><td class="diffline">29 </td><td class="diffpresent">-rw-rw-r--<span class="dp">·</span><span class="dp">·</span>2.0<span class="dp">·</span>unx<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>2<del>592</del><span class="dp">·</span>b-<span class="dp">·</span>defN<span class="dp">·</span>23-<del>Ma</del>r-<del>30</del><span class="dp">·</span>0<del>6</del>:<del>3</del>5<span class="dp">·</span>ovos_local_backend-0.<del>1</del>.<del>6</del>a<del>9</del>.dist-info/RECORD</td><td class="diffline">25 </td><td class="diffpresent">-rw-rw-r--<span class="dp">·</span><span class="dp">·</span>2.0<span class="dp">·</span>unx<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>2<ins>200</ins><span class="dp">·</span>b-<span class="dp">·</span>defN<span class="dp">·</span>23-<ins>Ap</ins>r-<ins>07</ins><span class="dp">·</span>0<ins>1</ins>:<ins>0</ins>5<span class="dp">·</span>ovos_local_backend-0.<ins>2</ins>.<ins>0</ins>a<ins>2</ins>.dist-info/RECORD</td></tr>
<tr class="diffchanged"><td class="diffline">30 </td><td class="diffpresent">2<del>8</del><span class="dp">·</span>files,<span class="dp">·</span><del>9</del>23<del>0</del><del>1</del><span class="dp">·</span>bytes<span class="dp">·</span>uncompressed,<span class="dp">·</span><del>28</del>0<del>04</del><span class="dp">·</span>bytes<span class="dp">·</span>compressed:<span class="dp">·</span><span class="dp">·</span><del>69</del>.<del>7</del>%</td><td class="diffline">26 </td><td class="diffpresent">2<ins>4</ins><span class="dp">·</span>files,<span class="dp">·</span><ins>11</ins><ins>8</ins>23<ins>3</ins><span class="dp">·</span>bytes<span class="dp">·</span>uncompressed,<span class="dp">·</span><ins>30</ins>0<ins>38</ins><span class="dp">·</span>bytes<span class="dp">·</span>compressed:<span class="dp">·</span><span class="dp">·</span><ins>74</ins>.<ins>6</ins>%</td></tr>
</table>  </div>
  <div class="difference">
    <div class="diffheader">
    <div class="diffcontrol">⊟</div>
    <div><span class="diffsize">2.2 KB</span></div>
    <div id="zipnote---"><span class="source">zipnote {}</span>
      <a class="anchor" href="#zipnote---">¶</a>
    </div>
    </div>
<table class="diff">
<colgroup><col class="colines"/><col class="coldiff"/>
<col class="colines"/><col class="coldiff"/></colgroup>
<tr style="display:none;"><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr class="diffhunk"><td colspan="2">Offset 3, 14 lines modified</td><td colspan="2">Offset 3, 17 lines modified</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">3 </td><td class="diffpresent">Filename:<span class="dp">·</span>ovos_local_backend/__main__.py</td><td class="diffline">3 </td><td class="diffpresent">Filename:<span class="dp">·</span>ovos_local_backend/__main__.py</td></tr>
<tr class="diffunmodified"><td class="diffline">4 </td><td class="diffpresent">Comment:<span class="dp">·</span></td><td class="diffline">4 </td><td class="diffpresent">Comment:<span class="dp">·</span></td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">5 </td><td class="diffpresent">Filename:<span class="dp">·</span>ovos_local_backend/configuration.py</td><td class="diffline">5 </td><td class="diffpresent">Filename:<span class="dp">·</span>ovos_local_backend/configuration.py</td></tr>
<tr class="diffunmodified"><td class="diffline">6 </td><td class="diffpresent">Comment:<span class="dp">·</span></td><td class="diffline">6 </td><td class="diffpresent">Comment:<span class="dp">·</span></td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">7 </td><td class="diffpresent">Filename:<span class="dp">·</span>ovos_local_backend/database.py</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">8 </td><td class="diffpresent">Comment:<span class="dp">·</span></td></tr>
<tr class="diffadded"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">7 </td><td class="diffpresent">Filename:<span class="dp">·</span>ovos_local_backend/session.py</td><td class="diffline">9 </td><td class="diffpresent">Filename:<span class="dp">·</span>ovos_local_backend/session.py</td></tr>
<tr class="diffunmodified"><td class="diffline">8 </td><td class="diffpresent">Comment:<span class="dp">·</span></td><td class="diffline">10 </td><td class="diffpresent">Comment:<span class="dp">·</span></td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">9 </td><td class="diffpresent">Filename:<span class="dp">·</span>ovos_local_backend/version.py</td><td class="diffline">11 </td><td class="diffpresent">Filename:<span class="dp">·</span>ovos_local_backend/version.py</td></tr>
<tr class="diffunmodified"><td class="diffline">10 </td><td class="diffpresent">Comment:<span class="dp">·</span></td><td class="diffline">12 </td><td class="diffpresent">Comment:<span class="dp">·</span></td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">11 </td><td class="diffpresent">Filename:<span class="dp">·</span>ovos_local_backend/backend/__init__.py</td><td class="diffline">13 </td><td class="diffpresent">Filename:<span class="dp">·</span>ovos_local_backend/backend/__init__.py</td></tr>
<tr class="diffhunk"><td colspan="2">Offset 18, 14 lines modified</td><td colspan="2">Offset 21, 17 lines modified</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">18 </td><td class="diffpresent">Filename:<span class="dp">·</span>ovos_local_backend/backend/admin.py</td><td class="diffline">21 </td><td class="diffpresent">Filename:<span class="dp">·</span>ovos_local_backend/backend/admin.py</td></tr>
<tr class="diffunmodified"><td class="diffline">19 </td><td class="diffpresent">Comment:<span class="dp">·</span></td><td class="diffline">22 </td><td class="diffpresent">Comment:<span class="dp">·</span></td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">20 </td><td class="diffpresent">Filename:<span class="dp">·</span>ovos_local_backend/backend/auth.py</td><td class="diffline">23 </td><td class="diffpresent">Filename:<span class="dp">·</span>ovos_local_backend/backend/auth.py</td></tr>
<tr class="diffunmodified"><td class="diffline">21 </td><td class="diffpresent">Comment:<span class="dp">·</span></td><td class="diffline">24 </td><td class="diffpresent">Comment:<span class="dp">·</span></td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">25 </td><td class="diffpresent">Filename:<span class="dp">·</span>ovos_local_backend/backend/crud.py</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">26 </td><td class="diffpresent">Comment:<span class="dp">·</span></td></tr>
<tr class="diffadded"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">22 </td><td class="diffpresent">Filename:<span class="dp">·</span>ovos_local_backend/backend/decorators.py</td><td class="diffline">27 </td><td class="diffpresent">Filename:<span class="dp">·</span>ovos_local_backend/backend/decorators.py</td></tr>
<tr class="diffunmodified"><td class="diffline">23 </td><td class="diffpresent">Comment:<span class="dp">·</span></td><td class="diffline">28 </td><td class="diffpresent">Comment:<span class="dp">·</span></td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">24 </td><td class="diffpresent">Filename:<span class="dp">·</span>ovos_local_backend/backend/device.py</td><td class="diffline">29 </td><td class="diffpresent">Filename:<span class="dp">·</span>ovos_local_backend/backend/device.py</td></tr>
<tr class="diffunmodified"><td class="diffline">25 </td><td class="diffpresent">Comment:<span class="dp">·</span></td><td class="diffline">30 </td><td class="diffpresent">Comment:<span class="dp">·</span></td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">26 </td><td class="diffpresent">Filename:<span class="dp">·</span>ovos_local_backend/backend/external_apis.py</td><td class="diffline">31 </td><td class="diffpresent">Filename:<span class="dp">·</span>ovos_local_backend/backend/external_apis.py</td></tr>
<tr class="diffhunk"><td colspan="2">Offset 33, 53 lines modified</td><td colspan="2">Offset 39, 35 lines modified</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">33 </td><td class="diffpresent">Filename:<span class="dp">·</span>ovos_local_backend/backend/precise.py</td><td class="diffline">39 </td><td class="diffpresent">Filename:<span class="dp">·</span>ovos_local_backend/backend/precise.py</td></tr>
<tr class="diffunmodified"><td class="diffline">34 </td><td class="diffpresent">Comment:<span class="dp">·</span></td><td class="diffline">40 </td><td class="diffpresent">Comment:<span class="dp">·</span></td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">35 </td><td class="diffpresent">Filename:<span class="dp">·</span>ovos_local_backend/backend/stt.py</td><td class="diffline">41 </td><td class="diffpresent">Filename:<span class="dp">·</span>ovos_local_backend/backend/stt.py</td></tr>
<tr class="diffunmodified"><td class="diffline">36 </td><td class="diffpresent">Comment:<span class="dp">·</span></td><td class="diffline">42 </td><td class="diffpresent">Comment:<span class="dp">·</span></td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">37 </td><td class="diffpresent">Filename:<span class="dp">·</span>ovos_local_backend/database/__init__.py</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">38 </td><td class="diffpresent">Comment:<span class="dp">·</span></td><td colspan="2"> </td></tr>
<tr class="diffadded"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">39 </td><td class="diffpresent">Filename:<span class="dp">·</span>ovos_local_backend/database/metrics.py</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">40 </td><td class="diffpresent">Comment:<span class="dp">·</span></td><td colspan="2"> </td></tr>
<tr class="diffadded"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">41 </td><td class="diffpresent">Filename:<span class="dp">·</span>ovos_local_backend/database/oauth.py</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">42 </td><td class="diffpresent">Comment:<span class="dp">·</span></td><td colspan="2"> </td></tr>
<tr class="diffadded"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">43 </td><td class="diffpresent">Filename:<span class="dp">·</span>ovos_local_backend/database/settings.py</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">44 </td><td class="diffpresent">Comment:<span class="dp">·</span></td><td colspan="2"> </td></tr>
<tr class="diffadded"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">45 </td><td class="diffpresent">Filename:<span class="dp">·</span>ovos_local_backend/database/utterances.py</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">46 </td><td class="diffpresent">Comment:<span class="dp">·</span></td><td colspan="2"> </td></tr>
<tr class="diffadded"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">47 </td><td class="diffpresent">Filename:<span class="dp">·</span>ovos_local_backend/database/wakewords.py</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">48 </td><td class="diffpresent">Comment:<span class="dp">·</span></td><td colspan="2"> </td></tr>
<tr class="diffadded"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">49 </td><td class="diffpresent">Filename:<span class="dp">·</span>ovos_local_backend/utils/__init__.py</td><td class="diffline">43 </td><td class="diffpresent">Filename:<span class="dp">·</span>ovos_local_backend/utils/__init__.py</td></tr>
<tr class="diffunmodified"><td class="diffline">50 </td><td class="diffpresent">Comment:<span class="dp">·</span></td><td class="diffline">44 </td><td class="diffpresent">Comment:<span class="dp">·</span></td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">51 </td><td class="diffpresent">Filename:<span class="dp">·</span>ovos_local_backend/utils/geolocate.py</td><td class="diffline">45 </td><td class="diffpresent">Filename:<span class="dp">·</span>ovos_local_backend/utils/geolocate.py</td></tr>
<tr class="diffunmodified"><td class="diffline">52 </td><td class="diffpresent">Comment:<span class="dp">·</span></td><td class="diffline">46 </td><td class="diffpresent">Comment:<span class="dp">·</span></td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">53 </td><td class="diffpresent">Filename:<span class="dp">·</span>ovos_local_backend/utils/mail.py</td><td class="diffline">47 </td><td class="diffpresent">Filename:<span class="dp">·</span>ovos_local_backend/utils/mail.py</td></tr>
<tr class="diffunmodified"><td class="diffline">54 </td><td class="diffpresent">Comment:<span class="dp">·</span></td><td class="diffline">48 </td><td class="diffpresent">Comment:<span class="dp">·</span></td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffchanged"><td class="diffline">55 </td><td class="diffpresent">Filename:<span class="dp">·</span>ovos_local_backend-0.<del>1</del>.<del>6</del>a<del>9</del>.dist-info/LICENSE</td><td class="diffline">49 </td><td class="diffpresent">Filename:<span class="dp">·</span>ovos_local_backend-0.<ins>2</ins>.<ins>0</ins>a<ins>2</ins>.dist-info/LICENSE</td></tr>
<tr class="diffunmodified"><td class="diffline">56 </td><td class="diffpresent">Comment:<span class="dp">·</span></td><td class="diffline">50 </td><td class="diffpresent">Comment:<span class="dp">·</span></td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffchanged"><td class="diffline">57 </td><td class="diffpresent">Filename:<span class="dp">·</span>ovos_local_backend-0.<del>1</del>.<del>6</del>a<del>9</del>.dist-info/METADATA</td><td class="diffline">51 </td><td class="diffpresent">Filename:<span class="dp">·</span>ovos_local_backend-0.<ins>2</ins>.<ins>0</ins>a<ins>2</ins>.dist-info/METADATA</td></tr>
<tr class="diffunmodified"><td class="diffline">58 </td><td class="diffpresent">Comment:<span class="dp">·</span></td><td class="diffline">52 </td><td class="diffpresent">Comment:<span class="dp">·</span></td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffchanged"><td class="diffline">59 </td><td class="diffpresent">Filename:<span class="dp">·</span>ovos_local_backend-0.<del>1</del>.<del>6</del>a<del>9</del>.dist-info/WHEEL</td><td class="diffline">53 </td><td class="diffpresent">Filename:<span class="dp">·</span>ovos_local_backend-0.<ins>2</ins>.<ins>0</ins>a<ins>2</ins>.dist-info/WHEEL</td></tr>
<tr class="diffunmodified"><td class="diffline">60 </td><td class="diffpresent">Comment:<span class="dp">·</span></td><td class="diffline">54 </td><td class="diffpresent">Comment:<span class="dp">·</span></td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffchanged"><td class="diffline">61 </td><td class="diffpresent">Filename:<span class="dp">·</span>ovos_local_backend-0.<del>1</del>.<del>6</del>a<del>9</del>.dist-info/entry_points.txt</td><td class="diffline">55 </td><td class="diffpresent">Filename:<span class="dp">·</span>ovos_local_backend-0.<ins>2</ins>.<ins>0</ins>a<ins>2</ins>.dist-info/entry_points.txt</td></tr>
<tr class="diffunmodified"><td class="diffline">62 </td><td class="diffpresent">Comment:<span class="dp">·</span></td><td class="diffline">56 </td><td class="diffpresent">Comment:<span class="dp">·</span></td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffchanged"><td class="diffline">63 </td><td class="diffpresent">Filename:<span class="dp">·</span>ovos_local_backend-0.<del>1</del>.<del>6</del>a<del>9</del>.dist-info/top_level.txt</td><td class="diffline">57 </td><td class="diffpresent">Filename:<span class="dp">·</span>ovos_local_backend-0.<ins>2</ins>.<ins>0</ins>a<ins>2</ins>.dist-info/top_level.txt</td></tr>
<tr class="diffunmodified"><td class="diffline">64 </td><td class="diffpresent">Comment:<span class="dp">·</span></td><td class="diffline">58 </td><td class="diffpresent">Comment:<span class="dp">·</span></td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffchanged"><td class="diffline">65 </td><td class="diffpresent">Filename:<span class="dp">·</span>ovos_local_backend-0.<del>1</del>.<del>6</del>a<del>9</del>.dist-info/RECORD</td><td class="diffline">59 </td><td class="diffpresent">Filename:<span class="dp">·</span>ovos_local_backend-0.<ins>2</ins>.<ins>0</ins>a<ins>2</ins>.dist-info/RECORD</td></tr>
<tr class="diffunmodified"><td class="diffline">66 </td><td class="diffpresent">Comment:<span class="dp">·</span></td><td class="diffline">60 </td><td class="diffpresent">Comment:<span class="dp">·</span></td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">67 </td><td class="diffpresent">Zip<span class="dp">·</span>file<span class="dp">·</span>comment:<span class="dp">·</span></td><td class="diffline">61 </td><td class="diffpresent">Zip<span class="dp">·</span>file<span class="dp">·</span>comment:<span class="dp">·</span></td></tr>
</table>  </div>
  <div class="difference">
    <div class="diffheader">
    <div class="diffcontrol">⊟</div>
    <div><span class="diffsize">514 B</span></div>
    <div id="ovos_local_backend-configuration.py"><span class="source">ovos_local_backend/configuration.py</span>
      <a class="anchor" href="#ovos_local_backend-configuration.py">¶</a>
    </div>
    </div>
<table class="diff">
<colgroup><col class="colines"/><col class="coldiff"/>
<col class="colines"/><col class="coldiff"/></colgroup>
<tr style="display:none;"><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr class="diffhunk"><td colspan="2">Offset 12, 14 lines modified</td><td colspan="2">Offset 12, 16 lines modified</td></tr>
<tr class="diffunmodified"><td class="diffline">12 </td><td class="diffpresent">#</td><td class="diffline">12 </td><td class="diffpresent">#</td></tr>
<tr class="diffunmodified"><td class="diffline">13 </td><td class="diffpresent">from<span class="dp">·</span>os.path<span class="dp">·</span>import<span class="dp">·</span>exists,<span class="dp">·</span>expanduser</td><td class="diffline">13 </td><td class="diffpresent">from<span class="dp">·</span>os.path<span class="dp">·</span>import<span class="dp">·</span>exists,<span class="dp">·</span>expanduser</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">14 </td><td class="diffpresent">from<span class="dp">·</span>json_database<span class="dp">·</span>import<span class="dp">·</span>JsonConfigXDG</td><td class="diffline">14 </td><td class="diffpresent">from<span class="dp">·</span>json_database<span class="dp">·</span>import<span class="dp">·</span>JsonConfigXDG</td></tr>
<tr class="diffunmodified"><td class="diffline">15 </td><td class="diffpresent">from<span class="dp">·</span>ovos_utils.log<span class="dp">·</span>import<span class="dp">·</span>LOG</td><td class="diffline">15 </td><td class="diffpresent">from<span class="dp">·</span>ovos_utils.log<span class="dp">·</span>import<span class="dp">·</span>LOG</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">16 </td><td class="diffpresent">DEFAULT_CONFIG<span class="dp">·</span>=<span class="dp">·</span>{</td><td class="diffline">16 </td><td class="diffpresent">DEFAULT_CONFIG<span class="dp">·</span>=<span class="dp">·</span>{</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">17 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>&quot;lang&quot;:<span class="dp">·</span>&quot;en-us&quot;,<span class="dp">·</span><span class="dp">·</span>#<span class="dp">·</span>default<span class="dp">·</span>language</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">18 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>&quot;database&quot;:<span class="dp">·</span>&quot;sqlite:///ovos_backend.db&quot;,</td></tr>
<tr class="diffunmodified"><td class="diffline">17 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>&quot;stt&quot;:<span class="dp">·</span>{</td><td class="diffline">19 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>&quot;stt&quot;:<span class="dp">·</span>{</td></tr>
<tr class="diffunmodified"><td class="diffline">18 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>&quot;module&quot;:<span class="dp">·</span>&quot;ovos-stt-plugin-server&quot;,</td><td class="diffline">20 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>&quot;module&quot;:<span class="dp">·</span>&quot;ovos-stt-plugin-server&quot;,</td></tr>
<tr class="diffunmodified"><td class="diffline">19 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>&quot;ovos-stt-plugin-server&quot;:<span class="dp">·</span>{</td><td class="diffline">21 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>&quot;ovos-stt-plugin-server&quot;:<span class="dp">·</span>{</td></tr>
<tr class="diffunmodified"><td class="diffline">20 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>&quot;url&quot;:<span class="dp">·</span>&quot;https://stt.openvoiceos.com/stt&quot;</td><td class="diffline">22 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>&quot;url&quot;:<span class="dp">·</span>&quot;https://stt.openvoiceos.com/stt&quot;</td></tr>
<tr class="diffunmodified"><td class="diffline">21 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>}</td><td class="diffline">23 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>}</td></tr>
<tr class="diffunmodified"><td class="diffline">22 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>},</td><td class="diffline">24 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>},</td></tr>
<tr class="diffunmodified"><td class="diffline">23 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>&quot;backend_port&quot;:<span class="dp">·</span>6712,</td><td class="diffline">25 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>&quot;backend_port&quot;:<span class="dp">·</span>6712,</td></tr>
</table>  </div>
  <div class="difference">
    <div class="diffheader">
    <div class="diffcontrol">⊟</div>
    <div><span class="diffsize">315 B</span></div>
    <div id="ovos_local_backend-version.py"><span class="source">ovos_local_backend/version.py</span>
      <a class="anchor" href="#ovos_local_backend-version.py">¶</a>
    </div>
    </div>
<table class="diff">
<colgroup><col class="colines"/><col class="coldiff"/>
<col class="colines"/><col class="coldiff"/></colgroup>
<tr style="display:none;"><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr class="diffhunk"><td colspan="2">Offset 1, 7 lines modified</td><td colspan="2">Offset 1, 7 lines modified</td></tr>
<tr class="diffunmodified"><td class="diffline">1 </td><td class="diffpresent">#<span class="dp">·</span>The<span class="dp">·</span>following<span class="dp">·</span>lines<span class="dp">·</span>are<span class="dp">·</span>replaced<span class="dp">·</span>during<span class="dp">·</span>the<span class="dp">·</span>release<span class="dp">·</span>process.</td><td class="diffline">1 </td><td class="diffpresent">#<span class="dp">·</span>The<span class="dp">·</span>following<span class="dp">·</span>lines<span class="dp">·</span>are<span class="dp">·</span>replaced<span class="dp">·</span>during<span class="dp">·</span>the<span class="dp">·</span>release<span class="dp">·</span>process.</td></tr>
<tr class="diffunmodified"><td class="diffline">2 </td><td class="diffpresent">#<span class="dp">·</span>START_VERSION_BLOCK</td><td class="diffline">2 </td><td class="diffpresent">#<span class="dp">·</span>START_VERSION_BLOCK</td></tr>
<tr class="diffunmodified"><td class="diffline">3 </td><td class="diffpresent">VERSION_MAJOR<span class="dp">·</span>=<span class="dp">·</span>0</td><td class="diffline">3 </td><td class="diffpresent">VERSION_MAJOR<span class="dp">·</span>=<span class="dp">·</span>0</td></tr>
<tr class="diffchanged"><td class="diffline">4 </td><td class="diffpresent">VERSION_MINOR<span class="dp">·</span>=<span class="dp">·</span><del>1</del></td><td class="diffline">4 </td><td class="diffpresent">VERSION_MINOR<span class="dp">·</span>=<span class="dp">·</span><ins>2</ins></td></tr>
<tr class="diffchanged"><td class="diffline">5 </td><td class="diffpresent">VERSION_BUILD<span class="dp">·</span>=<span class="dp">·</span><del>6</del></td><td class="diffline">5 </td><td class="diffpresent">VERSION_BUILD<span class="dp">·</span>=<span class="dp">·</span><ins>0</ins></td></tr>
<tr class="diffchanged"><td class="diffline">6 </td><td class="diffpresent">VERSION_ALPHA<span class="dp">·</span>=<span class="dp">·</span><del>9</del></td><td class="diffline">6 </td><td class="diffpresent">VERSION_ALPHA<span class="dp">·</span>=<span class="dp">·</span><ins>2</ins></td></tr>
<tr class="diffunmodified"><td class="diffline">7 </td><td class="diffpresent">#<span class="dp">·</span>END_VERSION_BLOCK</td><td class="diffline">7 </td><td class="diffpresent">#<span class="dp">·</span>END_VERSION_BLOCK</td></tr>
</table>  </div>
  <div class="difference">
    <div class="diffheader">
    <div class="diffcontrol">⊟</div>
    <div><span class="diffsize">1.56 KB</span></div>
    <div id="ovos_local_backend-backend-__init__.py"><span class="source">ovos_local_backend/backend/__init__.py</span>
      <a class="anchor" href="#ovos_local_backend-backend-__init__.py">¶</a>
    </div>
    </div>
<table class="diff">
<colgroup><col class="colines"/><col class="coldiff"/>
<col class="colines"/><col class="coldiff"/></colgroup>
<tr style="display:none;"><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr class="diffhunk"><td colspan="2">Offset 9, 35 lines modified</td><td colspan="2">Offset 9, 41 lines modified</td></tr>
<tr class="diffunmodified"><td class="diffline">9 </td><td class="diffpresent">#<span class="dp">·</span>WITHOUT<span class="dp">·</span>WARRANTIES<span class="dp">·</span>OR<span class="dp">·</span>CONDITIONS<span class="dp">·</span>OF<span class="dp">·</span>ANY<span class="dp">·</span>KIND,<span class="dp">·</span>either<span class="dp">·</span>express<span class="dp">·</span>or<span class="dp">·</span>implied.</td><td class="diffline">9 </td><td class="diffpresent">#<span class="dp">·</span>WITHOUT<span class="dp">·</span>WARRANTIES<span class="dp">·</span>OR<span class="dp">·</span>CONDITIONS<span class="dp">·</span>OF<span class="dp">·</span>ANY<span class="dp">·</span>KIND,<span class="dp">·</span>either<span class="dp">·</span>express<span class="dp">·</span>or<span class="dp">·</span>implied.</td></tr>
<tr class="diffunmodified"><td class="diffline">10 </td><td class="diffpresent">#<span class="dp">·</span>See<span class="dp">·</span>the<span class="dp">·</span>License<span class="dp">·</span>for<span class="dp">·</span>the<span class="dp">·</span>specific<span class="dp">·</span>language<span class="dp">·</span>governing<span class="dp">·</span>permissions<span class="dp">·</span>and</td><td class="diffline">10 </td><td class="diffpresent">#<span class="dp">·</span>See<span class="dp">·</span>the<span class="dp">·</span>License<span class="dp">·</span>for<span class="dp">·</span>the<span class="dp">·</span>specific<span class="dp">·</span>language<span class="dp">·</span>governing<span class="dp">·</span>permissions<span class="dp">·</span>and</td></tr>
<tr class="diffunmodified"><td class="diffline">11 </td><td class="diffpresent">#<span class="dp">·</span>limitations<span class="dp">·</span>under<span class="dp">·</span>the<span class="dp">·</span>License.</td><td class="diffline">11 </td><td class="diffpresent">#<span class="dp">·</span>limitations<span class="dp">·</span>under<span class="dp">·</span>the<span class="dp">·</span>License.</td></tr>
<tr class="diffunmodified"><td class="diffline">12 </td><td class="diffpresent">#</td><td class="diffline">12 </td><td class="diffpresent">#</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">13 </td><td class="diffpresent">from<span class="dp">·</span>flask<span class="dp">·</span>import<span class="dp">·</span>Flask</td><td class="diffline">13 </td><td class="diffpresent">from<span class="dp">·</span>flask<span class="dp">·</span>import<span class="dp">·</span>Flask</td></tr>
<tr class="diffunmodified"><td class="diffline">14 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.configuration<span class="dp">·</span>import<span class="dp">·</span>CONFIGURATION</td><td class="diffline">14 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.configuration<span class="dp">·</span>import<span class="dp">·</span>CONFIGURATION</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">15 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.database<span class="dp">·</span>import<span class="dp">·</span>connect_db</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">15 </td><td class="diffpresent">API_VERSION<span class="dp">·</span>=<span class="dp">·</span>CONFIGURATION[&quot;api_version&quot;]</td><td class="diffline">16 </td><td class="diffpresent">API_VERSION<span class="dp">·</span>=<span class="dp">·</span>CONFIGURATION[&quot;api_version&quot;]</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">16 </td><td class="diffpresent">def<span class="dp">·</span>create_app():</td><td class="diffline">17 </td><td class="diffpresent">def<span class="dp">·</span>create_app():</td></tr>
<tr class="diffunmodified"><td class="diffline">17 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>app<span class="dp">·</span>=<span class="dp">·</span>Flask(__name__)</td><td class="diffline">18 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>app<span class="dp">·</span>=<span class="dp">·</span>Flask(__name__)</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">19 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>app,<span class="dp">·</span>db<span class="dp">·</span>=<span class="dp">·</span>connect_db(app)</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">18 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>from<span class="dp">·</span>ovos_local_backend.utils<span class="dp">·</span>import<span class="dp">·</span>nice_json</td><td class="diffline">20 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>from<span class="dp">·</span>ovos_local_backend.utils<span class="dp">·</span>import<span class="dp">·</span>nice_json</td></tr>
<tr class="diffunmodified"><td class="diffline">19 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>from<span class="dp">·</span>ovos_local_backend.backend.decorators<span class="dp">·</span>import<span class="dp">·</span>noindex</td><td class="diffline">21 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>from<span class="dp">·</span>ovos_local_backend.backend.decorators<span class="dp">·</span>import<span class="dp">·</span>noindex</td></tr>
<tr class="diffunmodified"><td class="diffline">20 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>from<span class="dp">·</span>ovos_local_backend.backend.auth<span class="dp">·</span>import<span class="dp">·</span>get_auth_routes</td><td class="diffline">22 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>from<span class="dp">·</span>ovos_local_backend.backend.auth<span class="dp">·</span>import<span class="dp">·</span>get_auth_routes</td></tr>
<tr class="diffunmodified"><td class="diffline">21 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>from<span class="dp">·</span>ovos_local_backend.backend.device<span class="dp">·</span>import<span class="dp">·</span>get_device_routes</td><td class="diffline">23 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>from<span class="dp">·</span>ovos_local_backend.backend.device<span class="dp">·</span>import<span class="dp">·</span>get_device_routes</td></tr>
<tr class="diffunmodified"><td class="diffline">22 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>from<span class="dp">·</span>ovos_local_backend.backend.stt<span class="dp">·</span>import<span class="dp">·</span>get_stt_routes</td><td class="diffline">24 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>from<span class="dp">·</span>ovos_local_backend.backend.stt<span class="dp">·</span>import<span class="dp">·</span>get_stt_routes</td></tr>
<tr class="diffunmodified"><td class="diffline">23 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>from<span class="dp">·</span>ovos_local_backend.backend.precise<span class="dp">·</span>import<span class="dp">·</span>get_precise_routes</td><td class="diffline">25 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>from<span class="dp">·</span>ovos_local_backend.backend.precise<span class="dp">·</span>import<span class="dp">·</span>get_precise_routes</td></tr>
<tr class="diffunmodified"><td class="diffline">24 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>from<span class="dp">·</span>ovos_local_backend.backend.external_apis<span class="dp">·</span>import<span class="dp">·</span>get_services_routes</td><td class="diffline">26 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>from<span class="dp">·</span>ovos_local_backend.backend.external_apis<span class="dp">·</span>import<span class="dp">·</span>get_services_routes</td></tr>
<tr class="diffunmodified"><td class="diffline">25 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>from<span class="dp">·</span>ovos_local_backend.backend.admin<span class="dp">·</span>import<span class="dp">·</span>get_admin_routes</td><td class="diffline">27 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>from<span class="dp">·</span>ovos_local_backend.backend.admin<span class="dp">·</span>import<span class="dp">·</span>get_admin_routes</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">28 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>from<span class="dp">·</span>ovos_local_backend.backend.crud<span class="dp">·</span>import<span class="dp">·</span>get_database_crud</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">26 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>app<span class="dp">·</span>=<span class="dp">·</span>get_auth_routes(app)</td><td class="diffline">29 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>app<span class="dp">·</span>=<span class="dp">·</span>get_auth_routes(app)</td></tr>
<tr class="diffunmodified"><td class="diffline">27 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>app<span class="dp">·</span>=<span class="dp">·</span>get_device_routes(app)</td><td class="diffline">30 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>app<span class="dp">·</span>=<span class="dp">·</span>get_device_routes(app)</td></tr>
<tr class="diffunmodified"><td class="diffline">28 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>app<span class="dp">·</span>=<span class="dp">·</span>get_stt_routes(app)</td><td class="diffline">31 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>app<span class="dp">·</span>=<span class="dp">·</span>get_stt_routes(app)</td></tr>
<tr class="diffunmodified"><td class="diffline">29 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>app<span class="dp">·</span>=<span class="dp">·</span>get_precise_routes(app)</td><td class="diffline">32 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>app<span class="dp">·</span>=<span class="dp">·</span>get_precise_routes(app)</td></tr>
<tr class="diffunmodified"><td class="diffline">30 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>app<span class="dp">·</span>=<span class="dp">·</span>get_services_routes(app)</td><td class="diffline">33 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>app<span class="dp">·</span>=<span class="dp">·</span>get_services_routes(app)</td></tr>
<tr class="diffunmodified"><td class="diffline">31 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>app<span class="dp">·</span>=<span class="dp">·</span>get_admin_routes(app)</td><td class="diffline">34 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>app<span class="dp">·</span>=<span class="dp">·</span>get_admin_routes(app)</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">35 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>app<span class="dp">·</span>=<span class="dp">·</span>get_database_crud(app)</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">32 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@app.route(&quot;/&quot;,<span class="dp">·</span>methods=[&#x27;GET&#x27;])</td><td class="diffline">36 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@app.route(&quot;/&quot;,<span class="dp">·</span>methods=[&#x27;GET&#x27;])</td></tr>
<tr class="diffunmodified"><td class="diffline">33 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@noindex</td><td class="diffline">37 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@noindex</td></tr>
<tr class="diffunmodified"><td class="diffline">34 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>def<span class="dp">·</span>hello():</td><td class="diffline">38 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>def<span class="dp">·</span>hello():</td></tr>
<tr class="diffunmodified"><td class="diffline">35 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>nice_json({</td><td class="diffline">39 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>nice_json({</td></tr>
<tr class="diffunmodified"><td class="diffline">36 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>&quot;message&quot;:<span class="dp">·</span>&quot;Welcome<span class="dp">·</span>to<span class="dp">·</span>Mock<span class="dp">·</span>Mycroft<span class="dp">·</span>Backend&quot;,</td><td class="diffline">40 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>&quot;message&quot;:<span class="dp">·</span>&quot;Welcome<span class="dp">·</span>to<span class="dp">·</span>Mock<span class="dp">·</span>Mycroft<span class="dp">·</span>Backend&quot;,</td></tr>
<tr class="diffunmodified"><td class="diffline">37 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>&quot;donate&quot;:<span class="dp">·</span>&quot;https://liberapay.com/jarbasAI&quot;,</td><td class="diffline">41 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>&quot;donate&quot;:<span class="dp">·</span>&quot;https://liberapay.com/jarbasAI&quot;,</td></tr>
</table>  </div>
  <div class="difference">
    <div class="diffheader">
    <div class="diffcontrol">⊟</div>
    <div><span class="diffsize">4.94 KB</span></div>
    <div id="ovos_local_backend-backend-admin.py"><span class="source">ovos_local_backend/backend/admin.py</span>
      <a class="anchor" href="#ovos_local_backend-backend-admin.py">¶</a>
    </div>
    </div>
<table class="diff">
<colgroup><col class="colines"/><col class="coldiff"/>
<col class="colines"/><col class="coldiff"/></colgroup>
<tr style="display:none;"><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr class="diffhunk"><td colspan="2">Offset 7, 108 lines modified</td><td colspan="2">Offset 7, 58 lines modified</td></tr>
<tr class="diffunmodified"><td class="diffline">7 </td><td class="diffpresent">#<span class="dp">·</span>Unless<span class="dp">·</span>required<span class="dp">·</span>by<span class="dp">·</span>applicable<span class="dp">·</span>law<span class="dp">·</span>or<span class="dp">·</span>agreed<span class="dp">·</span>to<span class="dp">·</span>in<span class="dp">·</span>writing,<span class="dp">·</span>software</td><td class="diffline">7 </td><td class="diffpresent">#<span class="dp">·</span>Unless<span class="dp">·</span>required<span class="dp">·</span>by<span class="dp">·</span>applicable<span class="dp">·</span>law<span class="dp">·</span>or<span class="dp">·</span>agreed<span class="dp">·</span>to<span class="dp">·</span>in<span class="dp">·</span>writing,<span class="dp">·</span>software</td></tr>
<tr class="diffunmodified"><td class="diffline">8 </td><td class="diffpresent">#<span class="dp">·</span>distributed<span class="dp">·</span>under<span class="dp">·</span>the<span class="dp">·</span>License<span class="dp">·</span>is<span class="dp">·</span>distributed<span class="dp">·</span>on<span class="dp">·</span>an<span class="dp">·</span>&quot;AS<span class="dp">·</span>IS&quot;<span class="dp">·</span>BASIS,</td><td class="diffline">8 </td><td class="diffpresent">#<span class="dp">·</span>distributed<span class="dp">·</span>under<span class="dp">·</span>the<span class="dp">·</span>License<span class="dp">·</span>is<span class="dp">·</span>distributed<span class="dp">·</span>on<span class="dp">·</span>an<span class="dp">·</span>&quot;AS<span class="dp">·</span>IS&quot;<span class="dp">·</span>BASIS,</td></tr>
<tr class="diffunmodified"><td class="diffline">9 </td><td class="diffpresent">#<span class="dp">·</span>WITHOUT<span class="dp">·</span>WARRANTIES<span class="dp">·</span>OR<span class="dp">·</span>CONDITIONS<span class="dp">·</span>OF<span class="dp">·</span>ANY<span class="dp">·</span>KIND,<span class="dp">·</span>either<span class="dp">·</span>express<span class="dp">·</span>or<span class="dp">·</span>implied.</td><td class="diffline">9 </td><td class="diffpresent">#<span class="dp">·</span>WITHOUT<span class="dp">·</span>WARRANTIES<span class="dp">·</span>OR<span class="dp">·</span>CONDITIONS<span class="dp">·</span>OF<span class="dp">·</span>ANY<span class="dp">·</span>KIND,<span class="dp">·</span>either<span class="dp">·</span>express<span class="dp">·</span>or<span class="dp">·</span>implied.</td></tr>
<tr class="diffunmodified"><td class="diffline">10 </td><td class="diffpresent">#<span class="dp">·</span>See<span class="dp">·</span>the<span class="dp">·</span>License<span class="dp">·</span>for<span class="dp">·</span>the<span class="dp">·</span>specific<span class="dp">·</span>language<span class="dp">·</span>governing<span class="dp">·</span>permissions<span class="dp">·</span>and</td><td class="diffline">10 </td><td class="diffpresent">#<span class="dp">·</span>See<span class="dp">·</span>the<span class="dp">·</span>License<span class="dp">·</span>for<span class="dp">·</span>the<span class="dp">·</span>specific<span class="dp">·</span>language<span class="dp">·</span>governing<span class="dp">·</span>permissions<span class="dp">·</span>and</td></tr>
<tr class="diffunmodified"><td class="diffline">11 </td><td class="diffpresent">#<span class="dp">·</span>limitations<span class="dp">·</span>under<span class="dp">·</span>the<span class="dp">·</span>License.</td><td class="diffline">11 </td><td class="diffpresent">#<span class="dp">·</span>limitations<span class="dp">·</span>under<span class="dp">·</span>the<span class="dp">·</span>License.</td></tr>
<tr class="diffunmodified"><td class="diffline">12 </td><td class="diffpresent">#</td><td class="diffline">12 </td><td class="diffpresent">#</td></tr>
<tr class="diffunmodified"><td class="diffline">13 </td><td class="diffpresent">import<span class="dp">·</span>time</td><td class="diffline">13 </td><td class="diffpresent">import<span class="dp">·</span>time</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">14 </td><td class="diffpresent">import<span class="dp">·</span>base64</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">15 </td><td class="diffpresent">from<span class="dp">·</span>flask<span class="dp">·</span>import<span class="dp">·</span>request</td></tr>
<tr class="diffunmodified"><td class="diffline">14 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.backend<span class="dp">·</span>import<span class="dp">·</span>API_VERSION</td><td class="diffline">16 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.backend<span class="dp">·</span>import<span class="dp">·</span>API_VERSION</td></tr>
<tr class="diffdeleted"><td class="diffline">15 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.utils<span class="dp">·</span>import<span class="dp">·</span>nice_json</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">16 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.database.settings<span class="dp">·</span>import<span class="dp">·</span>DeviceDatabase</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">17 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.configuration<span class="dp">·</span>import<span class="dp">·</span>CONFIGURATION</td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">18 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.backend.decorators<span class="dp">·</span>import<span class="dp">·</span>noindex,<span class="dp">·</span>requires_admin</td><td class="diffline">17 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.backend.decorators<span class="dp">·</span>import<span class="dp">·</span>noindex,<span class="dp">·</span>requires_admin</td></tr>
<tr class="diffchanged"><td class="diffline">19 </td><td class="diffpresent"><del>f</del>ro<del>m<span class="dp">·</span>f</del>la<del>s</del>k<del><span class="dp">·</span>impor</del>t<del><span class="dp">·</span>r</del>e<del>quest</del></td><td class="diffline">18 </td><td class="diffpresent"><ins>imp</ins><ins>o</ins>r<ins>t<span class="dp">·</span>ov</ins>o<ins>s_l</ins><ins>oca</ins>l<ins>_b</ins>a<ins>c</ins>k<ins>end.da</ins>t<ins>ab</ins><ins>as</ins>e<ins><span class="dp">·</span></ins><ins>as<span class="dp">·</span>db</ins></td></tr>
<tr class="diffunmodified"><td class="diffline">20 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.utils<span class="dp">·</span>import<span class="dp">·</span>generate_code</td><td class="diffline">19 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.utils<span class="dp">·</span>import<span class="dp">·</span>generate_code</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">20 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.utils<span class="dp">·</span>import<span class="dp">·</span>nice_json</td></tr>
<tr class="diffunmodified"><td class="diffline">21 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.utils.geolocate<span class="dp">·</span>import<span class="dp">·</span>get_request_location</td><td class="diffline">21 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.utils.geolocate<span class="dp">·</span>import<span class="dp">·</span>get_request_location</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffadded"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">22 </td><td class="diffpresent">def<span class="dp">·</span>get_admin_routes(app):</td><td class="diffline">22 </td><td class="diffpresent">def<span class="dp">·</span>get_admin_routes(app):</td></tr>
<tr class="diffunmodified"><td class="diffline">23 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@app.route(&quot;/&quot;<span class="dp">·</span>+<span class="dp">·</span>API_VERSION<span class="dp">·</span>+<span class="dp">·</span>&quot;/admin/&lt;uuid&gt;/pair&quot;,<span class="dp">·</span>methods=[&#x27;GET&#x27;])</td><td class="diffline">23 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@app.route(&quot;/&quot;<span class="dp">·</span>+<span class="dp">·</span>API_VERSION<span class="dp">·</span>+<span class="dp">·</span>&quot;/admin/&lt;uuid&gt;/pair&quot;,<span class="dp">·</span>methods=[&#x27;GET&#x27;])</td></tr>
<tr class="diffunmodified"><td class="diffline">24 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@requires_admin</td><td class="diffline">24 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@requires_admin</td></tr>
<tr class="diffunmodified"><td class="diffline">25 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@noindex</td><td class="diffline">25 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@noindex</td></tr>
<tr class="diffunmodified"><td class="diffline">26 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>def<span class="dp">·</span>pair_device(uuid):</td><td class="diffline">26 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>def<span class="dp">·</span>pair_device(uuid):</td></tr>
<tr class="diffunmodified"><td class="diffline">27 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>code<span class="dp">·</span>=<span class="dp">·</span>generate_code()</td><td class="diffline">27 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>code<span class="dp">·</span>=<span class="dp">·</span>generate_code()</td></tr>
<tr class="diffunmodified"><td class="diffline">28 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>token<span class="dp">·</span>=<span class="dp">·</span>f&quot;{code}:{uuid}&quot;</td><td class="diffline">28 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>token<span class="dp">·</span>=<span class="dp">·</span>f&quot;{code}:{uuid}&quot;</td></tr>
<tr class="diffunmodified"><td class="diffline">29 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>#<span class="dp">·</span>add<span class="dp">·</span>device<span class="dp">·</span>to<span class="dp">·</span>db</td><td class="diffline">29 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>#<span class="dp">·</span>add<span class="dp">·</span>device<span class="dp">·</span>to<span class="dp">·</span>db</td></tr>
<tr class="diffunmodified"><td class="diffline">30 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>location<span class="dp">·</span>=<span class="dp">·</span>get_request_location()</td><td class="diffline">30 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>location<span class="dp">·</span>=<span class="dp">·</span>get_request_location()</td></tr>
<tr class="diffdeleted"><td class="diffline">31 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>with<span class="dp">·</span>DeviceDatabase()<span class="dp">·</span>as<span class="dp">·</span>db:</td><td colspan="2"> </td></tr>
<tr class="diffchanged"><td class="diffline">32 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><del><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span></del>db.add_device(uuid,<span class="dp">·</span>token,<span class="dp">·</span>location=location)</td><td class="diffline">31 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>db.add_device(uuid,<span class="dp">·</span>token,<span class="dp">·</span>location=location)</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">33 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>device<span class="dp">·</span>=<span class="dp">·</span>{&quot;uuid&quot;:<span class="dp">·</span>uuid,</td><td class="diffline">32 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>device<span class="dp">·</span>=<span class="dp">·</span>{&quot;uuid&quot;:<span class="dp">·</span>uuid,</td></tr>
<tr class="diffunmodified"><td class="diffline">34 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>&quot;expires_at&quot;:<span class="dp">·</span>time.time()<span class="dp">·</span>+<span class="dp">·</span>99999999999999,</td><td class="diffline">33 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>&quot;expires_at&quot;:<span class="dp">·</span>time.time()<span class="dp">·</span>+<span class="dp">·</span>99999999999999,</td></tr>
<tr class="diffunmodified"><td class="diffline">35 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>&quot;accessToken&quot;:<span class="dp">·</span>token,</td><td class="diffline">34 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>&quot;accessToken&quot;:<span class="dp">·</span>token,</td></tr>
<tr class="diffunmodified"><td class="diffline">36 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>&quot;refreshToken&quot;:<span class="dp">·</span>token}</td><td class="diffline">35 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>&quot;refreshToken&quot;:<span class="dp">·</span>token}</td></tr>
<tr class="diffunmodified"><td class="diffline">37 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>nice_json(device)</td><td class="diffline">36 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>nice_json(device)</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">38 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@app.route(&quot;/&quot;<span class="dp">·</span>+<span class="dp">·</span>API_VERSION<span class="dp">·</span>+<span class="dp">·</span>&quot;/admin/&lt;uuid&gt;/device&quot;,<span class="dp">·</span>methods=[&#x27;PUT&#x27;])</td><td class="diffline">37 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@app.route(&quot;/&quot;<span class="dp">·</span>+<span class="dp">·</span>API_VERSION<span class="dp">·</span>+<span class="dp">·</span>&quot;/admin/&lt;uuid&gt;/device&quot;,<span class="dp">·</span>methods=[&#x27;PUT&#x27;])</td></tr>
<tr class="diffunmodified"><td class="diffline">39 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@requires_admin</td><td class="diffline">38 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@requires_admin</td></tr>
<tr class="diffunmodified"><td class="diffline">40 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@noindex</td><td class="diffline">39 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@noindex</td></tr>
<tr class="diffunmodified"><td class="diffline">41 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>def<span class="dp">·</span>set_device(uuid):</td><td class="diffline">40 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>def<span class="dp">·</span>set_device(uuid):</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">41 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>device_data<span class="dp">·</span>=<span class="dp">·</span>db.update_device(uuid,<span class="dp">·</span>**request.json)</td></tr>
<tr class="diffdeleted"><td class="diffline">42 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>data<span class="dp">·</span>=<span class="dp">·</span>request.json</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">43 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>with<span class="dp">·</span>DeviceDatabase()<span class="dp">·</span>as<span class="dp">·</span>db:</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">44 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>device<span class="dp">·</span>=<span class="dp">·</span>db.get_device(uuid)</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">45 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>if<span class="dp">·</span>not<span class="dp">·</span>device:</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">46 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>{&quot;error&quot;:<span class="dp">·</span>&quot;unknown<span class="dp">·</span>device&quot;}</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">47 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>if<span class="dp">·</span>&quot;name&quot;<span class="dp">·</span>in<span class="dp">·</span>data:</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">48 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>device.name<span class="dp">·</span>=<span class="dp">·</span>data[&quot;name&quot;]</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">49 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>if<span class="dp">·</span>&quot;opt_in&quot;<span class="dp">·</span>in<span class="dp">·</span>data:</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">50 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>device.opt_in<span class="dp">·</span>=<span class="dp">·</span>data[&quot;opt_in&quot;]</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">51 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>if<span class="dp">·</span>&quot;device_location&quot;<span class="dp">·</span>in<span class="dp">·</span>data:</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">52 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>device.device_location<span class="dp">·</span>=<span class="dp">·</span>data[&quot;device_location&quot;]</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">53 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>if<span class="dp">·</span>&quot;email&quot;<span class="dp">·</span>in<span class="dp">·</span>data:</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">54 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>device.email<span class="dp">·</span>=<span class="dp">·</span>data[&quot;email&quot;]</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">55 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>if<span class="dp">·</span>&quot;isolated_skills&quot;<span class="dp">·</span>in<span class="dp">·</span>data:</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">56 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>device.isolated_skills<span class="dp">·</span>=<span class="dp">·</span>data[&quot;isolated_skills&quot;]</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">57 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>if<span class="dp">·</span>&quot;lang&quot;<span class="dp">·</span>in<span class="dp">·</span>data:</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">58 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>device.lang<span class="dp">·</span>=<span class="dp">·</span>data[&quot;lang&quot;]</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">59 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>db.update_device(device)</td><td colspan="2"> </td></tr>
<tr class="diffchanged"><td class="diffline">60 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><del><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span></del>return<span class="dp">·</span>nice_json(devic<del>e.s</del>e<del>ri</del>a<del>lize</del><del>()</del>)</td><td class="diffline">42 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>nice_json(device<ins>_d</ins>a<ins>ta</ins>)</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">61 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@app.route(&quot;/&quot;<span class="dp">·</span>+<span class="dp">·</span>API_VERSION<span class="dp">·</span>+<span class="dp">·</span>&quot;/admin/&lt;uuid&gt;/location&quot;,<span class="dp">·</span>methods=[&#x27;PUT&#x27;])</td><td class="diffline">43 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@app.route(&quot;/&quot;<span class="dp">·</span>+<span class="dp">·</span>API_VERSION<span class="dp">·</span>+<span class="dp">·</span>&quot;/admin/&lt;uuid&gt;/location&quot;,<span class="dp">·</span>methods=[&#x27;PUT&#x27;])</td></tr>
<tr class="diffunmodified"><td class="diffline">62 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@requires_admin</td><td class="diffline">44 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@requires_admin</td></tr>
<tr class="diffunmodified"><td class="diffline">63 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@noindex</td><td class="diffline">45 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@noindex</td></tr>
<tr class="diffunmodified"><td class="diffline">64 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>def<span class="dp">·</span>set_location(uuid):</td><td class="diffline">46 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>def<span class="dp">·</span>set_location(uuid):</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">47 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>device_data<span class="dp">·</span>=<span class="dp">·</span>db.update_device(uuid,<span class="dp">·</span>location=request.json)</td></tr>
<tr class="diffdeleted"><td class="diffline">65 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>with<span class="dp">·</span>DeviceDatabase()<span class="dp">·</span>as<span class="dp">·</span>db:</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">66 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>device<span class="dp">·</span>=<span class="dp">·</span>db.get_device(uuid)</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">67 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>if<span class="dp">·</span>not<span class="dp">·</span>device:</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">68 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>{&quot;error&quot;:<span class="dp">·</span>&quot;unknown<span class="dp">·</span>device&quot;}</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">69 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>device.location<span class="dp">·</span>=<span class="dp">·</span>request.json</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">70 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>db.update_device(device)</td><td colspan="2"> </td></tr>
<tr class="diffchanged"><td class="diffline">71 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><del><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span></del>return<span class="dp">·</span>nice_json(devic<del>e.s</del>e<del>ri</del>a<del>lize</del><del>()</del>)</td><td class="diffline">48 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>nice_json(device<ins>_d</ins>a<ins>ta</ins>)</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">72 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@app.route(&quot;/&quot;<span class="dp">·</span>+<span class="dp">·</span>API_VERSION<span class="dp">·</span>+<span class="dp">·</span>&quot;/admin/&lt;uuid&gt;/prefs&quot;,<span class="dp">·</span>methods=[&#x27;PUT&#x27;])</td><td class="diffline">49 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@app.route(&quot;/&quot;<span class="dp">·</span>+<span class="dp">·</span>API_VERSION<span class="dp">·</span>+<span class="dp">·</span>&quot;/admin/&lt;uuid&gt;/prefs&quot;,<span class="dp">·</span>methods=[&#x27;PUT&#x27;])</td></tr>
<tr class="diffunmodified"><td class="diffline">73 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@requires_admin</td><td class="diffline">50 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@requires_admin</td></tr>
<tr class="diffunmodified"><td class="diffline">74 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@noindex</td><td class="diffline">51 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@noindex</td></tr>
<tr class="diffunmodified"><td class="diffline">75 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>def<span class="dp">·</span>set_prefs(uuid):</td><td class="diffline">52 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>def<span class="dp">·</span>set_prefs(uuid):</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">53 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>device_data<span class="dp">·</span>=<span class="dp">·</span>db.update_device(uuid,<span class="dp">·</span>**request.json)</td></tr>
<tr class="diffdeleted"><td class="diffline">76 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>data<span class="dp">·</span>=<span class="dp">·</span>request.json</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">77 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>with<span class="dp">·</span>DeviceDatabase()<span class="dp">·</span>as<span class="dp">·</span>db:</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">78 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>device<span class="dp">·</span>=<span class="dp">·</span>db.get_device(uuid)</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">79 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>if<span class="dp">·</span>not<span class="dp">·</span>device:</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">80 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>{&quot;error&quot;:<span class="dp">·</span>&quot;unknown<span class="dp">·</span>device&quot;}</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">81 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>if<span class="dp">·</span>&quot;time_format&quot;<span class="dp">·</span>in<span class="dp">·</span>data:</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">82 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>device.time_format<span class="dp">·</span>=<span class="dp">·</span>data[&quot;time_format&quot;]</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">83 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>if<span class="dp">·</span>&quot;date_format&quot;<span class="dp">·</span>in<span class="dp">·</span>data:</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">84 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>device.date_format<span class="dp">·</span>=<span class="dp">·</span>data[&quot;date_format&quot;]</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">85 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>if<span class="dp">·</span>&quot;system_unit&quot;<span class="dp">·</span>in<span class="dp">·</span>data:</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">86 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>device.system_unit<span class="dp">·</span>=<span class="dp">·</span>data[&quot;system_unit&quot;]</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">87 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>if<span class="dp">·</span>&quot;lang&quot;<span class="dp">·</span>in<span class="dp">·</span>data:</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">88 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>device.lang<span class="dp">·</span>=<span class="dp">·</span>data[&quot;lang&quot;]</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">89 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>if<span class="dp">·</span>&quot;tts_module&quot;<span class="dp">·</span>in<span class="dp">·</span>data:</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">90 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>device.default_tts<span class="dp">·</span>=<span class="dp">·</span>data[&quot;tts_module&quot;]</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">91 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>if<span class="dp">·</span>&quot;tts_config&quot;<span class="dp">·</span>in<span class="dp">·</span>data:</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">92 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>device.default_tts_cfg<span class="dp">·</span>=<span class="dp">·</span>data[&quot;tts_config&quot;]</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">93 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>elif<span class="dp">·</span>data[&quot;tts_module&quot;]<span class="dp">·</span>in<span class="dp">·</span>CONFIGURATION[&quot;tts_configs&quot;]:</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">94 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>device.default_tts_cfg<span class="dp">·</span>=<span class="dp">·</span>CONFIGURATION[&quot;tts_configs&quot;][data[&quot;tts_module&quot;]]</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">95 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>else:</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">96 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>device.default_tts_cfg<span class="dp">·</span>=<span class="dp">·</span>{}</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">97 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>if<span class="dp">·</span>&quot;wake_word&quot;<span class="dp">·</span>in<span class="dp">·</span>data:</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">98 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>device.default_ww<span class="dp">·</span>=<span class="dp">·</span>data[&quot;wake_word&quot;]</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">99 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>if<span class="dp">·</span>&quot;ww_config&quot;<span class="dp">·</span>in<span class="dp">·</span>data:</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">100 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>device.default_ww_cfg<span class="dp">·</span>=<span class="dp">·</span>data[&quot;ww_config&quot;]</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">101 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>elif<span class="dp">·</span>data[&quot;ww_module&quot;]<span class="dp">·</span>in<span class="dp">·</span>CONFIGURATION[&quot;ww_configs&quot;]:</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">102 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>device.default_ww_cfg<span class="dp">·</span>=<span class="dp">·</span>CONFIGURATION[&quot;ww_configs&quot;][data[&quot;ww_module&quot;]]</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">103 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>else:</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">104 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>device.default_ww_cfg<span class="dp">·</span>=<span class="dp">·</span>{}</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">105 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>db.update_device(device)</td><td colspan="2"> </td></tr>
<tr class="diffchanged"><td class="diffline">106 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><del><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span></del>return<span class="dp">·</span>nice_json(devic<del>e.s</del>e<del>ri</del>a<del>lize</del><del>()</del>)</td><td class="diffline">54 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>nice_json(device<ins>_d</ins>a<ins>ta</ins>)</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">107 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>app</td><td class="diffline">55 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>app</td></tr>
</table>  </div>
  <div class="difference">
    <div class="diffheader">
    <div class="diffcontrol">⊟</div>
    <div><span class="diffsize">4.22 KB</span></div>
    <div id="ovos_local_backend-backend-auth.py"><span class="source">ovos_local_backend/backend/auth.py</span>
      <a class="anchor" href="#ovos_local_backend-backend-auth.py">¶</a>
    </div>
    </div>
<table class="diff">
<colgroup><col class="colines"/><col class="coldiff"/>
<col class="colines"/><col class="coldiff"/></colgroup>
<tr style="display:none;"><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr class="diffhunk"><td colspan="2">Offset 16, 15 lines modified</td><td colspan="2">Offset 16, 16 lines modified</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">16 </td><td class="diffpresent">import<span class="dp">·</span>requests</td><td class="diffline">16 </td><td class="diffpresent">import<span class="dp">·</span>requests</td></tr>
<tr class="diffunmodified"><td class="diffline">17 </td><td class="diffpresent">from<span class="dp">·</span>flask<span class="dp">·</span>import<span class="dp">·</span>request</td><td class="diffline">17 </td><td class="diffpresent">from<span class="dp">·</span>flask<span class="dp">·</span>import<span class="dp">·</span>request</td></tr>
<tr class="diffunmodified"><td class="diffline">18 </td><td class="diffpresent">from<span class="dp">·</span>oauthlib.oauth2<span class="dp">·</span>import<span class="dp">·</span>WebApplicationClient</td><td class="diffline">18 </td><td class="diffpresent">from<span class="dp">·</span>oauthlib.oauth2<span class="dp">·</span>import<span class="dp">·</span>WebApplicationClient</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">19 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.backend<span class="dp">·</span>import<span class="dp">·</span>API_VERSION</td><td class="diffline">19 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.backend<span class="dp">·</span>import<span class="dp">·</span>API_VERSION</td></tr>
<tr class="diffunmodified"><td class="diffline">20 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.backend.decorators<span class="dp">·</span>import<span class="dp">·</span>noindex,<span class="dp">·</span>requires_auth</td><td class="diffline">20 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.backend.decorators<span class="dp">·</span>import<span class="dp">·</span>noindex,<span class="dp">·</span>requires_auth</td></tr>
<tr class="diffchanged"><td class="diffline">21 </td><td class="diffpresent">from<span class="dp">·</span>ovos_<del>ba</del>c<del>kend_</del>c<del>l</del><del>i</del>en<del>t</del>.database<span class="dp">·</span>import<span class="dp">·</span><del>OA</del>uth<del>TokenD</del>ata<del>b</del>a<del>s</del>e,<span class="dp">·</span><del>OA</del>uth<del>A</del>pplication<del>D</del>at<del>abas</del>e</td><td class="diffline">21 </td><td class="diffpresent">from<span class="dp">·</span>ovos_<ins>lo</ins>c<ins>al_ba</ins>c<ins>k</ins>en<ins>d</ins>.database<span class="dp">·</span>import<span class="dp">·</span><ins>add_</ins><ins>oa</ins>uth<ins>_</ins><ins>applic</ins>at<ins>ion,<span class="dp">·</span></ins>a<ins>dd_</ins><ins>o</ins>a<ins>uth_to</ins><ins>k</ins>e<ins>n</ins>,<span class="dp">·</span><ins>get_</ins><ins>oa</ins>uth<ins>_</ins><ins>a</ins>pplication<ins>,<span class="dp">·</span>get_</ins><ins>o</ins>a<ins>u</ins>t<ins>h</ins><ins>_tok</ins>e<ins>n</ins></td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">22 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.utils<span class="dp">·</span>import<span class="dp">·</span>nice_json</td><td class="diffline">22 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.utils<span class="dp">·</span>import<span class="dp">·</span>nice_json</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">23 </td><td class="diffpresent">os.environ[&#x27;OAUTHLIB_INSECURE_TRANSPORT&#x27;]<span class="dp">·</span>=<span class="dp">·</span>&#x27;1&#x27;</td><td class="diffline">23 </td><td class="diffpresent">os.environ[&#x27;OAUTHLIB_INSECURE_TRANSPORT&#x27;]<span class="dp">·</span>=<span class="dp">·</span>&#x27;1&#x27;</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">24 </td><td class="diffpresent">def<span class="dp">·</span>get_auth_routes(app):</td><td class="diffline">24 </td><td class="diffpresent">def<span class="dp">·</span>get_auth_routes(app):</td></tr>
<tr class="diffunmodified"><td class="diffline">25 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@app.route(f&quot;/{API_VERSION}/auth/token&quot;,<span class="dp">·</span>methods=[&#x27;GET&#x27;])</td><td class="diffline">25 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@app.route(f&quot;/{API_VERSION}/auth/token&quot;,<span class="dp">·</span>methods=[&#x27;GET&#x27;])</td></tr>
<tr class="diffhunk"><td colspan="2">Offset 46, 44 lines modified</td><td colspan="2">Offset 47, 48 lines modified</td></tr>
<tr class="diffunmodified"><td class="diffline">46 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@app.route(f&quot;/{API_VERSION}/auth/&lt;oauth_id&gt;/auth_url&quot;,<span class="dp">·</span>methods=[&#x27;GET&#x27;])</td><td class="diffline">47 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@app.route(f&quot;/{API_VERSION}/auth/&lt;oauth_id&gt;/auth_url&quot;,<span class="dp">·</span>methods=[&#x27;GET&#x27;])</td></tr>
<tr class="diffunmodified"><td class="diffline">47 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@requires_auth</td><td class="diffline">48 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@requires_auth</td></tr>
<tr class="diffunmodified"><td class="diffline">48 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@noindex</td><td class="diffline">49 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@noindex</td></tr>
<tr class="diffunmodified"><td class="diffline">49 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>def<span class="dp">·</span>oauth_url(oauth_id):</td><td class="diffline">50 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>def<span class="dp">·</span>oauth_url(oauth_id):</td></tr>
<tr class="diffunmodified"><td class="diffline">50 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>&quot;&quot;&quot;<span class="dp">·</span>send<span class="dp">·</span>auth<span class="dp">·</span>url<span class="dp">·</span>to<span class="dp">·</span>user<span class="dp">·</span>to<span class="dp">·</span>confirm<span class="dp">·</span>authorization,</td><td class="diffline">51 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>&quot;&quot;&quot;<span class="dp">·</span>send<span class="dp">·</span>auth<span class="dp">·</span>url<span class="dp">·</span>to<span class="dp">·</span>user<span class="dp">·</span>to<span class="dp">·</span>confirm<span class="dp">·</span>authorization,</td></tr>
<tr class="diffunmodified"><td class="diffline">51 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>once<span class="dp">·</span>user<span class="dp">·</span>opens<span class="dp">·</span>it<span class="dp">·</span>callback<span class="dp">·</span>is<span class="dp">·</span>triggered</td><td class="diffline">52 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>once<span class="dp">·</span>user<span class="dp">·</span>opens<span class="dp">·</span>it<span class="dp">·</span>callback<span class="dp">·</span>is<span class="dp">·</span>triggered</td></tr>
<tr class="diffunmodified"><td class="diffline">52 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>&quot;&quot;&quot;</td><td class="diffline">53 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>&quot;&quot;&quot;</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">54 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>auth<span class="dp">·</span>=<span class="dp">·</span>request.headers.get(&#x27;Authorization&#x27;,<span class="dp">·</span>&#x27;&#x27;).replace(&quot;Bearer<span class="dp">·</span>&quot;,<span class="dp">·</span>&quot;&quot;)</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">55 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>uid<span class="dp">·</span>=<span class="dp">·</span>auth.split(&quot;:&quot;)[-1]</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">56 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>token_id<span class="dp">·</span>=<span class="dp">·</span>f&quot;{uid}|{oauth_id}&quot;</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">53 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>params<span class="dp">·</span>=<span class="dp">·</span>dict(request.args)</td><td class="diffline">57 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>params<span class="dp">·</span>=<span class="dp">·</span>dict(request.args)</td></tr>
<tr class="diffchanged"><td class="diffline">54 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>params[&quot;callback_endpoint&quot;]<span class="dp">·</span>=<span class="dp">·</span>request.base_url<span class="dp">·</span>+<span class="dp">·</span>f&quot;/{API_VERSION}/auth/callback/{<del>oauth</del>_id}&quot;</td><td class="diffline">58 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>params[&quot;callback_endpoint&quot;]<span class="dp">·</span>=<span class="dp">·</span>request.base_url<span class="dp">·</span>+<span class="dp">·</span>f&quot;/{API_VERSION}/auth/callback/{<ins>token</ins>_id}&quot;</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">55 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>client<span class="dp">·</span>=<span class="dp">·</span>WebApplicationClient(params[&quot;client_id&quot;])</td><td class="diffline">59 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>client<span class="dp">·</span>=<span class="dp">·</span>WebApplicationClient(params[&quot;client_id&quot;])</td></tr>
<tr class="diffunmodified"><td class="diffline">56 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>request_uri<span class="dp">·</span>=<span class="dp">·</span>client.prepare_request_uri(</td><td class="diffline">60 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>request_uri<span class="dp">·</span>=<span class="dp">·</span>client.prepare_request_uri(</td></tr>
<tr class="diffunmodified"><td class="diffline">57 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>params[&quot;auth_endpoint&quot;],</td><td class="diffline">61 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>params[&quot;auth_endpoint&quot;],</td></tr>
<tr class="diffunmodified"><td class="diffline">58 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>redirect_uri=params[&quot;callback_endpoint&quot;],</td><td class="diffline">62 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>redirect_uri=params[&quot;callback_endpoint&quot;],</td></tr>
<tr class="diffunmodified"><td class="diffline">59 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>scope=params[&quot;scope&quot;],</td><td class="diffline">63 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>scope=params[&quot;scope&quot;],</td></tr>
<tr class="diffunmodified"><td class="diffline">60 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>)</td><td class="diffline">64 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>)</td></tr>
<tr class="diffdeleted"><td class="diffline">61 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>with<span class="dp">·</span>OAuthApplicationDatabase()<span class="dp">·</span>as<span class="dp">·</span>db:</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">62 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>db.add_application(oauth_id,</td><td colspan="2"> </td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">65 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>add_oauth_application(token_id=token_id,</td></tr>
<tr class="diffchanged"><td class="diffline">63 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>params[&quot;client_id&quot;],</td><td class="diffline">66 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><ins>client_id=</ins>params[&quot;client_id&quot;],</td></tr>
<tr class="diffchanged"><td class="diffline">64 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>params[&quot;client_secret&quot;],</td><td class="diffline">67 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><ins>client_secret=</ins>params[&quot;client_secret&quot;],</td></tr>
<tr class="diffchanged"><td class="diffline">65 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>params[&quot;auth_endpoint&quot;],</td><td class="diffline">68 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><ins>auth_endpoint=</ins>params[&quot;auth_endpoint&quot;],</td></tr>
<tr class="diffchanged"><td class="diffline">66 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>params[&quot;token_endpoint&quot;],</td><td class="diffline">69 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><ins>token_endpoint=</ins>params[&quot;token_endpoint&quot;],</td></tr>
<tr class="diffchanged"><td class="diffline">67 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>params[&quot;refresh_endpoint&quot;],</td><td class="diffline">70 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><ins>refresh_endpoint=</ins>params[&quot;refresh_endpoint&quot;],</td></tr>
<tr class="diffchanged"><td class="diffline">68 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>params[&quot;callback_endpoint&quot;],</td><td class="diffline">71 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><ins>callback_endpoint=</ins>params[&quot;callback_endpoint&quot;],</td></tr>
<tr class="diffchanged"><td class="diffline">69 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>params[&quot;scope&quot;])</td><td class="diffline">72 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><ins>scope=</ins>params[&quot;scope&quot;])</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">70 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>request_uri,<span class="dp">·</span>200</td><td class="diffline">73 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>request_uri,<span class="dp">·</span>200</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffchanged"><td class="diffline">71 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@app.route(f&quot;/{API_VERSION}/auth/callback/&lt;<del>oauth</del>_id&gt;&quot;,<span class="dp">·</span>methods=[&#x27;GET&#x27;])</td><td class="diffline">74 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@app.route(f&quot;/{API_VERSION}/auth/callback/&lt;<ins>token</ins>_id&gt;&quot;,<span class="dp">·</span>methods=[&#x27;GET&#x27;])</td></tr>
<tr class="diffunmodified"><td class="diffline">72 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@noindex</td><td class="diffline">75 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@noindex</td></tr>
<tr class="diffchanged"><td class="diffline">73 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>def<span class="dp">·</span>oauth_callback(<del>oauth</del>_id):</td><td class="diffline">76 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>def<span class="dp">·</span>oauth_callback(<ins>token</ins>_id):</td></tr>
<tr class="diffunmodified"><td class="diffline">74 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>&quot;&quot;&quot;<span class="dp">·</span>user<span class="dp">·</span>completed<span class="dp">·</span>oauth,<span class="dp">·</span>save<span class="dp">·</span>token<span class="dp">·</span>to<span class="dp">·</span>db</td><td class="diffline">77 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>&quot;&quot;&quot;<span class="dp">·</span>user<span class="dp">·</span>completed<span class="dp">·</span>oauth,<span class="dp">·</span>save<span class="dp">·</span>token<span class="dp">·</span>to<span class="dp">·</span>db</td></tr>
<tr class="diffunmodified"><td class="diffline">75 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>&quot;&quot;&quot;</td><td class="diffline">78 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>&quot;&quot;&quot;</td></tr>
<tr class="diffunmodified"><td class="diffline">76 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>params<span class="dp">·</span>=<span class="dp">·</span>dict(request.args)</td><td class="diffline">79 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>params<span class="dp">·</span>=<span class="dp">·</span>dict(request.args)</td></tr>
<tr class="diffunmodified"><td class="diffline">77 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>code<span class="dp">·</span>=<span class="dp">·</span>params[&quot;code&quot;]</td><td class="diffline">80 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>code<span class="dp">·</span>=<span class="dp">·</span>params[&quot;code&quot;]</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffchanged"><td class="diffline">78 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>data<span class="dp">·</span>=<span class="dp">·</span><del>OA</del>uth<del>A</del>pplication<del>Database</del>(<del>)</del><del>[</del>o<del>a</del><del>uth</del>_id<del>]</del></td><td class="diffline">81 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>data<span class="dp">·</span>=<span class="dp">·</span><ins>get_</ins><ins>oa</ins>uth<ins>_</ins><ins>a</ins>pplication(<ins>t</ins>o<ins>ken</ins>_id<ins>)</ins></td></tr>
<tr class="diffunmodified"><td class="diffline">79 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>client_id<span class="dp">·</span>=<span class="dp">·</span>data[&quot;client_id&quot;]</td><td class="diffline">82 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>client_id<span class="dp">·</span>=<span class="dp">·</span>data[&quot;client_id&quot;]</td></tr>
<tr class="diffunmodified"><td class="diffline">80 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>client_secret<span class="dp">·</span>=<span class="dp">·</span>data[&quot;client_secret&quot;]</td><td class="diffline">83 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>client_secret<span class="dp">·</span>=<span class="dp">·</span>data[&quot;client_secret&quot;]</td></tr>
<tr class="diffunmodified"><td class="diffline">81 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>token_endpoint<span class="dp">·</span>=<span class="dp">·</span>data[&quot;token_endpoint&quot;]</td><td class="diffline">84 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>token_endpoint<span class="dp">·</span>=<span class="dp">·</span>data[&quot;token_endpoint&quot;]</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">82 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>#<span class="dp">·</span>Prepare<span class="dp">·</span>and<span class="dp">·</span>send<span class="dp">·</span>a<span class="dp">·</span>request<span class="dp">·</span>to<span class="dp">·</span>get<span class="dp">·</span>tokens!<span class="dp">·</span>Yay<span class="dp">·</span>tokens!</td><td class="diffline">85 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>#<span class="dp">·</span>Prepare<span class="dp">·</span>and<span class="dp">·</span>send<span class="dp">·</span>a<span class="dp">·</span>request<span class="dp">·</span>to<span class="dp">·</span>get<span class="dp">·</span>tokens!<span class="dp">·</span>Yay<span class="dp">·</span>tokens!</td></tr>
<tr class="diffunmodified"><td class="diffline">83 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>client<span class="dp">·</span>=<span class="dp">·</span>WebApplicationClient(client_id)</td><td class="diffline">86 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>client<span class="dp">·</span>=<span class="dp">·</span>WebApplicationClient(client_id)</td></tr>
<tr class="diffunmodified"><td class="diffline">84 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>token_url,<span class="dp">·</span>headers,<span class="dp">·</span>body<span class="dp">·</span>=<span class="dp">·</span>client.prepare_token_request(</td><td class="diffline">87 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>token_url,<span class="dp">·</span>headers,<span class="dp">·</span>body<span class="dp">·</span>=<span class="dp">·</span>client.prepare_token_request(</td></tr>
<tr class="diffhunk"><td colspan="2">Offset 95, 21 lines modified</td><td colspan="2">Offset 100, 20 lines modified</td></tr>
<tr class="diffunmodified"><td class="diffline">95 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>token_response<span class="dp">·</span>=<span class="dp">·</span>requests.post(</td><td class="diffline">100 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>token_response<span class="dp">·</span>=<span class="dp">·</span>requests.post(</td></tr>
<tr class="diffunmodified"><td class="diffline">96 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>token_url,</td><td class="diffline">101 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>token_url,</td></tr>
<tr class="diffunmodified"><td class="diffline">97 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>headers=headers,</td><td class="diffline">102 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>headers=headers,</td></tr>
<tr class="diffunmodified"><td class="diffline">98 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>data=body,</td><td class="diffline">103 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>data=body,</td></tr>
<tr class="diffunmodified"><td class="diffline">99 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>auth=(client_id,<span class="dp">·</span>client_secret),</td><td class="diffline">104 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>auth=(client_id,<span class="dp">·</span>client_secret),</td></tr>
<tr class="diffunmodified"><td class="diffline">100 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>).json()</td><td class="diffline">105 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>).json()</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">101 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>with<span class="dp">·</span>OAuthTokenDatabase()<span class="dp">·</span>as<span class="dp">·</span>db:</td><td colspan="2"> </td></tr>
<tr class="diffchanged"><td class="diffline">102 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><del><span class="dp">·</span><span class="dp">·</span></del><del><span class="dp">·</span><span class="dp">·</span></del>d<del>b.</del>a<del>dd</del>_token(<del>oauth</del>_id,<span class="dp">·</span>token_response)</td><td class="diffline">106 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><ins>ad</ins>d<ins>_o</ins>a<ins>u</ins><ins>th</ins>_token(<ins>token</ins>_id,<span class="dp">·</span>token_response)</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">103 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>nice_json(params)</td><td class="diffline">107 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>nice_json(params)</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">104 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@app.route(f&quot;/{API_VERSION}/device/&lt;uuid&gt;/token/&lt;oauth_id&gt;&quot;,<span class="dp">·</span>methods=[&#x27;GET&#x27;])</td><td class="diffline">108 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@app.route(f&quot;/{API_VERSION}/device/&lt;uuid&gt;/token/&lt;oauth_id&gt;&quot;,<span class="dp">·</span>methods=[&#x27;GET&#x27;])</td></tr>
<tr class="diffunmodified"><td class="diffline">105 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@requires_auth</td><td class="diffline">109 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@requires_auth</td></tr>
<tr class="diffunmodified"><td class="diffline">106 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@noindex</td><td class="diffline">110 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@noindex</td></tr>
<tr class="diffunmodified"><td class="diffline">107 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>def<span class="dp">·</span>oauth_token(uuid,<span class="dp">·</span>oauth_id):</td><td class="diffline">111 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>def<span class="dp">·</span>oauth_token(uuid,<span class="dp">·</span>oauth_id):</td></tr>
<tr class="diffunmodified"><td class="diffline">108 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>&quot;&quot;&quot;a<span class="dp">·</span>device<span class="dp">·</span>is<span class="dp">·</span>requesting<span class="dp">·</span>a<span class="dp">·</span>token<span class="dp">·</span>for<span class="dp">·</span>a<span class="dp">·</span>previously<span class="dp">·</span>approved<span class="dp">·</span>OAuth<span class="dp">·</span>app&quot;&quot;&quot;</td><td class="diffline">112 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>&quot;&quot;&quot;a<span class="dp">·</span>device<span class="dp">·</span>is<span class="dp">·</span>requesting<span class="dp">·</span>a<span class="dp">·</span>token<span class="dp">·</span>for<span class="dp">·</span>a<span class="dp">·</span>previously<span class="dp">·</span>approved<span class="dp">·</span>OAuth<span class="dp">·</span>app&quot;&quot;&quot;</td></tr>
<tr class="diffchanged"><td class="diffline">109 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><del>data<span class="dp">·</span>=<span class="dp">·</span>OAu</del>t<del>hT</del>oken<del>Database().get(</del>oauth_id<del>)<span class="dp">·</span>or<span class="dp">·</span></del><del>{}</del></td><td class="diffline">113 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>token<ins>_i</ins><ins>d<span class="dp">·</span>=<span class="dp">·</span>f&quot;@{uuid}|{</ins>oauth_id<ins>}&quot;</ins></td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">114 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>data<span class="dp">·</span>=<span class="dp">·</span>get_oauth_token(token_id)</td></tr>
<tr class="diffunmodified"><td class="diffline">110 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>nice_json(data)</td><td class="diffline">115 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>nice_json(data)</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">111 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>app</td><td class="diffline">116 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>app</td></tr>
</table>  </div>
  <div class="difference">
    <div class="diffheader">
    <div class="diffcontrol">⊟</div>
    <div><span class="diffsize">1.32 KB</span></div>
    <div id="ovos_local_backend-backend-decorators.py"><span class="source">ovos_local_backend/backend/decorators.py</span>
      <a class="anchor" href="#ovos_local_backend-backend-decorators.py">¶</a>
    </div>
    </div>
<table class="diff">
<colgroup><col class="colines"/><col class="coldiff"/>
<col class="colines"/><col class="coldiff"/></colgroup>
<tr style="display:none;"><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr class="diffhunk"><td colspan="2">Offset 9, 31 lines modified</td><td colspan="2">Offset 9, 34 lines modified</td></tr>
<tr class="diffunmodified"><td class="diffline">9 </td><td class="diffpresent">#<span class="dp">·</span>WITHOUT<span class="dp">·</span>WARRANTIES<span class="dp">·</span>OR<span class="dp">·</span>CONDITIONS<span class="dp">·</span>OF<span class="dp">·</span>ANY<span class="dp">·</span>KIND,<span class="dp">·</span>either<span class="dp">·</span>express<span class="dp">·</span>or<span class="dp">·</span>implied.</td><td class="diffline">9 </td><td class="diffpresent">#<span class="dp">·</span>WITHOUT<span class="dp">·</span>WARRANTIES<span class="dp">·</span>OR<span class="dp">·</span>CONDITIONS<span class="dp">·</span>OF<span class="dp">·</span>ANY<span class="dp">·</span>KIND,<span class="dp">·</span>either<span class="dp">·</span>express<span class="dp">·</span>or<span class="dp">·</span>implied.</td></tr>
<tr class="diffunmodified"><td class="diffline">10 </td><td class="diffpresent">#<span class="dp">·</span>See<span class="dp">·</span>the<span class="dp">·</span>License<span class="dp">·</span>for<span class="dp">·</span>the<span class="dp">·</span>specific<span class="dp">·</span>language<span class="dp">·</span>governing<span class="dp">·</span>permissions<span class="dp">·</span>and</td><td class="diffline">10 </td><td class="diffpresent">#<span class="dp">·</span>See<span class="dp">·</span>the<span class="dp">·</span>License<span class="dp">·</span>for<span class="dp">·</span>the<span class="dp">·</span>specific<span class="dp">·</span>language<span class="dp">·</span>governing<span class="dp">·</span>permissions<span class="dp">·</span>and</td></tr>
<tr class="diffunmodified"><td class="diffline">11 </td><td class="diffpresent">#<span class="dp">·</span>limitations<span class="dp">·</span>under<span class="dp">·</span>the<span class="dp">·</span>License.</td><td class="diffline">11 </td><td class="diffpresent">#<span class="dp">·</span>limitations<span class="dp">·</span>under<span class="dp">·</span>the<span class="dp">·</span>License.</td></tr>
<tr class="diffunmodified"><td class="diffline">12 </td><td class="diffpresent">#</td><td class="diffline">12 </td><td class="diffpresent">#</td></tr>
<tr class="diffunmodified"><td class="diffline">13 </td><td class="diffpresent">from<span class="dp">·</span>functools<span class="dp">·</span>import<span class="dp">·</span>wraps</td><td class="diffline">13 </td><td class="diffpresent">from<span class="dp">·</span>functools<span class="dp">·</span>import<span class="dp">·</span>wraps</td></tr>
<tr class="diffunmodified"><td class="diffline">14 </td><td class="diffpresent">from<span class="dp">·</span>flask<span class="dp">·</span>import<span class="dp">·</span>make_response,<span class="dp">·</span>request,<span class="dp">·</span>Response</td><td class="diffline">14 </td><td class="diffpresent">from<span class="dp">·</span>flask<span class="dp">·</span>import<span class="dp">·</span>make_response,<span class="dp">·</span>request,<span class="dp">·</span>Response</td></tr>
<tr class="diffunmodified"><td class="diffline">15 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.configuration<span class="dp">·</span>import<span class="dp">·</span>CONFIGURATION</td><td class="diffline">15 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.configuration<span class="dp">·</span>import<span class="dp">·</span>CONFIGURATION</td></tr>
<tr class="diffdeleted"><td class="diffline">16 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.database.settings<span class="dp">·</span>import<span class="dp">·</span>DeviceDatabase</td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">17 </td><td class="diffpresent">def<span class="dp">·</span>check_auth(uid,<span class="dp">·</span>token):</td><td class="diffline">16 </td><td class="diffpresent">def<span class="dp">·</span>check_auth(uid,<span class="dp">·</span>token):</td></tr>
<tr class="diffunmodified"><td class="diffline">18 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>&quot;&quot;&quot;This<span class="dp">·</span>function<span class="dp">·</span>is<span class="dp">·</span>called<span class="dp">·</span>to<span class="dp">·</span>check<span class="dp">·</span>if<span class="dp">·</span>a<span class="dp">·</span>access<span class="dp">·</span>token<span class="dp">·</span>is<span class="dp">·</span>valid.&quot;&quot;&quot;</td><td class="diffline">17 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>&quot;&quot;&quot;This<span class="dp">·</span>function<span class="dp">·</span>is<span class="dp">·</span>called<span class="dp">·</span>to<span class="dp">·</span>check<span class="dp">·</span>if<span class="dp">·</span>a<span class="dp">·</span>access<span class="dp">·</span>token<span class="dp">·</span>is<span class="dp">·</span>valid.&quot;&quot;&quot;</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">18 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>from<span class="dp">·</span>ovos_local_backend.database<span class="dp">·</span>import<span class="dp">·</span>get_device</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffchanged"><td class="diffline">19 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>device<span class="dp">·</span>=<span class="dp">·</span><del>DeviceDatabase().</del>get_device(uid)</td><td class="diffline">19 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>device<span class="dp">·</span>=<span class="dp">·</span>get_device(uid)</td></tr>
<tr class="diffunmodified"><td class="diffline">20 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>if<span class="dp">·</span>device<span class="dp">·</span>and<span class="dp">·</span>device.token<span class="dp">·</span>==<span class="dp">·</span>token:</td><td class="diffline">20 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>if<span class="dp">·</span>device<span class="dp">·</span>and<span class="dp">·</span>device.token<span class="dp">·</span>==<span class="dp">·</span>token:</td></tr>
<tr class="diffunmodified"><td class="diffline">21 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>True</td><td class="diffline">21 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>True</td></tr>
<tr class="diffunmodified"><td class="diffline">22 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>False</td><td class="diffline">22 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>False</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">23 </td><td class="diffpresent">def<span class="dp">·</span>requires_opt_in(f):</td><td class="diffline">23 </td><td class="diffpresent">def<span class="dp">·</span>requires_opt_in(f):</td></tr>
<tr class="diffunmodified"><td class="diffline">24 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@wraps(f)</td><td class="diffline">24 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@wraps(f)</td></tr>
<tr class="diffunmodified"><td class="diffline">25 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>def<span class="dp">·</span>decorated(*args,<span class="dp">·</span>**kwargs):</td><td class="diffline">25 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>def<span class="dp">·</span>decorated(*args,<span class="dp">·</span>**kwargs):</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">26 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>from<span class="dp">·</span>ovos_local_backend.database<span class="dp">·</span>import<span class="dp">·</span>get_device</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">26 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>auth<span class="dp">·</span>=<span class="dp">·</span>request.headers.get(&#x27;Authorization&#x27;,<span class="dp">·</span>&#x27;&#x27;).replace(&quot;Bearer<span class="dp">·</span>&quot;,<span class="dp">·</span>&quot;&quot;)</td><td class="diffline">27 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>auth<span class="dp">·</span>=<span class="dp">·</span>request.headers.get(&#x27;Authorization&#x27;,<span class="dp">·</span>&#x27;&#x27;).replace(&quot;Bearer<span class="dp">·</span>&quot;,<span class="dp">·</span>&quot;&quot;)</td></tr>
<tr class="diffunmodified"><td class="diffline">27 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>uuid<span class="dp">·</span>=<span class="dp">·</span>kwargs.get(&quot;uuid&quot;)<span class="dp">·</span>or<span class="dp">·</span>auth.split(&quot;:&quot;)[-1]<span class="dp">·</span><span class="dp">·</span>#<span class="dp">·</span>this<span class="dp">·</span>split<span class="dp">·</span>is<span class="dp">·</span>only<span class="dp">·</span>valid<span class="dp">·</span>here,<span class="dp">·</span>not<span class="dp">·</span>selene</td><td class="diffline">28 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>uuid<span class="dp">·</span>=<span class="dp">·</span>kwargs.get(&quot;uuid&quot;)<span class="dp">·</span>or<span class="dp">·</span>auth.split(&quot;:&quot;)[-1]<span class="dp">·</span><span class="dp">·</span>#<span class="dp">·</span>this<span class="dp">·</span>split<span class="dp">·</span>is<span class="dp">·</span>only<span class="dp">·</span>valid<span class="dp">·</span>here,<span class="dp">·</span>not<span class="dp">·</span>selene</td></tr>
<tr class="diffchanged"><td class="diffline">28 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>device<span class="dp">·</span>=<span class="dp">·</span><del>DeviceDatabase().</del>get_device(uuid)</td><td class="diffline">29 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>device<span class="dp">·</span>=<span class="dp">·</span>get_device(uuid)</td></tr>
<tr class="diffunmodified"><td class="diffline">29 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>if<span class="dp">·</span>device<span class="dp">·</span>and<span class="dp">·</span>device.opt_in:</td><td class="diffline">30 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>if<span class="dp">·</span>device<span class="dp">·</span>and<span class="dp">·</span>device.opt_in:</td></tr>
<tr class="diffunmodified"><td class="diffline">30 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>f(*args,<span class="dp">·</span>**kwargs)</td><td class="diffline">31 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>f(*args,<span class="dp">·</span>**kwargs)</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">31 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>decorated</td><td class="diffline">32 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>decorated</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">32 </td><td class="diffpresent">def<span class="dp">·</span>requires_auth(f):</td><td class="diffline">33 </td><td class="diffpresent">def<span class="dp">·</span>requires_auth(f):</td></tr>
</table>  </div>
  <div class="difference">
    <div class="diffheader">
    <div class="diffcontrol">⊟</div>
    <div><span class="diffsize">6.23 KB</span></div>
    <div id="ovos_local_backend-backend-device.py"><span class="source">ovos_local_backend/backend/device.py</span>
      <a class="anchor" href="#ovos_local_backend-backend-device.py">¶</a>
    </div>
    </div>
<table class="diff">
<colgroup><col class="colines"/><col class="coldiff"/>
<col class="colines"/><col class="coldiff"/></colgroup>
<tr style="display:none;"><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr class="diffhunk"><td colspan="2">Offset 11, 63 lines modified</td><td colspan="2">Offset 11, 69 lines modified</td></tr>
<tr class="diffunmodified"><td class="diffline">11 </td><td class="diffpresent">#<span class="dp">·</span>limitations<span class="dp">·</span>under<span class="dp">·</span>the<span class="dp">·</span>License.</td><td class="diffline">11 </td><td class="diffpresent">#<span class="dp">·</span>limitations<span class="dp">·</span>under<span class="dp">·</span>the<span class="dp">·</span>License.</td></tr>
<tr class="diffunmodified"><td class="diffline">12 </td><td class="diffpresent">#</td><td class="diffline">12 </td><td class="diffpresent">#</td></tr>
<tr class="diffunmodified"><td class="diffline">13 </td><td class="diffpresent">import<span class="dp">·</span>time</td><td class="diffline">13 </td><td class="diffpresent">import<span class="dp">·</span>time</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">14 </td><td class="diffpresent">from<span class="dp">·</span>flask<span class="dp">·</span>import<span class="dp">·</span>request</td><td class="diffline">14 </td><td class="diffpresent">from<span class="dp">·</span>flask<span class="dp">·</span>import<span class="dp">·</span>request</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">15 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.backend<span class="dp">·</span>import<span class="dp">·</span>API_VERSION</td><td class="diffline">15 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.backend<span class="dp">·</span>import<span class="dp">·</span>API_VERSION</td></tr>
<tr class="diffchanged"><td class="diffline">16 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.backend.decorators<span class="dp">·</span>import<span class="dp">·</span>noindex,<span class="dp">·</span>requires_auth</td><td class="diffline">16 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.backend.decorators<span class="dp">·</span>import<span class="dp">·</span>noindex,<span class="dp">·</span>requires_auth<ins>,<span class="dp">·</span>requires_opt_in</ins></td></tr>
<tr class="diffunmodified"><td class="diffline">17 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.configuration<span class="dp">·</span>import<span class="dp">·</span>CONFIGURATION</td><td class="diffline">17 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.configuration<span class="dp">·</span>import<span class="dp">·</span>CONFIGURATION</td></tr>
<tr class="diffdeleted"><td class="diffline">18 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.database.metrics<span class="dp">·</span>import<span class="dp">·</span>save_metric</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">19 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.database.settings<span class="dp">·</span>import<span class="dp">·</span>DeviceDatabase,<span class="dp">·</span>SkillSettings,<span class="dp">·</span>SettingsDatabase</td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">20 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.utils<span class="dp">·</span>import<span class="dp">·</span>generate_code,<span class="dp">·</span>nice_json</td><td class="diffline">18 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.utils<span class="dp">·</span>import<span class="dp">·</span>generate_code,<span class="dp">·</span>nice_json</td></tr>
<tr class="diffunmodified"><td class="diffline">21 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.utils.geolocate<span class="dp">·</span>import<span class="dp">·</span>get_request_location</td><td class="diffline">19 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.utils.geolocate<span class="dp">·</span>import<span class="dp">·</span>get_request_location</td></tr>
<tr class="diffunmodified"><td class="diffline">22 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.utils.mail<span class="dp">·</span>import<span class="dp">·</span>send_email</td><td class="diffline">20 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.utils.mail<span class="dp">·</span>import<span class="dp">·</span>send_email</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">21 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.database<span class="dp">·</span>import<span class="dp">·</span>(</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">22 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>add_metric,</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">23 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>get_device,</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">24 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>add_device,</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">25 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>SkillSettings,</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">26 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>update_skill_settings,</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">27 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>get_skill_settings_for_device</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">28 </td><td class="diffpresent">)</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffadded"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffadded"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">29 </td><td class="diffpresent">@requires_opt_in</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">30 </td><td class="diffpresent">def<span class="dp">·</span>save_metric(uuid,<span class="dp">·</span>name,<span class="dp">·</span>data):</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">31 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>add_metric(uuid,<span class="dp">·</span>name,<span class="dp">·</span>data)</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">23 </td><td class="diffpresent">def<span class="dp">·</span>get_device_routes(app):</td><td class="diffline">32 </td><td class="diffpresent">def<span class="dp">·</span>get_device_routes(app):</td></tr>
<tr class="diffunmodified"><td class="diffline">24 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@app.route(f&quot;/{API_VERSION}/device/&lt;uuid&gt;/settingsMeta&quot;,<span class="dp">·</span>methods=[&#x27;PUT&#x27;])</td><td class="diffline">33 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@app.route(f&quot;/{API_VERSION}/device/&lt;uuid&gt;/settingsMeta&quot;,<span class="dp">·</span>methods=[&#x27;PUT&#x27;])</td></tr>
<tr class="diffunmodified"><td class="diffline">25 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@requires_auth</td><td class="diffline">34 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@requires_auth</td></tr>
<tr class="diffunmodified"><td class="diffline">26 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>def<span class="dp">·</span>settingsmeta(uuid):</td><td class="diffline">35 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>def<span class="dp">·</span>settingsmeta(uuid):</td></tr>
<tr class="diffunmodified"><td class="diffline">27 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>&quot;&quot;&quot;<span class="dp">·</span>new<span class="dp">·</span>style<span class="dp">·</span>skill<span class="dp">·</span>settings<span class="dp">·</span>meta<span class="dp">·</span>(upload<span class="dp">·</span>only)<span class="dp">·</span>&quot;&quot;&quot;</td><td class="diffline">36 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>&quot;&quot;&quot;<span class="dp">·</span>new<span class="dp">·</span>style<span class="dp">·</span>skill<span class="dp">·</span>settings<span class="dp">·</span>meta<span class="dp">·</span>(upload<span class="dp">·</span>only)<span class="dp">·</span>&quot;&quot;&quot;</td></tr>
<tr class="diffunmodified"><td class="diffline">28 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>s<span class="dp">·</span>=<span class="dp">·</span>SkillSettings.deserialize(request.json)</td><td class="diffline">37 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>s<span class="dp">·</span>=<span class="dp">·</span>SkillSettings.deserialize(request.json)</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">38 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>#<span class="dp">·</span>ignore<span class="dp">·</span>s.settings<span class="dp">·</span>on<span class="dp">·</span>purpose</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">39 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>update_skill_settings(s.remote_id,<span class="dp">·</span></td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">40 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>metadata_json=s.meta,<span class="dp">·</span></td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">41 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>display_name=s.display_name)</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">29 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>#<span class="dp">·</span>save<span class="dp">·</span>new<span class="dp">·</span>settings<span class="dp">·</span>meta<span class="dp">·</span>to<span class="dp">·</span>db</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">30 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>with<span class="dp">·</span>SettingsDatabase()<span class="dp">·</span>as<span class="dp">·</span>db:</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">31 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>#<span class="dp">·</span>keep<span class="dp">·</span>old<span class="dp">·</span>settings,<span class="dp">·</span>update<span class="dp">·</span>meta<span class="dp">·</span>only</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">32 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>old_s<span class="dp">·</span>=<span class="dp">·</span>db.get_setting(s.skill_id,<span class="dp">·</span>uuid)</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">33 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>if<span class="dp">·</span>old_s:</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">34 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>s.settings<span class="dp">·</span>=<span class="dp">·</span>old_s.settings</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">35 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>db.add_setting(uuid,<span class="dp">·</span>s.skill_id,<span class="dp">·</span>s.settings,<span class="dp">·</span>s.meta,</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">36 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>s.display_name,<span class="dp">·</span>s.remote_id)</td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">37 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>nice_json({&quot;success&quot;:<span class="dp">·</span>True,<span class="dp">·</span>&quot;uuid&quot;:<span class="dp">·</span>uuid})</td><td class="diffline">42 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>nice_json({&quot;success&quot;:<span class="dp">·</span>True,<span class="dp">·</span>&quot;uuid&quot;:<span class="dp">·</span>uuid})</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">38 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@app.route(f&quot;/{API_VERSION}/device/&lt;uuid&gt;/skill/settings&quot;,<span class="dp">·</span>methods=[&#x27;GET&#x27;])</td><td class="diffline">43 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@app.route(f&quot;/{API_VERSION}/device/&lt;uuid&gt;/skill/settings&quot;,<span class="dp">·</span>methods=[&#x27;GET&#x27;])</td></tr>
<tr class="diffunmodified"><td class="diffline">39 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@requires_auth</td><td class="diffline">44 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@requires_auth</td></tr>
<tr class="diffunmodified"><td class="diffline">40 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>def<span class="dp">·</span>skill_settings_v2(uuid):</td><td class="diffline">45 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>def<span class="dp">·</span>skill_settings_v2(uuid):</td></tr>
<tr class="diffunmodified"><td class="diffline">41 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>&quot;&quot;&quot;<span class="dp">·</span>new<span class="dp">·</span>style<span class="dp">·</span>skill<span class="dp">·</span>settings<span class="dp">·</span>(download<span class="dp">·</span>only)&quot;&quot;&quot;</td><td class="diffline">46 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>&quot;&quot;&quot;<span class="dp">·</span>new<span class="dp">·</span>style<span class="dp">·</span>skill<span class="dp">·</span>settings<span class="dp">·</span>(download<span class="dp">·</span>only)&quot;&quot;&quot;</td></tr>
<tr class="diffdeleted"><td class="diffline">42 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>db<span class="dp">·</span>=<span class="dp">·</span>SettingsDatabase()</td><td colspan="2"> </td></tr>
<tr class="diffchanged"><td class="diffline">43 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>{s.skill_id:<span class="dp">·</span>s.settings<span class="dp">·</span>for<span class="dp">·</span>s<span class="dp">·</span>in<span class="dp">·</span><del>db.</del>get_<del>d</del><del>ev</del>i<del>ce</del>_settings(uuid)}</td><td class="diffline">47 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>{s.skill_id:<span class="dp">·</span>s.settings<span class="dp">·</span>for<span class="dp">·</span>s<span class="dp">·</span>in<span class="dp">·</span>get_<ins>sk</ins>i<ins>ll</ins>_settings<ins>_for_device</ins>(uuid)}</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">44 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@app.route(f&quot;/{API_VERSION}/device/&lt;uuid&gt;/skill&quot;,<span class="dp">·</span>methods=[&#x27;GET&#x27;,<span class="dp">·</span>&#x27;PUT&#x27;])</td><td class="diffline">48 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@app.route(f&quot;/{API_VERSION}/device/&lt;uuid&gt;/skill&quot;,<span class="dp">·</span>methods=[&#x27;GET&#x27;,<span class="dp">·</span>&#x27;PUT&#x27;])</td></tr>
<tr class="diffunmodified"><td class="diffline">45 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@requires_auth</td><td class="diffline">49 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@requires_auth</td></tr>
<tr class="diffunmodified"><td class="diffline">46 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>def<span class="dp">·</span>skill_settings(uuid):</td><td class="diffline">50 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>def<span class="dp">·</span>skill_settings(uuid):</td></tr>
<tr class="diffunmodified"><td class="diffline">47 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>&quot;&quot;&quot;<span class="dp">·</span>old<span class="dp">·</span>style<span class="dp">·</span>skill<span class="dp">·</span>settings/settingsmeta<span class="dp">·</span>-<span class="dp">·</span>supports<span class="dp">·</span>2<span class="dp">·</span>way<span class="dp">·</span>sync</td><td class="diffline">51 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>&quot;&quot;&quot;<span class="dp">·</span>old<span class="dp">·</span>style<span class="dp">·</span>skill<span class="dp">·</span>settings/settingsmeta<span class="dp">·</span>-<span class="dp">·</span>supports<span class="dp">·</span>2<span class="dp">·</span>way<span class="dp">·</span>sync</td></tr>
<tr class="diffunmodified"><td class="diffline">48 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>PUT<span class="dp">·</span>-<span class="dp">·</span>json<span class="dp">·</span>for<span class="dp">·</span>1<span class="dp">·</span>skill</td><td class="diffline">52 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>PUT<span class="dp">·</span>-<span class="dp">·</span>json<span class="dp">·</span>for<span class="dp">·</span>1<span class="dp">·</span>skill</td></tr>
<tr class="diffunmodified"><td class="diffline">49 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>GET<span class="dp">·</span>-<span class="dp">·</span>list<span class="dp">·</span>of<span class="dp">·</span>all<span class="dp">·</span>skills<span class="dp">·</span>&quot;&quot;&quot;</td><td class="diffline">53 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>GET<span class="dp">·</span>-<span class="dp">·</span>list<span class="dp">·</span>of<span class="dp">·</span>all<span class="dp">·</span>skills<span class="dp">·</span>&quot;&quot;&quot;</td></tr>
<tr class="diffunmodified"><td class="diffline">50 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>if<span class="dp">·</span>request.method<span class="dp">·</span>==<span class="dp">·</span>&#x27;PUT&#x27;:</td><td class="diffline">54 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>if<span class="dp">·</span>request.method<span class="dp">·</span>==<span class="dp">·</span>&#x27;PUT&#x27;:</td></tr>
<tr class="diffdeleted"><td class="diffline">51 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>#<span class="dp">·</span>update<span class="dp">·</span>local<span class="dp">·</span>db</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">52 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>with<span class="dp">·</span>SettingsDatabase()<span class="dp">·</span>as<span class="dp">·</span>db:</td><td colspan="2"> </td></tr>
<tr class="diffchanged"><td class="diffline">53 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><del><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span></del>s<span class="dp">·</span>=<span class="dp">·</span>SkillSettings.deserialize(request.json)</td><td class="diffline">55 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>s<span class="dp">·</span>=<span class="dp">·</span>SkillSettings.deserialize(request.json)</td></tr>
<tr class="diffchanged"><td class="diffline">54 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><del><span class="dp">·</span><span class="dp">·</span></del><del><span class="dp">·</span><span class="dp">·</span></del>d<del>b.</del>a<del>dd_set</del>t<del>ing(uuid,<span class="dp">·</span></del><del>s.</del>skill_<del>id,<span class="dp">·</span>s.</del>settings<del>,</del><del><span class="dp">·</span></del>s.me<del>ta</del>,</td><td class="diffline">56 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><ins>up</ins>dat<ins>e_</ins>skill_settings<ins>(</ins>s.<ins>re</ins>m<ins>ot</ins>e<ins>_</ins><ins>id</ins>,</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">57 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>settings_json=s.settings,</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">58 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>metadata_json=s.meta,</td></tr>
<tr class="diffchanged"><td class="diffline">55 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><del>s.</del>display_name<del>,</del><del><span class="dp">·</span></del>s.<del>remote</del>_<del>id</del>)</td><td class="diffline">59 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><ins><span class="dp">·</span></ins><ins><span class="dp">·</span><span class="dp">·</span></ins>display_name<ins>=</ins>s.<ins>d</ins><ins>isplay</ins>_<ins>na</ins><ins>me</ins>)</td></tr>
<tr class="diffunmodified"><td class="diffline">56 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>nice_json({&quot;success&quot;:<span class="dp">·</span>True,<span class="dp">·</span>&quot;uuid&quot;:<span class="dp">·</span>uuid})</td><td class="diffline">60 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>nice_json({&quot;success&quot;:<span class="dp">·</span>True,<span class="dp">·</span>&quot;uuid&quot;:<span class="dp">·</span>uuid})</td></tr>
<tr class="diffunmodified"><td class="diffline">57 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>else:</td><td class="diffline">61 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>else:</td></tr>
<tr class="diffchanged"><td class="diffline">58 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>nice_json([s.serialize()<span class="dp">·</span>for<span class="dp">·</span>s<span class="dp">·</span>in<span class="dp">·</span><del>S</del>et<del>t</del>i<del>ng</del>s<del>Da</del>t<del>aba</del>s<del>e()</del><del>.get</del>_devic<del>e_s</del>e<del>ttings</del>(uuid)])</td><td class="diffline">62 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>nice_json([s.serialize()<span class="dp">·</span>for<span class="dp">·</span>s<span class="dp">·</span>in<span class="dp">·</span><ins>g</ins>et<ins>_s</ins><ins>k</ins>i<ins>l</ins><ins>l_</ins>s<ins>et</ins>t<ins>ing</ins>s<ins>_for</ins>_device(uuid)])</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">59 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@app.route(f&quot;/{API_VERSION}/device/&lt;uuid&gt;/skillJson&quot;,<span class="dp">·</span>methods=[&#x27;PUT&#x27;])</td><td class="diffline">63 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@app.route(f&quot;/{API_VERSION}/device/&lt;uuid&gt;/skillJson&quot;,<span class="dp">·</span>methods=[&#x27;PUT&#x27;])</td></tr>
<tr class="diffunmodified"><td class="diffline">60 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@requires_auth</td><td class="diffline">64 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@requires_auth</td></tr>
<tr class="diffunmodified"><td class="diffline">61 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>def<span class="dp">·</span>skill_json(uuid):</td><td class="diffline">65 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>def<span class="dp">·</span>skill_json(uuid):</td></tr>
<tr class="diffunmodified"><td class="diffline">62 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>&quot;&quot;&quot;<span class="dp">·</span>device<span class="dp">·</span>is<span class="dp">·</span>communicating<span class="dp">·</span>to<span class="dp">·</span>the<span class="dp">·</span>backend<span class="dp">·</span>what<span class="dp">·</span>skills<span class="dp">·</span>are<span class="dp">·</span>installed</td><td class="diffline">66 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>&quot;&quot;&quot;<span class="dp">·</span>device<span class="dp">·</span>is<span class="dp">·</span>communicating<span class="dp">·</span>to<span class="dp">·</span>the<span class="dp">·</span>backend<span class="dp">·</span>what<span class="dp">·</span>skills<span class="dp">·</span>are<span class="dp">·</span>installed</td></tr>
<tr class="diffunmodified"><td class="diffline">63 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>drop<span class="dp">·</span>the<span class="dp">·</span>info<span class="dp">·</span>and<span class="dp">·</span>don&#x27;t<span class="dp">·</span>track<span class="dp">·</span>it!<span class="dp">·</span>maybe<span class="dp">·</span>if<span class="dp">·</span>we<span class="dp">·</span>add<span class="dp">·</span>a<span class="dp">·</span>UI<span class="dp">·</span>and<span class="dp">·</span>it<span class="dp">·</span>becomes<span class="dp">·</span>useful...&quot;&quot;&quot;</td><td class="diffline">67 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>drop<span class="dp">·</span>the<span class="dp">·</span>info<span class="dp">·</span>and<span class="dp">·</span>don&#x27;t<span class="dp">·</span>track<span class="dp">·</span>it!<span class="dp">·</span>maybe<span class="dp">·</span>if<span class="dp">·</span>we<span class="dp">·</span>add<span class="dp">·</span>a<span class="dp">·</span>UI<span class="dp">·</span>and<span class="dp">·</span>it<span class="dp">·</span>becomes<span class="dp">·</span>useful...&quot;&quot;&quot;</td></tr>
<tr class="diffunmodified"><td class="diffline">64 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>#<span class="dp">·</span>everything<span class="dp">·</span>works<span class="dp">·</span>in<span class="dp">·</span>skill<span class="dp">·</span>settings<span class="dp">·</span>without<span class="dp">·</span>using<span class="dp">·</span>this</td><td class="diffline">68 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>#<span class="dp">·</span>everything<span class="dp">·</span>works<span class="dp">·</span>in<span class="dp">·</span>skill<span class="dp">·</span>settings<span class="dp">·</span>without<span class="dp">·</span>using<span class="dp">·</span>this</td></tr>
<tr class="diffhunk"><td colspan="2">Offset 83, 24 lines modified</td><td colspan="2">Offset 89, 24 lines modified</td></tr>
<tr class="diffunmodified"><td class="diffline">83 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>#<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>&#x27;skill_gid&#x27;:<span class="dp">·</span>&#x27;fallback-unknown|21.02&#x27;}]</td><td class="diffline">89 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>#<span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>&#x27;skill_gid&#x27;:<span class="dp">·</span>&#x27;fallback-unknown|21.02&#x27;}]</td></tr>
<tr class="diffunmodified"><td class="diffline">84 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>data</td><td class="diffline">90 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>data</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">85 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@app.route(f&quot;/{API_VERSION}/device/&lt;uuid&gt;/location&quot;,<span class="dp">·</span>methods=[&#x27;GET&#x27;])</td><td class="diffline">91 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@app.route(f&quot;/{API_VERSION}/device/&lt;uuid&gt;/location&quot;,<span class="dp">·</span>methods=[&#x27;GET&#x27;])</td></tr>
<tr class="diffunmodified"><td class="diffline">86 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@requires_auth</td><td class="diffline">92 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@requires_auth</td></tr>
<tr class="diffunmodified"><td class="diffline">87 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@noindex</td><td class="diffline">93 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@noindex</td></tr>
<tr class="diffunmodified"><td class="diffline">88 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>def<span class="dp">·</span>location(uuid):</td><td class="diffline">94 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>def<span class="dp">·</span>location(uuid):</td></tr>
<tr class="diffchanged"><td class="diffline">89 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>device<span class="dp">·</span>=<span class="dp">·</span><del>DeviceDatabase().</del>get_device(uuid)</td><td class="diffline">95 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>device<span class="dp">·</span>=<span class="dp">·</span>get_device(uuid)</td></tr>
<tr class="diffunmodified"><td class="diffline">90 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>if<span class="dp">·</span>device:</td><td class="diffline">96 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>if<span class="dp">·</span>device:</td></tr>
<tr class="diffunmodified"><td class="diffline">91 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>device.location</td><td class="diffline">97 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>device.location</td></tr>
<tr class="diffunmodified"><td class="diffline">92 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>get_request_location()</td><td class="diffline">98 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>get_request_location()</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">93 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@app.route(f&quot;/{API_VERSION}/device/&lt;uuid&gt;/setting&quot;,<span class="dp">·</span>methods=[&#x27;GET&#x27;])</td><td class="diffline">99 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@app.route(f&quot;/{API_VERSION}/device/&lt;uuid&gt;/setting&quot;,<span class="dp">·</span>methods=[&#x27;GET&#x27;])</td></tr>
<tr class="diffunmodified"><td class="diffline">94 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@requires_auth</td><td class="diffline">100 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@requires_auth</td></tr>
<tr class="diffunmodified"><td class="diffline">95 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@noindex</td><td class="diffline">101 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@noindex</td></tr>
<tr class="diffunmodified"><td class="diffline">96 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>def<span class="dp">·</span>setting(uuid=&quot;&quot;):</td><td class="diffline">102 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>def<span class="dp">·</span>setting(uuid=&quot;&quot;):</td></tr>
<tr class="diffchanged"><td class="diffline">97 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>device<span class="dp">·</span>=<span class="dp">·</span><del>DeviceDatabase().</del>get_device(uuid)</td><td class="diffline">103 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>device<span class="dp">·</span>=<span class="dp">·</span>get_device(uuid)</td></tr>
<tr class="diffunmodified"><td class="diffline">98 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>if<span class="dp">·</span>device:</td><td class="diffline">104 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>if<span class="dp">·</span>device:</td></tr>
<tr class="diffunmodified"><td class="diffline">99 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>device.selene_settings</td><td class="diffline">105 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>device.selene_settings</td></tr>
<tr class="diffunmodified"><td class="diffline">100 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>{}</td><td class="diffline">106 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>{}</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">101 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@app.route(f&quot;/{API_VERSION}/device/&lt;uuid&gt;&quot;,<span class="dp">·</span>methods=[&#x27;PATCH&#x27;,<span class="dp">·</span>&#x27;GET&#x27;])</td><td class="diffline">107 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@app.route(f&quot;/{API_VERSION}/device/&lt;uuid&gt;&quot;,<span class="dp">·</span>methods=[&#x27;PATCH&#x27;,<span class="dp">·</span>&#x27;GET&#x27;])</td></tr>
<tr class="diffunmodified"><td class="diffline">102 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@requires_auth</td><td class="diffline">108 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@requires_auth</td></tr>
<tr class="diffunmodified"><td class="diffline">103 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@noindex</td><td class="diffline">109 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@noindex</td></tr>
<tr class="diffhunk"><td colspan="2">Offset 111, 15 lines modified</td><td colspan="2">Offset 117, 15 lines modified</td></tr>
<tr class="diffunmodified"><td class="diffline">111 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>#<span class="dp">·</span>{&#x27;coreVersion&#x27;:<span class="dp">·</span>&#x27;21.2.2&#x27;,</td><td class="diffline">117 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>#<span class="dp">·</span>{&#x27;coreVersion&#x27;:<span class="dp">·</span>&#x27;21.2.2&#x27;,</td></tr>
<tr class="diffunmodified"><td class="diffline">112 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>#<span class="dp">·</span>&#x27;platform&#x27;:<span class="dp">·</span>&#x27;unknown&#x27;,</td><td class="diffline">118 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>#<span class="dp">·</span>&#x27;platform&#x27;:<span class="dp">·</span>&#x27;unknown&#x27;,</td></tr>
<tr class="diffunmodified"><td class="diffline">113 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>#<span class="dp">·</span>&#x27;platform_build&#x27;:<span class="dp">·</span>None,</td><td class="diffline">119 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>#<span class="dp">·</span>&#x27;platform_build&#x27;:<span class="dp">·</span>None,</td></tr>
<tr class="diffunmodified"><td class="diffline">114 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>#<span class="dp">·</span>&#x27;enclosureVersion&#x27;:<span class="dp">·</span>None}</td><td class="diffline">120 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>#<span class="dp">·</span>&#x27;enclosureVersion&#x27;:<span class="dp">·</span>None}</td></tr>
<tr class="diffunmodified"><td class="diffline">115 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>{}</td><td class="diffline">121 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>{}</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">116 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>#<span class="dp">·</span>get<span class="dp">·</span>from<span class="dp">·</span>local<span class="dp">·</span>db</td><td class="diffline">122 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>#<span class="dp">·</span>get<span class="dp">·</span>from<span class="dp">·</span>local<span class="dp">·</span>db</td></tr>
<tr class="diffchanged"><td class="diffline">117 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>device<span class="dp">·</span>=<span class="dp">·</span><del>DeviceDatabase().</del>get_device(uuid)</td><td class="diffline">123 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>device<span class="dp">·</span>=<span class="dp">·</span>get_device(uuid)</td></tr>
<tr class="diffunmodified"><td class="diffline">118 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>if<span class="dp">·</span>device:</td><td class="diffline">124 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>if<span class="dp">·</span>device:</td></tr>
<tr class="diffunmodified"><td class="diffline">119 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>device.selene_device</td><td class="diffline">125 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>device.selene_device</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">120 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>#<span class="dp">·</span>dummy<span class="dp">·</span>valid<span class="dp">·</span>data</td><td class="diffline">126 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>#<span class="dp">·</span>dummy<span class="dp">·</span>valid<span class="dp">·</span>data</td></tr>
<tr class="diffunmodified"><td class="diffline">121 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>token<span class="dp">·</span>=<span class="dp">·</span>request.headers.get(&#x27;Authorization&#x27;,<span class="dp">·</span>&#x27;&#x27;).replace(&quot;Bearer<span class="dp">·</span>&quot;,<span class="dp">·</span>&quot;&quot;)</td><td class="diffline">127 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>token<span class="dp">·</span>=<span class="dp">·</span>request.headers.get(&#x27;Authorization&#x27;,<span class="dp">·</span>&#x27;&#x27;).replace(&quot;Bearer<span class="dp">·</span>&quot;,<span class="dp">·</span>&quot;&quot;)</td></tr>
<tr class="diffunmodified"><td class="diffline">122 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>uuid<span class="dp">·</span>=<span class="dp">·</span>token.split(&quot;:&quot;)[-1]</td><td class="diffline">128 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>uuid<span class="dp">·</span>=<span class="dp">·</span>token.split(&quot;:&quot;)[-1]</td></tr>
<tr class="diffunmodified"><td class="diffline">123 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>{</td><td class="diffline">129 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>{</td></tr>
<tr class="diffhunk"><td colspan="2">Offset 163, 16 lines modified</td><td colspan="2">Offset 169, 15 lines modified</td></tr>
<tr class="diffunmodified"><td class="diffline">163 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>token<span class="dp">·</span>=<span class="dp">·</span>request.json[&quot;token&quot;]</td><td class="diffline">169 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>token<span class="dp">·</span>=<span class="dp">·</span>request.json[&quot;token&quot;]</td></tr>
<tr class="error"><td colspan="4">
Max diff block lines reached; 1058/6312 bytes (16.76%) of diff not shown.
</td></tr></table>  </div>
  <div class="difference">
    <div class="diffheader">
    <div class="diffcontrol">⊟</div>
    <div><span class="diffsize">1.64 KB</span></div>
    <div id="ovos_local_backend-backend-external_apis.py"><span class="source">ovos_local_backend/backend/external_apis.py</span>
      <a class="anchor" href="#ovos_local_backend-backend-external_apis.py">¶</a>
    </div>
    </div>
<table class="diff">
<colgroup><col class="colines"/><col class="coldiff"/>
<col class="colines"/><col class="coldiff"/></colgroup>
<tr style="display:none;"><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr class="diffhunk"><td colspan="2">Offset 1, 38 lines modified</td><td colspan="2">Offset 1, 38 lines modified</td></tr>
<tr class="diffunmodified"><td class="diffline">1 </td><td class="diffpresent">from<span class="dp">·</span>flask<span class="dp">·</span>import<span class="dp">·</span>request</td><td class="diffline">1 </td><td class="diffpresent">from<span class="dp">·</span>flask<span class="dp">·</span>import<span class="dp">·</span>request</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">2 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.backend<span class="dp">·</span>import<span class="dp">·</span>API_VERSION</td><td class="diffline">2 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.backend<span class="dp">·</span>import<span class="dp">·</span>API_VERSION</td></tr>
<tr class="diffunmodified"><td class="diffline">3 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.backend.decorators<span class="dp">·</span>import<span class="dp">·</span>noindex,<span class="dp">·</span>requires_auth</td><td class="diffline">3 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.backend.decorators<span class="dp">·</span>import<span class="dp">·</span>noindex,<span class="dp">·</span>requires_auth</td></tr>
<tr class="diffunmodified"><td class="diffline">4 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.configuration<span class="dp">·</span>import<span class="dp">·</span>CONFIGURATION</td><td class="diffline">4 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.configuration<span class="dp">·</span>import<span class="dp">·</span>CONFIGURATION</td></tr>
<tr class="diffchanged"><td class="diffline">5 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.database<del>.settings</del><span class="dp">·</span>import<span class="dp">·</span><del>D</del>e<del>vic</del>e<del>Data</del><del>bas</del>e</td><td class="diffline">5 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.database<span class="dp">·</span>import<span class="dp">·</span><ins>g</ins>e<ins>t_d</ins>e<ins>vic</ins>e</td></tr>
<tr class="diffunmodified"><td class="diffline">6 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.utils<span class="dp">·</span>import<span class="dp">·</span>dict_to_camel_case,<span class="dp">·</span>ExternalApiManager</td><td class="diffline">6 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.utils<span class="dp">·</span>import<span class="dp">·</span>dict_to_camel_case,<span class="dp">·</span>ExternalApiManager</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">7 </td><td class="diffpresent">def<span class="dp">·</span>_get_lang():</td><td class="diffline">7 </td><td class="diffpresent">def<span class="dp">·</span>_get_lang():</td></tr>
<tr class="diffunmodified"><td class="diffline">8 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>auth<span class="dp">·</span>=<span class="dp">·</span>request.headers.get(&#x27;Authorization&#x27;,<span class="dp">·</span>&#x27;&#x27;).replace(&quot;Bearer<span class="dp">·</span>&quot;,<span class="dp">·</span>&quot;&quot;)</td><td class="diffline">8 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>auth<span class="dp">·</span>=<span class="dp">·</span>request.headers.get(&#x27;Authorization&#x27;,<span class="dp">·</span>&#x27;&#x27;).replace(&quot;Bearer<span class="dp">·</span>&quot;,<span class="dp">·</span>&quot;&quot;)</td></tr>
<tr class="diffunmodified"><td class="diffline">9 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>uid<span class="dp">·</span>=<span class="dp">·</span>auth.split(&quot;:&quot;)[-1]<span class="dp">·</span><span class="dp">·</span>#<span class="dp">·</span>this<span class="dp">·</span>split<span class="dp">·</span>is<span class="dp">·</span>only<span class="dp">·</span>valid<span class="dp">·</span>here,<span class="dp">·</span>not<span class="dp">·</span>selene</td><td class="diffline">9 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>uid<span class="dp">·</span>=<span class="dp">·</span>auth.split(&quot;:&quot;)[-1]<span class="dp">·</span><span class="dp">·</span>#<span class="dp">·</span>this<span class="dp">·</span>split<span class="dp">·</span>is<span class="dp">·</span>only<span class="dp">·</span>valid<span class="dp">·</span>here,<span class="dp">·</span>not<span class="dp">·</span>selene</td></tr>
<tr class="diffchanged"><td class="diffline">10 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>device<span class="dp">·</span>=<span class="dp">·</span><del>DeviceDatabase().</del>get_device(uid)</td><td class="diffline">10 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>device<span class="dp">·</span>=<span class="dp">·</span>get_device(uid)</td></tr>
<tr class="diffunmodified"><td class="diffline">11 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>if<span class="dp">·</span>device:</td><td class="diffline">11 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>if<span class="dp">·</span>device:</td></tr>
<tr class="diffunmodified"><td class="diffline">12 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>device.lang</td><td class="diffline">12 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>device.lang</td></tr>
<tr class="diffunmodified"><td class="diffline">13 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>CONFIGURATION.get(&quot;lang&quot;,<span class="dp">·</span>&quot;en-us&quot;)</td><td class="diffline">13 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>CONFIGURATION.get(&quot;lang&quot;,<span class="dp">·</span>&quot;en-us&quot;)</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">14 </td><td class="diffpresent">def<span class="dp">·</span>_get_units():</td><td class="diffline">14 </td><td class="diffpresent">def<span class="dp">·</span>_get_units():</td></tr>
<tr class="diffunmodified"><td class="diffline">15 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>auth<span class="dp">·</span>=<span class="dp">·</span>request.headers.get(&#x27;Authorization&#x27;,<span class="dp">·</span>&#x27;&#x27;).replace(&quot;Bearer<span class="dp">·</span>&quot;,<span class="dp">·</span>&quot;&quot;)</td><td class="diffline">15 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>auth<span class="dp">·</span>=<span class="dp">·</span>request.headers.get(&#x27;Authorization&#x27;,<span class="dp">·</span>&#x27;&#x27;).replace(&quot;Bearer<span class="dp">·</span>&quot;,<span class="dp">·</span>&quot;&quot;)</td></tr>
<tr class="diffunmodified"><td class="diffline">16 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>uid<span class="dp">·</span>=<span class="dp">·</span>auth.split(&quot;:&quot;)[-1]<span class="dp">·</span><span class="dp">·</span>#<span class="dp">·</span>this<span class="dp">·</span>split<span class="dp">·</span>is<span class="dp">·</span>only<span class="dp">·</span>valid<span class="dp">·</span>here,<span class="dp">·</span>not<span class="dp">·</span>selene</td><td class="diffline">16 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>uid<span class="dp">·</span>=<span class="dp">·</span>auth.split(&quot;:&quot;)[-1]<span class="dp">·</span><span class="dp">·</span>#<span class="dp">·</span>this<span class="dp">·</span>split<span class="dp">·</span>is<span class="dp">·</span>only<span class="dp">·</span>valid<span class="dp">·</span>here,<span class="dp">·</span>not<span class="dp">·</span>selene</td></tr>
<tr class="diffchanged"><td class="diffline">17 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>device<span class="dp">·</span>=<span class="dp">·</span><del>DeviceDatabase().</del>get_device(uid)</td><td class="diffline">17 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>device<span class="dp">·</span>=<span class="dp">·</span>get_device(uid)</td></tr>
<tr class="diffunmodified"><td class="diffline">18 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>if<span class="dp">·</span>device:</td><td class="diffline">18 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>if<span class="dp">·</span>device:</td></tr>
<tr class="diffunmodified"><td class="diffline">19 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>device.system_unit</td><td class="diffline">19 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>device.system_unit</td></tr>
<tr class="diffunmodified"><td class="diffline">20 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>CONFIGURATION.get(&quot;system_unit&quot;,<span class="dp">·</span>&quot;metric&quot;)</td><td class="diffline">20 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>CONFIGURATION.get(&quot;system_unit&quot;,<span class="dp">·</span>&quot;metric&quot;)</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">21 </td><td class="diffpresent">def<span class="dp">·</span>_get_latlon():</td><td class="diffline">21 </td><td class="diffpresent">def<span class="dp">·</span>_get_latlon():</td></tr>
<tr class="diffunmodified"><td class="diffline">22 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>auth<span class="dp">·</span>=<span class="dp">·</span>request.headers.get(&#x27;Authorization&#x27;,<span class="dp">·</span>&#x27;&#x27;).replace(&quot;Bearer<span class="dp">·</span>&quot;,<span class="dp">·</span>&quot;&quot;)</td><td class="diffline">22 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>auth<span class="dp">·</span>=<span class="dp">·</span>request.headers.get(&#x27;Authorization&#x27;,<span class="dp">·</span>&#x27;&#x27;).replace(&quot;Bearer<span class="dp">·</span>&quot;,<span class="dp">·</span>&quot;&quot;)</td></tr>
<tr class="diffunmodified"><td class="diffline">23 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>uid<span class="dp">·</span>=<span class="dp">·</span>auth.split(&quot;:&quot;)[-1]<span class="dp">·</span><span class="dp">·</span>#<span class="dp">·</span>this<span class="dp">·</span>split<span class="dp">·</span>is<span class="dp">·</span>only<span class="dp">·</span>valid<span class="dp">·</span>here,<span class="dp">·</span>not<span class="dp">·</span>selene</td><td class="diffline">23 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>uid<span class="dp">·</span>=<span class="dp">·</span>auth.split(&quot;:&quot;)[-1]<span class="dp">·</span><span class="dp">·</span>#<span class="dp">·</span>this<span class="dp">·</span>split<span class="dp">·</span>is<span class="dp">·</span>only<span class="dp">·</span>valid<span class="dp">·</span>here,<span class="dp">·</span>not<span class="dp">·</span>selene</td></tr>
<tr class="diffchanged"><td class="diffline">24 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>device<span class="dp">·</span>=<span class="dp">·</span><del>DeviceDatabase().</del>get_device(uid)</td><td class="diffline">24 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>device<span class="dp">·</span>=<span class="dp">·</span>get_device(uid)</td></tr>
<tr class="diffunmodified"><td class="diffline">25 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>if<span class="dp">·</span>device:</td><td class="diffline">25 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>if<span class="dp">·</span>device:</td></tr>
<tr class="diffunmodified"><td class="diffline">26 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>loc<span class="dp">·</span>=<span class="dp">·</span>device.location</td><td class="diffline">26 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>loc<span class="dp">·</span>=<span class="dp">·</span>device.location</td></tr>
<tr class="diffunmodified"><td class="diffline">27 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>else:</td><td class="diffline">27 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>else:</td></tr>
<tr class="diffunmodified"><td class="diffline">28 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>loc<span class="dp">·</span>=<span class="dp">·</span>CONFIGURATION[&quot;default_location&quot;]</td><td class="diffline">28 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>loc<span class="dp">·</span>=<span class="dp">·</span>CONFIGURATION[&quot;default_location&quot;]</td></tr>
<tr class="diffunmodified"><td class="diffline">29 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>lat<span class="dp">·</span>=<span class="dp">·</span>loc[&quot;coordinate&quot;][&quot;latitude&quot;]</td><td class="diffline">29 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>lat<span class="dp">·</span>=<span class="dp">·</span>loc[&quot;coordinate&quot;][&quot;latitude&quot;]</td></tr>
<tr class="diffunmodified"><td class="diffline">30 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>lon<span class="dp">·</span>=<span class="dp">·</span>loc[&quot;coordinate&quot;][&quot;longitude&quot;]</td><td class="diffline">30 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>lon<span class="dp">·</span>=<span class="dp">·</span>loc[&quot;coordinate&quot;][&quot;longitude&quot;]</td></tr>
<tr class="diffunmodified"><td class="diffline">31 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>lat,<span class="dp">·</span>lon</td><td class="diffline">31 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>lat,<span class="dp">·</span>lon</td></tr>
</table>  </div>
  <div class="difference">
    <div class="diffheader">
    <div class="diffcontrol">⊟</div>
    <div><span class="diffsize">2.73 KB</span></div>
    <div id="ovos_local_backend-backend-precise.py"><span class="source">ovos_local_backend/backend/precise.py</span>
      <a class="anchor" href="#ovos_local_backend-backend-precise.py">¶</a>
    </div>
    </div>
<table class="diff">
<colgroup><col class="colines"/><col class="coldiff"/>
<col class="colines"/><col class="coldiff"/></colgroup>
<tr style="display:none;"><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr class="diffhunk"><td colspan="2">Offset 1, 33 lines modified</td><td colspan="2">Offset 1, 69 lines modified</td></tr>
<tr class="diffunmodified"><td class="diffline">1 </td><td class="diffpresent">from<span class="dp">·</span>flask<span class="dp">·</span>import<span class="dp">·</span>request</td><td class="diffline">1 </td><td class="diffpresent">from<span class="dp">·</span>flask<span class="dp">·</span>import<span class="dp">·</span>request</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">2 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.backend<span class="dp">·</span>import<span class="dp">·</span>API_VERSION</td></tr>
<tr class="diffchanged"><td class="diffline">2 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.backend.decorators<span class="dp">·</span>import<span class="dp">·</span>noindex,<span class="dp">·</span>requires_auth</td><td class="diffline">3 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.backend.decorators<span class="dp">·</span>import<span class="dp">·</span>noindex,<span class="dp">·</span>requires_auth<ins>,<span class="dp">·</span>requires_opt_in</ins></td></tr>
<tr class="diffunmodified"><td class="diffline">3 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.configuration<span class="dp">·</span>import<span class="dp">·</span>CONFIGURATION</td><td class="diffline">4 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.configuration<span class="dp">·</span>import<span class="dp">·</span>CONFIGURATION</td></tr>
<tr class="diffchanged"><td class="diffline">4 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.database<del>.wakewords</del><span class="dp">·</span>import<span class="dp">·</span><del>s</del>a<del>ve</del>_ww_recording</td><td class="diffline">5 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.database<span class="dp">·</span>import<span class="dp">·</span>a<ins>dd</ins>_ww_recording</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">6 </td><td class="diffpresent">@requires_opt_in</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">7 </td><td class="diffpresent">def<span class="dp">·</span>save_ww_recording(uuid,<span class="dp">·</span>uploads):</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">8 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>meta<span class="dp">·</span>=<span class="dp">·</span>{}</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">9 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>audio<span class="dp">·</span>=<span class="dp">·</span>None</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">10 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>for<span class="dp">·</span>ww_file<span class="dp">·</span>in<span class="dp">·</span>uploads:</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">11 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>#<span class="dp">·</span>Werkzeug<span class="dp">·</span>FileStorage<span class="dp">·</span>objects</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">12 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>fn<span class="dp">·</span>=<span class="dp">·</span>uploads[ww_file].filename</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">13 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>if<span class="dp">·</span>fn<span class="dp">·</span>==<span class="dp">·</span>&#x27;audio&#x27;:</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">14 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>audio<span class="dp">·</span>=<span class="dp">·</span>uploads[ww_file].read()</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">15 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>if<span class="dp">·</span>fn<span class="dp">·</span>==<span class="dp">·</span>&#x27;metadata&#x27;:</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">16 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>meta<span class="dp">·</span>=<span class="dp">·</span>json.load(uploads[ww_file])</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">17 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>if<span class="dp">·</span>not<span class="dp">·</span>audio:</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">18 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>False<span class="dp">·</span><span class="dp">·</span>#<span class="dp">·</span>TODO<span class="dp">·</span>-<span class="dp">·</span>some<span class="dp">·</span>error?<span class="dp">·</span>just<span class="dp">·</span>ignore<span class="dp">·</span>entry<span class="dp">·</span>for<span class="dp">·</span>now</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">19 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>#<span class="dp">·</span>classic<span class="dp">·</span>mycroft<span class="dp">·</span>devices<span class="dp">·</span>send</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">20 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>#<span class="dp">·</span>{&quot;name&quot;:<span class="dp">·</span>&quot;hey-mycroft&quot;,</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">21 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>#<span class="dp">·</span>&quot;engine&quot;:<span class="dp">·</span>&quot;0f4df281688583e010c26831abdc2222&quot;,</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">22 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>#<span class="dp">·</span>&quot;time&quot;:<span class="dp">·</span>&quot;1592192357852&quot;,</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">23 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>#<span class="dp">·</span>&quot;sessionId&quot;:<span class="dp">·</span>&quot;7d18e208-05b5-401e-add6-ee23ae821967&quot;,</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">24 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>#<span class="dp">·</span>&quot;accountId&quot;:<span class="dp">·</span>&quot;0&quot;,</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">25 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>#<span class="dp">·</span>&quot;model&quot;:<span class="dp">·</span>&quot;5223842df0cdee5bca3eff8eac1b67fc&quot;}</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">26 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>add_ww_recording(uuid,</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">27 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>audio,</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">28 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>meta.get(&quot;name&quot;,<span class="dp">·</span>&quot;&quot;).replace(&quot;_&quot;,<span class="dp">·</span>&quot;<span class="dp">·</span>&quot;),</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">29 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>meta)</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">30 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>True</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">5 </td><td class="diffpresent">def<span class="dp">·</span>get_precise_routes(app):</td><td class="diffline">31 </td><td class="diffpresent">def<span class="dp">·</span>get_precise_routes(app):</td></tr>
<tr class="diffunmodified"><td class="diffline">6 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@app.route(&#x27;/precise/upload&#x27;,<span class="dp">·</span>methods=[&#x27;POST&#x27;])</td><td class="diffline">32 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@app.route(&#x27;/precise/upload&#x27;,<span class="dp">·</span>methods=[&#x27;POST&#x27;])</td></tr>
<tr class="diffunmodified"><td class="diffline">7 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@noindex</td><td class="diffline">33 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@noindex</td></tr>
<tr class="diffunmodified"><td class="diffline">8 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@requires_auth</td><td class="diffline">34 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@requires_auth</td></tr>
<tr class="diffunmodified"><td class="diffline">9 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>def<span class="dp">·</span>precise_upload():</td><td class="diffline">35 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>def<span class="dp">·</span>precise_upload():</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">36 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>success<span class="dp">·</span>=<span class="dp">·</span>False</td></tr>
<tr class="diffunmodified"><td class="diffline">10 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>if<span class="dp">·</span>CONFIGURATION[&quot;record_wakewords&quot;]:</td><td class="diffline">37 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>if<span class="dp">·</span>CONFIGURATION[&quot;record_wakewords&quot;]:</td></tr>
<tr class="diffunmodified"><td class="diffline">11 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>auth<span class="dp">·</span>=<span class="dp">·</span>request.headers.get(&#x27;Authorization&#x27;,<span class="dp">·</span>&#x27;&#x27;).replace(&quot;Bearer<span class="dp">·</span>&quot;,<span class="dp">·</span>&quot;&quot;)</td><td class="diffline">38 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>auth<span class="dp">·</span>=<span class="dp">·</span>request.headers.get(&#x27;Authorization&#x27;,<span class="dp">·</span>&#x27;&#x27;).replace(&quot;Bearer<span class="dp">·</span>&quot;,<span class="dp">·</span>&quot;&quot;)</td></tr>
<tr class="diffunmodified"><td class="diffline">12 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>uuid<span class="dp">·</span>=<span class="dp">·</span>auth.split(&quot;:&quot;)[-1]<span class="dp">·</span><span class="dp">·</span>#<span class="dp">·</span>this<span class="dp">·</span>split<span class="dp">·</span>is<span class="dp">·</span>only<span class="dp">·</span>valid<span class="dp">·</span>here,<span class="dp">·</span>not<span class="dp">·</span>selene</td><td class="diffline">39 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>uuid<span class="dp">·</span>=<span class="dp">·</span>auth.split(&quot;:&quot;)[-1]<span class="dp">·</span><span class="dp">·</span>#<span class="dp">·</span>this<span class="dp">·</span>split<span class="dp">·</span>is<span class="dp">·</span>only<span class="dp">·</span>valid<span class="dp">·</span>here,<span class="dp">·</span>not<span class="dp">·</span>selene</td></tr>
<tr class="diffchanged"><td class="diffline">13 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>save_ww_recording(uuid,<span class="dp">·</span>request.files)</td><td class="diffline">40 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>s<ins>uccess<span class="dp">·</span>=<span class="dp">·</span>s</ins>ave_ww_recording(uuid,<span class="dp">·</span>request.files)</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffchanged"><td class="diffline">14 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>{&quot;success&quot;:<span class="dp">·</span><del>Tru</del>e,</td><td class="diffline">41 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>{&quot;success&quot;:<span class="dp">·</span><ins>s</ins><ins>ucc</ins>e<ins>ss</ins>,</td></tr>
<tr class="diffunmodified"><td class="diffline">15 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>&quot;sent_to_mycroft&quot;:<span class="dp">·</span>False,</td><td class="diffline">42 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>&quot;sent_to_mycroft&quot;:<span class="dp">·</span>False,</td></tr>
<tr class="diffunmodified"><td class="diffline">16 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>&quot;saved&quot;:<span class="dp">·</span>CONFIGURATION[&quot;record_wakewords&quot;]}</td><td class="diffline">43 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>&quot;saved&quot;:<span class="dp">·</span>CONFIGURATION[&quot;record_wakewords&quot;]}</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffchanged"><td class="diffline">17 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@app.route(&#x27;/device/&lt;uuid&gt;/wake-word-file&#x27;,<span class="dp">·</span>methods=[&#x27;POST&#x27;])</td><td class="diffline">44 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@app.route(<ins>f</ins>&#x27;<ins>/{API_VERSION}</ins>/device/&lt;uuid&gt;/wake-word-file&#x27;,<span class="dp">·</span>methods=[&#x27;POST&#x27;])</td></tr>
<tr class="diffunmodified"><td class="diffline">18 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@noindex</td><td class="diffline">45 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@noindex</td></tr>
<tr class="diffunmodified"><td class="diffline">19 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@requires_auth</td><td class="diffline">46 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@requires_auth</td></tr>
<tr class="diffunmodified"><td class="diffline">20 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>def<span class="dp">·</span>precise_upload_v2(uuid):</td><td class="diffline">47 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>def<span class="dp">·</span>precise_upload_v2(uuid):</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">48 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>success<span class="dp">·</span>=<span class="dp">·</span>False</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">49 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>if<span class="dp">·</span>&#x27;audio&#x27;<span class="dp">·</span>not<span class="dp">·</span>in<span class="dp">·</span>request.files:</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">50 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>&quot;No<span class="dp">·</span>Audio<span class="dp">·</span>to<span class="dp">·</span>upload&quot;,<span class="dp">·</span>400</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">21 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>if<span class="dp">·</span>CONFIGURATION[&quot;record_wakewords&quot;]:</td><td class="diffline">51 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>if<span class="dp">·</span>CONFIGURATION[&quot;record_wakewords&quot;]:</td></tr>
<tr class="diffchanged"><td class="diffline">22 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>save_ww_recording(uuid,<span class="dp">·</span>request.files)</td><td class="diffline">52 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>s<ins>uccess<span class="dp">·</span>=<span class="dp">·</span>s</ins>ave_ww_recording(uuid,<span class="dp">·</span>request.files)</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffchanged"><td class="diffline">23 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>{&quot;success&quot;:<span class="dp">·</span><del>Tru</del>e,</td><td class="diffline">53 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>{&quot;success&quot;:<span class="dp">·</span><ins>s</ins><ins>ucc</ins>e<ins>ss</ins>,</td></tr>
<tr class="diffunmodified"><td class="diffline">24 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>&quot;sent_to_mycroft&quot;:<span class="dp">·</span>False,</td><td class="diffline">54 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>&quot;sent_to_mycroft&quot;:<span class="dp">·</span>False,</td></tr>
<tr class="diffunmodified"><td class="diffline">25 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>&quot;saved&quot;:<span class="dp">·</span>CONFIGURATION[&quot;record_wakewords&quot;]}</td><td class="diffline">55 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>&quot;saved&quot;:<span class="dp">·</span>CONFIGURATION[&quot;record_wakewords&quot;]}</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">26 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>app</td><td class="diffline">56 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>return<span class="dp">·</span>app</td></tr>
</table>  </div>
  <div class="difference">
    <div class="diffheader">
    <div class="diffcontrol">⊟</div>
    <div><span class="diffsize">1.14 KB</span></div>
    <div id="ovos_local_backend-backend-stt.py"><span class="source">ovos_local_backend/backend/stt.py</span>
      <a class="anchor" href="#ovos_local_backend-backend-stt.py">¶</a>
    </div>
    </div>
<table class="diff">
<colgroup><col class="colines"/><col class="coldiff"/>
<col class="colines"/><col class="coldiff"/></colgroup>
<tr style="display:none;"><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr class="diffhunk"><td colspan="2">Offset 12, 23 lines modified</td><td colspan="2">Offset 12, 29 lines modified</td></tr>
<tr class="diffunmodified"><td class="diffline">12 </td><td class="diffpresent">#</td><td class="diffline">12 </td><td class="diffpresent">#</td></tr>
<tr class="diffunmodified"><td class="diffline">13 </td><td class="diffpresent">import<span class="dp">·</span>json</td><td class="diffline">13 </td><td class="diffpresent">import<span class="dp">·</span>json</td></tr>
<tr class="diffunmodified"><td class="diffline">14 </td><td class="diffpresent">from<span class="dp">·</span>tempfile<span class="dp">·</span>import<span class="dp">·</span>NamedTemporaryFile</td><td class="diffline">14 </td><td class="diffpresent">from<span class="dp">·</span>tempfile<span class="dp">·</span>import<span class="dp">·</span>NamedTemporaryFile</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">15 </td><td class="diffpresent">from<span class="dp">·</span>flask<span class="dp">·</span>import<span class="dp">·</span>request</td><td class="diffline">15 </td><td class="diffpresent">from<span class="dp">·</span>flask<span class="dp">·</span>import<span class="dp">·</span>request</td></tr>
<tr class="diffunmodified"><td class="diffline">16 </td><td class="diffpresent">from<span class="dp">·</span>speech_recognition<span class="dp">·</span>import<span class="dp">·</span>Recognizer,<span class="dp">·</span>AudioFile</td><td class="diffline">16 </td><td class="diffpresent">from<span class="dp">·</span>speech_recognition<span class="dp">·</span>import<span class="dp">·</span>Recognizer,<span class="dp">·</span>AudioFile</td></tr>
<tr class="diffunmodified"><td class="diffline">17 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.backend<span class="dp">·</span>import<span class="dp">·</span>API_VERSION</td><td class="diffline">17 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.backend<span class="dp">·</span>import<span class="dp">·</span>API_VERSION</td></tr>
<tr class="diffchanged"><td class="diffline">18 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.backend.decorators<span class="dp">·</span>import<span class="dp">·</span>noindex,<span class="dp">·</span>requires_auth</td><td class="diffline">18 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.backend.decorators<span class="dp">·</span>import<span class="dp">·</span>noindex,<span class="dp">·</span>requires_auth<ins>,<span class="dp">·</span>requires_opt_in</ins></td></tr>
<tr class="diffunmodified"><td class="diffline">19 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.configuration<span class="dp">·</span>import<span class="dp">·</span>CONFIGURATION</td><td class="diffline">19 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.configuration<span class="dp">·</span>import<span class="dp">·</span>CONFIGURATION</td></tr>
<tr class="diffchanged"><td class="diffline">20 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.database<del>.utterances</del><span class="dp">·</span>import<span class="dp">·</span><del>s</del>a<del>ve</del>_stt_recording</td><td class="diffline">20 </td><td class="diffpresent">from<span class="dp">·</span>ovos_local_backend.database<span class="dp">·</span>import<span class="dp">·</span>a<ins>dd</ins>_stt_recording</td></tr>
<tr class="diffunmodified"><td class="diffline">21 </td><td class="diffpresent">from<span class="dp">·</span>ovos_plugin_manager.stt<span class="dp">·</span>import<span class="dp">·</span>OVOSSTTFactory</td><td class="diffline">21 </td><td class="diffpresent">from<span class="dp">·</span>ovos_plugin_manager.stt<span class="dp">·</span>import<span class="dp">·</span>OVOSSTTFactory</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">22 </td><td class="diffpresent">recognizer<span class="dp">·</span>=<span class="dp">·</span>Recognizer()</td><td class="diffline">22 </td><td class="diffpresent">recognizer<span class="dp">·</span>=<span class="dp">·</span>Recognizer()</td></tr>
<tr class="diffunmodified"><td class="diffline">23 </td><td class="diffpresent">engine<span class="dp">·</span>=<span class="dp">·</span>OVOSSTTFactory.create(CONFIGURATION[&quot;stt&quot;])</td><td class="diffline">23 </td><td class="diffpresent">engine<span class="dp">·</span>=<span class="dp">·</span>OVOSSTTFactory.create(CONFIGURATION[&quot;stt&quot;])</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">24 </td><td class="diffpresent">@requires_opt_in</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">25 </td><td class="diffpresent">def<span class="dp">·</span>save_stt_recording(uuid,<span class="dp">·</span>audio,<span class="dp">·</span>utterance):</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">26 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>audio_bytes<span class="dp">·</span>=<span class="dp">·</span>audio.get_wav_data()</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">27 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>add_stt_recording(uuid,<span class="dp">·</span>audio_bytes,<span class="dp">·</span>utterance)</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffadded"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">24 </td><td class="diffpresent">def<span class="dp">·</span>get_stt_routes(app):</td><td class="diffline">28 </td><td class="diffpresent">def<span class="dp">·</span>get_stt_routes(app):</td></tr>
<tr class="diffunmodified"><td class="diffline">25 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@app.route(&quot;/&quot;<span class="dp">·</span>+<span class="dp">·</span>API_VERSION<span class="dp">·</span>+<span class="dp">·</span>&quot;/stt&quot;,<span class="dp">·</span>methods=[&#x27;POST&#x27;])</td><td class="diffline">29 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@app.route(&quot;/&quot;<span class="dp">·</span>+<span class="dp">·</span>API_VERSION<span class="dp">·</span>+<span class="dp">·</span>&quot;/stt&quot;,<span class="dp">·</span>methods=[&#x27;POST&#x27;])</td></tr>
<tr class="diffunmodified"><td class="diffline">26 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@noindex</td><td class="diffline">30 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@noindex</td></tr>
<tr class="diffunmodified"><td class="diffline">27 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@requires_auth</td><td class="diffline">31 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>@requires_auth</td></tr>
<tr class="diffunmodified"><td class="diffline">28 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>def<span class="dp">·</span>stt():</td><td class="diffline">32 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>def<span class="dp">·</span>stt():</td></tr>
<tr class="diffunmodified"><td class="diffline">29 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>flac_audio<span class="dp">·</span>=<span class="dp">·</span>request.data</td><td class="diffline">33 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>flac_audio<span class="dp">·</span>=<span class="dp">·</span>request.data</td></tr>
<tr class="diffunmodified"><td class="diffline">30 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>lang<span class="dp">·</span>=<span class="dp">·</span>str(request.args.get(&quot;lang&quot;,<span class="dp">·</span>&quot;en-us&quot;))</td><td class="diffline">34 </td><td class="diffpresent"><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span><span class="dp">·</span>lang<span class="dp">·</span>=<span class="dp">·</span>str(request.args.get(&quot;lang&quot;,<span class="dp">·</span>&quot;en-us&quot;))</td></tr>
</table>  </div>
  <div class="difference">
    <div class="diffheader">
    <div class="diffcontrol diffcontrol-double">⊟</div>
    <div><span class="diffsize">127 B</span></div>
    <div><span class="source">ovos_local_backend-0.1.6a9.dist-info/LICENSE</span> vs.</div>
    <div id="ovos_local_backend--.-.-a-.dist-info-LICENSE"><span class="source">ovos_local_backend-0.2.0a2.dist-info/LICENSE</span>
      <a class="anchor" href="#ovos_local_backend--.-.-a-.dist-info-LICENSE">¶</a>
    </div>
    </div>
    <div class="comment">Files identical despite different names
    </div>
  </div>
  <div class="difference">
    <div class="diffheader">
    <div class="diffcontrol diffcontrol-double">⊟</div>
    <div><span class="diffsize">918 B</span></div>
    <div><span class="source">ovos_local_backend-0.1.6a9.dist-info/METADATA</span> vs.</div>
    <div id="ovos_local_backend--.-.-a-.dist-info-METADATA"><span class="source">ovos_local_backend-0.2.0a2.dist-info/METADATA</span>
      <a class="anchor" href="#ovos_local_backend--.-.-a-.dist-info-METADATA">¶</a>
    </div>
    </div>
    <div class="comment">Files 25% similar despite different names
    </div>
<table class="diff">
<colgroup><col class="colines"/><col class="coldiff"/>
<col class="colines"/><col class="coldiff"/></colgroup>
<tr style="display:none;"><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr class="diffhunk"><td colspan="2">Offset 1, 24 lines modified</td><td colspan="2">Offset 1, 26 lines modified</td></tr>
<tr class="diffunmodified"><td class="diffline">1 </td><td class="diffpresent">Metadata-Version:<span class="dp">·</span>2.1</td><td class="diffline">1 </td><td class="diffpresent">Metadata-Version:<span class="dp">·</span>2.1</td></tr>
<tr class="diffunmodified"><td class="diffline">2 </td><td class="diffpresent">Name:<span class="dp">·</span>ovos-local-backend</td><td class="diffline">2 </td><td class="diffpresent">Name:<span class="dp">·</span>ovos-local-backend</td></tr>
<tr class="diffchanged"><td class="diffline">3 </td><td class="diffpresent">Version:<span class="dp">·</span>0.<del>1</del>.<del>6</del>a<del>9</del></td><td class="diffline">3 </td><td class="diffpresent">Version:<span class="dp">·</span>0.<ins>2</ins>.<ins>0</ins>a<ins>2</ins></td></tr>
<tr class="diffunmodified"><td class="diffline">4 </td><td class="diffpresent">Summary:<span class="dp">·</span>mock<span class="dp">·</span>mycroft<span class="dp">·</span>backend</td><td class="diffline">4 </td><td class="diffpresent">Summary:<span class="dp">·</span>mock<span class="dp">·</span>mycroft<span class="dp">·</span>backend</td></tr>
<tr class="diffunmodified"><td class="diffline">5 </td><td class="diffpresent">Home-page:<span class="dp">·</span>https://github.com/OpenVoiceOS/OVOS-local-backend</td><td class="diffline">5 </td><td class="diffpresent">Home-page:<span class="dp">·</span>https://github.com/OpenVoiceOS/OVOS-local-backend</td></tr>
<tr class="diffunmodified"><td class="diffline">6 </td><td class="diffpresent">Author:<span class="dp">·</span>jarbasAI</td><td class="diffline">6 </td><td class="diffpresent">Author:<span class="dp">·</span>jarbasAI</td></tr>
<tr class="diffunmodified"><td class="diffline">7 </td><td class="diffpresent">Author-email:<span class="dp">·</span>jarbasai@mailfence.com</td><td class="diffline">7 </td><td class="diffpresent">Author-email:<span class="dp">·</span>jarbasai@mailfence.com</td></tr>
<tr class="diffunmodified"><td class="diffline">8 </td><td class="diffpresent">License:<span class="dp">·</span>Apache-2.0</td><td class="diffline">8 </td><td class="diffpresent">License:<span class="dp">·</span>Apache-2.0</td></tr>
<tr class="diffunmodified"><td class="diffline">9 </td><td class="diffpresent">Platform:<span class="dp">·</span>UNKNOWN</td><td class="diffline">9 </td><td class="diffpresent">Platform:<span class="dp">·</span>UNKNOWN</td></tr>
<tr class="diffunmodified"><td class="diffline">10 </td><td class="diffpresent">Requires-Dist:<span class="dp">·</span>Flask<span class="dp">·</span>(&gt;=0.12)</td><td class="diffline">10 </td><td class="diffpresent">Requires-Dist:<span class="dp">·</span>Flask<span class="dp">·</span>(&gt;=0.12)</td></tr>
<tr class="diffunmodified"><td class="diffline">11 </td><td class="diffpresent">Requires-Dist:<span class="dp">·</span>json-database<span class="dp">·</span>(~=0.7)</td><td class="diffline">11 </td><td class="diffpresent">Requires-Dist:<span class="dp">·</span>json-database<span class="dp">·</span>(~=0.7)</td></tr>
<tr class="diffunmodified"><td class="diffline">12 </td><td class="diffpresent">Requires-Dist:<span class="dp">·</span>requests<span class="dp">·</span>(&gt;=2.26.0)</td><td class="diffline">12 </td><td class="diffpresent">Requires-Dist:<span class="dp">·</span>requests<span class="dp">·</span>(&gt;=2.26.0)</td></tr>
<tr class="diffunmodified"><td class="diffline">13 </td><td class="diffpresent">Requires-Dist:<span class="dp">·</span>pyOpenSSL</td><td class="diffline">13 </td><td class="diffpresent">Requires-Dist:<span class="dp">·</span>pyOpenSSL</td></tr>
<tr class="diffunmodified"><td class="diffline">14 </td><td class="diffpresent">Requires-Dist:<span class="dp">·</span>ovos-utils<span class="dp">·</span>(&gt;=0.0.25a7)</td><td class="diffline">14 </td><td class="diffpresent">Requires-Dist:<span class="dp">·</span>ovos-utils<span class="dp">·</span>(&gt;=0.0.25a7)</td></tr>
<tr class="diffchanged"><td class="diffline">15 </td><td class="diffpresent">Requires-Dist:<span class="dp">·</span>ovos-plugin-manager</td><td class="diffline">15 </td><td class="diffpresent">Requires-Dist:<span class="dp">·</span>ovos-plugin-manager<ins><span class="dp">·</span>(&gt;=0.0.23a3)</ins></td></tr>
<tr class="diffunmodified"><td class="diffline">16 </td><td class="diffpresent">Requires-Dist:<span class="dp">·</span>ovos-stt-plugin-server</td><td class="diffline">16 </td><td class="diffpresent">Requires-Dist:<span class="dp">·</span>ovos-stt-plugin-server</td></tr>
<tr class="diffunmodified"><td class="diffline">17 </td><td class="diffpresent">Requires-Dist:<span class="dp">·</span>geocoder</td><td class="diffline">17 </td><td class="diffpresent">Requires-Dist:<span class="dp">·</span>geocoder</td></tr>
<tr class="diffunmodified"><td class="diffline">18 </td><td class="diffpresent">Requires-Dist:<span class="dp">·</span>timezonefinder</td><td class="diffline">18 </td><td class="diffpresent">Requires-Dist:<span class="dp">·</span>timezonefinder</td></tr>
<tr class="diffunmodified"><td class="diffline">19 </td><td class="diffpresent">Requires-Dist:<span class="dp">·</span>requests-cache</td><td class="diffline">19 </td><td class="diffpresent">Requires-Dist:<span class="dp">·</span>requests-cache</td></tr>
<tr class="diffunmodified"><td class="diffline">20 </td><td class="diffpresent">Requires-Dist:<span class="dp">·</span>oauthlib<span class="dp">·</span>(~=3.0)</td><td class="diffline">20 </td><td class="diffpresent">Requires-Dist:<span class="dp">·</span>oauthlib<span class="dp">·</span>(~=3.0)</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">21 </td><td class="diffpresent">Requires-Dist:<span class="dp">·</span>Flask-SQLAlchemy</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">22 </td><td class="diffpresent">Requires-Dist:<span class="dp">·</span>sqlalchemy-json</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">21 </td><td class="diffpresent">UNKNOWN</td><td class="diffline">23 </td><td class="diffpresent">UNKNOWN</td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td colspan="2"> </td><td colspan="2"> </td></tr>
</table>  </div>
  <div class="difference">
    <div class="diffheader">
    <div class="diffcontrol diffcontrol-double">⊟</div>
    <div><span class="diffsize">4.35 KB</span></div>
    <div><span class="source">ovos_local_backend-0.1.6a9.dist-info/RECORD</span> vs.</div>
    <div id="ovos_local_backend--.-.-a-.dist-info-RECORD"><span class="source">ovos_local_backend-0.2.0a2.dist-info/RECORD</span>
      <a class="anchor" href="#ovos_local_backend--.-.-a-.dist-info-RECORD">¶</a>
    </div>
    </div>
    <div class="comment">Files 10% similar despite different names
    </div>
<table class="diff">
<colgroup><col class="colines"/><col class="coldiff"/>
<col class="colines"/><col class="coldiff"/></colgroup>
<tr style="display:none;"><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr class="diffhunk"><td colspan="2">Offset 1, 28 lines modified</td><td colspan="2">Offset 1, 24 lines modified</td></tr>
<tr class="diffunmodified"><td class="diffline">1 </td><td class="diffpresent">ovos_local_backend/__init__.py,sha256=YMbBqDky5TUJdq4mx2Phaq6Vzx2Hd-bIf1YTTFSPxOA,53</td><td class="diffline">1 </td><td class="diffpresent">ovos_local_backend/__init__.py,sha256=YMbBqDky5TUJdq4mx2Phaq6Vzx2Hd-bIf1YTTFSPxOA,53</td></tr>
<tr class="diffunmodified"><td class="diffline">2 </td><td class="diffpresent">ovos_local_backend/__main__.py,sha256=FaCVoPxLlHy_IAfpIqpe8MVpu3HbyP5Xk0hA5-r-Wxo,555</td><td class="diffline">2 </td><td class="diffpresent">ovos_local_backend/__main__.py,sha256=FaCVoPxLlHy_IAfpIqpe8MVpu3HbyP5Xk0hA5-r-Wxo,555</td></tr>
<tr class="diffchanged"><td class="diffline">3 </td><td class="diffpresent">ovos_local_backend/configuration.py,sha256=<del>AJJj-cWiy2DqW1ASkJ5FKApCOskU</del>x<del>gycF7dEJtGsRL8</del>,9<del>030</del></td><td class="diffline">3 </td><td class="diffpresent">ovos_local_backend/configuration.py,sha256=<ins>oYkIwhO1lySY1OOcHieA5QBzKyRu</ins>x<ins>SYOTgH0lr9RHWA</ins>,9<ins>116</ins></td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">4 </td><td class="diffpresent">ovos_local_backend/database.py,sha256=XPZJVzLP0RvxhQKx4pKm4B5KNupa2GIjkQF2a39s-ok,33972</td></tr>
<tr class="diffunmodified"><td class="diffline">4 </td><td class="diffpresent">ovos_local_backend/session.py,sha256=5--wfP8Vu0njYU90S_hJoyr4SnnRrG_w-bmpOO9_1hw,103</td><td class="diffline">5 </td><td class="diffpresent">ovos_local_backend/session.py,sha256=5--wfP8Vu0njYU90S_hJoyr4SnnRrG_w-bmpOO9_1hw,103</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">6 </td><td class="diffpresent">ovos_local_backend/version.py,sha256=VQMNdeYRkfF7zChGp-GQpnzaLk-m2ZfMR2zUOZLZaWs,177</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">7 </td><td class="diffpresent">ovos_local_backend/backend/__init__.py,sha256=ZN4jJ4El_w--VNqRbEAT6l2EteDP3aT60tKdpUdF5GM,2102</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">8 </td><td class="diffpresent">ovos_local_backend/backend/admin.py,sha256=koalkJOiUf00Gq--yB6Ig56dTHtpOmgn1yseLt50B78,2220</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">9 </td><td class="diffpresent">ovos_local_backend/backend/auth.py,sha256=Aur9qrHKkA6M5GdISKGaI5io1K71XOb0WkbwF1bPtF0,4453</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">10 </td><td class="diffpresent">ovos_local_backend/backend/crud.py,sha256=NjjD7kkGkyimzAjPJm9e1B0-tybpjY7lPImqpxkeP2A,13647</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">11 </td><td class="diffpresent">ovos_local_backend/backend/decorators.py,sha256=Yfitr0bFHKWw8kLxuj4nx6kb75ulvL62KIBGNjIfsm8,3388</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">12 </td><td class="diffpresent">ovos_local_backend/backend/device.py,sha256=rfdkSferWQcekUKGzqterwE4XpKZk80_zrdyr1F9SLs,7943</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">13 </td><td class="diffpresent">ovos_local_backend/backend/external_apis.py,sha256=4DDJHQKbW27U2r43gTY4nFfFYgwru7xEmK8VzMJL2_M,4663</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">14 </td><td class="diffpresent">ovos_local_backend/backend/precise.py,sha256=n0V0qpakf6htLpm-o17XqvAu9-eVCp3RCT_fIZUAfqE,2253</td></tr>
<tr class="diffadded"><td colspan="2"> </td><td class="diffline">15 </td><td class="diffpresent">ovos_local_backend/backend/stt.py,sha256=W08Clr4PCY8Pkmw7bAyLNgomsMGD8hs7oavyDk8svkk,2107</td></tr>
<tr class="diffdeleted"><td class="diffline">5 </td><td class="diffpresent">ovos_local_backend/version.py,sha256=jf0GujOVqYEjT_f-5zGQ2wrgdMnZKGEbeJTBGgPyuMM,177</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">6 </td><td class="diffpresent">ovos_local_backend/backend/__init__.py,sha256=Rzr_96N2PlImgJvkT3ux5eQzPB8yt4rcY6NjVDa85BA,1920</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">7 </td><td class="diffpresent">ovos_local_backend/backend/admin.py,sha256=u3WGj7tffKC8oXaJ5yqwLA_P23j4BcrbkmwTguZbmHY,4584</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">8 </td><td class="diffpresent">ovos_local_backend/backend/auth.py,sha256=dTfn4N2ihaGxIqS8MUqlLmOZQDoz1g8WCNhdrv3GGtQ,4232</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">9 </td><td class="diffpresent">ovos_local_backend/backend/decorators.py,sha256=1dbyVvROqeHRFQaUo_kYtYngorJJiNwsgPH4usI8uZU,3370</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">10 </td><td class="diffpresent">ovos_local_backend/backend/device.py,sha256=SlhnVf0S9xerDIYyhjmXp6zf_QmiCNP8PYItqdJYRos,8123</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">11 </td><td class="diffpresent">ovos_local_backend/backend/external_apis.py,sha256=JXoPzoEBimE0GIkamAHGxIjZuHgis3RzW6tUid9jyIA,4727</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">12 </td><td class="diffpresent">ovos_local_backend/backend/precise.py,sha256=xGXe_8tRCIpEvu6WJc78CAeIVacVKh5qdn9tyPdPvnQ,1149</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">13 </td><td class="diffpresent">ovos_local_backend/backend/stt.py,sha256=brcpSMZpART9JKm757qL04BuZwdQW3s08MNeU2u1TWo,1944</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">14 </td><td class="diffpresent">ovos_local_backend/database/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">15 </td><td class="diffpresent">ovos_local_backend/database/metrics.py,sha256=b16LcheJGOi8gkd5tRQxGSPGV8xQ2GKJyfVdDkLAIf4,1195</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">16 </td><td class="diffpresent">ovos_local_backend/database/oauth.py,sha256=HJ4OiCRiE9qcpmTqtOfUf0J9axd2N9G6zQP5nOO-tgU,112</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">17 </td><td class="diffpresent">ovos_local_backend/database/settings.py,sha256=Ocumm0wGzrLriU_tINe_WGQAvnWwCiElQoe0bCzs17g,14676</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">18 </td><td class="diffpresent">ovos_local_backend/database/utterances.py,sha256=TnvIZ6BMDhxrF2KR62AB__y9Y_vqW2wijQXbnsG7wxA,1659</td><td colspan="2"> </td></tr>
<tr class="diffdeleted"><td class="diffline">19 </td><td class="diffpresent">ovos_local_backend/database/wakewords.py,sha256=xAto6ZOGcColkJAAiij6JAQNmi1GlLWyHQ3fpN5A08I,2895</td><td colspan="2"> </td></tr>
<tr class="diffunmodified"><td class="diffline">20 </td><td class="diffpresent">ovos_local_backend/utils/__init__.py,sha256=TpuV-D9-t3Jj9PETINAjH45Buy3U1cKrgZ9BiywPKkY,9836</td><td class="diffline">16 </td><td class="diffpresent">ovos_local_backend/utils/__init__.py,sha256=TpuV-D9-t3Jj9PETINAjH45Buy3U1cKrgZ9BiywPKkY,9836</td></tr>
<tr class="diffunmodified"><td class="diffline">21 </td><td class="diffpresent">ovos_local_backend/utils/geolocate.py,sha256=uMjb_FYmn81t38FDDH7vVO8Zq8x5XjVTSgkXYx9XVHE,6203</td><td class="diffline">17 </td><td class="diffpresent">ovos_local_backend/utils/geolocate.py,sha256=uMjb_FYmn81t38FDDH7vVO8Zq8x5XjVTSgkXYx9XVHE,6203</td></tr>
<tr class="diffunmodified"><td class="diffline">22 </td><td class="diffpresent">ovos_local_backend/utils/mail.py,sha256=OXc3cvKRmQ3t0COmSdtkZYGQydnrzxvwngahfqrNg7s,1020</td><td class="diffline">18 </td><td class="diffpresent">ovos_local_backend/utils/mail.py,sha256=OXc3cvKRmQ3t0COmSdtkZYGQydnrzxvwngahfqrNg7s,1020</td></tr>
<tr class="diffchanged"><td class="diffline">23 </td><td class="diffpresent">ovos_local_backend-0.<del>1</del>.<del>6</del>a<del>9</del>.dist-info/LICENSE,sha256=fYHkowW9JcaEcqCPTXYBayNJ9J1lGdYVb7Mf9oy6oEY,11349</td><td class="diffline">19 </td><td class="diffpresent">ovos_local_backend-0.<ins>2</ins>.<ins>0</ins>a<ins>2</ins>.dist-info/LICENSE,sha256=fYHkowW9JcaEcqCPTXYBayNJ9J1lGdYVb7Mf9oy6oEY,11349</td></tr>
<tr class="diffchanged"><td class="diffline">24 </td><td class="diffpresent">ovos_local_backend-0.<del>1</del>.<del>6</del>a<del>9</del>.dist-info/METADATA,sha256=<del>SDtvz8Pido04V_dCv9cYqBMI1ml8vfI49oC6vnm2I6U</del>,6<del>13</del></td><td class="diffline">20 </td><td class="diffpresent">ovos_local_backend-0.<ins>2</ins>.<ins>0</ins>a<ins>2</ins>.dist-info/METADATA,sha256=<ins>fiKfAtaAEKC2SJjuSIQczXr5XEONgwSaKWR-uBiXigI</ins>,6<ins>89</ins></td></tr>
<tr class="diffchanged"><td class="diffline">25 </td><td class="diffpresent">ovos_local_backend-0.<del>1</del>.<del>6</del>a<del>9</del>.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92</td><td class="diffline">21 </td><td class="diffpresent">ovos_local_backend-0.<ins>2</ins>.<ins>0</ins>a<ins>2</ins>.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92</td></tr>
<tr class="diffchanged"><td class="diffline">26 </td><td class="diffpresent">ovos_local_backend-0.<del>1</del>.<del>6</del>a<del>9</del>.dist-info/entry_points.txt,sha256=0EEK_6ggH1Jn8ShRNLQSNGS8ZnLz9j3uyc2Z0ezJF0c,73</td><td class="diffline">22 </td><td class="diffpresent">ovos_local_backend-0.<ins>2</ins>.<ins>0</ins>a<ins>2</ins>.dist-info/entry_points.txt,sha256=0EEK_6ggH1Jn8ShRNLQSNGS8ZnLz9j3uyc2Z0ezJF0c,73</td></tr>
<tr class="diffchanged"><td class="diffline">27 </td><td class="diffpresent">ovos_local_backend-0.<del>1</del>.<del>6</del>a<del>9</del>.dist-info/top_level.txt,sha256=wzhQzBnq6wL0_UNQ2JBeakplDf_Mv-e7qBaZ7TR2Rlk,19</td><td class="diffline">23 </td><td class="diffpresent">ovos_local_backend-0.<ins>2</ins>.<ins>0</ins>a<ins>2</ins>.dist-info/top_level.txt,sha256=wzhQzBnq6wL0_UNQ2JBeakplDf_Mv-e7qBaZ7TR2Rlk,19</td></tr>
<tr class="diffchanged"><td class="diffline">28 </td><td class="diffpresent">ovos_local_backend-0.<del>1</del>.<del>6</del>a<del>9</del>.dist-info/RECORD,,</td><td class="diffline">24 </td><td class="diffpresent">ovos_local_backend-0.<ins>2</ins>.<ins>0</ins>a<ins>2</ins>.dist-info/RECORD,,</td></tr>
</table>  </div>
</div>
<div class="footer">
Generated by
<a href="https://diffoscope.org" rel="noopener noreferrer" target="_blank">
diffoscope</a> 238
</div>
</body>
</html>

