--- tmp/mashumaro-3.5.tar.gz
+++ tmp/mashumaro-3.6.tar.gz
â”œâ”€â”€ filetype from file(1)
â”‚ @@ -1 +1 @@
â”‚ -gzip compressed data, was "mashumaro-3.5.tar", last modified: Mon Feb 13 10:27:17 2023, max compression
â”‚ +gzip compressed data, was "mashumaro-3.6.tar", last modified: Fri Apr  7 09:26:58 2023, max compression
â”‚   --- mashumaro-3.5.tar
â”œâ”€â”€ +++ mashumaro-3.6.tar
â”‚ â”œâ”€â”€ file list
â”‚ â”‚ @@ -1,48 +1,55 @@
â”‚ â”‚ -drwxr-xr-x   0 alexander.tikhonov   (503) staff       (20)        0 2023-02-13 10:27:17.795111 mashumaro-3.5/
â”‚ â”‚ --rw-r--r--   0 alexander.tikhonov   (503) staff       (20)    11348 2023-02-06 08:24:36.000000 mashumaro-3.5/LICENSE
â”‚ â”‚ --rw-r--r--   0 alexander.tikhonov   (503) staff       (20)    67134 2023-02-13 10:27:17.794881 mashumaro-3.5/PKG-INFO
â”‚ â”‚ --rw-r--r--   0 alexander.tikhonov   (503) staff       (20)    66213 2023-02-13 10:27:04.000000 mashumaro-3.5/README.md
â”‚ â”‚ -drwxr-xr-x   0 alexander.tikhonov   (503) staff       (20)        0 2023-02-13 10:27:17.790754 mashumaro-3.5/mashumaro/
â”‚ â”‚ --rw-r--r--   0 alexander.tikhonov   (503) staff       (20)      258 2023-02-06 08:24:36.000000 mashumaro-3.5/mashumaro/__init__.py
â”‚ â”‚ --rw-r--r--   0 alexander.tikhonov   (503) staff       (20)     1415 2023-02-06 08:24:36.000000 mashumaro-3.5/mashumaro/config.py
â”‚ â”‚ -drwxr-xr-x   0 alexander.tikhonov   (503) staff       (20)        0 2023-02-13 10:27:17.792010 mashumaro-3.5/mashumaro/core/
â”‚ â”‚ --rw-r--r--   0 alexander.tikhonov   (503) staff       (20)        0 2023-02-06 08:24:36.000000 mashumaro-3.5/mashumaro/core/__init__.py
â”‚ â”‚ --rw-r--r--   0 alexander.tikhonov   (503) staff       (20)     1013 2023-02-06 08:24:36.000000 mashumaro-3.5/mashumaro/core/const.py
â”‚ â”‚ --rw-r--r--   0 alexander.tikhonov   (503) staff       (20)      747 2023-02-06 08:24:36.000000 mashumaro-3.5/mashumaro/core/helpers.py
â”‚ â”‚ -drwxr-xr-x   0 alexander.tikhonov   (503) staff       (20)        0 2023-02-13 10:27:17.792587 mashumaro-3.5/mashumaro/core/meta/
â”‚ â”‚ --rw-r--r--   0 alexander.tikhonov   (503) staff       (20)        0 2023-02-06 08:24:36.000000 mashumaro-3.5/mashumaro/core/meta/__init__.py
â”‚ â”‚ -drwxr-xr-x   0 alexander.tikhonov   (503) staff       (20)        0 2023-02-13 10:27:17.793007 mashumaro-3.5/mashumaro/core/meta/code/
â”‚ â”‚ --rw-r--r--   0 alexander.tikhonov   (503) staff       (20)        0 2023-02-06 08:24:36.000000 mashumaro-3.5/mashumaro/core/meta/code/__init__.py
â”‚ â”‚ --rw-r--r--   0 alexander.tikhonov   (503) staff       (20)    37292 2023-02-13 10:27:04.000000 mashumaro-3.5/mashumaro/core/meta/code/builder.py
â”‚ â”‚ --rw-r--r--   0 alexander.tikhonov   (503) staff       (20)      707 2023-02-06 08:24:36.000000 mashumaro-3.5/mashumaro/core/meta/code/lines.py
â”‚ â”‚ --rw-r--r--   0 alexander.tikhonov   (503) staff       (20)    20883 2023-02-13 10:27:04.000000 mashumaro-3.5/mashumaro/core/meta/helpers.py
â”‚ â”‚ --rw-r--r--   0 alexander.tikhonov   (503) staff       (20)     1366 2023-02-06 08:24:36.000000 mashumaro-3.5/mashumaro/core/meta/mixin.py
â”‚ â”‚ -drwxr-xr-x   0 alexander.tikhonov   (503) staff       (20)        0 2023-02-13 10:27:17.793535 mashumaro-3.5/mashumaro/core/meta/types/
â”‚ â”‚ --rw-r--r--   0 alexander.tikhonov   (503) staff       (20)        0 2023-02-06 08:24:36.000000 mashumaro-3.5/mashumaro/core/meta/types/__init__.py
â”‚ â”‚ --rw-r--r--   0 alexander.tikhonov   (503) staff       (20)     4109 2023-02-13 10:27:04.000000 mashumaro-3.5/mashumaro/core/meta/types/common.py
â”‚ â”‚ --rw-r--r--   0 alexander.tikhonov   (503) staff       (20)    25319 2023-02-13 10:27:04.000000 mashumaro-3.5/mashumaro/core/meta/types/pack.py
â”‚ â”‚ --rw-r--r--   0 alexander.tikhonov   (503) staff       (20)    32058 2023-02-13 10:27:04.000000 mashumaro-3.5/mashumaro/core/meta/types/unpack.py
â”‚ â”‚ --rw-r--r--   0 alexander.tikhonov   (503) staff       (20)      469 2023-02-06 08:24:36.000000 mashumaro-3.5/mashumaro/dialect.py
â”‚ â”‚ --rw-r--r--   0 alexander.tikhonov   (503) staff       (20)     4548 2023-02-06 08:24:36.000000 mashumaro-3.5/mashumaro/exceptions.py
â”‚ â”‚ --rw-r--r--   0 alexander.tikhonov   (503) staff       (20)     1392 2023-02-06 08:24:36.000000 mashumaro-3.5/mashumaro/helper.py
â”‚ â”‚ -drwxr-xr-x   0 alexander.tikhonov   (503) staff       (20)        0 2023-02-13 10:27:17.794627 mashumaro-3.5/mashumaro/mixins/
â”‚ â”‚ --rw-r--r--   0 alexander.tikhonov   (503) staff       (20)        0 2023-02-06 08:24:36.000000 mashumaro-3.5/mashumaro/mixins/__init__.py
â”‚ â”‚ --rw-r--r--   0 alexander.tikhonov   (503) staff       (20)     1673 2023-02-06 08:24:36.000000 mashumaro-3.5/mashumaro/mixins/dict.py
â”‚ â”‚ --rw-r--r--   0 alexander.tikhonov   (503) staff       (20)      790 2023-02-06 08:24:36.000000 mashumaro-3.5/mashumaro/mixins/json.py
â”‚ â”‚ --rw-r--r--   0 alexander.tikhonov   (503) staff       (20)     1558 2023-02-06 08:24:36.000000 mashumaro-3.5/mashumaro/mixins/msgpack.py
â”‚ â”‚ --rw-r--r--   0 alexander.tikhonov   (503) staff       (20)     1731 2023-02-06 08:24:36.000000 mashumaro-3.5/mashumaro/mixins/orjson.py
â”‚ â”‚ --rw-r--r--   0 alexander.tikhonov   (503) staff       (20)     1000 2023-02-06 08:24:36.000000 mashumaro-3.5/mashumaro/mixins/orjson.pyi
â”‚ â”‚ --rw-r--r--   0 alexander.tikhonov   (503) staff       (20)     1392 2023-02-06 08:24:36.000000 mashumaro-3.5/mashumaro/mixins/toml.py
â”‚ â”‚ --rw-r--r--   0 alexander.tikhonov   (503) staff       (20)     1108 2023-02-06 08:24:36.000000 mashumaro-3.5/mashumaro/mixins/yaml.py
â”‚ â”‚ --rw-r--r--   0 alexander.tikhonov   (503) staff       (20)        0 2023-02-06 08:24:36.000000 mashumaro-3.5/mashumaro/py.typed
â”‚ â”‚ --rw-r--r--   0 alexander.tikhonov   (503) staff       (20)     2249 2023-02-13 10:27:04.000000 mashumaro-3.5/mashumaro/types.py
â”‚ â”‚ -drwxr-xr-x   0 alexander.tikhonov   (503) staff       (20)        0 2023-02-13 10:27:17.791685 mashumaro-3.5/mashumaro.egg-info/
â”‚ â”‚ --rw-r--r--   0 alexander.tikhonov   (503) staff       (20)    67134 2023-02-13 10:27:17.000000 mashumaro-3.5/mashumaro.egg-info/PKG-INFO
â”‚ â”‚ --rw-r--r--   0 alexander.tikhonov   (503) staff       (20)     1014 2023-02-13 10:27:17.000000 mashumaro-3.5/mashumaro.egg-info/SOURCES.txt
â”‚ â”‚ --rw-r--r--   0 alexander.tikhonov   (503) staff       (20)        1 2023-02-13 10:27:17.000000 mashumaro-3.5/mashumaro.egg-info/dependency_links.txt
â”‚ â”‚ --rw-r--r--   0 alexander.tikhonov   (503) staff       (20)        1 2023-02-06 08:27:56.000000 mashumaro-3.5/mashumaro.egg-info/not-zip-safe
â”‚ â”‚ --rw-r--r--   0 alexander.tikhonov   (503) staff       (20)      155 2023-02-13 10:27:17.000000 mashumaro-3.5/mashumaro.egg-info/requires.txt
â”‚ â”‚ --rw-r--r--   0 alexander.tikhonov   (503) staff       (20)       10 2023-02-13 10:27:17.000000 mashumaro-3.5/mashumaro.egg-info/top_level.txt
â”‚ â”‚ --rw-r--r--   0 alexander.tikhonov   (503) staff       (20)      619 2023-02-06 08:24:36.000000 mashumaro-3.5/pyproject.toml
â”‚ â”‚ --rw-r--r--   0 alexander.tikhonov   (503) staff       (20)       38 2023-02-13 10:27:17.795146 mashumaro-3.5/setup.cfg
â”‚ â”‚ --rw-r--r--   0 alexander.tikhonov   (503) staff       (20)     1465 2023-02-13 10:27:04.000000 mashumaro-3.5/setup.py
â”‚ â”‚ +drwxr-xr-x   0 alexander.tikhonov   (503) staff       (20)        0 2023-04-07 09:26:58.308766 mashumaro-3.6/
â”‚ â”‚ +-rw-r--r--   0 alexander.tikhonov   (503) staff       (20)    11348 2023-02-06 08:24:36.000000 mashumaro-3.6/LICENSE
â”‚ â”‚ +-rw-r--r--   0 alexander.tikhonov   (503) staff       (20)    78282 2023-04-07 09:26:58.308555 mashumaro-3.6/PKG-INFO
â”‚ â”‚ +-rw-r--r--   0 alexander.tikhonov   (503) staff       (20)    77363 2023-04-07 09:26:24.000000 mashumaro-3.6/README.md
â”‚ â”‚ +drwxr-xr-x   0 alexander.tikhonov   (503) staff       (20)        0 2023-04-07 09:26:58.302925 mashumaro-3.6/mashumaro/
â”‚ â”‚ +-rw-r--r--   0 alexander.tikhonov   (503) staff       (20)      258 2023-02-06 08:24:36.000000 mashumaro-3.6/mashumaro/__init__.py
â”‚ â”‚ +-rw-r--r--   0 alexander.tikhonov   (503) staff       (20)     1452 2023-04-07 09:26:24.000000 mashumaro-3.6/mashumaro/config.py
â”‚ â”‚ +drwxr-xr-x   0 alexander.tikhonov   (503) staff       (20)        0 2023-04-07 09:26:58.304251 mashumaro-3.6/mashumaro/core/
â”‚ â”‚ +-rw-r--r--   0 alexander.tikhonov   (503) staff       (20)        0 2023-02-06 08:24:36.000000 mashumaro-3.6/mashumaro/core/__init__.py
â”‚ â”‚ +-rw-r--r--   0 alexander.tikhonov   (503) staff       (20)     1013 2023-02-06 08:24:36.000000 mashumaro-3.6/mashumaro/core/const.py
â”‚ â”‚ +-rw-r--r--   0 alexander.tikhonov   (503) staff       (20)      825 2023-04-07 09:26:24.000000 mashumaro-3.6/mashumaro/core/helpers.py
â”‚ â”‚ +drwxr-xr-x   0 alexander.tikhonov   (503) staff       (20)        0 2023-04-07 09:26:58.304928 mashumaro-3.6/mashumaro/core/meta/
â”‚ â”‚ +-rw-r--r--   0 alexander.tikhonov   (503) staff       (20)        0 2023-02-06 08:24:36.000000 mashumaro-3.6/mashumaro/core/meta/__init__.py
â”‚ â”‚ +drwxr-xr-x   0 alexander.tikhonov   (503) staff       (20)        0 2023-04-07 09:26:58.305865 mashumaro-3.6/mashumaro/core/meta/code/
â”‚ â”‚ +-rw-r--r--   0 alexander.tikhonov   (503) staff       (20)        0 2023-02-06 08:24:36.000000 mashumaro-3.6/mashumaro/core/meta/code/__init__.py
â”‚ â”‚ +-rw-r--r--   0 alexander.tikhonov   (503) staff       (20)    37597 2023-04-07 09:26:24.000000 mashumaro-3.6/mashumaro/core/meta/code/builder.py
â”‚ â”‚ +-rw-r--r--   0 alexander.tikhonov   (503) staff       (20)      707 2023-02-06 08:24:36.000000 mashumaro-3.6/mashumaro/core/meta/code/lines.py
â”‚ â”‚ +-rw-r--r--   0 alexander.tikhonov   (503) staff       (20)    20883 2023-02-13 10:27:04.000000 mashumaro-3.6/mashumaro/core/meta/helpers.py
â”‚ â”‚ +-rw-r--r--   0 alexander.tikhonov   (503) staff       (20)     1366 2023-02-06 08:24:36.000000 mashumaro-3.6/mashumaro/core/meta/mixin.py
â”‚ â”‚ +drwxr-xr-x   0 alexander.tikhonov   (503) staff       (20)        0 2023-04-07 09:26:58.306424 mashumaro-3.6/mashumaro/core/meta/types/
â”‚ â”‚ +-rw-r--r--   0 alexander.tikhonov   (503) staff       (20)        0 2023-02-06 08:24:36.000000 mashumaro-3.6/mashumaro/core/meta/types/__init__.py
â”‚ â”‚ +-rw-r--r--   0 alexander.tikhonov   (503) staff       (20)     4109 2023-02-13 10:27:04.000000 mashumaro-3.6/mashumaro/core/meta/types/common.py
â”‚ â”‚ +-rw-r--r--   0 alexander.tikhonov   (503) staff       (20)    25319 2023-02-13 10:27:04.000000 mashumaro-3.6/mashumaro/core/meta/types/pack.py
â”‚ â”‚ +-rw-r--r--   0 alexander.tikhonov   (503) staff       (20)    32058 2023-02-13 10:27:04.000000 mashumaro-3.6/mashumaro/core/meta/types/unpack.py
â”‚ â”‚ +-rw-r--r--   0 alexander.tikhonov   (503) staff       (20)      469 2023-02-06 08:24:36.000000 mashumaro-3.6/mashumaro/dialect.py
â”‚ â”‚ +-rw-r--r--   0 alexander.tikhonov   (503) staff       (20)     4548 2023-02-06 08:24:36.000000 mashumaro-3.6/mashumaro/exceptions.py
â”‚ â”‚ +-rw-r--r--   0 alexander.tikhonov   (503) staff       (20)     1392 2023-02-06 08:24:36.000000 mashumaro-3.6/mashumaro/helper.py
â”‚ â”‚ +drwxr-xr-x   0 alexander.tikhonov   (503) staff       (20)        0 2023-04-07 09:26:58.307237 mashumaro-3.6/mashumaro/jsonschema/
â”‚ â”‚ +-rw-r--r--   0 alexander.tikhonov   (503) staff       (20)      214 2023-04-07 09:26:24.000000 mashumaro-3.6/mashumaro/jsonschema/__init__.py
â”‚ â”‚ +-rw-r--r--   0 alexander.tikhonov   (503) staff       (20)     2170 2023-04-07 09:26:24.000000 mashumaro-3.6/mashumaro/jsonschema/annotations.py
â”‚ â”‚ +-rw-r--r--   0 alexander.tikhonov   (503) staff       (20)     2353 2023-04-07 09:26:24.000000 mashumaro-3.6/mashumaro/jsonschema/builder.py
â”‚ â”‚ +-rw-r--r--   0 alexander.tikhonov   (503) staff       (20)      746 2023-04-07 09:26:24.000000 mashumaro-3.6/mashumaro/jsonschema/dialects.py
â”‚ â”‚ +-rw-r--r--   0 alexander.tikhonov   (503) staff       (20)     5781 2023-04-07 09:26:24.000000 mashumaro-3.6/mashumaro/jsonschema/models.py
â”‚ â”‚ +-rw-r--r--   0 alexander.tikhonov   (503) staff       (20)    25664 2023-04-07 09:26:24.000000 mashumaro-3.6/mashumaro/jsonschema/schema.py
â”‚ â”‚ +drwxr-xr-x   0 alexander.tikhonov   (503) staff       (20)        0 2023-04-07 09:26:58.308268 mashumaro-3.6/mashumaro/mixins/
â”‚ â”‚ +-rw-r--r--   0 alexander.tikhonov   (503) staff       (20)        0 2023-02-06 08:24:36.000000 mashumaro-3.6/mashumaro/mixins/__init__.py
â”‚ â”‚ +-rw-r--r--   0 alexander.tikhonov   (503) staff       (20)     1673 2023-02-06 08:24:36.000000 mashumaro-3.6/mashumaro/mixins/dict.py
â”‚ â”‚ +-rw-r--r--   0 alexander.tikhonov   (503) staff       (20)      790 2023-02-06 08:24:36.000000 mashumaro-3.6/mashumaro/mixins/json.py
â”‚ â”‚ +-rw-r--r--   0 alexander.tikhonov   (503) staff       (20)     1558 2023-02-06 08:24:36.000000 mashumaro-3.6/mashumaro/mixins/msgpack.py
â”‚ â”‚ +-rw-r--r--   0 alexander.tikhonov   (503) staff       (20)     1731 2023-02-06 08:24:36.000000 mashumaro-3.6/mashumaro/mixins/orjson.py
â”‚ â”‚ +-rw-r--r--   0 alexander.tikhonov   (503) staff       (20)     1000 2023-02-06 08:24:36.000000 mashumaro-3.6/mashumaro/mixins/orjson.pyi
â”‚ â”‚ +-rw-r--r--   0 alexander.tikhonov   (503) staff       (20)     1392 2023-02-06 08:24:36.000000 mashumaro-3.6/mashumaro/mixins/toml.py
â”‚ â”‚ +-rw-r--r--   0 alexander.tikhonov   (503) staff       (20)     1108 2023-02-06 08:24:36.000000 mashumaro-3.6/mashumaro/mixins/yaml.py
â”‚ â”‚ +-rw-r--r--   0 alexander.tikhonov   (503) staff       (20)        0 2023-02-06 08:24:36.000000 mashumaro-3.6/mashumaro/py.typed
â”‚ â”‚ +-rw-r--r--   0 alexander.tikhonov   (503) staff       (20)     2249 2023-02-13 10:27:04.000000 mashumaro-3.6/mashumaro/types.py
â”‚ â”‚ +drwxr-xr-x   0 alexander.tikhonov   (503) staff       (20)        0 2023-04-07 09:26:58.303925 mashumaro-3.6/mashumaro.egg-info/
â”‚ â”‚ +-rw-r--r--   0 alexander.tikhonov   (503) staff       (20)    78282 2023-04-07 09:26:58.000000 mashumaro-3.6/mashumaro.egg-info/PKG-INFO
â”‚ â”‚ +-rw-r--r--   0 alexander.tikhonov   (503) staff       (20)     1210 2023-04-07 09:26:58.000000 mashumaro-3.6/mashumaro.egg-info/SOURCES.txt
â”‚ â”‚ +-rw-r--r--   0 alexander.tikhonov   (503) staff       (20)        1 2023-04-07 09:26:58.000000 mashumaro-3.6/mashumaro.egg-info/dependency_links.txt
â”‚ â”‚ +-rw-r--r--   0 alexander.tikhonov   (503) staff       (20)        1 2023-02-06 08:27:56.000000 mashumaro-3.6/mashumaro.egg-info/not-zip-safe
â”‚ â”‚ +-rw-r--r--   0 alexander.tikhonov   (503) staff       (20)      155 2023-04-07 09:26:58.000000 mashumaro-3.6/mashumaro.egg-info/requires.txt
â”‚ â”‚ +-rw-r--r--   0 alexander.tikhonov   (503) staff       (20)       10 2023-04-07 09:26:58.000000 mashumaro-3.6/mashumaro.egg-info/top_level.txt
â”‚ â”‚ +-rw-r--r--   0 alexander.tikhonov   (503) staff       (20)      689 2023-04-07 09:26:24.000000 mashumaro-3.6/pyproject.toml
â”‚ â”‚ +-rw-r--r--   0 alexander.tikhonov   (503) staff       (20)       38 2023-04-07 09:26:58.308804 mashumaro-3.6/setup.cfg
â”‚ â”‚ +-rw-r--r--   0 alexander.tikhonov   (503) staff       (20)     1463 2023-04-07 09:26:24.000000 mashumaro-3.6/setup.py
â”‚ â”‚   --- mashumaro-3.5/LICENSE
â”‚ â”œâ”€â”€ +++ mashumaro-3.6/LICENSE
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- mashumaro-3.5/PKG-INFO
â”‚ â”œâ”€â”€ +++ mashumaro-3.6/PKG-INFO
â”‚ â”‚â”„ Files 3% similar despite different names
â”‚ â”‚ @@ -1,11 +1,11 @@
â”‚ â”‚  Metadata-Version: 2.1
â”‚ â”‚  Name: mashumaro
â”‚ â”‚ -Version: 3.5
â”‚ â”‚ -Summary: Fast serialization framework on top of dataclasses
â”‚ â”‚ +Version: 3.6
â”‚ â”‚ +Summary: Fast serialization library on top of dataclasses
â”‚ â”‚  Home-page: https://github.com/Fatal1ty/mashumaro
â”‚ â”‚  Author: Alexander Tikhonov
â”‚ â”‚  Author-email: random.gauss@gmail.com
â”‚ â”‚  License: Apache License, Version 2.0
â”‚ â”‚  Platform: all
â”‚ â”‚  Classifier: License :: OSI Approved :: Apache Software License
â”‚ â”‚  Classifier: Intended Audience :: Developers
â”‚ â”‚ @@ -20,29 +20,36 @@
â”‚ â”‚  Description-Content-Type: text/markdown
â”‚ â”‚  Provides-Extra: orjson
â”‚ â”‚  Provides-Extra: msgpack
â”‚ â”‚  Provides-Extra: yaml
â”‚ â”‚  Provides-Extra: toml
â”‚ â”‚  License-File: LICENSE
â”‚ â”‚  
â”‚ â”‚ -# mashumaro (ãƒã‚·ãƒ¥ãƒãƒ­)
â”‚ â”‚ +# mashumaro
â”‚ â”‚  
â”‚ â”‚ -> **mashumaro** is a fast and well tested serialization framework on top of dataclasses.
â”‚ â”‚ +###### Fast and well tested serialization library on top of dataclasses
â”‚ â”‚  
â”‚ â”‚  [![Build Status](https://github.com/Fatal1ty/mashumaro/workflows/tests/badge.svg)](https://github.com/Fatal1ty/mashumaro/actions)
â”‚ â”‚  [![Coverage Status](https://coveralls.io/repos/github/Fatal1ty/mashumaro/badge.svg?branch=master)](https://coveralls.io/github/Fatal1ty/mashumaro?branch=master)
â”‚ â”‚  [![Latest Version](https://img.shields.io/pypi/v/mashumaro.svg)](https://pypi.python.org/pypi/mashumaro)
â”‚ â”‚  [![Python Version](https://img.shields.io/pypi/pyversions/mashumaro.svg)](https://pypi.python.org/pypi/mashumaro)
â”‚ â”‚  [![License](https://img.shields.io/badge/License-Apache%202.0-blue.svg)](https://opensource.org/licenses/Apache-2.0)
â”‚ â”‚  
â”‚ â”‚ -
â”‚ â”‚ -When using dataclasses, you often need to dump and load objects according to
â”‚ â”‚ -the described scheme.
â”‚ â”‚ -This framework not only adds this ability to serialize in different formats,
â”‚ â”‚ -but also makes **serialization rapidly**.
â”‚ â”‚ +When using dataclasses, you often need to dump and load objects based on the
â”‚ â”‚ +schema you have. Mashumaro not only lets you save and load things in different
â”‚ â”‚ +ways, but it also does it _super quick_.
â”‚ â”‚ +
â”‚ â”‚ +**Key features**
â”‚ â”‚ +* ğŸš€ One of the fastest libraries
â”‚ â”‚ +* â˜ï¸ Mature and time-tested
â”‚ â”‚ +* ğŸ‘¶ Easy to use out of the box
â”‚ â”‚ +* âš™ï¸ Highly customizable
â”‚ â”‚ +* ğŸ‰ Built-in support for JSON, YAML, MessagePack, TOML
â”‚ â”‚ +* ğŸ“¦ Built-in support for almost all Python types including typing-extensions
â”‚ â”‚ +* ğŸ“ JSON Schema generation
â”‚ â”‚  
â”‚ â”‚  Table of contents
â”‚ â”‚  --------------------------------------------------------------------------------
â”‚ â”‚  * [Installation](#installation)
â”‚ â”‚  * [Changelog](#changelog)
â”‚ â”‚  * [Supported serialization formats](#supported-serialization-formats)
â”‚ â”‚  * [Supported data types](#supported-data-types)
â”‚ â”‚ @@ -93,14 +100,19 @@
â”‚ â”‚        * [Generic dataclass in a field type](#generic-dataclass-in-a-field-type)
â”‚ â”‚      * [`GenericSerializableType` interface](#genericserializabletype-interface)
â”‚ â”‚      * [Serialization hooks](#serialization-hooks)
â”‚ â”‚          * [Before deserialization](#before-deserialization)
â”‚ â”‚          * [After deserialization](#after-deserialization)
â”‚ â”‚          * [Before serialization](#before-serialization)
â”‚ â”‚          * [After serialization](#after-serialization)
â”‚ â”‚ +* [JSON Schema](#json-schema)
â”‚ â”‚ +    * [Building JSON Schema](#building-json-schema)
â”‚ â”‚ +    * [JSON Schema constraints](#json-schema-constraints)
â”‚ â”‚ +    * [Extending JSON Schema](#extending-json-schema)
â”‚ â”‚ +    * [JSON Schema and custom serialization methods](#json-schema-and-custom-serialization-methods)
â”‚ â”‚  
â”‚ â”‚  Installation
â”‚ â”‚  --------------------------------------------------------------------------------
â”‚ â”‚  
â”‚ â”‚  Use pip to install:
â”‚ â”‚  ```shell
â”‚ â”‚  $ pip install mashumaro
â”‚ â”‚ @@ -114,15 +126,15 @@
â”‚ â”‚  
â”‚ â”‚  This project follows the principles of [Semantic Versioning](https://semver.org).
â”‚ â”‚  Changelog is available on [GitHub Releases page](https://github.com/Fatal1ty/mashumaro/releases).
â”‚ â”‚  
â”‚ â”‚  Supported serialization formats
â”‚ â”‚  --------------------------------------------------------------------------------
â”‚ â”‚  
â”‚ â”‚ -This framework adds methods for dumping to and loading from the
â”‚ â”‚ +This library adds methods for dumping to and loading from the
â”‚ â”‚  following formats:
â”‚ â”‚  
â”‚ â”‚  * [plain dict](https://docs.python.org/3/library/stdtypes.html#mapping-types-dict)
â”‚ â”‚  * [JSON](https://www.json.org)
â”‚ â”‚  * [YAML](https://yaml.org)
â”‚ â”‚  * [MessagePack](https://msgpack.org)
â”‚ â”‚  * [TOML](https://toml.io)
â”‚ â”‚ @@ -288,15 +300,15 @@
â”‚ â”‚  json_string = my_portfolio.to_json()
â”‚ â”‚  Portfolio.from_json(json_string)  # same as my_portfolio
â”‚ â”‚  ```
â”‚ â”‚  
â”‚ â”‚  How does it work?
â”‚ â”‚  --------------------------------------------------------------------------------
â”‚ â”‚  
â”‚ â”‚ -This framework works by taking the schema of the data and generating a
â”‚ â”‚ +This library works by taking the schema of the data and generating a
â”‚ â”‚  specific parser and builder for exactly that schema, taking into account the
â”‚ â”‚  specifics of the serialization format. This is much faster than inspection of
â”‚ â”‚  field types on every call of parsing or building at runtime.
â”‚ â”‚  
â”‚ â”‚  These specific parsers and builders are presented by the corresponding
â”‚ â”‚  `from_*` and `to_*` methods. They are compiled during import time (or at
â”‚ â”‚  runtime in some cases) and are set as attributes to your dataclasses.
â”‚ â”‚ @@ -315,15 +327,15 @@
â”‚ â”‚  <img src="https://raw.githubusercontent.com/Fatal1ty/mashumaro/master/benchmark/charts/load.png" width="400"><img src="https://raw.githubusercontent.com/Fatal1ty/mashumaro/master/benchmark/charts/dump.png" width="400">
â”‚ â”‚  
â”‚ â”‚  <table>
â”‚ â”‚    <col>
â”‚ â”‚    <colgroup span="2"></colgroup>
â”‚ â”‚    <colgroup span="2"></colgroup>
â”‚ â”‚    <tr>
â”‚ â”‚ -    <th rowspan="2">Framework</th>
â”‚ â”‚ +    <th rowspan="2">Library</th>
â”‚ â”‚      <th colspan="2" scope="colgroup">From dict</th>
â”‚ â”‚      <th colspan="2" scope="colgroup">To dict</th>
â”‚ â”‚  </tr>
â”‚ â”‚  <tr>
â”‚ â”‚      <th scope="col">Time</th>
â”‚ â”‚      <th scope="col">Slowdown factor</th>
â”‚ â”‚      <th scope="col">Time</th>
â”‚ â”‚ @@ -519,14 +531,15 @@
â”‚ â”‚  * Turn an existing regular or generic class into a serializable one
â”‚ â”‚  by inheriting the [`SerializableType`](#serializabletype-interface) class
â”‚ â”‚  * Write different serialization strategies for an existing regular or generic type that is not under your control
â”‚ â”‚  using [`SerializationStrategy`](#serializationstrategy) class
â”‚ â”‚  * Define serialization / deserialization methods:
â”‚ â”‚    * for a specific dataclass field by using [field options](#field-options)
â”‚ â”‚    * for a specific data type used in the dataclass by using [`Config`](#config-options) class
â”‚ â”‚ +* Alter input and output data with serialization / deserialization [hooks](#serialization-hooks)
â”‚ â”‚  * Separate serialization scheme from a dataclass in a reusable manner using [dialects](#dialects)
â”‚ â”‚  * Choose from predefined serialization engines for the specific data types, e.g. `datetime` and `NamedTuple`
â”‚ â”‚  
â”‚ â”‚  ### SerializableType interface
â”‚ â”‚  
â”‚ â”‚  If you have a custom class or hierarchy of classes whose instances you want
â”‚ â”‚  to serialize with `mashumaro`, the first option is to implement
â”‚ â”‚ @@ -785,15 +798,15 @@
â”‚ â”‚  #### Third-party generic types
â”‚ â”‚  
â”‚ â”‚  To create a generic version of a serialization strategy you need to follow these steps:
â”‚ â”‚  * inherit [`Generic[...]`](https://docs.python.org/3/library/typing.html#typing.Generic) type
â”‚ â”‚  with the number of parameters matching the number of parameters
â”‚ â”‚  of the target generic type
â”‚ â”‚  * Write generic annotations for `serialize` method's return type and for `deserialize` method's argument type
â”‚ â”‚ -* Use the origin type of the target generic type in the [`serialization_strategy`](#serializationstrategy-config-option) config section
â”‚ â”‚ +* Use the origin type of the target generic type in the [`serialization_strategy`](#serialization_strategy-config-option) config section
â”‚ â”‚  ([`typing.get_origin`](https://docs.python.org/3/library/typing.html#typing.get_origin) might be helpful)
â”‚ â”‚  
â”‚ â”‚  There is no need to add `use_annotations=True` here because it's enabled implicitly
â”‚ â”‚  for generic serialization strategies.
â”‚ â”‚  
â”‚ â”‚  For example, there is a third-party [multidict](https://pypi.org/project/multidict/) package that has a generic `MultiDict` type.
â”‚ â”‚  A generic serialization strategy for it might look like this:
â”‚ â”‚ @@ -1770,7 +1783,440 @@
â”‚ â”‚          d.pop('password')
â”‚ â”‚          return d
â”‚ â”‚  
â”‚ â”‚  obj = DataClass(user="name", password="secret")
â”‚ â”‚  print(obj.to_dict())  # {"user": "name"}
â”‚ â”‚  print(obj.to_json())  # '{"user": "name"}'
â”‚ â”‚  ```
â”‚ â”‚ +
â”‚ â”‚ +JSON Schema
â”‚ â”‚ +--------------------------------------------------------------------------------
â”‚ â”‚ +
â”‚ â”‚ +You can build JSON Schema not only for dataclasses but also for any other
â”‚ â”‚ +[supported](#supported-data-types) data
â”‚ â”‚ +types. There is support for the following standards:
â”‚ â”‚ +* [Draft 2022-12](https://json-schema.org/specification.html)
â”‚ â”‚ +* [OpenAPI Specification 3.1.0](https://swagger.io/specification/)
â”‚ â”‚ +
â”‚ â”‚ +### Building JSON Schema
â”‚ â”‚ +
â”‚ â”‚ +For simple one-time cases it's recommended to start from using a configurable
â”‚ â”‚ +`build_json_schema` function. It returns `JSONSchema` object that can be
â”‚ â”‚ +serialized to json or to dict:
â”‚ â”‚ +
â”‚ â”‚ +```python
â”‚ â”‚ +from dataclasses import dataclass
â”‚ â”‚ +from typing import List
â”‚ â”‚ +from uuid import UUID
â”‚ â”‚ +
â”‚ â”‚ +from mashumaro.jsonschema import build_json_schema
â”‚ â”‚ +
â”‚ â”‚ +
â”‚ â”‚ +@dataclass
â”‚ â”‚ +class User:
â”‚ â”‚ +    id: UUID
â”‚ â”‚ +    name: str
â”‚ â”‚ +
â”‚ â”‚ +
â”‚ â”‚ +print(build_json_schema(List[User]).to_json())
â”‚ â”‚ +```
â”‚ â”‚ +
â”‚ â”‚ +<details>
â”‚ â”‚ +<summary>Click to show the result</summary>
â”‚ â”‚ +
â”‚ â”‚ +```json
â”‚ â”‚ +{
â”‚ â”‚ +    "type": "array",
â”‚ â”‚ +    "items": {
â”‚ â”‚ +        "type": "object",
â”‚ â”‚ +        "title": "User",
â”‚ â”‚ +        "properties": {
â”‚ â”‚ +            "id": {
â”‚ â”‚ +                "type": "string",
â”‚ â”‚ +                "format": "uuid"
â”‚ â”‚ +            },
â”‚ â”‚ +            "name": {
â”‚ â”‚ +                "type": "string"
â”‚ â”‚ +            }
â”‚ â”‚ +        },
â”‚ â”‚ +        "additionalProperties": false,
â”‚ â”‚ +        "required": [
â”‚ â”‚ +            "id",
â”‚ â”‚ +            "name"
â”‚ â”‚ +        ]
â”‚ â”‚ +    }
â”‚ â”‚ +}
â”‚ â”‚ +```
â”‚ â”‚ +</details>
â”‚ â”‚ +
â”‚ â”‚ +Additional validation keywords ([see below](#json-schema-constraints))
â”‚ â”‚ +can be added using annotations:
â”‚ â”‚ +
â”‚ â”‚ +```python
â”‚ â”‚ +from typing import Annotated, List
â”‚ â”‚ +from mashumaro.jsonschema import build_json_schema
â”‚ â”‚ +from mashumaro.jsonschema.annotations import Maximum, MaxItems
â”‚ â”‚ +
â”‚ â”‚ +print(
â”‚ â”‚ +    build_json_schema(
â”‚ â”‚ +        Annotated[
â”‚ â”‚ +            List[Annotated[int, Maximum(42)]],
â”‚ â”‚ +            MaxItems(4)
â”‚ â”‚ +        ]
â”‚ â”‚ +    ).to_json()
â”‚ â”‚ +)
â”‚ â”‚ +```
â”‚ â”‚ +
â”‚ â”‚ +<details>
â”‚ â”‚ +<summary>Click to show the result</summary>
â”‚ â”‚ +
â”‚ â”‚ +```json
â”‚ â”‚ +{
â”‚ â”‚ +    "type": "array",
â”‚ â”‚ +    "items": {
â”‚ â”‚ +        "type": "integer",
â”‚ â”‚ +        "maximum": 42
â”‚ â”‚ +    },
â”‚ â”‚ +    "maxItems": 4
â”‚ â”‚ +}
â”‚ â”‚ +```
â”‚ â”‚ +</details>
â”‚ â”‚ +
â”‚ â”‚ +The [`$schema`](https://json-schema.org/draft/2020-12/json-schema-core.html#name-the-schema-keyword)
â”‚ â”‚ +keyword can be added by setting `with_dialect_uri` to True:
â”‚ â”‚ +
â”‚ â”‚ +```python
â”‚ â”‚ +print(build_json_schema(str, with_dialect_uri=True).to_json())
â”‚ â”‚ +```
â”‚ â”‚ +
â”‚ â”‚ +<details>
â”‚ â”‚ +<summary>Click to show the result</summary>
â”‚ â”‚ +
â”‚ â”‚ +```json
â”‚ â”‚ +{
â”‚ â”‚ +    "$schema": "https://json-schema.org/draft/2020-12/schema",
â”‚ â”‚ +    "type": "string"
â”‚ â”‚ +}
â”‚ â”‚ +```
â”‚ â”‚ +</details>
â”‚ â”‚ +
â”‚ â”‚ +By default, Draft 2022-12 dialect is being used, but you can change it to
â”‚ â”‚ +another one by setting `dialect` parameter:
â”‚ â”‚ +
â”‚ â”‚ +```python
â”‚ â”‚ +from mashumaro.jsonschema import OPEN_API_3_1
â”‚ â”‚ +
â”‚ â”‚ +print(
â”‚ â”‚ +    build_json_schema(
â”‚ â”‚ +        str, dialect=OPEN_API_3_1, with_dialect_uri=True
â”‚ â”‚ +    ).to_json()
â”‚ â”‚ +)
â”‚ â”‚ +```
â”‚ â”‚ +
â”‚ â”‚ +<details>
â”‚ â”‚ +<summary>Click to show the result</summary>
â”‚ â”‚ +
â”‚ â”‚ +```json
â”‚ â”‚ +{
â”‚ â”‚ +    "$schema": "https://spec.openapis.org/oas/3.1/dialect/base",
â”‚ â”‚ +    "type": "string"
â”‚ â”‚ +}
â”‚ â”‚ +```
â”‚ â”‚ +</details>
â”‚ â”‚ +
â”‚ â”‚ +All dataclass JSON Schemas can or can not be placed in the
â”‚ â”‚ +[definitions](https://json-schema.org/draft/2020-12/json-schema-core.html#name-schema-re-use-with-defs)
â”‚ â”‚ +section, depending on the `all_refs` parameter, which default value comes
â”‚ â”‚ +from a dialect used (`False` for Draft 2022-12, `True` for OpenAPI
â”‚ â”‚ +Specification 3.1.0):
â”‚ â”‚ +
â”‚ â”‚ +```python
â”‚ â”‚ +print(build_json_schema(List[User], all_refs=True).to_json())
â”‚ â”‚ +```
â”‚ â”‚ +<details>
â”‚ â”‚ +<summary>Click to show the result</summary>
â”‚ â”‚ +
â”‚ â”‚ +```json
â”‚ â”‚ +{
â”‚ â”‚ +    "type": "array",
â”‚ â”‚ +    "$defs": {
â”‚ â”‚ +        "User": {
â”‚ â”‚ +            "type": "object",
â”‚ â”‚ +            "title": "User",
â”‚ â”‚ +            "properties": {
â”‚ â”‚ +                "id": {
â”‚ â”‚ +                    "type": "string",
â”‚ â”‚ +                    "format": "uuid"
â”‚ â”‚ +                },
â”‚ â”‚ +                "name": {
â”‚ â”‚ +                    "type": "string"
â”‚ â”‚ +                }
â”‚ â”‚ +            },
â”‚ â”‚ +            "additionalProperties": false,
â”‚ â”‚ +            "required": [
â”‚ â”‚ +                "id",
â”‚ â”‚ +                "name"
â”‚ â”‚ +            ]
â”‚ â”‚ +        }
â”‚ â”‚ +    },
â”‚ â”‚ +    "items": {
â”‚ â”‚ +        "$ref": "#/defs/User"
â”‚ â”‚ +    }
â”‚ â”‚ +}
â”‚ â”‚ +```
â”‚ â”‚ +</details>
â”‚ â”‚ +
â”‚ â”‚ +The definitions section can be omitted from the final document by setting
â”‚ â”‚ +`with_definitions` parameter to `False`:
â”‚ â”‚ +
â”‚ â”‚ +```python
â”‚ â”‚ +print(
â”‚ â”‚ +    build_json_schema(
â”‚ â”‚ +        List[User], dialect=OPEN_API_3_1, with_definitions=False
â”‚ â”‚ +    ).to_json()
â”‚ â”‚ +)
â”‚ â”‚ +```
â”‚ â”‚ +
â”‚ â”‚ +<details>
â”‚ â”‚ +<summary>Click to show the result</summary>
â”‚ â”‚ +
â”‚ â”‚ +```json
â”‚ â”‚ +{
â”‚ â”‚ +    "type": "array",
â”‚ â”‚ +    "items": {
â”‚ â”‚ +        "$ref": "#/components/schemas/User"
â”‚ â”‚ +    }
â”‚ â”‚ +}
â”‚ â”‚ +```
â”‚ â”‚ +</details>
â”‚ â”‚ +
â”‚ â”‚ +These omitted definitions could be found later in the `Context` object that
â”‚ â”‚ +you could have created and passed to the function, but it could be easier
â”‚ â”‚ +to use `JSONSchemaBuilder` for that. For example, you might found it handy
â”‚ â”‚ +to build OpenAPI Specification step by step passing your models to the builder
â”‚ â”‚ +and get all the registered definitions later. This builder has reasonable
â”‚ â”‚ +defaults but can be customized if necessary.
â”‚ â”‚ +
â”‚ â”‚ +```python
â”‚ â”‚ +from mashumaro.jsonschema import JSONSchemaBuilder, OPEN_API_3_1
â”‚ â”‚ +
â”‚ â”‚ +builder = JSONSchemaBuilder(OPEN_API_3_1)
â”‚ â”‚ +
â”‚ â”‚ +@dataclass
â”‚ â”‚ +class User:
â”‚ â”‚ +    id: UUID
â”‚ â”‚ +    name: str
â”‚ â”‚ +
â”‚ â”‚ +@dataclass
â”‚ â”‚ +class Device:
â”‚ â”‚ +    id: UUID
â”‚ â”‚ +    model: str
â”‚ â”‚ +
â”‚ â”‚ +print(builder.build(List[User]).to_json())
â”‚ â”‚ +print(builder.build(List[Device]).to_json())
â”‚ â”‚ +print(builder.get_definitions().to_json())
â”‚ â”‚ +```
â”‚ â”‚ +
â”‚ â”‚ +<details>
â”‚ â”‚ +<summary>Click to show the result</summary>
â”‚ â”‚ +
â”‚ â”‚ +```json
â”‚ â”‚ +{
â”‚ â”‚ +    "type": "array",
â”‚ â”‚ +    "items": {
â”‚ â”‚ +        "$ref": "#/components/schemas/User"
â”‚ â”‚ +    }
â”‚ â”‚ +}
â”‚ â”‚ +```
â”‚ â”‚ +```json
â”‚ â”‚ +{
â”‚ â”‚ +    "type": "array",
â”‚ â”‚ +    "items": {
â”‚ â”‚ +        "$ref": "#/components/schemas/Device"
â”‚ â”‚ +    }
â”‚ â”‚ +}
â”‚ â”‚ +```
â”‚ â”‚ +```json
â”‚ â”‚ +{
â”‚ â”‚ +    "User": {
â”‚ â”‚ +        "type": "object",
â”‚ â”‚ +        "title": "User",
â”‚ â”‚ +        "properties": {
â”‚ â”‚ +            "id": {
â”‚ â”‚ +                "type": "string",
â”‚ â”‚ +                "format": "uuid"
â”‚ â”‚ +            },
â”‚ â”‚ +            "name": {
â”‚ â”‚ +                "type": "string"
â”‚ â”‚ +            }
â”‚ â”‚ +        },
â”‚ â”‚ +        "additionalProperties": false,
â”‚ â”‚ +        "required": [
â”‚ â”‚ +            "id",
â”‚ â”‚ +            "name"
â”‚ â”‚ +        ]
â”‚ â”‚ +    },
â”‚ â”‚ +    "Device": {
â”‚ â”‚ +        "type": "object",
â”‚ â”‚ +        "title": "Device",
â”‚ â”‚ +        "properties": {
â”‚ â”‚ +            "id": {
â”‚ â”‚ +                "type": "string",
â”‚ â”‚ +                "format": "uuid"
â”‚ â”‚ +            },
â”‚ â”‚ +            "model": {
â”‚ â”‚ +                "type": "string"
â”‚ â”‚ +            }
â”‚ â”‚ +        },
â”‚ â”‚ +        "additionalProperties": false,
â”‚ â”‚ +        "required": [
â”‚ â”‚ +            "id",
â”‚ â”‚ +            "model"
â”‚ â”‚ +        ]
â”‚ â”‚ +    }
â”‚ â”‚ +}
â”‚ â”‚ +```
â”‚ â”‚ +</details>
â”‚ â”‚ +
â”‚ â”‚ +### JSON Schema constraints
â”‚ â”‚ +
â”‚ â”‚ +Apart from required keywords, that are added automatically for certain data
â”‚ â”‚ +types, you're free to use additional validation keywords.
â”‚ â”‚ +They're presented by the corresponding classes in
â”‚ â”‚ +[`mashumaro.jsonschema.annotations`](https://github.com/Fatal1ty/mashumaro/blob/master/mashumaro/jsonschema/annotations.py):
â”‚ â”‚ +
â”‚ â”‚ +Number constraints:
â”‚ â”‚ +* [`Minimum`](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-minimum)
â”‚ â”‚ +* [`Maximum`](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-maximum)
â”‚ â”‚ +* [`ExclusiveMinimum`](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-exclusiveminimum)
â”‚ â”‚ +* [`ExclusiveMaximum`](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-exclusivemaximum)
â”‚ â”‚ +* [`MultipleOf`](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-multipleof)
â”‚ â”‚ +
â”‚ â”‚ +String constraints:
â”‚ â”‚ +* [`MinLength`](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-minlength)
â”‚ â”‚ +* [`MaxLength`](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-maxlength)
â”‚ â”‚ +* [`Pattern`](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-pattern)
â”‚ â”‚ +
â”‚ â”‚ +Array constraints:
â”‚ â”‚ +* [`MinItems`](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-minitems)
â”‚ â”‚ +* [`MaxItems`](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-maxitems)
â”‚ â”‚ +* [`UniqueItems`](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-uniqueitems)
â”‚ â”‚ +* [`Contains`](https://json-schema.org/draft/2020-12/json-schema-core.html#name-contains)
â”‚ â”‚ +* [`MinContains`](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-mincontains)
â”‚ â”‚ +* [`MaxContains`](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-maxcontains)
â”‚ â”‚ +
â”‚ â”‚ +Object constraints:
â”‚ â”‚ +* [`MaxProperties`](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-maxproperties)
â”‚ â”‚ +* [`MinProperties`](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-minproperties)
â”‚ â”‚ +* [`DependentRequired`](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-dependentrequired)
â”‚ â”‚ +
â”‚ â”‚ +### Extending JSON Schema
â”‚ â”‚ +
â”‚ â”‚ +Using a `Config` class it is possible to override some parts of the schema.
â”‚ â”‚ +Currently, it works for dataclass fields via "properties" key:
â”‚ â”‚ +
â”‚ â”‚ +```python
â”‚ â”‚ +from dataclasses import dataclass
â”‚ â”‚ +from mashumaro.jsonschema import build_json_schema
â”‚ â”‚ +
â”‚ â”‚ +@dataclass
â”‚ â”‚ +class FooBar:
â”‚ â”‚ +    foo: str
â”‚ â”‚ +    bar: int
â”‚ â”‚ +
â”‚ â”‚ +    class Config:
â”‚ â”‚ +        json_schema = {
â”‚ â”‚ +            "properties": {
â”‚ â”‚ +                "foo": {
â”‚ â”‚ +                    "type": "string",
â”‚ â”‚ +                    "description": "bar"
â”‚ â”‚ +                }
â”‚ â”‚ +            }
â”‚ â”‚ +        }
â”‚ â”‚ +
â”‚ â”‚ +print(build_json_schema(FooBar).to_json())
â”‚ â”‚ +```
â”‚ â”‚ +
â”‚ â”‚ +<details>
â”‚ â”‚ +<summary>Click to show the result</summary>
â”‚ â”‚ +
â”‚ â”‚ +```json
â”‚ â”‚ +{
â”‚ â”‚ +    "type": "object",
â”‚ â”‚ +    "title": "FooBar",
â”‚ â”‚ +    "properties": {
â”‚ â”‚ +        "foo": {
â”‚ â”‚ +            "type": "string",
â”‚ â”‚ +            "description": "bar"
â”‚ â”‚ +        },
â”‚ â”‚ +        "bar": {
â”‚ â”‚ +            "type": "integer"
â”‚ â”‚ +        }
â”‚ â”‚ +    },
â”‚ â”‚ +    "additionalProperties": false,
â”‚ â”‚ +    "required": [
â”‚ â”‚ +        "foo",
â”‚ â”‚ +        "bar"
â”‚ â”‚ +    ]
â”‚ â”‚ +}
â”‚ â”‚ +```
â”‚ â”‚ +</details>
â”‚ â”‚ +
â”‚ â”‚ +### JSON Schema and custom serialization methods
â”‚ â”‚ +
â”‚ â”‚ +Mashumaro provides different ways to override default serialization methods for
â”‚ â”‚ +dataclass fields or specific data types. In order for these overrides to be
â”‚ â”‚ +reflected in the schema, you need to make sure that the methods have
â”‚ â”‚ +annotations of the return value type.
â”‚ â”‚ +
â”‚ â”‚ +```python
â”‚ â”‚ +from dataclasses import dataclass, field
â”‚ â”‚ +from mashumaro.config import BaseConfig
â”‚ â”‚ +from mashumaro.jsonschema import build_json_schema
â”‚ â”‚ +
â”‚ â”‚ +def str_as_list(s: str) -> list[str]:
â”‚ â”‚ +    return list(s)
â”‚ â”‚ +
â”‚ â”‚ +def int_as_str(i: int) -> str:
â”‚ â”‚ +    return str(i)
â”‚ â”‚ +
â”‚ â”‚ +@dataclass
â”‚ â”‚ +class FooBar:
â”‚ â”‚ +    foo: str = field(metadata={"serialize": str_as_list})
â”‚ â”‚ +    bar: int
â”‚ â”‚ +
â”‚ â”‚ +    class Config(BaseConfig):
â”‚ â”‚ +        serialization_strategy = {
â”‚ â”‚ +            int: {
â”‚ â”‚ +                "serialize": int_as_str
â”‚ â”‚ +            }
â”‚ â”‚ +        }
â”‚ â”‚ +
â”‚ â”‚ +print(build_json_schema(FooBar).to_json())
â”‚ â”‚ +```
â”‚ â”‚ +
â”‚ â”‚ +<details>
â”‚ â”‚ +<summary>Click to show the result</summary>
â”‚ â”‚ +
â”‚ â”‚ +```json
â”‚ â”‚ +{
â”‚ â”‚ +    "type": "object",
â”‚ â”‚ +    "title": "FooBar",
â”‚ â”‚ +    "properties": {
â”‚ â”‚ +        "foo": {
â”‚ â”‚ +            "type": "array",
â”‚ â”‚ +            "items": {
â”‚ â”‚ +                "type": "string"
â”‚ â”‚ +            }
â”‚ â”‚ +        },
â”‚ â”‚ +        "bar": {
â”‚ â”‚ +            "type": "string"
â”‚ â”‚ +        }
â”‚ â”‚ +    },
â”‚ â”‚ +    "additionalProperties": false,
â”‚ â”‚ +    "required": [
â”‚ â”‚ +        "foo",
â”‚ â”‚ +        "bar"
â”‚ â”‚ +    ]
â”‚ â”‚ +}
â”‚ â”‚ +```
â”‚ â”‚ +</details>
â”‚ â”‚   --- mashumaro-3.5/README.md
â”‚ â”œâ”€â”€ +++ mashumaro-3.6/README.md
â”‚ â”‚â”„ Files 8% similar despite different names
â”‚ â”‚ @@ -1,22 +1,29 @@
â”‚ â”‚ -# mashumaro (ãƒã‚·ãƒ¥ãƒãƒ­)
â”‚ â”‚ +# mashumaro
â”‚ â”‚  
â”‚ â”‚ -> **mashumaro** is a fast and well tested serialization framework on top of dataclasses.
â”‚ â”‚ +###### Fast and well tested serialization library on top of dataclasses
â”‚ â”‚  
â”‚ â”‚  [![Build Status](https://github.com/Fatal1ty/mashumaro/workflows/tests/badge.svg)](https://github.com/Fatal1ty/mashumaro/actions)
â”‚ â”‚  [![Coverage Status](https://coveralls.io/repos/github/Fatal1ty/mashumaro/badge.svg?branch=master)](https://coveralls.io/github/Fatal1ty/mashumaro?branch=master)
â”‚ â”‚  [![Latest Version](https://img.shields.io/pypi/v/mashumaro.svg)](https://pypi.python.org/pypi/mashumaro)
â”‚ â”‚  [![Python Version](https://img.shields.io/pypi/pyversions/mashumaro.svg)](https://pypi.python.org/pypi/mashumaro)
â”‚ â”‚  [![License](https://img.shields.io/badge/License-Apache%202.0-blue.svg)](https://opensource.org/licenses/Apache-2.0)
â”‚ â”‚  
â”‚ â”‚ -
â”‚ â”‚ -When using dataclasses, you often need to dump and load objects according to
â”‚ â”‚ -the described scheme.
â”‚ â”‚ -This framework not only adds this ability to serialize in different formats,
â”‚ â”‚ -but also makes **serialization rapidly**.
â”‚ â”‚ +When using dataclasses, you often need to dump and load objects based on the
â”‚ â”‚ +schema you have. Mashumaro not only lets you save and load things in different
â”‚ â”‚ +ways, but it also does it _super quick_.
â”‚ â”‚ +
â”‚ â”‚ +**Key features**
â”‚ â”‚ +* ğŸš€ One of the fastest libraries
â”‚ â”‚ +* â˜ï¸ Mature and time-tested
â”‚ â”‚ +* ğŸ‘¶ Easy to use out of the box
â”‚ â”‚ +* âš™ï¸ Highly customizable
â”‚ â”‚ +* ğŸ‰ Built-in support for JSON, YAML, MessagePack, TOML
â”‚ â”‚ +* ğŸ“¦ Built-in support for almost all Python types including typing-extensions
â”‚ â”‚ +* ğŸ“ JSON Schema generation
â”‚ â”‚  
â”‚ â”‚  Table of contents
â”‚ â”‚  --------------------------------------------------------------------------------
â”‚ â”‚  * [Installation](#installation)
â”‚ â”‚  * [Changelog](#changelog)
â”‚ â”‚  * [Supported serialization formats](#supported-serialization-formats)
â”‚ â”‚  * [Supported data types](#supported-data-types)
â”‚ â”‚ @@ -67,14 +74,19 @@
â”‚ â”‚        * [Generic dataclass in a field type](#generic-dataclass-in-a-field-type)
â”‚ â”‚      * [`GenericSerializableType` interface](#genericserializabletype-interface)
â”‚ â”‚      * [Serialization hooks](#serialization-hooks)
â”‚ â”‚          * [Before deserialization](#before-deserialization)
â”‚ â”‚          * [After deserialization](#after-deserialization)
â”‚ â”‚          * [Before serialization](#before-serialization)
â”‚ â”‚          * [After serialization](#after-serialization)
â”‚ â”‚ +* [JSON Schema](#json-schema)
â”‚ â”‚ +    * [Building JSON Schema](#building-json-schema)
â”‚ â”‚ +    * [JSON Schema constraints](#json-schema-constraints)
â”‚ â”‚ +    * [Extending JSON Schema](#extending-json-schema)
â”‚ â”‚ +    * [JSON Schema and custom serialization methods](#json-schema-and-custom-serialization-methods)
â”‚ â”‚  
â”‚ â”‚  Installation
â”‚ â”‚  --------------------------------------------------------------------------------
â”‚ â”‚  
â”‚ â”‚  Use pip to install:
â”‚ â”‚  ```shell
â”‚ â”‚  $ pip install mashumaro
â”‚ â”‚ @@ -88,15 +100,15 @@
â”‚ â”‚  
â”‚ â”‚  This project follows the principles of [Semantic Versioning](https://semver.org).
â”‚ â”‚  Changelog is available on [GitHub Releases page](https://github.com/Fatal1ty/mashumaro/releases).
â”‚ â”‚  
â”‚ â”‚  Supported serialization formats
â”‚ â”‚  --------------------------------------------------------------------------------
â”‚ â”‚  
â”‚ â”‚ -This framework adds methods for dumping to and loading from the
â”‚ â”‚ +This library adds methods for dumping to and loading from the
â”‚ â”‚  following formats:
â”‚ â”‚  
â”‚ â”‚  * [plain dict](https://docs.python.org/3/library/stdtypes.html#mapping-types-dict)
â”‚ â”‚  * [JSON](https://www.json.org)
â”‚ â”‚  * [YAML](https://yaml.org)
â”‚ â”‚  * [MessagePack](https://msgpack.org)
â”‚ â”‚  * [TOML](https://toml.io)
â”‚ â”‚ @@ -262,15 +274,15 @@
â”‚ â”‚  json_string = my_portfolio.to_json()
â”‚ â”‚  Portfolio.from_json(json_string)  # same as my_portfolio
â”‚ â”‚  ```
â”‚ â”‚  
â”‚ â”‚  How does it work?
â”‚ â”‚  --------------------------------------------------------------------------------
â”‚ â”‚  
â”‚ â”‚ -This framework works by taking the schema of the data and generating a
â”‚ â”‚ +This library works by taking the schema of the data and generating a
â”‚ â”‚  specific parser and builder for exactly that schema, taking into account the
â”‚ â”‚  specifics of the serialization format. This is much faster than inspection of
â”‚ â”‚  field types on every call of parsing or building at runtime.
â”‚ â”‚  
â”‚ â”‚  These specific parsers and builders are presented by the corresponding
â”‚ â”‚  `from_*` and `to_*` methods. They are compiled during import time (or at
â”‚ â”‚  runtime in some cases) and are set as attributes to your dataclasses.
â”‚ â”‚ @@ -289,15 +301,15 @@
â”‚ â”‚  <img src="https://raw.githubusercontent.com/Fatal1ty/mashumaro/master/benchmark/charts/load.png" width="400"><img src="https://raw.githubusercontent.com/Fatal1ty/mashumaro/master/benchmark/charts/dump.png" width="400">
â”‚ â”‚  
â”‚ â”‚  <table>
â”‚ â”‚    <col>
â”‚ â”‚    <colgroup span="2"></colgroup>
â”‚ â”‚    <colgroup span="2"></colgroup>
â”‚ â”‚    <tr>
â”‚ â”‚ -    <th rowspan="2">Framework</th>
â”‚ â”‚ +    <th rowspan="2">Library</th>
â”‚ â”‚      <th colspan="2" scope="colgroup">From dict</th>
â”‚ â”‚      <th colspan="2" scope="colgroup">To dict</th>
â”‚ â”‚  </tr>
â”‚ â”‚  <tr>
â”‚ â”‚      <th scope="col">Time</th>
â”‚ â”‚      <th scope="col">Slowdown factor</th>
â”‚ â”‚      <th scope="col">Time</th>
â”‚ â”‚ @@ -493,14 +505,15 @@
â”‚ â”‚  * Turn an existing regular or generic class into a serializable one
â”‚ â”‚  by inheriting the [`SerializableType`](#serializabletype-interface) class
â”‚ â”‚  * Write different serialization strategies for an existing regular or generic type that is not under your control
â”‚ â”‚  using [`SerializationStrategy`](#serializationstrategy) class
â”‚ â”‚  * Define serialization / deserialization methods:
â”‚ â”‚    * for a specific dataclass field by using [field options](#field-options)
â”‚ â”‚    * for a specific data type used in the dataclass by using [`Config`](#config-options) class
â”‚ â”‚ +* Alter input and output data with serialization / deserialization [hooks](#serialization-hooks)
â”‚ â”‚  * Separate serialization scheme from a dataclass in a reusable manner using [dialects](#dialects)
â”‚ â”‚  * Choose from predefined serialization engines for the specific data types, e.g. `datetime` and `NamedTuple`
â”‚ â”‚  
â”‚ â”‚  ### SerializableType interface
â”‚ â”‚  
â”‚ â”‚  If you have a custom class or hierarchy of classes whose instances you want
â”‚ â”‚  to serialize with `mashumaro`, the first option is to implement
â”‚ â”‚ @@ -759,15 +772,15 @@
â”‚ â”‚  #### Third-party generic types
â”‚ â”‚  
â”‚ â”‚  To create a generic version of a serialization strategy you need to follow these steps:
â”‚ â”‚  * inherit [`Generic[...]`](https://docs.python.org/3/library/typing.html#typing.Generic) type
â”‚ â”‚  with the number of parameters matching the number of parameters
â”‚ â”‚  of the target generic type
â”‚ â”‚  * Write generic annotations for `serialize` method's return type and for `deserialize` method's argument type
â”‚ â”‚ -* Use the origin type of the target generic type in the [`serialization_strategy`](#serializationstrategy-config-option) config section
â”‚ â”‚ +* Use the origin type of the target generic type in the [`serialization_strategy`](#serialization_strategy-config-option) config section
â”‚ â”‚  ([`typing.get_origin`](https://docs.python.org/3/library/typing.html#typing.get_origin) might be helpful)
â”‚ â”‚  
â”‚ â”‚  There is no need to add `use_annotations=True` here because it's enabled implicitly
â”‚ â”‚  for generic serialization strategies.
â”‚ â”‚  
â”‚ â”‚  For example, there is a third-party [multidict](https://pypi.org/project/multidict/) package that has a generic `MultiDict` type.
â”‚ â”‚  A generic serialization strategy for it might look like this:
â”‚ â”‚ @@ -1744,7 +1757,440 @@
â”‚ â”‚          d.pop('password')
â”‚ â”‚          return d
â”‚ â”‚  
â”‚ â”‚  obj = DataClass(user="name", password="secret")
â”‚ â”‚  print(obj.to_dict())  # {"user": "name"}
â”‚ â”‚  print(obj.to_json())  # '{"user": "name"}'
â”‚ â”‚  ```
â”‚ â”‚ +
â”‚ â”‚ +JSON Schema
â”‚ â”‚ +--------------------------------------------------------------------------------
â”‚ â”‚ +
â”‚ â”‚ +You can build JSON Schema not only for dataclasses but also for any other
â”‚ â”‚ +[supported](#supported-data-types) data
â”‚ â”‚ +types. There is support for the following standards:
â”‚ â”‚ +* [Draft 2022-12](https://json-schema.org/specification.html)
â”‚ â”‚ +* [OpenAPI Specification 3.1.0](https://swagger.io/specification/)
â”‚ â”‚ +
â”‚ â”‚ +### Building JSON Schema
â”‚ â”‚ +
â”‚ â”‚ +For simple one-time cases it's recommended to start from using a configurable
â”‚ â”‚ +`build_json_schema` function. It returns `JSONSchema` object that can be
â”‚ â”‚ +serialized to json or to dict:
â”‚ â”‚ +
â”‚ â”‚ +```python
â”‚ â”‚ +from dataclasses import dataclass
â”‚ â”‚ +from typing import List
â”‚ â”‚ +from uuid import UUID
â”‚ â”‚ +
â”‚ â”‚ +from mashumaro.jsonschema import build_json_schema
â”‚ â”‚ +
â”‚ â”‚ +
â”‚ â”‚ +@dataclass
â”‚ â”‚ +class User:
â”‚ â”‚ +    id: UUID
â”‚ â”‚ +    name: str
â”‚ â”‚ +
â”‚ â”‚ +
â”‚ â”‚ +print(build_json_schema(List[User]).to_json())
â”‚ â”‚ +```
â”‚ â”‚ +
â”‚ â”‚ +<details>
â”‚ â”‚ +<summary>Click to show the result</summary>
â”‚ â”‚ +
â”‚ â”‚ +```json
â”‚ â”‚ +{
â”‚ â”‚ +    "type": "array",
â”‚ â”‚ +    "items": {
â”‚ â”‚ +        "type": "object",
â”‚ â”‚ +        "title": "User",
â”‚ â”‚ +        "properties": {
â”‚ â”‚ +            "id": {
â”‚ â”‚ +                "type": "string",
â”‚ â”‚ +                "format": "uuid"
â”‚ â”‚ +            },
â”‚ â”‚ +            "name": {
â”‚ â”‚ +                "type": "string"
â”‚ â”‚ +            }
â”‚ â”‚ +        },
â”‚ â”‚ +        "additionalProperties": false,
â”‚ â”‚ +        "required": [
â”‚ â”‚ +            "id",
â”‚ â”‚ +            "name"
â”‚ â”‚ +        ]
â”‚ â”‚ +    }
â”‚ â”‚ +}
â”‚ â”‚ +```
â”‚ â”‚ +</details>
â”‚ â”‚ +
â”‚ â”‚ +Additional validation keywords ([see below](#json-schema-constraints))
â”‚ â”‚ +can be added using annotations:
â”‚ â”‚ +
â”‚ â”‚ +```python
â”‚ â”‚ +from typing import Annotated, List
â”‚ â”‚ +from mashumaro.jsonschema import build_json_schema
â”‚ â”‚ +from mashumaro.jsonschema.annotations import Maximum, MaxItems
â”‚ â”‚ +
â”‚ â”‚ +print(
â”‚ â”‚ +    build_json_schema(
â”‚ â”‚ +        Annotated[
â”‚ â”‚ +            List[Annotated[int, Maximum(42)]],
â”‚ â”‚ +            MaxItems(4)
â”‚ â”‚ +        ]
â”‚ â”‚ +    ).to_json()
â”‚ â”‚ +)
â”‚ â”‚ +```
â”‚ â”‚ +
â”‚ â”‚ +<details>
â”‚ â”‚ +<summary>Click to show the result</summary>
â”‚ â”‚ +
â”‚ â”‚ +```json
â”‚ â”‚ +{
â”‚ â”‚ +    "type": "array",
â”‚ â”‚ +    "items": {
â”‚ â”‚ +        "type": "integer",
â”‚ â”‚ +        "maximum": 42
â”‚ â”‚ +    },
â”‚ â”‚ +    "maxItems": 4
â”‚ â”‚ +}
â”‚ â”‚ +```
â”‚ â”‚ +</details>
â”‚ â”‚ +
â”‚ â”‚ +The [`$schema`](https://json-schema.org/draft/2020-12/json-schema-core.html#name-the-schema-keyword)
â”‚ â”‚ +keyword can be added by setting `with_dialect_uri` to True:
â”‚ â”‚ +
â”‚ â”‚ +```python
â”‚ â”‚ +print(build_json_schema(str, with_dialect_uri=True).to_json())
â”‚ â”‚ +```
â”‚ â”‚ +
â”‚ â”‚ +<details>
â”‚ â”‚ +<summary>Click to show the result</summary>
â”‚ â”‚ +
â”‚ â”‚ +```json
â”‚ â”‚ +{
â”‚ â”‚ +    "$schema": "https://json-schema.org/draft/2020-12/schema",
â”‚ â”‚ +    "type": "string"
â”‚ â”‚ +}
â”‚ â”‚ +```
â”‚ â”‚ +</details>
â”‚ â”‚ +
â”‚ â”‚ +By default, Draft 2022-12 dialect is being used, but you can change it to
â”‚ â”‚ +another one by setting `dialect` parameter:
â”‚ â”‚ +
â”‚ â”‚ +```python
â”‚ â”‚ +from mashumaro.jsonschema import OPEN_API_3_1
â”‚ â”‚ +
â”‚ â”‚ +print(
â”‚ â”‚ +    build_json_schema(
â”‚ â”‚ +        str, dialect=OPEN_API_3_1, with_dialect_uri=True
â”‚ â”‚ +    ).to_json()
â”‚ â”‚ +)
â”‚ â”‚ +```
â”‚ â”‚ +
â”‚ â”‚ +<details>
â”‚ â”‚ +<summary>Click to show the result</summary>
â”‚ â”‚ +
â”‚ â”‚ +```json
â”‚ â”‚ +{
â”‚ â”‚ +    "$schema": "https://spec.openapis.org/oas/3.1/dialect/base",
â”‚ â”‚ +    "type": "string"
â”‚ â”‚ +}
â”‚ â”‚ +```
â”‚ â”‚ +</details>
â”‚ â”‚ +
â”‚ â”‚ +All dataclass JSON Schemas can or can not be placed in the
â”‚ â”‚ +[definitions](https://json-schema.org/draft/2020-12/json-schema-core.html#name-schema-re-use-with-defs)
â”‚ â”‚ +section, depending on the `all_refs` parameter, which default value comes
â”‚ â”‚ +from a dialect used (`False` for Draft 2022-12, `True` for OpenAPI
â”‚ â”‚ +Specification 3.1.0):
â”‚ â”‚ +
â”‚ â”‚ +```python
â”‚ â”‚ +print(build_json_schema(List[User], all_refs=True).to_json())
â”‚ â”‚ +```
â”‚ â”‚ +<details>
â”‚ â”‚ +<summary>Click to show the result</summary>
â”‚ â”‚ +
â”‚ â”‚ +```json
â”‚ â”‚ +{
â”‚ â”‚ +    "type": "array",
â”‚ â”‚ +    "$defs": {
â”‚ â”‚ +        "User": {
â”‚ â”‚ +            "type": "object",
â”‚ â”‚ +            "title": "User",
â”‚ â”‚ +            "properties": {
â”‚ â”‚ +                "id": {
â”‚ â”‚ +                    "type": "string",
â”‚ â”‚ +                    "format": "uuid"
â”‚ â”‚ +                },
â”‚ â”‚ +                "name": {
â”‚ â”‚ +                    "type": "string"
â”‚ â”‚ +                }
â”‚ â”‚ +            },
â”‚ â”‚ +            "additionalProperties": false,
â”‚ â”‚ +            "required": [
â”‚ â”‚ +                "id",
â”‚ â”‚ +                "name"
â”‚ â”‚ +            ]
â”‚ â”‚ +        }
â”‚ â”‚ +    },
â”‚ â”‚ +    "items": {
â”‚ â”‚ +        "$ref": "#/defs/User"
â”‚ â”‚ +    }
â”‚ â”‚ +}
â”‚ â”‚ +```
â”‚ â”‚ +</details>
â”‚ â”‚ +
â”‚ â”‚ +The definitions section can be omitted from the final document by setting
â”‚ â”‚ +`with_definitions` parameter to `False`:
â”‚ â”‚ +
â”‚ â”‚ +```python
â”‚ â”‚ +print(
â”‚ â”‚ +    build_json_schema(
â”‚ â”‚ +        List[User], dialect=OPEN_API_3_1, with_definitions=False
â”‚ â”‚ +    ).to_json()
â”‚ â”‚ +)
â”‚ â”‚ +```
â”‚ â”‚ +
â”‚ â”‚ +<details>
â”‚ â”‚ +<summary>Click to show the result</summary>
â”‚ â”‚ +
â”‚ â”‚ +```json
â”‚ â”‚ +{
â”‚ â”‚ +    "type": "array",
â”‚ â”‚ +    "items": {
â”‚ â”‚ +        "$ref": "#/components/schemas/User"
â”‚ â”‚ +    }
â”‚ â”‚ +}
â”‚ â”‚ +```
â”‚ â”‚ +</details>
â”‚ â”‚ +
â”‚ â”‚ +These omitted definitions could be found later in the `Context` object that
â”‚ â”‚ +you could have created and passed to the function, but it could be easier
â”‚ â”‚ +to use `JSONSchemaBuilder` for that. For example, you might found it handy
â”‚ â”‚ +to build OpenAPI Specification step by step passing your models to the builder
â”‚ â”‚ +and get all the registered definitions later. This builder has reasonable
â”‚ â”‚ +defaults but can be customized if necessary.
â”‚ â”‚ +
â”‚ â”‚ +```python
â”‚ â”‚ +from mashumaro.jsonschema import JSONSchemaBuilder, OPEN_API_3_1
â”‚ â”‚ +
â”‚ â”‚ +builder = JSONSchemaBuilder(OPEN_API_3_1)
â”‚ â”‚ +
â”‚ â”‚ +@dataclass
â”‚ â”‚ +class User:
â”‚ â”‚ +    id: UUID
â”‚ â”‚ +    name: str
â”‚ â”‚ +
â”‚ â”‚ +@dataclass
â”‚ â”‚ +class Device:
â”‚ â”‚ +    id: UUID
â”‚ â”‚ +    model: str
â”‚ â”‚ +
â”‚ â”‚ +print(builder.build(List[User]).to_json())
â”‚ â”‚ +print(builder.build(List[Device]).to_json())
â”‚ â”‚ +print(builder.get_definitions().to_json())
â”‚ â”‚ +```
â”‚ â”‚ +
â”‚ â”‚ +<details>
â”‚ â”‚ +<summary>Click to show the result</summary>
â”‚ â”‚ +
â”‚ â”‚ +```json
â”‚ â”‚ +{
â”‚ â”‚ +    "type": "array",
â”‚ â”‚ +    "items": {
â”‚ â”‚ +        "$ref": "#/components/schemas/User"
â”‚ â”‚ +    }
â”‚ â”‚ +}
â”‚ â”‚ +```
â”‚ â”‚ +```json
â”‚ â”‚ +{
â”‚ â”‚ +    "type": "array",
â”‚ â”‚ +    "items": {
â”‚ â”‚ +        "$ref": "#/components/schemas/Device"
â”‚ â”‚ +    }
â”‚ â”‚ +}
â”‚ â”‚ +```
â”‚ â”‚ +```json
â”‚ â”‚ +{
â”‚ â”‚ +    "User": {
â”‚ â”‚ +        "type": "object",
â”‚ â”‚ +        "title": "User",
â”‚ â”‚ +        "properties": {
â”‚ â”‚ +            "id": {
â”‚ â”‚ +                "type": "string",
â”‚ â”‚ +                "format": "uuid"
â”‚ â”‚ +            },
â”‚ â”‚ +            "name": {
â”‚ â”‚ +                "type": "string"
â”‚ â”‚ +            }
â”‚ â”‚ +        },
â”‚ â”‚ +        "additionalProperties": false,
â”‚ â”‚ +        "required": [
â”‚ â”‚ +            "id",
â”‚ â”‚ +            "name"
â”‚ â”‚ +        ]
â”‚ â”‚ +    },
â”‚ â”‚ +    "Device": {
â”‚ â”‚ +        "type": "object",
â”‚ â”‚ +        "title": "Device",
â”‚ â”‚ +        "properties": {
â”‚ â”‚ +            "id": {
â”‚ â”‚ +                "type": "string",
â”‚ â”‚ +                "format": "uuid"
â”‚ â”‚ +            },
â”‚ â”‚ +            "model": {
â”‚ â”‚ +                "type": "string"
â”‚ â”‚ +            }
â”‚ â”‚ +        },
â”‚ â”‚ +        "additionalProperties": false,
â”‚ â”‚ +        "required": [
â”‚ â”‚ +            "id",
â”‚ â”‚ +            "model"
â”‚ â”‚ +        ]
â”‚ â”‚ +    }
â”‚ â”‚ +}
â”‚ â”‚ +```
â”‚ â”‚ +</details>
â”‚ â”‚ +
â”‚ â”‚ +### JSON Schema constraints
â”‚ â”‚ +
â”‚ â”‚ +Apart from required keywords, that are added automatically for certain data
â”‚ â”‚ +types, you're free to use additional validation keywords.
â”‚ â”‚ +They're presented by the corresponding classes in
â”‚ â”‚ +[`mashumaro.jsonschema.annotations`](https://github.com/Fatal1ty/mashumaro/blob/master/mashumaro/jsonschema/annotations.py):
â”‚ â”‚ +
â”‚ â”‚ +Number constraints:
â”‚ â”‚ +* [`Minimum`](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-minimum)
â”‚ â”‚ +* [`Maximum`](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-maximum)
â”‚ â”‚ +* [`ExclusiveMinimum`](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-exclusiveminimum)
â”‚ â”‚ +* [`ExclusiveMaximum`](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-exclusivemaximum)
â”‚ â”‚ +* [`MultipleOf`](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-multipleof)
â”‚ â”‚ +
â”‚ â”‚ +String constraints:
â”‚ â”‚ +* [`MinLength`](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-minlength)
â”‚ â”‚ +* [`MaxLength`](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-maxlength)
â”‚ â”‚ +* [`Pattern`](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-pattern)
â”‚ â”‚ +
â”‚ â”‚ +Array constraints:
â”‚ â”‚ +* [`MinItems`](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-minitems)
â”‚ â”‚ +* [`MaxItems`](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-maxitems)
â”‚ â”‚ +* [`UniqueItems`](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-uniqueitems)
â”‚ â”‚ +* [`Contains`](https://json-schema.org/draft/2020-12/json-schema-core.html#name-contains)
â”‚ â”‚ +* [`MinContains`](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-mincontains)
â”‚ â”‚ +* [`MaxContains`](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-maxcontains)
â”‚ â”‚ +
â”‚ â”‚ +Object constraints:
â”‚ â”‚ +* [`MaxProperties`](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-maxproperties)
â”‚ â”‚ +* [`MinProperties`](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-minproperties)
â”‚ â”‚ +* [`DependentRequired`](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-dependentrequired)
â”‚ â”‚ +
â”‚ â”‚ +### Extending JSON Schema
â”‚ â”‚ +
â”‚ â”‚ +Using a `Config` class it is possible to override some parts of the schema.
â”‚ â”‚ +Currently, it works for dataclass fields via "properties" key:
â”‚ â”‚ +
â”‚ â”‚ +```python
â”‚ â”‚ +from dataclasses import dataclass
â”‚ â”‚ +from mashumaro.jsonschema import build_json_schema
â”‚ â”‚ +
â”‚ â”‚ +@dataclass
â”‚ â”‚ +class FooBar:
â”‚ â”‚ +    foo: str
â”‚ â”‚ +    bar: int
â”‚ â”‚ +
â”‚ â”‚ +    class Config:
â”‚ â”‚ +        json_schema = {
â”‚ â”‚ +            "properties": {
â”‚ â”‚ +                "foo": {
â”‚ â”‚ +                    "type": "string",
â”‚ â”‚ +                    "description": "bar"
â”‚ â”‚ +                }
â”‚ â”‚ +            }
â”‚ â”‚ +        }
â”‚ â”‚ +
â”‚ â”‚ +print(build_json_schema(FooBar).to_json())
â”‚ â”‚ +```
â”‚ â”‚ +
â”‚ â”‚ +<details>
â”‚ â”‚ +<summary>Click to show the result</summary>
â”‚ â”‚ +
â”‚ â”‚ +```json
â”‚ â”‚ +{
â”‚ â”‚ +    "type": "object",
â”‚ â”‚ +    "title": "FooBar",
â”‚ â”‚ +    "properties": {
â”‚ â”‚ +        "foo": {
â”‚ â”‚ +            "type": "string",
â”‚ â”‚ +            "description": "bar"
â”‚ â”‚ +        },
â”‚ â”‚ +        "bar": {
â”‚ â”‚ +            "type": "integer"
â”‚ â”‚ +        }
â”‚ â”‚ +    },
â”‚ â”‚ +    "additionalProperties": false,
â”‚ â”‚ +    "required": [
â”‚ â”‚ +        "foo",
â”‚ â”‚ +        "bar"
â”‚ â”‚ +    ]
â”‚ â”‚ +}
â”‚ â”‚ +```
â”‚ â”‚ +</details>
â”‚ â”‚ +
â”‚ â”‚ +### JSON Schema and custom serialization methods
â”‚ â”‚ +
â”‚ â”‚ +Mashumaro provides different ways to override default serialization methods for
â”‚ â”‚ +dataclass fields or specific data types. In order for these overrides to be
â”‚ â”‚ +reflected in the schema, you need to make sure that the methods have
â”‚ â”‚ +annotations of the return value type.
â”‚ â”‚ +
â”‚ â”‚ +```python
â”‚ â”‚ +from dataclasses import dataclass, field
â”‚ â”‚ +from mashumaro.config import BaseConfig
â”‚ â”‚ +from mashumaro.jsonschema import build_json_schema
â”‚ â”‚ +
â”‚ â”‚ +def str_as_list(s: str) -> list[str]:
â”‚ â”‚ +    return list(s)
â”‚ â”‚ +
â”‚ â”‚ +def int_as_str(i: int) -> str:
â”‚ â”‚ +    return str(i)
â”‚ â”‚ +
â”‚ â”‚ +@dataclass
â”‚ â”‚ +class FooBar:
â”‚ â”‚ +    foo: str = field(metadata={"serialize": str_as_list})
â”‚ â”‚ +    bar: int
â”‚ â”‚ +
â”‚ â”‚ +    class Config(BaseConfig):
â”‚ â”‚ +        serialization_strategy = {
â”‚ â”‚ +            int: {
â”‚ â”‚ +                "serialize": int_as_str
â”‚ â”‚ +            }
â”‚ â”‚ +        }
â”‚ â”‚ +
â”‚ â”‚ +print(build_json_schema(FooBar).to_json())
â”‚ â”‚ +```
â”‚ â”‚ +
â”‚ â”‚ +<details>
â”‚ â”‚ +<summary>Click to show the result</summary>
â”‚ â”‚ +
â”‚ â”‚ +```json
â”‚ â”‚ +{
â”‚ â”‚ +    "type": "object",
â”‚ â”‚ +    "title": "FooBar",
â”‚ â”‚ +    "properties": {
â”‚ â”‚ +        "foo": {
â”‚ â”‚ +            "type": "array",
â”‚ â”‚ +            "items": {
â”‚ â”‚ +                "type": "string"
â”‚ â”‚ +            }
â”‚ â”‚ +        },
â”‚ â”‚ +        "bar": {
â”‚ â”‚ +            "type": "string"
â”‚ â”‚ +        }
â”‚ â”‚ +    },
â”‚ â”‚ +    "additionalProperties": false,
â”‚ â”‚ +    "required": [
â”‚ â”‚ +        "foo",
â”‚ â”‚ +        "bar"
â”‚ â”‚ +    ]
â”‚ â”‚ +}
â”‚ â”‚ +```
â”‚ â”‚ +</details>
â”‚ â”‚   --- mashumaro-3.5/mashumaro/config.py
â”‚ â”œâ”€â”€ +++ mashumaro-3.6/mashumaro/config.py
â”‚ â”‚â”„ Files 9% similar despite different names
â”‚ â”‚ @@ -43,7 +43,8 @@
â”‚ â”‚      aliases: Dict[str, str] = {}
â”‚ â”‚      serialize_by_alias: bool = False
â”‚ â”‚      namedtuple_as_dict: bool = False
â”‚ â”‚      allow_postponed_evaluation: bool = True
â”‚ â”‚      dialect: Optional[Type[Dialect]] = None
â”‚ â”‚      omit_none: Union[bool, Literal[Sentinel.MISSING]] = Sentinel.MISSING
â”‚ â”‚      orjson_options: Optional[int] = 0
â”‚ â”‚ +    json_schema: Dict[str, Any] = {}
â”‚ â”‚   --- mashumaro-3.5/mashumaro/core/const.py
â”‚ â”œâ”€â”€ +++ mashumaro-3.6/mashumaro/core/const.py
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- mashumaro-3.5/mashumaro/core/helpers.py
â”‚ â”œâ”€â”€ +++ mashumaro-3.6/mashumaro/core/helpers.py
â”‚ â”‚â”„ Files 17% similar despite different names
â”‚ â”‚ @@ -1,19 +1,23 @@
â”‚ â”‚  import datetime
â”‚ â”‚  import re
â”‚ â”‚  
â”‚ â”‚  __all__ = [
â”‚ â”‚      "parse_timezone",
â”‚ â”‚      "ConfigValue",
â”‚ â”‚ +    "UTC_OFFSET_PATTERN",
â”‚ â”‚  ]
â”‚ â”‚  
â”‚ â”‚  
â”‚ â”‚ +UTC_OFFSET_PATTERN = r"^UTC(([+-][0-2][0-9]):([0-5][0-9]))?$"
â”‚ â”‚ +UTC_OFFSET_RE = re.compile(UTC_OFFSET_PATTERN)
â”‚ â”‚ +
â”‚ â”‚ +
â”‚ â”‚  def parse_timezone(s: str) -> datetime.timezone:
â”‚ â”‚ -    regexp = re.compile(r"^UTC(([+-][0-2][0-9]):([0-5][0-9]))?$")
â”‚ â”‚ -    match = regexp.match(s)
â”‚ â”‚ +    match = UTC_OFFSET_RE.match(s)
â”‚ â”‚      if not match:
â”‚ â”‚          raise ValueError(
â”‚ â”‚              f"Time zone {s} must be either UTC " f"or in format UTC[+-]hh:mm"
â”‚ â”‚          )
â”‚ â”‚      if match.group(1):
â”‚ â”‚          hours = int(match.group(2))
â”‚ â”‚          minutes = int(match.group(3))
â”‚ â”‚   --- mashumaro-3.5/mashumaro/core/meta/code/builder.py
â”‚ â”œâ”€â”€ +++ mashumaro-3.6/mashumaro/core/meta/code/builder.py
â”‚ â”‚â”„ Files 0% similar despite different names
â”‚ â”‚ @@ -4,14 +4,16 @@
â”‚ â”‚  import typing
â”‚ â”‚  from contextlib import contextmanager
â”‚ â”‚  
â”‚ â”‚  # noinspection PyProtectedMember
â”‚ â”‚  from dataclasses import _FIELDS, MISSING, Field, is_dataclass  # type: ignore
â”‚ â”‚  from functools import lru_cache
â”‚ â”‚  
â”‚ â”‚ +import typing_extensions
â”‚ â”‚ +
â”‚ â”‚  from mashumaro.config import (
â”‚ â”‚      ADD_DIALECT_SUPPORT,
â”‚ â”‚      TO_DICT_ADD_BY_ALIAS_FLAG,
â”‚ â”‚      TO_DICT_ADD_OMIT_NONE_FLAG,
â”‚ â”‚      BaseConfig,
â”‚ â”‚      SerializationStrategyValueType,
â”‚ â”‚  )
â”‚ â”‚ @@ -107,19 +109,21 @@
â”‚ â”‚          return self.cls.__dict__
â”‚ â”‚  
â”‚ â”‚      @property
â”‚ â”‚      def annotations(self) -> typing.Dict[str, typing.Any]:
â”‚ â”‚          return self.namespace.get("__annotations__", {})
â”‚ â”‚  
â”‚ â”‚      def __get_field_types(
â”‚ â”‚ -        self, recursive: bool = True
â”‚ â”‚ +        self, recursive: bool = True, include_extras: bool = False
â”‚ â”‚      ) -> typing.Dict[str, typing.Any]:
â”‚ â”‚          fields = {}
â”‚ â”‚          try:
â”‚ â”‚ -            field_type_hints = typing.get_type_hints(self.cls)
â”‚ â”‚ +            field_type_hints = typing_extensions.get_type_hints(
â”‚ â”‚ +                self.cls, include_extras=include_extras
â”‚ â”‚ +            )
â”‚ â”‚          except NameError as e:
â”‚ â”‚              name = get_name_error_name(e)
â”‚ â”‚              raise UnresolvedTypeReferenceError(self.cls, name) from None
â”‚ â”‚          for fname, ftype in field_type_hints.items():
â”‚ â”‚              if is_class_var(ftype) or is_init_var(ftype):
â”‚ â”‚                  continue
â”‚ â”‚              if recursive or fname in self.annotations:
â”‚ â”‚ @@ -146,14 +150,19 @@
â”‚ â”‚          cls = self._get_field_class(field_name)
â”‚ â”‚          return self.resolved_type_params[cls]
â”‚ â”‚  
â”‚ â”‚      @property
â”‚ â”‚      def field_types(self) -> typing.Dict[str, typing.Any]:
â”‚ â”‚          return self.__get_field_types()
â”‚ â”‚  
â”‚ â”‚ +    def get_field_types(
â”‚ â”‚ +        self, include_extras: bool = False
â”‚ â”‚ +    ) -> typing.Dict[str, typing.Any]:
â”‚ â”‚ +        return self.__get_field_types(include_extras=include_extras)
â”‚ â”‚ +
â”‚ â”‚      @property  # type: ignore
â”‚ â”‚      @lru_cache()
â”‚ â”‚      def dataclass_fields(self) -> typing.Dict[str, Field]:
â”‚ â”‚          d = {}
â”‚ â”‚          for ancestor in self.cls.__mro__[-1:0:-1]:
â”‚ â”‚              if is_dataclass(ancestor):
â”‚ â”‚                  for field in getattr(ancestor, _FIELDS).values():
â”‚ â”‚   --- mashumaro-3.5/mashumaro/core/meta/code/lines.py
â”‚ â”œâ”€â”€ +++ mashumaro-3.6/mashumaro/core/meta/code/lines.py
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- mashumaro-3.5/mashumaro/core/meta/helpers.py
â”‚ â”œâ”€â”€ +++ mashumaro-3.6/mashumaro/core/meta/helpers.py
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- mashumaro-3.5/mashumaro/core/meta/mixin.py
â”‚ â”œâ”€â”€ +++ mashumaro-3.6/mashumaro/core/meta/mixin.py
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- mashumaro-3.5/mashumaro/core/meta/types/common.py
â”‚ â”œâ”€â”€ +++ mashumaro-3.6/mashumaro/core/meta/types/common.py
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- mashumaro-3.5/mashumaro/core/meta/types/pack.py
â”‚ â”œâ”€â”€ +++ mashumaro-3.6/mashumaro/core/meta/types/pack.py
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- mashumaro-3.5/mashumaro/core/meta/types/unpack.py
â”‚ â”œâ”€â”€ +++ mashumaro-3.6/mashumaro/core/meta/types/unpack.py
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- mashumaro-3.5/mashumaro/exceptions.py
â”‚ â”œâ”€â”€ +++ mashumaro-3.6/mashumaro/exceptions.py
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- mashumaro-3.5/mashumaro/helper.py
â”‚ â”œâ”€â”€ +++ mashumaro-3.6/mashumaro/helper.py
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- mashumaro-3.5/mashumaro/mixins/dict.py
â”‚ â”œâ”€â”€ +++ mashumaro-3.6/mashumaro/mixins/dict.py
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- mashumaro-3.5/mashumaro/mixins/json.py
â”‚ â”œâ”€â”€ +++ mashumaro-3.6/mashumaro/mixins/json.py
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- mashumaro-3.5/mashumaro/mixins/msgpack.py
â”‚ â”œâ”€â”€ +++ mashumaro-3.6/mashumaro/mixins/msgpack.py
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- mashumaro-3.5/mashumaro/mixins/orjson.py
â”‚ â”œâ”€â”€ +++ mashumaro-3.6/mashumaro/mixins/orjson.py
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- mashumaro-3.5/mashumaro/mixins/orjson.pyi
â”‚ â”œâ”€â”€ +++ mashumaro-3.6/mashumaro/mixins/orjson.pyi
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- mashumaro-3.5/mashumaro/mixins/toml.py
â”‚ â”œâ”€â”€ +++ mashumaro-3.6/mashumaro/mixins/toml.py
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- mashumaro-3.5/mashumaro/mixins/yaml.py
â”‚ â”œâ”€â”€ +++ mashumaro-3.6/mashumaro/mixins/yaml.py
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- mashumaro-3.5/mashumaro/types.py
â”‚ â”œâ”€â”€ +++ mashumaro-3.6/mashumaro/types.py
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- mashumaro-3.5/mashumaro.egg-info/PKG-INFO
â”‚ â”œâ”€â”€ +++ mashumaro-3.6/mashumaro.egg-info/PKG-INFO
â”‚ â”‚â”„ Files 3% similar despite different names
â”‚ â”‚ @@ -1,11 +1,11 @@
â”‚ â”‚  Metadata-Version: 2.1
â”‚ â”‚  Name: mashumaro
â”‚ â”‚ -Version: 3.5
â”‚ â”‚ -Summary: Fast serialization framework on top of dataclasses
â”‚ â”‚ +Version: 3.6
â”‚ â”‚ +Summary: Fast serialization library on top of dataclasses
â”‚ â”‚  Home-page: https://github.com/Fatal1ty/mashumaro
â”‚ â”‚  Author: Alexander Tikhonov
â”‚ â”‚  Author-email: random.gauss@gmail.com
â”‚ â”‚  License: Apache License, Version 2.0
â”‚ â”‚  Platform: all
â”‚ â”‚  Classifier: License :: OSI Approved :: Apache Software License
â”‚ â”‚  Classifier: Intended Audience :: Developers
â”‚ â”‚ @@ -20,29 +20,36 @@
â”‚ â”‚  Description-Content-Type: text/markdown
â”‚ â”‚  Provides-Extra: orjson
â”‚ â”‚  Provides-Extra: msgpack
â”‚ â”‚  Provides-Extra: yaml
â”‚ â”‚  Provides-Extra: toml
â”‚ â”‚  License-File: LICENSE
â”‚ â”‚  
â”‚ â”‚ -# mashumaro (ãƒã‚·ãƒ¥ãƒãƒ­)
â”‚ â”‚ +# mashumaro
â”‚ â”‚  
â”‚ â”‚ -> **mashumaro** is a fast and well tested serialization framework on top of dataclasses.
â”‚ â”‚ +###### Fast and well tested serialization library on top of dataclasses
â”‚ â”‚  
â”‚ â”‚  [![Build Status](https://github.com/Fatal1ty/mashumaro/workflows/tests/badge.svg)](https://github.com/Fatal1ty/mashumaro/actions)
â”‚ â”‚  [![Coverage Status](https://coveralls.io/repos/github/Fatal1ty/mashumaro/badge.svg?branch=master)](https://coveralls.io/github/Fatal1ty/mashumaro?branch=master)
â”‚ â”‚  [![Latest Version](https://img.shields.io/pypi/v/mashumaro.svg)](https://pypi.python.org/pypi/mashumaro)
â”‚ â”‚  [![Python Version](https://img.shields.io/pypi/pyversions/mashumaro.svg)](https://pypi.python.org/pypi/mashumaro)
â”‚ â”‚  [![License](https://img.shields.io/badge/License-Apache%202.0-blue.svg)](https://opensource.org/licenses/Apache-2.0)
â”‚ â”‚  
â”‚ â”‚ -
â”‚ â”‚ -When using dataclasses, you often need to dump and load objects according to
â”‚ â”‚ -the described scheme.
â”‚ â”‚ -This framework not only adds this ability to serialize in different formats,
â”‚ â”‚ -but also makes **serialization rapidly**.
â”‚ â”‚ +When using dataclasses, you often need to dump and load objects based on the
â”‚ â”‚ +schema you have. Mashumaro not only lets you save and load things in different
â”‚ â”‚ +ways, but it also does it _super quick_.
â”‚ â”‚ +
â”‚ â”‚ +**Key features**
â”‚ â”‚ +* ğŸš€ One of the fastest libraries
â”‚ â”‚ +* â˜ï¸ Mature and time-tested
â”‚ â”‚ +* ğŸ‘¶ Easy to use out of the box
â”‚ â”‚ +* âš™ï¸ Highly customizable
â”‚ â”‚ +* ğŸ‰ Built-in support for JSON, YAML, MessagePack, TOML
â”‚ â”‚ +* ğŸ“¦ Built-in support for almost all Python types including typing-extensions
â”‚ â”‚ +* ğŸ“ JSON Schema generation
â”‚ â”‚  
â”‚ â”‚  Table of contents
â”‚ â”‚  --------------------------------------------------------------------------------
â”‚ â”‚  * [Installation](#installation)
â”‚ â”‚  * [Changelog](#changelog)
â”‚ â”‚  * [Supported serialization formats](#supported-serialization-formats)
â”‚ â”‚  * [Supported data types](#supported-data-types)
â”‚ â”‚ @@ -93,14 +100,19 @@
â”‚ â”‚        * [Generic dataclass in a field type](#generic-dataclass-in-a-field-type)
â”‚ â”‚      * [`GenericSerializableType` interface](#genericserializabletype-interface)
â”‚ â”‚      * [Serialization hooks](#serialization-hooks)
â”‚ â”‚          * [Before deserialization](#before-deserialization)
â”‚ â”‚          * [After deserialization](#after-deserialization)
â”‚ â”‚          * [Before serialization](#before-serialization)
â”‚ â”‚          * [After serialization](#after-serialization)
â”‚ â”‚ +* [JSON Schema](#json-schema)
â”‚ â”‚ +    * [Building JSON Schema](#building-json-schema)
â”‚ â”‚ +    * [JSON Schema constraints](#json-schema-constraints)
â”‚ â”‚ +    * [Extending JSON Schema](#extending-json-schema)
â”‚ â”‚ +    * [JSON Schema and custom serialization methods](#json-schema-and-custom-serialization-methods)
â”‚ â”‚  
â”‚ â”‚  Installation
â”‚ â”‚  --------------------------------------------------------------------------------
â”‚ â”‚  
â”‚ â”‚  Use pip to install:
â”‚ â”‚  ```shell
â”‚ â”‚  $ pip install mashumaro
â”‚ â”‚ @@ -114,15 +126,15 @@
â”‚ â”‚  
â”‚ â”‚  This project follows the principles of [Semantic Versioning](https://semver.org).
â”‚ â”‚  Changelog is available on [GitHub Releases page](https://github.com/Fatal1ty/mashumaro/releases).
â”‚ â”‚  
â”‚ â”‚  Supported serialization formats
â”‚ â”‚  --------------------------------------------------------------------------------
â”‚ â”‚  
â”‚ â”‚ -This framework adds methods for dumping to and loading from the
â”‚ â”‚ +This library adds methods for dumping to and loading from the
â”‚ â”‚  following formats:
â”‚ â”‚  
â”‚ â”‚  * [plain dict](https://docs.python.org/3/library/stdtypes.html#mapping-types-dict)
â”‚ â”‚  * [JSON](https://www.json.org)
â”‚ â”‚  * [YAML](https://yaml.org)
â”‚ â”‚  * [MessagePack](https://msgpack.org)
â”‚ â”‚  * [TOML](https://toml.io)
â”‚ â”‚ @@ -288,15 +300,15 @@
â”‚ â”‚  json_string = my_portfolio.to_json()
â”‚ â”‚  Portfolio.from_json(json_string)  # same as my_portfolio
â”‚ â”‚  ```
â”‚ â”‚  
â”‚ â”‚  How does it work?
â”‚ â”‚  --------------------------------------------------------------------------------
â”‚ â”‚  
â”‚ â”‚ -This framework works by taking the schema of the data and generating a
â”‚ â”‚ +This library works by taking the schema of the data and generating a
â”‚ â”‚  specific parser and builder for exactly that schema, taking into account the
â”‚ â”‚  specifics of the serialization format. This is much faster than inspection of
â”‚ â”‚  field types on every call of parsing or building at runtime.
â”‚ â”‚  
â”‚ â”‚  These specific parsers and builders are presented by the corresponding
â”‚ â”‚  `from_*` and `to_*` methods. They are compiled during import time (or at
â”‚ â”‚  runtime in some cases) and are set as attributes to your dataclasses.
â”‚ â”‚ @@ -315,15 +327,15 @@
â”‚ â”‚  <img src="https://raw.githubusercontent.com/Fatal1ty/mashumaro/master/benchmark/charts/load.png" width="400"><img src="https://raw.githubusercontent.com/Fatal1ty/mashumaro/master/benchmark/charts/dump.png" width="400">
â”‚ â”‚  
â”‚ â”‚  <table>
â”‚ â”‚    <col>
â”‚ â”‚    <colgroup span="2"></colgroup>
â”‚ â”‚    <colgroup span="2"></colgroup>
â”‚ â”‚    <tr>
â”‚ â”‚ -    <th rowspan="2">Framework</th>
â”‚ â”‚ +    <th rowspan="2">Library</th>
â”‚ â”‚      <th colspan="2" scope="colgroup">From dict</th>
â”‚ â”‚      <th colspan="2" scope="colgroup">To dict</th>
â”‚ â”‚  </tr>
â”‚ â”‚  <tr>
â”‚ â”‚      <th scope="col">Time</th>
â”‚ â”‚      <th scope="col">Slowdown factor</th>
â”‚ â”‚      <th scope="col">Time</th>
â”‚ â”‚ @@ -519,14 +531,15 @@
â”‚ â”‚  * Turn an existing regular or generic class into a serializable one
â”‚ â”‚  by inheriting the [`SerializableType`](#serializabletype-interface) class
â”‚ â”‚  * Write different serialization strategies for an existing regular or generic type that is not under your control
â”‚ â”‚  using [`SerializationStrategy`](#serializationstrategy) class
â”‚ â”‚  * Define serialization / deserialization methods:
â”‚ â”‚    * for a specific dataclass field by using [field options](#field-options)
â”‚ â”‚    * for a specific data type used in the dataclass by using [`Config`](#config-options) class
â”‚ â”‚ +* Alter input and output data with serialization / deserialization [hooks](#serialization-hooks)
â”‚ â”‚  * Separate serialization scheme from a dataclass in a reusable manner using [dialects](#dialects)
â”‚ â”‚  * Choose from predefined serialization engines for the specific data types, e.g. `datetime` and `NamedTuple`
â”‚ â”‚  
â”‚ â”‚  ### SerializableType interface
â”‚ â”‚  
â”‚ â”‚  If you have a custom class or hierarchy of classes whose instances you want
â”‚ â”‚  to serialize with `mashumaro`, the first option is to implement
â”‚ â”‚ @@ -785,15 +798,15 @@
â”‚ â”‚  #### Third-party generic types
â”‚ â”‚  
â”‚ â”‚  To create a generic version of a serialization strategy you need to follow these steps:
â”‚ â”‚  * inherit [`Generic[...]`](https://docs.python.org/3/library/typing.html#typing.Generic) type
â”‚ â”‚  with the number of parameters matching the number of parameters
â”‚ â”‚  of the target generic type
â”‚ â”‚  * Write generic annotations for `serialize` method's return type and for `deserialize` method's argument type
â”‚ â”‚ -* Use the origin type of the target generic type in the [`serialization_strategy`](#serializationstrategy-config-option) config section
â”‚ â”‚ +* Use the origin type of the target generic type in the [`serialization_strategy`](#serialization_strategy-config-option) config section
â”‚ â”‚  ([`typing.get_origin`](https://docs.python.org/3/library/typing.html#typing.get_origin) might be helpful)
â”‚ â”‚  
â”‚ â”‚  There is no need to add `use_annotations=True` here because it's enabled implicitly
â”‚ â”‚  for generic serialization strategies.
â”‚ â”‚  
â”‚ â”‚  For example, there is a third-party [multidict](https://pypi.org/project/multidict/) package that has a generic `MultiDict` type.
â”‚ â”‚  A generic serialization strategy for it might look like this:
â”‚ â”‚ @@ -1770,7 +1783,440 @@
â”‚ â”‚          d.pop('password')
â”‚ â”‚          return d
â”‚ â”‚  
â”‚ â”‚  obj = DataClass(user="name", password="secret")
â”‚ â”‚  print(obj.to_dict())  # {"user": "name"}
â”‚ â”‚  print(obj.to_json())  # '{"user": "name"}'
â”‚ â”‚  ```
â”‚ â”‚ +
â”‚ â”‚ +JSON Schema
â”‚ â”‚ +--------------------------------------------------------------------------------
â”‚ â”‚ +
â”‚ â”‚ +You can build JSON Schema not only for dataclasses but also for any other
â”‚ â”‚ +[supported](#supported-data-types) data
â”‚ â”‚ +types. There is support for the following standards:
â”‚ â”‚ +* [Draft 2022-12](https://json-schema.org/specification.html)
â”‚ â”‚ +* [OpenAPI Specification 3.1.0](https://swagger.io/specification/)
â”‚ â”‚ +
â”‚ â”‚ +### Building JSON Schema
â”‚ â”‚ +
â”‚ â”‚ +For simple one-time cases it's recommended to start from using a configurable
â”‚ â”‚ +`build_json_schema` function. It returns `JSONSchema` object that can be
â”‚ â”‚ +serialized to json or to dict:
â”‚ â”‚ +
â”‚ â”‚ +```python
â”‚ â”‚ +from dataclasses import dataclass
â”‚ â”‚ +from typing import List
â”‚ â”‚ +from uuid import UUID
â”‚ â”‚ +
â”‚ â”‚ +from mashumaro.jsonschema import build_json_schema
â”‚ â”‚ +
â”‚ â”‚ +
â”‚ â”‚ +@dataclass
â”‚ â”‚ +class User:
â”‚ â”‚ +    id: UUID
â”‚ â”‚ +    name: str
â”‚ â”‚ +
â”‚ â”‚ +
â”‚ â”‚ +print(build_json_schema(List[User]).to_json())
â”‚ â”‚ +```
â”‚ â”‚ +
â”‚ â”‚ +<details>
â”‚ â”‚ +<summary>Click to show the result</summary>
â”‚ â”‚ +
â”‚ â”‚ +```json
â”‚ â”‚ +{
â”‚ â”‚ +    "type": "array",
â”‚ â”‚ +    "items": {
â”‚ â”‚ +        "type": "object",
â”‚ â”‚ +        "title": "User",
â”‚ â”‚ +        "properties": {
â”‚ â”‚ +            "id": {
â”‚ â”‚ +                "type": "string",
â”‚ â”‚ +                "format": "uuid"
â”‚ â”‚ +            },
â”‚ â”‚ +            "name": {
â”‚ â”‚ +                "type": "string"
â”‚ â”‚ +            }
â”‚ â”‚ +        },
â”‚ â”‚ +        "additionalProperties": false,
â”‚ â”‚ +        "required": [
â”‚ â”‚ +            "id",
â”‚ â”‚ +            "name"
â”‚ â”‚ +        ]
â”‚ â”‚ +    }
â”‚ â”‚ +}
â”‚ â”‚ +```
â”‚ â”‚ +</details>
â”‚ â”‚ +
â”‚ â”‚ +Additional validation keywords ([see below](#json-schema-constraints))
â”‚ â”‚ +can be added using annotations:
â”‚ â”‚ +
â”‚ â”‚ +```python
â”‚ â”‚ +from typing import Annotated, List
â”‚ â”‚ +from mashumaro.jsonschema import build_json_schema
â”‚ â”‚ +from mashumaro.jsonschema.annotations import Maximum, MaxItems
â”‚ â”‚ +
â”‚ â”‚ +print(
â”‚ â”‚ +    build_json_schema(
â”‚ â”‚ +        Annotated[
â”‚ â”‚ +            List[Annotated[int, Maximum(42)]],
â”‚ â”‚ +            MaxItems(4)
â”‚ â”‚ +        ]
â”‚ â”‚ +    ).to_json()
â”‚ â”‚ +)
â”‚ â”‚ +```
â”‚ â”‚ +
â”‚ â”‚ +<details>
â”‚ â”‚ +<summary>Click to show the result</summary>
â”‚ â”‚ +
â”‚ â”‚ +```json
â”‚ â”‚ +{
â”‚ â”‚ +    "type": "array",
â”‚ â”‚ +    "items": {
â”‚ â”‚ +        "type": "integer",
â”‚ â”‚ +        "maximum": 42
â”‚ â”‚ +    },
â”‚ â”‚ +    "maxItems": 4
â”‚ â”‚ +}
â”‚ â”‚ +```
â”‚ â”‚ +</details>
â”‚ â”‚ +
â”‚ â”‚ +The [`$schema`](https://json-schema.org/draft/2020-12/json-schema-core.html#name-the-schema-keyword)
â”‚ â”‚ +keyword can be added by setting `with_dialect_uri` to True:
â”‚ â”‚ +
â”‚ â”‚ +```python
â”‚ â”‚ +print(build_json_schema(str, with_dialect_uri=True).to_json())
â”‚ â”‚ +```
â”‚ â”‚ +
â”‚ â”‚ +<details>
â”‚ â”‚ +<summary>Click to show the result</summary>
â”‚ â”‚ +
â”‚ â”‚ +```json
â”‚ â”‚ +{
â”‚ â”‚ +    "$schema": "https://json-schema.org/draft/2020-12/schema",
â”‚ â”‚ +    "type": "string"
â”‚ â”‚ +}
â”‚ â”‚ +```
â”‚ â”‚ +</details>
â”‚ â”‚ +
â”‚ â”‚ +By default, Draft 2022-12 dialect is being used, but you can change it to
â”‚ â”‚ +another one by setting `dialect` parameter:
â”‚ â”‚ +
â”‚ â”‚ +```python
â”‚ â”‚ +from mashumaro.jsonschema import OPEN_API_3_1
â”‚ â”‚ +
â”‚ â”‚ +print(
â”‚ â”‚ +    build_json_schema(
â”‚ â”‚ +        str, dialect=OPEN_API_3_1, with_dialect_uri=True
â”‚ â”‚ +    ).to_json()
â”‚ â”‚ +)
â”‚ â”‚ +```
â”‚ â”‚ +
â”‚ â”‚ +<details>
â”‚ â”‚ +<summary>Click to show the result</summary>
â”‚ â”‚ +
â”‚ â”‚ +```json
â”‚ â”‚ +{
â”‚ â”‚ +    "$schema": "https://spec.openapis.org/oas/3.1/dialect/base",
â”‚ â”‚ +    "type": "string"
â”‚ â”‚ +}
â”‚ â”‚ +```
â”‚ â”‚ +</details>
â”‚ â”‚ +
â”‚ â”‚ +All dataclass JSON Schemas can or can not be placed in the
â”‚ â”‚ +[definitions](https://json-schema.org/draft/2020-12/json-schema-core.html#name-schema-re-use-with-defs)
â”‚ â”‚ +section, depending on the `all_refs` parameter, which default value comes
â”‚ â”‚ +from a dialect used (`False` for Draft 2022-12, `True` for OpenAPI
â”‚ â”‚ +Specification 3.1.0):
â”‚ â”‚ +
â”‚ â”‚ +```python
â”‚ â”‚ +print(build_json_schema(List[User], all_refs=True).to_json())
â”‚ â”‚ +```
â”‚ â”‚ +<details>
â”‚ â”‚ +<summary>Click to show the result</summary>
â”‚ â”‚ +
â”‚ â”‚ +```json
â”‚ â”‚ +{
â”‚ â”‚ +    "type": "array",
â”‚ â”‚ +    "$defs": {
â”‚ â”‚ +        "User": {
â”‚ â”‚ +            "type": "object",
â”‚ â”‚ +            "title": "User",
â”‚ â”‚ +            "properties": {
â”‚ â”‚ +                "id": {
â”‚ â”‚ +                    "type": "string",
â”‚ â”‚ +                    "format": "uuid"
â”‚ â”‚ +                },
â”‚ â”‚ +                "name": {
â”‚ â”‚ +                    "type": "string"
â”‚ â”‚ +                }
â”‚ â”‚ +            },
â”‚ â”‚ +            "additionalProperties": false,
â”‚ â”‚ +            "required": [
â”‚ â”‚ +                "id",
â”‚ â”‚ +                "name"
â”‚ â”‚ +            ]
â”‚ â”‚ +        }
â”‚ â”‚ +    },
â”‚ â”‚ +    "items": {
â”‚ â”‚ +        "$ref": "#/defs/User"
â”‚ â”‚ +    }
â”‚ â”‚ +}
â”‚ â”‚ +```
â”‚ â”‚ +</details>
â”‚ â”‚ +
â”‚ â”‚ +The definitions section can be omitted from the final document by setting
â”‚ â”‚ +`with_definitions` parameter to `False`:
â”‚ â”‚ +
â”‚ â”‚ +```python
â”‚ â”‚ +print(
â”‚ â”‚ +    build_json_schema(
â”‚ â”‚ +        List[User], dialect=OPEN_API_3_1, with_definitions=False
â”‚ â”‚ +    ).to_json()
â”‚ â”‚ +)
â”‚ â”‚ +```
â”‚ â”‚ +
â”‚ â”‚ +<details>
â”‚ â”‚ +<summary>Click to show the result</summary>
â”‚ â”‚ +
â”‚ â”‚ +```json
â”‚ â”‚ +{
â”‚ â”‚ +    "type": "array",
â”‚ â”‚ +    "items": {
â”‚ â”‚ +        "$ref": "#/components/schemas/User"
â”‚ â”‚ +    }
â”‚ â”‚ +}
â”‚ â”‚ +```
â”‚ â”‚ +</details>
â”‚ â”‚ +
â”‚ â”‚ +These omitted definitions could be found later in the `Context` object that
â”‚ â”‚ +you could have created and passed to the function, but it could be easier
â”‚ â”‚ +to use `JSONSchemaBuilder` for that. For example, you might found it handy
â”‚ â”‚ +to build OpenAPI Specification step by step passing your models to the builder
â”‚ â”‚ +and get all the registered definitions later. This builder has reasonable
â”‚ â”‚ +defaults but can be customized if necessary.
â”‚ â”‚ +
â”‚ â”‚ +```python
â”‚ â”‚ +from mashumaro.jsonschema import JSONSchemaBuilder, OPEN_API_3_1
â”‚ â”‚ +
â”‚ â”‚ +builder = JSONSchemaBuilder(OPEN_API_3_1)
â”‚ â”‚ +
â”‚ â”‚ +@dataclass
â”‚ â”‚ +class User:
â”‚ â”‚ +    id: UUID
â”‚ â”‚ +    name: str
â”‚ â”‚ +
â”‚ â”‚ +@dataclass
â”‚ â”‚ +class Device:
â”‚ â”‚ +    id: UUID
â”‚ â”‚ +    model: str
â”‚ â”‚ +
â”‚ â”‚ +print(builder.build(List[User]).to_json())
â”‚ â”‚ +print(builder.build(List[Device]).to_json())
â”‚ â”‚ +print(builder.get_definitions().to_json())
â”‚ â”‚ +```
â”‚ â”‚ +
â”‚ â”‚ +<details>
â”‚ â”‚ +<summary>Click to show the result</summary>
â”‚ â”‚ +
â”‚ â”‚ +```json
â”‚ â”‚ +{
â”‚ â”‚ +    "type": "array",
â”‚ â”‚ +    "items": {
â”‚ â”‚ +        "$ref": "#/components/schemas/User"
â”‚ â”‚ +    }
â”‚ â”‚ +}
â”‚ â”‚ +```
â”‚ â”‚ +```json
â”‚ â”‚ +{
â”‚ â”‚ +    "type": "array",
â”‚ â”‚ +    "items": {
â”‚ â”‚ +        "$ref": "#/components/schemas/Device"
â”‚ â”‚ +    }
â”‚ â”‚ +}
â”‚ â”‚ +```
â”‚ â”‚ +```json
â”‚ â”‚ +{
â”‚ â”‚ +    "User": {
â”‚ â”‚ +        "type": "object",
â”‚ â”‚ +        "title": "User",
â”‚ â”‚ +        "properties": {
â”‚ â”‚ +            "id": {
â”‚ â”‚ +                "type": "string",
â”‚ â”‚ +                "format": "uuid"
â”‚ â”‚ +            },
â”‚ â”‚ +            "name": {
â”‚ â”‚ +                "type": "string"
â”‚ â”‚ +            }
â”‚ â”‚ +        },
â”‚ â”‚ +        "additionalProperties": false,
â”‚ â”‚ +        "required": [
â”‚ â”‚ +            "id",
â”‚ â”‚ +            "name"
â”‚ â”‚ +        ]
â”‚ â”‚ +    },
â”‚ â”‚ +    "Device": {
â”‚ â”‚ +        "type": "object",
â”‚ â”‚ +        "title": "Device",
â”‚ â”‚ +        "properties": {
â”‚ â”‚ +            "id": {
â”‚ â”‚ +                "type": "string",
â”‚ â”‚ +                "format": "uuid"
â”‚ â”‚ +            },
â”‚ â”‚ +            "model": {
â”‚ â”‚ +                "type": "string"
â”‚ â”‚ +            }
â”‚ â”‚ +        },
â”‚ â”‚ +        "additionalProperties": false,
â”‚ â”‚ +        "required": [
â”‚ â”‚ +            "id",
â”‚ â”‚ +            "model"
â”‚ â”‚ +        ]
â”‚ â”‚ +    }
â”‚ â”‚ +}
â”‚ â”‚ +```
â”‚ â”‚ +</details>
â”‚ â”‚ +
â”‚ â”‚ +### JSON Schema constraints
â”‚ â”‚ +
â”‚ â”‚ +Apart from required keywords, that are added automatically for certain data
â”‚ â”‚ +types, you're free to use additional validation keywords.
â”‚ â”‚ +They're presented by the corresponding classes in
â”‚ â”‚ +[`mashumaro.jsonschema.annotations`](https://github.com/Fatal1ty/mashumaro/blob/master/mashumaro/jsonschema/annotations.py):
â”‚ â”‚ +
â”‚ â”‚ +Number constraints:
â”‚ â”‚ +* [`Minimum`](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-minimum)
â”‚ â”‚ +* [`Maximum`](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-maximum)
â”‚ â”‚ +* [`ExclusiveMinimum`](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-exclusiveminimum)
â”‚ â”‚ +* [`ExclusiveMaximum`](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-exclusivemaximum)
â”‚ â”‚ +* [`MultipleOf`](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-multipleof)
â”‚ â”‚ +
â”‚ â”‚ +String constraints:
â”‚ â”‚ +* [`MinLength`](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-minlength)
â”‚ â”‚ +* [`MaxLength`](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-maxlength)
â”‚ â”‚ +* [`Pattern`](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-pattern)
â”‚ â”‚ +
â”‚ â”‚ +Array constraints:
â”‚ â”‚ +* [`MinItems`](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-minitems)
â”‚ â”‚ +* [`MaxItems`](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-maxitems)
â”‚ â”‚ +* [`UniqueItems`](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-uniqueitems)
â”‚ â”‚ +* [`Contains`](https://json-schema.org/draft/2020-12/json-schema-core.html#name-contains)
â”‚ â”‚ +* [`MinContains`](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-mincontains)
â”‚ â”‚ +* [`MaxContains`](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-maxcontains)
â”‚ â”‚ +
â”‚ â”‚ +Object constraints:
â”‚ â”‚ +* [`MaxProperties`](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-maxproperties)
â”‚ â”‚ +* [`MinProperties`](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-minproperties)
â”‚ â”‚ +* [`DependentRequired`](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-dependentrequired)
â”‚ â”‚ +
â”‚ â”‚ +### Extending JSON Schema
â”‚ â”‚ +
â”‚ â”‚ +Using a `Config` class it is possible to override some parts of the schema.
â”‚ â”‚ +Currently, it works for dataclass fields via "properties" key:
â”‚ â”‚ +
â”‚ â”‚ +```python
â”‚ â”‚ +from dataclasses import dataclass
â”‚ â”‚ +from mashumaro.jsonschema import build_json_schema
â”‚ â”‚ +
â”‚ â”‚ +@dataclass
â”‚ â”‚ +class FooBar:
â”‚ â”‚ +    foo: str
â”‚ â”‚ +    bar: int
â”‚ â”‚ +
â”‚ â”‚ +    class Config:
â”‚ â”‚ +        json_schema = {
â”‚ â”‚ +            "properties": {
â”‚ â”‚ +                "foo": {
â”‚ â”‚ +                    "type": "string",
â”‚ â”‚ +                    "description": "bar"
â”‚ â”‚ +                }
â”‚ â”‚ +            }
â”‚ â”‚ +        }
â”‚ â”‚ +
â”‚ â”‚ +print(build_json_schema(FooBar).to_json())
â”‚ â”‚ +```
â”‚ â”‚ +
â”‚ â”‚ +<details>
â”‚ â”‚ +<summary>Click to show the result</summary>
â”‚ â”‚ +
â”‚ â”‚ +```json
â”‚ â”‚ +{
â”‚ â”‚ +    "type": "object",
â”‚ â”‚ +    "title": "FooBar",
â”‚ â”‚ +    "properties": {
â”‚ â”‚ +        "foo": {
â”‚ â”‚ +            "type": "string",
â”‚ â”‚ +            "description": "bar"
â”‚ â”‚ +        },
â”‚ â”‚ +        "bar": {
â”‚ â”‚ +            "type": "integer"
â”‚ â”‚ +        }
â”‚ â”‚ +    },
â”‚ â”‚ +    "additionalProperties": false,
â”‚ â”‚ +    "required": [
â”‚ â”‚ +        "foo",
â”‚ â”‚ +        "bar"
â”‚ â”‚ +    ]
â”‚ â”‚ +}
â”‚ â”‚ +```
â”‚ â”‚ +</details>
â”‚ â”‚ +
â”‚ â”‚ +### JSON Schema and custom serialization methods
â”‚ â”‚ +
â”‚ â”‚ +Mashumaro provides different ways to override default serialization methods for
â”‚ â”‚ +dataclass fields or specific data types. In order for these overrides to be
â”‚ â”‚ +reflected in the schema, you need to make sure that the methods have
â”‚ â”‚ +annotations of the return value type.
â”‚ â”‚ +
â”‚ â”‚ +```python
â”‚ â”‚ +from dataclasses import dataclass, field
â”‚ â”‚ +from mashumaro.config import BaseConfig
â”‚ â”‚ +from mashumaro.jsonschema import build_json_schema
â”‚ â”‚ +
â”‚ â”‚ +def str_as_list(s: str) -> list[str]:
â”‚ â”‚ +    return list(s)
â”‚ â”‚ +
â”‚ â”‚ +def int_as_str(i: int) -> str:
â”‚ â”‚ +    return str(i)
â”‚ â”‚ +
â”‚ â”‚ +@dataclass
â”‚ â”‚ +class FooBar:
â”‚ â”‚ +    foo: str = field(metadata={"serialize": str_as_list})
â”‚ â”‚ +    bar: int
â”‚ â”‚ +
â”‚ â”‚ +    class Config(BaseConfig):
â”‚ â”‚ +        serialization_strategy = {
â”‚ â”‚ +            int: {
â”‚ â”‚ +                "serialize": int_as_str
â”‚ â”‚ +            }
â”‚ â”‚ +        }
â”‚ â”‚ +
â”‚ â”‚ +print(build_json_schema(FooBar).to_json())
â”‚ â”‚ +```
â”‚ â”‚ +
â”‚ â”‚ +<details>
â”‚ â”‚ +<summary>Click to show the result</summary>
â”‚ â”‚ +
â”‚ â”‚ +```json
â”‚ â”‚ +{
â”‚ â”‚ +    "type": "object",
â”‚ â”‚ +    "title": "FooBar",
â”‚ â”‚ +    "properties": {
â”‚ â”‚ +        "foo": {
â”‚ â”‚ +            "type": "array",
â”‚ â”‚ +            "items": {
â”‚ â”‚ +                "type": "string"
â”‚ â”‚ +            }
â”‚ â”‚ +        },
â”‚ â”‚ +        "bar": {
â”‚ â”‚ +            "type": "string"
â”‚ â”‚ +        }
â”‚ â”‚ +    },
â”‚ â”‚ +    "additionalProperties": false,
â”‚ â”‚ +    "required": [
â”‚ â”‚ +        "foo",
â”‚ â”‚ +        "bar"
â”‚ â”‚ +    ]
â”‚ â”‚ +}
â”‚ â”‚ +```
â”‚ â”‚ +</details>
â”‚ â”‚   --- mashumaro-3.5/pyproject.toml
â”‚ â”œâ”€â”€ +++ mashumaro-3.6/pyproject.toml
â”‚ â”‚â”„ Files 13% similar despite different names
â”‚ â”‚ @@ -11,21 +11,24 @@
â”‚ â”‚  ]
â”‚ â”‚  disable_error_code = 'empty-body'
â”‚ â”‚  
â”‚ â”‚  [[tool.mypy.overrides]]
â”‚ â”‚  module = [
â”‚ â”‚      'mashumaro.core.meta.types.pack',
â”‚ â”‚      'mashumaro.core.meta.types.unpack',
â”‚ â”‚ +    'mashumaro.jsonschema.schema',
â”‚ â”‚  ]
â”‚ â”‚  disable_error_code = 'return'
â”‚ â”‚  
â”‚ â”‚  [flake8]
â”‚ â”‚  max-line-length = 79
â”‚ â”‚  
â”‚ â”‚  [tool.isort]
â”‚ â”‚ +profile = 'black'
â”‚ â”‚ +line_length = 79
â”‚ â”‚  multi_line_output = 3
â”‚ â”‚  include_trailing_comma = true
â”‚ â”‚  ensure_newline_before_comments = true
â”‚ â”‚  
â”‚ â”‚  [tool.black]
â”‚ â”‚  line-length = 79
â”‚ â”‚  target-version = ['py37', 'py38', 'py39']
â”‚ â”‚   --- mashumaro-3.5/setup.py
â”‚ â”œâ”€â”€ +++ mashumaro-3.6/setup.py
â”‚ â”‚â”„ Files 5% similar despite different names
â”‚ â”‚ @@ -1,15 +1,15 @@
â”‚ â”‚  #!/usr/bin/env python
â”‚ â”‚  
â”‚ â”‚  from setuptools import find_packages, setup
â”‚ â”‚  
â”‚ â”‚  setup(
â”‚ â”‚      name="mashumaro",
â”‚ â”‚ -    version="3.5",
â”‚ â”‚ -    description="Fast serialization framework on top of dataclasses",
â”‚ â”‚ +    version="3.6",
â”‚ â”‚ +    description="Fast serialization library on top of dataclasses",
â”‚ â”‚      long_description=open("README.md", encoding="utf8").read(),
â”‚ â”‚      long_description_content_type="text/markdown",
â”‚ â”‚      platforms="all",
â”‚ â”‚      classifiers=[
â”‚ â”‚          "License :: OSI Approved :: Apache Software License",
â”‚ â”‚          "Intended Audience :: Developers",
â”‚ â”‚          "Programming Language :: Python :: 3 :: Only",
