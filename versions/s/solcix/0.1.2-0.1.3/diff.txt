--- tmp/solcix-0.1.2.tar.gz
+++ tmp/solcix-0.1.3.tar.gz
â”œâ”€â”€ filetype from file(1)
â”‚ @@ -1 +1 @@
â”‚ -gzip compressed data, was "solcix-0.1.2.tar", max compression
â”‚ +gzip compressed data, was "solcix-0.1.3.tar", max compression
â”‚   --- solcix-0.1.2.tar
â”œâ”€â”€ +++ solcix-0.1.3.tar
â”‚ â”œâ”€â”€ file list
â”‚ â”‚ @@ -1,17 +1,17 @@
â”‚ â”‚ --rw-r--r--   0        0        0     5104 2023-04-06 11:59:09.004164 solcix-0.1.2/README.md
â”‚ â”‚ --rw-r--r--   0        0        0      935 2023-04-06 13:08:08.136419 solcix-0.1.2/pyproject.toml
â”‚ â”‚ --rw-r--r--   0        0        0     1103 2023-04-06 08:51:29.868152 solcix-0.1.2/solcix/__init__.py
â”‚ â”‚ --rw-r--r--   0        0        0     6469 2023-04-06 12:57:41.589225 solcix-0.1.2/solcix/__main__.py
â”‚ â”‚ --rw-r--r--   0        0        0       22 2023-04-06 13:06:39.195988 solcix-0.1.2/solcix/__version__.py
â”‚ â”‚ --rw-r--r--   0        0        0      182 2023-04-06 06:47:58.651981 solcix-0.1.2/solcix/compile/__init__.py
â”‚ â”‚ --rw-r--r--   0        0        0    19134 2023-04-06 09:25:41.021963 solcix-0.1.2/solcix/compile/solc.py
â”‚ â”‚ --rw-r--r--   0        0        0      618 2023-04-05 16:12:30.242253 solcix-0.1.2/solcix/constant.py
â”‚ â”‚ --rw-r--r--   0        0        0      110 2023-04-05 14:24:43.655338 solcix-0.1.2/solcix/datatypes/__init__.py
â”‚ â”‚ --rw-r--r--   0        0        0     3949 2023-04-06 08:39:27.233614 solcix-0.1.2/solcix/datatypes/datatypes.py
â”‚ â”‚ --rw-r--r--   0        0        0     3407 2023-04-06 08:32:26.769062 solcix-0.1.2/solcix/errors.py
â”‚ â”‚ --rw-r--r--   0        0        0    19449 2023-04-06 11:09:01.513052 solcix-0.1.2/solcix/installer.py
â”‚ â”‚ --rw-r--r--   0        0        0      247 2023-04-05 17:30:43.390279 solcix-0.1.2/solcix/manage/__init__.py
â”‚ â”‚ --rw-r--r--   0        0        0     4799 2023-04-06 13:03:26.451012 solcix-0.1.2/solcix/manage/manage.py
â”‚ â”‚ --rw-r--r--   0        0        0    10403 2023-04-05 18:06:59.201642 solcix-0.1.2/solcix/resolver.py
â”‚ â”‚ --rw-r--r--   0        0        0      597 2023-04-06 08:38:41.565504 solcix-0.1.2/solcix/utils.py
â”‚ â”‚ --rw-r--r--   0        0        0     6310 1970-01-01 00:00:00.000000 solcix-0.1.2/PKG-INFO
â”‚ â”‚ +-rw-r--r--   0        0        0     5674 2023-04-06 13:35:08.183788 solcix-0.1.3/README.md
â”‚ â”‚ +-rw-r--r--   0        0        0      935 2023-04-06 13:35:30.091923 solcix-0.1.3/pyproject.toml
â”‚ â”‚ +-rw-r--r--   0        0        0     1103 2023-04-06 08:51:29.868152 solcix-0.1.3/solcix/__init__.py
â”‚ â”‚ +-rw-r--r--   0        0        0     6993 2023-04-06 13:32:17.118795 solcix-0.1.3/solcix/__main__.py
â”‚ â”‚ +-rw-r--r--   0        0        0       22 2023-04-06 13:35:25.067892 solcix-0.1.3/solcix/__version__.py
â”‚ â”‚ +-rw-r--r--   0        0        0      182 2023-04-06 06:47:58.651981 solcix-0.1.3/solcix/compile/__init__.py
â”‚ â”‚ +-rw-r--r--   0        0        0    19134 2023-04-06 09:25:41.021963 solcix-0.1.3/solcix/compile/solc.py
â”‚ â”‚ +-rw-r--r--   0        0        0      618 2023-04-05 16:12:30.242253 solcix-0.1.3/solcix/constant.py
â”‚ â”‚ +-rw-r--r--   0        0        0      110 2023-04-05 14:24:43.655338 solcix-0.1.3/solcix/datatypes/__init__.py
â”‚ â”‚ +-rw-r--r--   0        0        0     3949 2023-04-06 08:39:27.233614 solcix-0.1.3/solcix/datatypes/datatypes.py
â”‚ â”‚ +-rw-r--r--   0        0        0     3407 2023-04-06 08:32:26.769062 solcix-0.1.3/solcix/errors.py
â”‚ â”‚ +-rw-r--r--   0        0        0    19449 2023-04-06 11:09:01.513052 solcix-0.1.3/solcix/installer.py
â”‚ â”‚ +-rw-r--r--   0        0        0      247 2023-04-05 17:30:43.390279 solcix-0.1.3/solcix/manage/__init__.py
â”‚ â”‚ +-rw-r--r--   0        0        0     4759 2023-04-06 13:22:11.056207 solcix-0.1.3/solcix/manage/manage.py
â”‚ â”‚ +-rw-r--r--   0        0        0    10403 2023-04-05 18:06:59.201642 solcix-0.1.3/solcix/resolver.py
â”‚ â”‚ +-rw-r--r--   0        0        0      597 2023-04-06 08:38:41.565504 solcix-0.1.3/solcix/utils.py
â”‚ â”‚ +-rw-r--r--   0        0        0     6880 1970-01-01 00:00:00.000000 solcix-0.1.3/PKG-INFO
â”‚ â”‚   --- solcix-0.1.2/README.md
â”‚ â”œâ”€â”€ +++ solcix-0.1.3/README.md
â”‚ â”‚â”„ Files 5% similar despite different names
â”‚ â”‚ @@ -118,14 +118,24 @@
â”‚ â”‚  
â”‚ â”‚  The `uninstall` command can be used to uninstall one or more versions of the Solidity compiler:
â”‚ â”‚  
â”‚ â”‚  ```bash
â”‚ â”‚  solcix uninstall 0.8.4 0.7.6
â”‚ â”‚  ```
â”‚ â”‚  
â”‚ â”‚ +### Uninstall all Solidity compilers
â”‚ â”‚ +
â”‚ â”‚ +To uninstall all versions of Solidity compiler that have been installed using solcix, you can use the following command:
â”‚ â”‚ +
â”‚ â”‚ +```bash
â”‚ â”‚ +solcix prune
â”‚ â”‚ +```
â”‚ â”‚ +
â”‚ â”‚ +This will remove all versions of the Solidity compiler that have been installed by solcix.
â”‚ â”‚ +
â”‚ â”‚  ### Verify Solidity compilers
â”‚ â”‚  
â”‚ â”‚  The `verify` command is used to verify the checksums of installed solc binaries and to reinstall any that are malformed.
â”‚ â”‚  
â”‚ â”‚  Example usage:
â”‚ â”‚  
â”‚ â”‚  ```bash
â”‚ â”‚ @@ -203,7 +213,20 @@
â”‚ â”‚  
â”‚ â”‚  ```bash
â”‚ â”‚  These versions are compatible with the pragma.
â”‚ â”‚  0.8.5
â”‚ â”‚  0.8.6
â”‚ â”‚  0.8.7
â”‚ â”‚  ```
â”‚ â”‚ +
â”‚ â”‚ +### Upgrade Solcix
â”‚ â”‚ +
â”‚ â”‚ +The `upgrade` command is used to upgrade the architecture of the installed solc binaries, it will remove all old binaries and download the new ones.
â”‚ â”‚ +
â”‚ â”‚ +Example usage:
â”‚ â”‚ +
â”‚ â”‚ +```bash
â”‚ â”‚ +pip3 install -U
â”‚ â”‚ +
â”‚ â”‚ +# Migrate to the new architecture and Reinstall all binaries
â”‚ â”‚ +solcix upgrade
â”‚ â”‚ +```
â”‚ â”‚   --- solcix-0.1.2/pyproject.toml
â”‚ â”œâ”€â”€ +++ solcix-0.1.3/pyproject.toml
â”‚ â”‚â”„ Files 0% similar despite different names
â”‚ â”‚ @@ -1,10 +1,10 @@
â”‚ â”‚  [tool.poetry]
â”‚ â”‚  name = "solcix"
â”‚ â”‚ -version = "0.1.2"
â”‚ â”‚ +version = "0.1.3"
â”‚ â”‚  description = "A Python wrapper for the Solidity compiler. Switch between versions, compile, and manage artifacts."
â”‚ â”‚  authors = ["alan890104 <alan890104@gmail.com>"]
â”‚ â”‚  readme = "README.md"
â”‚ â”‚  
â”‚ â”‚  [tool.poetry.dependencies]
â”‚ â”‚  python = "^3.8"
â”‚ â”‚  cfgv = "3.3.1"
â”‚ â”‚   --- solcix-0.1.2/solcix/__init__.py
â”‚ â”œâ”€â”€ +++ solcix-0.1.3/solcix/__init__.py
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- solcix-0.1.2/solcix/__main__.py
â”‚ â”œâ”€â”€ +++ solcix-0.1.3/solcix/__main__.py
â”‚ â”‚â”„ Files 4% similar despite different names
â”‚ â”‚ @@ -49,23 +49,24 @@
â”‚ â”‚          print(f"release: {release:6s} | artifact: {artifact}")
â”‚ â”‚      print(Fore.GREEN + f"latest: {latest}" + Style.RESET_ALL)
â”‚ â”‚  
â”‚ â”‚  
â”‚ â”‚  @cli.command(help="List all installed solc versions.")
â”‚ â”‚  def installed():
â”‚ â”‚      installed = solcix.get_installed_versions()
â”‚ â”‚ +    installed = sorted(installed, key=Version)
â”‚ â”‚      try:
â”‚ â”‚          current, _ = solcix.manage.current_version()
â”‚ â”‚          for version in installed:
â”‚ â”‚              if current == version:
â”‚ â”‚                  print(Fore.GREEN + f"{version} <- current" + Style.RESET_ALL)
â”‚ â”‚              print(version)
â”‚ â”‚      except NotInstalledError as e:
â”‚ â”‚          print(Fore.YELLOW + f"{e}" + Style.RESET_ALL)
â”‚ â”‚ -        for version in sorted(installed, key=Version):
â”‚ â”‚ +        for version in installed:
â”‚ â”‚              print(version)
â”‚ â”‚  
â”‚ â”‚  
â”‚ â”‚  @cli.command(help="Switch between solc versions. If the version is not installed, it will be installed.")
â”‚ â”‚  @click.argument("scope", nargs=1, required=True, type=click.Choice(["global", "local"]))
â”‚ â”‚  @click.argument("version", nargs=1, required=True, type=click.STRING)
â”‚ â”‚  def use(scope: str, version: str):
â”‚ â”‚ @@ -79,23 +80,27 @@
â”‚ â”‚  @click.argument("version", nargs=-1, required=True, type=click.STRING)
â”‚ â”‚  def uninstall(version: Union[List[str], str]):
â”‚ â”‚      success, skipped, error = solcix.uninstall_solc(version)
â”‚ â”‚      print(Fore.GREEN + f"success: {', '.join(success)}" + Style.RESET_ALL)
â”‚ â”‚      print(Fore.YELLOW + f"skipped: {', '.join(skipped)}" + Style.RESET_ALL)
â”‚ â”‚      print(Fore.RED + f"error  : {', '.join(error)}" + Style.RESET_ALL)
â”‚ â”‚  
â”‚ â”‚ +@cli.command(help="Uninstall all solc binaries.")
â”‚ â”‚ +def prune():
â”‚ â”‚ +    versions = solcix.get_installed_versions()
â”‚ â”‚ +    success, skipped, error = solcix.uninstall_solc(versions)
â”‚ â”‚ +    print(Fore.GREEN + f"success: {', '.join(success)}" + Style.RESET_ALL)
â”‚ â”‚ +    print(Fore.YELLOW + f"skipped: {', '.join(skipped)}" + Style.RESET_ALL)
â”‚ â”‚ +    print(Fore.RED + f"error  : {', '.join(error)}" + Style.RESET_ALL)
â”‚ â”‚  
â”‚ â”‚ -@cli.command(
â”‚ â”‚ -    help="Verify checksums of installed solc binaries, and reinstall malformed ones."
â”‚ â”‚ -)
â”‚ â”‚ +@cli.command(help="Verify checksums of installed solc binaries, and reinstall malformed ones.")
â”‚ â”‚  @click.argument("version", nargs=-1, required=True, type=click.STRING)
â”‚ â”‚  def verify(version: Union[List[str], str]):
â”‚ â”‚      solcix.verify_solc(version)
â”‚ â”‚  
â”‚ â”‚ -
â”‚ â”‚  @cli.command(help="Remove all cached files.")
â”‚ â”‚  def clear():
â”‚ â”‚      solcix.clear_cache()
â”‚ â”‚  
â”‚ â”‚  
â”‚ â”‚  @cli.command(context_settings=dict(ignore_unknown_options=True), help="Compile Solidity files and print the result, if the output is a TTY, the result will be formatted. Otherwise the result will be printed as a JSON string.")
â”‚ â”‚  @click.argument("file", nargs=1, required=True, type=click.Path(exists=True))
â”‚ â”‚ @@ -136,18 +141,26 @@
â”‚ â”‚      else:
â”‚ â”‚          versions = solcix.get_compatible_versions(pragma)
â”‚ â”‚          print("These versions are compatible with the pragma.")
â”‚ â”‚          for version in versions:
â”‚ â”‚              print(version)
â”‚ â”‚  
â”‚ â”‚  
â”‚ â”‚ +@cli.command()
â”‚ â”‚ +def upgrade():
â”‚ â”‚ +    solcix.manage.upgrade_architecture()
â”‚ â”‚ +
â”‚ â”‚ +
â”‚ â”‚  def solc() -> None:
â”‚ â”‚      try:
â”‚ â”‚          current = solcix.manage.current_version()
â”‚ â”‚          version, _ = current
â”‚ â”‚          path = ARTIFACT_DIR.joinpath(f"solc-{version}", f"solc-{version}")
â”‚ â”‚          subprocess.run([str(path), *sys.argv[1:]], check=True)
â”‚ â”‚      except NotInstalledError as e:
â”‚ â”‚          print(Fore.RED + str(e) + Style.RESET_ALL)
â”‚ â”‚          sys.exit(1)
â”‚ â”‚      except subprocess.CalledProcessError as e:
â”‚ â”‚          sys.exit(e.returncode)
â”‚ â”‚ +
â”‚ â”‚ +if __name__ == "__main__":
â”‚ â”‚ +    cli()
â”‚ â”‚   --- solcix-0.1.2/solcix/compile/solc.py
â”‚ â”œâ”€â”€ +++ solcix-0.1.3/solcix/compile/solc.py
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- solcix-0.1.2/solcix/constant.py
â”‚ â”œâ”€â”€ +++ solcix-0.1.3/solcix/constant.py
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- solcix-0.1.2/solcix/datatypes/datatypes.py
â”‚ â”œâ”€â”€ +++ solcix-0.1.3/solcix/datatypes/datatypes.py
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- solcix-0.1.2/solcix/errors.py
â”‚ â”œâ”€â”€ +++ solcix-0.1.3/solcix/errors.py
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- solcix-0.1.2/solcix/installer.py
â”‚ â”œâ”€â”€ +++ solcix-0.1.3/solcix/installer.py
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- solcix-0.1.2/solcix/manage/manage.py
â”‚ â”œâ”€â”€ +++ solcix-0.1.3/solcix/manage/manage.py
â”‚ â”‚â”„ Files 4% similar despite different names
â”‚ â”‚ @@ -135,21 +135,19 @@
â”‚ â”‚      Upgrade the architecture.
â”‚ â”‚  
â”‚ â”‚      If there are installed versions of solc, remove the current ARTIFACT_DIR directory and install the latest
â”‚ â”‚      version of solc.
â”‚ â”‚  
â”‚ â”‚      Raises:
â”‚ â”‚      -------
â”‚ â”‚ -    argparse.ArgumentTypeError
â”‚ â”‚ +    NotInstalledError
â”‚ â”‚          If there are no installed versions of solc.
â”‚ â”‚  
â”‚ â”‚      """
â”‚ â”‚      currently_installed = get_installed_versions()
â”‚ â”‚      if len(currently_installed) > 0:
â”‚ â”‚          shutil.rmtree(ARTIFACT_DIR)
â”‚ â”‚          os.makedirs(ARTIFACT_DIR, exist_ok=True)
â”‚ â”‚          install_solc(currently_installed)
â”‚ â”‚          print("ðŸ”¥ solcix is now up to date! ðŸ”¥")
â”‚ â”‚      else:
â”‚ â”‚ -        raise argparse.ArgumentTypeError(
â”‚ â”‚ -            "Run `solcix install --help` for more information"
â”‚ â”‚ -        )
â”‚ â”‚ +        raise NotInstalledError("Run `solcix install --help` for more information")
â”‚ â”‚   --- solcix-0.1.2/solcix/resolver.py
â”‚ â”œâ”€â”€ +++ solcix-0.1.3/solcix/resolver.py
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- solcix-0.1.2/solcix/utils.py
â”‚ â”œâ”€â”€ +++ solcix-0.1.3/solcix/utils.py
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- solcix-0.1.2/PKG-INFO
â”‚ â”œâ”€â”€ +++ solcix-0.1.3/PKG-INFO
â”‚ â”‚â”„ Files 3% similar despite different names
â”‚ â”‚ @@ -1,10 +1,10 @@
â”‚ â”‚  Metadata-Version: 2.1
â”‚ â”‚  Name: solcix
â”‚ â”‚ -Version: 0.1.2
â”‚ â”‚ +Version: 0.1.3
â”‚ â”‚  Summary: A Python wrapper for the Solidity compiler. Switch between versions, compile, and manage artifacts.
â”‚ â”‚  Author: alan890104
â”‚ â”‚  Author-email: alan890104@gmail.com
â”‚ â”‚  Requires-Python: >=3.8,<4.0
â”‚ â”‚  Classifier: Programming Language :: Python :: 3
â”‚ â”‚  Classifier: Programming Language :: Python :: 3.8
â”‚ â”‚  Classifier: Programming Language :: Python :: 3.9
â”‚ â”‚ @@ -151,14 +151,24 @@
â”‚ â”‚  
â”‚ â”‚  The `uninstall` command can be used to uninstall one or more versions of the Solidity compiler:
â”‚ â”‚  
â”‚ â”‚  ```bash
â”‚ â”‚  solcix uninstall 0.8.4 0.7.6
â”‚ â”‚  ```
â”‚ â”‚  
â”‚ â”‚ +### Uninstall all Solidity compilers
â”‚ â”‚ +
â”‚ â”‚ +To uninstall all versions of Solidity compiler that have been installed using solcix, you can use the following command:
â”‚ â”‚ +
â”‚ â”‚ +```bash
â”‚ â”‚ +solcix prune
â”‚ â”‚ +```
â”‚ â”‚ +
â”‚ â”‚ +This will remove all versions of the Solidity compiler that have been installed by solcix.
â”‚ â”‚ +
â”‚ â”‚  ### Verify Solidity compilers
â”‚ â”‚  
â”‚ â”‚  The `verify` command is used to verify the checksums of installed solc binaries and to reinstall any that are malformed.
â”‚ â”‚  
â”‚ â”‚  Example usage:
â”‚ â”‚  
â”‚ â”‚  ```bash
â”‚ â”‚ @@ -237,7 +247,20 @@
â”‚ â”‚  ```bash
â”‚ â”‚  These versions are compatible with the pragma.
â”‚ â”‚  0.8.5
â”‚ â”‚  0.8.6
â”‚ â”‚  0.8.7
â”‚ â”‚  ```
â”‚ â”‚  
â”‚ â”‚ +### Upgrade Solcix
â”‚ â”‚ +
â”‚ â”‚ +The `upgrade` command is used to upgrade the architecture of the installed solc binaries, it will remove all old binaries and download the new ones.
â”‚ â”‚ +
â”‚ â”‚ +Example usage:
â”‚ â”‚ +
â”‚ â”‚ +```bash
â”‚ â”‚ +pip3 install -U
â”‚ â”‚ +
â”‚ â”‚ +# Migrate to the new architecture and Reinstall all binaries
â”‚ â”‚ +solcix upgrade
â”‚ â”‚ +```
â”‚ â”‚ +
