--- tmp/solcix-0.1.3.tar.gz
+++ tmp/solcix-0.1.4.tar.gz
â”œâ”€â”€ filetype from file(1)
â”‚ @@ -1 +1 @@
â”‚ -gzip compressed data, was "solcix-0.1.3.tar", max compression
â”‚ +gzip compressed data, was "solcix-0.1.4.tar", max compression
â”‚   --- solcix-0.1.3.tar
â”œâ”€â”€ +++ solcix-0.1.4.tar
â”‚ â”œâ”€â”€ file list
â”‚ â”‚ @@ -1,17 +1,16 @@
â”‚ â”‚ --rw-r--r--   0        0        0     5674 2023-04-06 13:35:08.183788 solcix-0.1.3/README.md
â”‚ â”‚ --rw-r--r--   0        0        0      935 2023-04-06 13:35:30.091923 solcix-0.1.3/pyproject.toml
â”‚ â”‚ --rw-r--r--   0        0        0     1103 2023-04-06 08:51:29.868152 solcix-0.1.3/solcix/__init__.py
â”‚ â”‚ --rw-r--r--   0        0        0     6993 2023-04-06 13:32:17.118795 solcix-0.1.3/solcix/__main__.py
â”‚ â”‚ --rw-r--r--   0        0        0       22 2023-04-06 13:35:25.067892 solcix-0.1.3/solcix/__version__.py
â”‚ â”‚ --rw-r--r--   0        0        0      182 2023-04-06 06:47:58.651981 solcix-0.1.3/solcix/compile/__init__.py
â”‚ â”‚ --rw-r--r--   0        0        0    19134 2023-04-06 09:25:41.021963 solcix-0.1.3/solcix/compile/solc.py
â”‚ â”‚ --rw-r--r--   0        0        0      618 2023-04-05 16:12:30.242253 solcix-0.1.3/solcix/constant.py
â”‚ â”‚ --rw-r--r--   0        0        0      110 2023-04-05 14:24:43.655338 solcix-0.1.3/solcix/datatypes/__init__.py
â”‚ â”‚ --rw-r--r--   0        0        0     3949 2023-04-06 08:39:27.233614 solcix-0.1.3/solcix/datatypes/datatypes.py
â”‚ â”‚ --rw-r--r--   0        0        0     3407 2023-04-06 08:32:26.769062 solcix-0.1.3/solcix/errors.py
â”‚ â”‚ --rw-r--r--   0        0        0    19449 2023-04-06 11:09:01.513052 solcix-0.1.3/solcix/installer.py
â”‚ â”‚ --rw-r--r--   0        0        0      247 2023-04-05 17:30:43.390279 solcix-0.1.3/solcix/manage/__init__.py
â”‚ â”‚ --rw-r--r--   0        0        0     4759 2023-04-06 13:22:11.056207 solcix-0.1.3/solcix/manage/manage.py
â”‚ â”‚ --rw-r--r--   0        0        0    10403 2023-04-05 18:06:59.201642 solcix-0.1.3/solcix/resolver.py
â”‚ â”‚ --rw-r--r--   0        0        0      597 2023-04-06 08:38:41.565504 solcix-0.1.3/solcix/utils.py
â”‚ â”‚ --rw-r--r--   0        0        0     6880 1970-01-01 00:00:00.000000 solcix-0.1.3/PKG-INFO
â”‚ â”‚ +-rw-r--r--   0        0        0     6356 2023-04-06 18:40:16.591860 solcix-0.1.4/README.md
â”‚ â”‚ +-rw-r--r--   0        0        0      935 2023-04-06 18:40:16.591860 solcix-0.1.4/pyproject.toml
â”‚ â”‚ +-rw-r--r--   0        0        0     1109 2023-04-06 18:40:16.591860 solcix-0.1.4/solcix/__init__.py
â”‚ â”‚ +-rw-r--r--   0        0        0     7884 2023-04-06 18:40:16.591860 solcix-0.1.4/solcix/__main__.py
â”‚ â”‚ +-rw-r--r--   0        0        0      182 2023-04-06 18:40:16.591860 solcix-0.1.4/solcix/compile/__init__.py
â”‚ â”‚ +-rw-r--r--   0        0        0    19181 2023-04-06 18:40:16.591860 solcix-0.1.4/solcix/compile/solc.py
â”‚ â”‚ +-rw-r--r--   0        0        0      618 2023-04-06 18:40:16.591860 solcix-0.1.4/solcix/constant.py
â”‚ â”‚ +-rw-r--r--   0        0        0      110 2023-04-06 18:40:16.591860 solcix-0.1.4/solcix/datatypes/__init__.py
â”‚ â”‚ +-rw-r--r--   0        0        0     3949 2023-04-06 18:40:16.591860 solcix-0.1.4/solcix/datatypes/datatypes.py
â”‚ â”‚ +-rw-r--r--   0        0        0     3407 2023-04-06 18:40:16.591860 solcix-0.1.4/solcix/errors.py
â”‚ â”‚ +-rw-r--r--   0        0        0    21421 2023-04-06 18:40:16.591860 solcix-0.1.4/solcix/installer.py
â”‚ â”‚ +-rw-r--r--   0        0        0      241 2023-04-06 18:40:16.591860 solcix-0.1.4/solcix/manage/__init__.py
â”‚ â”‚ +-rw-r--r--   0        0        0     3773 2023-04-06 18:40:16.591860 solcix-0.1.4/solcix/manage/manage.py
â”‚ â”‚ +-rw-r--r--   0        0        0    10656 2023-04-06 18:40:16.591860 solcix-0.1.4/solcix/resolver.py
â”‚ â”‚ +-rw-r--r--   0        0        0      597 2023-04-06 18:40:16.591860 solcix-0.1.4/solcix/utils.py
â”‚ â”‚ +-rw-r--r--   0        0        0     7562 1970-01-01 00:00:00.000000 solcix-0.1.4/PKG-INFO
â”‚ â”‚   --- solcix-0.1.3/README.md
â”‚ â”œâ”€â”€ +++ solcix-0.1.4/README.md
â”‚ â”‚â”„ Files 7% similar despite different names
â”‚ â”‚ @@ -64,20 +64,20 @@
â”‚ â”‚  
â”‚ â”‚  ```bash
â”‚ â”‚  solcix versions
â”‚ â”‚  ```
â”‚ â”‚  
â”‚ â”‚  ### Listing installed Solidity compilers
â”‚ â”‚  
â”‚ â”‚ -The `versions` command can be used to list all available versions of the Solidity compiler:
â”‚ â”‚ +The `ls` command can be used to list all available versions of the Solidity compiler:
â”‚ â”‚  
â”‚ â”‚  Example usage:
â”‚ â”‚  
â”‚ â”‚  ```bash
â”‚ â”‚ -solcix installed
â”‚ â”‚ +solcix ls
â”‚ â”‚  ```
â”‚ â”‚  
â”‚ â”‚  If global / local version is set, it will be displayed as below:
â”‚ â”‚  
â”‚ â”‚  ```bash
â”‚ â”‚  0.8.19
â”‚ â”‚  0.5.2
â”‚ â”‚ @@ -126,15 +126,15 @@
â”‚ â”‚  
â”‚ â”‚  To uninstall all versions of Solidity compiler that have been installed using solcix, you can use the following command:
â”‚ â”‚  
â”‚ â”‚  ```bash
â”‚ â”‚  solcix prune
â”‚ â”‚  ```
â”‚ â”‚  
â”‚ â”‚ -This will remove all versions of the Solidity compiler that have been installed by solcix.
â”‚ â”‚ +This will remove all versions of the Solidity compilers that have been installed by solcix, all cached files, and the solcix configuration file (local config takes precedence over global config).
â”‚ â”‚  
â”‚ â”‚  ### Verify Solidity compilers
â”‚ â”‚  
â”‚ â”‚  The `verify` command is used to verify the checksums of installed solc binaries and to reinstall any that are malformed.
â”‚ â”‚  
â”‚ â”‚  Example usage:
â”‚ â”‚  
â”‚ â”‚ @@ -226,7 +226,15 @@
â”‚ â”‚  
â”‚ â”‚  ```bash
â”‚ â”‚  pip3 install -U
â”‚ â”‚  
â”‚ â”‚  # Migrate to the new architecture and Reinstall all binaries
â”‚ â”‚  solcix upgrade
â”‚ â”‚  ```
â”‚ â”‚ +
â”‚ â”‚ +### Project Acknowledgements
â”‚ â”‚ +
â”‚ â”‚ +We would like to thank the original projects [solc-select](https://github.com/crytic/solc-select) and [py-solc-x](https://github.com/ApeWorX/py-solc-x) for providing excellent code base, upon which we have optimized and improved to make the project more robust and user-friendly.
â”‚ â”‚ +
â”‚ â”‚ +Our project is an improved and optimized version of solc-select and py-solc-x, with more features and excellent performance.
â”‚ â”‚ +
â”‚ â”‚ +If you enjoyed the original projects, we strongly recommend trying out our project to enjoy a better user experience and more efficient code execution.
â”‚ â”‚   --- solcix-0.1.3/pyproject.toml
â”‚ â”œâ”€â”€ +++ solcix-0.1.4/pyproject.toml
â”‚ â”‚â”„ Files 11% similar despite different names
â”‚ â”‚ @@ -1,10 +1,10 @@
â”‚ â”‚  [tool.poetry]
â”‚ â”‚  name = "solcix"
â”‚ â”‚ -version = "0.1.3"
â”‚ â”‚ +version = "0.1.4"
â”‚ â”‚  description = "A Python wrapper for the Solidity compiler. Switch between versions, compile, and manage artifacts."
â”‚ â”‚  authors = ["alan890104 <alan890104@gmail.com>"]
â”‚ â”‚  readme = "README.md"
â”‚ â”‚  
â”‚ â”‚  [tool.poetry.dependencies]
â”‚ â”‚  python = "^3.8"
â”‚ â”‚  cfgv = "3.3.1"
â”‚ â”‚   --- solcix-0.1.3/solcix/__init__.py
â”‚ â”œâ”€â”€ +++ solcix-0.1.4/solcix/__init__.py
â”‚ â”‚â”„ Files 2% similar despite different names
â”‚ â”‚ @@ -1,42 +1,42 @@
â”‚ â”‚  import os
â”‚ â”‚  from .constant import ARTIFACT_DIR
â”‚ â”‚ -from .__version__ import __version__
â”‚ â”‚  from .installer import (
â”‚ â”‚      get_available_versions,
â”‚ â”‚      get_installable_versions,
â”‚ â”‚      get_installed_versions,
â”‚ â”‚      get_latest_version,
â”‚ â”‚      get_executable,
â”‚ â”‚      clear_cache,
â”‚ â”‚      install_solc,
â”‚ â”‚      uninstall_solc,
â”‚ â”‚      verify_solc,
â”‚ â”‚ +    current_version,
â”‚ â”‚  )
â”‚ â”‚  from .resolver import (
â”‚ â”‚      get_compatible_versions,
â”‚ â”‚      get_recommended_version,
â”‚ â”‚      install_solc_from_solidity,
â”‚ â”‚      resolve_version_from_solidity,
â”‚ â”‚  )
â”‚ â”‚ -
â”‚ â”‚  from . import datatypes, compile, manage
â”‚ â”‚  
â”‚ â”‚  
â”‚ â”‚  __all__ = [
â”‚ â”‚      # Installer
â”‚ â”‚      "get_available_versions",
â”‚ â”‚      "get_installable_versions",
â”‚ â”‚      "get_installed_versions",
â”‚ â”‚      "get_latest_version",
â”‚ â”‚      "get_executable",
â”‚ â”‚      "clear_cache",
â”‚ â”‚      "install_solc",
â”‚ â”‚      "uninstall_solc",
â”‚ â”‚      "verify_solc",
â”‚ â”‚ +    "current_version",
â”‚ â”‚      # Resolver
â”‚ â”‚      "get_compatible_versions",
â”‚ â”‚      "get_recommended_version",
â”‚ â”‚      "install_solc_from_solidity",
â”‚ â”‚      "resolve_version_from_solidity",
â”‚ â”‚      # Compile
â”‚ â”‚      "compile",
â”‚ â”‚   --- solcix-0.1.3/solcix/__main__.py
â”‚ â”œâ”€â”€ +++ solcix-0.1.4/solcix/__main__.py
â”‚ â”‚â”„ Files 6% similar despite different names
â”‚ â”‚ @@ -1,21 +1,19 @@
â”‚ â”‚ -import os
â”‚ â”‚  import sys
â”‚ â”‚  import json
â”‚ â”‚  import textwrap
â”‚ â”‚  from typing import List, Union
â”‚ â”‚  import pyfiglet
â”‚ â”‚  import subprocess
â”‚ â”‚  
â”‚ â”‚  import click
â”‚ â”‚  from colorama import Fore, Style
â”‚ â”‚  
â”‚ â”‚  import solcix.installer
â”‚ â”‚  import solcix.resolver
â”‚ â”‚ -from solcix.__version__ import __version__
â”‚ â”‚  from solcix.datatypes import Version
â”‚ â”‚  from solcix.errors import NotInstalledError
â”‚ â”‚  from .constant import ARTIFACT_DIR
â”‚ â”‚  
â”‚ â”‚  CONTEXT_SETTINGS = dict(
â”‚ â”‚      help_option_names=["-h", "--help"],
â”‚ â”‚  )
â”‚ â”‚ @@ -23,15 +21,15 @@
â”‚ â”‚  WELCOME_MESSAGE = (
â”‚ â”‚      f"{Fore.YELLOW}{pyfiglet.figlet_format('welcome to solcix')}{Style.RESET_ALL}"
â”‚ â”‚  )
â”‚ â”‚  VERSION_INFO = f"version  |  %(version)s \n"
â”‚ â”‚  
â”‚ â”‚  # fmt: off
â”‚ â”‚  @click.group(context_settings=CONTEXT_SETTINGS, invoke_without_command=True, no_args_is_help=True,)
â”‚ â”‚ -@click.version_option(version=__version__, prog_name="solcix", message=f"{Fore.YELLOW}{pyfiglet.figlet_format('welcome to solcix')}{Style.RESET_ALL} {VERSION_INFO}")
â”‚ â”‚ +@click.version_option(package_name="solcix", message=f"{Fore.YELLOW}{pyfiglet.figlet_format('welcome to solcix')}{Style.RESET_ALL} {VERSION_INFO}")
â”‚ â”‚  def cli():
â”‚ â”‚      pass
â”‚ â”‚  
â”‚ â”‚  
â”‚ â”‚  @cli.command(help="Install solc binaries.")
â”‚ â”‚  @click.argument("version", nargs=-1, required=True, type=click.STRING)
â”‚ â”‚  @click.option("--use-cache/--no-use-cache", default=True, is_flag=True)
â”‚ â”‚ @@ -39,36 +37,44 @@
â”‚ â”‚      success, skipped, error = solcix.installer.install_solc(version, use_cache)
â”‚ â”‚      print(Fore.GREEN + f"success: {', '.join(success)}" + Style.RESET_ALL)
â”‚ â”‚      print(Fore.YELLOW + f"skipped: {', '.join(skipped)}" + Style.RESET_ALL)
â”‚ â”‚      print(Fore.RED + f"error  : {', '.join(error)}" + Style.RESET_ALL)
â”‚ â”‚  
â”‚ â”‚  
â”‚ â”‚  @cli.command(help="List available solc versions.")
â”‚ â”‚ -def versions():
â”‚ â”‚ +def ls():
â”‚ â”‚      releases, latest = solcix.get_available_versions()
â”‚ â”‚      for release, artifact in releases.items():
â”‚ â”‚          print(f"release: {release:6s} | artifact: {artifact}")
â”‚ â”‚      print(Fore.GREEN + f"latest: {latest}" + Style.RESET_ALL)
â”‚ â”‚  
â”‚ â”‚  
â”‚ â”‚  @cli.command(help="List all installed solc versions.")
â”‚ â”‚  def installed():
â”‚ â”‚      installed = solcix.get_installed_versions()
â”‚ â”‚      installed = sorted(installed, key=Version)
â”‚ â”‚      try:
â”‚ â”‚ -        current, _ = solcix.manage.current_version()
â”‚ â”‚ +        current, _ = solcix.current_version()
â”‚ â”‚          for version in installed:
â”‚ â”‚              if current == version:
â”‚ â”‚                  print(Fore.GREEN + f"{version} <- current" + Style.RESET_ALL)
â”‚ â”‚              print(version)
â”‚ â”‚      except NotInstalledError as e:
â”‚ â”‚          print(Fore.YELLOW + f"{e}" + Style.RESET_ALL)
â”‚ â”‚          for version in installed:
â”‚ â”‚              print(version)
â”‚ â”‚  
â”‚ â”‚ +@cli.command(help="Show current solc version.")
â”‚ â”‚ +def current():
â”‚ â”‚ +    try:
â”‚ â”‚ +        current, _ = solcix.current_version()
â”‚ â”‚ +        print(f"{Fore.GREEN}solc-{current}{Style.RESET_ALL} is currently used.")
â”‚ â”‚ +    except NotInstalledError as e:
â”‚ â”‚ +        print(Fore.YELLOW + f"{e}" + Style.RESET_ALL)
â”‚ â”‚ +
â”‚ â”‚  
â”‚ â”‚  @cli.command(help="Switch between solc versions. If the version is not installed, it will be installed.")
â”‚ â”‚  @click.argument("scope", nargs=1, required=True, type=click.Choice(["global", "local"]))
â”‚ â”‚  @click.argument("version", nargs=1, required=True, type=click.STRING)
â”‚ â”‚  def use(scope: str, version: str):
â”‚ â”‚      if scope == "global":
â”‚ â”‚          solcix.manage.switch_global_version(version, True)
â”‚ â”‚ @@ -82,54 +88,71 @@
â”‚ â”‚      success, skipped, error = solcix.uninstall_solc(version)
â”‚ â”‚      print(Fore.GREEN + f"success: {', '.join(success)}" + Style.RESET_ALL)
â”‚ â”‚      print(Fore.YELLOW + f"skipped: {', '.join(skipped)}" + Style.RESET_ALL)
â”‚ â”‚      print(Fore.RED + f"error  : {', '.join(error)}" + Style.RESET_ALL)
â”‚ â”‚  
â”‚ â”‚  @cli.command(help="Uninstall all solc binaries.")
â”‚ â”‚  def prune():
â”‚ â”‚ +    opt = click.confirm(default=False, text="Are you sure to uninstall all solc binaries, caches, and config files?")
â”‚ â”‚ +    if opt is False:
â”‚ â”‚ +        print(f"{Fore.YELLOW}You have canceled the operation. Indeed, a wise choice!{Style.RESET_ALL}")
â”‚ â”‚ +        return
â”‚ â”‚ +    # Delete all cached versions
â”‚ â”‚ +    solcix.clear_cache()
â”‚ â”‚ +    # Delete all config files
â”‚ â”‚ +    solcix.manage.clear_config()
â”‚ â”‚ +    # Delete all installed versions
â”‚ â”‚      versions = solcix.get_installed_versions()
â”‚ â”‚      success, skipped, error = solcix.uninstall_solc(versions)
â”‚ â”‚      print(Fore.GREEN + f"success: {', '.join(success)}" + Style.RESET_ALL)
â”‚ â”‚      print(Fore.YELLOW + f"skipped: {', '.join(skipped)}" + Style.RESET_ALL)
â”‚ â”‚      print(Fore.RED + f"error  : {', '.join(error)}" + Style.RESET_ALL)
â”‚ â”‚  
â”‚ â”‚ +
â”‚ â”‚  @cli.command(help="Verify checksums of installed solc binaries, and reinstall malformed ones.")
â”‚ â”‚  @click.argument("version", nargs=-1, required=True, type=click.STRING)
â”‚ â”‚  def verify(version: Union[List[str], str]):
â”‚ â”‚      solcix.verify_solc(version)
â”‚ â”‚  
â”‚ â”‚  @cli.command(help="Remove all cached files.")
â”‚ â”‚  def clear():
â”‚ â”‚      solcix.clear_cache()
â”‚ â”‚  
â”‚ â”‚  
â”‚ â”‚ -@cli.command(context_settings=dict(ignore_unknown_options=True), help="Compile Solidity files and print the result, if the output is a TTY, the result will be formatted. Otherwise the result will be printed as a JSON string.")
â”‚ â”‚ +@cli.command(context_settings=dict(ignore_unknown_options=True, allow_extra_args=True), help="Compile Solidity files and print the result, if the output is a TTY, the result will be formatted. Otherwise the result will be printed as a JSON string. If you want to show the help message of solc, please use `solc --help`.")
â”‚ â”‚  @click.argument("file", nargs=1, required=True, type=click.Path(exists=True))
â”‚ â”‚  @click.option("-o", "--output", default=None, type=click.Path(), help="Output directory, will be create if not exists.")
â”‚ â”‚ -@click.argument("kwargs", nargs=-1, type=click.UNPROCESSED)
â”‚ â”‚ -def compile(file: str, output: str, **kwargs):
â”‚ â”‚ +@click.pass_context
â”‚ â”‚ +def compile(ctx: click.Context, file: str, output: str):
â”‚ â”‚ +    params = dict([item.strip('--').split('=') for item in ctx.args])
â”‚ â”‚ +    params["source_files"] = file
â”‚ â”‚      if output is not None:
â”‚ â”‚ -        os.makedirs(output, exist_ok=True)
â”‚ â”‚ -        kwargs["output_dir"] = output
â”‚ â”‚ -    compile_result = solcix.compile.compile_files(file, **kwargs)
â”‚ â”‚ +        params["output_dir"] = output
â”‚ â”‚ +    try:
â”‚ â”‚ +        version = solcix.install_solc_from_solidity(source=file)
â”‚ â”‚ +        params["solc_version"] = version
â”‚ â”‚ +    except Exception as e:
â”‚ â”‚ +        print(e)
â”‚ â”‚ +        sys.exit(1)
â”‚ â”‚ +    compile_result = solcix.compile.compile_files(**params)
â”‚ â”‚      if output is not None:
â”‚ â”‚          print(f"Compilation result is saved in the output directory {output}.")
â”‚ â”‚      else:
â”‚ â”‚          if sys.stdout.isatty():
â”‚ â”‚              width = 70
â”‚ â”‚              wrapper = textwrap.TextWrapper(width=width, initial_indent="    ", subsequent_indent="    ")
â”‚ â”‚              for contract, result in compile_result.items():
â”‚ â”‚                  print(Fore.GREEN +  f"Contract: {contract}" )
â”‚ â”‚                  for field, value in result.items():
â”‚ â”‚                          print(Fore.BLUE + f"  {field}"+ Style.RESET_ALL)
â”‚ â”‚                          shortend_str = textwrap.shorten(f"    {value}", width=width*5, placeholder="...")
â”‚ â”‚                          padded_str = wrapper.fill(shortend_str)
â”‚ â”‚                          print(padded_str)
â”‚ â”‚              print(Fore.CYAN + "* Output to directory by", Fore.YELLOW + "`solcix compile <FILE> -o <output dir>`" + Style.RESET_ALL)
â”‚ â”‚ -            print(Fore.CYAN + "* Print to a single json file by", Fore.YELLOW + "`solcix compile <FILE> <filename>.json`" + Style.RESET_ALL, "to view whole result.")
â”‚ â”‚ +            print(Fore.CYAN + "* Print to a single json file by", Fore.YELLOW + "`solcix compile <FILE> <output file>.json`" + Style.RESET_ALL, "to view whole result.")
â”‚ â”‚          else:
â”‚ â”‚              print(json.dumps(compile_result, indent=4, sort_keys=True))
â”‚ â”‚  
â”‚ â”‚  
â”‚ â”‚  @cli.command()
â”‚ â”‚  @click.argument("file", nargs=1, required=True, type=click.Path(exists=True, dir_okay=False, readable=True))
â”‚ â”‚  @click.option("--recommand/--no-recommand", default=True, is_flag=True)
â”‚ â”‚ @@ -148,16 +171,15 @@
â”‚ â”‚  @cli.command()
â”‚ â”‚  def upgrade():
â”‚ â”‚      solcix.manage.upgrade_architecture()
â”‚ â”‚  
â”‚ â”‚  
â”‚ â”‚  def solc() -> None:
â”‚ â”‚      try:
â”‚ â”‚ -        current = solcix.manage.current_version()
â”‚ â”‚ -        version, _ = current
â”‚ â”‚ +        version, _  = solcix.current_version()
â”‚ â”‚          path = ARTIFACT_DIR.joinpath(f"solc-{version}", f"solc-{version}")
â”‚ â”‚          subprocess.run([str(path), *sys.argv[1:]], check=True)
â”‚ â”‚      except NotInstalledError as e:
â”‚ â”‚          print(Fore.RED + str(e) + Style.RESET_ALL)
â”‚ â”‚          sys.exit(1)
â”‚ â”‚      except subprocess.CalledProcessError as e:
â”‚ â”‚          sys.exit(e.returncode)
â”‚ â”‚   --- solcix-0.1.3/solcix/compile/solc.py
â”‚ â”œâ”€â”€ +++ solcix-0.1.4/solcix/compile/solc.py
â”‚ â”‚â”„ Files 2% similar despite different names
â”‚ â”‚ @@ -22,15 +22,15 @@
â”‚ â”‚  ) -> Tuple[str, str, List[str], subprocess.Popen]:
â”‚ â”‚      """
â”‚ â”‚      This is an `low level function` which execute the solc binary with given arguments and return stdout, stderr, command and Popen object.
â”‚ â”‚  
â”‚ â”‚      Parameters
â”‚ â”‚      ----------
â”‚ â”‚          - solc_path: Optional path to solc binary.
â”‚ â”‚ -            - default to `solc` if not provided.
â”‚ â”‚ +            - default to local or global `solc` if not provided.
â”‚ â”‚          - stdin: Optional string to pass as standard input to the solc process.
â”‚ â”‚          - source_files: Optional list of source files to compile.
â”‚ â”‚          - import_remappings: Optional import remappings as either dict, list or string.
â”‚ â”‚          - **kwargs: Optional solc options and values.
â”‚ â”‚  
â”‚ â”‚      Returns
â”‚ â”‚      -------
â”‚ â”‚ @@ -127,17 +127,15 @@
â”‚ â”‚      evm_version: Optional[str] = None,
â”‚ â”‚      revert_strings: Optional[Union[List[str], str]] = None,
â”‚ â”‚      metadata_hash: Optional[str] = None,
â”‚ â”‚      metadata_literal: bool = False,
â”‚ â”‚      optimize: bool = False,
â”‚ â”‚      optimize_runs: Optional[int] = None,
â”‚ â”‚      optimize_yul: bool = False,
â”‚ â”‚ -    no_optimize_yul: bool = True,
â”‚ â”‚      yul_optimizations: Optional[int] = None,
â”‚ â”‚ -    **kwargs: Any,
â”‚ â”‚  ):
â”‚ â”‚      """
â”‚ â”‚      Compile Solidity source code into EVM bytecode.
â”‚ â”‚  
â”‚ â”‚      Parameters:
â”‚ â”‚      -----------
â”‚ â”‚      - source : str
â”‚ â”‚ @@ -168,16 +166,14 @@
â”‚ â”‚          - Whether to use the metadata string as a literal or as a path to a file.
â”‚ â”‚      - optimize : bool
â”‚ â”‚          - Whether to enable bytecode optimization.
â”‚ â”‚      - optimize_runs : Optional[int]
â”‚ â”‚          - The number of optimization runs to perform.
â”‚ â”‚      - optimize_yul : bool
â”‚ â”‚          - Whether to optimize Yul code.
â”‚ â”‚ -    - no_optimize_yul : bool
â”‚ â”‚ -        - Whether to disable Yul optimization.
â”‚ â”‚      - yul_optimizations : Optional[int]
â”‚ â”‚          - The level of Yul optimizations to perform.
â”‚ â”‚  
â”‚ â”‚      Returns:
â”‚ â”‚      --------
â”‚ â”‚      A dictionary containing the compiled contract artifacts.
â”‚ â”‚      """
â”‚ â”‚ @@ -194,15 +190,14 @@
â”‚ â”‚          evm_version=evm_version,
â”‚ â”‚          revert_strings=revert_strings,
â”‚ â”‚          metadata_hash=metadata_hash,
â”‚ â”‚          metadata_literal=metadata_literal,
â”‚ â”‚          optimize=optimize,
â”‚ â”‚          optimize_runs=optimize_runs,
â”‚ â”‚          optimize_yul=optimize_yul,
â”‚ â”‚ -        no_optimize_yul=no_optimize_yul,
â”‚ â”‚          yul_optimizations=yul_optimizations,
â”‚ â”‚      )
â”‚ â”‚  
â”‚ â”‚  
â”‚ â”‚  def compile_files(
â”‚ â”‚      source_files: Union[List[Union[str, Path]], str, Path],
â”‚ â”‚      solc_path: Optional[Union[str, Path]] = None,
â”‚ â”‚ @@ -216,17 +211,15 @@
â”‚ â”‚      evm_version: Optional[str] = None,
â”‚ â”‚      revert_strings: Optional[Union[List[str], str]] = None,
â”‚ â”‚      metadata_hash: Optional[str] = None,
â”‚ â”‚      metadata_literal: bool = False,
â”‚ â”‚      optimize: bool = False,
â”‚ â”‚      optimize_runs: Optional[int] = None,
â”‚ â”‚      optimize_yul: bool = False,
â”‚ â”‚ -    no_optimize_yul: bool = True,
â”‚ â”‚      yul_optimizations: Optional[int] = None,
â”‚ â”‚ -    **kwargs: Any,
â”‚ â”‚  ):
â”‚ â”‚      """
â”‚ â”‚          Compile Solidity source code files into EVM bytecode.
â”‚ â”‚  
â”‚ â”‚      Parameters:
â”‚ â”‚      -----------
â”‚ â”‚      - source_files : Union[List[Union[str, Path]], str, Path]
â”‚ â”‚ @@ -284,28 +277,26 @@
â”‚ â”‚          evm_version=evm_version,
â”‚ â”‚          revert_strings=revert_strings,
â”‚ â”‚          metadata_hash=metadata_hash,
â”‚ â”‚          metadata_literal=metadata_literal,
â”‚ â”‚          optimize=optimize,
â”‚ â”‚          optimize_runs=optimize_runs,
â”‚ â”‚          optimize_yul=optimize_yul,
â”‚ â”‚ -        no_optimize_yul=no_optimize_yul,
â”‚ â”‚          yul_optimizations=yul_optimizations,
â”‚ â”‚      )
â”‚ â”‚  
â”‚ â”‚  
â”‚ â”‚  def compile_standard(
â”‚ â”‚      input_data: Dict[str, Any],
â”‚ â”‚      solc_path: Optional[Union[str, Path]] = None,
â”‚ â”‚      solc_version: Optional[str] = None,
â”‚ â”‚      base_path: Optional[str] = None,
â”‚ â”‚      allow_paths: Optional[Union[List[Union[str, Path]], str, Path]] = None,
â”‚ â”‚      output_dir: Optional[Union[str, Path]] = None,
â”‚ â”‚      overwrite: bool = False,
â”‚ â”‚ -    **kwargs: Any,
â”‚ â”‚  ) -> Dict[str, Any]:
â”‚ â”‚      """
â”‚ â”‚      Compile Solidity contracts from standard JSON input.
â”‚ â”‚  
â”‚ â”‚      Parameters:
â”‚ â”‚      - input_data (Dict[str, Any]): The standard JSON input containing the Solidity contract(s) to compile.
â”‚ â”‚      - solc_path (Optional[Union[str, Path]]): The path to the solc binary to use. If not specified, the latest version of solc available on the system will be used.
â”‚ â”‚ @@ -391,15 +382,26 @@
â”‚ â”‚      >>> _get_combined_json_outputs('/usr/local/bin/solc')
â”‚ â”‚      'bin,abi,interface,metadata,ir,ast'
â”‚ â”‚  
â”‚ â”‚      """
â”‚ â”‚      if solc_path is None:
â”‚ â”‚          solc_path = get_executable()
â”‚ â”‚  
â”‚ â”‚ -    help_str = solc_execute(solc_path=solc_path, help=True)[0].split("\n")
â”‚ â”‚ +    # help_str = solc_execute(solc_path=solc_path, help=True)[0].split("\n")
â”‚ â”‚ +
â”‚ â”‚ +    # Execute solc with the `--help` flag to get the combined JSON output options.
â”‚ â”‚ +    cmd = [str(solc_path), "--help"]
â”‚ â”‚ +    output = subprocess.run(
â”‚ â”‚ +        cmd,
â”‚ â”‚ +        check=False,
â”‚ â”‚ +        stdout=subprocess.PIPE,
â”‚ â”‚ +        stderr=subprocess.PIPE,
â”‚ â”‚ +    )
â”‚ â”‚ +    help_str = output.stdout.decode("utf-8").split("\n")
â”‚ â”‚ +
â”‚ â”‚      combined_json_args = next(i for i in help_str if i.startswith("  --combined-json"))
â”‚ â”‚      return combined_json_args.split(" ")[-1]
â”‚ â”‚  
â”‚ â”‚  
â”‚ â”‚  def _parse_compiler_output(stdout: str) -> Dict[str, Any]:
â”‚ â”‚      """
â”‚ â”‚      Parses the compiler output from JSON to a dictionary.
â”‚ â”‚   --- solcix-0.1.3/solcix/constant.py
â”‚ â”œâ”€â”€ +++ solcix-0.1.4/solcix/constant.py
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- solcix-0.1.3/solcix/datatypes/datatypes.py
â”‚ â”œâ”€â”€ +++ solcix-0.1.4/solcix/datatypes/datatypes.py
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- solcix-0.1.3/solcix/errors.py
â”‚ â”œâ”€â”€ +++ solcix-0.1.4/solcix/errors.py
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- solcix-0.1.3/solcix/installer.py
â”‚ â”œâ”€â”€ +++ solcix-0.1.4/solcix/installer.py
â”‚ â”‚â”„ Files 3% similar despite different names
â”‚ â”‚ @@ -3,40 +3,40 @@
â”‚ â”‚  import os
â”‚ â”‚  import shutil
â”‚ â”‚  import sys
â”‚ â”‚  from collections import defaultdict
â”‚ â”‚  from glob import glob
â”‚ â”‚  from os import access, makedirs
â”‚ â”‚  from pathlib import Path
â”‚ â”‚ -from typing import Iterable, List, Tuple, Union
â”‚ â”‚ +from typing import Iterable, List, Tuple, Union, Optional, Set, Dict, Any
â”‚ â”‚  from urllib.request import urlopen, urlretrieve
â”‚ â”‚  from zipfile import ZipFile
â”‚ â”‚  
â”‚ â”‚  from Crypto.Hash import keccak
â”‚ â”‚  from joblib import Memory
â”‚ â”‚  
â”‚ â”‚ -from solcix.__version__ import __version__
â”‚ â”‚  from solcix.constant import (
â”‚ â”‚      ARTIFACT_DIR,
â”‚ â”‚ +    SOLCIX_DIR,
â”‚ â”‚      CRYTIC_SOLC_ARTIFACTS,
â”‚ â”‚      CRYTIC_SOLC_JSON,
â”‚ â”‚      EarliestRelease,
â”‚ â”‚      Platform,
â”‚ â”‚  )
â”‚ â”‚  from solcix.datatypes import ProgressBar, Version
â”‚ â”‚  from solcix.errors import (
â”‚ â”‚      ChecksumMismatchError,
â”‚ â”‚      ChecksumMissingError,
â”‚ â”‚      NoSolcVersionInstalledError,
â”‚ â”‚      UnsupportedPlatformError,
â”‚ â”‚ +    NotInstalledError,
â”‚ â”‚  )
â”‚ â”‚  
â”‚ â”‚ -from .utils import is_valid_version
â”‚ â”‚ -
â”‚ â”‚ -cachedir = ARTIFACT_DIR.joinpath(".solcix", "cache", __version__)
â”‚ â”‚ +cachedir = ARTIFACT_DIR.joinpath(".solcix", "cache")
â”‚ â”‚ +os.makedirs(cachedir, exist_ok=True)
â”‚ â”‚  memory = Memory(cachedir, verbose=0)
â”‚ â”‚  
â”‚ â”‚  
â”‚ â”‚  def clear_cache() -> None:
â”‚ â”‚      """
â”‚ â”‚      Clears the cache directory used by `solc_execute` and `solcx.compile_*` functions.
â”‚ â”‚  
â”‚ â”‚ @@ -90,15 +90,15 @@
â”‚ â”‚      return (
â”‚ â”‚          f"https://binaries.soliditylang.org/{platform.value}/{artifact}",
â”‚ â”‚          f"https://binaries.soliditylang.org/{platform.value}/list.json",
â”‚ â”‚      )
â”‚ â”‚  
â”‚ â”‚  
â”‚ â”‚  @memory.cache
â”‚ â”‚ -def get_available_versions() -> Tuple[dict[str, str], str]:
â”‚ â”‚ +def get_available_versions() -> Tuple[Dict[str, str], str]:
â”‚ â”‚      """
â”‚ â”‚      Returns a tuple containing a dictionary of available Solidity compiler versions and the latest version.
â”‚ â”‚  
â”‚ â”‚      Returns
â”‚ â”‚      -------
â”‚ â”‚          tuple[dict[str], str]: A tuple containing a sorted dictionary of available Solidity compiler versions and the latest version.
â”‚ â”‚  
â”‚ â”‚ @@ -126,35 +126,82 @@
â”‚ â”‚              releases.update(extra)
â”‚ â”‚  
â”‚ â”‚      # Return the available versions and latest version as a tuple
â”‚ â”‚      releases = {k: v for k, v in sorted(releases.items(), key=lambda x: Version(x[0]))}
â”‚ â”‚      return releases, latest
â”‚ â”‚  
â”‚ â”‚  
â”‚ â”‚ -def get_installed_versions() -> set[str]:
â”‚ â”‚ +def get_installed_versions() -> Set[str]:
â”‚ â”‚      """Returns a set of installed versions."""
â”‚ â”‚      return {f.removeprefix("solc-") for f in glob("solc-*", root_dir=ARTIFACT_DIR)}
â”‚ â”‚  
â”‚ â”‚  
â”‚ â”‚ -def get_installable_versions() -> list[str]:
â”‚ â”‚ +def get_installable_versions() -> List[str]:
â”‚ â”‚      """Returns a list of installable versions ordered by version."""
â”‚ â”‚      releases, _ = get_available_versions()
â”‚ â”‚      installable = list(set(releases.keys()) - get_installed_versions())
â”‚ â”‚      installable.sort(key=Version)
â”‚ â”‚      return installable
â”‚ â”‚  
â”‚ â”‚  
â”‚ â”‚  def get_latest_version() -> str:
â”‚ â”‚      """Returns the latest version of Solidity."""
â”‚ â”‚      _, latest = get_available_versions()
â”‚ â”‚      return latest
â”‚ â”‚  
â”‚ â”‚  
â”‚ â”‚ +def current_version() -> Tuple[str, str]:
â”‚ â”‚ +    """
â”‚ â”‚ +    Get the current version of the Solidity compiler.
â”‚ â”‚ +    Local version takes precedence over global version.
â”‚ â”‚ +
â”‚ â”‚ +    Raises
â”‚ â”‚ +    ------
â”‚ â”‚ +    NotInstalledError
â”‚ â”‚ +        If no version is set.
â”‚ â”‚ +
â”‚ â”‚ +    Returns:
â”‚ â”‚ +    --------
â”‚ â”‚ +    A tuple containing the current version and the path of the version information.
â”‚ â”‚ +    """
â”‚ â”‚ +    if os.path.isfile(".solcix"):
â”‚ â”‚ +        with open(".solcix", "r", encoding="utf-8") as f:
â”‚ â”‚ +            version = f.read()
â”‚ â”‚ +            source = ".solcix"
â”‚ â”‚ +    else:
â”‚ â”‚ +        source: str = "SOLC_VERSION"
â”‚ â”‚ +        version: Any = os.environ.get(source)
â”‚ â”‚ +
â”‚ â”‚ +    if not version:
â”‚ â”‚ +        source_path = SOLCIX_DIR.joinpath("global-version")
â”‚ â”‚ +        source = source_path.as_posix()
â”‚ â”‚ +
â”‚ â”‚ +        if source_path.is_file():
â”‚ â”‚ +            with open(source_path, encoding="utf-8") as f:
â”‚ â”‚ +                version = f.read()
â”‚ â”‚ +        else:
â”‚ â”‚ +            raise NotInstalledError(
â”‚ â”‚ +                "ðŸ’« No solc version set. Run `solcix use global VERSION`, `solcix use local Version` or set SOLC_VERSION environment variable. ðŸ’«"
â”‚ â”‚ +            )
â”‚ â”‚ +
â”‚ â”‚ +    versions: List[str] = get_installed_versions()
â”‚ â”‚ +
â”‚ â”‚ +    if version not in versions:
â”‚ â”‚ +        raise NotInstalledError(
â”‚ â”‚ +            f"\nðŸ˜± Version '{version}' not installed (set by {source}). ðŸ˜±"
â”‚ â”‚ +            f"\nRun `solcix install {version}`."
â”‚ â”‚ +            f"\nOr use one of the following versions:\n"
â”‚ â”‚ +            f"{', '.join(versions)}"
â”‚ â”‚ +        )
â”‚ â”‚ +
â”‚ â”‚ +    return version, source
â”‚ â”‚ +
â”‚ â”‚ +
â”‚ â”‚  @memory.cache
â”‚ â”‚ -def _get_version_dict(releases: dict[str, str]) -> dict[int, dict[int, dict[int, str]]]:
â”‚ â”‚ +def _get_version_dict(releases: Dict[str, str]) -> Dict[int, Dict[int, Dict[int, str]]]:
â”‚ â”‚      """
â”‚ â”‚      Returns a nested dictionary of Solidity compiler releases, organized by major, minor, and patch version numbers.
â”‚ â”‚  
â”‚ â”‚      Parameters
â”‚ â”‚      ----------
â”‚ â”‚          releases (dict[str, str]): A sorted dictionary of Solidity compiler releases, where the keys are version numbers and the values are artifact names.
â”‚ â”‚  
â”‚ â”‚ @@ -185,15 +232,15 @@
â”‚ â”‚      for version, artifact in releases.items():
â”‚ â”‚          major, minor, patch = map(int, version.split("."))
â”‚ â”‚          version_dict[major][minor][patch] = artifact
â”‚ â”‚      return version_dict
â”‚ â”‚  
â”‚ â”‚  
â”‚ â”‚  @memory.cache
â”‚ â”‚ -def get_version_objects(releases: dict[str, str]) -> list[Version]:
â”‚ â”‚ +def get_version_objects(releases: Dict[str, str]) -> List[Version]:
â”‚ â”‚      """
â”‚ â”‚      Retrieve a list of Version objects from a dictionary of release versions.
â”‚ â”‚  
â”‚ â”‚      Parameters
â”‚ â”‚      ----------
â”‚ â”‚          releases: A dictionary of release versions, where the keys are version
â”‚ â”‚              strings and the values are release dates.
â”‚ â”‚ @@ -347,36 +394,46 @@
â”‚ â”‚          return EarliestRelease.LINUX.value
â”‚ â”‚      elif _get_platform() == Platform.MACOS:
â”‚ â”‚          return EarliestRelease.MACOS.value
â”‚ â”‚      elif _get_platform() == Platform.WINDOWS:
â”‚ â”‚          return EarliestRelease.WINDOWS.value
â”‚ â”‚  
â”‚ â”‚  
â”‚ â”‚ -def _get_default_solc_path(program: Union[str, Path]) -> Union[Path, None]:
â”‚ â”‚ -    def is_executable(path: Path) -> bool:
â”‚ â”‚ -        return path.is_file() and access(path, os.X_OK)
â”‚ â”‚ -
â”‚ â”‚ -    fpath, _ = os.path.split(program)
â”‚ â”‚ -    if fpath:
â”‚ â”‚ -        if is_executable(fpath):
â”‚ â”‚ -            return program
â”‚ â”‚ -    else:
â”‚ â”‚ -        for path in os.environ["PATH"].split(os.pathsep):
â”‚ â”‚ -            path = path.strip('"')
â”‚ â”‚ -            exe_file = Path(path).joinpath(program)
â”‚ â”‚ -            if is_executable(exe_file):
â”‚ â”‚ -                return exe_file
â”‚ â”‚ +def _get_default_solc_path() -> Optional[Path]:
â”‚ â”‚ +    """
â”‚ â”‚ +    Returns the default path to the solc binary.
â”‚ â”‚ +
â”‚ â”‚ +    The function tries to determine the current version of solc and returns the path to the solc binary
â”‚ â”‚ +    for that version. If the binary is not found or is not executable, None is returned.
â”‚ â”‚ +
â”‚ â”‚ +    Returns:
â”‚ â”‚ +        Path or None: The path to the solc binary for the current version of solc, or None if the binary
â”‚ â”‚ +        cannot be found or is not executable.
â”‚ â”‚ +    """
â”‚ â”‚ +    try:
â”‚ â”‚ +        version = None
â”‚ â”‚ +        _, path = current_version()
â”‚ â”‚ +        with open(path, "r") as f:
â”‚ â”‚ +            version = f.read().strip()
â”‚ â”‚ +        executable = ARTIFACT_DIR.joinpath(f"solc-{version}", f"solc-{version}")
â”‚ â”‚ +        executable = executable.as_posix()
â”‚ â”‚ +        # If the binary exists and is executable, return its path
â”‚ â”‚ +        if os.path.isfile(executable) and access(executable, os.X_OK):
â”‚ â”‚ +            return executable
â”‚ â”‚ +    except Exception as e:
â”‚ â”‚ +        print(e)
â”‚ â”‚ +    # If the binary cannot be found or is not executable, return None
â”‚ â”‚      return None
â”‚ â”‚  
â”‚ â”‚  
â”‚ â”‚  def install_solc(
â”‚ â”‚ -    versions: str | Iterable[str],
â”‚ â”‚ +    versions: Union[str, Iterable[str]],
â”‚ â”‚      use_cache: bool = True,
â”‚ â”‚      verbose: bool = True,
â”‚ â”‚ -) -> tuple[list[str], list[str], list[str]]:
â”‚ â”‚ +) -> Tuple[List[str], List[str], List[str]]:
â”‚ â”‚      """
â”‚ â”‚      Downloads and installs Solidity compiler versions specified in the `versions` parameter.
â”‚ â”‚  
â”‚ â”‚      Parameters
â”‚ â”‚      ----------
â”‚ â”‚      - versions : str | Iterable[str]
â”‚ â”‚          The version(s) of the Solidity compiler to download and install. If a string is provided,
â”‚ â”‚ @@ -483,20 +540,20 @@
â”‚ â”‚      return success, skipped, errors
â”‚ â”‚  
â”‚ â”‚  
â”‚ â”‚  def get_executable(
â”‚ â”‚      version: Union[str, Version] = None, solc_path: Union[Path, str] = None
â”‚ â”‚  ) -> Union[Path, None]:
â”‚ â”‚      """
â”‚ â”‚ -    Get the path of the installed solc binary.
â”‚ â”‚ +    Get the path of the installed solc binary. Default is the local or global installed solc binary.
â”‚ â”‚  
â”‚ â”‚      Parameters
â”‚ â”‚      ----------
â”‚ â”‚      version: str or Version, optional
â”‚ â”‚ -        The version of solc to look for. If None, returns the default installed solc binary.
â”‚ â”‚ +        The version of solc to look for. If None, returns local or global installed solc binary.
â”‚ â”‚      solc_path: Path or str, optional
â”‚ â”‚          The path to a solc binary. If provided, ignores version param and returns the path to the binary if it exists.
â”‚ â”‚  
â”‚ â”‚      Returns
â”‚ â”‚      -------
â”‚ â”‚      Path or None
â”‚ â”‚          Returns the path of the installed solc binary if it exists, otherwise returns None.
â”‚ â”‚ @@ -511,30 +568,29 @@
â”‚ â”‚          if executable_path.exists():
â”‚ â”‚              return executable_path
â”‚ â”‚          raise NoSolcVersionInstalledError(
â”‚ â”‚              f"solc binary not found at path: {executable_path}"
â”‚ â”‚          )
â”‚ â”‚  
â”‚ â”‚      if version is None:
â”‚ â”‚ -        default_executable_path = _get_default_solc_path("solc")
â”‚ â”‚ +        default_executable_path = _get_default_solc_path()
â”‚ â”‚          if default_executable_path is None:
â”‚ â”‚              raise NoSolcVersionInstalledError("No default solc binary found")
â”‚ â”‚          return default_executable_path
â”‚ â”‚  
â”‚ â”‚ -    artifact_parent = Path(ARTIFACT_DIR.joinpath(f"solc-{version}"))
â”‚ â”‚ -    artifact_path = Path(artifact_parent.joinpath(f"solc-{version}"))
â”‚ â”‚ +    artifact_path = Path(ARTIFACT_DIR.joinpath(f"solc-{version}"), f"solc-{version}")
â”‚ â”‚  
â”‚ â”‚      if not artifact_path.exists():
â”‚ â”‚          raise NoSolcVersionInstalledError(f"solc version {version} is not installed")
â”‚ â”‚  
â”‚ â”‚      return artifact_path
â”‚ â”‚  
â”‚ â”‚  
â”‚ â”‚  def uninstall_solc(
â”‚ â”‚ -    versions: str | Iterable[str],
â”‚ â”‚ +    versions: Union[str, Iterable[str]],
â”‚ â”‚      verbose: bool = True,
â”‚ â”‚  ) -> Tuple[List[str], List[str], List[str]]:
â”‚ â”‚      """
â”‚ â”‚          Uninstall solc version(s) by deleting their artifacts from disk.
â”‚ â”‚  
â”‚ â”‚      Parameters
â”‚ â”‚      ----------
â”‚ â”‚ â”œâ”€â”€ encoding
â”‚ â”‚ â”‚ @@ -1 +1 @@
â”‚ â”‚ â”‚ -us-ascii
â”‚ â”‚ â”‚ +utf-8
â”‚ â”‚   --- solcix-0.1.3/solcix/resolver.py
â”‚ â”œâ”€â”€ +++ solcix-0.1.4/solcix/resolver.py
â”‚ â”‚â”„ Files 2% similar despite different names
â”‚ â”‚ @@ -4,14 +4,15 @@
â”‚ â”‚  import os
â”‚ â”‚  from solcix.errors import NoCompatibleVersionError
â”‚ â”‚  from solcix.installer import (
â”‚ â”‚      get_earliest_release,
â”‚ â”‚      _get_version_dict,
â”‚ â”‚      get_version_objects,
â”‚ â”‚      get_available_versions,
â”‚ â”‚ +    get_installed_versions,
â”‚ â”‚      install_solc,
â”‚ â”‚  )
â”‚ â”‚  from solcix.datatypes import PRAGMA_TYPE, Version
â”‚ â”‚  
â”‚ â”‚  
â”‚ â”‚  def resolve_version_from_solidity(
â”‚ â”‚      source: Union[str, Path],
â”‚ â”‚ @@ -213,28 +214,33 @@
â”‚ â”‚      return None
â”‚ â”‚  
â”‚ â”‚  
â”‚ â”‚  def install_solc_from_solidity(
â”‚ â”‚      source: Union[str, Path],
â”‚ â”‚      version_resolver: Callable[[PRAGMA_TYPE], str] = None,
â”‚ â”‚      verbose: bool = True,
â”‚ â”‚ -):
â”‚ â”‚ +) -> str:
â”‚ â”‚      """
â”‚ â”‚      Install the solc version specified in the given source code.
â”‚ â”‚  
â”‚ â”‚      Parameters
â”‚ â”‚      ----------
â”‚ â”‚      - source : str | Path
â”‚ â”‚          - The source code or file path to parse for the solc version.
â”‚ â”‚      - version_resolver : Callable[[PRAGMA_TYPE], str], optional
â”‚ â”‚          - A function that takes a PRAGMA_TYPE and returns a recommended version, by default None
â”‚ â”‚          If not provided, `get_recommended_version` is used as default resolver.
â”‚ â”‚      - verbose : bool, optional
â”‚ â”‚          - Whether to print the installation progress, by default True
â”‚ â”‚  
â”‚ â”‚ +    Returns
â”‚ â”‚ +    -------
â”‚ â”‚ +    str
â”‚ â”‚ +        The version extracted by version resolver solc version.
â”‚ â”‚ +
â”‚ â”‚      Raises
â”‚ â”‚      ------
â”‚ â”‚      ValueError
â”‚ â”‚          If the solc version cannot be resolved from the source code.
â”‚ â”‚  
â”‚ â”‚      Notes
â”‚ â”‚      -----
â”‚ â”‚ @@ -254,8 +260,11 @@
â”‚ â”‚      smaller than the given version, or the maximum version of the previous minor
â”‚ â”‚      release if no such version exists.
â”‚ â”‚      """
â”‚ â”‚      version = resolve_version_from_solidity(source)
â”‚ â”‚      if version_resolver is None:
â”‚ â”‚          version_resolver = get_recommended_version
â”‚ â”‚      recommended_version = version_resolver(version)
â”‚ â”‚ -    install_solc(recommended_version, verbose=verbose)
â”‚ â”‚ +    installed = get_installed_versions()
â”‚ â”‚ +    if recommended_version not in installed:
â”‚ â”‚ +        install_solc(recommended_version, verbose=verbose)
â”‚ â”‚ +    return recommended_version
â”‚ â”‚   --- solcix-0.1.3/solcix/utils.py
â”‚ â”œâ”€â”€ +++ solcix-0.1.4/solcix/utils.py
â”‚ â”‚â”„ Files identical despite different names
â”‚ â”‚   --- solcix-0.1.3/PKG-INFO
â”‚ â”œâ”€â”€ +++ solcix-0.1.4/PKG-INFO
â”‚ â”‚â”„ Files 6% similar despite different names
â”‚ â”‚ @@ -1,10 +1,10 @@
â”‚ â”‚  Metadata-Version: 2.1
â”‚ â”‚  Name: solcix
â”‚ â”‚ -Version: 0.1.3
â”‚ â”‚ +Version: 0.1.4
â”‚ â”‚  Summary: A Python wrapper for the Solidity compiler. Switch between versions, compile, and manage artifacts.
â”‚ â”‚  Author: alan890104
â”‚ â”‚  Author-email: alan890104@gmail.com
â”‚ â”‚  Requires-Python: >=3.8,<4.0
â”‚ â”‚  Classifier: Programming Language :: Python :: 3
â”‚ â”‚  Classifier: Programming Language :: Python :: 3.8
â”‚ â”‚  Classifier: Programming Language :: Python :: 3.9
â”‚ â”‚ @@ -97,20 +97,20 @@
â”‚ â”‚  
â”‚ â”‚  ```bash
â”‚ â”‚  solcix versions
â”‚ â”‚  ```
â”‚ â”‚  
â”‚ â”‚  ### Listing installed Solidity compilers
â”‚ â”‚  
â”‚ â”‚ -The `versions` command can be used to list all available versions of the Solidity compiler:
â”‚ â”‚ +The `ls` command can be used to list all available versions of the Solidity compiler:
â”‚ â”‚  
â”‚ â”‚  Example usage:
â”‚ â”‚  
â”‚ â”‚  ```bash
â”‚ â”‚ -solcix installed
â”‚ â”‚ +solcix ls
â”‚ â”‚  ```
â”‚ â”‚  
â”‚ â”‚  If global / local version is set, it will be displayed as below:
â”‚ â”‚  
â”‚ â”‚  ```bash
â”‚ â”‚  0.8.19
â”‚ â”‚  0.5.2
â”‚ â”‚ @@ -159,15 +159,15 @@
â”‚ â”‚  
â”‚ â”‚  To uninstall all versions of Solidity compiler that have been installed using solcix, you can use the following command:
â”‚ â”‚  
â”‚ â”‚  ```bash
â”‚ â”‚  solcix prune
â”‚ â”‚  ```
â”‚ â”‚  
â”‚ â”‚ -This will remove all versions of the Solidity compiler that have been installed by solcix.
â”‚ â”‚ +This will remove all versions of the Solidity compilers that have been installed by solcix, all cached files, and the solcix configuration file (local config takes precedence over global config).
â”‚ â”‚  
â”‚ â”‚  ### Verify Solidity compilers
â”‚ â”‚  
â”‚ â”‚  The `verify` command is used to verify the checksums of installed solc binaries and to reinstall any that are malformed.
â”‚ â”‚  
â”‚ â”‚  Example usage:
â”‚ â”‚  
â”‚ â”‚ @@ -260,7 +260,15 @@
â”‚ â”‚  ```bash
â”‚ â”‚  pip3 install -U
â”‚ â”‚  
â”‚ â”‚  # Migrate to the new architecture and Reinstall all binaries
â”‚ â”‚  solcix upgrade
â”‚ â”‚  ```
â”‚ â”‚  
â”‚ â”‚ +### Project Acknowledgements
â”‚ â”‚ +
â”‚ â”‚ +We would like to thank the original projects [solc-select](https://github.com/crytic/solc-select) and [py-solc-x](https://github.com/ApeWorX/py-solc-x) for providing excellent code base, upon which we have optimized and improved to make the project more robust and user-friendly.
â”‚ â”‚ +
â”‚ â”‚ +Our project is an improved and optimized version of solc-select and py-solc-x, with more features and excellent performance.
â”‚ â”‚ +
â”‚ â”‚ +If you enjoyed the original projects, we strongly recommend trying out our project to enjoy a better user experience and more efficient code execution.
â”‚ â”‚ +
