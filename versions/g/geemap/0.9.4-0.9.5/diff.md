# Comparing `tmp/geemap-0.9.4.tar.gz` & `tmp/geemap-0.9.5.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "geemap-0.9.4.tar", last modified: Sun Oct 24 00:28:08 2021, max compression
+gzip compressed data, was "geemap-0.9.5.tar", last modified: Mon Nov 22 20:02:24 2021, max compression
```

## Comparing `geemap-0.9.4.tar` & `geemap-0.9.5.tar`

### file list

```diff
@@ -1,78 +1,80 @@
-drwxr-xr-x   0 runner    (1001) docker     (121)        0 2021-10-24 00:28:08.290351 geemap-0.9.4/
--rw-r--r--   0 runner    (1001) docker     (121)      336 2021-10-24 00:27:53.000000 geemap-0.9.4/AUTHORS.rst
--rw-r--r--   0 runner    (1001) docker     (121)     3501 2021-10-24 00:27:53.000000 geemap-0.9.4/CONTRIBUTING.rst
--rw-r--r--   0 runner    (1001) docker     (121)      316 2021-10-24 00:27:53.000000 geemap-0.9.4/HISTORY.rst
--rw-r--r--   0 runner    (1001) docker     (121)     1075 2021-10-24 00:27:53.000000 geemap-0.9.4/LICENSE
--rw-r--r--   0 runner    (1001) docker     (121)      414 2021-10-24 00:27:53.000000 geemap-0.9.4/MANIFEST.in
--rw-r--r--   0 runner    (1001) docker     (121)    28470 2021-10-24 00:28:08.290351 geemap-0.9.4/PKG-INFO
--rw-r--r--   0 runner    (1001) docker     (121)    27501 2021-10-24 00:27:53.000000 geemap-0.9.4/README.rst
-drwxr-xr-x   0 runner    (1001) docker     (121)        0 2021-10-24 00:28:08.274351 geemap-0.9.4/docs/
--rw-r--r--   0 runner    (1001) docker     (121)      607 2021-10-24 00:27:53.000000 geemap-0.9.4/docs/Makefile
--rw-r--r--   0 runner    (1001) docker     (121)       28 2021-10-24 00:27:53.000000 geemap-0.9.4/docs/authors.rst
--rw-r--r--   0 runner    (1001) docker     (121)     5713 2021-10-24 00:27:53.000000 geemap-0.9.4/docs/conf.py
--rw-r--r--   0 runner    (1001) docker     (121)       33 2021-10-24 00:27:53.000000 geemap-0.9.4/docs/contributing.rst
--rw-r--r--   0 runner    (1001) docker     (121)      952 2021-10-24 00:27:53.000000 geemap-0.9.4/docs/geemap.rst
--rw-r--r--   0 runner    (1001) docker     (121)       28 2021-10-24 00:27:53.000000 geemap-0.9.4/docs/history.rst
--rw-r--r--   0 runner    (1001) docker     (121)      303 2021-10-24 00:27:53.000000 geemap-0.9.4/docs/index.rst
--rw-r--r--   0 runner    (1001) docker     (121)     1098 2021-10-24 00:27:53.000000 geemap-0.9.4/docs/installation.rst
--rw-r--r--   0 runner    (1001) docker     (121)      768 2021-10-24 00:27:53.000000 geemap-0.9.4/docs/make.bat
--rw-r--r--   0 runner    (1001) docker     (121)       57 2021-10-24 00:27:53.000000 geemap-0.9.4/docs/modules.rst
--rw-r--r--   0 runner    (1001) docker     (121)       27 2021-10-24 00:27:53.000000 geemap-0.9.4/docs/readme.rst
-drwxr-xr-x   0 runner    (1001) docker     (121)        0 2021-10-24 00:28:08.278351 geemap-0.9.4/docs/source/
--rw-r--r--   0 runner    (1001) docker     (121)      952 2021-10-24 00:27:53.000000 geemap-0.9.4/docs/source/geemap.rst
--rw-r--r--   0 runner    (1001) docker     (121)       55 2021-10-24 00:27:53.000000 geemap-0.9.4/docs/source/modules.rst
--rw-r--r--   0 runner    (1001) docker     (121)       67 2021-10-24 00:27:53.000000 geemap-0.9.4/docs/usage.rst
-drwxr-xr-x   0 runner    (1001) docker     (121)        0 2021-10-24 00:28:08.282351 geemap-0.9.4/geemap/
--rw-r--r--   0 runner    (1001) docker     (121)      708 2021-10-24 00:27:53.000000 geemap-0.9.4/geemap/__init__.py
-drwxr-xr-x   0 runner    (1001) docker     (121)        0 2021-10-24 00:28:08.286351 geemap-0.9.4/geemap/algorithms/
--rw-r--r--   0 runner    (1001) docker     (121)    30879 2021-10-24 00:27:53.000000 geemap-0.9.4/geemap/algorithms/river.py
--rw-r--r--   0 runner    (1001) docker     (121)     8323 2021-10-24 00:27:53.000000 geemap-0.9.4/geemap/basemaps.py
--rw-r--r--   0 runner    (1001) docker     (121)    41137 2021-10-24 00:27:53.000000 geemap-0.9.4/geemap/cartoee.py
--rw-r--r--   0 runner    (1001) docker     (121)    14448 2021-10-24 00:27:53.000000 geemap-0.9.4/geemap/chart.py
--rw-r--r--   0 runner    (1001) docker     (121)      381 2021-10-24 00:27:53.000000 geemap-0.9.4/geemap/cli.py
--rw-r--r--   0 runner    (1001) docker     (121)     5688 2021-10-24 00:27:53.000000 geemap-0.9.4/geemap/colormaps.py
--rw-r--r--   0 runner    (1001) docker     (121)   293898 2021-10-24 00:27:53.000000 geemap-0.9.4/geemap/common.py
--rw-r--r--   0 runner    (1001) docker     (121)    39296 2021-10-24 00:27:53.000000 geemap-0.9.4/geemap/conversion.py
-drwxr-xr-x   0 runner    (1001) docker     (121)        0 2021-10-24 00:28:08.286351 geemap-0.9.4/geemap/data/
--rw-r--r--   0 runner    (1001) docker     (121)    70055 2021-10-24 00:27:53.000000 geemap-0.9.4/geemap/data/census_data.json
-drwxr-xr-x   0 runner    (1001) docker     (121)        0 2021-10-24 00:28:08.286351 geemap-0.9.4/geemap/data/fonts/
--rw-r--r--   0 runner    (1001) docker     (121)   275572 2021-10-24 00:27:53.000000 geemap-0.9.4/geemap/data/fonts/arial.ttf
-drwxr-xr-x   0 runner    (1001) docker     (121)        0 2021-10-24 00:28:08.286351 geemap-0.9.4/geemap/data/javascripts/
--rw-r--r--   0 runner    (1001) docker     (121)      811 2021-10-24 00:27:53.000000 geemap-0.9.4/geemap/data/javascripts/ClippedComposite.js
--rw-r--r--   0 runner    (1001) docker     (121)      195 2021-10-24 00:27:53.000000 geemap-0.9.4/geemap/data/javascripts/FromName.js
--rw-r--r--   0 runner    (1001) docker     (121)     1766 2021-10-24 00:27:53.000000 geemap-0.9.4/geemap/data/javascripts/ModisQaBands.js
--rw-r--r--   0 runner    (1001) docker     (121)     1004 2021-10-24 00:27:53.000000 geemap-0.9.4/geemap/data/javascripts/NormalizedDifference.js
--rw-r--r--   0 runner    (1001) docker     (121)     2327 2021-10-24 00:27:53.000000 geemap-0.9.4/geemap/data/javascripts/QualityMosaic.js
-drwxr-xr-x   0 runner    (1001) docker     (121)        0 2021-10-24 00:28:08.286351 geemap-0.9.4/geemap/data/python/
--rw-r--r--   0 runner    (1001) docker     (121)      928 2021-10-24 00:27:53.000000 geemap-0.9.4/geemap/data/python/javascript_to_python.py
-drwxr-xr-x   0 runner    (1001) docker     (121)        0 2021-10-24 00:28:08.290351 geemap-0.9.4/geemap/data/template/
--rw-r--r--   0 runner    (1001) docker     (121)     3340 2021-10-24 00:27:53.000000 geemap-0.9.4/geemap/data/template/NLCD.qml
--rw-r--r--   0 runner    (1001) docker     (121)   624326 2021-10-24 00:27:53.000000 geemap-0.9.4/geemap/data/template/ee_api_docs.csv
--rw-r--r--   0 runner    (1001) docker     (121)     1949 2021-10-24 00:27:53.000000 geemap-0.9.4/geemap/data/template/ee_api_docs.html
--rw-r--r--   0 runner    (1001) docker     (121)   201446 2021-10-24 00:27:53.000000 geemap-0.9.4/geemap/data/template/ee_data_catalog.csv
--rw-r--r--   0 runner    (1001) docker     (121)      530 2021-10-24 00:27:53.000000 geemap-0.9.4/geemap/data/template/ee_legend_table.txt
--rw-r--r--   0 runner    (1001) docker     (121)     1353 2021-10-24 00:27:53.000000 geemap-0.9.4/geemap/data/template/legend.html
--rw-r--r--   0 runner    (1001) docker     (121)     2197 2021-10-24 00:27:53.000000 geemap-0.9.4/geemap/data/template/legend.txt
--rw-r--r--   0 runner    (1001) docker     (121)     2943 2021-10-24 00:27:53.000000 geemap-0.9.4/geemap/data/template/template.py
--rw-r--r--   0 runner    (1001) docker     (121)     3128 2021-10-24 00:27:53.000000 geemap-0.9.4/geemap/data/template/toolbox.csv
--rw-r--r--   0 runner    (1001) docker     (121)     4943 2021-10-24 00:27:53.000000 geemap-0.9.4/geemap/datasets.py
--rw-r--r--   0 runner    (1001) docker     (121)    41926 2021-10-24 00:27:53.000000 geemap-0.9.4/geemap/eefolium.py
--rw-r--r--   0 runner    (1001) docker     (121)    47125 2021-10-24 00:27:53.000000 geemap-0.9.4/geemap/foliumap.py
--rw-r--r--   0 runner    (1001) docker     (121)   239256 2021-10-24 00:27:53.000000 geemap-0.9.4/geemap/geemap.py
--rw-r--r--   0 runner    (1001) docker     (121)    24904 2021-10-24 00:27:53.000000 geemap-0.9.4/geemap/legends.py
--rw-r--r--   0 runner    (1001) docker     (121)    16016 2021-10-24 00:27:53.000000 geemap-0.9.4/geemap/ml.py
--rw-r--r--   0 runner    (1001) docker     (121)   107861 2021-10-24 00:27:53.000000 geemap-0.9.4/geemap/toolbar.py
-drwxr-xr-x   0 runner    (1001) docker     (121)        0 2021-10-24 00:28:08.286351 geemap-0.9.4/geemap.egg-info/
--rw-r--r--   0 runner    (1001) docker     (121)    28470 2021-10-24 00:28:07.000000 geemap-0.9.4/geemap.egg-info/PKG-INFO
--rw-r--r--   0 runner    (1001) docker     (121)     1523 2021-10-24 00:28:08.000000 geemap-0.9.4/geemap.egg-info/SOURCES.txt
--rw-r--r--   0 runner    (1001) docker     (121)      334 2021-10-24 00:28:07.000000 geemap-0.9.4/geemap.egg-info/dependency_links.txt
--rw-r--r--   0 runner    (1001) docker     (121)       44 2021-10-24 00:28:07.000000 geemap-0.9.4/geemap.egg-info/entry_points.txt
--rw-r--r--   0 runner    (1001) docker     (121)        1 2021-10-24 00:28:07.000000 geemap-0.9.4/geemap.egg-info/not-zip-safe
--rw-r--r--   0 runner    (1001) docker     (121)      333 2021-10-24 00:28:07.000000 geemap-0.9.4/geemap.egg-info/requires.txt
--rw-r--r--   0 runner    (1001) docker     (121)        7 2021-10-24 00:28:07.000000 geemap-0.9.4/geemap.egg-info/top_level.txt
--rw-r--r--   0 runner    (1001) docker     (121)      333 2021-10-24 00:27:53.000000 geemap-0.9.4/requirements.txt
--rw-r--r--   0 runner    (1001) docker     (121)      410 2021-10-24 00:28:08.290351 geemap-0.9.4/setup.cfg
--rw-r--r--   0 runner    (1001) docker     (121)     1880 2021-10-24 00:27:53.000000 geemap-0.9.4/setup.py
-drwxr-xr-x   0 runner    (1001) docker     (121)        0 2021-10-24 00:28:08.290351 geemap-0.9.4/tests/
--rw-r--r--   0 runner    (1001) docker     (121)       36 2021-10-24 00:27:53.000000 geemap-0.9.4/tests/__init__.py
--rw-r--r--   0 runner    (1001) docker     (121)      473 2021-10-24 00:27:53.000000 geemap-0.9.4/tests/test_geemap.py
+drwxr-xr-x   0 runner    (1001) docker     (121)        0 2021-11-22 20:02:24.422750 geemap-0.9.5/
+-rw-r--r--   0 runner    (1001) docker     (121)      336 2021-11-22 20:02:07.000000 geemap-0.9.5/AUTHORS.rst
+-rw-r--r--   0 runner    (1001) docker     (121)     3501 2021-11-22 20:02:07.000000 geemap-0.9.5/CONTRIBUTING.rst
+-rw-r--r--   0 runner    (1001) docker     (121)      316 2021-11-22 20:02:07.000000 geemap-0.9.5/HISTORY.rst
+-rw-r--r--   0 runner    (1001) docker     (121)     1075 2021-11-22 20:02:07.000000 geemap-0.9.5/LICENSE
+-rw-r--r--   0 runner    (1001) docker     (121)      414 2021-11-22 20:02:07.000000 geemap-0.9.5/MANIFEST.in
+-rw-r--r--   0 runner    (1001) docker     (121)    28470 2021-11-22 20:02:24.422750 geemap-0.9.5/PKG-INFO
+-rw-r--r--   0 runner    (1001) docker     (121)    27501 2021-11-22 20:02:07.000000 geemap-0.9.5/README.rst
+drwxr-xr-x   0 runner    (1001) docker     (121)        0 2021-11-22 20:02:24.402750 geemap-0.9.5/docs/
+-rw-r--r--   0 runner    (1001) docker     (121)      607 2021-11-22 20:02:07.000000 geemap-0.9.5/docs/Makefile
+-rw-r--r--   0 runner    (1001) docker     (121)       28 2021-11-22 20:02:07.000000 geemap-0.9.5/docs/authors.rst
+-rw-r--r--   0 runner    (1001) docker     (121)     5713 2021-11-22 20:02:07.000000 geemap-0.9.5/docs/conf.py
+-rw-r--r--   0 runner    (1001) docker     (121)       33 2021-11-22 20:02:07.000000 geemap-0.9.5/docs/contributing.rst
+-rw-r--r--   0 runner    (1001) docker     (121)      952 2021-11-22 20:02:07.000000 geemap-0.9.5/docs/geemap.rst
+-rw-r--r--   0 runner    (1001) docker     (121)       28 2021-11-22 20:02:07.000000 geemap-0.9.5/docs/history.rst
+-rw-r--r--   0 runner    (1001) docker     (121)      303 2021-11-22 20:02:07.000000 geemap-0.9.5/docs/index.rst
+-rw-r--r--   0 runner    (1001) docker     (121)     1098 2021-11-22 20:02:07.000000 geemap-0.9.5/docs/installation.rst
+-rw-r--r--   0 runner    (1001) docker     (121)      768 2021-11-22 20:02:07.000000 geemap-0.9.5/docs/make.bat
+-rw-r--r--   0 runner    (1001) docker     (121)       57 2021-11-22 20:02:07.000000 geemap-0.9.5/docs/modules.rst
+-rw-r--r--   0 runner    (1001) docker     (121)       27 2021-11-22 20:02:07.000000 geemap-0.9.5/docs/readme.rst
+drwxr-xr-x   0 runner    (1001) docker     (121)        0 2021-11-22 20:02:24.402750 geemap-0.9.5/docs/source/
+-rw-r--r--   0 runner    (1001) docker     (121)      952 2021-11-22 20:02:07.000000 geemap-0.9.5/docs/source/geemap.rst
+-rw-r--r--   0 runner    (1001) docker     (121)       55 2021-11-22 20:02:07.000000 geemap-0.9.5/docs/source/modules.rst
+-rw-r--r--   0 runner    (1001) docker     (121)       67 2021-11-22 20:02:07.000000 geemap-0.9.5/docs/usage.rst
+drwxr-xr-x   0 runner    (1001) docker     (121)        0 2021-11-22 20:02:24.410750 geemap-0.9.5/geemap/
+-rw-r--r--   0 runner    (1001) docker     (121)      708 2021-11-22 20:02:07.000000 geemap-0.9.5/geemap/__init__.py
+drwxr-xr-x   0 runner    (1001) docker     (121)        0 2021-11-22 20:02:24.414750 geemap-0.9.5/geemap/algorithms/
+-rw-r--r--   0 runner    (1001) docker     (121)    30879 2021-11-22 20:02:07.000000 geemap-0.9.5/geemap/algorithms/river.py
+-rw-r--r--   0 runner    (1001) docker     (121)     8483 2021-11-22 20:02:07.000000 geemap-0.9.5/geemap/basemaps.py
+-rw-r--r--   0 runner    (1001) docker     (121)    41137 2021-11-22 20:02:07.000000 geemap-0.9.5/geemap/cartoee.py
+-rw-r--r--   0 runner    (1001) docker     (121)    14448 2021-11-22 20:02:07.000000 geemap-0.9.5/geemap/chart.py
+-rw-r--r--   0 runner    (1001) docker     (121)      381 2021-11-22 20:02:07.000000 geemap-0.9.5/geemap/cli.py
+-rw-r--r--   0 runner    (1001) docker     (121)     6010 2021-11-22 20:02:07.000000 geemap-0.9.5/geemap/colormaps.py
+-rw-r--r--   0 runner    (1001) docker     (121)   261271 2021-11-22 20:02:07.000000 geemap-0.9.5/geemap/common.py
+-rw-r--r--   0 runner    (1001) docker     (121)    39668 2021-11-22 20:02:07.000000 geemap-0.9.5/geemap/conversion.py
+drwxr-xr-x   0 runner    (1001) docker     (121)        0 2021-11-22 20:02:24.414750 geemap-0.9.5/geemap/data/
+-rw-r--r--   0 runner    (1001) docker     (121)    70055 2021-11-22 20:02:07.000000 geemap-0.9.5/geemap/data/census_data.json
+drwxr-xr-x   0 runner    (1001) docker     (121)        0 2021-11-22 20:02:24.414750 geemap-0.9.5/geemap/data/fonts/
+-rw-r--r--   0 runner    (1001) docker     (121)  1734080 2021-11-22 20:02:07.000000 geemap-0.9.5/geemap/data/fonts/alibaba.otf
+-rw-r--r--   0 runner    (1001) docker     (121)   275572 2021-11-22 20:02:07.000000 geemap-0.9.5/geemap/data/fonts/arial.ttf
+drwxr-xr-x   0 runner    (1001) docker     (121)        0 2021-11-22 20:02:24.418750 geemap-0.9.5/geemap/data/javascripts/
+-rw-r--r--   0 runner    (1001) docker     (121)      811 2021-11-22 20:02:07.000000 geemap-0.9.5/geemap/data/javascripts/ClippedComposite.js
+-rw-r--r--   0 runner    (1001) docker     (121)      195 2021-11-22 20:02:07.000000 geemap-0.9.5/geemap/data/javascripts/FromName.js
+-rw-r--r--   0 runner    (1001) docker     (121)     1766 2021-11-22 20:02:07.000000 geemap-0.9.5/geemap/data/javascripts/ModisQaBands.js
+-rw-r--r--   0 runner    (1001) docker     (121)     1004 2021-11-22 20:02:07.000000 geemap-0.9.5/geemap/data/javascripts/NormalizedDifference.js
+-rw-r--r--   0 runner    (1001) docker     (121)     2327 2021-11-22 20:02:07.000000 geemap-0.9.5/geemap/data/javascripts/QualityMosaic.js
+drwxr-xr-x   0 runner    (1001) docker     (121)        0 2021-11-22 20:02:24.418750 geemap-0.9.5/geemap/data/python/
+-rw-r--r--   0 runner    (1001) docker     (121)      928 2021-11-22 20:02:07.000000 geemap-0.9.5/geemap/data/python/javascript_to_python.py
+drwxr-xr-x   0 runner    (1001) docker     (121)        0 2021-11-22 20:02:24.422750 geemap-0.9.5/geemap/data/template/
+-rw-r--r--   0 runner    (1001) docker     (121)     3340 2021-11-22 20:02:07.000000 geemap-0.9.5/geemap/data/template/NLCD.qml
+-rw-r--r--   0 runner    (1001) docker     (121)   624326 2021-11-22 20:02:07.000000 geemap-0.9.5/geemap/data/template/ee_api_docs.csv
+-rw-r--r--   0 runner    (1001) docker     (121)     1949 2021-11-22 20:02:07.000000 geemap-0.9.5/geemap/data/template/ee_api_docs.html
+-rw-r--r--   0 runner    (1001) docker     (121)   201446 2021-11-22 20:02:07.000000 geemap-0.9.5/geemap/data/template/ee_data_catalog.csv
+-rw-r--r--   0 runner    (1001) docker     (121)      530 2021-11-22 20:02:07.000000 geemap-0.9.5/geemap/data/template/ee_legend_table.txt
+-rw-r--r--   0 runner    (1001) docker     (121)     1353 2021-11-22 20:02:07.000000 geemap-0.9.5/geemap/data/template/legend.html
+-rw-r--r--   0 runner    (1001) docker     (121)     2197 2021-11-22 20:02:07.000000 geemap-0.9.5/geemap/data/template/legend.txt
+-rw-r--r--   0 runner    (1001) docker     (121)     2943 2021-11-22 20:02:07.000000 geemap-0.9.5/geemap/data/template/template.py
+-rw-r--r--   0 runner    (1001) docker     (121)     3128 2021-11-22 20:02:07.000000 geemap-0.9.5/geemap/data/template/toolbox.csv
+-rw-r--r--   0 runner    (1001) docker     (121)     4943 2021-11-22 20:02:07.000000 geemap-0.9.5/geemap/datasets.py
+-rw-r--r--   0 runner    (1001) docker     (121)    41926 2021-11-22 20:02:07.000000 geemap-0.9.5/geemap/eefolium.py
+-rw-r--r--   0 runner    (1001) docker     (121)    49116 2021-11-22 20:02:07.000000 geemap-0.9.5/geemap/foliumap.py
+-rw-r--r--   0 runner    (1001) docker     (121)   239577 2021-11-22 20:02:07.000000 geemap-0.9.5/geemap/geemap.py
+-rw-r--r--   0 runner    (1001) docker     (121)    25340 2021-11-22 20:02:07.000000 geemap-0.9.5/geemap/legends.py
+-rw-r--r--   0 runner    (1001) docker     (121)    16016 2021-11-22 20:02:07.000000 geemap-0.9.5/geemap/ml.py
+-rw-r--r--   0 runner    (1001) docker     (121)   111900 2021-11-22 20:02:07.000000 geemap-0.9.5/geemap/timelapse.py
+-rw-r--r--   0 runner    (1001) docker     (121)   107890 2021-11-22 20:02:07.000000 geemap-0.9.5/geemap/toolbar.py
+drwxr-xr-x   0 runner    (1001) docker     (121)        0 2021-11-22 20:02:24.414750 geemap-0.9.5/geemap.egg-info/
+-rw-r--r--   0 runner    (1001) docker     (121)    28470 2021-11-22 20:02:23.000000 geemap-0.9.5/geemap.egg-info/PKG-INFO
+-rw-r--r--   0 runner    (1001) docker     (121)     1573 2021-11-22 20:02:24.000000 geemap-0.9.5/geemap.egg-info/SOURCES.txt
+-rw-r--r--   0 runner    (1001) docker     (121)      334 2021-11-22 20:02:23.000000 geemap-0.9.5/geemap.egg-info/dependency_links.txt
+-rw-r--r--   0 runner    (1001) docker     (121)       44 2021-11-22 20:02:23.000000 geemap-0.9.5/geemap.egg-info/entry_points.txt
+-rw-r--r--   0 runner    (1001) docker     (121)        1 2021-11-22 20:02:23.000000 geemap-0.9.5/geemap.egg-info/not-zip-safe
+-rw-r--r--   0 runner    (1001) docker     (121)      333 2021-11-22 20:02:23.000000 geemap-0.9.5/geemap.egg-info/requires.txt
+-rw-r--r--   0 runner    (1001) docker     (121)        7 2021-11-22 20:02:23.000000 geemap-0.9.5/geemap.egg-info/top_level.txt
+-rw-r--r--   0 runner    (1001) docker     (121)      333 2021-11-22 20:02:07.000000 geemap-0.9.5/requirements.txt
+-rw-r--r--   0 runner    (1001) docker     (121)      410 2021-11-22 20:02:24.422750 geemap-0.9.5/setup.cfg
+-rw-r--r--   0 runner    (1001) docker     (121)     1880 2021-11-22 20:02:07.000000 geemap-0.9.5/setup.py
+drwxr-xr-x   0 runner    (1001) docker     (121)        0 2021-11-22 20:02:24.422750 geemap-0.9.5/tests/
+-rw-r--r--   0 runner    (1001) docker     (121)       36 2021-11-22 20:02:07.000000 geemap-0.9.5/tests/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (121)      473 2021-11-22 20:02:07.000000 geemap-0.9.5/tests/test_geemap.py
```

### Comparing `geemap-0.9.4/CONTRIBUTING.rst` & `geemap-0.9.5/CONTRIBUTING.rst`

 * *Files identical despite different names*

### Comparing `geemap-0.9.4/LICENSE` & `geemap-0.9.5/LICENSE`

 * *Files identical despite different names*

### Comparing `geemap-0.9.4/PKG-INFO` & `geemap-0.9.5/PKG-INFO`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: geemap
-Version: 0.9.4
+Version: 0.9.5
 Summary: A Python package for interactive mapping using Google Earth Engine and ipyleaflet
 Home-page: https://github.com/giswqs/geemap
 Author: Qiusheng Wu
 Author-email: giswqs@gmail.com
 License: MIT license
 Keywords: geemap
 Platform: UNKNOWN
```

### Comparing `geemap-0.9.4/README.rst` & `geemap-0.9.5/README.rst`

 * *Files identical despite different names*

### Comparing `geemap-0.9.4/docs/Makefile` & `geemap-0.9.5/docs/Makefile`

 * *Files identical despite different names*

### Comparing `geemap-0.9.4/docs/conf.py` & `geemap-0.9.5/docs/conf.py`

 * *Files identical despite different names*

### Comparing `geemap-0.9.4/docs/geemap.rst` & `geemap-0.9.5/docs/geemap.rst`

 * *Files identical despite different names*

### Comparing `geemap-0.9.4/docs/installation.rst` & `geemap-0.9.5/docs/installation.rst`

 * *Files identical despite different names*

### Comparing `geemap-0.9.4/docs/make.bat` & `geemap-0.9.5/docs/make.bat`

 * *Files identical despite different names*

### Comparing `geemap-0.9.4/docs/source/geemap.rst` & `geemap-0.9.5/docs/source/geemap.rst`

 * *Files identical despite different names*

### Comparing `geemap-0.9.4/geemap/__init__.py` & `geemap-0.9.5/geemap/__init__.py`

 * *Files 2% similar despite different names*

```diff
@@ -1,12 +1,12 @@
 """Top-level package for geemap."""
 
 __author__ = """Qiusheng Wu"""
 __email__ = "giswqs@gmail.com"
-__version__ = "0.9.4"
+__version__ = "0.9.5"
 
 import os
 
 
 def in_colab_shell():
     """Tests if the code is being executed within Google Colab."""
     import sys
```

### Comparing `geemap-0.9.4/geemap/algorithms/river.py` & `geemap-0.9.5/geemap/algorithms/river.py`

 * *Files identical despite different names*

### Comparing `geemap-0.9.4/geemap/basemaps.py` & `geemap-0.9.5/geemap/basemaps.py`

 * *Files 1% similar despite different names*

```diff
@@ -18,29 +18,33 @@
 
 
 _ee_basemaps = {
     "ROADMAP": TileLayer(
         url="https://mt1.google.com/vt/lyrs=m&x={x}&y={y}&z={z}",
         attribution="Google",
         name="Google Maps",
+        max_zoom=24
     ),
     "SATELLITE": TileLayer(
         url="https://mt1.google.com/vt/lyrs=s&x={x}&y={y}&z={z}",
         attribution="Google",
         name="Google Satellite",
+        max_zoom=24
     ),
     "TERRAIN": TileLayer(
         url="https://mt1.google.com/vt/lyrs=p&x={x}&y={y}&z={z}",
         attribution="Google",
         name="Google Terrain",
+        max_zoom=24
     ),
     "HYBRID": TileLayer(
         url="https://mt1.google.com/vt/lyrs=y&x={x}&y={y}&z={z}",
         attribution="Google",
         name="Google Satellite",
+        max_zoom=24
     ),
     "ESRI": TileLayer(
         url="https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",
         attribution="Esri",
         name="Esri Satellite",
     ),
     "Esri Ocean": TileLayer(
@@ -104,29 +108,33 @@
         format="image/png",
         transparent=True,
     ),
     "Google Maps": TileLayer(
         url="https://mt1.google.com/vt/lyrs=m&x={x}&y={y}&z={z}",
         attribution="Google",
         name="Google Maps",
+        max_zoom=24
     ),
     "Google Satellite": TileLayer(
         url="https://mt1.google.com/vt/lyrs=s&x={x}&y={y}&z={z}",
         attribution="Google",
         name="Google Satellite",
+        max_zoom=24
     ),
     "Google Terrain": TileLayer(
         url="https://mt1.google.com/vt/lyrs=p&x={x}&y={y}&z={z}",
         attribution="Google",
         name="Google Terrain",
+        max_zoom=24
     ),
     "Google Satellite Hybrid": TileLayer(
         url="https://mt1.google.com/vt/lyrs=y&x={x}&y={y}&z={z}",
         attribution="Google",
         name="Google Satellite",
+        max_zoom=24
     ),
     "NLCD 2016 CONUS Land Cover": WMSLayer(
         url="https://www.mrlc.gov/geoserver/mrlc_display/NLCD_2016_Land_Cover_L48/wms?",
         layers="NLCD_2016_Land_Cover_L48",
         name="NLCD 2016 CONUS Land Cover",
         attribution="MRLC",
         format="image/png",
```

### Comparing `geemap-0.9.4/geemap/cartoee.py` & `geemap-0.9.5/geemap/cartoee.py`

 * *Files identical despite different names*

### Comparing `geemap-0.9.4/geemap/chart.py` & `geemap-0.9.5/geemap/chart.py`

 * *Files identical despite different names*

### Comparing `geemap-0.9.4/geemap/colormaps.py` & `geemap-0.9.5/geemap/colormaps.py`

 * *Files 10% similar despite different names*

```diff
@@ -25,37 +25,42 @@
     colors,
     vmin=0,
     vmax=1,
     width=6.0,
     height=0.4,
     orientation="horizontal",
     discrete=False,
+    return_fig=False,
 ):
     """Creates a colorbar based on custom colors.
 
     Args:
         colors (list): A list of hex colors.
         vmin (float, optional): The minimum value range. Defaults to 0.
         vmax (float, optional): The maximum value range. Defaults to 1.0.
         width (float, optional): The width of the colormap. Defaults to 6.0.
         height (float, optional): The height of the colormap. Defaults to 0.4.
         orientation (str, optional): The orientation of the colormap. Defaults to "horizontal".
         discrete (bool, optional): Whether to create a discrete colormap.
+        return_fig (bool, optional): Whether to return the figure. Defaults to False.
     """
     hexcodes = [i if i[0] == "#" else "#" + i for i in colors]
-    _, ax = plt.subplots(figsize=(width, height))
+    fig, ax = plt.subplots(figsize=(width, height))
     if discrete:
         cmap = mpl.colors.ListedColormap(hexcodes)
         vals = np.linspace(vmin, vmax, cmap.N + 1)
         norm = mpl.colors.BoundaryNorm(vals, cmap.N)
     else:
         cmap = mpl.colors.LinearSegmentedColormap.from_list("custom", hexcodes, N=256)
         norm = mpl.colors.Normalize(vmin=vmin, vmax=vmax)
     mpl.colorbar.ColorbarBase(ax, norm=norm, cmap=cmap, orientation=orientation)
-    plt.show()
+    if return_fig:
+        return fig
+    else:
+        plt.show()
 
 
 def list_colormaps():
     """List all available colormaps. See a complete lost of colormaps at https://matplotlib.org/stable/tutorials/colors/colormaps.html.
 
     Returns:
         list: The list of colormap names.
@@ -69,27 +74,29 @@
     height=0.4,
     orientation="horizontal",
     vmin=0,
     vmax=1.0,
     axis_off=True,
     show_name=False,
     font_size=12,
+    return_fig=False,
 ):
     """Plot a matplotlib colormap.
 
     Args:
         cmap (str): The name of the colormap.
         width (float, optional): The width of the colormap. Defaults to 8.0.
         height (float, optional): The height of the colormap. Defaults to 0.4.
         orientation (str, optional): The orientation of the colormap. Defaults to "horizontal".
         vmin (float, optional): The minimum value range. Defaults to 0.
         vmax (float, optional): The maximum value range. Defaults to 1.0.
         axis_off (bool, optional): Whether to turn axis off. Defaults to True.
         show_name (bool, optional): Whether to show the colormap name. Defaults to False.
         font_size (int, optional): Font size of the text. Defaults to 12.
+        return_fig (bool, optional): Whether to return the figure. Defaults to False.
     """
     fig, ax = plt.subplots(figsize=(width, height))
     col_map = plt.get_cmap(cmap)
 
     norm = mpl.colors.Normalize(vmin=vmin, vmax=vmax)
 
     mpl.colorbar.ColorbarBase(ax, norm=norm, cmap=col_map, orientation=orientation)
@@ -98,15 +105,18 @@
 
     if show_name:
         pos = list(ax.get_position().bounds)
         x_text = pos[0] - 0.01
         y_text = pos[1] + pos[3] / 2.0
         fig.text(x_text, y_text, cmap, va="center", ha="right", fontsize=font_size)
 
-    plt.show()
+    if return_fig:
+        return fig
+    else:
+        plt.show()
 
 
 def plot_colormaps(width=8.0, height=0.4):
     """Plot all available colormaps.
 
     Args:
         width (float, optional): Width of the colormap. Defaults to 8.0.
```

### Comparing `geemap-0.9.4/geemap/common.py` & `geemap-0.9.5/geemap/common.py`

 * *Files 4% similar despite different names*

```diff
@@ -36,15 +36,14 @@
 #     "get_cog_mosaic",
 #     "get_cog_tile",
 #     "get_stac_center",
 #     "get_stac_tile",
 #     "get_center",
 #     "kml_to_geojson",
 #     "is_tool",
-#     "landsat_ts_gif",
 #     "latlon_from_text",
 #     "minimum_bounding_box",
 #     "random_string",
 #     "reduce_gif_size",
 #     "rgb_to_hex",
 #     "search_ee_data",
 #     "sentinel2_timeseries",
@@ -1052,34 +1051,45 @@
     csv_to_geojson(in_csv, out_geojson, latitude, longitude, encoding)
 
     gdf = gpd.read_file(out_geojson)
     os.remove(out_geojson)
     return gdf
 
 
-def geojson_to_ee(geo_json, geodesic=True):
+def geojson_to_ee(geo_json, geodesic=False, encoding="utf-8"):
     """Converts a geojson to ee.Geometry()
 
     Args:
         geo_json (dict): A geojson geometry dictionary or file path.
-        geodesic (bool, optional): Whether line segments should be interpreted as spherical geodesics. If false, indicates that line segments should be interpreted as planar lines in the specified CRS. If absent, defaults to true if the CRS is geographic (including the default EPSG:4326), or to false if the CRS is projected.
+        geodesic (bool, optional): Whether line segments should be interpreted as spherical geodesics. If false, indicates that line segments should be interpreted as planar lines in the specified CRS. If absent, defaults to true if the CRS is geographic (including the default EPSG:4326), or to false if the CRS is projected. Defaults to False.
+        encoding (str, optional): The encoding of characters. Defaults to "utf-8".
 
     Returns:
         ee_object: An ee.Geometry object
     """
 
     try:
 
-        # import json
-
-        if not isinstance(geo_json, dict) and os.path.isfile(geo_json):
-            with open(os.path.abspath(geo_json), encoding="utf-8") as f:
-                geo_json = json.load(f)
+        if isinstance(geo_json, str):
+            if geo_json.startswith("http") and geo_json.endswith(".geojson"):
+                out_geojson = temp_file_path(extension=".geojson")
+                download_from_url(geo_json, out_geojson, verbose=False)
+                with open(out_geojson, "r", encoding=encoding) as f:
+                    geo_json = json.loads(f.read())
+                os.remove(out_geojson)
+
+            elif os.path.isfile(geo_json):
+                with open(os.path.abspath(geo_json), encoding=encoding) as f:
+                    geo_json = json.load(f)
 
+        # geo_json["geodesic"] = geodesic
         if geo_json["type"] == "FeatureCollection":
+            for feature in geo_json["features"]:
+                if feature["geometry"]["type"] != "Point":
+                    feature["geometry"]["geodesic"] = geodesic
             features = ee.FeatureCollection(geo_json["features"])
             return features
         elif geo_json["type"] == "Feature":
             geom = None
             keys = geo_json["properties"]["style"].keys()
             if "radius" in keys:  # Checks whether it is a circle
                 geom = ee.Geometry(geo_json["geometry"])
@@ -1803,25 +1813,31 @@
             )
 
     except Exception as e:
         print(e)
 
 
 def get_image_thumbnail(
-    ee_object, out_img, vis_params, dimensions=500, region=None, format="png"
+    ee_object,
+    out_img,
+    vis_params,
+    dimensions=500,
+    region=None,
+    format="jpg",
+    crs="EPSG:3857",
 ):
     """Download a thumbnail for an ee.Image.
 
     Args:
         ee_object (object): The ee.Image instance.
         out_img (str): The output file path to the png thumbnail.
         vis_params (dict): The visualization parameters.
         dimensions (int, optional):(a number or pair of numbers in format WIDTHxHEIGHT) Maximum dimensions of the thumbnail to render, in pixels. If only one number is passed, it is used as the maximum, and the other dimension is computed by proportional scaling. Defaults to 500.
         region (object, optional): Geospatial region of the image to render, it may be an ee.Geometry, GeoJSON, or an array of lat/lon points (E,S,W,N). If not set the default is the bounds image. Defaults to None.
-        format (str, optional): Either 'png' or 'jpg'. Default to 'png'.
+        format (str, optional): Either 'png' or 'jpg'. Default to 'jpg'.
     """
     import requests
 
     if not isinstance(ee_object, ee.Image):
         raise TypeError("The ee_object must be an ee.Image.")
 
     ext = os.path.splitext(out_img)[1][1:]
@@ -1836,14 +1852,15 @@
         os.makedirs(out_dir)
 
     if region is not None:
         vis_params["region"] = region
 
     vis_params["dimensions"] = dimensions
     vis_params["format"] = format
+    vis_params["crs"] = crs
     url = ee_object.getThumbURL(vis_params)
 
     r = requests.get(url, stream=True)
     if r.status_code != 200:
         print("An error occurred while downloading.")
     else:
         with open(out_img, "wb") as fd:
@@ -1853,27 +1870,27 @@
 
 def get_image_collection_thumbnails(
     ee_object,
     out_dir,
     vis_params,
     dimensions=500,
     region=None,
-    format="png",
+    format="jpg",
     names=None,
     verbose=True,
 ):
     """Download thumbnails for all images in an ImageCollection.
 
     Args:
         ee_object (object): The ee.ImageCollection instance.
         out_dir ([str): The output directory to store thumbnails.
         vis_params (dict): The visualization parameters.
         dimensions (int, optional):(a number or pair of numbers in format WIDTHxHEIGHT) Maximum dimensions of the thumbnail to render, in pixels. If only one number is passed, it is used as the maximum, and the other dimension is computed by proportional scaling. Defaults to 500.
         region (object, optional): Geospatial region of the image to render, it may be an ee.Geometry, GeoJSON, or an array of lat/lon points (E,S,W,N). If not set the default is the bounds image. Defaults to None.
-        format (str, optional): Either 'png' or 'jpg'. Default to 'png'.
+        format (str, optional): Either 'png' or 'jpg'. Default to 'jpg'.
         names (list, optional): The list of output file names. Defaults to None.
         verbose (bool, optional): Whether or not to print hints. Defaults to True.
     """
     if not isinstance(ee_object, ee.ImageCollection):
         print("The ee_object must be an ee.ImageCollection.")
         raise TypeError("The ee_object must be an ee.Image.")
 
@@ -1896,15 +1913,15 @@
             names = ee_object.aggregate_array("system:index").getInfo()
 
         images = ee_object.toList(count)
 
         for i in range(0, count):
             image = ee.Image(images.get(i))
             name = str(names[i])
-            ext = os.path.splitext(name)[0][1:]
+            ext = os.path.splitext(name)[1][1:]
             if ext != format:
                 name = name + "." + format
             out_img = os.path.join(out_dir, name)
             if verbose:
                 print(f"Downloading {i+1}/{count}: {name} ...")
 
             get_image_thumbnail(image, out_img, vis_params, dimensions, region, format)
@@ -2196,1151 +2213,14 @@
             return outfile
 
     except Exception as e:
         print(e)
 
 
 ########################################
-#     EE Timeseries and Timelapse      #
-########################################
-
-
-def naip_timeseries(roi=None, start_year=2003, end_year=2021, RGBN=False):
-    """Creates NAIP annual timeseries
-
-    Args:
-        roi (object, optional): An ee.Geometry representing the region of interest. Defaults to None.
-        start_year (int, optional): Starting year for the timeseries. Defaults to 2003.
-        end_year (int, optional): Ending year for the timeseries. Defaults to 2021.
-        RGBN (bool, optional): Whether to retrieve 4-band NAIP imagery only.
-    Returns:
-        object: An ee.ImageCollection representing annual NAIP imagery.
-    """
-    try:
-
-        def get_annual_NAIP(year):
-            try:
-                collection = ee.ImageCollection("USDA/NAIP/DOQQ")
-                if roi is not None:
-                    collection = collection.filterBounds(roi)
-                start_date = ee.Date.fromYMD(year, 1, 1)
-                end_date = ee.Date.fromYMD(year, 12, 31)
-                naip = collection.filterDate(start_date, end_date)
-                if RGBN:
-                    naip = naip.filter(ee.Filter.listContains("system:band_names", "N"))
-                naip = ee.Image(ee.ImageCollection(naip).mosaic())
-                return naip
-            except Exception as e:
-                raise Exception(e)
-
-        years = ee.List.sequence(start_year, end_year)
-        collection = ee.ImageCollection(years.map(get_annual_NAIP))
-        return collection
-
-    except Exception as e:
-        raise Exception(e)
-
-
-def sentinel2_timeseries(
-    roi=None,
-    start_year=2015,
-    end_year=2019,
-    start_date="01-01",
-    end_date="12-31",
-    apply_fmask=True,
-):
-    """Generates an annual Sentinel 2 ImageCollection. This algorithm is adapted from https://gist.github.com/jdbcode/76b9ac49faf51627ebd3ff988e10adbc. A huge thank you to Justin Braaten for sharing his fantastic work.
-       Images include both level 1C and level 2A imagery.
-    Args:
-
-        roi (object, optional): Region of interest to create the timelapse. Defaults to None.
-        start_year (int, optional): Starting year for the timelapse. Defaults to 2015.
-        end_year (int, optional): Ending year for the timelapse. Defaults to 2019.
-        start_date (str, optional): Starting date (month-day) each year for filtering ImageCollection. Defaults to '01-01'.
-        end_date (str, optional): Ending date (month-day) each year for filtering ImageCollection. Defaults to '12-31'.
-        apply_fmask (bool, optional): Whether to apply Fmask (Function of mask) for automated clouds, cloud shadows, snow, and water masking.
-    Returns:
-        object: Returns an ImageCollection containing annual Sentinel 2 images.
-    """
-    ################################################################################
-
-    ################################################################################
-    # Input and output parameters.
-    import re
-
-    # import datetime
-
-    if roi is None:
-        # roi = ee.Geometry.Polygon(
-        #     [[[-180, -80],
-        #       [-180, 80],
-        #         [180, 80],
-        #         [180, -80],
-        #         [-180, -80]]], None, False)
-        roi = ee.Geometry.Polygon(
-            [
-                [
-                    [-115.471773, 35.892718],
-                    [-115.471773, 36.409454],
-                    [-114.271283, 36.409454],
-                    [-114.271283, 35.892718],
-                    [-115.471773, 35.892718],
-                ]
-            ],
-            None,
-            False,
-        )
-
-    if not isinstance(roi, ee.Geometry):
-
-        try:
-            roi = roi.geometry()
-        except Exception as e:
-            print("Could not convert the provided roi to ee.Geometry")
-            print(e)
-            return
-
-    # Adjusts longitudes less than -180 degrees or greater than 180 degrees.
-    geojson = ee_to_geojson(roi)
-    geojson = adjust_longitude(geojson)
-    roi = ee.Geometry(geojson)
-
-    ################################################################################
-    # Setup vars to get dates.
-    if isinstance(start_year, int) and (start_year >= 2015) and (start_year <= 2021):
-        pass
-    else:
-        print("The start year must be an integer >= 2015.")
-        return
-
-    if isinstance(end_year, int) and (end_year >= 2015) and (end_year <= 2021):
-        pass
-    else:
-        print("The end year must be an integer <= 2021.")
-        return
-
-    if re.match("[0-9]{2}\-[0-9]{2}", start_date) and re.match(
-        "[0-9]{2}\-[0-9]{2}", end_date
-    ):
-        pass
-    else:
-        print("The start data and end date must be month-day, such as 06-10, 09-20")
-        return
-
-    try:
-        datetime.datetime(int(start_year), int(start_date[:2]), int(start_date[3:5]))
-        datetime.datetime(int(end_year), int(end_date[:2]), int(end_date[3:5]))
-    except Exception as e:
-        raise ValueError("The input dates are invalid.")
-
-    try:
-        start_test = datetime.datetime(
-            int(start_year), int(start_date[:2]), int(start_date[3:5])
-        )
-        end_test = datetime.datetime(
-            int(end_year), int(end_date[:2]), int(end_date[3:5])
-        )
-        if start_test > end_test:
-            raise ValueError("Start date must be prior to end date")
-    except Exception as e:
-        raise Exception(e)
-
-    def days_between(d1, d2):
-        d1 = datetime.datetime.strptime(d1, "%Y-%m-%d")
-        d2 = datetime.datetime.strptime(d2, "%Y-%m-%d")
-        return abs((d2 - d1).days)
-
-    n_days = days_between(
-        str(start_year) + "-" + start_date, str(start_year) + "-" + end_date
-    )
-    start_month = int(start_date[:2])
-    start_day = int(start_date[3:5])
-    # start_date = str(start_year) + "-" + start_date
-    # end_date = str(end_year) + "-" + end_date
-
-    # # Define a collection filter by date, bounds, and quality.
-    # def colFilter(col, aoi):  # , startDate, endDate):
-    #     return(col.filterBounds(aoi))
-
-    # Get Sentinel 2 collections, both Level-1C (top of atmophere) and Level-2A (surface reflectance)
-    MSILCcol = ee.ImageCollection("COPERNICUS/S2")
-    MSI2Acol = ee.ImageCollection("COPERNICUS/S2_SR")
-
-    # Define a collection filter by date, bounds, and quality.
-    def colFilter(col, roi, start_date, end_date):
-        return col.filterBounds(roi).filterDate(start_date, end_date)
-        # .filter('CLOUD_COVER < 5')
-        # .filter('GEOMETRIC_RMSE_MODEL < 15')
-        # .filter('IMAGE_QUALITY == 9 || IMAGE_QUALITY_OLI == 9'))
-
-    # Function to get and rename bands of interest from MSI
-    def renameMSI(img):
-        return img.select(
-            ["B2", "B3", "B4", "B5", "B6", "B7", "B8", "B8A", "B11", "B12", "QA60"],
-            [
-                "Blue",
-                "Green",
-                "Red",
-                "Red Edge 1",
-                "Red Edge 2",
-                "Red Edge 3",
-                "NIR",
-                "Red Edge 4",
-                "SWIR1",
-                "SWIR2",
-                "QA60",
-            ],
-        )
-
-    # Add NBR for LandTrendr segmentation.
-
-    def calcNbr(img):
-        return img.addBands(
-            img.normalizedDifference(["NIR", "SWIR2"]).multiply(-10000).rename("NBR")
-        ).int16()
-
-    # Define function to mask out clouds and cloud shadows in images.
-    # Use CFmask band included in USGS Landsat SR image product.
-
-    def fmask(img):
-        cloudOpaqueBitMask = 1 << 10
-        cloudCirrusBitMask = 1 << 11
-        qa = img.select("QA60")
-        mask = (
-            qa.bitwiseAnd(cloudOpaqueBitMask)
-            .eq(0)
-            .And(qa.bitwiseAnd(cloudCirrusBitMask).eq(0))
-        )
-        return img.updateMask(mask)
-
-    # Define function to prepare MSI images.
-    def prepMSI(img):
-        orig = img
-        img = renameMSI(img)
-        if apply_fmask:
-            img = fmask(img)
-        return ee.Image(img.copyProperties(orig, orig.propertyNames())).resample(
-            "bicubic"
-        )
-
-    # Get annual median collection.
-    def getAnnualComp(y):
-        startDate = ee.Date.fromYMD(
-            ee.Number(y), ee.Number(start_month), ee.Number(start_day)
-        )
-        endDate = startDate.advance(ee.Number(n_days), "day")
-
-        # Filter collections and prepare them for merging.
-        MSILCcoly = colFilter(MSILCcol, roi, startDate, endDate).map(prepMSI)
-        MSI2Acoly = colFilter(MSI2Acol, roi, startDate, endDate).map(prepMSI)
-
-        # Merge the collections.
-        col = MSILCcoly.merge(MSI2Acoly)
-
-        yearImg = col.median()
-        nBands = yearImg.bandNames().size()
-        yearImg = ee.Image(ee.Algorithms.If(nBands, yearImg, dummyImg))
-        return calcNbr(yearImg).set(
-            {"year": y, "system:time_start": startDate.millis(), "nBands": nBands}
-        )
-
-    ################################################################################
-
-    # Make a dummy image for missing years.
-    bandNames = ee.List(
-        [
-            "Blue",
-            "Green",
-            "Red",
-            "Red Edge 1",
-            "Red Edge 2",
-            "Red Edge 3",
-            "NIR",
-            "Red Edge 4",
-            "SWIR1",
-            "SWIR2",
-            "QA60",
-        ]
-    )
-    fillerValues = ee.List.repeat(0, bandNames.size())
-    dummyImg = ee.Image.constant(fillerValues).rename(bandNames).selfMask().int16()
-
-    ################################################################################
-    # Get a list of years
-    years = ee.List.sequence(start_year, end_year)
-
-    ################################################################################
-    # Make list of annual image composites.
-    imgList = years.map(getAnnualComp)
-
-    # Convert image composite list to collection
-    imgCol = ee.ImageCollection.fromImages(imgList)
-
-    imgCol = imgCol.map(lambda img: img.clip(roi))
-
-    return imgCol
-
-
-def landsat_timeseries(
-    roi=None,
-    start_year=1984,
-    end_year=2020,
-    start_date="06-10",
-    end_date="09-20",
-    apply_fmask=True,
-):
-    """Generates an annual Landsat ImageCollection. This algorithm is adapted from https://gist.github.com/jdbcode/76b9ac49faf51627ebd3ff988e10adbc. A huge thank you to Justin Braaten for sharing his fantastic work.
-
-    Args:
-        roi (object, optional): Region of interest to create the timelapse. Defaults to None.
-        start_year (int, optional): Starting year for the timelapse. Defaults to 1984.
-        end_year (int, optional): Ending year for the timelapse. Defaults to 2020.
-        start_date (str, optional): Starting date (month-day) each year for filtering ImageCollection. Defaults to '06-10'.
-        end_date (str, optional): Ending date (month-day) each year for filtering ImageCollection. Defaults to '09-20'.
-        apply_fmask (bool, optional): Whether to apply Fmask (Function of mask) for automated clouds, cloud shadows, snow, and water masking.
-    Returns:
-        object: Returns an ImageCollection containing annual Landsat images.
-    """
-
-    ################################################################################
-    # Input and output parameters.
-    import re
-
-    # import datetime
-
-    if roi is None:
-        roi = ee.Geometry.Polygon(
-            [
-                [
-                    [-115.471773, 35.892718],
-                    [-115.471773, 36.409454],
-                    [-114.271283, 36.409454],
-                    [-114.271283, 35.892718],
-                    [-115.471773, 35.892718],
-                ]
-            ],
-            None,
-            False,
-        )
-
-    if not isinstance(roi, ee.Geometry):
-
-        try:
-            roi = roi.geometry()
-        except Exception as e:
-            print("Could not convert the provided roi to ee.Geometry")
-            print(e)
-            return
-
-    ################################################################################
-
-    # Setup vars to get dates.
-    if isinstance(start_year, int) and (start_year >= 1984) and (start_year < 2021):
-        pass
-    else:
-        print("The start year must be an integer >= 1984.")
-        return
-
-    if isinstance(end_year, int) and (end_year > 1984) and (end_year <= 2021):
-        pass
-    else:
-        print("The end year must be an integer <= 2021.")
-        return
-
-    if re.match("[0-9]{2}\-[0-9]{2}", start_date) and re.match(
-        "[0-9]{2}\-[0-9]{2}", end_date
-    ):
-        pass
-    else:
-        print("The start date and end date must be month-day, such as 06-10, 09-20")
-        return
-
-    try:
-        datetime.datetime(int(start_year), int(start_date[:2]), int(start_date[3:5]))
-        datetime.datetime(int(end_year), int(end_date[:2]), int(end_date[3:5]))
-    except Exception as e:
-        print("The input dates are invalid.")
-        raise Exception(e)
-
-    def days_between(d1, d2):
-        d1 = datetime.datetime.strptime(d1, "%Y-%m-%d")
-        d2 = datetime.datetime.strptime(d2, "%Y-%m-%d")
-        return abs((d2 - d1).days)
-
-    n_days = days_between(
-        str(start_year) + "-" + start_date, str(start_year) + "-" + end_date
-    )
-    start_month = int(start_date[:2])
-    start_day = int(start_date[3:5])
-    # start_date = str(start_year) + "-" + start_date
-    # end_date = str(end_year) + "-" + end_date
-
-    # # Define a collection filter by date, bounds, and quality.
-    # def colFilter(col, aoi):  # , startDate, endDate):
-    #     return(col.filterBounds(aoi))
-
-    # Landsat collection preprocessingEnabled
-    # Get Landsat surface reflectance collections for OLI, ETM+ and TM sensors.
-    LC08col = ee.ImageCollection("LANDSAT/LC08/C01/T1_SR")
-    LE07col = ee.ImageCollection("LANDSAT/LE07/C01/T1_SR")
-    LT05col = ee.ImageCollection("LANDSAT/LT05/C01/T1_SR")
-    LT04col = ee.ImageCollection("LANDSAT/LT04/C01/T1_SR")
-
-    # Define a collection filter by date, bounds, and quality.
-    def colFilter(col, roi, start_date, end_date):
-        return col.filterBounds(roi).filterDate(start_date, end_date)
-        # .filter('CLOUD_COVER < 5')
-        # .filter('GEOMETRIC_RMSE_MODEL < 15')
-        # .filter('IMAGE_QUALITY == 9 || IMAGE_QUALITY_OLI == 9'))
-
-    # Function to get and rename bands of interest from OLI.
-    def renameOli(img):
-        return img.select(
-            ["B2", "B3", "B4", "B5", "B6", "B7", "pixel_qa"],
-            ["Blue", "Green", "Red", "NIR", "SWIR1", "SWIR2", "pixel_qa"],
-        )
-
-    # Function to get and rename bands of interest from ETM+.
-    def renameEtm(img):
-        return img.select(
-            ["B1", "B2", "B3", "B4", "B5", "B7", "pixel_qa"],
-            ["Blue", "Green", "Red", "NIR", "SWIR1", "SWIR2", "pixel_qa"],
-        )
-
-    # Add NBR for LandTrendr segmentation.
-    def calcNbr(img):
-        return img.addBands(
-            img.normalizedDifference(["NIR", "SWIR2"]).multiply(-10000).rename("NBR")
-        ).int16()
-
-    # Define function to mask out clouds and cloud shadows in images.
-    # Use CFmask band included in USGS Landsat SR image product.
-    def fmask(img):
-        cloudShadowBitMask = 1 << 3
-        cloudsBitMask = 1 << 5
-        qa = img.select("pixel_qa")
-        mask = (
-            qa.bitwiseAnd(cloudShadowBitMask)
-            .eq(0)
-            .And(qa.bitwiseAnd(cloudsBitMask).eq(0))
-        )
-        return img.updateMask(mask)
-
-    # Define function to prepare OLI images.
-    def prepOli(img):
-        orig = img
-        img = renameOli(img)
-        if apply_fmask:
-            img = fmask(img)
-        return ee.Image(img.copyProperties(orig, orig.propertyNames())).resample(
-            "bicubic"
-        )
-
-    # Define function to prepare ETM+ images.
-    def prepEtm(img):
-        orig = img
-        img = renameEtm(img)
-        if apply_fmask:
-            img = fmask(img)
-        return ee.Image(img.copyProperties(orig, orig.propertyNames())).resample(
-            "bicubic"
-        )
-
-    # Get annual median collection.
-    def getAnnualComp(y):
-        startDate = ee.Date.fromYMD(
-            ee.Number(y), ee.Number(start_month), ee.Number(start_day)
-        )
-        endDate = startDate.advance(ee.Number(n_days), "day")
-
-        # Filter collections and prepare them for merging.
-        LC08coly = colFilter(LC08col, roi, startDate, endDate).map(prepOli)
-        LE07coly = colFilter(LE07col, roi, startDate, endDate).map(prepEtm)
-        LT05coly = colFilter(LT05col, roi, startDate, endDate).map(prepEtm)
-        LT04coly = colFilter(LT04col, roi, startDate, endDate).map(prepEtm)
-
-        # Merge the collections.
-        col = LC08coly.merge(LE07coly).merge(LT05coly).merge(LT04coly)
-
-        yearImg = col.median()
-        nBands = yearImg.bandNames().size()
-        yearImg = ee.Image(ee.Algorithms.If(nBands, yearImg, dummyImg))
-        return calcNbr(yearImg).set(
-            {"year": y, "system:time_start": startDate.millis(), "nBands": nBands}
-        )
-
-    ################################################################################
-
-    # Make a dummy image for missing years.
-    bandNames = ee.List(["Blue", "Green", "Red", "NIR", "SWIR1", "SWIR2", "pixel_qa"])
-    fillerValues = ee.List.repeat(0, bandNames.size())
-    dummyImg = ee.Image.constant(fillerValues).rename(bandNames).selfMask().int16()
-
-    ################################################################################
-    # Get a list of years
-    years = ee.List.sequence(start_year, end_year)
-
-    ################################################################################
-    # Make list of annual image composites.
-    imgList = years.map(getAnnualComp)
-
-    # Convert image composite list to collection
-    imgCol = ee.ImageCollection.fromImages(imgList)
-
-    imgCol = imgCol.map(
-        lambda img: img.clip(roi).set({"coordinates": roi.coordinates()})
-    )
-
-    return imgCol
-
-    # ################################################################################
-    # # Run LandTrendr.
-    # lt = ee.Algorithms.TemporalSegmentation.LandTrendr(
-    #     timeSeries=imgCol.select(['NBR', 'SWIR1', 'NIR', 'Green']),
-    #     maxSegments=10,
-    #     spikeThreshold=0.7,
-    #     vertexCountOvershoot=3,
-    #     preventOneYearRecovery=True,
-    #     recoveryThreshold=0.5,
-    #     pvalThreshold=0.05,
-    #     bestModelProportion=0.75,
-    #     minObservationsNeeded=6)
-
-    # ################################################################################
-    # # Get fitted imagery. This starts export tasks.
-    # def getYearStr(year):
-    #     return(ee.String('yr_').cat(ee.Algorithms.String(year).slice(0,4)))
-
-    # yearsStr = years.map(getYearStr)
-
-    # r = lt.select(['SWIR1_fit']).arrayFlatten([yearsStr]).toShort()
-    # g = lt.select(['NIR_fit']).arrayFlatten([yearsStr]).toShort()
-    # b = lt.select(['Green_fit']).arrayFlatten([yearsStr]).toShort()
-
-    # for i, c in zip([r, g, b], ['r', 'g', 'b']):
-    #     descr = 'mamore-river-'+c
-    #     name = 'users/user/'+descr
-    #     print(name)
-    #     task = ee.batch.Export.image.toAsset(
-    #     image=i,
-    #     region=roi.getInfo()['coordinates'],
-    #     assetId=name,
-    #     description=descr,
-    #     scale=30,
-    #     crs='EPSG:3857',
-    #     maxPixels=1e13)
-    #     task.start()
-
-
-def modis_timeseries(
-    asset_id="MODIS/006/MOD13A2",
-    band_name=None,
-    roi=None,
-    start_year=2001,
-    end_year=2021,
-    start_date="01-01",
-    end_date="12-31",
-):
-    """Generates a Monthly MODIS ImageCollection.
-    Args:
-        asset_id (str, optional): The asset id the MODIS ImageCollection.
-        band_name (str, optional): The band name of the image to use.
-        roi (object, optional): Region of interest to create the timelapse. Defaults to None.
-        start_year (int, optional): Starting year for the timelapse. Defaults to 1984.
-        end_year (int, optional): Ending year for the timelapse. Defaults to 2020.
-        start_date (str, optional): Starting date (month-day) each year for filtering ImageCollection. Defaults to '06-10'.
-        end_date (str, optional): Ending date (month-day) each year for filtering ImageCollection. Defaults to '09-20'.
-    Returns:
-        object: Returns an ImageCollection containing month MODIS images.
-    """
-
-    try:
-        collection = ee.ImageCollection(asset_id)
-        if band_name is None:
-            band_name = collection.first().bandNames().getInfo()[0]
-        collection = collection.select(band_name)
-        if roi is not None:
-            if isinstance(roi, ee.Geometry):
-                collection = ee.ImageCollection(
-                    collection.map(lambda img: img.clip(roi))
-                )
-            elif isinstance(roi, ee.FeatureCollection):
-                collection = ee.ImageCollection(
-                    collection.map(lambda img: img.clipToCollection(roi))
-                )
-
-        start = str(start_year) + "-" + start_date
-        end = str(end_year) + "-" + end_date
-
-        seq = date_sequence(start, end, "month")
-
-        def monthly_modis(start_d):
-
-            end_d = ee.Date(start_d).advance(1, "month")
-            return ee.Image(collection.filterDate(start_d, end_d).mean())
-
-        images = ee.ImageCollection(seq.map(monthly_modis))
-        return images
-
-    except Exception as e:
-        raise Exception(e)
-
-
-def landsat_ts_gif(
-    roi=None,
-    out_gif=None,
-    start_year=1984,
-    end_year=2020,
-    start_date="06-10",
-    end_date="09-20",
-    bands=["NIR", "Red", "Green"],
-    vis_params=None,
-    dimensions=768,
-    frames_per_second=10,
-    apply_fmask=True,
-    nd_bands=None,
-    nd_threshold=0,
-    nd_palette=["black", "blue"],
-):
-    """Generates a Landsat timelapse GIF image. This function is adapted from https://emaprlab.users.earthengine.app/view/lt-gee-time-series-animator. A huge thank you to Justin Braaten for sharing his fantastic work.
-
-    Args:
-        roi (object, optional): Region of interest to create the timelapse. Defaults to None.
-        out_gif (str, optional): File path to the output animated GIF. Defaults to None.
-        start_year (int, optional): Starting year for the timelapse. Defaults to 1984.
-        end_year (int, optional): Ending year for the timelapse. Defaults to 2019.
-        start_date (str, optional): Starting date (month-day) each year for filtering ImageCollection. Defaults to '06-10'.
-        end_date (str, optional): Ending date (month-day) each year for filtering ImageCollection. Defaults to '09-20'.
-        bands (list, optional): Three bands selected from ['Blue', 'Green', 'Red', 'NIR', 'SWIR1', 'SWIR2', 'pixel_qa']. Defaults to ['NIR', 'Red', 'Green'].
-        vis_params (dict, optional): Visualization parameters. Defaults to None.
-        dimensions (int, optional): a number or pair of numbers in format WIDTHxHEIGHT) Maximum dimensions of the thumbnail to render, in pixels. If only one number is passed, it is used as the maximum, and the other dimension is computed by proportional scaling. Defaults to 768.
-        frames_per_second (int, optional): Animation speed. Defaults to 10.
-        apply_fmask (bool, optional): Whether to apply Fmask (Function of mask) for automated clouds, cloud shadows, snow, and water masking.
-        nd_bands (list, optional): A list of names specifying the bands to use, e.g., ['Green', 'SWIR1']. The normalized difference is computed as (first  second) / (first + second). Note that negative input values are forced to 0 so that the result is confined to the range (-1, 1).
-        nd_threshold (float, optional): The threshold for extacting pixels from the normalized difference band.
-        nd_palette (list, optional): The color palette to use for displaying the normalized difference band.
-
-    Returns:
-        str: File path to the output GIF image.
-    """
-
-    # ee_initialize()
-
-    if roi is None:
-        roi = ee.Geometry.Polygon(
-            [
-                [
-                    [-115.471773, 35.892718],
-                    [-115.471773, 36.409454],
-                    [-114.271283, 36.409454],
-                    [-114.271283, 35.892718],
-                    [-115.471773, 35.892718],
-                ]
-            ],
-            None,
-            False,
-        )
-    elif isinstance(roi, ee.Feature) or isinstance(roi, ee.FeatureCollection):
-        roi = roi.geometry()
-    elif isinstance(roi, ee.Geometry):
-        pass
-    else:
-        print("The provided roi is invalid. It must be an ee.Geometry")
-        return
-
-    if out_gif is None:
-        out_dir = os.path.join(os.path.expanduser("~"), "Downloads")
-        filename = "landsat_ts_" + random_string() + ".gif"
-        out_gif = os.path.join(out_dir, filename)
-    elif not out_gif.endswith(".gif"):
-        print("The output file must end with .gif")
-        return
-    # elif not os.path.isfile(out_gif):
-    #     print('The output file must be a file')
-    #     return
-    else:
-        out_gif = os.path.abspath(out_gif)
-        out_dir = os.path.dirname(out_gif)
-
-    if not os.path.exists(out_dir):
-        os.makedirs(out_dir)
-
-    allowed_bands = ["Blue", "Green", "Red", "NIR", "SWIR1", "SWIR2", "pixel_qa"]
-
-    if len(bands) == 3 and all(x in allowed_bands for x in bands):
-        pass
-    else:
-        raise Exception(
-            "You can only select 3 bands from the following: {}".format(
-                ", ".join(allowed_bands)
-            )
-        )
-
-    if nd_bands is not None:
-        if len(nd_bands) == 2 and all(x in allowed_bands[:-1] for x in nd_bands):
-            pass
-        else:
-            raise Exception(
-                "You can only select two bands from the following: {}".format(
-                    ", ".join(allowed_bands[:-1])
-                )
-            )
-
-    try:
-        col = landsat_timeseries(
-            roi, start_year, end_year, start_date, end_date, apply_fmask
-        )
-
-        if vis_params is None:
-            vis_params = {}
-            vis_params["bands"] = bands
-            vis_params["min"] = 0
-            vis_params["max"] = 4000
-            vis_params["gamma"] = [1, 1, 1]
-
-        video_args = vis_params.copy()
-        video_args["dimensions"] = dimensions
-        video_args["region"] = roi
-        video_args["framesPerSecond"] = frames_per_second
-        video_args["crs"] = "EPSG:3857"
-
-        if "bands" not in video_args.keys():
-            video_args["bands"] = bands
-
-        if "min" not in video_args.keys():
-            video_args["min"] = 0
-
-        if "max" not in video_args.keys():
-            video_args["max"] = 4000
-
-        if "gamma" not in video_args.keys():
-            video_args["gamma"] = [1, 1, 1]
-
-        download_ee_video(col, video_args, out_gif)
-
-        if nd_bands is not None:
-            nd_images = landsat_ts_norm_diff(
-                col, bands=nd_bands, threshold=nd_threshold
-            )
-            out_nd_gif = out_gif.replace(".gif", "_nd.gif")
-            landsat_ts_norm_diff_gif(
-                nd_images,
-                out_gif=out_nd_gif,
-                vis_params=None,
-                palette=nd_palette,
-                dimensions=dimensions,
-                frames_per_second=frames_per_second,
-            )
-
-        return out_gif
-
-    except Exception as e:
-        print(e)
-
-
-def add_text_to_gif(
-    in_gif,
-    out_gif,
-    xy=None,
-    text_sequence=None,
-    font_type="arial.ttf",
-    font_size=20,
-    font_color="#000000",
-    add_progress_bar=True,
-    progress_bar_color="white",
-    progress_bar_height=5,
-    duration=100,
-    loop=0,
-):
-    """Adds animated text to a GIF image.
-
-    Args:
-        in_gif (str): The file path to the input GIF image.
-        out_gif (str): The file path to the output GIF image.
-        xy (tuple, optional): Top left corner of the text. It can be formatted like this: (10, 10) or ('15%', '25%'). Defaults to None.
-        text_sequence (int, str, list, optional): Text to be drawn. It can be an integer number, a string, or a list of strings. Defaults to None.
-        font_type (str, optional): Font type. Defaults to "arial.ttf".
-        font_size (int, optional): Font size. Defaults to 20.
-        font_color (str, optional): Font color. It can be a string (e.g., 'red'), rgb tuple (e.g., (255, 127, 0)), or hex code (e.g., '#ff00ff').  Defaults to '#000000'.
-        add_progress_bar (bool, optional): Whether to add a progress bar at the bottom of the GIF. Defaults to True.
-        progress_bar_color (str, optional): Color for the progress bar. Defaults to 'white'.
-        progress_bar_height (int, optional): Height of the progress bar. Defaults to 5.
-        duration (int, optional): controls how long each frame will be displayed for, in milliseconds. It is the inverse of the frame rate. Setting it to 100 milliseconds gives 10 frames per second. You can decrease the duration to give a smoother animation.. Defaults to 100.
-        loop (int, optional): controls how many times the animation repeats. The default, 1, means that the animation will play once and then stop (displaying the last frame). A value of 0 means that the animation will repeat forever. Defaults to 0.
-
-    """
-    # import io
-    import warnings
-
-    import pkg_resources
-    from PIL import Image, ImageDraw, ImageFont, ImageSequence
-
-    warnings.simplefilter("ignore")
-    pkg_dir = os.path.dirname(pkg_resources.resource_filename("geemap", "geemap.py"))
-    default_font = os.path.join(pkg_dir, "data/fonts/arial.ttf")
-
-    in_gif = os.path.abspath(in_gif)
-    out_gif = os.path.abspath(out_gif)
-
-    if not os.path.exists(in_gif):
-        print("The input gif file does not exist.")
-        return
-
-    if not os.path.exists(os.path.dirname(out_gif)):
-        os.makedirs(os.path.dirname(out_gif))
-
-    if font_type == "arial.ttf":
-        font = ImageFont.truetype(default_font, font_size)
-    else:
-        try:
-            font_list = system_fonts(show_full_path=True)
-            font_names = [os.path.basename(f) for f in font_list]
-            if (font_type in font_list) or (font_type in font_names):
-                font = ImageFont.truetype(font_type, font_size)
-            else:
-                print(
-                    "The specified font type could not be found on your system. Using the default font instead."
-                )
-                font = ImageFont.truetype(default_font, font_size)
-        except Exception as e:
-            print(e)
-            font = ImageFont.truetype(default_font, font_size)
-
-    color = check_color(font_color)
-    progress_bar_color = check_color(progress_bar_color)
-
-    try:
-        image = Image.open(in_gif)
-    except Exception as e:
-        print("An error occurred while opening the gif.")
-        print(e)
-        return
-
-    count = image.n_frames
-    W, H = image.size
-    progress_bar_widths = [i * 1.0 / count * W for i in range(1, count + 1)]
-    progress_bar_shapes = [
-        [(0, H - progress_bar_height), (x, H)] for x in progress_bar_widths
-    ]
-
-    if xy is None:
-        # default text location is 5% width and 5% height of the image.
-        xy = (int(0.05 * W), int(0.05 * H))
-    elif (xy is not None) and (not isinstance(xy, tuple)) and (len(xy) == 2):
-        print("xy must be a tuple, e.g., (10, 10), ('10%', '10%')")
-        return
-    elif all(isinstance(item, int) for item in xy) and (len(xy) == 2):
-        x, y = xy
-        if (x > 0) and (x < W) and (y > 0) and (y < H):
-            pass
-        else:
-            print(
-                f"xy is out of bounds. x must be within [0, {W}], and y must be within [0, {H}]"
-            )
-            return
-    elif all(isinstance(item, str) for item in xy) and (len(xy) == 2):
-        x, y = xy
-        if ("%" in x) and ("%" in y):
-            try:
-                x = int(float(x.replace("%", "")) / 100.0 * W)
-                y = int(float(y.replace("%", "")) / 100.0 * H)
-                xy = (x, y)
-            except Exception:
-                raise Exception(
-                    "The specified xy is invalid. It must be formatted like this ('10%', '10%')"
-                )
-    else:
-        print(
-            "The specified xy is invalid. It must be formatted like this: (10, 10) or ('10%', '10%')"
-        )
-        return
-
-    if text_sequence is None:
-        text = [str(x) for x in range(1, count + 1)]
-    elif isinstance(text_sequence, int):
-        text = [str(x) for x in range(text_sequence, text_sequence + count + 1)]
-    elif isinstance(text_sequence, str):
-        try:
-            text_sequence = int(text_sequence)
-            text = [str(x) for x in range(text_sequence, text_sequence + count + 1)]
-        except Exception:
-            text = [text_sequence] * count
-    elif isinstance(text_sequence, list) and len(text_sequence) != count:
-        print(
-            f"The length of the text sequence must be equal to the number ({count}) of frames in the gif."
-        )
-        return
-    else:
-        text = [str(x) for x in text_sequence]
-
-    try:
-
-        frames = []
-        # Loop over each frame in the animated image
-        for index, frame in enumerate(ImageSequence.Iterator(image)):
-            # Draw the text on the frame
-            frame = frame.convert("RGB")
-            draw = ImageDraw.Draw(frame)
-            # w, h = draw.textsize(text[index])
-            draw.text(xy, text[index], font=font, fill=color)
-            if add_progress_bar:
-                draw.rectangle(progress_bar_shapes[index], fill=progress_bar_color)
-            del draw
-
-            b = io.BytesIO()
-            frame.save(b, format="GIF")
-            frame = Image.open(b)
-
-            frames.append(frame)
-        # https://www.pythoninformer.com/python-libraries/pillow/creating-animated-gif/
-        # Save the frames as a new image
-
-        frames[0].save(
-            out_gif,
-            save_all=True,
-            append_images=frames[1:],
-            duration=duration,
-            loop=loop,
-            optimize=True,
-        )
-    except Exception as e:
-        print(e)
-
-
-def add_image_to_gif(
-    in_gif, out_gif, in_image, xy=None, image_size=(80, 80), circle_mask=False
-):
-    """Adds an image logo to a GIF image.
-
-    Args:
-        in_gif (str): Input file path to the GIF image.
-        out_gif (str): Output file path to the GIF image.
-        in_image (str): Input file path to the image.
-        xy (tuple, optional): Top left corner of the text. It can be formatted like this: (10, 10) or ('15%', '25%'). Defaults to None.
-        image_size (tuple, optional): Resize image. Defaults to (80, 80).
-        circle_mask (bool, optional): Whether to apply a circle mask to the image. This only works with non-png images. Defaults to False.
-    """
-    # import io
-    import warnings
-
-    from PIL import Image, ImageDraw, ImageSequence
-
-    warnings.simplefilter("ignore")
-
-    in_gif = os.path.abspath(in_gif)
-
-    is_url = False
-    if in_image.startswith("http"):
-        is_url = True
-
-    if not os.path.exists(in_gif):
-        print("The input gif file does not exist.")
-        return
-
-    if (not is_url) and (not os.path.exists(in_image)):
-        print("The provided logo file does not exist.")
-        return
-
-    if not os.path.exists(os.path.dirname(out_gif)):
-        os.makedirs(os.path.dirname(out_gif))
-
-    try:
-        image = Image.open(in_gif)
-    except Exception as e:
-        print("An error occurred while opening the image.")
-        print(e)
-        return
-
-    logo_raw_image = None
-    try:
-        if in_image.startswith("http"):
-            logo_raw_image = open_image_from_url(in_image)
-        else:
-            in_image = os.path.abspath(in_image)
-            logo_raw_image = Image.open(in_image)
-    except Exception as e:
-        print(e)
-
-    logo_raw_size = logo_raw_image.size
-    image_size = min(logo_raw_size[0], image_size[0]), min(
-        logo_raw_size[1], image_size[1]
-    )
-
-    logo_image = logo_raw_image.convert("RGBA")
-    logo_image.thumbnail(image_size, Image.ANTIALIAS)
-
-    W, H = image.size
-    mask_im = None
-
-    if circle_mask:
-        mask_im = Image.new("L", image_size, 0)
-        draw = ImageDraw.Draw(mask_im)
-        draw.ellipse((0, 0, image_size[0], image_size[1]), fill=255)
-
-    if has_transparency(logo_raw_image):
-        mask_im = logo_image.copy()
-
-    if xy is None:
-        # default logo location is 5% width and 5% height of the image.
-        xy = (int(0.05 * W), int(0.05 * H))
-    elif (xy is not None) and (not isinstance(xy, tuple)) and (len(xy) == 2):
-        print("xy must be a tuple, e.g., (10, 10), ('10%', '10%')")
-        return
-    elif all(isinstance(item, int) for item in xy) and (len(xy) == 2):
-        x, y = xy
-        if (x > 0) and (x < W) and (y > 0) and (y < H):
-            pass
-        else:
-            print(
-                "xy is out of bounds. x must be within [0, {}], and y must be within [0, {}]".format(
-                    W, H
-                )
-            )
-            return
-    elif all(isinstance(item, str) for item in xy) and (len(xy) == 2):
-        x, y = xy
-        if ("%" in x) and ("%" in y):
-            try:
-                x = int(float(x.replace("%", "")) / 100.0 * W)
-                y = int(float(y.replace("%", "")) / 100.0 * H)
-                xy = (x, y)
-            except Exception:
-                raise Exception(
-                    "The specified xy is invalid. It must be formatted like this ('10%', '10%')"
-                )
-
-    else:
-        raise Exception(
-            "The specified xy is invalid. It must be formatted like this: (10, 10) or ('10%', '10%')"
-        )
-
-    try:
-
-        frames = []
-        for _, frame in enumerate(ImageSequence.Iterator(image)):
-            frame = frame.convert("RGBA")
-            frame.paste(logo_image, xy, mask_im)
-
-            b = io.BytesIO()
-            frame.save(b, format="GIF")
-            frame = Image.open(b)
-            frames.append(frame)
-
-        frames[0].save(out_gif, save_all=True, append_images=frames[1:])
-    except Exception as e:
-        print(e)
-
-
-def reduce_gif_size(in_gif, out_gif=None):
-    """Reduces a GIF image using ffmpeg.
-
-    Args:
-        in_gif (str): The input file path to the GIF image.
-        out_gif (str, optional): The output file path to the GIF image. Defaults to None.
-    """
-    import ffmpeg
-
-    if not is_tool("ffmpeg"):
-        print("ffmpeg is not installed on your computer.")
-        return
-
-    if not os.path.exists(in_gif):
-        print("The input gif file does not exist.")
-        return
-
-    if out_gif is None:
-        out_gif = in_gif
-    elif not os.path.exists(os.path.dirname(out_gif)):
-        os.makedirs(os.path.dirname(out_gif))
-
-    if in_gif == out_gif:
-        tmp_gif = in_gif.replace(".gif", "_tmp.gif")
-        shutil.copyfile(in_gif, tmp_gif)
-        stream = ffmpeg.input(tmp_gif)
-        stream = ffmpeg.output(stream, in_gif).overwrite_output()
-        ffmpeg.run(stream)
-        os.remove(tmp_gif)
-
-    else:
-        stream = ffmpeg.input(in_gif)
-        stream = ffmpeg.output(stream, out_gif).overwrite_output()
-        ffmpeg.run(stream)
-
-
-def landsat_ts_norm_diff(collection, bands=["Green", "SWIR1"], threshold=0):
-    """Computes a normalized difference index based on a Landsat timeseries.
-
-    Args:
-        collection (ee.ImageCollection): A Landsat timeseries.
-        bands (list, optional): The bands to use for computing normalized difference. Defaults to ['Green', 'SWIR1'].
-        threshold (float, optional): The threshold to extract features. Defaults to 0.
-
-    Returns:
-        ee.ImageCollection: An ImageCollection containing images with values greater than the specified threshold.
-    """
-    nd_images = collection.map(
-        lambda img: img.normalizedDifference(bands)
-        .gt(threshold)
-        .copyProperties(img, img.propertyNames())
-    )
-    return nd_images
-
-
-def landsat_ts_norm_diff_gif(
-    collection,
-    out_gif=None,
-    vis_params=None,
-    palette=["black", "blue"],
-    dimensions=768,
-    frames_per_second=10,
-):
-    """[summary]
-
-    Args:
-        collection (ee.ImageCollection): The normalized difference Landsat timeseires.
-        out_gif (str, optional): File path to the output animated GIF. Defaults to None.
-        vis_params (dict, optional): Visualization parameters. Defaults to None.
-        palette (list, optional): The palette to use for visualizing the timelapse. Defaults to ['black', 'blue']. The first color in the list is the background color.
-        dimensions (int, optional): a number or pair of numbers in format WIDTHxHEIGHT) Maximum dimensions of the thumbnail to render, in pixels. If only one number is passed, it is used as the maximum, and the other dimension is computed by proportional scaling. Defaults to 768.
-        frames_per_second (int, optional): Animation speed. Defaults to 10.
-
-    Returns:
-        str: File path to the output animated GIF.
-    """
-    coordinates = ee.Image(collection.first()).get("coordinates")
-    roi = ee.Geometry.Polygon(coordinates, None, False)
-
-    if out_gif is None:
-        out_dir = os.path.join(os.path.expanduser("~"), "Downloads")
-        filename = "landsat_ts_nd_" + random_string() + ".gif"
-        out_gif = os.path.join(out_dir, filename)
-    elif not out_gif.endswith(".gif"):
-        raise Exception("The output file must end with .gif")
-
-    bands = ["nd"]
-    if vis_params is None:
-        vis_params = {}
-        vis_params["bands"] = bands
-        vis_params["palette"] = palette
-
-    video_args = vis_params.copy()
-    video_args["dimensions"] = dimensions
-    video_args["region"] = roi
-    video_args["framesPerSecond"] = frames_per_second
-    video_args["crs"] = "EPSG:3857"
-
-    if "bands" not in video_args.keys():
-        video_args["bands"] = bands
-
-    download_ee_video(collection, video_args, out_gif)
-
-    return out_gif
-
-
-########################################
 #               geemap GUI             #
 ########################################
 
 
 def api_docs():
     """Open a browser and navigate to the geemap API documentation."""
     import webbrowser
@@ -4830,25 +3710,56 @@
 
 def date_sequence(start, end, unit, date_format="YYYY-MM-dd"):
     """Creates a date sequence.
 
     Args:
         start (str): The start date, e.g., '2000-01-01'.
         end (str): The end date, e.g., '2000-12-31'.
-        unit (str): One of 'year', 'month' 'week', 'day', 'hour', 'minute', or 'second'.
+        unit (str): One of 'year', 'quarter', 'month' 'week', 'day', 'hour', 'minute', or 'second'.
         date_format (str, optional): A pattern, as described at http://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormat.html. Defaults to 'YYYY-MM-dd'.
 
     Returns:
         ee.List: A list of date sequence.
     """
+
+    def get_quarter(d):
+        return str((int(d[5:7]) - 1) // 3 * 3 + 1).zfill(2)
+
+    def get_monday(d):
+        date_obj = datetime.datetime.strptime(d, "%Y-%m-%d")
+        start_of_week = date_obj - datetime.timedelta(days=date_obj.weekday())
+        return start_of_week.strftime("%Y-%m-%d")
+
+    if unit == "year":
+        start = start[:4] + "-01-01"
+    elif unit == "month":
+        start = start[:7] + "-01"
+    elif unit == "quarter":
+        start = start[:5] + get_quarter(start) + "-01"
+    elif unit == "week":
+        start = get_monday(start)
+
     start_date = ee.Date(start)
     end_date = ee.Date(end)
-    count = ee.Number(end_date.difference(start_date, unit)).toInt()
-    num_seq = ee.List.sequence(0, count)
-    date_seq = num_seq.map(lambda d: start_date.advance(d, unit).format(date_format))
+
+    if unit != "quarter":
+        count = ee.Number(end_date.difference(start_date, unit)).toInt()
+        num_seq = ee.List.sequence(0, count)
+        date_seq = num_seq.map(
+            lambda d: start_date.advance(d, unit).format(date_format)
+        )
+
+    else:
+        unit = "month"
+        count = ee.Number(end_date.difference(start_date, unit)).divide(3).toInt()
+        num_seq = ee.List.sequence(0, count.multiply(3), 3)
+        date_seq = num_seq.map(
+            lambda d: start_date.advance(d, unit).format(date_format)
+        )
+
     return date_seq
 
 
 def legend_from_ee(ee_class_table):
     """Extract legend from an Earth Engine class table on the Earth Engine Data Catalog page
     such as https://developers.google.com/earth-engine/datasets/catalog/MODIS_051_MCD12Q1
 
@@ -7109,15 +6020,15 @@
             #     return True
             # else:
             #     return False
         except Exception:
             return False
 
 
-def kml_to_shp(in_kml, out_shp):
+def kml_to_shp(in_kml, out_shp, **kwargs):
     """Converts a KML to shapefile.
 
     Args:
         in_kml (str): The file path to the input KML.
         out_shp (str): The file path to the output shapefile.
 
     Raises:
@@ -7143,19 +6054,19 @@
     check_package(name="geopandas", URL="https://geopandas.org")
 
     import geopandas as gpd
 
     # import fiona
     # print(fiona.supported_drivers)
     gpd.io.file.fiona.drvsupport.supported_drivers["KML"] = "rw"
-    df = gpd.read_file(in_kml, driver="KML")
-    df.to_file(out_shp)
+    df = gpd.read_file(in_kml, driver="KML", **kwargs)
+    df.to_file(out_shp, **kwargs)
 
 
-def kml_to_geojson(in_kml, out_geojson=None):
+def kml_to_geojson(in_kml, out_geojson=None, **kwargs):
     """Converts a KML to GeoJSON.
 
     Args:
         in_kml (str): The file path to the input KML.
         out_geojson (str): The file path to the output GeoJSON. Defaults to None.
 
     Raises:
@@ -7183,23 +6094,23 @@
     check_package(name="geopandas", URL="https://geopandas.org")
 
     import geopandas as gpd
 
     # import fiona
     # print(fiona.supported_drivers)
     gpd.io.file.fiona.drvsupport.supported_drivers["KML"] = "rw"
-    gdf = gpd.read_file(in_kml, driver="KML")
+    gdf = gpd.read_file(in_kml, driver="KML", **kwargs)
 
     if out_geojson is not None:
-        gdf.to_file(out_geojson, driver="GeoJSON")
+        gdf.to_file(out_geojson, driver="GeoJSON", **kwargs)
     else:
         return gdf.__geo_interface__
 
 
-def kml_to_ee(in_kml):
+def kml_to_ee(in_kml, **kwargs):
     """Converts a KML to ee.FeatureColleciton.
 
     Args:
         in_kml (str): The file path to the input KML.
 
     Raises:
         FileNotFoundError: The input KML could not be found.
@@ -7215,21 +6126,21 @@
     if not os.path.exists(in_kml):
         raise FileNotFoundError("The input KML could not be found.")
 
     out_json = os.path.join(os.getcwd(), "tmp.geojson")
 
     check_package(name="geopandas", URL="https://geopandas.org")
 
-    kml_to_geojson(in_kml, out_json)
+    kml_to_geojson(in_kml, out_json, **kwargs)
     ee_object = geojson_to_ee(out_json)
     os.remove(out_json)
     return ee_object
 
 
-def kmz_to_ee(in_kmz):
+def kmz_to_ee(in_kmz, **kwargs):
     """Converts a KMZ to ee.FeatureColleciton.
 
     Args:
         in_kmz (str): The file path to the input KMZ.
 
     Raises:
         FileNotFoundError: The input KMZ could not be found.
@@ -7242,15 +6153,15 @@
         raise FileNotFoundError("The input KMZ could not be found.")
 
     out_dir = os.path.dirname(in_kmz)
     out_kml = os.path.join(out_dir, "doc.kml")
     with zipfile.ZipFile(in_kmz, "r") as zip_ref:
         zip_ref.extractall(out_dir)
 
-    fc = kml_to_ee(out_kml)
+    fc = kml_to_ee(out_kml, **kwargs)
     os.remove(out_kml)
     return fc
 
 
 def csv_to_pandas(in_csv, **kwargs):
     """Converts a CSV file to pandas dataframe.
 
@@ -7290,15 +6201,15 @@
         data = [x["properties"] for x in data.getInfo()["features"]]
         df = pd.DataFrame(data)
         return df
     except Exception as e:
         raise Exception(e)
 
 
-def shp_to_geopandas(in_shp):
+def shp_to_geopandas(in_shp, **kwargs):
     """Converts a shapefile to Geopandas dataframe.
 
     Args:
         in_shp (str): File path to the input shapefile.
 
     Raises:
         FileNotFoundError: The provided shp could not be found.
@@ -7315,15 +6226,15 @@
         raise FileNotFoundError("The provided shp could not be found.")
 
     check_package(name="geopandas", URL="https://geopandas.org")
 
     import geopandas as gpd
 
     try:
-        return gpd.read_file(in_shp)
+        return gpd.read_file(in_shp, **kwargs)
     except Exception as e:
         raise Exception(e)
 
 
 def ee_to_geopandas(ee_object, selectors=None, verbose=False):
     """Converts an ee.FeatureCollection to Geopandas dataframe.
 
@@ -7405,15 +6316,15 @@
 
 
 def geopandas_to_ee(gdf, geodesic=True):
     """Converts a GeoPandas GeoDataFrame to ee.FeatureCollection.
 
     Args:
         gdf (geopandas.GeoDataFrame): The input geopandas.GeoDataFrame to be converted ee.FeatureCollection.
-        geodesic (bool, optional): Whether line segments should be interpreted as spherical geodesics. If false, indicates that line segments should be interpreted as planar lines in the specified CRS. If absent, defaults to true if the CRS is geographic (including the default EPSG:4326), or to false if the CRS is projected.. Defaults to True.
+        geodesic (bool, optional): Whether line segments should be interpreted as spherical geodesics. If false, indicates that line segments should be interpreted as planar lines in the specified CRS. If absent, defaults to true if the CRS is geographic (including the default EPSG:4326), or to false if the CRS is projected. Defaults to True.
 
     Raises:
         TypeError: The input data type must be geopandas.GeoDataFrame.
 
     Returns:
         ee.FeatureCollection: The output ee.FeatureCollection converted from the input geopandas.GeoDataFrame.
     """
@@ -8487,15 +7398,15 @@
 
     Returns:
         dict: A dictionary of Census data.
     """
     import json
     import pkg_resources
 
-    pkg_dir = os.path.dirname(pkg_resources.resource_filename("leafmap", "leafmap.py"))
+    pkg_dir = os.path.dirname(pkg_resources.resource_filename("geemap", "geemap.py"))
     census_data = os.path.join(pkg_dir, "data/census_data.json")
 
     if reset:
 
         from owslib.wms import WebMapService
 
         census_dict = {}
@@ -8652,7 +7563,212 @@
 
     if return_type == "list":
         return [line.decode(encoding).rstrip() for line in urlopen(url).readlines()]
     elif return_type == "string":
         return urlopen(url).read().decode(encoding)
     else:
         raise ValueError("The return type must be either list or string.")
+
+
+def create_download_button(
+    label,
+    data,
+    file_name=None,
+    mime=None,
+    key=None,
+    help=None,
+    on_click=None,
+    args=None,
+    **kwargs,
+):
+    """Streamlit function to create a download button.
+
+    Args:
+        label (str): A short label explaining to the user what this button is for..
+        data (str | list): The contents of the file to be downloaded. See example below for caching techniques to avoid recomputing this data unnecessarily.
+        file_name (str, optional): An optional string to use as the name of the file to be downloaded, such as 'my_file.csv'. If not specified, the name will be automatically generated. Defaults to None.
+        mime (str, optional): The MIME type of the data. If None, defaults to "text/plain" (if data is of type str or is a textual file) or "application/octet-stream" (if data is of type bytes or is a binary file). Defaults to None.
+        key (str, optional): An optional string or integer to use as the unique key for the widget. If this is omitted, a key will be generated for the widget based on its content. Multiple widgets of the same type may not share the same key. Defaults to None.
+        help (str, optional): An optional tooltip that gets displayed when the button is hovered over. Defaults to None.
+        on_click (str, optional): An optional callback invoked when this button is clicked. Defaults to None.
+        args (list, optional): An optional tuple of args to pass to the callback. Defaults to None.
+        kwargs (dict, optional): An optional tuple of args to pass to the callback.
+
+    """
+    try:
+        import streamlit as st
+        import pandas as pd
+
+        if isinstance(data, str):
+
+            if file_name is None:
+                file_name = data.split("/")[-1]
+
+            if data.endswith(".csv"):
+                data = pd.read_csv(data).to_csv()
+                if mime is None:
+                    mime = "text/csv"
+                return st.download_button(
+                    label, data, file_name, mime, key, help, on_click, args, **kwargs
+                )
+            elif (
+                data.endswith(".gif") or data.endswith(".png") or data.endswith(".jpg")
+            ):
+                if mime is None:
+                    mime = f"image/{os.path.splitext(data)[1][1:]}"
+
+                with open(data, "rb") as file:
+                    return st.download_button(
+                        label,
+                        file,
+                        file_name,
+                        mime,
+                        key,
+                        help,
+                        on_click,
+                        args,
+                        **kwargs,
+                    )
+
+            else:
+                return st.download_button(
+                    label,
+                    label,
+                    data,
+                    file_name,
+                    mime,
+                    key,
+                    help,
+                    on_click,
+                    args,
+                    **kwargs,
+                )
+
+    except ImportError:
+        print("Streamlit is not installed. Please run 'pip install streamlit'.")
+        return
+    except Exception as e:
+        raise Exception(e)
+
+
+def gdf_to_geojson(gdf, out_geojson=None, epsg=None):
+    """Converts a GeoDataFame to GeoJSON.
+
+    Args:
+        gdf (GeoDataFrame): A GeoPandas GeoDataFrame.
+        out_geojson (str, optional): File path to he output GeoJSON. Defaults to None.
+        epsg (str, optional): An EPSG string, e.g., "4326". Defaults to None.
+
+    Raises:
+        TypeError: When the output file extension is incorrect.
+        Exception: When the conversion fails.
+
+    Returns:
+        dict: When the out_json is None returns a dict.
+    """
+    check_package(name="geopandas", URL="https://geopandas.org")
+
+    try:
+        if epsg is not None:
+            gdf = gdf.to_crs(epsg=epsg)
+        geojson = gdf.__geo_interface__
+
+        if out_geojson is None:
+            return geojson
+        else:
+            ext = os.path.splitext(out_geojson)[1]
+            if ext.lower() not in [".json", ".geojson"]:
+                raise TypeError(
+                    "The output file extension must be either .json or .geojson"
+                )
+            out_dir = os.path.dirname(out_geojson)
+            if not os.path.exists(out_dir):
+                os.makedirs(out_dir)
+
+            gdf.to_file(out_geojson, driver="GeoJSON")
+    except Exception as e:
+        raise Exception(e)
+
+
+def temp_file_path(extension):
+    """Returns a temporary file path.
+
+    Args:
+        extension (str): The file extension.
+
+    Returns:
+        str: The temporary file path.
+    """
+
+    import tempfile
+    import os
+    import uuid
+
+    if not extension.startswith("."):
+        extension = "." + extension
+    file_id = str(uuid.uuid4())
+    file_path = os.path.join(tempfile.gettempdir(), f"{file_id}{extension}")
+
+    return file_path
+
+
+def create_contours(
+    image, min_value, max_value, interval, kernel=None, region=None, values=None
+):
+    """Creates contours from an image. Code adapted from https://mygeoblog.com/2017/01/28/contour-lines-in-gee. Credits to MyGeoBlog.
+
+    Args:
+        image (ee.Image): An image to create contours.
+        min_value (float): The minimum value of contours.
+        max_value (float): The maximum value of contours.
+        interval (float):  The interval between contours.
+        kernel (ee.Kernel, optional): The kernel to use for smoothing image. Defaults to None.
+        region (ee.Geometry | ee.FeatureCollection, optional): The region of interest. Defaults to None.
+        values (list, optional): A list of values to create contours for. Defaults to None.
+
+    Raises:
+        TypeError: The image must be an ee.Image.
+        TypeError: The region must be an ee.Geometry or ee.FeatureCollection.
+
+    Returns:
+        ee.Image: The image containing contours.
+    """
+    if not isinstance(image, ee.Image):
+        raise TypeError("The image must be an ee.Image.")
+    if region is not None:
+        if isinstance(region, ee.FeatureCollection) or isinstance(region, ee.Geometry):
+            pass
+        else:
+
+            raise TypeError(
+                "The region must be an ee.Geometry or ee.FeatureCollection."
+            )
+
+    if kernel is None:
+        kernel = ee.Kernel.gaussian(5, 3)
+
+    if isinstance(values, list):
+        values = ee.List(values)
+    elif isinstance(values, ee.List):
+        pass
+
+    if values is None:
+        values = ee.List.sequence(min_value, max_value, interval)
+
+    def contouring(value):
+        mycountour = (
+            image.convolve(kernel)
+            .subtract(ee.Image.constant(value))
+            .zeroCrossing()
+            .multiply(ee.Image.constant(value).toFloat())
+        )
+        return mycountour.mask(mycountour)
+
+    contours = values.map(contouring)
+
+    if region is not None:
+        if isinstance(region, ee.FeatureCollection):
+            return ee.ImageCollection(contours).mosaic().clipToCollection(region)
+        elif isinstance(region, ee.Geometry):
+            return ee.ImageCollection(contours).mosaic().clip(region)
+    else:
+        return ee.ImageCollection(contours).mosaic()
```

### Comparing `geemap-0.9.4/geemap/conversion.py` & `geemap-0.9.5/geemap/conversion.py`

 * *Files 0% similar despite different names*

```diff
@@ -338,27 +338,32 @@
         with open(in_file, encoding="utf-8") as f:
             lines = f.readlines()
 
             # print('Processing {}'.format(in_file))
             lines = check_map_functions(lines)
 
             for index, line in enumerate(lines):
-
                 if ("/* color" in line) and ("*/" in line):
                     line = (
                         line[: line.index("/*")].lstrip()
                         + line[(line.index("*/") + 2) :]
                     )
 
                 if (
                     ("= function" in line)
                     or ("=function" in line)
                     or line.strip().startswith("function")
                 ):
-                    bracket_index = line.index("{")
+                    try:
+                        bracket_index = line.index("{")
+                    except Exception as e:
+                        raise Exception(
+                            f"The opening curly bracket could not be found in Line {index}: {line}. Please reformat the function definition and make sure the opening curly bracket apprears on the same line as the function keyword. "
+                        )
+
                     (
                         matching_line_index,
                         matching_char_index,
                     ) = find_matching_bracket(lines, index, bracket_index)
 
                     line = line[:bracket_index] + line[bracket_index + 1 :]
                     if matching_line_index == index:
```

### Comparing `geemap-0.9.4/geemap/data/census_data.json` & `geemap-0.9.5/geemap/data/census_data.json`

 * *Files identical despite different names*

### Comparing `geemap-0.9.4/geemap/data/fonts/arial.ttf` & `geemap-0.9.5/geemap/data/fonts/arial.ttf`

 * *Files identical despite different names*

### Comparing `geemap-0.9.4/geemap/data/javascripts/ClippedComposite.js` & `geemap-0.9.5/geemap/data/javascripts/ClippedComposite.js`

 * *Files identical despite different names*

### Comparing `geemap-0.9.4/geemap/data/javascripts/ModisQaBands.js` & `geemap-0.9.5/geemap/data/javascripts/ModisQaBands.js`

 * *Files identical despite different names*

### Comparing `geemap-0.9.4/geemap/data/javascripts/NormalizedDifference.js` & `geemap-0.9.5/geemap/data/javascripts/NormalizedDifference.js`

 * *Files identical despite different names*

### Comparing `geemap-0.9.4/geemap/data/javascripts/QualityMosaic.js` & `geemap-0.9.5/geemap/data/javascripts/QualityMosaic.js`

 * *Files identical despite different names*

### Comparing `geemap-0.9.4/geemap/data/python/javascript_to_python.py` & `geemap-0.9.5/geemap/data/python/javascript_to_python.py`

 * *Files identical despite different names*

### Comparing `geemap-0.9.4/geemap/data/template/NLCD.qml` & `geemap-0.9.5/geemap/data/template/NLCD.qml`

 * *Files identical despite different names*

### Comparing `geemap-0.9.4/geemap/data/template/ee_api_docs.csv` & `geemap-0.9.5/geemap/data/template/ee_api_docs.csv`

 * *Files identical despite different names*

### Comparing `geemap-0.9.4/geemap/data/template/ee_api_docs.html` & `geemap-0.9.5/geemap/data/template/ee_api_docs.html`

 * *Files identical despite different names*

### Comparing `geemap-0.9.4/geemap/data/template/ee_data_catalog.csv` & `geemap-0.9.5/geemap/data/template/ee_data_catalog.csv`

 * *Files identical despite different names*

### Comparing `geemap-0.9.4/geemap/data/template/ee_legend_table.txt` & `geemap-0.9.5/geemap/data/template/ee_legend_table.txt`

 * *Files identical despite different names*

### Comparing `geemap-0.9.4/geemap/data/template/legend.html` & `geemap-0.9.5/geemap/data/template/legend.html`

 * *Files identical despite different names*

### Comparing `geemap-0.9.4/geemap/data/template/legend.txt` & `geemap-0.9.5/geemap/data/template/legend.txt`

 * *Files identical despite different names*

### Comparing `geemap-0.9.4/geemap/data/template/template.py` & `geemap-0.9.5/geemap/data/template/template.py`

 * *Files identical despite different names*

### Comparing `geemap-0.9.4/geemap/data/template/toolbox.csv` & `geemap-0.9.5/geemap/data/template/toolbox.csv`

 * *Files identical despite different names*

### Comparing `geemap-0.9.4/geemap/datasets.py` & `geemap-0.9.5/geemap/datasets.py`

 * *Files identical despite different names*

### Comparing `geemap-0.9.4/geemap/eefolium.py` & `geemap-0.9.5/geemap/eefolium.py`

 * *Files identical despite different names*

### Comparing `geemap-0.9.4/geemap/foliumap.py` & `geemap-0.9.5/geemap/foliumap.py`

 * *Files 3% similar despite different names*

```diff
@@ -5,137 +5,156 @@
 import ee
 import folium
 from folium import plugins
 
 from .common import *
 from .conversion import *
 from .legends import builtin_legends
+from .timelapse import *
+
 
 # More WMS basemaps can be found at https://viewer.nationalmap.gov/services/
 ee_basemaps = {
     "ROADMAP": folium.TileLayer(
         tiles="https://mt1.google.com/vt/lyrs=m&x={x}&y={y}&z={z}",
         attr="Google",
         name="Google Maps",
         overlay=True,
         control=True,
+        max_zoom=24
     ),
     "SATELLITE": folium.TileLayer(
         tiles="https://mt1.google.com/vt/lyrs=s&x={x}&y={y}&z={z}",
         attr="Google",
         name="Google Satellite",
         overlay=True,
         control=True,
+        max_zoom=24
     ),
     "TERRAIN": folium.TileLayer(
         tiles="https://mt1.google.com/vt/lyrs=p&x={x}&y={y}&z={z}",
         attr="Google",
         name="Google Terrain",
         overlay=True,
         control=True,
+        max_zoom=24
     ),
     "HYBRID": folium.TileLayer(
         tiles="https://mt1.google.com/vt/lyrs=y&x={x}&y={y}&z={z}",
         attr="Google",
         name="Google Satellite",
         overlay=True,
         control=True,
+        max_zoom=24
     ),
     "ESRI": folium.TileLayer(
         tiles="https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",
         attr="Esri",
         name="Esri Satellite",
         overlay=True,
         control=True,
+        max_zoom=24
     ),
     "Esri Ocean": folium.TileLayer(
         tiles="https://services.arcgisonline.com/ArcGIS/rest/services/Ocean/World_Ocean_Base/MapServer/tile/{z}/{y}/{x}",
         attr="Esri",
         name="Esri Ocean",
         overlay=True,
         control=True,
+        max_zoom=24
     ),
     "Esri Satellite": folium.TileLayer(
         tiles="https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",
         attr="Esri",
         name="Esri Satellite",
         overlay=True,
         control=True,
+        max_zoom=24
     ),
     "Esri Standard": folium.TileLayer(
         tiles="https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",
         attr="Esri",
         name="Esri Standard",
         overlay=True,
         control=True,
+        max_zoom=24
     ),
     "Esri Terrain": folium.TileLayer(
         tiles="https://server.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}",
         attr="Esri",
         name="Esri Terrain",
         overlay=True,
         control=True,
+        max_zoom=24
     ),
     "Esri Transportation": folium.TileLayer(
         tiles="https://server.arcgisonline.com/ArcGIS/rest/services/Reference/World_Transportation/MapServer/tile/{z}/{y}/{x}",
         attr="Esri",
         name="Esri Transportation",
         overlay=True,
         control=True,
+        max_zoom=24
     ),
     "Esri Topo World": folium.TileLayer(
         tiles="https://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",
         attr="Esri",
         name="Esri Topo World",
         overlay=True,
         control=True,
+        max_zoom=24
     ),
     "Esri National Geographic": folium.TileLayer(
         tiles="http://services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer/tile/{z}/{y}/{x}",
         attr="Esri",
         name="Esri National Geographic",
         overlay=True,
         control=True,
+        max_zoom=24
     ),
     "Esri Shaded Relief": folium.TileLayer(
         tiles="https://services.arcgisonline.com/arcgis/rest/services/World_Shaded_Relief/MapServer/tile/{z}/{y}/{x}",
         attr="Esri",
         name="Esri Shaded Relief",
         overlay=True,
         control=True,
+        max_zoom=24
     ),
     "Esri Physical Map": folium.TileLayer(
         tiles="https://services.arcgisonline.com/arcgis/rest/services/World_Physical_Map/MapServer/tile/{z}/{y}/{x}",
         attr="Esri",
         name="Esri Physical Map",
         overlay=True,
         control=True,
+        max_zoom=24
     ),
     "Bing VirtualEarth": folium.TileLayer(
         tiles="http://ecn.t3.tiles.virtualearth.net/tiles/a{q}.jpeg?g=1",
         attr="Microsoft",
         name="Bing VirtualEarth",
         overlay=True,
         control=True,
+        max_zoom=24
     ),
     "3DEP Elevation": folium.WmsTileLayer(
         url="https://elevation.nationalmap.gov/arcgis/services/3DEPElevation/ImageServer/WMSServer?",
         layers="3DEPElevation:None",
         attr="USGS",
         name="3DEP Elevation",
         overlay=True,
         control=True,
+        max_zoom=24
     ),
     "NAIP Imagery": folium.WmsTileLayer(
         url="https://services.nationalmap.gov/arcgis/services/USGSNAIPImagery/ImageServer/WMSServer?",
         layers="0",
         attr="USGS",
         name="NAIP Imagery",
         overlay=True,
         control=True,
+        max_zoom=24
     ),
 }
 
 
 class Map(folium.Map):
     """The Map class inherits from folium.Map. By default, the Map will add Google Maps as the basemap. Set add_google_map = False to use OpenStreetMap as the basemap.
 
@@ -171,14 +190,16 @@
         if "zoom" in kwargs.keys():
             kwargs["zoom_start"] = kwargs["zoom"]
             kwargs.pop("zoom")
         if "zoom_start" in kwargs.keys():
             zoom = kwargs["zoom_start"]
         else:
             kwargs["zoom_start"] = zoom
+        if "max_zoom" not in kwargs.keys():
+            kwargs["max_zoom"] = 24
 
         if "add_google_map" not in kwargs.keys() and "basemap" not in kwargs.keys():
             kwargs["add_google_map"] = True
         if "plugin_LatLngPopup" not in kwargs.keys():
             kwargs["plugin_LatLngPopup"] = True
         if "plugin_Fullscreen" not in kwargs.keys():
             kwargs["plugin_Fullscreen"] = True
@@ -325,14 +346,15 @@
             tiles=map_id_dict["tile_fetcher"].url_format,
             attr="Google Earth Engine",
             name=name,
             overlay=True,
             control=True,
             show=shown,
             opacity=opacity,
+            max_zoom=24,
             **kwargs,
         ).add_to(self)
 
     addLayer = add_layer
 
     def _repr_mimebundle_(self, include, exclude, **kwargs):
         """Adds Layer control to the map. Reference: https://ipython.readthedocs.io/en/stable/config/integrating.html#MyObject._repr_mimebundle_
@@ -351,14 +373,32 @@
             lat (float): The latitude of the center, in degrees.
             zoom (int, optional): The zoom level, from 1 to 24. Defaults to 10.
         """
         self.fit_bounds([[lat, lon], [lat, lon]], max_zoom=zoom)
 
     setCenter = set_center
 
+    def zoom_to_bounds(self, bounds):
+        """Zooms to a bounding box in the form of [minx, miny, maxx, maxy].
+
+        Args:
+            bounds (list | tuple): A list/tuple containing minx, miny, maxx, maxy values for the bounds.
+        """
+        #  The folium fit_bounds method takes lat/lon bounds in the form [[south, west], [north, east]].
+        self.fit_bounds([[bounds[1], bounds[0]], [bounds[3], bounds[2]]])
+
+    def zoom_to_gdf(self, gdf):
+        """Zooms to the bounding box of a GeoPandas GeoDataFrame.
+
+        Args:
+            gdf (GeoDataFrame): A GeoPandas GeoDataFrame.
+        """
+        bounds = gdf.total_bounds
+        self.zoom_to_bounds(bounds)
+
     def center_object(self, ee_object, zoom=10):
         """Centers the map view on a given object.
 
         Args:
             ee_object (Element|Geometry): An Earth Engine object to center on - a geometry, image or feature.
             zoom (int, optional): The zoom level, from 1 to 24. Defaults to 10.
         """
@@ -903,14 +943,38 @@
         # with open(out_json) as f:
         #     data = json.load(f)
 
         geo_json = folium.GeoJson(data=data, name=layer_name, **kwargs)
         geo_json.add_to(self)
         # os.remove(out_json)
 
+    def add_gdf(self, gdf, layer_name="Untitled", zoom_to_layer=True, **kwargs):
+        """Adds a GeoPandas GeoDataFrameto the map.
+
+        Args:
+            gdf (GeoDataFrame): A GeoPandas GeoDataFrame.
+            layer_name (str, optional): The layer name to be used. Defaults to "Untitled".
+            zoom_to_layer (bool, optional): Whether to zoom to the layer.
+
+        """
+
+        data = gdf_to_geojson(gdf, epsg="4326")
+
+        self.add_geojson(data, layer_name=layer_name, **kwargs)
+
+        if zoom_to_layer:
+            import numpy as np
+
+            bounds = gdf.to_crs(epsg="4326").bounds
+            west = np.min(bounds["minx"])
+            south = np.min(bounds["miny"])
+            east = np.max(bounds["maxx"])
+            north = np.max(bounds["maxy"])
+            self.fit_bounds([[south, east], [north, west]])
+
     def add_osm(
         self,
         query,
         layer_name="Untitled",
         which_result=None,
         by_osmid=False,
         buffer_dist=None,
```

### Comparing `geemap-0.9.4/geemap/geemap.py` & `geemap-0.9.5/geemap/geemap.py`

 * *Files 1% similar despite different names*

```diff
@@ -37,14918 +37,14938 @@
 00000240: 656d 6170 7320 696d 706f 7274 2062 6173  emaps import bas
 00000250: 656d 6170 5f74 696c 6573 2c20 6261 7365  emap_tiles, base
 00000260: 6d61 7073 0d0a 6672 6f6d 202e 636f 6d6d  maps..from .comm
 00000270: 6f6e 2069 6d70 6f72 7420 2a0d 0a66 726f  on import *..fro
 00000280: 6d20 2e63 6f6e 7665 7273 696f 6e20 696d  m .conversion im
 00000290: 706f 7274 202a 0d0a 6672 6f6d 202e 6c65  port *..from .le
 000002a0: 6765 6e64 7320 696d 706f 7274 2062 7569  gends import bui
-000002b0: 6c74 696e 5f6c 6567 656e 6473 0d0a 0d0a  ltin_legends....
-000002c0: 0d0a 636c 6173 7320 4d61 7028 6970 796c  ..class Map(ipyl
-000002d0: 6561 666c 6574 2e4d 6170 293a 0d0a 2020  eaflet.Map):..  
-000002e0: 2020 2222 2254 6865 204d 6170 2063 6c61    """The Map cla
-000002f0: 7373 2069 6e68 6572 6974 7320 6672 6f6d  ss inherits from
-00000300: 2069 7079 6c65 6166 6c65 742e 4d61 702e   ipyleaflet.Map.
-00000310: 2054 6865 2061 7267 756d 656e 7473 2079   The arguments y
-00000320: 6f75 2063 616e 2070 6173 7320 746f 2074  ou can pass to t
-00000330: 6865 204d 6170 2063 616e 2062 6520 666f  he Map can be fo
-00000340: 756e 6420 6174 2068 7474 7073 3a2f 2f69  und at https://i
-00000350: 7079 6c65 6166 6c65 742e 7265 6164 7468  pyleaflet.readth
-00000360: 6564 6f63 732e 696f 2f65 6e2f 6c61 7465  edocs.io/en/late
-00000370: 7374 2f61 7069 5f72 6566 6572 656e 6365  st/api_reference
-00000380: 2f6d 6170 2e68 746d 6c2e 2042 7920 6465  /map.html. By de
-00000390: 6661 756c 742c 2074 6865 204d 6170 2077  fault, the Map w
-000003a0: 696c 6c20 6164 6420 476f 6f67 6c65 204d  ill add Google M
-000003b0: 6170 7320 6173 2074 6865 2062 6173 656d  aps as the basem
-000003c0: 6170 2e20 5365 7420 6164 645f 676f 6f67  ap. Set add_goog
-000003d0: 6c65 5f6d 6170 203d 2046 616c 7365 2074  le_map = False t
-000003e0: 6f20 7573 6520 4f70 656e 5374 7265 6574  o use OpenStreet
-000003f0: 4d61 7020 6173 2074 6865 2062 6173 656d  Map as the basem
-00000400: 6170 2e0d 0a0d 0a20 2020 2052 6574 7572  ap.....    Retur
-00000410: 6e73 3a0d 0a20 2020 2020 2020 206f 626a  ns:..        obj
-00000420: 6563 743a 2069 7079 6c65 6166 6c65 7420  ect: ipyleaflet 
-00000430: 6d61 7020 6f62 6a65 6374 2e0d 0a20 2020  map object...   
-00000440: 2022 2222 0d0a 0d0a 2020 2020 6465 6620   """....    def 
-00000450: 5f5f 696e 6974 5f5f 2873 656c 662c 202a  __init__(self, *
-00000460: 2a6b 7761 7267 7329 3a0d 0a0d 0a20 2020  *kwargs):....   
-00000470: 2020 2020 2023 2041 7574 6865 6e74 6963       # Authentic
-00000480: 6174 6573 2045 6172 7468 2045 6e67 696e  ates Earth Engin
-00000490: 6520 616e 6420 696e 6974 6961 6c69 7a65  e and initialize
-000004a0: 7320 616e 2045 6172 7468 2045 6e67 696e  s an Earth Engin
-000004b0: 6520 7365 7373 696f 6e0d 0a20 2020 2020  e session..     
-000004c0: 2020 2069 6620 2265 655f 696e 6974 6961     if "ee_initia
-000004d0: 6c69 7a65 2220 6e6f 7420 696e 206b 7761  lize" not in kwa
-000004e0: 7267 732e 6b65 7973 2829 3a0d 0a20 2020  rgs.keys():..   
-000004f0: 2020 2020 2020 2020 206b 7761 7267 735b           kwargs[
-00000500: 2265 655f 696e 6974 6961 6c69 7a65 225d  "ee_initialize"]
-00000510: 203d 2054 7275 650d 0a0d 0a20 2020 2020   = True....     
-00000520: 2020 2069 6620 6b77 6172 6773 5b22 6565     if kwargs["ee
-00000530: 5f69 6e69 7469 616c 697a 6522 5d3a 0d0a  _initialize"]:..
-00000540: 2020 2020 2020 2020 2020 2020 6565 5f69              ee_i
-00000550: 6e69 7469 616c 697a 6528 290d 0a0d 0a20  nitialize().... 
-00000560: 2020 2020 2020 2023 2044 6566 6175 6c74         # Default
-00000570: 206d 6170 2063 656e 7465 7220 6c6f 6361   map center loca
-00000580: 7469 6f6e 2028 6c61 742c 206c 6f6e 2920  tion (lat, lon) 
-00000590: 616e 6420 7a6f 6f6d 206c 6576 656c 0d0a  and zoom level..
-000005a0: 2020 2020 2020 2020 6c61 746c 6f6e 203d          latlon =
-000005b0: 205b 3430 2c20 2d31 3030 5d0d 0a20 2020   [40, -100]..   
-000005c0: 2020 2020 207a 6f6f 6d20 3d20 340d 0a0d       zoom = 4...
-000005d0: 0a20 2020 2020 2020 2023 2049 6e74 6572  .        # Inter
-000005e0: 6368 616e 6765 6162 6c65 2070 6172 616d  changeable param
-000005f0: 6574 6572 7320 6265 7477 6565 6e20 6970  eters between ip
-00000600: 796c 6561 666c 6574 2061 6e64 2066 6f6c  yleaflet and fol
-00000610: 6975 6d0d 0a20 2020 2020 2020 2069 6620  ium..        if 
-00000620: 2268 6569 6768 7422 206e 6f74 2069 6e20  "height" not in 
-00000630: 6b77 6172 6773 2e6b 6579 7328 293a 0d0a  kwargs.keys():..
-00000640: 2020 2020 2020 2020 2020 2020 6b77 6172              kwar
-00000650: 6773 5b22 6865 6967 6874 225d 203d 2022  gs["height"] = "
-00000660: 3630 3070 7822 0d0a 2020 2020 2020 2020  600px"..        
-00000670: 6966 2022 6c6f 6361 7469 6f6e 2220 696e  if "location" in
-00000680: 206b 7761 7267 732e 6b65 7973 2829 3a0d   kwargs.keys():.
-00000690: 0a20 2020 2020 2020 2020 2020 206b 7761  .            kwa
-000006a0: 7267 735b 2263 656e 7465 7222 5d20 3d20  rgs["center"] = 
-000006b0: 6b77 6172 6773 5b22 6c6f 6361 7469 6f6e  kwargs["location
-000006c0: 225d 0d0a 2020 2020 2020 2020 2020 2020  "]..            
-000006d0: 6b77 6172 6773 2e70 6f70 2822 6c6f 6361  kwargs.pop("loca
-000006e0: 7469 6f6e 2229 0d0a 2020 2020 2020 2020  tion")..        
-000006f0: 6966 2022 6365 6e74 6572 2220 6e6f 7420  if "center" not 
-00000700: 696e 206b 7761 7267 732e 6b65 7973 2829  in kwargs.keys()
-00000710: 3a0d 0a20 2020 2020 2020 2020 2020 206b  :..            k
-00000720: 7761 7267 735b 2263 656e 7465 7222 5d20  wargs["center"] 
-00000730: 3d20 6c61 746c 6f6e 0d0a 0d0a 2020 2020  = latlon....    
-00000740: 2020 2020 6966 2022 7a6f 6f6d 5f73 7461      if "zoom_sta
-00000750: 7274 2220 696e 206b 7761 7267 732e 6b65  rt" in kwargs.ke
-00000760: 7973 2829 3a0d 0a20 2020 2020 2020 2020  ys():..         
-00000770: 2020 206b 7761 7267 735b 227a 6f6f 6d22     kwargs["zoom"
-00000780: 5d20 3d20 6b77 6172 6773 5b22 7a6f 6f6d  ] = kwargs["zoom
-00000790: 5f73 7461 7274 225d 0d0a 2020 2020 2020  _start"]..      
-000007a0: 2020 2020 2020 6b77 6172 6773 2e70 6f70        kwargs.pop
-000007b0: 2822 7a6f 6f6d 5f73 7461 7274 2229 0d0a  ("zoom_start")..
-000007c0: 2020 2020 2020 2020 6966 2022 7a6f 6f6d          if "zoom
-000007d0: 2220 6e6f 7420 696e 206b 7761 7267 732e  " not in kwargs.
-000007e0: 6b65 7973 2829 3a0d 0a20 2020 2020 2020  keys():..       
-000007f0: 2020 2020 206b 7761 7267 735b 227a 6f6f       kwargs["zoo
-00000800: 6d22 5d20 3d20 7a6f 6f6d 0d0a 0d0a 2020  m"] = zoom....  
-00000810: 2020 2020 2020 6966 2022 6164 645f 676f        if "add_go
-00000820: 6f67 6c65 5f6d 6170 2220 6e6f 7420 696e  ogle_map" not in
-00000830: 206b 7761 7267 732e 6b65 7973 2829 2061   kwargs.keys() a
-00000840: 6e64 2022 6261 7365 6d61 7022 206e 6f74  nd "basemap" not
-00000850: 2069 6e20 6b77 6172 6773 2e6b 6579 7328   in kwargs.keys(
-00000860: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-00000870: 6b77 6172 6773 5b22 6164 645f 676f 6f67  kwargs["add_goog
-00000880: 6c65 5f6d 6170 225d 203d 2054 7275 650d  le_map"] = True.
-00000890: 0a20 2020 2020 2020 2069 6620 2273 6372  .        if "scr
-000008a0: 6f6c 6c5f 7768 6565 6c5f 7a6f 6f6d 2220  oll_wheel_zoom" 
-000008b0: 6e6f 7420 696e 206b 7761 7267 732e 6b65  not in kwargs.ke
-000008c0: 7973 2829 3a0d 0a20 2020 2020 2020 2020  ys():..         
-000008d0: 2020 206b 7761 7267 735b 2273 6372 6f6c     kwargs["scrol
-000008e0: 6c5f 7768 6565 6c5f 7a6f 6f6d 225d 203d  l_wheel_zoom"] =
-000008f0: 2054 7275 650d 0a0d 0a20 2020 2020 2020   True....       
-00000900: 2069 6620 226c 6974 655f 6d6f 6465 2220   if "lite_mode" 
-00000910: 6e6f 7420 696e 206b 7761 7267 732e 6b65  not in kwargs.ke
-00000920: 7973 2829 3a0d 0a20 2020 2020 2020 2020  ys():..         
-00000930: 2020 206b 7761 7267 735b 226c 6974 655f     kwargs["lite_
-00000940: 6d6f 6465 225d 203d 2046 616c 7365 0d0a  mode"] = False..
-00000950: 0d0a 2020 2020 2020 2020 6966 206b 7761  ..        if kwa
-00000960: 7267 735b 226c 6974 655f 6d6f 6465 225d  rgs["lite_mode"]
-00000970: 3a0d 0a20 2020 2020 2020 2020 2020 206b  :..            k
-00000980: 7761 7267 735b 2264 6174 615f 6374 726c  wargs["data_ctrl
-00000990: 225d 203d 2046 616c 7365 0d0a 2020 2020  "] = False..    
-000009a0: 2020 2020 2020 2020 6b77 6172 6773 5b22          kwargs["
-000009b0: 7a6f 6f6d 5f63 7472 6c22 5d20 3d20 5472  zoom_ctrl"] = Tr
-000009c0: 7565 0d0a 2020 2020 2020 2020 2020 2020  ue..            
-000009d0: 6b77 6172 6773 5b22 6675 6c6c 7363 7265  kwargs["fullscre
-000009e0: 656e 5f63 7472 6c22 5d20 3d20 4661 6c73  en_ctrl"] = Fals
-000009f0: 650d 0a20 2020 2020 2020 2020 2020 206b  e..            k
-00000a00: 7761 7267 735b 2264 7261 775f 6374 726c  wargs["draw_ctrl
-00000a10: 225d 203d 2046 616c 7365 0d0a 2020 2020  "] = False..    
-00000a20: 2020 2020 2020 2020 6b77 6172 6773 5b22          kwargs["
-00000a30: 7365 6172 6368 5f63 7472 6c22 5d20 3d20  search_ctrl"] = 
-00000a40: 4661 6c73 650d 0a20 2020 2020 2020 2020  False..         
-00000a50: 2020 206b 7761 7267 735b 226d 6561 7375     kwargs["measu
-00000a60: 7265 5f63 7472 6c22 5d20 3d20 4661 6c73  re_ctrl"] = Fals
-00000a70: 650d 0a20 2020 2020 2020 2020 2020 206b  e..            k
-00000a80: 7761 7267 735b 2273 6361 6c65 5f63 7472  wargs["scale_ctr
-00000a90: 6c22 5d20 3d20 4661 6c73 650d 0a20 2020  l"] = False..   
-00000aa0: 2020 2020 2020 2020 206b 7761 7267 735b           kwargs[
-00000ab0: 226c 6179 6572 5f63 7472 6c22 5d20 3d20  "layer_ctrl"] = 
-00000ac0: 4661 6c73 650d 0a20 2020 2020 2020 2020  False..         
-00000ad0: 2020 206b 7761 7267 735b 2274 6f6f 6c62     kwargs["toolb
-00000ae0: 6172 5f63 7472 6c22 5d20 3d20 4661 6c73  ar_ctrl"] = Fals
-00000af0: 650d 0a20 2020 2020 2020 2020 2020 206b  e..            k
-00000b00: 7761 7267 735b 2261 7474 7269 6275 7469  wargs["attributi
-00000b10: 6f6e 5f63 7472 6c22 5d20 3d20 4661 6c73  on_ctrl"] = Fals
-00000b20: 650d 0a0d 0a20 2020 2020 2020 2069 6620  e....        if 
-00000b30: 2264 6174 615f 6374 726c 2220 6e6f 7420  "data_ctrl" not 
-00000b40: 696e 206b 7761 7267 732e 6b65 7973 2829  in kwargs.keys()
-00000b50: 3a0d 0a20 2020 2020 2020 2020 2020 206b  :..            k
-00000b60: 7761 7267 735b 2264 6174 615f 6374 726c  wargs["data_ctrl
-00000b70: 225d 203d 2054 7275 650d 0a20 2020 2020  "] = True..     
-00000b80: 2020 2069 6620 227a 6f6f 6d5f 6374 726c     if "zoom_ctrl
-00000b90: 2220 6e6f 7420 696e 206b 7761 7267 732e  " not in kwargs.
-00000ba0: 6b65 7973 2829 3a0d 0a20 2020 2020 2020  keys():..       
-00000bb0: 2020 2020 206b 7761 7267 735b 227a 6f6f       kwargs["zoo
-00000bc0: 6d5f 6374 726c 225d 203d 2054 7275 650d  m_ctrl"] = True.
-00000bd0: 0a20 2020 2020 2020 2069 6620 2266 756c  .        if "ful
-00000be0: 6c73 6372 6565 6e5f 6374 726c 2220 6e6f  lscreen_ctrl" no
-00000bf0: 7420 696e 206b 7761 7267 732e 6b65 7973  t in kwargs.keys
-00000c00: 2829 3a0d 0a20 2020 2020 2020 2020 2020  ():..           
-00000c10: 206b 7761 7267 735b 2266 756c 6c73 6372   kwargs["fullscr
-00000c20: 6565 6e5f 6374 726c 225d 203d 2054 7275  een_ctrl"] = Tru
-00000c30: 650d 0a20 2020 2020 2020 2069 6620 2264  e..        if "d
-00000c40: 7261 775f 6374 726c 2220 6e6f 7420 696e  raw_ctrl" not in
-00000c50: 206b 7761 7267 732e 6b65 7973 2829 3a0d   kwargs.keys():.
-00000c60: 0a20 2020 2020 2020 2020 2020 206b 7761  .            kwa
-00000c70: 7267 735b 2264 7261 775f 6374 726c 225d  rgs["draw_ctrl"]
-00000c80: 203d 2054 7275 650d 0a20 2020 2020 2020   = True..       
-00000c90: 2069 6620 2273 6561 7263 685f 6374 726c   if "search_ctrl
-00000ca0: 2220 6e6f 7420 696e 206b 7761 7267 732e  " not in kwargs.
-00000cb0: 6b65 7973 2829 3a0d 0a20 2020 2020 2020  keys():..       
-00000cc0: 2020 2020 206b 7761 7267 735b 2273 6561       kwargs["sea
-00000cd0: 7263 685f 6374 726c 225d 203d 2046 616c  rch_ctrl"] = Fal
-00000ce0: 7365 0d0a 2020 2020 2020 2020 6966 2022  se..        if "
-00000cf0: 6d65 6173 7572 655f 6374 726c 2220 6e6f  measure_ctrl" no
-00000d00: 7420 696e 206b 7761 7267 732e 6b65 7973  t in kwargs.keys
-00000d10: 2829 3a0d 0a20 2020 2020 2020 2020 2020  ():..           
-00000d20: 206b 7761 7267 735b 226d 6561 7375 7265   kwargs["measure
-00000d30: 5f63 7472 6c22 5d20 3d20 5472 7565 0d0a  _ctrl"] = True..
-00000d40: 2020 2020 2020 2020 6966 2022 7363 616c          if "scal
-00000d50: 655f 6374 726c 2220 6e6f 7420 696e 206b  e_ctrl" not in k
-00000d60: 7761 7267 732e 6b65 7973 2829 3a0d 0a20  wargs.keys():.. 
-00000d70: 2020 2020 2020 2020 2020 206b 7761 7267             kwarg
-00000d80: 735b 2273 6361 6c65 5f63 7472 6c22 5d20  s["scale_ctrl"] 
-00000d90: 3d20 5472 7565 0d0a 2020 2020 2020 2020  = True..        
-00000da0: 6966 2022 6c61 7965 725f 6374 726c 2220  if "layer_ctrl" 
-00000db0: 6e6f 7420 696e 206b 7761 7267 732e 6b65  not in kwargs.ke
-00000dc0: 7973 2829 3a0d 0a20 2020 2020 2020 2020  ys():..         
-00000dd0: 2020 206b 7761 7267 735b 226c 6179 6572     kwargs["layer
-00000de0: 5f63 7472 6c22 5d20 3d20 4661 6c73 650d  _ctrl"] = False.
-00000df0: 0a20 2020 2020 2020 2069 6620 2274 6f6f  .        if "too
-00000e00: 6c62 6172 5f63 7472 6c22 206e 6f74 2069  lbar_ctrl" not i
-00000e10: 6e20 6b77 6172 6773 2e6b 6579 7328 293a  n kwargs.keys():
-00000e20: 0d0a 2020 2020 2020 2020 2020 2020 6b77  ..            kw
-00000e30: 6172 6773 5b22 746f 6f6c 6261 725f 6374  args["toolbar_ct
-00000e40: 726c 225d 203d 2054 7275 650d 0a20 2020  rl"] = True..   
-00000e50: 2020 2020 2069 6620 2261 7474 7269 6275       if "attribu
-00000e60: 7469 6f6e 5f63 7472 6c22 206e 6f74 2069  tion_ctrl" not i
-00000e70: 6e20 6b77 6172 6773 2e6b 6579 7328 293a  n kwargs.keys():
-00000e80: 0d0a 2020 2020 2020 2020 2020 2020 6b77  ..            kw
-00000e90: 6172 6773 5b22 6174 7472 6962 7574 696f  args["attributio
-00000ea0: 6e5f 6374 726c 225d 203d 2054 7275 650d  n_ctrl"] = True.
-00000eb0: 0a20 2020 2020 2020 2069 6620 2275 7365  .        if "use
-00000ec0: 5f76 6f69 6c61 2220 6e6f 7420 696e 206b  _voila" not in k
-00000ed0: 7761 7267 732e 6b65 7973 2829 3a0d 0a20  wargs.keys():.. 
-00000ee0: 2020 2020 2020 2020 2020 206b 7761 7267             kwarg
-00000ef0: 735b 2275 7365 5f76 6f69 6c61 225d 203d  s["use_voila"] =
-00000f00: 2046 616c 7365 0d0a 0d0a 2020 2020 2020   False....      
-00000f10: 2020 6966 2028 0d0a 2020 2020 2020 2020    if (..        
-00000f20: 2020 2020 2262 6173 656d 6170 2220 696e      "basemap" in
-00000f30: 206b 7761 7267 732e 6b65 7973 2829 0d0a   kwargs.keys()..
-00000f40: 2020 2020 2020 2020 2020 2020 616e 6420              and 
-00000f50: 6973 696e 7374 616e 6365 286b 7761 7267  isinstance(kwarg
-00000f60: 735b 2262 6173 656d 6170 225d 2c20 7374  s["basemap"], st
-00000f70: 7229 0d0a 2020 2020 2020 2020 2020 2020  r)..            
-00000f80: 616e 6420 6b77 6172 6773 5b22 6261 7365  and kwargs["base
-00000f90: 6d61 7022 5d20 696e 2062 6173 656d 6170  map"] in basemap
-00000fa0: 732e 6b65 7973 2829 0d0a 2020 2020 2020  s.keys()..      
-00000fb0: 2020 293a 0d0a 2020 2020 2020 2020 2020    ):..          
-00000fc0: 2020 6b77 6172 6773 5b22 6261 7365 6d61    kwargs["basema
-00000fd0: 7022 5d20 3d20 6261 7365 6d61 705f 7469  p"] = basemap_ti
-00000fe0: 6c65 735b 6b77 6172 6773 5b22 6261 7365  les[kwargs["base
-00000ff0: 6d61 7022 5d5d 0d0a 0d0a 2020 2020 2020  map"]]....      
-00001000: 2020 6966 206f 732e 656e 7669 726f 6e2e    if os.environ.
-00001010: 6765 7428 2255 5345 5f56 4f49 4c41 2229  get("USE_VOILA")
-00001020: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
-00001030: 2020 2020 2020 2020 2020 206b 7761 7267             kwarg
-00001040: 735b 2275 7365 5f76 6f69 6c61 225d 203d  s["use_voila"] =
-00001050: 2054 7275 650d 0a0d 0a20 2020 2020 2020   True....       
-00001060: 2023 2049 6e68 6572 6974 7320 7468 6520   # Inherits the 
-00001070: 6970 796c 6561 666c 6574 204d 6170 2063  ipyleaflet Map c
-00001080: 6c61 7373 0d0a 2020 2020 2020 2020 7375  lass..        su
-00001090: 7065 7228 292e 5f5f 696e 6974 5f5f 282a  per().__init__(*
-000010a0: 2a6b 7761 7267 7329 0d0a 2020 2020 2020  *kwargs)..      
-000010b0: 2020 7365 6c66 2e62 6173 6563 6c61 7373    self.baseclass
-000010c0: 203d 2022 6970 796c 6561 666c 6574 220d   = "ipyleaflet".
-000010d0: 0a20 2020 2020 2020 2073 656c 662e 6c61  .        self.la
-000010e0: 796f 7574 2e68 6569 6768 7420 3d20 6b77  yout.height = kw
-000010f0: 6172 6773 5b22 6865 6967 6874 225d 0d0a  args["height"]..
-00001100: 2020 2020 2020 2020 6966 2022 7769 6474          if "widt
-00001110: 6822 2069 6e20 6b77 6172 6773 3a0d 0a20  h" in kwargs:.. 
-00001120: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00001130: 6c61 796f 7574 2e77 6964 7468 203d 206b  layout.width = k
-00001140: 7761 7267 735b 2277 6964 7468 225d 0d0a  wargs["width"]..
-00001150: 0d0a 2020 2020 2020 2020 2320 7361 6e64  ..        # sand
-00001160: 626f 7820 7061 7468 2066 6f72 2056 6f69  box path for Voi
-00001170: 6c61 2061 7070 2074 6f20 7265 7374 7269  la app to restri
-00001180: 6374 2061 6363 6573 7320 746f 2073 7973  ct access to sys
-00001190: 7465 6d20 6469 7265 6374 6f72 6965 732e  tem directories.
-000011a0: 0d0a 2020 2020 2020 2020 6966 2022 7361  ..        if "sa
-000011b0: 6e64 626f 785f 7061 7468 2220 6e6f 7420  ndbox_path" not 
-000011c0: 696e 206b 7761 7267 733a 0d0a 2020 2020  in kwargs:..    
-000011d0: 2020 2020 2020 2020 6966 206f 732e 656e          if os.en
-000011e0: 7669 726f 6e2e 6765 7428 2255 5345 5f56  viron.get("USE_V
-000011f0: 4f49 4c41 2229 2069 7320 6e6f 7420 4e6f  OILA") is not No
-00001200: 6e65 3a0d 0a20 2020 2020 2020 2020 2020  ne:..           
-00001210: 2020 2020 2073 656c 662e 7361 6e64 626f       self.sandbo
-00001220: 785f 7061 7468 203d 206f 732e 6765 7463  x_path = os.getc
-00001230: 7764 2829 0d0a 2020 2020 2020 2020 2020  wd()..          
-00001240: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
-00001250: 2020 2020 2020 2020 2073 656c 662e 7361           self.sa
-00001260: 6e64 626f 785f 7061 7468 203d 204e 6f6e  ndbox_path = Non
-00001270: 650d 0a20 2020 2020 2020 2065 6c73 653a  e..        else:
-00001280: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
-00001290: 206f 732e 7061 7468 2e65 7869 7374 7328   os.path.exists(
-000012a0: 6f73 2e70 6174 682e 6162 7370 6174 6828  os.path.abspath(
-000012b0: 6b77 6172 6773 5b22 7361 6e64 626f 785f  kwargs["sandbox_
-000012c0: 7061 7468 225d 2929 3a0d 0a20 2020 2020  path"])):..     
-000012d0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-000012e0: 7361 6e64 626f 785f 7061 7468 203d 206b  sandbox_path = k
-000012f0: 7761 7267 735b 2273 616e 6462 6f78 5f70  wargs["sandbox_p
-00001300: 6174 6822 5d0d 0a20 2020 2020 2020 2020  ath"]..         
-00001310: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
-00001320: 2020 2020 2020 2020 2020 7072 696e 7428            print(
-00001330: 2254 6865 2073 616e 6462 6f78 2070 6174  "The sandbox pat
-00001340: 6820 6973 2069 6e76 616c 6964 2e22 290d  h is invalid.").
-00001350: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00001360: 2073 656c 662e 7361 6e64 626f 785f 7061   self.sandbox_pa
-00001370: 7468 203d 204e 6f6e 650d 0a0d 0a20 2020  th = None....   
-00001380: 2020 2020 2073 656c 662e 636c 6561 725f       self.clear_
-00001390: 636f 6e74 726f 6c73 2829 0d0a 0d0a 2020  controls()....  
-000013a0: 2020 2020 2020 2320 5468 6520 6e75 6d62        # The numb
-000013b0: 6572 206f 6620 7368 6170 6573 2064 7261  er of shapes dra
-000013c0: 776e 2062 7920 7468 6520 7573 6572 2075  wn by the user u
-000013d0: 7369 6e67 2074 6865 2044 7261 7743 6f6e  sing the DrawCon
-000013e0: 7472 6f6c 0d0a 2020 2020 2020 2020 7365  trol..        se
-000013f0: 6c66 2e64 7261 775f 636f 756e 7420 3d20  lf.draw_count = 
-00001400: 300d 0a20 2020 2020 2020 2023 2054 6865  0..        # The
-00001410: 206c 6973 7420 6f66 2045 6172 7468 2045   list of Earth E
-00001420: 6e67 696e 6520 4765 6f6d 6574 7279 206f  ngine Geometry o
-00001430: 626a 6563 7473 2063 6f6e 7665 7274 6564  bjects converted
-00001440: 2066 726f 6d20 6765 6f6a 736f 6e0d 0a20   from geojson.. 
-00001450: 2020 2020 2020 2073 656c 662e 6472 6177         self.draw
-00001460: 5f66 6561 7475 7265 7320 3d20 5b5d 0d0a  _features = []..
-00001470: 2020 2020 2020 2020 2320 5468 6520 4561          # The Ea
-00001480: 7274 6820 456e 6769 6e65 2047 656f 6d65  rth Engine Geome
-00001490: 7472 7920 6f62 6a65 6374 2063 6f6e 7665  try object conve
-000014a0: 7274 6564 2066 726f 6d20 7468 6520 6c61  rted from the la
-000014b0: 7374 2064 7261 776e 2066 6561 7475 7265  st drawn feature
-000014c0: 0d0a 2020 2020 2020 2020 7365 6c66 2e64  ..        self.d
-000014d0: 7261 775f 6c61 7374 5f66 6561 7475 7265  raw_last_feature
-000014e0: 203d 204e 6f6e 650d 0a20 2020 2020 2020   = None..       
-000014f0: 2073 656c 662e 6472 6177 5f6c 6179 6572   self.draw_layer
-00001500: 203d 204e 6f6e 650d 0a20 2020 2020 2020   = None..       
-00001510: 2073 656c 662e 6472 6177 5f6c 6173 745f   self.draw_last_
-00001520: 6a73 6f6e 203d 204e 6f6e 650d 0a20 2020  json = None..   
-00001530: 2020 2020 2073 656c 662e 6472 6177 5f6c       self.draw_l
-00001540: 6173 745f 626f 756e 6473 203d 204e 6f6e  ast_bounds = Non
-00001550: 650d 0a20 2020 2020 2020 2073 656c 662e  e..        self.
-00001560: 7573 6572 5f72 6f69 203d 204e 6f6e 650d  user_roi = None.
-00001570: 0a20 2020 2020 2020 2073 656c 662e 7573  .        self.us
-00001580: 6572 5f72 6f69 7320 3d20 4e6f 6e65 0d0a  er_rois = None..
-00001590: 2020 2020 2020 2020 7365 6c66 2e6c 6173          self.las
-000015a0: 745f 6565 5f64 6174 6120 3d20 4e6f 6e65  t_ee_data = None
-000015b0: 0d0a 2020 2020 2020 2020 7365 6c66 2e6c  ..        self.l
-000015c0: 6173 745f 6565 5f6c 6179 6572 203d 204e  ast_ee_layer = N
-000015d0: 6f6e 650d 0a0d 0a20 2020 2020 2020 2073  one....        s
-000015e0: 656c 662e 726f 695f 7374 6172 7420 3d20  elf.roi_start = 
-000015f0: 4661 6c73 650d 0a20 2020 2020 2020 2073  False..        s
-00001600: 656c 662e 726f 695f 656e 6420 3d20 4661  elf.roi_end = Fa
-00001610: 6c73 650d 0a20 2020 2020 2020 2069 6620  lse..        if 
-00001620: 6b77 6172 6773 5b22 6565 5f69 6e69 7469  kwargs["ee_initi
-00001630: 616c 697a 6522 5d3a 0d0a 2020 2020 2020  alize"]:..      
-00001640: 2020 2020 2020 7365 6c66 2e72 6f69 5f72        self.roi_r
-00001650: 6564 7563 6572 203d 2065 652e 5265 6475  educer = ee.Redu
-00001660: 6365 722e 6d65 616e 2829 0d0a 2020 2020  cer.mean()..    
-00001670: 2020 2020 7365 6c66 2e72 6f69 5f72 6564      self.roi_red
-00001680: 7563 6572 5f73 6361 6c65 203d 204e 6f6e  ucer_scale = Non
-00001690: 650d 0a0d 0a20 2020 2020 2020 2023 204c  e....        # L
-000016a0: 6973 7420 666f 7220 7374 6f72 696e 6720  ist for storing 
-000016b0: 7069 7865 6c20 7661 6c75 6573 2061 6e64  pixel values and
-000016c0: 206c 6f63 6174 696f 6e73 2062 6173 6564   locations based
-000016d0: 206f 6e20 7573 6572 2d64 7261 776e 2067   on user-drawn g
-000016e0: 656f 6d65 7472 6965 732e 0d0a 2020 2020  eometries...    
-000016f0: 2020 2020 7365 6c66 2e63 6861 7274 5f70      self.chart_p
-00001700: 6f69 6e74 7320 3d20 5b5d 0d0a 2020 2020  oints = []..    
-00001710: 2020 2020 7365 6c66 2e63 6861 7274 5f76      self.chart_v
-00001720: 616c 7565 7320 3d20 5b5d 0d0a 2020 2020  alues = []..    
-00001730: 2020 2020 7365 6c66 2e63 6861 7274 5f6c      self.chart_l
-00001740: 6162 656c 7320 3d20 4e6f 6e65 0d0a 0d0a  abels = None....
-00001750: 2020 2020 2020 2020 7365 6c66 2e70 6c6f          self.plo
-00001760: 745f 7769 6467 6574 203d 204e 6f6e 6520  t_widget = None 
-00001770: 2023 2054 6865 2070 6c6f 7420 7769 6467   # The plot widg
-00001780: 6574 2066 6f72 2070 6c6f 7474 696e 6720  et for plotting 
-00001790: 4561 7274 6820 456e 6769 6e65 2064 6174  Earth Engine dat
-000017a0: 610d 0a20 2020 2020 2020 2073 656c 662e  a..        self.
-000017b0: 706c 6f74 5f63 6f6e 7472 6f6c 203d 204e  plot_control = N
-000017c0: 6f6e 6520 2023 2054 6865 2070 6c6f 7420  one  # The plot 
-000017d0: 636f 6e74 726f 6c20 666f 7220 696e 7465  control for inte
-000017e0: 7261 6374 696e 6720 706c 6f74 7469 6e67  racting plotting
-000017f0: 0d0a 2020 2020 2020 2020 7365 6c66 2e72  ..        self.r
-00001800: 616e 646f 6d5f 6d61 726b 6572 203d 204e  andom_marker = N
-00001810: 6f6e 650d 0a0d 0a20 2020 2020 2020 2073  one....        s
-00001820: 656c 662e 6c65 6765 6e64 5f77 6964 6765  elf.legend_widge
-00001830: 7420 3d20 4e6f 6e65 0d0a 2020 2020 2020  t = None..      
-00001840: 2020 7365 6c66 2e6c 6567 656e 645f 636f    self.legend_co
-00001850: 6e74 726f 6c20 3d20 4e6f 6e65 0d0a 2020  ntrol = None..  
-00001860: 2020 2020 2020 7365 6c66 2e63 6f6c 6f72        self.color
-00001870: 6261 7220 3d20 4e6f 6e65 0d0a 0d0a 2020  bar = None....  
-00001880: 2020 2020 2020 7365 6c66 2e65 655f 6c61        self.ee_la
-00001890: 7965 7273 203d 205b 5d0d 0a20 2020 2020  yers = []..     
-000018a0: 2020 2073 656c 662e 6565 5f6c 6179 6572     self.ee_layer
-000018b0: 5f6e 616d 6573 203d 205b 5d0d 0a20 2020  _names = []..   
-000018c0: 2020 2020 2073 656c 662e 6565 5f72 6173       self.ee_ras
-000018d0: 7465 725f 6c61 7965 7273 203d 205b 5d0d  ter_layers = [].
-000018e0: 0a20 2020 2020 2020 2073 656c 662e 6565  .        self.ee
-000018f0: 5f72 6173 7465 725f 6c61 7965 725f 6e61  _raster_layer_na
-00001900: 6d65 7320 3d20 5b5d 0d0a 2020 2020 2020  mes = []..      
-00001910: 2020 7365 6c66 2e65 655f 7665 6374 6f72    self.ee_vector
-00001920: 5f6c 6179 6572 7320 3d20 5b5d 0d0a 2020  _layers = []..  
-00001930: 2020 2020 2020 7365 6c66 2e65 655f 7665        self.ee_ve
-00001940: 6374 6f72 5f6c 6179 6572 5f6e 616d 6573  ctor_layer_names
-00001950: 203d 205b 5d0d 0a20 2020 2020 2020 2073   = []..        s
-00001960: 656c 662e 6565 5f6c 6179 6572 5f64 6963  elf.ee_layer_dic
-00001970: 7420 3d20 7b7d 0d0a 0d0a 2020 2020 2020  t = {}....      
-00001980: 2020 7365 6c66 2e73 6561 7263 685f 6c6f    self.search_lo
-00001990: 6361 7469 6f6e 7320 3d20 4e6f 6e65 0d0a  cations = None..
-000019a0: 2020 2020 2020 2020 7365 6c66 2e73 6561          self.sea
-000019b0: 7263 685f 6c6f 635f 6d61 726b 6572 203d  rch_loc_marker =
-000019c0: 204e 6f6e 650d 0a20 2020 2020 2020 2073   None..        s
-000019d0: 656c 662e 7365 6172 6368 5f6c 6f63 5f67  elf.search_loc_g
-000019e0: 656f 6d20 3d20 4e6f 6e65 0d0a 2020 2020  eom = None..    
-000019f0: 2020 2020 7365 6c66 2e73 6561 7263 685f      self.search_
-00001a00: 6461 7461 7365 7473 203d 204e 6f6e 650d  datasets = None.
-00001a10: 0a20 2020 2020 2020 2073 656c 662e 7363  .        self.sc
-00001a20: 7265 656e 7368 6f74 203d 204e 6f6e 650d  reenshot = None.
-00001a30: 0a20 2020 2020 2020 2073 656c 662e 746f  .        self.to
-00001a40: 6f6c 6261 7220 3d20 4e6f 6e65 0d0a 2020  olbar = None..  
-00001a50: 2020 2020 2020 7365 6c66 2e74 6f6f 6c62        self.toolb
-00001a60: 6172 5f62 7574 746f 6e20 3d20 4e6f 6e65  ar_button = None
-00001a70: 0d0a 2020 2020 2020 2020 7365 6c66 2e76  ..        self.v
-00001a80: 6973 5f63 6f6e 7472 6f6c 203d 204e 6f6e  is_control = Non
-00001a90: 650d 0a20 2020 2020 2020 2073 656c 662e  e..        self.
-00001aa0: 7669 735f 7769 6467 6574 203d 204e 6f6e  vis_widget = Non
-00001ab0: 650d 0a20 2020 2020 2020 2073 656c 662e  e..        self.
-00001ac0: 636f 6c6f 7262 6172 5f63 7472 6c20 3d20  colorbar_ctrl = 
-00001ad0: 4e6f 6e65 0d0a 2020 2020 2020 2020 7365  None..        se
-00001ae0: 6c66 2e63 6f6c 6f72 6261 725f 7769 6467  lf.colorbar_widg
-00001af0: 6574 203d 204e 6f6e 650d 0a20 2020 2020  et = None..     
-00001b00: 2020 2073 656c 662e 746f 6f6c 5f6f 7574     self.tool_out
-00001b10: 7075 7420 3d20 4e6f 6e65 0d0a 2020 2020  put = None..    
-00001b20: 2020 2020 7365 6c66 2e74 6f6f 6c5f 6f75      self.tool_ou
-00001b30: 7470 7574 5f63 7472 6c20 3d20 4e6f 6e65  tput_ctrl = None
-00001b40: 0d0a 2020 2020 2020 2020 7365 6c66 2e6c  ..        self.l
-00001b50: 6179 6572 5f63 6f6e 7472 6f6c 203d 204e  ayer_control = N
-00001b60: 6f6e 650d 0a20 2020 2020 2020 2073 656c  one..        sel
-00001b70: 662e 636f 6e76 6572 745f 6374 726c 203d  f.convert_ctrl =
-00001b80: 204e 6f6e 650d 0a0d 0a20 2020 2020 2020   None....       
-00001b90: 2023 2041 6464 7320 7365 6172 6368 2062   # Adds search b
-00001ba0: 7574 746f 6e20 616e 6420 7365 6172 6368  utton and search
-00001bb0: 2062 6f78 0d0a 2020 2020 2020 2020 7365   box..        se
-00001bc0: 6172 6368 5f62 7574 746f 6e20 3d20 7769  arch_button = wi
-00001bd0: 6467 6574 732e 546f 6767 6c65 4275 7474  dgets.ToggleButt
-00001be0: 6f6e 280d 0a20 2020 2020 2020 2020 2020  on(..           
-00001bf0: 2076 616c 7565 3d46 616c 7365 2c0d 0a20   value=False,.. 
-00001c00: 2020 2020 2020 2020 2020 2074 6f6f 6c74             toolt
-00001c10: 6970 3d22 5365 6172 6368 206c 6f63 6174  ip="Search locat
-00001c20: 696f 6e2f 6461 7461 222c 0d0a 2020 2020  ion/data",..    
-00001c30: 2020 2020 2020 2020 6963 6f6e 3d22 676c          icon="gl
-00001c40: 6f62 6522 2c0d 0a20 2020 2020 2020 2020  obe",..         
-00001c50: 2020 206c 6179 6f75 743d 7769 6467 6574     layout=widget
-00001c60: 732e 4c61 796f 7574 280d 0a20 2020 2020  s.Layout(..     
-00001c70: 2020 2020 2020 2020 2020 2077 6964 7468             width
-00001c80: 3d22 3238 7078 222c 2068 6569 6768 743d  ="28px", height=
-00001c90: 2232 3870 7822 2c20 7061 6464 696e 673d  "28px", padding=
-00001ca0: 2230 7078 2030 7078 2030 7078 2034 7078  "0px 0px 0px 4px
-00001cb0: 220d 0a20 2020 2020 2020 2020 2020 2029  "..            )
-00001cc0: 2c0d 0a20 2020 2020 2020 2029 0d0a 0d0a  ,..        )....
-00001cd0: 2020 2020 2020 2020 7365 6172 6368 5f74          search_t
-00001ce0: 7970 6520 3d20 7769 6467 6574 732e 546f  ype = widgets.To
-00001cf0: 6767 6c65 4275 7474 6f6e 7328 0d0a 2020  ggleButtons(..  
-00001d00: 2020 2020 2020 2020 2020 6f70 7469 6f6e            option
-00001d10: 733d 5b22 6e61 6d65 2f61 6464 7265 7373  s=["name/address
-00001d20: 222c 2022 6c61 742d 6c6f 6e22 2c20 2264  ", "lat-lon", "d
-00001d30: 6174 6122 5d2c 0d0a 2020 2020 2020 2020  ata"],..        
-00001d40: 2020 2020 746f 6f6c 7469 7073 3d5b 0d0a      tooltips=[..
-00001d50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001d60: 2253 6561 7263 6820 6279 2070 6c61 6365  "Search by place
-00001d70: 206e 616d 6520 6f72 2061 6464 7265 7373   name or address
-00001d80: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
-00001d90: 2020 2020 2253 6561 7263 6820 6279 206c      "Search by l
-00001da0: 6174 2d6c 6f6e 2063 6f6f 7264 696e 6174  at-lon coordinat
-00001db0: 6573 222c 0d0a 2020 2020 2020 2020 2020  es",..          
-00001dc0: 2020 2020 2020 2253 6561 7263 6820 4561        "Search Ea
-00001dd0: 7274 6820 456e 6769 6e65 2064 6174 6120  rth Engine data 
-00001de0: 6361 7461 6c6f 6722 2c0d 0a20 2020 2020  catalog",..     
-00001df0: 2020 2020 2020 205d 2c0d 0a20 2020 2020         ],..     
-00001e00: 2020 2029 0d0a 2020 2020 2020 2020 7365     )..        se
-00001e10: 6172 6368 5f74 7970 652e 7374 796c 652e  arch_type.style.
-00001e20: 6275 7474 6f6e 5f77 6964 7468 203d 2022  button_width = "
-00001e30: 3131 3070 7822 0d0a 0d0a 2020 2020 2020  110px"....      
-00001e40: 2020 7365 6172 6368 5f62 6f78 203d 2077    search_box = w
-00001e50: 6964 6765 7473 2e54 6578 7428 0d0a 2020  idgets.Text(..  
-00001e60: 2020 2020 2020 2020 2020 706c 6163 6568            placeh
-00001e70: 6f6c 6465 723d 2253 6561 7263 6820 6279  older="Search by
-00001e80: 2070 6c61 6365 206e 616d 6520 6f72 2061   place name or a
-00001e90: 6464 7265 7373 222c 0d0a 2020 2020 2020  ddress",..      
-00001ea0: 2020 2020 2020 746f 6f6c 7469 703d 2253        tooltip="S
-00001eb0: 6561 7263 6820 6c6f 6361 7469 6f6e 222c  earch location",
-00001ec0: 0d0a 2020 2020 2020 2020 2020 2020 6c61  ..            la
-00001ed0: 796f 7574 3d77 6964 6765 7473 2e4c 6179  yout=widgets.Lay
-00001ee0: 6f75 7428 7769 6474 683d 2233 3430 7078  out(width="340px
-00001ef0: 2229 2c0d 0a20 2020 2020 2020 2029 0d0a  "),..        )..
-00001f00: 0d0a 2020 2020 2020 2020 7365 6172 6368  ..        search
-00001f10: 5f6f 7574 7075 7420 3d20 7769 6467 6574  _output = widget
-00001f20: 732e 4f75 7470 7574 280d 0a20 2020 2020  s.Output(..     
-00001f30: 2020 2020 2020 206c 6179 6f75 743d 7b0d         layout={.
-00001f40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00001f50: 2022 6d61 785f 7769 6474 6822 3a20 2233   "max_width": "3
-00001f60: 3430 7078 222c 0d0a 2020 2020 2020 2020  40px",..        
-00001f70: 2020 2020 2020 2020 226d 6178 5f68 6569          "max_hei
-00001f80: 6768 7422 3a20 2232 3530 7078 222c 0d0a  ght": "250px",..
-00001f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001fa0: 226f 7665 7266 6c6f 7722 3a20 2273 6372  "overflow": "scr
-00001fb0: 6f6c 6c22 2c0d 0a20 2020 2020 2020 2020  oll",..         
-00001fc0: 2020 207d 0d0a 2020 2020 2020 2020 290d     }..        ).
-00001fd0: 0a0d 0a20 2020 2020 2020 2073 6561 7263  ...        searc
-00001fe0: 685f 7265 7375 6c74 7320 3d20 7769 6467  h_results = widg
-00001ff0: 6574 732e 5261 6469 6f42 7574 746f 6e73  ets.RadioButtons
-00002000: 2829 0d0a 0d0a 2020 2020 2020 2020 6173  ()....        as
-00002010: 7365 7473 5f64 726f 7064 6f77 6e20 3d20  sets_dropdown = 
-00002020: 7769 6467 6574 732e 4472 6f70 646f 776e  widgets.Dropdown
-00002030: 280d 0a20 2020 2020 2020 2020 2020 206f  (..            o
-00002040: 7074 696f 6e73 3d5b 5d2c 0d0a 2020 2020  ptions=[],..    
-00002050: 2020 2020 2020 2020 6c61 796f 7574 3d77          layout=w
-00002060: 6964 6765 7473 2e4c 6179 6f75 7428 6d69  idgets.Layout(mi
-00002070: 6e5f 7769 6474 683d 2232 3739 7078 222c  n_width="279px",
-00002080: 206d 6178 5f77 6964 7468 3d22 3237 3970   max_width="279p
-00002090: 7822 292c 0d0a 2020 2020 2020 2020 290d  x"),..        ).
-000020a0: 0a0d 0a20 2020 2020 2020 2069 6d70 6f72  ...        impor
-000020b0: 745f 6274 6e20 3d20 7769 6467 6574 732e  t_btn = widgets.
-000020c0: 4275 7474 6f6e 280d 0a20 2020 2020 2020  Button(..       
-000020d0: 2020 2020 2064 6573 6372 6970 7469 6f6e       description
-000020e0: 3d22 696d 706f 7274 222c 0d0a 2020 2020  ="import",..    
-000020f0: 2020 2020 2020 2020 6275 7474 6f6e 5f73          button_s
-00002100: 7479 6c65 3d22 7072 696d 6172 7922 2c0d  tyle="primary",.
-00002110: 0a20 2020 2020 2020 2020 2020 2074 6f6f  .            too
-00002120: 6c74 6970 3d22 436c 6963 6b20 746f 2069  ltip="Click to i
-00002130: 6d70 6f72 7420 7468 6520 7365 6c65 6374  mport the select
-00002140: 6564 2061 7373 6574 222c 0d0a 2020 2020  ed asset",..    
-00002150: 2020 2020 2020 2020 6c61 796f 7574 3d77          layout=w
-00002160: 6964 6765 7473 2e4c 6179 6f75 7428 6d69  idgets.Layout(mi
-00002170: 6e5f 7769 6474 683d 2235 3770 7822 2c20  n_width="57px", 
-00002180: 6d61 785f 7769 6474 683d 2235 3770 7822  max_width="57px"
-00002190: 292c 0d0a 2020 2020 2020 2020 290d 0a0d  ),..        )...
-000021a0: 0a20 2020 2020 2020 2064 6566 2069 6d70  .        def imp
-000021b0: 6f72 745f 6274 6e5f 636c 6963 6b65 6428  ort_btn_clicked(
-000021c0: 6229 3a0d 0a20 2020 2020 2020 2020 2020  b):..           
-000021d0: 2069 6620 6173 7365 7473 5f64 726f 7064   if assets_dropd
-000021e0: 6f77 6e2e 7661 6c75 6520 6973 206e 6f74  own.value is not
-000021f0: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
-00002200: 2020 2020 2020 2020 6461 7461 7365 7473          datasets
-00002210: 203d 2073 656c 662e 7365 6172 6368 5f64   = self.search_d
-00002220: 6174 6173 6574 730d 0a20 2020 2020 2020  atasets..       
-00002230: 2020 2020 2020 2020 2064 6174 6173 6574           dataset
-00002240: 203d 2064 6174 6173 6574 735b 6173 7365   = datasets[asse
-00002250: 7473 5f64 726f 7064 6f77 6e2e 696e 6465  ts_dropdown.inde
-00002260: 785d 0d0a 2020 2020 2020 2020 2020 2020  x]..            
-00002270: 2020 2020 6461 7461 7365 745f 7569 6420      dataset_uid 
-00002280: 3d20 2264 6174 6173 6574 5f22 202b 2072  = "dataset_" + r
-00002290: 616e 646f 6d5f 7374 7269 6e67 2873 7472  andom_string(str
-000022a0: 696e 675f 6c65 6e67 7468 3d33 290d 0a20  ing_length=3).. 
-000022b0: 2020 2020 2020 2020 2020 2020 2020 206c                 l
-000022c0: 696e 6531 203d 2022 7b7d 203d 207b 7d5c  ine1 = "{} = {}\
-000022d0: 6e22 2e66 6f72 6d61 7428 6461 7461 7365  n".format(datase
-000022e0: 745f 7569 642c 2064 6174 6173 6574 5b22  t_uid, dataset["
-000022f0: 6565 5f69 645f 736e 6970 7065 7422 5d29  ee_id_snippet"])
-00002300: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00002310: 2020 6c69 6e65 3220 3d20 224d 6170 2e61    line2 = "Map.a
-00002320: 6464 4c61 7965 7228 2220 2b20 6461 7461  ddLayer(" + data
-00002330: 7365 745f 7569 6420 2b20 272c 207b 7d2c  set_uid + ', {},
-00002340: 2022 2720 2b20 6461 7461 7365 745b 2269   "' + dataset["i
-00002350: 6422 5d20 2b20 2722 2927 0d0a 2020 2020  d"] + '")'..    
-00002360: 2020 2020 2020 2020 2020 2020 636f 6e74              cont
-00002370: 656e 7473 203d 2022 222e 6a6f 696e 285b  ents = "".join([
-00002380: 6c69 6e65 312c 206c 696e 6532 5d29 0d0a  line1, line2])..
-00002390: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000023a0: 6372 6561 7465 5f63 6f64 655f 6365 6c6c  create_code_cell
-000023b0: 2863 6f6e 7465 6e74 7329 0d0a 0d0a 2020  (contents)....  
-000023c0: 2020 2020 2020 696d 706f 7274 5f62 746e        import_btn
-000023d0: 2e6f 6e5f 636c 6963 6b28 696d 706f 7274  .on_click(import
-000023e0: 5f62 746e 5f63 6c69 636b 6564 290d 0a0d  _btn_clicked)...
-000023f0: 0a20 2020 2020 2020 2068 746d 6c5f 7769  .        html_wi
-00002400: 6467 6574 203d 2077 6964 6765 7473 2e48  dget = widgets.H
-00002410: 544d 4c28 290d 0a0d 0a20 2020 2020 2020  TML()....       
-00002420: 2064 6566 2064 726f 7064 6f77 6e5f 6368   def dropdown_ch
-00002430: 616e 6765 2863 6861 6e67 6529 3a0d 0a20  ange(change):.. 
-00002440: 2020 2020 2020 2020 2020 2064 726f 7064             dropd
-00002450: 6f77 6e5f 696e 6465 7820 3d20 6173 7365  own_index = asse
-00002460: 7473 5f64 726f 7064 6f77 6e2e 696e 6465  ts_dropdown.inde
-00002470: 780d 0a20 2020 2020 2020 2020 2020 2069  x..            i
-00002480: 6620 6472 6f70 646f 776e 5f69 6e64 6578  f dropdown_index
-00002490: 2069 7320 6e6f 7420 4e6f 6e65 2061 6e64   is not None and
-000024a0: 2064 726f 7064 6f77 6e5f 696e 6465 7820   dropdown_index 
-000024b0: 3e3d 2030 3a0d 0a20 2020 2020 2020 2020  >= 0:..         
-000024c0: 2020 2020 2020 2077 6974 6820 7365 6172         with sear
-000024d0: 6368 5f6f 7574 7075 743a 0d0a 2020 2020  ch_output:..    
-000024e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000024f0: 7365 6172 6368 5f6f 7574 7075 742e 636c  search_output.cl
-00002500: 6561 725f 6f75 7470 7574 2877 6169 743d  ear_output(wait=
-00002510: 5472 7565 290d 0a20 2020 2020 2020 2020  True)..         
-00002520: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-00002530: 2822 4c6f 6164 696e 6720 2e2e 2e22 290d  ("Loading ...").
-00002540: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00002550: 2020 2020 2064 6174 6173 6574 7320 3d20       datasets = 
-00002560: 7365 6c66 2e73 6561 7263 685f 6461 7461  self.search_data
-00002570: 7365 7473 0d0a 2020 2020 2020 2020 2020  sets..          
-00002580: 2020 2020 2020 2020 2020 6461 7461 7365            datase
-00002590: 7420 3d20 6461 7461 7365 7473 5b64 726f  t = datasets[dro
-000025a0: 7064 6f77 6e5f 696e 6465 785d 0d0a 2020  pdown_index]..  
+000002b0: 6c74 696e 5f6c 6567 656e 6473 0d0a 6672  ltin_legends..fr
+000002c0: 6f6d 202e 7469 6d65 6c61 7073 6520 696d  om .timelapse im
+000002d0: 706f 7274 202a 0d0a 0d0a 0d0a 636c 6173  port *......clas
+000002e0: 7320 4d61 7028 6970 796c 6561 666c 6574  s Map(ipyleaflet
+000002f0: 2e4d 6170 293a 0d0a 2020 2020 2222 2254  .Map):..    """T
+00000300: 6865 204d 6170 2063 6c61 7373 2069 6e68  he Map class inh
+00000310: 6572 6974 7320 6672 6f6d 2069 7079 6c65  erits from ipyle
+00000320: 6166 6c65 742e 4d61 702e 2054 6865 2061  aflet.Map. The a
+00000330: 7267 756d 656e 7473 2079 6f75 2063 616e  rguments you can
+00000340: 2070 6173 7320 746f 2074 6865 204d 6170   pass to the Map
+00000350: 2063 616e 2062 6520 666f 756e 6420 6174   can be found at
+00000360: 2068 7474 7073 3a2f 2f69 7079 6c65 6166   https://ipyleaf
+00000370: 6c65 742e 7265 6164 7468 6564 6f63 732e  let.readthedocs.
+00000380: 696f 2f65 6e2f 6c61 7465 7374 2f61 7069  io/en/latest/api
+00000390: 5f72 6566 6572 656e 6365 2f6d 6170 2e68  _reference/map.h
+000003a0: 746d 6c2e 2042 7920 6465 6661 756c 742c  tml. By default,
+000003b0: 2074 6865 204d 6170 2077 696c 6c20 6164   the Map will ad
+000003c0: 6420 476f 6f67 6c65 204d 6170 7320 6173  d Google Maps as
+000003d0: 2074 6865 2062 6173 656d 6170 2e20 5365   the basemap. Se
+000003e0: 7420 6164 645f 676f 6f67 6c65 5f6d 6170  t add_google_map
+000003f0: 203d 2046 616c 7365 2074 6f20 7573 6520   = False to use 
+00000400: 4f70 656e 5374 7265 6574 4d61 7020 6173  OpenStreetMap as
+00000410: 2074 6865 2062 6173 656d 6170 2e0d 0a0d   the basemap....
+00000420: 0a20 2020 2052 6574 7572 6e73 3a0d 0a20  .    Returns:.. 
+00000430: 2020 2020 2020 206f 626a 6563 743a 2069         object: i
+00000440: 7079 6c65 6166 6c65 7420 6d61 7020 6f62  pyleaflet map ob
+00000450: 6a65 6374 2e0d 0a20 2020 2022 2222 0d0a  ject...    """..
+00000460: 0d0a 2020 2020 6465 6620 5f5f 696e 6974  ..    def __init
+00000470: 5f5f 2873 656c 662c 202a 2a6b 7761 7267  __(self, **kwarg
+00000480: 7329 3a0d 0a0d 0a20 2020 2020 2020 2023  s):....        #
+00000490: 2041 7574 6865 6e74 6963 6174 6573 2045   Authenticates E
+000004a0: 6172 7468 2045 6e67 696e 6520 616e 6420  arth Engine and 
+000004b0: 696e 6974 6961 6c69 7a65 7320 616e 2045  initializes an E
+000004c0: 6172 7468 2045 6e67 696e 6520 7365 7373  arth Engine sess
+000004d0: 696f 6e0d 0a20 2020 2020 2020 2069 6620  ion..        if 
+000004e0: 2265 655f 696e 6974 6961 6c69 7a65 2220  "ee_initialize" 
+000004f0: 6e6f 7420 696e 206b 7761 7267 732e 6b65  not in kwargs.ke
+00000500: 7973 2829 3a0d 0a20 2020 2020 2020 2020  ys():..         
+00000510: 2020 206b 7761 7267 735b 2265 655f 696e     kwargs["ee_in
+00000520: 6974 6961 6c69 7a65 225d 203d 2054 7275  itialize"] = Tru
+00000530: 650d 0a0d 0a20 2020 2020 2020 2069 6620  e....        if 
+00000540: 6b77 6172 6773 5b22 6565 5f69 6e69 7469  kwargs["ee_initi
+00000550: 616c 697a 6522 5d3a 0d0a 2020 2020 2020  alize"]:..      
+00000560: 2020 2020 2020 6565 5f69 6e69 7469 616c        ee_initial
+00000570: 697a 6528 290d 0a0d 0a20 2020 2020 2020  ize()....       
+00000580: 2023 2044 6566 6175 6c74 206d 6170 2063   # Default map c
+00000590: 656e 7465 7220 6c6f 6361 7469 6f6e 2028  enter location (
+000005a0: 6c61 742c 206c 6f6e 2920 616e 6420 7a6f  lat, lon) and zo
+000005b0: 6f6d 206c 6576 656c 0d0a 2020 2020 2020  om level..      
+000005c0: 2020 6c61 746c 6f6e 203d 205b 3430 2c20    latlon = [40, 
+000005d0: 2d31 3030 5d0d 0a20 2020 2020 2020 207a  -100]..        z
+000005e0: 6f6f 6d20 3d20 340d 0a0d 0a20 2020 2020  oom = 4....     
+000005f0: 2020 2023 2049 6e74 6572 6368 616e 6765     # Interchange
+00000600: 6162 6c65 2070 6172 616d 6574 6572 7320  able parameters 
+00000610: 6265 7477 6565 6e20 6970 796c 6561 666c  between ipyleafl
+00000620: 6574 2061 6e64 2066 6f6c 6975 6d0d 0a20  et and folium.. 
+00000630: 2020 2020 2020 2069 6620 2268 6569 6768         if "heigh
+00000640: 7422 206e 6f74 2069 6e20 6b77 6172 6773  t" not in kwargs
+00000650: 2e6b 6579 7328 293a 0d0a 2020 2020 2020  .keys():..      
+00000660: 2020 2020 2020 6b77 6172 6773 5b22 6865        kwargs["he
+00000670: 6967 6874 225d 203d 2022 3630 3070 7822  ight"] = "600px"
+00000680: 0d0a 2020 2020 2020 2020 6966 2022 6c6f  ..        if "lo
+00000690: 6361 7469 6f6e 2220 696e 206b 7761 7267  cation" in kwarg
+000006a0: 732e 6b65 7973 2829 3a0d 0a20 2020 2020  s.keys():..     
+000006b0: 2020 2020 2020 206b 7761 7267 735b 2263         kwargs["c
+000006c0: 656e 7465 7222 5d20 3d20 6b77 6172 6773  enter"] = kwargs
+000006d0: 5b22 6c6f 6361 7469 6f6e 225d 0d0a 2020  ["location"]..  
+000006e0: 2020 2020 2020 2020 2020 6b77 6172 6773            kwargs
+000006f0: 2e70 6f70 2822 6c6f 6361 7469 6f6e 2229  .pop("location")
+00000700: 0d0a 2020 2020 2020 2020 6966 2022 6365  ..        if "ce
+00000710: 6e74 6572 2220 6e6f 7420 696e 206b 7761  nter" not in kwa
+00000720: 7267 732e 6b65 7973 2829 3a0d 0a20 2020  rgs.keys():..   
+00000730: 2020 2020 2020 2020 206b 7761 7267 735b           kwargs[
+00000740: 2263 656e 7465 7222 5d20 3d20 6c61 746c  "center"] = latl
+00000750: 6f6e 0d0a 0d0a 2020 2020 2020 2020 6966  on....        if
+00000760: 2022 7a6f 6f6d 5f73 7461 7274 2220 696e   "zoom_start" in
+00000770: 206b 7761 7267 732e 6b65 7973 2829 3a0d   kwargs.keys():.
+00000780: 0a20 2020 2020 2020 2020 2020 206b 7761  .            kwa
+00000790: 7267 735b 227a 6f6f 6d22 5d20 3d20 6b77  rgs["zoom"] = kw
+000007a0: 6172 6773 5b22 7a6f 6f6d 5f73 7461 7274  args["zoom_start
+000007b0: 225d 0d0a 2020 2020 2020 2020 2020 2020  "]..            
+000007c0: 6b77 6172 6773 2e70 6f70 2822 7a6f 6f6d  kwargs.pop("zoom
+000007d0: 5f73 7461 7274 2229 0d0a 2020 2020 2020  _start")..      
+000007e0: 2020 6966 2022 7a6f 6f6d 2220 6e6f 7420    if "zoom" not 
+000007f0: 696e 206b 7761 7267 732e 6b65 7973 2829  in kwargs.keys()
+00000800: 3a0d 0a20 2020 2020 2020 2020 2020 206b  :..            k
+00000810: 7761 7267 735b 227a 6f6f 6d22 5d20 3d20  wargs["zoom"] = 
+00000820: 7a6f 6f6d 0d0a 2020 2020 2020 2020 6966  zoom..        if
+00000830: 2022 6d61 785f 7a6f 6f6d 2220 6e6f 7420   "max_zoom" not 
+00000840: 696e 206b 7761 7267 732e 6b65 7973 2829  in kwargs.keys()
+00000850: 3a0d 0a20 2020 2020 2020 2020 2020 206b  :..            k
+00000860: 7761 7267 735b 226d 6178 5f7a 6f6f 6d22  wargs["max_zoom"
+00000870: 5d20 3d20 3234 0d0a 0d0a 2020 2020 2020  ] = 24....      
+00000880: 2020 6966 2022 6164 645f 676f 6f67 6c65    if "add_google
+00000890: 5f6d 6170 2220 6e6f 7420 696e 206b 7761  _map" not in kwa
+000008a0: 7267 732e 6b65 7973 2829 2061 6e64 2022  rgs.keys() and "
+000008b0: 6261 7365 6d61 7022 206e 6f74 2069 6e20  basemap" not in 
+000008c0: 6b77 6172 6773 2e6b 6579 7328 293a 0d0a  kwargs.keys():..
+000008d0: 2020 2020 2020 2020 2020 2020 6b77 6172              kwar
+000008e0: 6773 5b22 6164 645f 676f 6f67 6c65 5f6d  gs["add_google_m
+000008f0: 6170 225d 203d 2054 7275 650d 0a20 2020  ap"] = True..   
+00000900: 2020 2020 2069 6620 2273 6372 6f6c 6c5f       if "scroll_
+00000910: 7768 6565 6c5f 7a6f 6f6d 2220 6e6f 7420  wheel_zoom" not 
+00000920: 696e 206b 7761 7267 732e 6b65 7973 2829  in kwargs.keys()
+00000930: 3a0d 0a20 2020 2020 2020 2020 2020 206b  :..            k
+00000940: 7761 7267 735b 2273 6372 6f6c 6c5f 7768  wargs["scroll_wh
+00000950: 6565 6c5f 7a6f 6f6d 225d 203d 2054 7275  eel_zoom"] = Tru
+00000960: 650d 0a0d 0a20 2020 2020 2020 2069 6620  e....        if 
+00000970: 226c 6974 655f 6d6f 6465 2220 6e6f 7420  "lite_mode" not 
+00000980: 696e 206b 7761 7267 732e 6b65 7973 2829  in kwargs.keys()
+00000990: 3a0d 0a20 2020 2020 2020 2020 2020 206b  :..            k
+000009a0: 7761 7267 735b 226c 6974 655f 6d6f 6465  wargs["lite_mode
+000009b0: 225d 203d 2046 616c 7365 0d0a 0d0a 2020  "] = False....  
+000009c0: 2020 2020 2020 6966 206b 7761 7267 735b        if kwargs[
+000009d0: 226c 6974 655f 6d6f 6465 225d 3a0d 0a20  "lite_mode"]:.. 
+000009e0: 2020 2020 2020 2020 2020 206b 7761 7267             kwarg
+000009f0: 735b 2264 6174 615f 6374 726c 225d 203d  s["data_ctrl"] =
+00000a00: 2046 616c 7365 0d0a 2020 2020 2020 2020   False..        
+00000a10: 2020 2020 6b77 6172 6773 5b22 7a6f 6f6d      kwargs["zoom
+00000a20: 5f63 7472 6c22 5d20 3d20 5472 7565 0d0a  _ctrl"] = True..
+00000a30: 2020 2020 2020 2020 2020 2020 6b77 6172              kwar
+00000a40: 6773 5b22 6675 6c6c 7363 7265 656e 5f63  gs["fullscreen_c
+00000a50: 7472 6c22 5d20 3d20 4661 6c73 650d 0a20  trl"] = False.. 
+00000a60: 2020 2020 2020 2020 2020 206b 7761 7267             kwarg
+00000a70: 735b 2264 7261 775f 6374 726c 225d 203d  s["draw_ctrl"] =
+00000a80: 2046 616c 7365 0d0a 2020 2020 2020 2020   False..        
+00000a90: 2020 2020 6b77 6172 6773 5b22 7365 6172      kwargs["sear
+00000aa0: 6368 5f63 7472 6c22 5d20 3d20 4661 6c73  ch_ctrl"] = Fals
+00000ab0: 650d 0a20 2020 2020 2020 2020 2020 206b  e..            k
+00000ac0: 7761 7267 735b 226d 6561 7375 7265 5f63  wargs["measure_c
+00000ad0: 7472 6c22 5d20 3d20 4661 6c73 650d 0a20  trl"] = False.. 
+00000ae0: 2020 2020 2020 2020 2020 206b 7761 7267             kwarg
+00000af0: 735b 2273 6361 6c65 5f63 7472 6c22 5d20  s["scale_ctrl"] 
+00000b00: 3d20 4661 6c73 650d 0a20 2020 2020 2020  = False..       
+00000b10: 2020 2020 206b 7761 7267 735b 226c 6179       kwargs["lay
+00000b20: 6572 5f63 7472 6c22 5d20 3d20 4661 6c73  er_ctrl"] = Fals
+00000b30: 650d 0a20 2020 2020 2020 2020 2020 206b  e..            k
+00000b40: 7761 7267 735b 2274 6f6f 6c62 6172 5f63  wargs["toolbar_c
+00000b50: 7472 6c22 5d20 3d20 4661 6c73 650d 0a20  trl"] = False.. 
+00000b60: 2020 2020 2020 2020 2020 206b 7761 7267             kwarg
+00000b70: 735b 2261 7474 7269 6275 7469 6f6e 5f63  s["attribution_c
+00000b80: 7472 6c22 5d20 3d20 4661 6c73 650d 0a0d  trl"] = False...
+00000b90: 0a20 2020 2020 2020 2069 6620 2264 6174  .        if "dat
+00000ba0: 615f 6374 726c 2220 6e6f 7420 696e 206b  a_ctrl" not in k
+00000bb0: 7761 7267 732e 6b65 7973 2829 3a0d 0a20  wargs.keys():.. 
+00000bc0: 2020 2020 2020 2020 2020 206b 7761 7267             kwarg
+00000bd0: 735b 2264 6174 615f 6374 726c 225d 203d  s["data_ctrl"] =
+00000be0: 2054 7275 650d 0a20 2020 2020 2020 2069   True..        i
+00000bf0: 6620 227a 6f6f 6d5f 6374 726c 2220 6e6f  f "zoom_ctrl" no
+00000c00: 7420 696e 206b 7761 7267 732e 6b65 7973  t in kwargs.keys
+00000c10: 2829 3a0d 0a20 2020 2020 2020 2020 2020  ():..           
+00000c20: 206b 7761 7267 735b 227a 6f6f 6d5f 6374   kwargs["zoom_ct
+00000c30: 726c 225d 203d 2054 7275 650d 0a20 2020  rl"] = True..   
+00000c40: 2020 2020 2069 6620 2266 756c 6c73 6372       if "fullscr
+00000c50: 6565 6e5f 6374 726c 2220 6e6f 7420 696e  een_ctrl" not in
+00000c60: 206b 7761 7267 732e 6b65 7973 2829 3a0d   kwargs.keys():.
+00000c70: 0a20 2020 2020 2020 2020 2020 206b 7761  .            kwa
+00000c80: 7267 735b 2266 756c 6c73 6372 6565 6e5f  rgs["fullscreen_
+00000c90: 6374 726c 225d 203d 2054 7275 650d 0a20  ctrl"] = True.. 
+00000ca0: 2020 2020 2020 2069 6620 2264 7261 775f         if "draw_
+00000cb0: 6374 726c 2220 6e6f 7420 696e 206b 7761  ctrl" not in kwa
+00000cc0: 7267 732e 6b65 7973 2829 3a0d 0a20 2020  rgs.keys():..   
+00000cd0: 2020 2020 2020 2020 206b 7761 7267 735b           kwargs[
+00000ce0: 2264 7261 775f 6374 726c 225d 203d 2054  "draw_ctrl"] = T
+00000cf0: 7275 650d 0a20 2020 2020 2020 2069 6620  rue..        if 
+00000d00: 2273 6561 7263 685f 6374 726c 2220 6e6f  "search_ctrl" no
+00000d10: 7420 696e 206b 7761 7267 732e 6b65 7973  t in kwargs.keys
+00000d20: 2829 3a0d 0a20 2020 2020 2020 2020 2020  ():..           
+00000d30: 206b 7761 7267 735b 2273 6561 7263 685f   kwargs["search_
+00000d40: 6374 726c 225d 203d 2046 616c 7365 0d0a  ctrl"] = False..
+00000d50: 2020 2020 2020 2020 6966 2022 6d65 6173          if "meas
+00000d60: 7572 655f 6374 726c 2220 6e6f 7420 696e  ure_ctrl" not in
+00000d70: 206b 7761 7267 732e 6b65 7973 2829 3a0d   kwargs.keys():.
+00000d80: 0a20 2020 2020 2020 2020 2020 206b 7761  .            kwa
+00000d90: 7267 735b 226d 6561 7375 7265 5f63 7472  rgs["measure_ctr
+00000da0: 6c22 5d20 3d20 5472 7565 0d0a 2020 2020  l"] = True..    
+00000db0: 2020 2020 6966 2022 7363 616c 655f 6374      if "scale_ct
+00000dc0: 726c 2220 6e6f 7420 696e 206b 7761 7267  rl" not in kwarg
+00000dd0: 732e 6b65 7973 2829 3a0d 0a20 2020 2020  s.keys():..     
+00000de0: 2020 2020 2020 206b 7761 7267 735b 2273         kwargs["s
+00000df0: 6361 6c65 5f63 7472 6c22 5d20 3d20 5472  cale_ctrl"] = Tr
+00000e00: 7565 0d0a 2020 2020 2020 2020 6966 2022  ue..        if "
+00000e10: 6c61 7965 725f 6374 726c 2220 6e6f 7420  layer_ctrl" not 
+00000e20: 696e 206b 7761 7267 732e 6b65 7973 2829  in kwargs.keys()
+00000e30: 3a0d 0a20 2020 2020 2020 2020 2020 206b  :..            k
+00000e40: 7761 7267 735b 226c 6179 6572 5f63 7472  wargs["layer_ctr
+00000e50: 6c22 5d20 3d20 4661 6c73 650d 0a20 2020  l"] = False..   
+00000e60: 2020 2020 2069 6620 2274 6f6f 6c62 6172       if "toolbar
+00000e70: 5f63 7472 6c22 206e 6f74 2069 6e20 6b77  _ctrl" not in kw
+00000e80: 6172 6773 2e6b 6579 7328 293a 0d0a 2020  args.keys():..  
+00000e90: 2020 2020 2020 2020 2020 6b77 6172 6773            kwargs
+00000ea0: 5b22 746f 6f6c 6261 725f 6374 726c 225d  ["toolbar_ctrl"]
+00000eb0: 203d 2054 7275 650d 0a20 2020 2020 2020   = True..       
+00000ec0: 2069 6620 2261 7474 7269 6275 7469 6f6e   if "attribution
+00000ed0: 5f63 7472 6c22 206e 6f74 2069 6e20 6b77  _ctrl" not in kw
+00000ee0: 6172 6773 2e6b 6579 7328 293a 0d0a 2020  args.keys():..  
+00000ef0: 2020 2020 2020 2020 2020 6b77 6172 6773            kwargs
+00000f00: 5b22 6174 7472 6962 7574 696f 6e5f 6374  ["attribution_ct
+00000f10: 726c 225d 203d 2054 7275 650d 0a20 2020  rl"] = True..   
+00000f20: 2020 2020 2069 6620 2275 7365 5f76 6f69       if "use_voi
+00000f30: 6c61 2220 6e6f 7420 696e 206b 7761 7267  la" not in kwarg
+00000f40: 732e 6b65 7973 2829 3a0d 0a20 2020 2020  s.keys():..     
+00000f50: 2020 2020 2020 206b 7761 7267 735b 2275         kwargs["u
+00000f60: 7365 5f76 6f69 6c61 225d 203d 2046 616c  se_voila"] = Fal
+00000f70: 7365 0d0a 0d0a 2020 2020 2020 2020 6966  se....        if
+00000f80: 2028 0d0a 2020 2020 2020 2020 2020 2020   (..            
+00000f90: 2262 6173 656d 6170 2220 696e 206b 7761  "basemap" in kwa
+00000fa0: 7267 732e 6b65 7973 2829 0d0a 2020 2020  rgs.keys()..    
+00000fb0: 2020 2020 2020 2020 616e 6420 6973 696e          and isin
+00000fc0: 7374 616e 6365 286b 7761 7267 735b 2262  stance(kwargs["b
+00000fd0: 6173 656d 6170 225d 2c20 7374 7229 0d0a  asemap"], str)..
+00000fe0: 2020 2020 2020 2020 2020 2020 616e 6420              and 
+00000ff0: 6b77 6172 6773 5b22 6261 7365 6d61 7022  kwargs["basemap"
+00001000: 5d20 696e 2062 6173 656d 6170 732e 6b65  ] in basemaps.ke
+00001010: 7973 2829 0d0a 2020 2020 2020 2020 293a  ys()..        ):
+00001020: 0d0a 2020 2020 2020 2020 2020 2020 6b77  ..            kw
+00001030: 6172 6773 5b22 6261 7365 6d61 7022 5d20  args["basemap"] 
+00001040: 3d20 6261 7365 6d61 705f 7469 6c65 735b  = basemap_tiles[
+00001050: 6b77 6172 6773 5b22 6261 7365 6d61 7022  kwargs["basemap"
+00001060: 5d5d 0d0a 0d0a 2020 2020 2020 2020 6966  ]]....        if
+00001070: 206f 732e 656e 7669 726f 6e2e 6765 7428   os.environ.get(
+00001080: 2255 5345 5f56 4f49 4c41 2229 2069 7320  "USE_VOILA") is 
+00001090: 6e6f 7420 4e6f 6e65 3a0d 0a20 2020 2020  not None:..     
+000010a0: 2020 2020 2020 206b 7761 7267 735b 2275         kwargs["u
+000010b0: 7365 5f76 6f69 6c61 225d 203d 2054 7275  se_voila"] = Tru
+000010c0: 650d 0a0d 0a20 2020 2020 2020 2023 2049  e....        # I
+000010d0: 6e68 6572 6974 7320 7468 6520 6970 796c  nherits the ipyl
+000010e0: 6561 666c 6574 204d 6170 2063 6c61 7373  eaflet Map class
+000010f0: 0d0a 2020 2020 2020 2020 7375 7065 7228  ..        super(
+00001100: 292e 5f5f 696e 6974 5f5f 282a 2a6b 7761  ).__init__(**kwa
+00001110: 7267 7329 0d0a 2020 2020 2020 2020 7365  rgs)..        se
+00001120: 6c66 2e62 6173 6563 6c61 7373 203d 2022  lf.baseclass = "
+00001130: 6970 796c 6561 666c 6574 220d 0a20 2020  ipyleaflet"..   
+00001140: 2020 2020 2073 656c 662e 6c61 796f 7574       self.layout
+00001150: 2e68 6569 6768 7420 3d20 6b77 6172 6773  .height = kwargs
+00001160: 5b22 6865 6967 6874 225d 0d0a 2020 2020  ["height"]..    
+00001170: 2020 2020 6966 2022 7769 6474 6822 2069      if "width" i
+00001180: 6e20 6b77 6172 6773 3a0d 0a20 2020 2020  n kwargs:..     
+00001190: 2020 2020 2020 2073 656c 662e 6c61 796f         self.layo
+000011a0: 7574 2e77 6964 7468 203d 206b 7761 7267  ut.width = kwarg
+000011b0: 735b 2277 6964 7468 225d 0d0a 0d0a 2020  s["width"]....  
+000011c0: 2020 2020 2020 2320 7361 6e64 626f 7820        # sandbox 
+000011d0: 7061 7468 2066 6f72 2056 6f69 6c61 2061  path for Voila a
+000011e0: 7070 2074 6f20 7265 7374 7269 6374 2061  pp to restrict a
+000011f0: 6363 6573 7320 746f 2073 7973 7465 6d20  ccess to system 
+00001200: 6469 7265 6374 6f72 6965 732e 0d0a 2020  directories...  
+00001210: 2020 2020 2020 6966 2022 7361 6e64 626f        if "sandbo
+00001220: 785f 7061 7468 2220 6e6f 7420 696e 206b  x_path" not in k
+00001230: 7761 7267 733a 0d0a 2020 2020 2020 2020  wargs:..        
+00001240: 2020 2020 6966 206f 732e 656e 7669 726f      if os.enviro
+00001250: 6e2e 6765 7428 2255 5345 5f56 4f49 4c41  n.get("USE_VOILA
+00001260: 2229 2069 7320 6e6f 7420 4e6f 6e65 3a0d  ") is not None:.
+00001270: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00001280: 2073 656c 662e 7361 6e64 626f 785f 7061   self.sandbox_pa
+00001290: 7468 203d 206f 732e 6765 7463 7764 2829  th = os.getcwd()
+000012a0: 0d0a 2020 2020 2020 2020 2020 2020 656c  ..            el
+000012b0: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
+000012c0: 2020 2020 2073 656c 662e 7361 6e64 626f       self.sandbo
+000012d0: 785f 7061 7468 203d 204e 6f6e 650d 0a20  x_path = None.. 
+000012e0: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
+000012f0: 2020 2020 2020 2020 2020 6966 206f 732e            if os.
+00001300: 7061 7468 2e65 7869 7374 7328 6f73 2e70  path.exists(os.p
+00001310: 6174 682e 6162 7370 6174 6828 6b77 6172  ath.abspath(kwar
+00001320: 6773 5b22 7361 6e64 626f 785f 7061 7468  gs["sandbox_path
+00001330: 225d 2929 3a0d 0a20 2020 2020 2020 2020  "])):..         
+00001340: 2020 2020 2020 2073 656c 662e 7361 6e64         self.sand
+00001350: 626f 785f 7061 7468 203d 206b 7761 7267  box_path = kwarg
+00001360: 735b 2273 616e 6462 6f78 5f70 6174 6822  s["sandbox_path"
+00001370: 5d0d 0a20 2020 2020 2020 2020 2020 2065  ]..            e
+00001380: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
+00001390: 2020 2020 2020 7072 696e 7428 2254 6865        print("The
+000013a0: 2073 616e 6462 6f78 2070 6174 6820 6973   sandbox path is
+000013b0: 2069 6e76 616c 6964 2e22 290d 0a20 2020   invalid.")..   
+000013c0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+000013d0: 662e 7361 6e64 626f 785f 7061 7468 203d  f.sandbox_path =
+000013e0: 204e 6f6e 650d 0a0d 0a20 2020 2020 2020   None....       
+000013f0: 2073 656c 662e 636c 6561 725f 636f 6e74   self.clear_cont
+00001400: 726f 6c73 2829 0d0a 0d0a 2020 2020 2020  rols()....      
+00001410: 2020 2320 5468 6520 6e75 6d62 6572 206f    # The number o
+00001420: 6620 7368 6170 6573 2064 7261 776e 2062  f shapes drawn b
+00001430: 7920 7468 6520 7573 6572 2075 7369 6e67  y the user using
+00001440: 2074 6865 2044 7261 7743 6f6e 7472 6f6c   the DrawControl
+00001450: 0d0a 2020 2020 2020 2020 7365 6c66 2e64  ..        self.d
+00001460: 7261 775f 636f 756e 7420 3d20 300d 0a20  raw_count = 0.. 
+00001470: 2020 2020 2020 2023 2054 6865 206c 6973         # The lis
+00001480: 7420 6f66 2045 6172 7468 2045 6e67 696e  t of Earth Engin
+00001490: 6520 4765 6f6d 6574 7279 206f 626a 6563  e Geometry objec
+000014a0: 7473 2063 6f6e 7665 7274 6564 2066 726f  ts converted fro
+000014b0: 6d20 6765 6f6a 736f 6e0d 0a20 2020 2020  m geojson..     
+000014c0: 2020 2073 656c 662e 6472 6177 5f66 6561     self.draw_fea
+000014d0: 7475 7265 7320 3d20 5b5d 0d0a 2020 2020  tures = []..    
+000014e0: 2020 2020 2320 5468 6520 4561 7274 6820      # The Earth 
+000014f0: 456e 6769 6e65 2047 656f 6d65 7472 7920  Engine Geometry 
+00001500: 6f62 6a65 6374 2063 6f6e 7665 7274 6564  object converted
+00001510: 2066 726f 6d20 7468 6520 6c61 7374 2064   from the last d
+00001520: 7261 776e 2066 6561 7475 7265 0d0a 2020  rawn feature..  
+00001530: 2020 2020 2020 7365 6c66 2e64 7261 775f        self.draw_
+00001540: 6c61 7374 5f66 6561 7475 7265 203d 204e  last_feature = N
+00001550: 6f6e 650d 0a20 2020 2020 2020 2073 656c  one..        sel
+00001560: 662e 6472 6177 5f6c 6179 6572 203d 204e  f.draw_layer = N
+00001570: 6f6e 650d 0a20 2020 2020 2020 2073 656c  one..        sel
+00001580: 662e 6472 6177 5f6c 6173 745f 6a73 6f6e  f.draw_last_json
+00001590: 203d 204e 6f6e 650d 0a20 2020 2020 2020   = None..       
+000015a0: 2073 656c 662e 6472 6177 5f6c 6173 745f   self.draw_last_
+000015b0: 626f 756e 6473 203d 204e 6f6e 650d 0a20  bounds = None.. 
+000015c0: 2020 2020 2020 2073 656c 662e 7573 6572         self.user
+000015d0: 5f72 6f69 203d 204e 6f6e 650d 0a20 2020  _roi = None..   
+000015e0: 2020 2020 2073 656c 662e 7573 6572 5f72       self.user_r
+000015f0: 6f69 7320 3d20 4e6f 6e65 0d0a 2020 2020  ois = None..    
+00001600: 2020 2020 7365 6c66 2e6c 6173 745f 6565      self.last_ee
+00001610: 5f64 6174 6120 3d20 4e6f 6e65 0d0a 2020  _data = None..  
+00001620: 2020 2020 2020 7365 6c66 2e6c 6173 745f        self.last_
+00001630: 6565 5f6c 6179 6572 203d 204e 6f6e 650d  ee_layer = None.
+00001640: 0a0d 0a20 2020 2020 2020 2073 656c 662e  ...        self.
+00001650: 726f 695f 7374 6172 7420 3d20 4661 6c73  roi_start = Fals
+00001660: 650d 0a20 2020 2020 2020 2073 656c 662e  e..        self.
+00001670: 726f 695f 656e 6420 3d20 4661 6c73 650d  roi_end = False.
+00001680: 0a20 2020 2020 2020 2069 6620 6b77 6172  .        if kwar
+00001690: 6773 5b22 6565 5f69 6e69 7469 616c 697a  gs["ee_initializ
+000016a0: 6522 5d3a 0d0a 2020 2020 2020 2020 2020  e"]:..          
+000016b0: 2020 7365 6c66 2e72 6f69 5f72 6564 7563    self.roi_reduc
+000016c0: 6572 203d 2065 652e 5265 6475 6365 722e  er = ee.Reducer.
+000016d0: 6d65 616e 2829 0d0a 2020 2020 2020 2020  mean()..        
+000016e0: 7365 6c66 2e72 6f69 5f72 6564 7563 6572  self.roi_reducer
+000016f0: 5f73 6361 6c65 203d 204e 6f6e 650d 0a0d  _scale = None...
+00001700: 0a20 2020 2020 2020 2023 204c 6973 7420  .        # List 
+00001710: 666f 7220 7374 6f72 696e 6720 7069 7865  for storing pixe
+00001720: 6c20 7661 6c75 6573 2061 6e64 206c 6f63  l values and loc
+00001730: 6174 696f 6e73 2062 6173 6564 206f 6e20  ations based on 
+00001740: 7573 6572 2d64 7261 776e 2067 656f 6d65  user-drawn geome
+00001750: 7472 6965 732e 0d0a 2020 2020 2020 2020  tries...        
+00001760: 7365 6c66 2e63 6861 7274 5f70 6f69 6e74  self.chart_point
+00001770: 7320 3d20 5b5d 0d0a 2020 2020 2020 2020  s = []..        
+00001780: 7365 6c66 2e63 6861 7274 5f76 616c 7565  self.chart_value
+00001790: 7320 3d20 5b5d 0d0a 2020 2020 2020 2020  s = []..        
+000017a0: 7365 6c66 2e63 6861 7274 5f6c 6162 656c  self.chart_label
+000017b0: 7320 3d20 4e6f 6e65 0d0a 0d0a 2020 2020  s = None....    
+000017c0: 2020 2020 7365 6c66 2e70 6c6f 745f 7769      self.plot_wi
+000017d0: 6467 6574 203d 204e 6f6e 6520 2023 2054  dget = None  # T
+000017e0: 6865 2070 6c6f 7420 7769 6467 6574 2066  he plot widget f
+000017f0: 6f72 2070 6c6f 7474 696e 6720 4561 7274  or plotting Eart
+00001800: 6820 456e 6769 6e65 2064 6174 610d 0a20  h Engine data.. 
+00001810: 2020 2020 2020 2073 656c 662e 706c 6f74         self.plot
+00001820: 5f63 6f6e 7472 6f6c 203d 204e 6f6e 6520  _control = None 
+00001830: 2023 2054 6865 2070 6c6f 7420 636f 6e74   # The plot cont
+00001840: 726f 6c20 666f 7220 696e 7465 7261 6374  rol for interact
+00001850: 696e 6720 706c 6f74 7469 6e67 0d0a 2020  ing plotting..  
+00001860: 2020 2020 2020 7365 6c66 2e72 616e 646f        self.rando
+00001870: 6d5f 6d61 726b 6572 203d 204e 6f6e 650d  m_marker = None.
+00001880: 0a0d 0a20 2020 2020 2020 2073 656c 662e  ...        self.
+00001890: 6c65 6765 6e64 5f77 6964 6765 7420 3d20  legend_widget = 
+000018a0: 4e6f 6e65 0d0a 2020 2020 2020 2020 7365  None..        se
+000018b0: 6c66 2e6c 6567 656e 645f 636f 6e74 726f  lf.legend_contro
+000018c0: 6c20 3d20 4e6f 6e65 0d0a 2020 2020 2020  l = None..      
+000018d0: 2020 7365 6c66 2e63 6f6c 6f72 6261 7220    self.colorbar 
+000018e0: 3d20 4e6f 6e65 0d0a 0d0a 2020 2020 2020  = None....      
+000018f0: 2020 7365 6c66 2e65 655f 6c61 7965 7273    self.ee_layers
+00001900: 203d 205b 5d0d 0a20 2020 2020 2020 2073   = []..        s
+00001910: 656c 662e 6565 5f6c 6179 6572 5f6e 616d  elf.ee_layer_nam
+00001920: 6573 203d 205b 5d0d 0a20 2020 2020 2020  es = []..       
+00001930: 2073 656c 662e 6565 5f72 6173 7465 725f   self.ee_raster_
+00001940: 6c61 7965 7273 203d 205b 5d0d 0a20 2020  layers = []..   
+00001950: 2020 2020 2073 656c 662e 6565 5f72 6173       self.ee_ras
+00001960: 7465 725f 6c61 7965 725f 6e61 6d65 7320  ter_layer_names 
+00001970: 3d20 5b5d 0d0a 2020 2020 2020 2020 7365  = []..        se
+00001980: 6c66 2e65 655f 7665 6374 6f72 5f6c 6179  lf.ee_vector_lay
+00001990: 6572 7320 3d20 5b5d 0d0a 2020 2020 2020  ers = []..      
+000019a0: 2020 7365 6c66 2e65 655f 7665 6374 6f72    self.ee_vector
+000019b0: 5f6c 6179 6572 5f6e 616d 6573 203d 205b  _layer_names = [
+000019c0: 5d0d 0a20 2020 2020 2020 2073 656c 662e  ]..        self.
+000019d0: 6565 5f6c 6179 6572 5f64 6963 7420 3d20  ee_layer_dict = 
+000019e0: 7b7d 0d0a 0d0a 2020 2020 2020 2020 7365  {}....        se
+000019f0: 6c66 2e73 6561 7263 685f 6c6f 6361 7469  lf.search_locati
+00001a00: 6f6e 7320 3d20 4e6f 6e65 0d0a 2020 2020  ons = None..    
+00001a10: 2020 2020 7365 6c66 2e73 6561 7263 685f      self.search_
+00001a20: 6c6f 635f 6d61 726b 6572 203d 204e 6f6e  loc_marker = Non
+00001a30: 650d 0a20 2020 2020 2020 2073 656c 662e  e..        self.
+00001a40: 7365 6172 6368 5f6c 6f63 5f67 656f 6d20  search_loc_geom 
+00001a50: 3d20 4e6f 6e65 0d0a 2020 2020 2020 2020  = None..        
+00001a60: 7365 6c66 2e73 6561 7263 685f 6461 7461  self.search_data
+00001a70: 7365 7473 203d 204e 6f6e 650d 0a20 2020  sets = None..   
+00001a80: 2020 2020 2073 656c 662e 7363 7265 656e       self.screen
+00001a90: 7368 6f74 203d 204e 6f6e 650d 0a20 2020  shot = None..   
+00001aa0: 2020 2020 2073 656c 662e 746f 6f6c 6261       self.toolba
+00001ab0: 7220 3d20 4e6f 6e65 0d0a 2020 2020 2020  r = None..      
+00001ac0: 2020 7365 6c66 2e74 6f6f 6c62 6172 5f62    self.toolbar_b
+00001ad0: 7574 746f 6e20 3d20 4e6f 6e65 0d0a 2020  utton = None..  
+00001ae0: 2020 2020 2020 7365 6c66 2e76 6973 5f63        self.vis_c
+00001af0: 6f6e 7472 6f6c 203d 204e 6f6e 650d 0a20  ontrol = None.. 
+00001b00: 2020 2020 2020 2073 656c 662e 7669 735f         self.vis_
+00001b10: 7769 6467 6574 203d 204e 6f6e 650d 0a20  widget = None.. 
+00001b20: 2020 2020 2020 2073 656c 662e 636f 6c6f         self.colo
+00001b30: 7262 6172 5f63 7472 6c20 3d20 4e6f 6e65  rbar_ctrl = None
+00001b40: 0d0a 2020 2020 2020 2020 7365 6c66 2e63  ..        self.c
+00001b50: 6f6c 6f72 6261 725f 7769 6467 6574 203d  olorbar_widget =
+00001b60: 204e 6f6e 650d 0a20 2020 2020 2020 2073   None..        s
+00001b70: 656c 662e 746f 6f6c 5f6f 7574 7075 7420  elf.tool_output 
+00001b80: 3d20 4e6f 6e65 0d0a 2020 2020 2020 2020  = None..        
+00001b90: 7365 6c66 2e74 6f6f 6c5f 6f75 7470 7574  self.tool_output
+00001ba0: 5f63 7472 6c20 3d20 4e6f 6e65 0d0a 2020  _ctrl = None..  
+00001bb0: 2020 2020 2020 7365 6c66 2e6c 6179 6572        self.layer
+00001bc0: 5f63 6f6e 7472 6f6c 203d 204e 6f6e 650d  _control = None.
+00001bd0: 0a20 2020 2020 2020 2073 656c 662e 636f  .        self.co
+00001be0: 6e76 6572 745f 6374 726c 203d 204e 6f6e  nvert_ctrl = Non
+00001bf0: 650d 0a0d 0a20 2020 2020 2020 2023 2041  e....        # A
+00001c00: 6464 7320 7365 6172 6368 2062 7574 746f  dds search butto
+00001c10: 6e20 616e 6420 7365 6172 6368 2062 6f78  n and search box
+00001c20: 0d0a 2020 2020 2020 2020 7365 6172 6368  ..        search
+00001c30: 5f62 7574 746f 6e20 3d20 7769 6467 6574  _button = widget
+00001c40: 732e 546f 6767 6c65 4275 7474 6f6e 280d  s.ToggleButton(.
+00001c50: 0a20 2020 2020 2020 2020 2020 2076 616c  .            val
+00001c60: 7565 3d46 616c 7365 2c0d 0a20 2020 2020  ue=False,..     
+00001c70: 2020 2020 2020 2074 6f6f 6c74 6970 3d22         tooltip="
+00001c80: 5365 6172 6368 206c 6f63 6174 696f 6e2f  Search location/
+00001c90: 6461 7461 222c 0d0a 2020 2020 2020 2020  data",..        
+00001ca0: 2020 2020 6963 6f6e 3d22 676c 6f62 6522      icon="globe"
+00001cb0: 2c0d 0a20 2020 2020 2020 2020 2020 206c  ,..            l
+00001cc0: 6179 6f75 743d 7769 6467 6574 732e 4c61  ayout=widgets.La
+00001cd0: 796f 7574 280d 0a20 2020 2020 2020 2020  yout(..         
+00001ce0: 2020 2020 2020 2077 6964 7468 3d22 3238         width="28
+00001cf0: 7078 222c 2068 6569 6768 743d 2232 3870  px", height="28p
+00001d00: 7822 2c20 7061 6464 696e 673d 2230 7078  x", padding="0px
+00001d10: 2030 7078 2030 7078 2034 7078 220d 0a20   0px 0px 4px".. 
+00001d20: 2020 2020 2020 2020 2020 2029 2c0d 0a20             ),.. 
+00001d30: 2020 2020 2020 2029 0d0a 0d0a 2020 2020         )....    
+00001d40: 2020 2020 7365 6172 6368 5f74 7970 6520      search_type 
+00001d50: 3d20 7769 6467 6574 732e 546f 6767 6c65  = widgets.Toggle
+00001d60: 4275 7474 6f6e 7328 0d0a 2020 2020 2020  Buttons(..      
+00001d70: 2020 2020 2020 6f70 7469 6f6e 733d 5b22        options=["
+00001d80: 6e61 6d65 2f61 6464 7265 7373 222c 2022  name/address", "
+00001d90: 6c61 742d 6c6f 6e22 2c20 2264 6174 6122  lat-lon", "data"
+00001da0: 5d2c 0d0a 2020 2020 2020 2020 2020 2020  ],..            
+00001db0: 746f 6f6c 7469 7073 3d5b 0d0a 2020 2020  tooltips=[..    
+00001dc0: 2020 2020 2020 2020 2020 2020 2253 6561              "Sea
+00001dd0: 7263 6820 6279 2070 6c61 6365 206e 616d  rch by place nam
+00001de0: 6520 6f72 2061 6464 7265 7373 222c 0d0a  e or address",..
+00001df0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001e00: 2253 6561 7263 6820 6279 206c 6174 2d6c  "Search by lat-l
+00001e10: 6f6e 2063 6f6f 7264 696e 6174 6573 222c  on coordinates",
+00001e20: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00001e30: 2020 2253 6561 7263 6820 4561 7274 6820    "Search Earth 
+00001e40: 456e 6769 6e65 2064 6174 6120 6361 7461  Engine data cata
+00001e50: 6c6f 6722 2c0d 0a20 2020 2020 2020 2020  log",..         
+00001e60: 2020 205d 2c0d 0a20 2020 2020 2020 2029     ],..        )
+00001e70: 0d0a 2020 2020 2020 2020 7365 6172 6368  ..        search
+00001e80: 5f74 7970 652e 7374 796c 652e 6275 7474  _type.style.butt
+00001e90: 6f6e 5f77 6964 7468 203d 2022 3131 3070  on_width = "110p
+00001ea0: 7822 0d0a 0d0a 2020 2020 2020 2020 7365  x"....        se
+00001eb0: 6172 6368 5f62 6f78 203d 2077 6964 6765  arch_box = widge
+00001ec0: 7473 2e54 6578 7428 0d0a 2020 2020 2020  ts.Text(..      
+00001ed0: 2020 2020 2020 706c 6163 6568 6f6c 6465        placeholde
+00001ee0: 723d 2253 6561 7263 6820 6279 2070 6c61  r="Search by pla
+00001ef0: 6365 206e 616d 6520 6f72 2061 6464 7265  ce name or addre
+00001f00: 7373 222c 0d0a 2020 2020 2020 2020 2020  ss",..          
+00001f10: 2020 746f 6f6c 7469 703d 2253 6561 7263    tooltip="Searc
+00001f20: 6820 6c6f 6361 7469 6f6e 222c 0d0a 2020  h location",..  
+00001f30: 2020 2020 2020 2020 2020 6c61 796f 7574            layout
+00001f40: 3d77 6964 6765 7473 2e4c 6179 6f75 7428  =widgets.Layout(
+00001f50: 7769 6474 683d 2233 3430 7078 2229 2c0d  width="340px"),.
+00001f60: 0a20 2020 2020 2020 2029 0d0a 0d0a 2020  .        )....  
+00001f70: 2020 2020 2020 7365 6172 6368 5f6f 7574        search_out
+00001f80: 7075 7420 3d20 7769 6467 6574 732e 4f75  put = widgets.Ou
+00001f90: 7470 7574 280d 0a20 2020 2020 2020 2020  tput(..         
+00001fa0: 2020 206c 6179 6f75 743d 7b0d 0a20 2020     layout={..   
+00001fb0: 2020 2020 2020 2020 2020 2020 2022 6d61               "ma
+00001fc0: 785f 7769 6474 6822 3a20 2233 3430 7078  x_width": "340px
+00001fd0: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
+00001fe0: 2020 2020 226d 6178 5f68 6569 6768 7422      "max_height"
+00001ff0: 3a20 2232 3530 7078 222c 0d0a 2020 2020  : "250px",..    
+00002000: 2020 2020 2020 2020 2020 2020 226f 7665              "ove
+00002010: 7266 6c6f 7722 3a20 2273 6372 6f6c 6c22  rflow": "scroll"
+00002020: 2c0d 0a20 2020 2020 2020 2020 2020 207d  ,..            }
+00002030: 0d0a 2020 2020 2020 2020 290d 0a0d 0a20  ..        ).... 
+00002040: 2020 2020 2020 2073 6561 7263 685f 7265         search_re
+00002050: 7375 6c74 7320 3d20 7769 6467 6574 732e  sults = widgets.
+00002060: 5261 6469 6f42 7574 746f 6e73 2829 0d0a  RadioButtons()..
+00002070: 0d0a 2020 2020 2020 2020 6173 7365 7473  ..        assets
+00002080: 5f64 726f 7064 6f77 6e20 3d20 7769 6467  _dropdown = widg
+00002090: 6574 732e 4472 6f70 646f 776e 280d 0a20  ets.Dropdown(.. 
+000020a0: 2020 2020 2020 2020 2020 206f 7074 696f             optio
+000020b0: 6e73 3d5b 5d2c 0d0a 2020 2020 2020 2020  ns=[],..        
+000020c0: 2020 2020 6c61 796f 7574 3d77 6964 6765      layout=widge
+000020d0: 7473 2e4c 6179 6f75 7428 6d69 6e5f 7769  ts.Layout(min_wi
+000020e0: 6474 683d 2232 3739 7078 222c 206d 6178  dth="279px", max
+000020f0: 5f77 6964 7468 3d22 3237 3970 7822 292c  _width="279px"),
+00002100: 0d0a 2020 2020 2020 2020 290d 0a0d 0a20  ..        ).... 
+00002110: 2020 2020 2020 2069 6d70 6f72 745f 6274         import_bt
+00002120: 6e20 3d20 7769 6467 6574 732e 4275 7474  n = widgets.Butt
+00002130: 6f6e 280d 0a20 2020 2020 2020 2020 2020  on(..           
+00002140: 2064 6573 6372 6970 7469 6f6e 3d22 696d   description="im
+00002150: 706f 7274 222c 0d0a 2020 2020 2020 2020  port",..        
+00002160: 2020 2020 6275 7474 6f6e 5f73 7479 6c65      button_style
+00002170: 3d22 7072 696d 6172 7922 2c0d 0a20 2020  ="primary",..   
+00002180: 2020 2020 2020 2020 2074 6f6f 6c74 6970           tooltip
+00002190: 3d22 436c 6963 6b20 746f 2069 6d70 6f72  ="Click to impor
+000021a0: 7420 7468 6520 7365 6c65 6374 6564 2061  t the selected a
+000021b0: 7373 6574 222c 0d0a 2020 2020 2020 2020  sset",..        
+000021c0: 2020 2020 6c61 796f 7574 3d77 6964 6765      layout=widge
+000021d0: 7473 2e4c 6179 6f75 7428 6d69 6e5f 7769  ts.Layout(min_wi
+000021e0: 6474 683d 2235 3770 7822 2c20 6d61 785f  dth="57px", max_
+000021f0: 7769 6474 683d 2235 3770 7822 292c 0d0a  width="57px"),..
+00002200: 2020 2020 2020 2020 290d 0a0d 0a20 2020          )....   
+00002210: 2020 2020 2064 6566 2069 6d70 6f72 745f       def import_
+00002220: 6274 6e5f 636c 6963 6b65 6428 6229 3a0d  btn_clicked(b):.
+00002230: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00002240: 6173 7365 7473 5f64 726f 7064 6f77 6e2e  assets_dropdown.
+00002250: 7661 6c75 6520 6973 206e 6f74 204e 6f6e  value is not Non
+00002260: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+00002270: 2020 2020 6461 7461 7365 7473 203d 2073      datasets = s
+00002280: 656c 662e 7365 6172 6368 5f64 6174 6173  elf.search_datas
+00002290: 6574 730d 0a20 2020 2020 2020 2020 2020  ets..           
+000022a0: 2020 2020 2064 6174 6173 6574 203d 2064       dataset = d
+000022b0: 6174 6173 6574 735b 6173 7365 7473 5f64  atasets[assets_d
+000022c0: 726f 7064 6f77 6e2e 696e 6465 785d 0d0a  ropdown.index]..
+000022d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000022e0: 6461 7461 7365 745f 7569 6420 3d20 2264  dataset_uid = "d
+000022f0: 6174 6173 6574 5f22 202b 2072 616e 646f  ataset_" + rando
+00002300: 6d5f 7374 7269 6e67 2873 7472 696e 675f  m_string(string_
+00002310: 6c65 6e67 7468 3d33 290d 0a20 2020 2020  length=3)..     
+00002320: 2020 2020 2020 2020 2020 206c 696e 6531             line1
+00002330: 203d 2022 7b7d 203d 207b 7d5c 6e22 2e66   = "{} = {}\n".f
+00002340: 6f72 6d61 7428 6461 7461 7365 745f 7569  ormat(dataset_ui
+00002350: 642c 2064 6174 6173 6574 5b22 6565 5f69  d, dataset["ee_i
+00002360: 645f 736e 6970 7065 7422 5d29 0d0a 2020  d_snippet"])..  
+00002370: 2020 2020 2020 2020 2020 2020 2020 6c69                li
+00002380: 6e65 3220 3d20 224d 6170 2e61 6464 4c61  ne2 = "Map.addLa
+00002390: 7965 7228 2220 2b20 6461 7461 7365 745f  yer(" + dataset_
+000023a0: 7569 6420 2b20 272c 207b 7d2c 2022 2720  uid + ', {}, "' 
+000023b0: 2b20 6461 7461 7365 745b 2269 6422 5d20  + dataset["id"] 
+000023c0: 2b20 2722 2927 0d0a 2020 2020 2020 2020  + '")'..        
+000023d0: 2020 2020 2020 2020 636f 6e74 656e 7473          contents
+000023e0: 203d 2022 222e 6a6f 696e 285b 6c69 6e65   = "".join([line
+000023f0: 312c 206c 696e 6532 5d29 0d0a 2020 2020  1, line2])..    
+00002400: 2020 2020 2020 2020 2020 2020 6372 6561              crea
+00002410: 7465 5f63 6f64 655f 6365 6c6c 2863 6f6e  te_code_cell(con
+00002420: 7465 6e74 7329 0d0a 0d0a 2020 2020 2020  tents)....      
+00002430: 2020 696d 706f 7274 5f62 746e 2e6f 6e5f    import_btn.on_
+00002440: 636c 6963 6b28 696d 706f 7274 5f62 746e  click(import_btn
+00002450: 5f63 6c69 636b 6564 290d 0a0d 0a20 2020  _clicked)....   
+00002460: 2020 2020 2068 746d 6c5f 7769 6467 6574       html_widget
+00002470: 203d 2077 6964 6765 7473 2e48 544d 4c28   = widgets.HTML(
+00002480: 290d 0a0d 0a20 2020 2020 2020 2064 6566  )....        def
+00002490: 2064 726f 7064 6f77 6e5f 6368 616e 6765   dropdown_change
+000024a0: 2863 6861 6e67 6529 3a0d 0a20 2020 2020  (change):..     
+000024b0: 2020 2020 2020 2064 726f 7064 6f77 6e5f         dropdown_
+000024c0: 696e 6465 7820 3d20 6173 7365 7473 5f64  index = assets_d
+000024d0: 726f 7064 6f77 6e2e 696e 6465 780d 0a20  ropdown.index.. 
+000024e0: 2020 2020 2020 2020 2020 2069 6620 6472             if dr
+000024f0: 6f70 646f 776e 5f69 6e64 6578 2069 7320  opdown_index is 
+00002500: 6e6f 7420 4e6f 6e65 2061 6e64 2064 726f  not None and dro
+00002510: 7064 6f77 6e5f 696e 6465 7820 3e3d 2030  pdown_index >= 0
+00002520: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00002530: 2020 2077 6974 6820 7365 6172 6368 5f6f     with search_o
+00002540: 7574 7075 743a 0d0a 2020 2020 2020 2020  utput:..        
+00002550: 2020 2020 2020 2020 2020 2020 7365 6172              sear
+00002560: 6368 5f6f 7574 7075 742e 636c 6561 725f  ch_output.clear_
+00002570: 6f75 7470 7574 2877 6169 743d 5472 7565  output(wait=True
+00002580: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00002590: 2020 2020 2020 2070 7269 6e74 2822 4c6f         print("Lo
+000025a0: 6164 696e 6720 2e2e 2e22 290d 0a20 2020  ading ...")..   
 000025b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000025c0: 2020 6461 7461 7365 745f 6874 6d6c 203d    dataset_html =
-000025d0: 2065 655f 6461 7461 5f68 746d 6c28 6461   ee_data_html(da
-000025e0: 7461 7365 7429 0d0a 2020 2020 2020 2020  taset)..        
-000025f0: 2020 2020 2020 2020 2020 2020 6874 6d6c              html
-00002600: 5f77 6964 6765 742e 7661 6c75 6520 3d20  _widget.value = 
-00002610: 6461 7461 7365 745f 6874 6d6c 0d0a 2020  dataset_html..  
-00002620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002630: 2020 7365 6172 6368 5f6f 7574 7075 742e    search_output.
-00002640: 636c 6561 725f 6f75 7470 7574 2877 6169  clear_output(wai
-00002650: 743d 5472 7565 290d 0a20 2020 2020 2020  t=True)..       
-00002660: 2020 2020 2020 2020 2020 2020 2064 6973               dis
-00002670: 706c 6179 2868 746d 6c5f 7769 6467 6574  play(html_widget
-00002680: 290d 0a0d 0a20 2020 2020 2020 2061 7373  )....        ass
-00002690: 6574 735f 6472 6f70 646f 776e 2e6f 6273  ets_dropdown.obs
-000026a0: 6572 7665 2864 726f 7064 6f77 6e5f 6368  erve(dropdown_ch
-000026b0: 616e 6765 2c20 6e61 6d65 733d 2276 616c  ange, names="val
-000026c0: 7565 2229 0d0a 0d0a 2020 2020 2020 2020  ue")....        
-000026d0: 6173 7365 7473 5f63 6f6d 626f 203d 2077  assets_combo = w
-000026e0: 6964 6765 7473 2e48 426f 7828 290d 0a20  idgets.HBox().. 
-000026f0: 2020 2020 2020 2061 7373 6574 735f 636f         assets_co
-00002700: 6d62 6f2e 6368 696c 6472 656e 203d 205b  mbo.children = [
-00002710: 696d 706f 7274 5f62 746e 2c20 6173 7365  import_btn, asse
-00002720: 7473 5f64 726f 7064 6f77 6e5d 0d0a 0d0a  ts_dropdown]....
-00002730: 2020 2020 2020 2020 6465 6620 7365 6172          def sear
-00002740: 6368 5f72 6573 756c 745f 6368 616e 6765  ch_result_change
-00002750: 2863 6861 6e67 6529 3a0d 0a20 2020 2020  (change):..     
-00002760: 2020 2020 2020 2072 6573 756c 745f 696e         result_in
-00002770: 6465 7820 3d20 7365 6172 6368 5f72 6573  dex = search_res
-00002780: 756c 7473 2e69 6e64 6578 0d0a 2020 2020  ults.index..    
-00002790: 2020 2020 2020 2020 6c6f 6361 7469 6f6e          location
-000027a0: 7320 3d20 7365 6c66 2e73 6561 7263 685f  s = self.search_
-000027b0: 6c6f 6361 7469 6f6e 730d 0a20 2020 2020  locations..     
-000027c0: 2020 2020 2020 206c 6f63 6174 696f 6e20         location 
-000027d0: 3d20 6c6f 6361 7469 6f6e 735b 7265 7375  = locations[resu
-000027e0: 6c74 5f69 6e64 6578 5d0d 0a20 2020 2020  lt_index]..     
-000027f0: 2020 2020 2020 206c 6174 6c6f 6e20 3d20         latlon = 
-00002800: 286c 6f63 6174 696f 6e2e 6c61 742c 206c  (location.lat, l
-00002810: 6f63 6174 696f 6e2e 6c6e 6729 0d0a 2020  ocation.lng)..  
-00002820: 2020 2020 2020 2020 2020 7365 6c66 2e73            self.s
-00002830: 6561 7263 685f 6c6f 635f 6765 6f6d 203d  earch_loc_geom =
-00002840: 2065 652e 4765 6f6d 6574 7279 2e50 6f69   ee.Geometry.Poi
-00002850: 6e74 286c 6f63 6174 696f 6e2e 6c6e 672c  nt(location.lng,
-00002860: 206c 6f63 6174 696f 6e2e 6c61 7429 0d0a   location.lat)..
-00002870: 2020 2020 2020 2020 2020 2020 6d61 726b              mark
-00002880: 6572 203d 2073 656c 662e 7365 6172 6368  er = self.search
-00002890: 5f6c 6f63 5f6d 6172 6b65 720d 0a20 2020  _loc_marker..   
-000028a0: 2020 2020 2020 2020 206d 6172 6b65 722e           marker.
-000028b0: 6c6f 6361 7469 6f6e 203d 206c 6174 6c6f  location = latlo
-000028c0: 6e0d 0a20 2020 2020 2020 2020 2020 2073  n..            s
-000028d0: 656c 662e 6365 6e74 6572 203d 206c 6174  elf.center = lat
-000028e0: 6c6f 6e0d 0a0d 0a20 2020 2020 2020 2073  lon....        s
-000028f0: 6561 7263 685f 7265 7375 6c74 732e 6f62  earch_results.ob
-00002900: 7365 7276 6528 7365 6172 6368 5f72 6573  serve(search_res
-00002910: 756c 745f 6368 616e 6765 2c20 6e61 6d65  ult_change, name
-00002920: 733d 2276 616c 7565 2229 0d0a 0d0a 2020  s="value")....  
-00002930: 2020 2020 2020 6465 6620 7365 6172 6368        def search
-00002940: 5f62 746e 5f63 6c69 636b 2863 6861 6e67  _btn_click(chang
-00002950: 6529 3a0d 0a20 2020 2020 2020 2020 2020  e):..           
-00002960: 2069 6620 6368 616e 6765 5b22 6e65 7722   if change["new"
-00002970: 5d3a 0d0a 2020 2020 2020 2020 2020 2020  ]:..            
-00002980: 2020 2020 7365 6172 6368 5f77 6964 6765      search_widge
-00002990: 742e 6368 696c 6472 656e 203d 205b 7365  t.children = [se
-000029a0: 6172 6368 5f62 7574 746f 6e2c 2073 6561  arch_button, sea
-000029b0: 7263 685f 7265 7375 6c74 5f77 6964 6765  rch_result_widge
-000029c0: 745d 0d0a 2020 2020 2020 2020 2020 2020  t]..            
-000029d0: 2020 2020 7365 6172 6368 5f74 7970 652e      search_type.
-000029e0: 7661 6c75 6520 3d20 226e 616d 652f 6164  value = "name/ad
-000029f0: 6472 6573 7322 0d0a 2020 2020 2020 2020  dress"..        
-00002a00: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
-00002a10: 2020 2020 2020 2020 2020 2073 6561 7263             searc
-00002a20: 685f 7769 6467 6574 2e63 6869 6c64 7265  h_widget.childre
-00002a30: 6e20 3d20 5b73 6561 7263 685f 6275 7474  n = [search_butt
-00002a40: 6f6e 5d0d 0a20 2020 2020 2020 2020 2020  on]..           
-00002a50: 2020 2020 2073 6561 7263 685f 7265 7375       search_resu
-00002a60: 6c74 5f77 6964 6765 742e 6368 696c 6472  lt_widget.childr
-00002a70: 656e 203d 205b 7365 6172 6368 5f74 7970  en = [search_typ
-00002a80: 652c 2073 6561 7263 685f 626f 785d 0d0a  e, search_box]..
-00002a90: 0d0a 2020 2020 2020 2020 7365 6172 6368  ..        search
-00002aa0: 5f62 7574 746f 6e2e 6f62 7365 7276 6528  _button.observe(
-00002ab0: 7365 6172 6368 5f62 746e 5f63 6c69 636b  search_btn_click
-00002ac0: 2c20 2276 616c 7565 2229 0d0a 0d0a 2020  , "value")....  
-00002ad0: 2020 2020 2020 6465 6620 7365 6172 6368        def search
-00002ae0: 5f74 7970 655f 6368 616e 6765 6428 6368  _type_changed(ch
-00002af0: 616e 6765 293a 0d0a 2020 2020 2020 2020  ange):..        
-00002b00: 2020 2020 7365 6172 6368 5f62 6f78 2e76      search_box.v
-00002b10: 616c 7565 203d 2022 220d 0a20 2020 2020  alue = ""..     
-00002b20: 2020 2020 2020 2073 6561 7263 685f 6f75         search_ou
-00002b30: 7470 7574 2e63 6c65 6172 5f6f 7574 7075  tput.clear_outpu
-00002b40: 7428 290d 0a20 2020 2020 2020 2020 2020  t()..           
-00002b50: 2069 6620 6368 616e 6765 5b22 6e65 7722   if change["new"
-00002b60: 5d20 3d3d 2022 6e61 6d65 2f61 6464 7265  ] == "name/addre
-00002b70: 7373 223a 0d0a 2020 2020 2020 2020 2020  ss":..          
-00002b80: 2020 2020 2020 7365 6172 6368 5f62 6f78        search_box
-00002b90: 2e70 6c61 6365 686f 6c64 6572 203d 2022  .placeholder = "
-00002ba0: 5365 6172 6368 2062 7920 706c 6163 6520  Search by place 
-00002bb0: 6e61 6d65 206f 7220 6164 6472 6573 732c  name or address,
-00002bc0: 2065 2e67 2e2c 2050 6172 6973 220d 0a20   e.g., Paris".. 
-00002bd0: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-00002be0: 7373 6574 735f 6472 6f70 646f 776e 2e6f  ssets_dropdown.o
-00002bf0: 7074 696f 6e73 203d 205b 5d0d 0a20 2020  ptions = []..   
-00002c00: 2020 2020 2020 2020 2020 2020 2073 6561               sea
-00002c10: 7263 685f 7265 7375 6c74 5f77 6964 6765  rch_result_widge
-00002c20: 742e 6368 696c 6472 656e 203d 205b 0d0a  t.children = [..
-00002c30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002c40: 2020 2020 7365 6172 6368 5f74 7970 652c      search_type,
-00002c50: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00002c60: 2020 2020 2020 7365 6172 6368 5f62 6f78        search_box
-00002c70: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00002c80: 2020 2020 2020 2073 6561 7263 685f 6f75         search_ou
-00002c90: 7470 7574 2c0d 0a20 2020 2020 2020 2020  tput,..         
-00002ca0: 2020 2020 2020 205d 0d0a 2020 2020 2020         ]..      
-00002cb0: 2020 2020 2020 656c 6966 2063 6861 6e67        elif chang
-00002cc0: 655b 226e 6577 225d 203d 3d20 226c 6174  e["new"] == "lat
-00002cd0: 2d6c 6f6e 223a 0d0a 2020 2020 2020 2020  -lon":..        
-00002ce0: 2020 2020 2020 2020 7365 6172 6368 5f62          search_b
-00002cf0: 6f78 2e70 6c61 6365 686f 6c64 6572 203d  ox.placeholder =
-00002d00: 2022 5365 6172 6368 2062 7920 6c61 742d   "Search by lat-
-00002d10: 6c6f 6e2c 2065 2e67 2e2c 2034 302c 202d  lon, e.g., 40, -
-00002d20: 3130 3022 0d0a 2020 2020 2020 2020 2020  100"..          
-00002d30: 2020 2020 2020 6173 7365 7473 5f64 726f        assets_dro
-00002d40: 7064 6f77 6e2e 6f70 7469 6f6e 7320 3d20  pdown.options = 
-00002d50: 5b5d 0d0a 2020 2020 2020 2020 2020 2020  []..            
-00002d60: 2020 2020 7365 6172 6368 5f72 6573 756c      search_resul
-00002d70: 745f 7769 6467 6574 2e63 6869 6c64 7265  t_widget.childre
-00002d80: 6e20 3d20 5b0d 0a20 2020 2020 2020 2020  n = [..         
-00002d90: 2020 2020 2020 2020 2020 2073 6561 7263             searc
-00002da0: 685f 7479 7065 2c0d 0a20 2020 2020 2020  h_type,..       
-00002db0: 2020 2020 2020 2020 2020 2020 2073 6561               sea
-00002dc0: 7263 685f 626f 782c 0d0a 2020 2020 2020  rch_box,..      
-00002dd0: 2020 2020 2020 2020 2020 2020 2020 7365                se
-00002de0: 6172 6368 5f6f 7574 7075 742c 0d0a 2020  arch_output,..  
-00002df0: 2020 2020 2020 2020 2020 2020 2020 5d0d                ].
-00002e00: 0a20 2020 2020 2020 2020 2020 2065 6c69  .            eli
-00002e10: 6620 6368 616e 6765 5b22 6e65 7722 5d20  f change["new"] 
-00002e20: 3d3d 2022 6461 7461 223a 0d0a 2020 2020  == "data":..    
-00002e30: 2020 2020 2020 2020 2020 2020 7365 6172              sear
-00002e40: 6368 5f62 6f78 2e70 6c61 6365 686f 6c64  ch_box.placehold
-00002e50: 6572 203d 2028 0d0a 2020 2020 2020 2020  er = (..        
-00002e60: 2020 2020 2020 2020 2020 2020 2253 6561              "Sea
-00002e70: 7263 6820 4745 4520 6461 7461 2063 6174  rch GEE data cat
-00002e80: 616c 6f67 2062 7920 6b65 7977 6f72 6473  alog by keywords
-00002e90: 2c20 652e 672e 2c20 656c 6576 6174 696f  , e.g., elevatio
-00002ea0: 6e22 0d0a 2020 2020 2020 2020 2020 2020  n"..            
-00002eb0: 2020 2020 290d 0a20 2020 2020 2020 2020      )..         
-00002ec0: 2020 2020 2020 2073 6561 7263 685f 7265         search_re
-00002ed0: 7375 6c74 5f77 6964 6765 742e 6368 696c  sult_widget.chil
-00002ee0: 6472 656e 203d 205b 0d0a 2020 2020 2020  dren = [..      
-00002ef0: 2020 2020 2020 2020 2020 2020 2020 7365                se
-00002f00: 6172 6368 5f74 7970 652c 0d0a 2020 2020  arch_type,..    
+000025c0: 2064 6174 6173 6574 7320 3d20 7365 6c66   datasets = self
+000025d0: 2e73 6561 7263 685f 6461 7461 7365 7473  .search_datasets
+000025e0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000025f0: 2020 2020 2020 6461 7461 7365 7420 3d20        dataset = 
+00002600: 6461 7461 7365 7473 5b64 726f 7064 6f77  datasets[dropdow
+00002610: 6e5f 696e 6465 785d 0d0a 2020 2020 2020  n_index]..      
+00002620: 2020 2020 2020 2020 2020 2020 2020 6461                da
+00002630: 7461 7365 745f 6874 6d6c 203d 2065 655f  taset_html = ee_
+00002640: 6461 7461 5f68 746d 6c28 6461 7461 7365  data_html(datase
+00002650: 7429 0d0a 2020 2020 2020 2020 2020 2020  t)..            
+00002660: 2020 2020 2020 2020 6874 6d6c 5f77 6964          html_wid
+00002670: 6765 742e 7661 6c75 6520 3d20 6461 7461  get.value = data
+00002680: 7365 745f 6874 6d6c 0d0a 2020 2020 2020  set_html..      
+00002690: 2020 2020 2020 2020 2020 2020 2020 7365                se
+000026a0: 6172 6368 5f6f 7574 7075 742e 636c 6561  arch_output.clea
+000026b0: 725f 6f75 7470 7574 2877 6169 743d 5472  r_output(wait=Tr
+000026c0: 7565 290d 0a20 2020 2020 2020 2020 2020  ue)..           
+000026d0: 2020 2020 2020 2020 2064 6973 706c 6179           display
+000026e0: 2868 746d 6c5f 7769 6467 6574 290d 0a0d  (html_widget)...
+000026f0: 0a20 2020 2020 2020 2061 7373 6574 735f  .        assets_
+00002700: 6472 6f70 646f 776e 2e6f 6273 6572 7665  dropdown.observe
+00002710: 2864 726f 7064 6f77 6e5f 6368 616e 6765  (dropdown_change
+00002720: 2c20 6e61 6d65 733d 2276 616c 7565 2229  , names="value")
+00002730: 0d0a 0d0a 2020 2020 2020 2020 6173 7365  ....        asse
+00002740: 7473 5f63 6f6d 626f 203d 2077 6964 6765  ts_combo = widge
+00002750: 7473 2e48 426f 7828 290d 0a20 2020 2020  ts.HBox()..     
+00002760: 2020 2061 7373 6574 735f 636f 6d62 6f2e     assets_combo.
+00002770: 6368 696c 6472 656e 203d 205b 696d 706f  children = [impo
+00002780: 7274 5f62 746e 2c20 6173 7365 7473 5f64  rt_btn, assets_d
+00002790: 726f 7064 6f77 6e5d 0d0a 0d0a 2020 2020  ropdown]....    
+000027a0: 2020 2020 6465 6620 7365 6172 6368 5f72      def search_r
+000027b0: 6573 756c 745f 6368 616e 6765 2863 6861  esult_change(cha
+000027c0: 6e67 6529 3a0d 0a20 2020 2020 2020 2020  nge):..         
+000027d0: 2020 2072 6573 756c 745f 696e 6465 7820     result_index 
+000027e0: 3d20 7365 6172 6368 5f72 6573 756c 7473  = search_results
+000027f0: 2e69 6e64 6578 0d0a 2020 2020 2020 2020  .index..        
+00002800: 2020 2020 6c6f 6361 7469 6f6e 7320 3d20      locations = 
+00002810: 7365 6c66 2e73 6561 7263 685f 6c6f 6361  self.search_loca
+00002820: 7469 6f6e 730d 0a20 2020 2020 2020 2020  tions..         
+00002830: 2020 206c 6f63 6174 696f 6e20 3d20 6c6f     location = lo
+00002840: 6361 7469 6f6e 735b 7265 7375 6c74 5f69  cations[result_i
+00002850: 6e64 6578 5d0d 0a20 2020 2020 2020 2020  ndex]..         
+00002860: 2020 206c 6174 6c6f 6e20 3d20 286c 6f63     latlon = (loc
+00002870: 6174 696f 6e2e 6c61 742c 206c 6f63 6174  ation.lat, locat
+00002880: 696f 6e2e 6c6e 6729 0d0a 2020 2020 2020  ion.lng)..      
+00002890: 2020 2020 2020 7365 6c66 2e73 6561 7263        self.searc
+000028a0: 685f 6c6f 635f 6765 6f6d 203d 2065 652e  h_loc_geom = ee.
+000028b0: 4765 6f6d 6574 7279 2e50 6f69 6e74 286c  Geometry.Point(l
+000028c0: 6f63 6174 696f 6e2e 6c6e 672c 206c 6f63  ocation.lng, loc
+000028d0: 6174 696f 6e2e 6c61 7429 0d0a 2020 2020  ation.lat)..    
+000028e0: 2020 2020 2020 2020 6d61 726b 6572 203d          marker =
+000028f0: 2073 656c 662e 7365 6172 6368 5f6c 6f63   self.search_loc
+00002900: 5f6d 6172 6b65 720d 0a20 2020 2020 2020  _marker..       
+00002910: 2020 2020 206d 6172 6b65 722e 6c6f 6361       marker.loca
+00002920: 7469 6f6e 203d 206c 6174 6c6f 6e0d 0a20  tion = latlon.. 
+00002930: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00002940: 6365 6e74 6572 203d 206c 6174 6c6f 6e0d  center = latlon.
+00002950: 0a0d 0a20 2020 2020 2020 2073 6561 7263  ...        searc
+00002960: 685f 7265 7375 6c74 732e 6f62 7365 7276  h_results.observ
+00002970: 6528 7365 6172 6368 5f72 6573 756c 745f  e(search_result_
+00002980: 6368 616e 6765 2c20 6e61 6d65 733d 2276  change, names="v
+00002990: 616c 7565 2229 0d0a 0d0a 2020 2020 2020  alue")....      
+000029a0: 2020 6465 6620 7365 6172 6368 5f62 746e    def search_btn
+000029b0: 5f63 6c69 636b 2863 6861 6e67 6529 3a0d  _click(change):.
+000029c0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+000029d0: 6368 616e 6765 5b22 6e65 7722 5d3a 0d0a  change["new"]:..
+000029e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000029f0: 7365 6172 6368 5f77 6964 6765 742e 6368  search_widget.ch
+00002a00: 696c 6472 656e 203d 205b 7365 6172 6368  ildren = [search
+00002a10: 5f62 7574 746f 6e2c 2073 6561 7263 685f  _button, search_
+00002a20: 7265 7375 6c74 5f77 6964 6765 745d 0d0a  result_widget]..
+00002a30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002a40: 7365 6172 6368 5f74 7970 652e 7661 6c75  search_type.valu
+00002a50: 6520 3d20 226e 616d 652f 6164 6472 6573  e = "name/addres
+00002a60: 7322 0d0a 2020 2020 2020 2020 2020 2020  s"..            
+00002a70: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
+00002a80: 2020 2020 2020 2073 6561 7263 685f 7769         search_wi
+00002a90: 6467 6574 2e63 6869 6c64 7265 6e20 3d20  dget.children = 
+00002aa0: 5b73 6561 7263 685f 6275 7474 6f6e 5d0d  [search_button].
+00002ab0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00002ac0: 2073 6561 7263 685f 7265 7375 6c74 5f77   search_result_w
+00002ad0: 6964 6765 742e 6368 696c 6472 656e 203d  idget.children =
+00002ae0: 205b 7365 6172 6368 5f74 7970 652c 2073   [search_type, s
+00002af0: 6561 7263 685f 626f 785d 0d0a 0d0a 2020  earch_box]....  
+00002b00: 2020 2020 2020 7365 6172 6368 5f62 7574        search_but
+00002b10: 746f 6e2e 6f62 7365 7276 6528 7365 6172  ton.observe(sear
+00002b20: 6368 5f62 746e 5f63 6c69 636b 2c20 2276  ch_btn_click, "v
+00002b30: 616c 7565 2229 0d0a 0d0a 2020 2020 2020  alue")....      
+00002b40: 2020 6465 6620 7365 6172 6368 5f74 7970    def search_typ
+00002b50: 655f 6368 616e 6765 6428 6368 616e 6765  e_changed(change
+00002b60: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+00002b70: 7365 6172 6368 5f62 6f78 2e76 616c 7565  search_box.value
+00002b80: 203d 2022 220d 0a20 2020 2020 2020 2020   = ""..         
+00002b90: 2020 2073 6561 7263 685f 6f75 7470 7574     search_output
+00002ba0: 2e63 6c65 6172 5f6f 7574 7075 7428 290d  .clear_output().
+00002bb0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00002bc0: 6368 616e 6765 5b22 6e65 7722 5d20 3d3d  change["new"] ==
+00002bd0: 2022 6e61 6d65 2f61 6464 7265 7373 223a   "name/address":
+00002be0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00002bf0: 2020 7365 6172 6368 5f62 6f78 2e70 6c61    search_box.pla
+00002c00: 6365 686f 6c64 6572 203d 2022 5365 6172  ceholder = "Sear
+00002c10: 6368 2062 7920 706c 6163 6520 6e61 6d65  ch by place name
+00002c20: 206f 7220 6164 6472 6573 732c 2065 2e67   or address, e.g
+00002c30: 2e2c 2050 6172 6973 220d 0a20 2020 2020  ., Paris"..     
+00002c40: 2020 2020 2020 2020 2020 2061 7373 6574             asset
+00002c50: 735f 6472 6f70 646f 776e 2e6f 7074 696f  s_dropdown.optio
+00002c60: 6e73 203d 205b 5d0d 0a20 2020 2020 2020  ns = []..       
+00002c70: 2020 2020 2020 2020 2073 6561 7263 685f           search_
+00002c80: 7265 7375 6c74 5f77 6964 6765 742e 6368  result_widget.ch
+00002c90: 696c 6472 656e 203d 205b 0d0a 2020 2020  ildren = [..    
+00002ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002cb0: 7365 6172 6368 5f74 7970 652c 0d0a 2020  search_type,..  
+00002cc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002cd0: 2020 7365 6172 6368 5f62 6f78 2c0d 0a20    search_box,.. 
+00002ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002cf0: 2020 2073 6561 7263 685f 6f75 7470 7574     search_output
+00002d00: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+00002d10: 2020 205d 0d0a 2020 2020 2020 2020 2020     ]..          
+00002d20: 2020 656c 6966 2063 6861 6e67 655b 226e    elif change["n
+00002d30: 6577 225d 203d 3d20 226c 6174 2d6c 6f6e  ew"] == "lat-lon
+00002d40: 223a 0d0a 2020 2020 2020 2020 2020 2020  ":..            
+00002d50: 2020 2020 7365 6172 6368 5f62 6f78 2e70      search_box.p
+00002d60: 6c61 6365 686f 6c64 6572 203d 2022 5365  laceholder = "Se
+00002d70: 6172 6368 2062 7920 6c61 742d 6c6f 6e2c  arch by lat-lon,
+00002d80: 2065 2e67 2e2c 2034 302c 202d 3130 3022   e.g., 40, -100"
+00002d90: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00002da0: 2020 6173 7365 7473 5f64 726f 7064 6f77    assets_dropdow
+00002db0: 6e2e 6f70 7469 6f6e 7320 3d20 5b5d 0d0a  n.options = []..
+00002dc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002dd0: 7365 6172 6368 5f72 6573 756c 745f 7769  search_result_wi
+00002de0: 6467 6574 2e63 6869 6c64 7265 6e20 3d20  dget.children = 
+00002df0: 5b0d 0a20 2020 2020 2020 2020 2020 2020  [..             
+00002e00: 2020 2020 2020 2073 6561 7263 685f 7479         search_ty
+00002e10: 7065 2c0d 0a20 2020 2020 2020 2020 2020  pe,..           
+00002e20: 2020 2020 2020 2020 2073 6561 7263 685f           search_
+00002e30: 626f 782c 0d0a 2020 2020 2020 2020 2020  box,..          
+00002e40: 2020 2020 2020 2020 2020 7365 6172 6368            search
+00002e50: 5f6f 7574 7075 742c 0d0a 2020 2020 2020  _output,..      
+00002e60: 2020 2020 2020 2020 2020 5d0d 0a20 2020            ]..   
+00002e70: 2020 2020 2020 2020 2065 6c69 6620 6368           elif ch
+00002e80: 616e 6765 5b22 6e65 7722 5d20 3d3d 2022  ange["new"] == "
+00002e90: 6461 7461 223a 0d0a 2020 2020 2020 2020  data":..        
+00002ea0: 2020 2020 2020 2020 7365 6172 6368 5f62          search_b
+00002eb0: 6f78 2e70 6c61 6365 686f 6c64 6572 203d  ox.placeholder =
+00002ec0: 2028 0d0a 2020 2020 2020 2020 2020 2020   (..            
+00002ed0: 2020 2020 2020 2020 2253 6561 7263 6820          "Search 
+00002ee0: 4745 4520 6461 7461 2063 6174 616c 6f67  GEE data catalog
+00002ef0: 2062 7920 6b65 7977 6f72 6473 2c20 652e   by keywords, e.
+00002f00: 672e 2c20 656c 6576 6174 696f 6e22 0d0a  g., elevation"..
 00002f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002f20: 7365 6172 6368 5f62 6f78 2c0d 0a20 2020  search_box,..   
-00002f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002f40: 2061 7373 6574 735f 636f 6d62 6f2c 0d0a   assets_combo,..
-00002f50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002f60: 2020 2020 7365 6172 6368 5f6f 7574 7075      search_outpu
-00002f70: 742c 0d0a 2020 2020 2020 2020 2020 2020  t,..            
-00002f80: 2020 2020 5d0d 0a0d 0a20 2020 2020 2020      ]....       
-00002f90: 2073 6561 7263 685f 7479 7065 2e6f 6273   search_type.obs
-00002fa0: 6572 7665 2873 6561 7263 685f 7479 7065  erve(search_type
-00002fb0: 5f63 6861 6e67 6564 2c20 6e61 6d65 733d  _changed, names=
-00002fc0: 2276 616c 7565 2229 0d0a 0d0a 2020 2020  "value")....    
-00002fd0: 2020 2020 6465 6620 7365 6172 6368 5f62      def search_b
-00002fe0: 6f78 5f63 616c 6c62 6163 6b28 7465 7874  ox_callback(text
-00002ff0: 293a 0d0a 0d0a 2020 2020 2020 2020 2020  ):....          
-00003000: 2020 6966 2074 6578 742e 7661 6c75 6520    if text.value 
-00003010: 213d 2022 223a 0d0a 2020 2020 2020 2020  != "":..        
-00003020: 2020 2020 2020 2020 6966 2073 6561 7263          if searc
-00003030: 685f 7479 7065 2e76 616c 7565 203d 3d20  h_type.value == 
-00003040: 226e 616d 652f 6164 6472 6573 7322 3a0d  "name/address":.
-00003050: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00003060: 2020 2020 2067 203d 2067 656f 636f 6465       g = geocode
-00003070: 2874 6578 742e 7661 6c75 6529 0d0a 2020  (text.value)..  
-00003080: 2020 2020 2020 2020 2020 2020 2020 656c                el
-00003090: 6966 2073 6561 7263 685f 7479 7065 2e76  if search_type.v
-000030a0: 616c 7565 203d 3d20 226c 6174 2d6c 6f6e  alue == "lat-lon
-000030b0: 223a 0d0a 2020 2020 2020 2020 2020 2020  ":..            
-000030c0: 2020 2020 2020 2020 6720 3d20 6765 6f63          g = geoc
-000030d0: 6f64 6528 7465 7874 2e76 616c 7565 2c20  ode(text.value, 
-000030e0: 7265 7665 7273 653d 5472 7565 290d 0a20  reverse=True).. 
-000030f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003100: 2020 2069 6620 6720 6973 204e 6f6e 6520     if g is None 
-00003110: 616e 6420 6c61 746c 6f6e 5f66 726f 6d5f  and latlon_from_
-00003120: 7465 7874 2874 6578 742e 7661 6c75 6529  text(text.value)
-00003130: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00003140: 2020 2020 2020 2020 2020 2073 6561 7263             searc
-00003150: 685f 6f75 7470 7574 2e63 6c65 6172 5f6f  h_output.clear_o
-00003160: 7574 7075 7428 290d 0a20 2020 2020 2020  utput()..       
-00003170: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003180: 206c 6174 6c6f 6e20 3d20 6c61 746c 6f6e   latlon = latlon
-00003190: 5f66 726f 6d5f 7465 7874 2874 6578 742e  _from_text(text.
-000031a0: 7661 6c75 6529 0d0a 2020 2020 2020 2020  value)..        
-000031b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000031c0: 7365 6c66 2e73 6561 7263 685f 6c6f 635f  self.search_loc_
-000031d0: 6765 6f6d 203d 2065 652e 4765 6f6d 6574  geom = ee.Geomet
-000031e0: 7279 2e50 6f69 6e74 286c 6174 6c6f 6e5b  ry.Point(latlon[
-000031f0: 315d 2c20 6c61 746c 6f6e 5b30 5d29 0d0a  1], latlon[0])..
-00003200: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003210: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
-00003220: 7365 6172 6368 5f6c 6f63 5f6d 6172 6b65  search_loc_marke
-00003230: 7220 6973 204e 6f6e 653a 0d0a 2020 2020  r is None:..    
-00003240: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003250: 2020 2020 2020 2020 6d61 726b 6572 203d          marker =
-00003260: 2069 7079 6c65 6166 6c65 742e 4d61 726b   ipyleaflet.Mark
-00003270: 6572 280d 0a20 2020 2020 2020 2020 2020  er(..           
-00003280: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003290: 2020 2020 206c 6f63 6174 696f 6e3d 6c61       location=la
-000032a0: 746c 6f6e 2c0d 0a20 2020 2020 2020 2020  tlon,..         
+00002f20: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00002f30: 2020 2073 6561 7263 685f 7265 7375 6c74     search_result
+00002f40: 5f77 6964 6765 742e 6368 696c 6472 656e  _widget.children
+00002f50: 203d 205b 0d0a 2020 2020 2020 2020 2020   = [..          
+00002f60: 2020 2020 2020 2020 2020 7365 6172 6368            search
+00002f70: 5f74 7970 652c 0d0a 2020 2020 2020 2020  _type,..        
+00002f80: 2020 2020 2020 2020 2020 2020 7365 6172              sear
+00002f90: 6368 5f62 6f78 2c0d 0a20 2020 2020 2020  ch_box,..       
+00002fa0: 2020 2020 2020 2020 2020 2020 2061 7373               ass
+00002fb0: 6574 735f 636f 6d62 6f2c 0d0a 2020 2020  ets_combo,..    
+00002fc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002fd0: 7365 6172 6368 5f6f 7574 7075 742c 0d0a  search_output,..
+00002fe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002ff0: 5d0d 0a0d 0a20 2020 2020 2020 2073 6561  ]....        sea
+00003000: 7263 685f 7479 7065 2e6f 6273 6572 7665  rch_type.observe
+00003010: 2873 6561 7263 685f 7479 7065 5f63 6861  (search_type_cha
+00003020: 6e67 6564 2c20 6e61 6d65 733d 2276 616c  nged, names="val
+00003030: 7565 2229 0d0a 0d0a 2020 2020 2020 2020  ue")....        
+00003040: 6465 6620 7365 6172 6368 5f62 6f78 5f63  def search_box_c
+00003050: 616c 6c62 6163 6b28 7465 7874 293a 0d0a  allback(text):..
+00003060: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
+00003070: 2074 6578 742e 7661 6c75 6520 213d 2022   text.value != "
+00003080: 223a 0d0a 2020 2020 2020 2020 2020 2020  ":..            
+00003090: 2020 2020 6966 2073 6561 7263 685f 7479      if search_ty
+000030a0: 7065 2e76 616c 7565 203d 3d20 226e 616d  pe.value == "nam
+000030b0: 652f 6164 6472 6573 7322 3a0d 0a20 2020  e/address":..   
+000030c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000030d0: 2067 203d 2067 656f 636f 6465 2874 6578   g = geocode(tex
+000030e0: 742e 7661 6c75 6529 0d0a 2020 2020 2020  t.value)..      
+000030f0: 2020 2020 2020 2020 2020 656c 6966 2073            elif s
+00003100: 6561 7263 685f 7479 7065 2e76 616c 7565  earch_type.value
+00003110: 203d 3d20 226c 6174 2d6c 6f6e 223a 0d0a   == "lat-lon":..
+00003120: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003130: 2020 2020 6720 3d20 6765 6f63 6f64 6528      g = geocode(
+00003140: 7465 7874 2e76 616c 7565 2c20 7265 7665  text.value, reve
+00003150: 7273 653d 5472 7565 290d 0a20 2020 2020  rse=True)..     
+00003160: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00003170: 6620 6720 6973 204e 6f6e 6520 616e 6420  f g is None and 
+00003180: 6c61 746c 6f6e 5f66 726f 6d5f 7465 7874  latlon_from_text
+00003190: 2874 6578 742e 7661 6c75 6529 3a0d 0a20  (text.value):.. 
+000031a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000031b0: 2020 2020 2020 2073 6561 7263 685f 6f75         search_ou
+000031c0: 7470 7574 2e63 6c65 6172 5f6f 7574 7075  tput.clear_outpu
+000031d0: 7428 290d 0a20 2020 2020 2020 2020 2020  t()..           
+000031e0: 2020 2020 2020 2020 2020 2020 206c 6174               lat
+000031f0: 6c6f 6e20 3d20 6c61 746c 6f6e 5f66 726f  lon = latlon_fro
+00003200: 6d5f 7465 7874 2874 6578 742e 7661 6c75  m_text(text.valu
+00003210: 6529 0d0a 2020 2020 2020 2020 2020 2020  e)..            
+00003220: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00003230: 2e73 6561 7263 685f 6c6f 635f 6765 6f6d  .search_loc_geom
+00003240: 203d 2065 652e 4765 6f6d 6574 7279 2e50   = ee.Geometry.P
+00003250: 6f69 6e74 286c 6174 6c6f 6e5b 315d 2c20  oint(latlon[1], 
+00003260: 6c61 746c 6f6e 5b30 5d29 0d0a 2020 2020  latlon[0])..    
+00003270: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003280: 2020 2020 6966 2073 656c 662e 7365 6172      if self.sear
+00003290: 6368 5f6c 6f63 5f6d 6172 6b65 7220 6973  ch_loc_marker is
+000032a0: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
 000032b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000032c0: 2020 2020 2020 2064 7261 6767 6162 6c65         draggable
-000032d0: 3d46 616c 7365 2c0d 0a20 2020 2020 2020  =False,..       
-000032e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000032f0: 2020 2020 2020 2020 206e 616d 653d 2253           name="S
-00003300: 6561 7263 6820 6c6f 6361 7469 6f6e 222c  earch location",
-00003310: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00003320: 2020 2020 2020 2020 2020 2020 2020 290d                ).
-00003330: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00003340: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-00003350: 662e 7365 6172 6368 5f6c 6f63 5f6d 6172  f.search_loc_mar
-00003360: 6b65 7220 3d20 6d61 726b 6572 0d0a 2020  ker = marker..  
-00003370: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003380: 2020 2020 2020 2020 2020 7365 6c66 2e61            self.a
-00003390: 6464 5f6c 6179 6572 286d 6172 6b65 7229  dd_layer(marker)
-000033a0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000033b0: 2020 2020 2020 2020 2020 2020 2020 7365                se
-000033c0: 6c66 2e63 656e 7465 7220 3d20 6c61 746c  lf.center = latl
-000033d0: 6f6e 0d0a 2020 2020 2020 2020 2020 2020  on..            
-000033e0: 2020 2020 2020 2020 2020 2020 656c 7365              else
-000033f0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00003400: 2020 2020 2020 2020 2020 2020 2020 206d                 m
-00003410: 6172 6b65 7220 3d20 7365 6c66 2e73 6561  arker = self.sea
-00003420: 7263 685f 6c6f 635f 6d61 726b 6572 0d0a  rch_loc_marker..
-00003430: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003440: 2020 2020 2020 2020 2020 2020 6d61 726b              mark
-00003450: 6572 2e6c 6f63 6174 696f 6e20 3d20 6c61  er.location = la
-00003460: 746c 6f6e 0d0a 2020 2020 2020 2020 2020  tlon..          
-00003470: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003480: 2020 7365 6c66 2e63 656e 7465 7220 3d20    self.center = 
-00003490: 6c61 746c 6f6e 0d0a 2020 2020 2020 2020  latlon..        
+000032c0: 2020 2020 6d61 726b 6572 203d 2069 7079      marker = ipy
+000032d0: 6c65 6166 6c65 742e 4d61 726b 6572 280d  leaflet.Marker(.
+000032e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000032f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003300: 206c 6f63 6174 696f 6e3d 6c61 746c 6f6e   location=latlon
+00003310: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+00003320: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003330: 2020 2064 7261 6767 6162 6c65 3d46 616c     draggable=Fal
+00003340: 7365 2c0d 0a20 2020 2020 2020 2020 2020  se,..           
+00003350: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003360: 2020 2020 206e 616d 653d 2253 6561 7263       name="Searc
+00003370: 6820 6c6f 6361 7469 6f6e 222c 0d0a 2020  h location",..  
+00003380: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003390: 2020 2020 2020 2020 2020 290d 0a20 2020            )..   
+000033a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000033b0: 2020 2020 2020 2020 2073 656c 662e 7365           self.se
+000033c0: 6172 6368 5f6c 6f63 5f6d 6172 6b65 7220  arch_loc_marker 
+000033d0: 3d20 6d61 726b 6572 0d0a 2020 2020 2020  = marker..      
+000033e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000033f0: 2020 2020 2020 7365 6c66 2e61 6464 5f6c        self.add_l
+00003400: 6179 6572 286d 6172 6b65 7229 0d0a 2020  ayer(marker)..  
+00003410: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003420: 2020 2020 2020 2020 2020 7365 6c66 2e63            self.c
+00003430: 656e 7465 7220 3d20 6c61 746c 6f6e 0d0a  enter = latlon..
+00003440: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003450: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
+00003460: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003470: 2020 2020 2020 2020 2020 206d 6172 6b65             marke
+00003480: 7220 3d20 7365 6c66 2e73 6561 7263 685f  r = self.search_
+00003490: 6c6f 635f 6d61 726b 6572 0d0a 2020 2020  loc_marker..    
 000034a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000034b0: 7769 7468 2073 6561 7263 685f 6f75 7470  with search_outp
-000034c0: 7574 3a0d 0a20 2020 2020 2020 2020 2020  ut:..           
-000034d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000034e0: 2070 7269 6e74 2866 224e 6f20 6164 6472   print(f"No addr
-000034f0: 6573 7320 666f 756e 6420 666f 7220 7b6c  ess found for {l
-00003500: 6174 6c6f 6e7d 2229 0d0a 2020 2020 2020  atlon}")..      
-00003510: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003520: 2020 7265 7475 726e 0d0a 2020 2020 2020    return..      
-00003530: 2020 2020 2020 2020 2020 656c 6966 2073            elif s
-00003540: 6561 7263 685f 7479 7065 2e76 616c 7565  earch_type.value
-00003550: 203d 3d20 2264 6174 6122 3a0d 0a20 2020   == "data":..   
-00003560: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003570: 2073 6561 7263 685f 6f75 7470 7574 2e63   search_output.c
-00003580: 6c65 6172 5f6f 7574 7075 7428 290d 0a20  lear_output().. 
-00003590: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000035a0: 2020 2077 6974 6820 7365 6172 6368 5f6f     with search_o
-000035b0: 7574 7075 743a 0d0a 2020 2020 2020 2020  utput:..        
-000035c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000035d0: 7072 696e 7428 2253 6561 7263 6869 6e67  print("Searching
-000035e0: 202e 2e2e 2229 0d0a 2020 2020 2020 2020   ...")..        
-000035f0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00003600: 2e64 6566 6175 6c74 5f73 7479 6c65 203d  .default_style =
-00003610: 207b 2263 7572 736f 7222 3a20 2277 6169   {"cursor": "wai
-00003620: 7422 7d0d 0a20 2020 2020 2020 2020 2020  t"}..           
-00003630: 2020 2020 2020 2020 2065 655f 6173 7365           ee_asse
-00003640: 7473 203d 2073 6561 7263 685f 6565 5f64  ts = search_ee_d
-00003650: 6174 6128 7465 7874 2e76 616c 7565 290d  ata(text.value).
-00003660: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00003670: 2020 2020 2073 656c 662e 7365 6172 6368       self.search
-00003680: 5f64 6174 6173 6574 7320 3d20 6565 5f61  _datasets = ee_a
-00003690: 7373 6574 730d 0a20 2020 2020 2020 2020  ssets..         
-000036a0: 2020 2020 2020 2020 2020 2061 7373 6574             asset
-000036b0: 5f74 6974 6c65 7320 3d20 5b78 5b22 7469  _titles = [x["ti
-000036c0: 746c 6522 5d20 666f 7220 7820 696e 2065  tle"] for x in e
-000036d0: 655f 6173 7365 7473 5d0d 0a20 2020 2020  e_assets]..     
-000036e0: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-000036f0: 7373 6574 735f 6472 6f70 646f 776e 2e6f  ssets_dropdown.o
-00003700: 7074 696f 6e73 203d 2061 7373 6574 5f74  ptions = asset_t
-00003710: 6974 6c65 730d 0a20 2020 2020 2020 2020  itles..         
-00003720: 2020 2020 2020 2020 2020 2073 6561 7263             searc
-00003730: 685f 6f75 7470 7574 2e63 6c65 6172 5f6f  h_output.clear_o
-00003740: 7574 7075 7428 290d 0a20 2020 2020 2020  utput()..       
-00003750: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00003760: 6c65 6e28 6565 5f61 7373 6574 7329 203e  len(ee_assets) >
-00003770: 2030 3a0d 0a20 2020 2020 2020 2020 2020   0:..           
-00003780: 2020 2020 2020 2020 2020 2020 2068 746d               htm
-00003790: 6c5f 7769 6467 6574 2e76 616c 7565 203d  l_widget.value =
-000037a0: 2065 655f 6461 7461 5f68 746d 6c28 6565   ee_data_html(ee
-000037b0: 5f61 7373 6574 735b 305d 290d 0a20 2020  _assets[0])..   
-000037c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000037d0: 2077 6974 6820 7365 6172 6368 5f6f 7574   with search_out
-000037e0: 7075 743a 0d0a 2020 2020 2020 2020 2020  put:..          
-000037f0: 2020 2020 2020 2020 2020 2020 2020 6469                di
-00003800: 7370 6c61 7928 6874 6d6c 5f77 6964 6765  splay(html_widge
-00003810: 7429 0d0a 2020 2020 2020 2020 2020 2020  t)..            
-00003820: 2020 2020 2020 2020 7365 6c66 2e64 6566          self.def
-00003830: 6175 6c74 5f73 7479 6c65 203d 207b 2263  ault_style = {"c
-00003840: 7572 736f 7222 3a20 2264 6566 6175 6c74  ursor": "default
-00003850: 227d 0d0a 0d0a 2020 2020 2020 2020 2020  "}....          
-00003860: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00003870: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00003880: 2020 2020 7365 6c66 2e73 6561 7263 685f      self.search_
-00003890: 6c6f 6361 7469 6f6e 7320 3d20 670d 0a20  locations = g.. 
-000038a0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-000038b0: 6620 6720 6973 206e 6f74 204e 6f6e 6520  f g is not None 
-000038c0: 616e 6420 6c65 6e28 6729 203e 2030 3a0d  and len(g) > 0:.
-000038d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000038e0: 2020 2020 2074 6f70 5f6c 6f63 203d 2067       top_loc = g
-000038f0: 5b30 5d0d 0a20 2020 2020 2020 2020 2020  [0]..           
-00003900: 2020 2020 2020 2020 206c 6174 6c6f 6e20           latlon 
-00003910: 3d20 2874 6f70 5f6c 6f63 2e6c 6174 2c20  = (top_loc.lat, 
-00003920: 746f 705f 6c6f 632e 6c6e 6729 0d0a 2020  top_loc.lng)..  
-00003930: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003940: 2020 7365 6c66 2e73 6561 7263 685f 6c6f    self.search_lo
-00003950: 635f 6765 6f6d 203d 2065 652e 4765 6f6d  c_geom = ee.Geom
-00003960: 6574 7279 2e50 6f69 6e74 2874 6f70 5f6c  etry.Point(top_l
-00003970: 6f63 2e6c 6e67 2c20 746f 705f 6c6f 632e  oc.lng, top_loc.
-00003980: 6c61 7429 0d0a 2020 2020 2020 2020 2020  lat)..          
-00003990: 2020 2020 2020 2020 2020 6966 2073 656c            if sel
-000039a0: 662e 7365 6172 6368 5f6c 6f63 5f6d 6172  f.search_loc_mar
-000039b0: 6b65 7220 6973 204e 6f6e 653a 0d0a 2020  ker is None:..  
-000039c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000039d0: 2020 2020 2020 6d61 726b 6572 203d 2069        marker = i
-000039e0: 7079 6c65 6166 6c65 742e 4d61 726b 6572  pyleaflet.Marker
-000039f0: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
-00003a00: 2020 2020 2020 2020 2020 2020 2020 206c                 l
-00003a10: 6f63 6174 696f 6e3d 6c61 746c 6f6e 2c0d  ocation=latlon,.
-00003a20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00003a30: 2020 2020 2020 2020 2020 2020 2064 7261               dra
-00003a40: 6767 6162 6c65 3d46 616c 7365 2c0d 0a20  ggable=False,.. 
-00003a50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003a60: 2020 2020 2020 2020 2020 206e 616d 653d             name=
-00003a70: 2253 6561 7263 6820 6c6f 6361 7469 6f6e  "Search location
-00003a80: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
-00003a90: 2020 2020 2020 2020 2020 2020 290d 0a20              ).. 
-00003aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003ab0: 2020 2020 2020 2073 656c 662e 7365 6172         self.sear
-00003ac0: 6368 5f6c 6f63 5f6d 6172 6b65 7220 3d20  ch_loc_marker = 
-00003ad0: 6d61 726b 6572 0d0a 2020 2020 2020 2020  marker..        
-00003ae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003af0: 7365 6c66 2e61 6464 5f6c 6179 6572 286d  self.add_layer(m
-00003b00: 6172 6b65 7229 0d0a 2020 2020 2020 2020  arker)..        
+000034b0: 2020 2020 2020 2020 6d61 726b 6572 2e6c          marker.l
+000034c0: 6f63 6174 696f 6e20 3d20 6c61 746c 6f6e  ocation = latlon
+000034d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000034e0: 2020 2020 2020 2020 2020 2020 2020 7365                se
+000034f0: 6c66 2e63 656e 7465 7220 3d20 6c61 746c  lf.center = latl
+00003500: 6f6e 0d0a 2020 2020 2020 2020 2020 2020  on..            
+00003510: 2020 2020 2020 2020 2020 2020 7769 7468              with
+00003520: 2073 6561 7263 685f 6f75 7470 7574 3a0d   search_output:.
+00003530: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00003540: 2020 2020 2020 2020 2020 2020 2070 7269               pri
+00003550: 6e74 2866 224e 6f20 6164 6472 6573 7320  nt(f"No address 
+00003560: 666f 756e 6420 666f 7220 7b6c 6174 6c6f  found for {latlo
+00003570: 6e7d 2229 0d0a 2020 2020 2020 2020 2020  n}")..          
+00003580: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00003590: 7475 726e 0d0a 2020 2020 2020 2020 2020  turn..          
+000035a0: 2020 2020 2020 656c 6966 2073 6561 7263        elif searc
+000035b0: 685f 7479 7065 2e76 616c 7565 203d 3d20  h_type.value == 
+000035c0: 2264 6174 6122 3a0d 0a20 2020 2020 2020  "data":..       
+000035d0: 2020 2020 2020 2020 2020 2020 2073 6561               sea
+000035e0: 7263 685f 6f75 7470 7574 2e63 6c65 6172  rch_output.clear
+000035f0: 5f6f 7574 7075 7428 290d 0a20 2020 2020  _output()..     
+00003600: 2020 2020 2020 2020 2020 2020 2020 2077                 w
+00003610: 6974 6820 7365 6172 6368 5f6f 7574 7075  ith search_outpu
+00003620: 743a 0d0a 2020 2020 2020 2020 2020 2020  t:..            
+00003630: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+00003640: 7428 2253 6561 7263 6869 6e67 202e 2e2e  t("Searching ...
+00003650: 2229 0d0a 2020 2020 2020 2020 2020 2020  ")..            
+00003660: 2020 2020 2020 2020 7365 6c66 2e64 6566          self.def
+00003670: 6175 6c74 5f73 7479 6c65 203d 207b 2263  ault_style = {"c
+00003680: 7572 736f 7222 3a20 2277 6169 7422 7d0d  ursor": "wait"}.
+00003690: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000036a0: 2020 2020 2065 655f 6173 7365 7473 203d       ee_assets =
+000036b0: 2073 6561 7263 685f 6565 5f64 6174 6128   search_ee_data(
+000036c0: 7465 7874 2e76 616c 7565 290d 0a20 2020  text.value)..   
+000036d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000036e0: 2073 656c 662e 7365 6172 6368 5f64 6174   self.search_dat
+000036f0: 6173 6574 7320 3d20 6565 5f61 7373 6574  asets = ee_asset
+00003700: 730d 0a20 2020 2020 2020 2020 2020 2020  s..             
+00003710: 2020 2020 2020 2061 7373 6574 5f74 6974         asset_tit
+00003720: 6c65 7320 3d20 5b78 5b22 7469 746c 6522  les = [x["title"
+00003730: 5d20 666f 7220 7820 696e 2065 655f 6173  ] for x in ee_as
+00003740: 7365 7473 5d0d 0a20 2020 2020 2020 2020  sets]..         
+00003750: 2020 2020 2020 2020 2020 2061 7373 6574             asset
+00003760: 735f 6472 6f70 646f 776e 2e6f 7074 696f  s_dropdown.optio
+00003770: 6e73 203d 2061 7373 6574 5f74 6974 6c65  ns = asset_title
+00003780: 730d 0a20 2020 2020 2020 2020 2020 2020  s..             
+00003790: 2020 2020 2020 2073 6561 7263 685f 6f75         search_ou
+000037a0: 7470 7574 2e63 6c65 6172 5f6f 7574 7075  tput.clear_outpu
+000037b0: 7428 290d 0a20 2020 2020 2020 2020 2020  t()..           
+000037c0: 2020 2020 2020 2020 2069 6620 6c65 6e28           if len(
+000037d0: 6565 5f61 7373 6574 7329 203e 2030 3a0d  ee_assets) > 0:.
+000037e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000037f0: 2020 2020 2020 2020 2068 746d 6c5f 7769           html_wi
+00003800: 6467 6574 2e76 616c 7565 203d 2065 655f  dget.value = ee_
+00003810: 6461 7461 5f68 746d 6c28 6565 5f61 7373  data_html(ee_ass
+00003820: 6574 735b 305d 290d 0a20 2020 2020 2020  ets[0])..       
+00003830: 2020 2020 2020 2020 2020 2020 2077 6974               wit
+00003840: 6820 7365 6172 6368 5f6f 7574 7075 743a  h search_output:
+00003850: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00003860: 2020 2020 2020 2020 2020 6469 7370 6c61            displa
+00003870: 7928 6874 6d6c 5f77 6964 6765 7429 0d0a  y(html_widget)..
+00003880: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003890: 2020 2020 7365 6c66 2e64 6566 6175 6c74      self.default
+000038a0: 5f73 7479 6c65 203d 207b 2263 7572 736f  _style = {"curso
+000038b0: 7222 3a20 2264 6566 6175 6c74 227d 0d0a  r": "default"}..
+000038c0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000038d0: 2020 2020 2020 7265 7475 726e 0d0a 0d0a        return....
+000038e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000038f0: 7365 6c66 2e73 6561 7263 685f 6c6f 6361  self.search_loca
+00003900: 7469 6f6e 7320 3d20 670d 0a20 2020 2020  tions = g..     
+00003910: 2020 2020 2020 2020 2020 2069 6620 6720             if g 
+00003920: 6973 206e 6f74 204e 6f6e 6520 616e 6420  is not None and 
+00003930: 6c65 6e28 6729 203e 2030 3a0d 0a20 2020  len(g) > 0:..   
+00003940: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003950: 2074 6f70 5f6c 6f63 203d 2067 5b30 5d0d   top_loc = g[0].
+00003960: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00003970: 2020 2020 206c 6174 6c6f 6e20 3d20 2874       latlon = (t
+00003980: 6f70 5f6c 6f63 2e6c 6174 2c20 746f 705f  op_loc.lat, top_
+00003990: 6c6f 632e 6c6e 6729 0d0a 2020 2020 2020  loc.lng)..      
+000039a0: 2020 2020 2020 2020 2020 2020 2020 7365                se
+000039b0: 6c66 2e73 6561 7263 685f 6c6f 635f 6765  lf.search_loc_ge
+000039c0: 6f6d 203d 2065 652e 4765 6f6d 6574 7279  om = ee.Geometry
+000039d0: 2e50 6f69 6e74 2874 6f70 5f6c 6f63 2e6c  .Point(top_loc.l
+000039e0: 6e67 2c20 746f 705f 6c6f 632e 6c61 7429  ng, top_loc.lat)
+000039f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00003a00: 2020 2020 2020 6966 2073 656c 662e 7365        if self.se
+00003a10: 6172 6368 5f6c 6f63 5f6d 6172 6b65 7220  arch_loc_marker 
+00003a20: 6973 204e 6f6e 653a 0d0a 2020 2020 2020  is None:..      
+00003a30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003a40: 2020 6d61 726b 6572 203d 2069 7079 6c65    marker = ipyle
+00003a50: 6166 6c65 742e 4d61 726b 6572 280d 0a20  aflet.Marker(.. 
+00003a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003a70: 2020 2020 2020 2020 2020 206c 6f63 6174             locat
+00003a80: 696f 6e3d 6c61 746c 6f6e 2c0d 0a20 2020  ion=latlon,..   
+00003a90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003aa0: 2020 2020 2020 2020 2064 7261 6767 6162           draggab
+00003ab0: 6c65 3d46 616c 7365 2c0d 0a20 2020 2020  le=False,..     
+00003ac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003ad0: 2020 2020 2020 206e 616d 653d 2253 6561         name="Sea
+00003ae0: 7263 6820 6c6f 6361 7469 6f6e 222c 0d0a  rch location",..
+00003af0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003b00: 2020 2020 2020 2020 290d 0a20 2020 2020          )..     
 00003b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003b20: 7365 6c66 2e63 656e 7465 7220 3d20 6c61  self.center = la
-00003b30: 746c 6f6e 0d0a 2020 2020 2020 2020 2020  tlon..          
-00003b40: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
-00003b50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00003b60: 2020 2020 2020 2020 206d 6172 6b65 7220           marker 
-00003b70: 3d20 7365 6c66 2e73 6561 7263 685f 6c6f  = self.search_lo
-00003b80: 635f 6d61 726b 6572 0d0a 2020 2020 2020  c_marker..      
-00003b90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003ba0: 2020 6d61 726b 6572 2e6c 6f63 6174 696f    marker.locatio
-00003bb0: 6e20 3d20 6c61 746c 6f6e 0d0a 2020 2020  n = latlon..    
+00003b20: 2020 2073 656c 662e 7365 6172 6368 5f6c     self.search_l
+00003b30: 6f63 5f6d 6172 6b65 7220 3d20 6d61 726b  oc_marker = mark
+00003b40: 6572 0d0a 2020 2020 2020 2020 2020 2020  er..            
+00003b50: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00003b60: 2e61 6464 5f6c 6179 6572 286d 6172 6b65  .add_layer(marke
+00003b70: 7229 0d0a 2020 2020 2020 2020 2020 2020  r)..            
+00003b80: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00003b90: 2e63 656e 7465 7220 3d20 6c61 746c 6f6e  .center = latlon
+00003ba0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00003bb0: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
 00003bc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003bd0: 2020 2020 7365 6c66 2e63 656e 7465 7220      self.center 
-00003be0: 3d20 6c61 746c 6f6e 0d0a 2020 2020 2020  = latlon..      
-00003bf0: 2020 2020 2020 2020 2020 2020 2020 7365                se
-00003c00: 6172 6368 5f72 6573 756c 7473 2e6f 7074  arch_results.opt
-00003c10: 696f 6e73 203d 205b 782e 6164 6472 6573  ions = [x.addres
-00003c20: 7320 666f 7220 7820 696e 2067 5d0d 0a20  s for x in g].. 
+00003bd0: 2020 2020 206d 6172 6b65 7220 3d20 7365       marker = se
+00003be0: 6c66 2e73 6561 7263 685f 6c6f 635f 6d61  lf.search_loc_ma
+00003bf0: 726b 6572 0d0a 2020 2020 2020 2020 2020  rker..          
+00003c00: 2020 2020 2020 2020 2020 2020 2020 6d61                ma
+00003c10: 726b 6572 2e6c 6f63 6174 696f 6e20 3d20  rker.location = 
+00003c20: 6c61 746c 6f6e 0d0a 2020 2020 2020 2020  latlon..        
 00003c30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003c40: 2020 2073 6561 7263 685f 7265 7375 6c74     search_result
-00003c50: 5f77 6964 6765 742e 6368 696c 6472 656e  _widget.children
-00003c60: 203d 205b 0d0a 2020 2020 2020 2020 2020   = [..          
-00003c70: 2020 2020 2020 2020 2020 2020 2020 7365                se
-00003c80: 6172 6368 5f74 7970 652c 0d0a 2020 2020  arch_type,..    
-00003c90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003ca0: 2020 2020 7365 6172 6368 5f62 6f78 2c0d      search_box,.
-00003cb0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00003cc0: 2020 2020 2020 2020 2073 6561 7263 685f           search_
-00003cd0: 6f75 7470 7574 2c0d 0a20 2020 2020 2020  output,..       
-00003ce0: 2020 2020 2020 2020 2020 2020 205d 0d0a               ]..
-00003cf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003d00: 2020 2020 7769 7468 2073 6561 7263 685f      with search_
-00003d10: 6f75 7470 7574 3a0d 0a20 2020 2020 2020  output:..       
+00003c40: 7365 6c66 2e63 656e 7465 7220 3d20 6c61  self.center = la
+00003c50: 746c 6f6e 0d0a 2020 2020 2020 2020 2020  tlon..          
+00003c60: 2020 2020 2020 2020 2020 7365 6172 6368            search
+00003c70: 5f72 6573 756c 7473 2e6f 7074 696f 6e73  _results.options
+00003c80: 203d 205b 782e 6164 6472 6573 7320 666f   = [x.address fo
+00003c90: 7220 7820 696e 2067 5d0d 0a20 2020 2020  r x in g]..     
+00003ca0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00003cb0: 6561 7263 685f 7265 7375 6c74 5f77 6964  earch_result_wid
+00003cc0: 6765 742e 6368 696c 6472 656e 203d 205b  get.children = [
+00003cd0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00003ce0: 2020 2020 2020 2020 2020 7365 6172 6368            search
+00003cf0: 5f74 7970 652c 0d0a 2020 2020 2020 2020  _type,..        
+00003d00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003d10: 7365 6172 6368 5f62 6f78 2c0d 0a20 2020  search_box,..   
 00003d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003d30: 2073 6561 7263 685f 6f75 7470 7574 2e63   search_output.c
-00003d40: 6c65 6172 5f6f 7574 7075 7428 7761 6974  lear_output(wait
-00003d50: 3d54 7275 6529 0d0a 2020 2020 2020 2020  =True)..        
+00003d30: 2020 2020 2073 6561 7263 685f 6f75 7470       search_outp
+00003d40: 7574 2c0d 0a20 2020 2020 2020 2020 2020  ut,..           
+00003d50: 2020 2020 2020 2020 205d 0d0a 2020 2020           ]..    
 00003d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003d70: 6469 7370 6c61 7928 7365 6172 6368 5f72  display(search_r
-00003d80: 6573 756c 7473 290d 0a20 2020 2020 2020  esults)..       
-00003d90: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
-00003da0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003db0: 2020 2020 7769 7468 2073 6561 7263 685f      with search_
-00003dc0: 6f75 7470 7574 3a0d 0a20 2020 2020 2020  output:..       
-00003dd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003de0: 2073 6561 7263 685f 6f75 7470 7574 2e63   search_output.c
-00003df0: 6c65 6172 5f6f 7574 7075 7428 290d 0a20  lear_output().. 
-00003e00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003e10: 2020 2020 2020 2070 7269 6e74 2822 4e6f         print("No
-00003e20: 2072 6573 756c 7473 2063 6f75 6c64 2062   results could b
-00003e30: 6520 666f 756e 642e 2229 0d0a 0d0a 2020  e found.")....  
-00003e40: 2020 2020 2020 7365 6172 6368 5f62 6f78        search_box
-00003e50: 2e6f 6e5f 7375 626d 6974 2873 6561 7263  .on_submit(searc
-00003e60: 685f 626f 785f 6361 6c6c 6261 636b 290d  h_box_callback).
-00003e70: 0a0d 0a20 2020 2020 2020 2073 6561 7263  ...        searc
-00003e80: 685f 7265 7375 6c74 5f77 6964 6765 7420  h_result_widget 
-00003e90: 3d20 7769 6467 6574 732e 5642 6f78 285b  = widgets.VBox([
-00003ea0: 7365 6172 6368 5f74 7970 652c 2073 6561  search_type, sea
-00003eb0: 7263 685f 626f 785d 290d 0a20 2020 2020  rch_box])..     
-00003ec0: 2020 2073 6561 7263 685f 7769 6467 6574     search_widget
-00003ed0: 203d 2077 6964 6765 7473 2e48 426f 7828   = widgets.HBox(
-00003ee0: 5b73 6561 7263 685f 6275 7474 6f6e 5d29  [search_button])
-00003ef0: 0d0a 0d0a 2020 2020 2020 2020 7365 6172  ....        sear
-00003f00: 6368 5f65 7665 6e74 203d 2069 7079 6576  ch_event = ipyev
-00003f10: 656e 7473 2e45 7665 6e74 280d 0a20 2020  ents.Event(..   
-00003f20: 2020 2020 2020 2020 2073 6f75 7263 653d           source=
-00003f30: 7365 6172 6368 5f77 6964 6765 742c 2077  search_widget, w
-00003f40: 6174 6368 6564 5f65 7665 6e74 733d 5b22  atched_events=["
-00003f50: 6d6f 7573 6565 6e74 6572 222c 2022 6d6f  mouseenter", "mo
-00003f60: 7573 656c 6561 7665 225d 0d0a 2020 2020  useleave"]..    
-00003f70: 2020 2020 290d 0a0d 0a20 2020 2020 2020      )....       
-00003f80: 2064 6566 2068 616e 646c 655f 7365 6172   def handle_sear
-00003f90: 6368 5f65 7665 6e74 2865 7665 6e74 293a  ch_event(event):
-00003fa0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00003fb0: 6966 2065 7665 6e74 5b22 7479 7065 225d  if event["type"]
-00003fc0: 203d 3d20 226d 6f75 7365 656e 7465 7222   == "mouseenter"
-00003fd0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00003fe0: 2020 2073 6561 7263 685f 7769 6467 6574     search_widget
-00003ff0: 2e63 6869 6c64 7265 6e20 3d20 5b73 6561  .children = [sea
-00004000: 7263 685f 6275 7474 6f6e 2c20 7365 6172  rch_button, sear
-00004010: 6368 5f72 6573 756c 745f 7769 6467 6574  ch_result_widget
-00004020: 5d0d 0a20 2020 2020 2020 2020 2020 2020  ]..             
-00004030: 2020 2023 2073 6561 7263 685f 7479 7065     # search_type
-00004040: 2e76 616c 7565 203d 2022 6e61 6d65 2f61  .value = "name/a
-00004050: 6464 7265 7373 220d 0a20 2020 2020 2020  ddress"..       
-00004060: 2020 2020 2065 6c69 6620 6576 656e 745b       elif event[
-00004070: 2274 7970 6522 5d20 3d3d 2022 6d6f 7573  "type"] == "mous
-00004080: 656c 6561 7665 223a 0d0a 2020 2020 2020  eleave":..      
-00004090: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
-000040a0: 2073 6561 7263 685f 6275 7474 6f6e 2e76   search_button.v
-000040b0: 616c 7565 3a0d 0a20 2020 2020 2020 2020  alue:..         
-000040c0: 2020 2020 2020 2020 2020 2073 6561 7263             searc
-000040d0: 685f 7769 6467 6574 2e63 6869 6c64 7265  h_widget.childre
-000040e0: 6e20 3d20 5b73 6561 7263 685f 6275 7474  n = [search_butt
-000040f0: 6f6e 5d0d 0a20 2020 2020 2020 2020 2020  on]..           
-00004100: 2020 2020 2020 2020 2073 6561 7263 685f           search_
-00004110: 7265 7375 6c74 5f77 6964 6765 742e 6368  result_widget.ch
-00004120: 696c 6472 656e 203d 205b 7365 6172 6368  ildren = [search
-00004130: 5f74 7970 652c 2073 6561 7263 685f 626f  _type, search_bo
-00004140: 785d 0d0a 0d0a 2020 2020 2020 2020 7365  x]....        se
-00004150: 6172 6368 5f65 7665 6e74 2e6f 6e5f 646f  arch_event.on_do
-00004160: 6d5f 6576 656e 7428 6861 6e64 6c65 5f73  m_event(handle_s
-00004170: 6561 7263 685f 6576 656e 7429 0d0a 0d0a  earch_event)....
-00004180: 2020 2020 2020 2020 6461 7461 5f63 6f6e          data_con
-00004190: 7472 6f6c 203d 2069 7079 6c65 6166 6c65  trol = ipyleafle
-000041a0: 742e 5769 6467 6574 436f 6e74 726f 6c28  t.WidgetControl(
-000041b0: 0d0a 2020 2020 2020 2020 2020 2020 7769  ..            wi
-000041c0: 6467 6574 3d73 6561 7263 685f 7769 6467  dget=search_widg
-000041d0: 6574 2c20 706f 7369 7469 6f6e 3d22 746f  et, position="to
-000041e0: 706c 6566 7422 0d0a 2020 2020 2020 2020  pleft"..        
-000041f0: 290d 0a0d 0a20 2020 2020 2020 2069 6620  )....        if 
-00004200: 6b77 6172 6773 2e67 6574 2822 6461 7461  kwargs.get("data
-00004210: 5f63 7472 6c22 293a 0d0a 2020 2020 2020  _ctrl"):..      
-00004220: 2020 2020 2020 7365 6c66 2e61 6464 5f63        self.add_c
-00004230: 6f6e 7472 6f6c 2863 6f6e 7472 6f6c 3d64  ontrol(control=d
-00004240: 6174 615f 636f 6e74 726f 6c29 0d0a 0d0a  ata_control)....
-00004250: 2020 2020 2020 2020 7365 6172 6368 5f6d          search_m
-00004260: 6172 6b65 7220 3d20 6970 796c 6561 666c  arker = ipyleafl
-00004270: 6574 2e4d 6172 6b65 7228 0d0a 2020 2020  et.Marker(..    
-00004280: 2020 2020 2020 2020 6963 6f6e 3d69 7079          icon=ipy
-00004290: 6c65 6166 6c65 742e 4177 6573 6f6d 6549  leaflet.AwesomeI
-000042a0: 636f 6e28 0d0a 2020 2020 2020 2020 2020  con(..          
-000042b0: 2020 2020 2020 6e61 6d65 3d22 6368 6563        name="chec
-000042c0: 6b22 2c20 6d61 726b 6572 5f63 6f6c 6f72  k", marker_color
-000042d0: 3d22 6772 6565 6e22 2c20 6963 6f6e 5f63  ="green", icon_c
-000042e0: 6f6c 6f72 3d22 6461 726b 6772 6565 6e22  olor="darkgreen"
-000042f0: 0d0a 2020 2020 2020 2020 2020 2020 290d  ..            ).
-00004300: 0a20 2020 2020 2020 2029 0d0a 2020 2020  .        )..    
-00004310: 2020 2020 7365 6172 6368 203d 2069 7079      search = ipy
-00004320: 6c65 6166 6c65 742e 5365 6172 6368 436f  leaflet.SearchCo
-00004330: 6e74 726f 6c28 0d0a 2020 2020 2020 2020  ntrol(..        
-00004340: 2020 2020 706f 7369 7469 6f6e 3d22 746f      position="to
-00004350: 706c 6566 7422 2c0d 0a20 2020 2020 2020  pleft",..       
-00004360: 2020 2020 2075 726c 3d22 6874 7470 733a       url="https:
-00004370: 2f2f 6e6f 6d69 6e61 7469 6d2e 6f70 656e  //nominatim.open
-00004380: 7374 7265 6574 6d61 702e 6f72 672f 7365  streetmap.org/se
-00004390: 6172 6368 3f66 6f72 6d61 743d 6a73 6f6e  arch?format=json
-000043a0: 2671 3d7b 737d 222c 0d0a 2020 2020 2020  &q={s}",..      
-000043b0: 2020 2020 2020 7a6f 6f6d 3d35 2c0d 0a20        zoom=5,.. 
-000043c0: 2020 2020 2020 2020 2020 2070 726f 7065             prope
-000043d0: 7274 795f 6e61 6d65 3d22 6469 7370 6c61  rty_name="displa
-000043e0: 795f 6e61 6d65 222c 0d0a 2020 2020 2020  y_name",..      
-000043f0: 2020 2020 2020 6d61 726b 6572 3d73 6561        marker=sea
-00004400: 7263 685f 6d61 726b 6572 2c0d 0a20 2020  rch_marker,..   
-00004410: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
-00004420: 6966 206b 7761 7267 732e 6765 7428 2273  if kwargs.get("s
-00004430: 6561 7263 685f 6374 726c 2229 3a0d 0a20  earch_ctrl"):.. 
-00004440: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00004450: 6164 645f 636f 6e74 726f 6c28 7365 6172  add_control(sear
-00004460: 6368 290d 0a0d 0a20 2020 2020 2020 2069  ch)....        i
-00004470: 6620 6b77 6172 6773 2e67 6574 2822 7a6f  f kwargs.get("zo
-00004480: 6f6d 5f63 7472 6c22 293a 0d0a 2020 2020  om_ctrl"):..    
-00004490: 2020 2020 2020 2020 7365 6c66 2e61 6464          self.add
-000044a0: 5f63 6f6e 7472 6f6c 2869 7079 6c65 6166  _control(ipyleaf
-000044b0: 6c65 742e 5a6f 6f6d 436f 6e74 726f 6c28  let.ZoomControl(
-000044c0: 706f 7369 7469 6f6e 3d22 746f 706c 6566  position="toplef
-000044d0: 7422 2929 0d0a 0d0a 2020 2020 2020 2020  t"))....        
-000044e0: 6966 206b 7761 7267 732e 6765 7428 226c  if kwargs.get("l
-000044f0: 6179 6572 5f63 7472 6c22 293a 0d0a 2020  ayer_ctrl"):..  
-00004500: 2020 2020 2020 2020 2020 6c61 7965 725f            layer_
-00004510: 636f 6e74 726f 6c20 3d20 6970 796c 6561  control = ipylea
-00004520: 666c 6574 2e4c 6179 6572 7343 6f6e 7472  flet.LayersContr
-00004530: 6f6c 2870 6f73 6974 696f 6e3d 2274 6f70  ol(position="top
-00004540: 7269 6768 7422 290d 0a20 2020 2020 2020  right")..       
-00004550: 2020 2020 2073 656c 662e 6c61 7965 725f       self.layer_
-00004560: 636f 6e74 726f 6c20 3d20 6c61 7965 725f  control = layer_
-00004570: 636f 6e74 726f 6c0d 0a20 2020 2020 2020  control..       
-00004580: 2020 2020 2073 656c 662e 6164 645f 636f       self.add_co
-00004590: 6e74 726f 6c28 6c61 7965 725f 636f 6e74  ntrol(layer_cont
-000045a0: 726f 6c29 0d0a 0d0a 2020 2020 2020 2020  rol)....        
-000045b0: 6966 206b 7761 7267 732e 6765 7428 2273  if kwargs.get("s
-000045c0: 6361 6c65 5f63 7472 6c22 293a 0d0a 2020  cale_ctrl"):..  
-000045d0: 2020 2020 2020 2020 2020 7363 616c 6520            scale 
-000045e0: 3d20 6970 796c 6561 666c 6574 2e53 6361  = ipyleaflet.Sca
-000045f0: 6c65 436f 6e74 726f 6c28 706f 7369 7469  leControl(positi
-00004600: 6f6e 3d22 626f 7474 6f6d 6c65 6674 2229  on="bottomleft")
-00004610: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-00004620: 6c66 2e73 6361 6c65 5f63 6f6e 7472 6f6c  lf.scale_control
-00004630: 203d 2073 6361 6c65 0d0a 2020 2020 2020   = scale..      
-00004640: 2020 2020 2020 7365 6c66 2e61 6464 5f63        self.add_c
-00004650: 6f6e 7472 6f6c 2873 6361 6c65 290d 0a0d  ontrol(scale)...
-00004660: 0a20 2020 2020 2020 2069 6620 6b77 6172  .        if kwar
-00004670: 6773 2e67 6574 2822 6675 6c6c 7363 7265  gs.get("fullscre
-00004680: 656e 5f63 7472 6c22 293a 0d0a 2020 2020  en_ctrl"):..    
-00004690: 2020 2020 2020 2020 6675 6c6c 7363 7265          fullscre
-000046a0: 656e 203d 2069 7079 6c65 6166 6c65 742e  en = ipyleaflet.
-000046b0: 4675 6c6c 5363 7265 656e 436f 6e74 726f  FullScreenContro
-000046c0: 6c28 290d 0a20 2020 2020 2020 2020 2020  l()..           
-000046d0: 2073 656c 662e 6675 6c6c 7363 7265 656e   self.fullscreen
-000046e0: 5f63 6f6e 7472 6f6c 203d 2066 756c 6c73  _control = fulls
-000046f0: 6372 6565 6e0d 0a20 2020 2020 2020 2020  creen..         
-00004700: 2020 2073 656c 662e 6164 645f 636f 6e74     self.add_cont
-00004710: 726f 6c28 6675 6c6c 7363 7265 656e 290d  rol(fullscreen).
-00004720: 0a0d 0a20 2020 2020 2020 2069 6620 6b77  ...        if kw
-00004730: 6172 6773 2e67 6574 2822 6d65 6173 7572  args.get("measur
-00004740: 655f 6374 726c 2229 3a0d 0a20 2020 2020  e_ctrl"):..     
-00004750: 2020 2020 2020 206d 6561 7375 7265 203d         measure =
-00004760: 2069 7079 6c65 6166 6c65 742e 4d65 6173   ipyleaflet.Meas
-00004770: 7572 6543 6f6e 7472 6f6c 280d 0a20 2020  ureControl(..   
-00004780: 2020 2020 2020 2020 2020 2020 2070 6f73               pos
-00004790: 6974 696f 6e3d 2262 6f74 746f 6d6c 6566  ition="bottomlef
-000047a0: 7422 2c0d 0a20 2020 2020 2020 2020 2020  t",..           
-000047b0: 2020 2020 2061 6374 6976 655f 636f 6c6f       active_colo
-000047c0: 723d 226f 7261 6e67 6522 2c0d 0a20 2020  r="orange",..   
-000047d0: 2020 2020 2020 2020 2020 2020 2070 7269               pri
-000047e0: 6d61 7279 5f6c 656e 6774 685f 756e 6974  mary_length_unit
-000047f0: 3d22 6b69 6c6f 6d65 7465 7273 222c 0d0a  ="kilometers",..
-00004800: 2020 2020 2020 2020 2020 2020 290d 0a20              ).. 
-00004810: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00004820: 6d65 6173 7572 655f 636f 6e74 726f 6c20  measure_control 
-00004830: 3d20 6d65 6173 7572 650d 0a20 2020 2020  = measure..     
-00004840: 2020 2020 2020 2073 656c 662e 6164 645f         self.add_
-00004850: 636f 6e74 726f 6c28 6d65 6173 7572 6529  control(measure)
-00004860: 0d0a 0d0a 2020 2020 2020 2020 6966 206b  ....        if k
-00004870: 7761 7267 732e 6765 7428 2261 6464 5f67  wargs.get("add_g
-00004880: 6f6f 676c 655f 6d61 7022 293a 0d0a 2020  oogle_map"):..  
-00004890: 2020 2020 2020 2020 2020 7365 6c66 2e61            self.a
-000048a0: 6464 5f6c 6179 6572 2862 6173 656d 6170  dd_layer(basemap
-000048b0: 5f74 696c 6573 5b22 524f 4144 4d41 5022  _tiles["ROADMAP"
-000048c0: 5d29 0d0a 0d0a 2020 2020 2020 2020 6966  ])....        if
-000048d0: 206b 7761 7267 732e 6765 7428 2261 7474   kwargs.get("att
-000048e0: 7269 6275 7469 6f6e 5f63 7472 6c22 293a  ribution_ctrl"):
-000048f0: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-00004900: 6c66 2e61 6464 5f63 6f6e 7472 6f6c 2869  lf.add_control(i
-00004910: 7079 6c65 6166 6c65 742e 4174 7472 6962  pyleaflet.Attrib
-00004920: 7574 696f 6e43 6f6e 7472 6f6c 2870 6f73  utionControl(pos
-00004930: 6974 696f 6e3d 2262 6f74 746f 6d72 6967  ition="bottomrig
-00004940: 6874 2229 290d 0a0d 0a20 2020 2020 2020  ht"))....       
-00004950: 2064 7261 775f 636f 6e74 726f 6c20 3d20   draw_control = 
-00004960: 6970 796c 6561 666c 6574 2e44 7261 7743  ipyleaflet.DrawC
-00004970: 6f6e 7472 6f6c 280d 0a20 2020 2020 2020  ontrol(..       
-00004980: 2020 2020 206d 6172 6b65 723d 7b22 7368       marker={"sh
-00004990: 6170 654f 7074 696f 6e73 223a 207b 2263  apeOptions": {"c
-000049a0: 6f6c 6f72 223a 2022 2333 3338 3866 6622  olor": "#3388ff"
-000049b0: 7d7d 2c0d 0a20 2020 2020 2020 2020 2020  }},..           
-000049c0: 2072 6563 7461 6e67 6c65 3d7b 2273 6861   rectangle={"sha
-000049d0: 7065 4f70 7469 6f6e 7322 3a20 7b22 636f  peOptions": {"co
-000049e0: 6c6f 7222 3a20 2223 3333 3838 6666 227d  lor": "#3388ff"}
-000049f0: 7d2c 0d0a 2020 2020 2020 2020 2020 2020  },..            
-00004a00: 6369 7263 6c65 3d7b 2273 6861 7065 4f70  circle={"shapeOp
-00004a10: 7469 6f6e 7322 3a20 7b22 636f 6c6f 7222  tions": {"color"
-00004a20: 3a20 2223 3333 3838 6666 227d 7d2c 0d0a  : "#3388ff"}},..
-00004a30: 2020 2020 2020 2020 2020 2020 6369 7263              circ
-00004a40: 6c65 6d61 726b 6572 3d7b 7d2c 0d0a 2020  lemarker={},..  
-00004a50: 2020 2020 2020 2020 2020 6564 6974 3d54            edit=T
-00004a60: 7275 652c 0d0a 2020 2020 2020 2020 2020  rue,..          
-00004a70: 2020 7265 6d6f 7665 3d54 7275 652c 0d0a    remove=True,..
-00004a80: 2020 2020 2020 2020 290d 0a0d 0a20 2020          )....   
-00004a90: 2020 2020 2064 7261 775f 636f 6e74 726f       draw_contro
-00004aa0: 6c5f 6c69 7465 203d 2069 7079 6c65 6166  l_lite = ipyleaf
-00004ab0: 6c65 742e 4472 6177 436f 6e74 726f 6c28  let.DrawControl(
-00004ac0: 0d0a 2020 2020 2020 2020 2020 2020 6d61  ..            ma
-00004ad0: 726b 6572 3d7b 7d2c 0d0a 2020 2020 2020  rker={},..      
-00004ae0: 2020 2020 2020 7265 6374 616e 676c 653d        rectangle=
-00004af0: 7b22 7368 6170 654f 7074 696f 6e73 223a  {"shapeOptions":
-00004b00: 207b 2263 6f6c 6f72 223a 2022 2333 3338   {"color": "#338
-00004b10: 3866 6622 7d7d 2c0d 0a20 2020 2020 2020  8ff"}},..       
-00004b20: 2020 2020 2063 6972 636c 653d 7b22 7368       circle={"sh
-00004b30: 6170 654f 7074 696f 6e73 223a 207b 2263  apeOptions": {"c
-00004b40: 6f6c 6f72 223a 2022 2333 3338 3866 6622  olor": "#3388ff"
-00004b50: 7d7d 2c0d 0a20 2020 2020 2020 2020 2020  }},..           
-00004b60: 2063 6972 636c 656d 6172 6b65 723d 7b7d   circlemarker={}
-00004b70: 2c0d 0a20 2020 2020 2020 2020 2020 2070  ,..            p
-00004b80: 6f6c 796c 696e 653d 7b7d 2c0d 0a20 2020  olyline={},..   
-00004b90: 2020 2020 2020 2020 2070 6f6c 7967 6f6e           polygon
-00004ba0: 3d7b 7d2c 0d0a 2020 2020 2020 2020 2020  ={},..          
-00004bb0: 2020 6564 6974 3d46 616c 7365 2c0d 0a20    edit=False,.. 
-00004bc0: 2020 2020 2020 2020 2020 2072 656d 6f76             remov
-00004bd0: 653d 4661 6c73 652c 0d0a 2020 2020 2020  e=False,..      
-00004be0: 2020 290d 0a0d 0a20 2020 2020 2020 2023    )....        #
-00004bf0: 2048 616e 646c 6573 2064 7261 7720 6576   Handles draw ev
-00004c00: 656e 7473 0d0a 2020 2020 2020 2020 6465  ents..        de
-00004c10: 6620 6861 6e64 6c65 5f64 7261 7728 7461  f handle_draw(ta
-00004c20: 7267 6574 2c20 6163 7469 6f6e 2c20 6765  rget, action, ge
-00004c30: 6f5f 6a73 6f6e 293a 0d0a 2020 2020 2020  o_json):..      
-00004c40: 2020 2020 2020 7472 793a 0d0a 2020 2020        try:..    
-00004c50: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00004c60: 2e72 6f69 5f73 7461 7274 203d 2054 7275  .roi_start = Tru
-00004c70: 650d 0a20 2020 2020 2020 2020 2020 2020  e..             
-00004c80: 2020 2067 656f 6d20 3d20 6765 6f6a 736f     geom = geojso
-00004c90: 6e5f 746f 5f65 6528 6765 6f5f 6a73 6f6e  n_to_ee(geo_json
-00004ca0: 2c20 4661 6c73 6529 0d0a 2020 2020 2020  , False)..      
-00004cb0: 2020 2020 2020 2020 2020 7365 6c66 2e75            self.u
-00004cc0: 7365 725f 726f 6920 3d20 6765 6f6d 0d0a  ser_roi = geom..
-00004cd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004ce0: 6665 6174 7572 6520 3d20 6565 2e46 6561  feature = ee.Fea
-00004cf0: 7475 7265 2867 656f 6d29 0d0a 2020 2020  ture(geom)..    
-00004d00: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00004d10: 2e64 7261 775f 6c61 7374 5f6a 736f 6e20  .draw_last_json 
-00004d20: 3d20 6765 6f5f 6a73 6f6e 0d0a 2020 2020  = geo_json..    
-00004d30: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00004d40: 2e64 7261 775f 6c61 7374 5f66 6561 7475  .draw_last_featu
-00004d50: 7265 203d 2066 6561 7475 7265 0d0a 2020  re = feature..  
-00004d60: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00004d70: 2061 6374 696f 6e20 3d3d 2022 6465 6c65   action == "dele
-00004d80: 7465 6422 2061 6e64 206c 656e 2873 656c  ted" and len(sel
-00004d90: 662e 6472 6177 5f66 6561 7475 7265 7329  f.draw_features)
-00004da0: 203e 2030 3a0d 0a20 2020 2020 2020 2020   > 0:..         
-00004db0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00004dc0: 6472 6177 5f66 6561 7475 7265 732e 7265  draw_features.re
-00004dd0: 6d6f 7665 2866 6561 7475 7265 290d 0a20  move(feature).. 
-00004de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004df0: 2020 2073 656c 662e 6472 6177 5f63 6f75     self.draw_cou
-00004e00: 6e74 202d 3d20 310d 0a20 2020 2020 2020  nt -= 1..       
-00004e10: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
-00004e20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004e30: 2020 2020 7365 6c66 2e64 7261 775f 6665      self.draw_fe
-00004e40: 6174 7572 6573 2e61 7070 656e 6428 6665  atures.append(fe
-00004e50: 6174 7572 6529 0d0a 2020 2020 2020 2020  ature)..        
-00004e60: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00004e70: 2e64 7261 775f 636f 756e 7420 2b3d 2031  .draw_count += 1
-00004e80: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00004e90: 2020 636f 6c6c 6563 7469 6f6e 203d 2065    collection = e
-00004ea0: 652e 4665 6174 7572 6543 6f6c 6c65 6374  e.FeatureCollect
-00004eb0: 696f 6e28 7365 6c66 2e64 7261 775f 6665  ion(self.draw_fe
-00004ec0: 6174 7572 6573 290d 0a20 2020 2020 2020  atures)..       
-00004ed0: 2020 2020 2020 2020 2073 656c 662e 7573           self.us
-00004ee0: 6572 5f72 6f69 7320 3d20 636f 6c6c 6563  er_rois = collec
-00004ef0: 7469 6f6e 0d0a 2020 2020 2020 2020 2020  tion..          
-00004f00: 2020 2020 2020 6565 5f64 7261 775f 6c61        ee_draw_la
-00004f10: 7965 7220 3d20 6565 5f74 696c 655f 6c61  yer = ee_tile_la
-00004f20: 7965 7228 0d0a 2020 2020 2020 2020 2020  yer(..          
-00004f30: 2020 2020 2020 2020 2020 636f 6c6c 6563            collec
-00004f40: 7469 6f6e 2c20 7b22 636f 6c6f 7222 3a20  tion, {"color": 
-00004f50: 2262 6c75 6522 7d2c 2022 4472 6177 6e20  "blue"}, "Drawn 
-00004f60: 4665 6174 7572 6573 222c 2046 616c 7365  Features", False
-00004f70: 2c20 302e 350d 0a20 2020 2020 2020 2020  , 0.5..         
-00004f80: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
-00004f90: 2020 2020 2020 2020 2020 6472 6177 5f6c            draw_l
-00004fa0: 6179 6572 5f69 6e64 6578 203d 2073 656c  ayer_index = sel
-00004fb0: 662e 6669 6e64 5f6c 6179 6572 5f69 6e64  f.find_layer_ind
-00004fc0: 6578 2822 4472 6177 6e20 4665 6174 7572  ex("Drawn Featur
-00004fd0: 6573 2229 0d0a 0d0a 2020 2020 2020 2020  es")....        
-00004fe0: 2020 2020 2020 2020 6966 2064 7261 775f          if draw_
-00004ff0: 6c61 7965 725f 696e 6465 7820 3d3d 202d  layer_index == -
-00005000: 313a 0d0a 2020 2020 2020 2020 2020 2020  1:..            
-00005010: 2020 2020 2020 2020 7365 6c66 2e61 6464          self.add
-00005020: 5f6c 6179 6572 2865 655f 6472 6177 5f6c  _layer(ee_draw_l
-00005030: 6179 6572 290d 0a20 2020 2020 2020 2020  ayer)..         
-00005040: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00005050: 6472 6177 5f6c 6179 6572 203d 2065 655f  draw_layer = ee_
-00005060: 6472 6177 5f6c 6179 6572 0d0a 2020 2020  draw_layer..    
-00005070: 2020 2020 2020 2020 2020 2020 656c 7365              else
-00005080: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00005090: 2020 2020 2020 2073 656c 662e 7375 6273         self.subs
-000050a0: 7469 7475 7465 5f6c 6179 6572 2873 656c  titute_layer(sel
-000050b0: 662e 6472 6177 5f6c 6179 6572 2c20 6565  f.draw_layer, ee
-000050c0: 5f64 7261 775f 6c61 7965 7229 0d0a 2020  _draw_layer)..  
-000050d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000050e0: 2020 7365 6c66 2e64 7261 775f 6c61 7965    self.draw_laye
-000050f0: 7220 3d20 6565 5f64 7261 775f 6c61 7965  r = ee_draw_laye
-00005100: 720d 0a20 2020 2020 2020 2020 2020 2020  r..             
-00005110: 2020 2073 656c 662e 726f 695f 656e 6420     self.roi_end 
-00005120: 3d20 5472 7565 0d0a 2020 2020 2020 2020  = True..        
-00005130: 2020 2020 2020 2020 7365 6c66 2e72 6f69          self.roi
-00005140: 5f73 7461 7274 203d 2046 616c 7365 0d0a  _start = False..
-00005150: 2020 2020 2020 2020 2020 2020 6578 6365              exce
-00005160: 7074 2045 7863 6570 7469 6f6e 2061 7320  pt Exception as 
-00005170: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-00005180: 2020 2020 7365 6c66 2e64 7261 775f 636f      self.draw_co
-00005190: 756e 7420 3d20 300d 0a20 2020 2020 2020  unt = 0..       
-000051a0: 2020 2020 2020 2020 2073 656c 662e 6472           self.dr
-000051b0: 6177 5f66 6561 7475 7265 7320 3d20 5b5d  aw_features = []
-000051c0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000051d0: 2020 7365 6c66 2e64 7261 775f 6c61 7374    self.draw_last
-000051e0: 5f66 6561 7475 7265 203d 204e 6f6e 650d  _feature = None.
-000051f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00005200: 2073 656c 662e 6472 6177 5f6c 6179 6572   self.draw_layer
-00005210: 203d 204e 6f6e 650d 0a20 2020 2020 2020   = None..       
-00005220: 2020 2020 2020 2020 2073 656c 662e 7573           self.us
-00005230: 6572 5f72 6f69 203d 204e 6f6e 650d 0a20  er_roi = None.. 
-00005240: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00005250: 656c 662e 726f 695f 7374 6172 7420 3d20  elf.roi_start = 
-00005260: 4661 6c73 650d 0a20 2020 2020 2020 2020  False..         
-00005270: 2020 2020 2020 2073 656c 662e 726f 695f         self.roi_
-00005280: 656e 6420 3d20 4661 6c73 650d 0a20 2020  end = False..   
-00005290: 2020 2020 2020 2020 2020 2020 2070 7269               pri
-000052a0: 6e74 2822 5468 6572 6520 7761 7320 616e  nt("There was an
-000052b0: 2065 7272 6f72 2063 7265 6174 696e 6720   error creating 
-000052c0: 4561 7274 6820 456e 6769 6e65 2046 6561  Earth Engine Fea
-000052d0: 7475 7265 2e22 290d 0a20 2020 2020 2020  ture.")..       
-000052e0: 2020 2020 2020 2020 2072 6169 7365 2045           raise E
-000052f0: 7863 6570 7469 6f6e 2865 290d 0a0d 0a20  xception(e).... 
-00005300: 2020 2020 2020 2064 7261 775f 636f 6e74         draw_cont
-00005310: 726f 6c2e 6f6e 5f64 7261 7728 6861 6e64  rol.on_draw(hand
-00005320: 6c65 5f64 7261 7729 0d0a 2020 2020 2020  le_draw)..      
-00005330: 2020 6966 206b 7761 7267 732e 6765 7428    if kwargs.get(
-00005340: 2264 7261 775f 6374 726c 2229 3a0d 0a20  "draw_ctrl"):.. 
-00005350: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00005360: 6164 645f 636f 6e74 726f 6c28 6472 6177  add_control(draw
-00005370: 5f63 6f6e 7472 6f6c 290d 0a20 2020 2020  _control)..     
-00005380: 2020 2073 656c 662e 6472 6177 5f63 6f6e     self.draw_con
-00005390: 7472 6f6c 203d 2064 7261 775f 636f 6e74  trol = draw_cont
-000053a0: 726f 6c0d 0a20 2020 2020 2020 2073 656c  rol..        sel
-000053b0: 662e 6472 6177 5f63 6f6e 7472 6f6c 5f6c  f.draw_control_l
-000053c0: 6974 6520 3d20 6472 6177 5f63 6f6e 7472  ite = draw_contr
-000053d0: 6f6c 5f6c 6974 650d 0a0d 0a20 2020 2020  ol_lite....     
-000053e0: 2020 2023 2044 726f 7064 6f77 6e20 7769     # Dropdown wi
-000053f0: 6467 6574 2066 6f72 2070 6c6f 7474 696e  dget for plottin
-00005400: 670d 0a20 2020 2020 2020 2073 656c 662e  g..        self.
-00005410: 706c 6f74 5f64 726f 7064 6f77 6e5f 636f  plot_dropdown_co
-00005420: 6e74 726f 6c20 3d20 4e6f 6e65 0d0a 2020  ntrol = None..  
-00005430: 2020 2020 2020 7365 6c66 2e70 6c6f 745f        self.plot_
-00005440: 6472 6f70 646f 776e 5f77 6964 6765 7420  dropdown_widget 
-00005450: 3d20 4e6f 6e65 0d0a 2020 2020 2020 2020  = None..        
-00005460: 7365 6c66 2e70 6c6f 745f 6f70 7469 6f6e  self.plot_option
-00005470: 7320 3d20 7b7d 0d0a 2020 2020 2020 2020  s = {}..        
-00005480: 7365 6c66 2e70 6c6f 745f 6d61 726b 6572  self.plot_marker
-00005490: 5f63 6c75 7374 6572 203d 2069 7079 6c65  _cluster = ipyle
-000054a0: 6166 6c65 742e 4d61 726b 6572 436c 7573  aflet.MarkerClus
-000054b0: 7465 7228 6e61 6d65 3d22 4d61 726b 6572  ter(name="Marker
-000054c0: 2043 6c75 7374 6572 2229 0d0a 2020 2020   Cluster")..    
-000054d0: 2020 2020 7365 6c66 2e70 6c6f 745f 636f      self.plot_co
-000054e0: 6f72 6469 6e61 7465 7320 3d20 5b5d 0d0a  ordinates = []..
-000054f0: 2020 2020 2020 2020 7365 6c66 2e70 6c6f          self.plo
-00005500: 745f 6d61 726b 6572 7320 3d20 5b5d 0d0a  t_markers = []..
-00005510: 2020 2020 2020 2020 7365 6c66 2e70 6c6f          self.plo
-00005520: 745f 6c61 7374 5f63 6c69 636b 203d 205b  t_last_click = [
-00005530: 5d0d 0a20 2020 2020 2020 2073 656c 662e  ]..        self.
-00005540: 706c 6f74 5f61 6c6c 5f63 6c69 636b 7320  plot_all_clicks 
-00005550: 3d20 5b5d 0d0a 2020 2020 2020 2020 7365  = []..        se
-00005560: 6c66 2e70 6c6f 745f 6368 6563 6b65 6420  lf.plot_checked 
-00005570: 3d20 4661 6c73 650d 0a20 2020 2020 2020  = False..       
-00005580: 2073 656c 662e 696e 7370 6563 746f 725f   self.inspector_
-00005590: 6368 6563 6b65 6420 3d20 4661 6c73 650d  checked = False.
-000055a0: 0a0d 0a20 2020 2020 2020 2069 6e73 7065  ...        inspe
-000055b0: 6374 6f72 5f6f 7574 7075 7420 3d20 7769  ctor_output = wi
-000055c0: 6467 6574 732e 4f75 7470 7574 286c 6179  dgets.Output(lay
-000055d0: 6f75 743d 7b22 626f 7264 6572 223a 2022  out={"border": "
-000055e0: 3170 7820 736f 6c69 6420 626c 6163 6b22  1px solid black"
-000055f0: 7d29 0d0a 2020 2020 2020 2020 696e 7370  })..        insp
-00005600: 6563 746f 725f 6f75 7470 7574 5f63 6f6e  ector_output_con
-00005610: 7472 6f6c 203d 2069 7079 6c65 6166 6c65  trol = ipyleafle
-00005620: 742e 5769 6467 6574 436f 6e74 726f 6c28  t.WidgetControl(
-00005630: 0d0a 2020 2020 2020 2020 2020 2020 7769  ..            wi
-00005640: 6467 6574 3d69 6e73 7065 6374 6f72 5f6f  dget=inspector_o
-00005650: 7574 7075 742c 2070 6f73 6974 696f 6e3d  utput, position=
-00005660: 2274 6f70 7269 6768 7422 0d0a 2020 2020  "topright"..    
-00005670: 2020 2020 290d 0a20 2020 2020 2020 2074      )..        t
-00005680: 6f6f 6c5f 6f75 7470 7574 203d 2077 6964  ool_output = wid
-00005690: 6765 7473 2e4f 7574 7075 7428 290d 0a20  gets.Output().. 
-000056a0: 2020 2020 2020 2073 656c 662e 746f 6f6c         self.tool
-000056b0: 5f6f 7574 7075 7420 3d20 746f 6f6c 5f6f  _output = tool_o
-000056c0: 7574 7075 740d 0a20 2020 2020 2020 2074  utput..        t
-000056d0: 6f6f 6c5f 6f75 7470 7574 2e63 6c65 6172  ool_output.clear
-000056e0: 5f6f 7574 7075 7428 7761 6974 3d54 7275  _output(wait=Tru
-000056f0: 6529 0d0a 2020 2020 2020 2020 7361 7665  e)..        save
-00005700: 5f6d 6170 5f77 6964 6765 7420 3d20 7769  _map_widget = wi
-00005710: 6467 6574 732e 5642 6f78 2829 0d0a 0d0a  dgets.VBox()....
-00005720: 2020 2020 2020 2020 7361 7665 5f74 7970          save_typ
-00005730: 6520 3d20 7769 6467 6574 732e 546f 6767  e = widgets.Togg
-00005740: 6c65 4275 7474 6f6e 7328 0d0a 2020 2020  leButtons(..    
-00005750: 2020 2020 2020 2020 6f70 7469 6f6e 733d          options=
-00005760: 5b22 4854 4d4c 222c 2022 504e 4722 2c20  ["HTML", "PNG", 
-00005770: 224a 5047 225d 2c0d 0a20 2020 2020 2020  "JPG"],..       
-00005780: 2020 2020 2074 6f6f 6c74 6970 733d 5b0d       tooltips=[.
-00005790: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000057a0: 2022 5361 7665 2074 6865 206d 6170 2061   "Save the map a
-000057b0: 7320 616e 2048 544d 4c20 6669 6c65 222c  s an HTML file",
-000057c0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000057d0: 2020 2254 616b 6520 6120 7363 7265 656e    "Take a screen
-000057e0: 7368 6f74 2061 6e64 2073 6176 6520 6173  shot and save as
-000057f0: 2061 2050 4e47 2066 696c 6522 2c0d 0a20   a PNG file",.. 
-00005800: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00005810: 5461 6b65 2061 2073 6372 6565 6e73 686f  Take a screensho
-00005820: 7420 616e 6420 7361 7665 2061 7320 6120  t and save as a 
-00005830: 4a50 4720 6669 6c65 222c 0d0a 2020 2020  JPG file",..    
-00005840: 2020 2020 2020 2020 5d2c 0d0a 2020 2020          ],..    
-00005850: 2020 2020 290d 0a0d 0a20 2020 2020 2020      )....       
-00005860: 2066 696c 655f 6368 6f6f 7365 7220 3d20   file_chooser = 
-00005870: 4669 6c65 4368 6f6f 7365 7228 6f73 2e67  FileChooser(os.g
-00005880: 6574 6377 6428 292c 2073 616e 6462 6f78  etcwd(), sandbox
-00005890: 5f70 6174 683d 7365 6c66 2e73 616e 6462  _path=self.sandb
-000058a0: 6f78 5f70 6174 6829 0d0a 2020 2020 2020  ox_path)..      
-000058b0: 2020 6669 6c65 5f63 686f 6f73 6572 2e64    file_chooser.d
-000058c0: 6566 6175 6c74 5f66 696c 656e 616d 6520  efault_filename 
-000058d0: 3d20 226d 795f 6d61 702e 6874 6d6c 220d  = "my_map.html".
-000058e0: 0a20 2020 2020 2020 2066 696c 655f 6368  .        file_ch
-000058f0: 6f6f 7365 722e 7573 655f 6469 725f 6963  ooser.use_dir_ic
-00005900: 6f6e 7320 3d20 5472 7565 0d0a 0d0a 2020  ons = True....  
-00005910: 2020 2020 2020 6f6b 5f63 616e 6365 6c20        ok_cancel 
-00005920: 3d20 7769 6467 6574 732e 546f 6767 6c65  = widgets.Toggle
-00005930: 4275 7474 6f6e 7328 0d0a 2020 2020 2020  Buttons(..      
-00005940: 2020 2020 2020 7661 6c75 653d 4e6f 6e65        value=None
-00005950: 2c0d 0a20 2020 2020 2020 2020 2020 206f  ,..            o
-00005960: 7074 696f 6e73 3d5b 224f 4b22 2c20 2243  ptions=["OK", "C
-00005970: 616e 6365 6c22 5d2c 0d0a 2020 2020 2020  ancel"],..      
-00005980: 2020 2020 2020 746f 6f6c 7469 7073 3d5b        tooltips=[
-00005990: 224f 4b22 2c20 2243 616e 6365 6c22 5d2c  "OK", "Cancel"],
-000059a0: 0d0a 2020 2020 2020 2020 2020 2020 6275  ..            bu
-000059b0: 7474 6f6e 5f73 7479 6c65 3d22 7072 696d  tton_style="prim
-000059c0: 6172 7922 2c0d 0a20 2020 2020 2020 2029  ary",..        )
-000059d0: 0d0a 0d0a 2020 2020 2020 2020 6465 6620  ....        def 
-000059e0: 7361 7665 5f74 7970 655f 6368 616e 6765  save_type_change
-000059f0: 6428 6368 616e 6765 293a 0d0a 2020 2020  d(change):..    
-00005a00: 2020 2020 2020 2020 6f6b 5f63 616e 6365          ok_cance
-00005a10: 6c2e 7661 6c75 6520 3d20 4e6f 6e65 0d0a  l.value = None..
-00005a20: 2020 2020 2020 2020 2020 2020 2320 6669              # fi
-00005a30: 6c65 5f63 686f 6f73 6572 2e72 6573 6574  le_chooser.reset
-00005a40: 2829 0d0a 2020 2020 2020 2020 2020 2020  ()..            
-00005a50: 6669 6c65 5f63 686f 6f73 6572 2e64 6566  file_chooser.def
-00005a60: 6175 6c74 5f70 6174 6820 3d20 6f73 2e67  ault_path = os.g
-00005a70: 6574 6377 6428 290d 0a20 2020 2020 2020  etcwd()..       
-00005a80: 2020 2020 2069 6620 6368 616e 6765 5b22       if change["
-00005a90: 6e65 7722 5d20 3d3d 2022 4854 4d4c 223a  new"] == "HTML":
-00005aa0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00005ab0: 2020 6669 6c65 5f63 686f 6f73 6572 2e64    file_chooser.d
-00005ac0: 6566 6175 6c74 5f66 696c 656e 616d 6520  efault_filename 
-00005ad0: 3d20 226d 795f 6d61 702e 6874 6d6c 220d  = "my_map.html".
-00005ae0: 0a20 2020 2020 2020 2020 2020 2065 6c69  .            eli
-00005af0: 6620 6368 616e 6765 5b22 6e65 7722 5d20  f change["new"] 
-00005b00: 3d3d 2022 504e 4722 3a0d 0a20 2020 2020  == "PNG":..     
-00005b10: 2020 2020 2020 2020 2020 2066 696c 655f             file_
-00005b20: 6368 6f6f 7365 722e 6465 6661 756c 745f  chooser.default_
-00005b30: 6669 6c65 6e61 6d65 203d 2022 6d79 5f6d  filename = "my_m
-00005b40: 6170 2e70 6e67 220d 0a20 2020 2020 2020  ap.png"..       
-00005b50: 2020 2020 2065 6c69 6620 6368 616e 6765       elif change
-00005b60: 5b22 6e65 7722 5d20 3d3d 2022 4a50 4722  ["new"] == "JPG"
-00005b70: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00005b80: 2020 2066 696c 655f 6368 6f6f 7365 722e     file_chooser.
-00005b90: 6465 6661 756c 745f 6669 6c65 6e61 6d65  default_filename
-00005ba0: 203d 2022 6d79 5f6d 6170 2e6a 7067 220d   = "my_map.jpg".
-00005bb0: 0a20 2020 2020 2020 2020 2020 2073 6176  .            sav
-00005bc0: 655f 6d61 705f 7769 6467 6574 2e63 6869  e_map_widget.chi
-00005bd0: 6c64 7265 6e20 3d20 5b73 6176 655f 7479  ldren = [save_ty
-00005be0: 7065 2c20 6669 6c65 5f63 686f 6f73 6572  pe, file_chooser
-00005bf0: 5d0d 0a0d 0a20 2020 2020 2020 2064 6566  ]....        def
-00005c00: 2063 686f 6f73 6572 5f63 616c 6c62 6163   chooser_callbac
-00005c10: 6b28 6368 6f6f 7365 7229 3a0d 0a20 2020  k(chooser):..   
+00003d70: 7769 7468 2073 6561 7263 685f 6f75 7470  with search_outp
+00003d80: 7574 3a0d 0a20 2020 2020 2020 2020 2020  ut:..           
+00003d90: 2020 2020 2020 2020 2020 2020 2073 6561               sea
+00003da0: 7263 685f 6f75 7470 7574 2e63 6c65 6172  rch_output.clear
+00003db0: 5f6f 7574 7075 7428 7761 6974 3d54 7275  _output(wait=Tru
+00003dc0: 6529 0d0a 2020 2020 2020 2020 2020 2020  e)..            
+00003dd0: 2020 2020 2020 2020 2020 2020 6469 7370              disp
+00003de0: 6c61 7928 7365 6172 6368 5f72 6573 756c  lay(search_resul
+00003df0: 7473 290d 0a20 2020 2020 2020 2020 2020  ts)..           
+00003e00: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
+00003e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003e20: 7769 7468 2073 6561 7263 685f 6f75 7470  with search_outp
+00003e30: 7574 3a0d 0a20 2020 2020 2020 2020 2020  ut:..           
+00003e40: 2020 2020 2020 2020 2020 2020 2073 6561               sea
+00003e50: 7263 685f 6f75 7470 7574 2e63 6c65 6172  rch_output.clear
+00003e60: 5f6f 7574 7075 7428 290d 0a20 2020 2020  _output()..     
+00003e70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003e80: 2020 2070 7269 6e74 2822 4e6f 2072 6573     print("No res
+00003e90: 756c 7473 2063 6f75 6c64 2062 6520 666f  ults could be fo
+00003ea0: 756e 642e 2229 0d0a 0d0a 2020 2020 2020  und.")....      
+00003eb0: 2020 7365 6172 6368 5f62 6f78 2e6f 6e5f    search_box.on_
+00003ec0: 7375 626d 6974 2873 6561 7263 685f 626f  submit(search_bo
+00003ed0: 785f 6361 6c6c 6261 636b 290d 0a0d 0a20  x_callback).... 
+00003ee0: 2020 2020 2020 2073 6561 7263 685f 7265         search_re
+00003ef0: 7375 6c74 5f77 6964 6765 7420 3d20 7769  sult_widget = wi
+00003f00: 6467 6574 732e 5642 6f78 285b 7365 6172  dgets.VBox([sear
+00003f10: 6368 5f74 7970 652c 2073 6561 7263 685f  ch_type, search_
+00003f20: 626f 785d 290d 0a20 2020 2020 2020 2073  box])..        s
+00003f30: 6561 7263 685f 7769 6467 6574 203d 2077  earch_widget = w
+00003f40: 6964 6765 7473 2e48 426f 7828 5b73 6561  idgets.HBox([sea
+00003f50: 7263 685f 6275 7474 6f6e 5d29 0d0a 0d0a  rch_button])....
+00003f60: 2020 2020 2020 2020 7365 6172 6368 5f65          search_e
+00003f70: 7665 6e74 203d 2069 7079 6576 656e 7473  vent = ipyevents
+00003f80: 2e45 7665 6e74 280d 0a20 2020 2020 2020  .Event(..       
+00003f90: 2020 2020 2073 6f75 7263 653d 7365 6172       source=sear
+00003fa0: 6368 5f77 6964 6765 742c 2077 6174 6368  ch_widget, watch
+00003fb0: 6564 5f65 7665 6e74 733d 5b22 6d6f 7573  ed_events=["mous
+00003fc0: 6565 6e74 6572 222c 2022 6d6f 7573 656c  eenter", "mousel
+00003fd0: 6561 7665 225d 0d0a 2020 2020 2020 2020  eave"]..        
+00003fe0: 290d 0a0d 0a20 2020 2020 2020 2064 6566  )....        def
+00003ff0: 2068 616e 646c 655f 7365 6172 6368 5f65   handle_search_e
+00004000: 7665 6e74 2865 7665 6e74 293a 0d0a 0d0a  vent(event):....
+00004010: 2020 2020 2020 2020 2020 2020 6966 2065              if e
+00004020: 7665 6e74 5b22 7479 7065 225d 203d 3d20  vent["type"] == 
+00004030: 226d 6f75 7365 656e 7465 7222 3a0d 0a20  "mouseenter":.. 
+00004040: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00004050: 6561 7263 685f 7769 6467 6574 2e63 6869  earch_widget.chi
+00004060: 6c64 7265 6e20 3d20 5b73 6561 7263 685f  ldren = [search_
+00004070: 6275 7474 6f6e 2c20 7365 6172 6368 5f72  button, search_r
+00004080: 6573 756c 745f 7769 6467 6574 5d0d 0a20  esult_widget].. 
+00004090: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+000040a0: 2073 6561 7263 685f 7479 7065 2e76 616c   search_type.val
+000040b0: 7565 203d 2022 6e61 6d65 2f61 6464 7265  ue = "name/addre
+000040c0: 7373 220d 0a20 2020 2020 2020 2020 2020  ss"..           
+000040d0: 2065 6c69 6620 6576 656e 745b 2274 7970   elif event["typ
+000040e0: 6522 5d20 3d3d 2022 6d6f 7573 656c 6561  e"] == "mouselea
+000040f0: 7665 223a 0d0a 2020 2020 2020 2020 2020  ve":..          
+00004100: 2020 2020 2020 6966 206e 6f74 2073 6561        if not sea
+00004110: 7263 685f 6275 7474 6f6e 2e76 616c 7565  rch_button.value
+00004120: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00004130: 2020 2020 2020 2073 6561 7263 685f 7769         search_wi
+00004140: 6467 6574 2e63 6869 6c64 7265 6e20 3d20  dget.children = 
+00004150: 5b73 6561 7263 685f 6275 7474 6f6e 5d0d  [search_button].
+00004160: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00004170: 2020 2020 2073 6561 7263 685f 7265 7375       search_resu
+00004180: 6c74 5f77 6964 6765 742e 6368 696c 6472  lt_widget.childr
+00004190: 656e 203d 205b 7365 6172 6368 5f74 7970  en = [search_typ
+000041a0: 652c 2073 6561 7263 685f 626f 785d 0d0a  e, search_box]..
+000041b0: 0d0a 2020 2020 2020 2020 7365 6172 6368  ..        search
+000041c0: 5f65 7665 6e74 2e6f 6e5f 646f 6d5f 6576  _event.on_dom_ev
+000041d0: 656e 7428 6861 6e64 6c65 5f73 6561 7263  ent(handle_searc
+000041e0: 685f 6576 656e 7429 0d0a 0d0a 2020 2020  h_event)....    
+000041f0: 2020 2020 6461 7461 5f63 6f6e 7472 6f6c      data_control
+00004200: 203d 2069 7079 6c65 6166 6c65 742e 5769   = ipyleaflet.Wi
+00004210: 6467 6574 436f 6e74 726f 6c28 0d0a 2020  dgetControl(..  
+00004220: 2020 2020 2020 2020 2020 7769 6467 6574            widget
+00004230: 3d73 6561 7263 685f 7769 6467 6574 2c20  =search_widget, 
+00004240: 706f 7369 7469 6f6e 3d22 746f 706c 6566  position="toplef
+00004250: 7422 0d0a 2020 2020 2020 2020 290d 0a0d  t"..        )...
+00004260: 0a20 2020 2020 2020 2069 6620 6b77 6172  .        if kwar
+00004270: 6773 2e67 6574 2822 6461 7461 5f63 7472  gs.get("data_ctr
+00004280: 6c22 293a 0d0a 2020 2020 2020 2020 2020  l"):..          
+00004290: 2020 7365 6c66 2e61 6464 5f63 6f6e 7472    self.add_contr
+000042a0: 6f6c 2863 6f6e 7472 6f6c 3d64 6174 615f  ol(control=data_
+000042b0: 636f 6e74 726f 6c29 0d0a 0d0a 2020 2020  control)....    
+000042c0: 2020 2020 7365 6172 6368 5f6d 6172 6b65      search_marke
+000042d0: 7220 3d20 6970 796c 6561 666c 6574 2e4d  r = ipyleaflet.M
+000042e0: 6172 6b65 7228 0d0a 2020 2020 2020 2020  arker(..        
+000042f0: 2020 2020 6963 6f6e 3d69 7079 6c65 6166      icon=ipyleaf
+00004300: 6c65 742e 4177 6573 6f6d 6549 636f 6e28  let.AwesomeIcon(
+00004310: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00004320: 2020 6e61 6d65 3d22 6368 6563 6b22 2c20    name="check", 
+00004330: 6d61 726b 6572 5f63 6f6c 6f72 3d22 6772  marker_color="gr
+00004340: 6565 6e22 2c20 6963 6f6e 5f63 6f6c 6f72  een", icon_color
+00004350: 3d22 6461 726b 6772 6565 6e22 0d0a 2020  ="darkgreen"..  
+00004360: 2020 2020 2020 2020 2020 290d 0a20 2020            )..   
+00004370: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
+00004380: 7365 6172 6368 203d 2069 7079 6c65 6166  search = ipyleaf
+00004390: 6c65 742e 5365 6172 6368 436f 6e74 726f  let.SearchContro
+000043a0: 6c28 0d0a 2020 2020 2020 2020 2020 2020  l(..            
+000043b0: 706f 7369 7469 6f6e 3d22 746f 706c 6566  position="toplef
+000043c0: 7422 2c0d 0a20 2020 2020 2020 2020 2020  t",..           
+000043d0: 2075 726c 3d22 6874 7470 733a 2f2f 6e6f   url="https://no
+000043e0: 6d69 6e61 7469 6d2e 6f70 656e 7374 7265  minatim.openstre
+000043f0: 6574 6d61 702e 6f72 672f 7365 6172 6368  etmap.org/search
+00004400: 3f66 6f72 6d61 743d 6a73 6f6e 2671 3d7b  ?format=json&q={
+00004410: 737d 222c 0d0a 2020 2020 2020 2020 2020  s}",..          
+00004420: 2020 7a6f 6f6d 3d35 2c0d 0a20 2020 2020    zoom=5,..     
+00004430: 2020 2020 2020 2070 726f 7065 7274 795f         property_
+00004440: 6e61 6d65 3d22 6469 7370 6c61 795f 6e61  name="display_na
+00004450: 6d65 222c 0d0a 2020 2020 2020 2020 2020  me",..          
+00004460: 2020 6d61 726b 6572 3d73 6561 7263 685f    marker=search_
+00004470: 6d61 726b 6572 2c0d 0a20 2020 2020 2020  marker,..       
+00004480: 2029 0d0a 2020 2020 2020 2020 6966 206b   )..        if k
+00004490: 7761 7267 732e 6765 7428 2273 6561 7263  wargs.get("searc
+000044a0: 685f 6374 726c 2229 3a0d 0a20 2020 2020  h_ctrl"):..     
+000044b0: 2020 2020 2020 2073 656c 662e 6164 645f         self.add_
+000044c0: 636f 6e74 726f 6c28 7365 6172 6368 290d  control(search).
+000044d0: 0a0d 0a20 2020 2020 2020 2069 6620 6b77  ...        if kw
+000044e0: 6172 6773 2e67 6574 2822 7a6f 6f6d 5f63  args.get("zoom_c
+000044f0: 7472 6c22 293a 0d0a 2020 2020 2020 2020  trl"):..        
+00004500: 2020 2020 7365 6c66 2e61 6464 5f63 6f6e      self.add_con
+00004510: 7472 6f6c 2869 7079 6c65 6166 6c65 742e  trol(ipyleaflet.
+00004520: 5a6f 6f6d 436f 6e74 726f 6c28 706f 7369  ZoomControl(posi
+00004530: 7469 6f6e 3d22 746f 706c 6566 7422 2929  tion="topleft"))
+00004540: 0d0a 0d0a 2020 2020 2020 2020 6966 206b  ....        if k
+00004550: 7761 7267 732e 6765 7428 226c 6179 6572  wargs.get("layer
+00004560: 5f63 7472 6c22 293a 0d0a 2020 2020 2020  _ctrl"):..      
+00004570: 2020 2020 2020 6c61 7965 725f 636f 6e74        layer_cont
+00004580: 726f 6c20 3d20 6970 796c 6561 666c 6574  rol = ipyleaflet
+00004590: 2e4c 6179 6572 7343 6f6e 7472 6f6c 2870  .LayersControl(p
+000045a0: 6f73 6974 696f 6e3d 2274 6f70 7269 6768  osition="toprigh
+000045b0: 7422 290d 0a20 2020 2020 2020 2020 2020  t")..           
+000045c0: 2073 656c 662e 6c61 7965 725f 636f 6e74   self.layer_cont
+000045d0: 726f 6c20 3d20 6c61 7965 725f 636f 6e74  rol = layer_cont
+000045e0: 726f 6c0d 0a20 2020 2020 2020 2020 2020  rol..           
+000045f0: 2073 656c 662e 6164 645f 636f 6e74 726f   self.add_contro
+00004600: 6c28 6c61 7965 725f 636f 6e74 726f 6c29  l(layer_control)
+00004610: 0d0a 0d0a 2020 2020 2020 2020 6966 206b  ....        if k
+00004620: 7761 7267 732e 6765 7428 2273 6361 6c65  wargs.get("scale
+00004630: 5f63 7472 6c22 293a 0d0a 2020 2020 2020  _ctrl"):..      
+00004640: 2020 2020 2020 7363 616c 6520 3d20 6970        scale = ip
+00004650: 796c 6561 666c 6574 2e53 6361 6c65 436f  yleaflet.ScaleCo
+00004660: 6e74 726f 6c28 706f 7369 7469 6f6e 3d22  ntrol(position="
+00004670: 626f 7474 6f6d 6c65 6674 2229 0d0a 2020  bottomleft")..  
+00004680: 2020 2020 2020 2020 2020 7365 6c66 2e73            self.s
+00004690: 6361 6c65 5f63 6f6e 7472 6f6c 203d 2073  cale_control = s
+000046a0: 6361 6c65 0d0a 2020 2020 2020 2020 2020  cale..          
+000046b0: 2020 7365 6c66 2e61 6464 5f63 6f6e 7472    self.add_contr
+000046c0: 6f6c 2873 6361 6c65 290d 0a0d 0a20 2020  ol(scale)....   
+000046d0: 2020 2020 2069 6620 6b77 6172 6773 2e67       if kwargs.g
+000046e0: 6574 2822 6675 6c6c 7363 7265 656e 5f63  et("fullscreen_c
+000046f0: 7472 6c22 293a 0d0a 2020 2020 2020 2020  trl"):..        
+00004700: 2020 2020 6675 6c6c 7363 7265 656e 203d      fullscreen =
+00004710: 2069 7079 6c65 6166 6c65 742e 4675 6c6c   ipyleaflet.Full
+00004720: 5363 7265 656e 436f 6e74 726f 6c28 290d  ScreenControl().
+00004730: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00004740: 662e 6675 6c6c 7363 7265 656e 5f63 6f6e  f.fullscreen_con
+00004750: 7472 6f6c 203d 2066 756c 6c73 6372 6565  trol = fullscree
+00004760: 6e0d 0a20 2020 2020 2020 2020 2020 2073  n..            s
+00004770: 656c 662e 6164 645f 636f 6e74 726f 6c28  elf.add_control(
+00004780: 6675 6c6c 7363 7265 656e 290d 0a0d 0a20  fullscreen).... 
+00004790: 2020 2020 2020 2069 6620 6b77 6172 6773         if kwargs
+000047a0: 2e67 6574 2822 6d65 6173 7572 655f 6374  .get("measure_ct
+000047b0: 726c 2229 3a0d 0a20 2020 2020 2020 2020  rl"):..         
+000047c0: 2020 206d 6561 7375 7265 203d 2069 7079     measure = ipy
+000047d0: 6c65 6166 6c65 742e 4d65 6173 7572 6543  leaflet.MeasureC
+000047e0: 6f6e 7472 6f6c 280d 0a20 2020 2020 2020  ontrol(..       
+000047f0: 2020 2020 2020 2020 2070 6f73 6974 696f           positio
+00004800: 6e3d 2262 6f74 746f 6d6c 6566 7422 2c0d  n="bottomleft",.
+00004810: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00004820: 2061 6374 6976 655f 636f 6c6f 723d 226f   active_color="o
+00004830: 7261 6e67 6522 2c0d 0a20 2020 2020 2020  range",..       
+00004840: 2020 2020 2020 2020 2070 7269 6d61 7279           primary
+00004850: 5f6c 656e 6774 685f 756e 6974 3d22 6b69  _length_unit="ki
+00004860: 6c6f 6d65 7465 7273 222c 0d0a 2020 2020  lometers",..    
+00004870: 2020 2020 2020 2020 290d 0a20 2020 2020          )..     
+00004880: 2020 2020 2020 2073 656c 662e 6d65 6173         self.meas
+00004890: 7572 655f 636f 6e74 726f 6c20 3d20 6d65  ure_control = me
+000048a0: 6173 7572 650d 0a20 2020 2020 2020 2020  asure..         
+000048b0: 2020 2073 656c 662e 6164 645f 636f 6e74     self.add_cont
+000048c0: 726f 6c28 6d65 6173 7572 6529 0d0a 0d0a  rol(measure)....
+000048d0: 2020 2020 2020 2020 6966 206b 7761 7267          if kwarg
+000048e0: 732e 6765 7428 2261 6464 5f67 6f6f 676c  s.get("add_googl
+000048f0: 655f 6d61 7022 293a 0d0a 2020 2020 2020  e_map"):..      
+00004900: 2020 2020 2020 7365 6c66 2e61 6464 5f6c        self.add_l
+00004910: 6179 6572 2862 6173 656d 6170 5f74 696c  ayer(basemap_til
+00004920: 6573 5b22 524f 4144 4d41 5022 5d29 0d0a  es["ROADMAP"])..
+00004930: 0d0a 2020 2020 2020 2020 6966 206b 7761  ..        if kwa
+00004940: 7267 732e 6765 7428 2261 7474 7269 6275  rgs.get("attribu
+00004950: 7469 6f6e 5f63 7472 6c22 293a 0d0a 2020  tion_ctrl"):..  
+00004960: 2020 2020 2020 2020 2020 7365 6c66 2e61            self.a
+00004970: 6464 5f63 6f6e 7472 6f6c 2869 7079 6c65  dd_control(ipyle
+00004980: 6166 6c65 742e 4174 7472 6962 7574 696f  aflet.Attributio
+00004990: 6e43 6f6e 7472 6f6c 2870 6f73 6974 696f  nControl(positio
+000049a0: 6e3d 2262 6f74 746f 6d72 6967 6874 2229  n="bottomright")
+000049b0: 290d 0a0d 0a20 2020 2020 2020 2064 7261  )....        dra
+000049c0: 775f 636f 6e74 726f 6c20 3d20 6970 796c  w_control = ipyl
+000049d0: 6561 666c 6574 2e44 7261 7743 6f6e 7472  eaflet.DrawContr
+000049e0: 6f6c 280d 0a20 2020 2020 2020 2020 2020  ol(..           
+000049f0: 206d 6172 6b65 723d 7b22 7368 6170 654f   marker={"shapeO
+00004a00: 7074 696f 6e73 223a 207b 2263 6f6c 6f72  ptions": {"color
+00004a10: 223a 2022 2333 3338 3866 6622 7d7d 2c0d  ": "#3388ff"}},.
+00004a20: 0a20 2020 2020 2020 2020 2020 2072 6563  .            rec
+00004a30: 7461 6e67 6c65 3d7b 2273 6861 7065 4f70  tangle={"shapeOp
+00004a40: 7469 6f6e 7322 3a20 7b22 636f 6c6f 7222  tions": {"color"
+00004a50: 3a20 2223 3333 3838 6666 227d 7d2c 0d0a  : "#3388ff"}},..
+00004a60: 2020 2020 2020 2020 2020 2020 6369 7263              circ
+00004a70: 6c65 3d7b 2273 6861 7065 4f70 7469 6f6e  le={"shapeOption
+00004a80: 7322 3a20 7b22 636f 6c6f 7222 3a20 2223  s": {"color": "#
+00004a90: 3333 3838 6666 227d 7d2c 0d0a 2020 2020  3388ff"}},..    
+00004aa0: 2020 2020 2020 2020 6369 7263 6c65 6d61          circlema
+00004ab0: 726b 6572 3d7b 7d2c 0d0a 2020 2020 2020  rker={},..      
+00004ac0: 2020 2020 2020 6564 6974 3d54 7275 652c        edit=True,
+00004ad0: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
+00004ae0: 6d6f 7665 3d54 7275 652c 0d0a 2020 2020  move=True,..    
+00004af0: 2020 2020 290d 0a0d 0a20 2020 2020 2020      )....       
+00004b00: 2064 7261 775f 636f 6e74 726f 6c5f 6c69   draw_control_li
+00004b10: 7465 203d 2069 7079 6c65 6166 6c65 742e  te = ipyleaflet.
+00004b20: 4472 6177 436f 6e74 726f 6c28 0d0a 2020  DrawControl(..  
+00004b30: 2020 2020 2020 2020 2020 6d61 726b 6572            marker
+00004b40: 3d7b 7d2c 0d0a 2020 2020 2020 2020 2020  ={},..          
+00004b50: 2020 7265 6374 616e 676c 653d 7b22 7368    rectangle={"sh
+00004b60: 6170 654f 7074 696f 6e73 223a 207b 2263  apeOptions": {"c
+00004b70: 6f6c 6f72 223a 2022 2333 3338 3866 6622  olor": "#3388ff"
+00004b80: 7d7d 2c0d 0a20 2020 2020 2020 2020 2020  }},..           
+00004b90: 2063 6972 636c 653d 7b22 7368 6170 654f   circle={"shapeO
+00004ba0: 7074 696f 6e73 223a 207b 2263 6f6c 6f72  ptions": {"color
+00004bb0: 223a 2022 2333 3338 3866 6622 7d7d 2c0d  ": "#3388ff"}},.
+00004bc0: 0a20 2020 2020 2020 2020 2020 2063 6972  .            cir
+00004bd0: 636c 656d 6172 6b65 723d 7b7d 2c0d 0a20  clemarker={},.. 
+00004be0: 2020 2020 2020 2020 2020 2070 6f6c 796c             polyl
+00004bf0: 696e 653d 7b7d 2c0d 0a20 2020 2020 2020  ine={},..       
+00004c00: 2020 2020 2070 6f6c 7967 6f6e 3d7b 7d2c       polygon={},
+00004c10: 0d0a 2020 2020 2020 2020 2020 2020 6564  ..            ed
+00004c20: 6974 3d46 616c 7365 2c0d 0a20 2020 2020  it=False,..     
+00004c30: 2020 2020 2020 2072 656d 6f76 653d 4661         remove=Fa
+00004c40: 6c73 652c 0d0a 2020 2020 2020 2020 290d  lse,..        ).
+00004c50: 0a0d 0a20 2020 2020 2020 2023 2048 616e  ...        # Han
+00004c60: 646c 6573 2064 7261 7720 6576 656e 7473  dles draw events
+00004c70: 0d0a 2020 2020 2020 2020 6465 6620 6861  ..        def ha
+00004c80: 6e64 6c65 5f64 7261 7728 7461 7267 6574  ndle_draw(target
+00004c90: 2c20 6163 7469 6f6e 2c20 6765 6f5f 6a73  , action, geo_js
+00004ca0: 6f6e 293a 0d0a 2020 2020 2020 2020 2020  on):..          
+00004cb0: 2020 7472 793a 0d0a 2020 2020 2020 2020    try:..        
+00004cc0: 2020 2020 2020 2020 7365 6c66 2e72 6f69          self.roi
+00004cd0: 5f73 7461 7274 203d 2054 7275 650d 0a20  _start = True.. 
+00004ce0: 2020 2020 2020 2020 2020 2020 2020 2067                 g
+00004cf0: 656f 6d20 3d20 6765 6f6a 736f 6e5f 746f  eom = geojson_to
+00004d00: 5f65 6528 6765 6f5f 6a73 6f6e 2c20 4661  _ee(geo_json, Fa
+00004d10: 6c73 6529 0d0a 2020 2020 2020 2020 2020  lse)..          
+00004d20: 2020 2020 2020 7365 6c66 2e75 7365 725f        self.user_
+00004d30: 726f 6920 3d20 6765 6f6d 0d0a 2020 2020  roi = geom..    
+00004d40: 2020 2020 2020 2020 2020 2020 6665 6174              feat
+00004d50: 7572 6520 3d20 6565 2e46 6561 7475 7265  ure = ee.Feature
+00004d60: 2867 656f 6d29 0d0a 2020 2020 2020 2020  (geom)..        
+00004d70: 2020 2020 2020 2020 7365 6c66 2e64 7261          self.dra
+00004d80: 775f 6c61 7374 5f6a 736f 6e20 3d20 6765  w_last_json = ge
+00004d90: 6f5f 6a73 6f6e 0d0a 2020 2020 2020 2020  o_json..        
+00004da0: 2020 2020 2020 2020 7365 6c66 2e64 7261          self.dra
+00004db0: 775f 6c61 7374 5f66 6561 7475 7265 203d  w_last_feature =
+00004dc0: 2066 6561 7475 7265 0d0a 2020 2020 2020   feature..      
+00004dd0: 2020 2020 2020 2020 2020 6966 2061 6374            if act
+00004de0: 696f 6e20 3d3d 2022 6465 6c65 7465 6422  ion == "deleted"
+00004df0: 2061 6e64 206c 656e 2873 656c 662e 6472   and len(self.dr
+00004e00: 6177 5f66 6561 7475 7265 7329 203e 2030  aw_features) > 0
+00004e10: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00004e20: 2020 2020 2020 2073 656c 662e 6472 6177         self.draw
+00004e30: 5f66 6561 7475 7265 732e 7265 6d6f 7665  _features.remove
+00004e40: 2866 6561 7475 7265 290d 0a20 2020 2020  (feature)..     
+00004e50: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00004e60: 656c 662e 6472 6177 5f63 6f75 6e74 202d  elf.draw_count -
+00004e70: 3d20 310d 0a20 2020 2020 2020 2020 2020  = 1..           
+00004e80: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
+00004e90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004ea0: 7365 6c66 2e64 7261 775f 6665 6174 7572  self.draw_featur
+00004eb0: 6573 2e61 7070 656e 6428 6665 6174 7572  es.append(featur
+00004ec0: 6529 0d0a 2020 2020 2020 2020 2020 2020  e)..            
+00004ed0: 2020 2020 2020 2020 7365 6c66 2e64 7261          self.dra
+00004ee0: 775f 636f 756e 7420 2b3d 2031 0d0a 2020  w_count += 1..  
+00004ef0: 2020 2020 2020 2020 2020 2020 2020 636f                co
+00004f00: 6c6c 6563 7469 6f6e 203d 2065 652e 4665  llection = ee.Fe
+00004f10: 6174 7572 6543 6f6c 6c65 6374 696f 6e28  atureCollection(
+00004f20: 7365 6c66 2e64 7261 775f 6665 6174 7572  self.draw_featur
+00004f30: 6573 290d 0a20 2020 2020 2020 2020 2020  es)..           
+00004f40: 2020 2020 2073 656c 662e 7573 6572 5f72       self.user_r
+00004f50: 6f69 7320 3d20 636f 6c6c 6563 7469 6f6e  ois = collection
+00004f60: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00004f70: 2020 6565 5f64 7261 775f 6c61 7965 7220    ee_draw_layer 
+00004f80: 3d20 6565 5f74 696c 655f 6c61 7965 7228  = ee_tile_layer(
+00004f90: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00004fa0: 2020 2020 2020 636f 6c6c 6563 7469 6f6e        collection
+00004fb0: 2c20 7b22 636f 6c6f 7222 3a20 2262 6c75  , {"color": "blu
+00004fc0: 6522 7d2c 2022 4472 6177 6e20 4665 6174  e"}, "Drawn Feat
+00004fd0: 7572 6573 222c 2046 616c 7365 2c20 302e  ures", False, 0.
+00004fe0: 350d 0a20 2020 2020 2020 2020 2020 2020  5..             
+00004ff0: 2020 2029 0d0a 2020 2020 2020 2020 2020     )..          
+00005000: 2020 2020 2020 6472 6177 5f6c 6179 6572        draw_layer
+00005010: 5f69 6e64 6578 203d 2073 656c 662e 6669  _index = self.fi
+00005020: 6e64 5f6c 6179 6572 5f69 6e64 6578 2822  nd_layer_index("
+00005030: 4472 6177 6e20 4665 6174 7572 6573 2229  Drawn Features")
+00005040: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00005050: 2020 2020 6966 2064 7261 775f 6c61 7965      if draw_laye
+00005060: 725f 696e 6465 7820 3d3d 202d 313a 0d0a  r_index == -1:..
+00005070: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005080: 2020 2020 7365 6c66 2e61 6464 5f6c 6179      self.add_lay
+00005090: 6572 2865 655f 6472 6177 5f6c 6179 6572  er(ee_draw_layer
+000050a0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+000050b0: 2020 2020 2020 2073 656c 662e 6472 6177         self.draw
+000050c0: 5f6c 6179 6572 203d 2065 655f 6472 6177  _layer = ee_draw
+000050d0: 5f6c 6179 6572 0d0a 2020 2020 2020 2020  _layer..        
+000050e0: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
+000050f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005100: 2020 2073 656c 662e 7375 6273 7469 7475     self.substitu
+00005110: 7465 5f6c 6179 6572 2873 656c 662e 6472  te_layer(self.dr
+00005120: 6177 5f6c 6179 6572 2c20 6565 5f64 7261  aw_layer, ee_dra
+00005130: 775f 6c61 7965 7229 0d0a 2020 2020 2020  w_layer)..      
+00005140: 2020 2020 2020 2020 2020 2020 2020 7365                se
+00005150: 6c66 2e64 7261 775f 6c61 7965 7220 3d20  lf.draw_layer = 
+00005160: 6565 5f64 7261 775f 6c61 7965 720d 0a20  ee_draw_layer.. 
+00005170: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00005180: 656c 662e 726f 695f 656e 6420 3d20 5472  elf.roi_end = Tr
+00005190: 7565 0d0a 2020 2020 2020 2020 2020 2020  ue..            
+000051a0: 2020 2020 7365 6c66 2e72 6f69 5f73 7461      self.roi_sta
+000051b0: 7274 203d 2046 616c 7365 0d0a 2020 2020  rt = False..    
+000051c0: 2020 2020 2020 2020 6578 6365 7074 2045          except E
+000051d0: 7863 6570 7469 6f6e 2061 7320 653a 0d0a  xception as e:..
+000051e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000051f0: 7365 6c66 2e64 7261 775f 636f 756e 7420  self.draw_count 
+00005200: 3d20 300d 0a20 2020 2020 2020 2020 2020  = 0..           
+00005210: 2020 2020 2073 656c 662e 6472 6177 5f66       self.draw_f
+00005220: 6561 7475 7265 7320 3d20 5b5d 0d0a 2020  eatures = []..  
+00005230: 2020 2020 2020 2020 2020 2020 2020 7365                se
+00005240: 6c66 2e64 7261 775f 6c61 7374 5f66 6561  lf.draw_last_fea
+00005250: 7475 7265 203d 204e 6f6e 650d 0a20 2020  ture = None..   
+00005260: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+00005270: 662e 6472 6177 5f6c 6179 6572 203d 204e  f.draw_layer = N
+00005280: 6f6e 650d 0a20 2020 2020 2020 2020 2020  one..           
+00005290: 2020 2020 2073 656c 662e 7573 6572 5f72       self.user_r
+000052a0: 6f69 203d 204e 6f6e 650d 0a20 2020 2020  oi = None..     
+000052b0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+000052c0: 726f 695f 7374 6172 7420 3d20 4661 6c73  roi_start = Fals
+000052d0: 650d 0a20 2020 2020 2020 2020 2020 2020  e..             
+000052e0: 2020 2073 656c 662e 726f 695f 656e 6420     self.roi_end 
+000052f0: 3d20 4661 6c73 650d 0a20 2020 2020 2020  = False..       
+00005300: 2020 2020 2020 2020 2070 7269 6e74 2822           print("
+00005310: 5468 6572 6520 7761 7320 616e 2065 7272  There was an err
+00005320: 6f72 2063 7265 6174 696e 6720 4561 7274  or creating Eart
+00005330: 6820 456e 6769 6e65 2046 6561 7475 7265  h Engine Feature
+00005340: 2e22 290d 0a20 2020 2020 2020 2020 2020  .")..           
+00005350: 2020 2020 2072 6169 7365 2045 7863 6570       raise Excep
+00005360: 7469 6f6e 2865 290d 0a0d 0a20 2020 2020  tion(e)....     
+00005370: 2020 2064 7261 775f 636f 6e74 726f 6c2e     draw_control.
+00005380: 6f6e 5f64 7261 7728 6861 6e64 6c65 5f64  on_draw(handle_d
+00005390: 7261 7729 0d0a 2020 2020 2020 2020 6966  raw)..        if
+000053a0: 206b 7761 7267 732e 6765 7428 2264 7261   kwargs.get("dra
+000053b0: 775f 6374 726c 2229 3a0d 0a20 2020 2020  w_ctrl"):..     
+000053c0: 2020 2020 2020 2073 656c 662e 6164 645f         self.add_
+000053d0: 636f 6e74 726f 6c28 6472 6177 5f63 6f6e  control(draw_con
+000053e0: 7472 6f6c 290d 0a20 2020 2020 2020 2073  trol)..        s
+000053f0: 656c 662e 6472 6177 5f63 6f6e 7472 6f6c  elf.draw_control
+00005400: 203d 2064 7261 775f 636f 6e74 726f 6c0d   = draw_control.
+00005410: 0a20 2020 2020 2020 2073 656c 662e 6472  .        self.dr
+00005420: 6177 5f63 6f6e 7472 6f6c 5f6c 6974 6520  aw_control_lite 
+00005430: 3d20 6472 6177 5f63 6f6e 7472 6f6c 5f6c  = draw_control_l
+00005440: 6974 650d 0a0d 0a20 2020 2020 2020 2023  ite....        #
+00005450: 2044 726f 7064 6f77 6e20 7769 6467 6574   Dropdown widget
+00005460: 2066 6f72 2070 6c6f 7474 696e 670d 0a20   for plotting.. 
+00005470: 2020 2020 2020 2073 656c 662e 706c 6f74         self.plot
+00005480: 5f64 726f 7064 6f77 6e5f 636f 6e74 726f  _dropdown_contro
+00005490: 6c20 3d20 4e6f 6e65 0d0a 2020 2020 2020  l = None..      
+000054a0: 2020 7365 6c66 2e70 6c6f 745f 6472 6f70    self.plot_drop
+000054b0: 646f 776e 5f77 6964 6765 7420 3d20 4e6f  down_widget = No
+000054c0: 6e65 0d0a 2020 2020 2020 2020 7365 6c66  ne..        self
+000054d0: 2e70 6c6f 745f 6f70 7469 6f6e 7320 3d20  .plot_options = 
+000054e0: 7b7d 0d0a 2020 2020 2020 2020 7365 6c66  {}..        self
+000054f0: 2e70 6c6f 745f 6d61 726b 6572 5f63 6c75  .plot_marker_clu
+00005500: 7374 6572 203d 2069 7079 6c65 6166 6c65  ster = ipyleafle
+00005510: 742e 4d61 726b 6572 436c 7573 7465 7228  t.MarkerCluster(
+00005520: 6e61 6d65 3d22 4d61 726b 6572 2043 6c75  name="Marker Clu
+00005530: 7374 6572 2229 0d0a 2020 2020 2020 2020  ster")..        
+00005540: 7365 6c66 2e70 6c6f 745f 636f 6f72 6469  self.plot_coordi
+00005550: 6e61 7465 7320 3d20 5b5d 0d0a 2020 2020  nates = []..    
+00005560: 2020 2020 7365 6c66 2e70 6c6f 745f 6d61      self.plot_ma
+00005570: 726b 6572 7320 3d20 5b5d 0d0a 2020 2020  rkers = []..    
+00005580: 2020 2020 7365 6c66 2e70 6c6f 745f 6c61      self.plot_la
+00005590: 7374 5f63 6c69 636b 203d 205b 5d0d 0a20  st_click = [].. 
+000055a0: 2020 2020 2020 2073 656c 662e 706c 6f74         self.plot
+000055b0: 5f61 6c6c 5f63 6c69 636b 7320 3d20 5b5d  _all_clicks = []
+000055c0: 0d0a 2020 2020 2020 2020 7365 6c66 2e70  ..        self.p
+000055d0: 6c6f 745f 6368 6563 6b65 6420 3d20 4661  lot_checked = Fa
+000055e0: 6c73 650d 0a20 2020 2020 2020 2073 656c  lse..        sel
+000055f0: 662e 696e 7370 6563 746f 725f 6368 6563  f.inspector_chec
+00005600: 6b65 6420 3d20 4661 6c73 650d 0a0d 0a20  ked = False.... 
+00005610: 2020 2020 2020 2069 6e73 7065 6374 6f72         inspector
+00005620: 5f6f 7574 7075 7420 3d20 7769 6467 6574  _output = widget
+00005630: 732e 4f75 7470 7574 286c 6179 6f75 743d  s.Output(layout=
+00005640: 7b22 626f 7264 6572 223a 2022 3170 7820  {"border": "1px 
+00005650: 736f 6c69 6420 626c 6163 6b22 7d29 0d0a  solid black"})..
+00005660: 2020 2020 2020 2020 696e 7370 6563 746f          inspecto
+00005670: 725f 6f75 7470 7574 5f63 6f6e 7472 6f6c  r_output_control
+00005680: 203d 2069 7079 6c65 6166 6c65 742e 5769   = ipyleaflet.Wi
+00005690: 6467 6574 436f 6e74 726f 6c28 0d0a 2020  dgetControl(..  
+000056a0: 2020 2020 2020 2020 2020 7769 6467 6574            widget
+000056b0: 3d69 6e73 7065 6374 6f72 5f6f 7574 7075  =inspector_outpu
+000056c0: 742c 2070 6f73 6974 696f 6e3d 2274 6f70  t, position="top
+000056d0: 7269 6768 7422 0d0a 2020 2020 2020 2020  right"..        
+000056e0: 290d 0a20 2020 2020 2020 2074 6f6f 6c5f  )..        tool_
+000056f0: 6f75 7470 7574 203d 2077 6964 6765 7473  output = widgets
+00005700: 2e4f 7574 7075 7428 290d 0a20 2020 2020  .Output()..     
+00005710: 2020 2073 656c 662e 746f 6f6c 5f6f 7574     self.tool_out
+00005720: 7075 7420 3d20 746f 6f6c 5f6f 7574 7075  put = tool_outpu
+00005730: 740d 0a20 2020 2020 2020 2074 6f6f 6c5f  t..        tool_
+00005740: 6f75 7470 7574 2e63 6c65 6172 5f6f 7574  output.clear_out
+00005750: 7075 7428 7761 6974 3d54 7275 6529 0d0a  put(wait=True)..
+00005760: 2020 2020 2020 2020 7361 7665 5f6d 6170          save_map
+00005770: 5f77 6964 6765 7420 3d20 7769 6467 6574  _widget = widget
+00005780: 732e 5642 6f78 2829 0d0a 0d0a 2020 2020  s.VBox()....    
+00005790: 2020 2020 7361 7665 5f74 7970 6520 3d20      save_type = 
+000057a0: 7769 6467 6574 732e 546f 6767 6c65 4275  widgets.ToggleBu
+000057b0: 7474 6f6e 7328 0d0a 2020 2020 2020 2020  ttons(..        
+000057c0: 2020 2020 6f70 7469 6f6e 733d 5b22 4854      options=["HT
+000057d0: 4d4c 222c 2022 504e 4722 2c20 224a 5047  ML", "PNG", "JPG
+000057e0: 225d 2c0d 0a20 2020 2020 2020 2020 2020  "],..           
+000057f0: 2074 6f6f 6c74 6970 733d 5b0d 0a20 2020   tooltips=[..   
+00005800: 2020 2020 2020 2020 2020 2020 2022 5361               "Sa
+00005810: 7665 2074 6865 206d 6170 2061 7320 616e  ve the map as an
+00005820: 2048 544d 4c20 6669 6c65 222c 0d0a 2020   HTML file",..  
+00005830: 2020 2020 2020 2020 2020 2020 2020 2254                "T
+00005840: 616b 6520 6120 7363 7265 656e 7368 6f74  ake a screenshot
+00005850: 2061 6e64 2073 6176 6520 6173 2061 2050   and save as a P
+00005860: 4e47 2066 696c 6522 2c0d 0a20 2020 2020  NG file",..     
+00005870: 2020 2020 2020 2020 2020 2022 5461 6b65             "Take
+00005880: 2061 2073 6372 6565 6e73 686f 7420 616e   a screenshot an
+00005890: 6420 7361 7665 2061 7320 6120 4a50 4720  d save as a JPG 
+000058a0: 6669 6c65 222c 0d0a 2020 2020 2020 2020  file",..        
+000058b0: 2020 2020 5d2c 0d0a 2020 2020 2020 2020      ],..        
+000058c0: 290d 0a0d 0a20 2020 2020 2020 2066 696c  )....        fil
+000058d0: 655f 6368 6f6f 7365 7220 3d20 4669 6c65  e_chooser = File
+000058e0: 4368 6f6f 7365 7228 6f73 2e67 6574 6377  Chooser(os.getcw
+000058f0: 6428 292c 2073 616e 6462 6f78 5f70 6174  d(), sandbox_pat
+00005900: 683d 7365 6c66 2e73 616e 6462 6f78 5f70  h=self.sandbox_p
+00005910: 6174 6829 0d0a 2020 2020 2020 2020 6669  ath)..        fi
+00005920: 6c65 5f63 686f 6f73 6572 2e64 6566 6175  le_chooser.defau
+00005930: 6c74 5f66 696c 656e 616d 6520 3d20 226d  lt_filename = "m
+00005940: 795f 6d61 702e 6874 6d6c 220d 0a20 2020  y_map.html"..   
+00005950: 2020 2020 2066 696c 655f 6368 6f6f 7365       file_choose
+00005960: 722e 7573 655f 6469 725f 6963 6f6e 7320  r.use_dir_icons 
+00005970: 3d20 5472 7565 0d0a 0d0a 2020 2020 2020  = True....      
+00005980: 2020 6f6b 5f63 616e 6365 6c20 3d20 7769    ok_cancel = wi
+00005990: 6467 6574 732e 546f 6767 6c65 4275 7474  dgets.ToggleButt
+000059a0: 6f6e 7328 0d0a 2020 2020 2020 2020 2020  ons(..          
+000059b0: 2020 7661 6c75 653d 4e6f 6e65 2c0d 0a20    value=None,.. 
+000059c0: 2020 2020 2020 2020 2020 206f 7074 696f             optio
+000059d0: 6e73 3d5b 224f 4b22 2c20 2243 616e 6365  ns=["OK", "Cance
+000059e0: 6c22 5d2c 0d0a 2020 2020 2020 2020 2020  l"],..          
+000059f0: 2020 746f 6f6c 7469 7073 3d5b 224f 4b22    tooltips=["OK"
+00005a00: 2c20 2243 616e 6365 6c22 5d2c 0d0a 2020  , "Cancel"],..  
+00005a10: 2020 2020 2020 2020 2020 6275 7474 6f6e            button
+00005a20: 5f73 7479 6c65 3d22 7072 696d 6172 7922  _style="primary"
+00005a30: 2c0d 0a20 2020 2020 2020 2029 0d0a 0d0a  ,..        )....
+00005a40: 2020 2020 2020 2020 6465 6620 7361 7665          def save
+00005a50: 5f74 7970 655f 6368 616e 6765 6428 6368  _type_changed(ch
+00005a60: 616e 6765 293a 0d0a 2020 2020 2020 2020  ange):..        
+00005a70: 2020 2020 6f6b 5f63 616e 6365 6c2e 7661      ok_cancel.va
+00005a80: 6c75 6520 3d20 4e6f 6e65 0d0a 2020 2020  lue = None..    
+00005a90: 2020 2020 2020 2020 2320 6669 6c65 5f63          # file_c
+00005aa0: 686f 6f73 6572 2e72 6573 6574 2829 0d0a  hooser.reset()..
+00005ab0: 2020 2020 2020 2020 2020 2020 6669 6c65              file
+00005ac0: 5f63 686f 6f73 6572 2e64 6566 6175 6c74  _chooser.default
+00005ad0: 5f70 6174 6820 3d20 6f73 2e67 6574 6377  _path = os.getcw
+00005ae0: 6428 290d 0a20 2020 2020 2020 2020 2020  d()..           
+00005af0: 2069 6620 6368 616e 6765 5b22 6e65 7722   if change["new"
+00005b00: 5d20 3d3d 2022 4854 4d4c 223a 0d0a 2020  ] == "HTML":..  
+00005b10: 2020 2020 2020 2020 2020 2020 2020 6669                fi
+00005b20: 6c65 5f63 686f 6f73 6572 2e64 6566 6175  le_chooser.defau
+00005b30: 6c74 5f66 696c 656e 616d 6520 3d20 226d  lt_filename = "m
+00005b40: 795f 6d61 702e 6874 6d6c 220d 0a20 2020  y_map.html"..   
+00005b50: 2020 2020 2020 2020 2065 6c69 6620 6368           elif ch
+00005b60: 616e 6765 5b22 6e65 7722 5d20 3d3d 2022  ange["new"] == "
+00005b70: 504e 4722 3a0d 0a20 2020 2020 2020 2020  PNG":..         
+00005b80: 2020 2020 2020 2066 696c 655f 6368 6f6f         file_choo
+00005b90: 7365 722e 6465 6661 756c 745f 6669 6c65  ser.default_file
+00005ba0: 6e61 6d65 203d 2022 6d79 5f6d 6170 2e70  name = "my_map.p
+00005bb0: 6e67 220d 0a20 2020 2020 2020 2020 2020  ng"..           
+00005bc0: 2065 6c69 6620 6368 616e 6765 5b22 6e65   elif change["ne
+00005bd0: 7722 5d20 3d3d 2022 4a50 4722 3a0d 0a20  w"] == "JPG":.. 
+00005be0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00005bf0: 696c 655f 6368 6f6f 7365 722e 6465 6661  ile_chooser.defa
+00005c00: 756c 745f 6669 6c65 6e61 6d65 203d 2022  ult_filename = "
+00005c10: 6d79 5f6d 6170 2e6a 7067 220d 0a20 2020  my_map.jpg"..   
 00005c20: 2020 2020 2020 2020 2073 6176 655f 6d61           save_ma
 00005c30: 705f 7769 6467 6574 2e63 6869 6c64 7265  p_widget.childre
 00005c40: 6e20 3d20 5b73 6176 655f 7479 7065 2c20  n = [save_type, 
-00005c50: 6669 6c65 5f63 686f 6f73 6572 2c20 6f6b  file_chooser, ok
-00005c60: 5f63 616e 6365 6c5d 0d0a 0d0a 2020 2020  _cancel]....    
-00005c70: 2020 2020 6465 6620 6f6b 5f63 616e 6365      def ok_cance
-00005c80: 6c5f 636c 6963 6b65 6428 6368 616e 6765  l_clicked(change
-00005c90: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-00005ca0: 6966 2063 6861 6e67 655b 226e 6577 225d  if change["new"]
-00005cb0: 203d 3d20 224f 4b22 3a0d 0a20 2020 2020   == "OK":..     
-00005cc0: 2020 2020 2020 2020 2020 2066 696c 655f             file_
-00005cd0: 7061 7468 203d 2066 696c 655f 6368 6f6f  path = file_choo
-00005ce0: 7365 722e 7365 6c65 6374 6564 0d0a 2020  ser.selected..  
-00005cf0: 2020 2020 2020 2020 2020 2020 2020 6578                ex
-00005d00: 7420 3d20 6f73 2e70 6174 682e 7370 6c69  t = os.path.spli
-00005d10: 7465 7874 2866 696c 655f 7061 7468 295b  text(file_path)[
-00005d20: 315d 0d0a 2020 2020 2020 2020 2020 2020  1]..            
-00005d30: 2020 2020 6966 2073 6176 655f 7479 7065      if save_type
-00005d40: 2e76 616c 7565 203d 3d20 2248 544d 4c22  .value == "HTML"
-00005d50: 2061 6e64 2065 7874 2e75 7070 6572 2829   and ext.upper()
-00005d60: 203d 3d20 222e 4854 4d4c 223a 0d0a 2020   == ".HTML":..  
-00005d70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005d80: 2020 746f 6f6c 5f6f 7574 7075 742e 636c    tool_output.cl
-00005d90: 6561 725f 6f75 7470 7574 2829 0d0a 2020  ear_output()..  
-00005da0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005db0: 2020 7365 6c66 2e74 6f5f 6874 6d6c 2866    self.to_html(f
-00005dc0: 696c 655f 7061 7468 290d 0a20 2020 2020  ile_path)..     
-00005dd0: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-00005de0: 7361 7665 5f74 7970 652e 7661 6c75 6520  save_type.value 
-00005df0: 3d3d 2022 504e 4722 2061 6e64 2065 7874  == "PNG" and ext
-00005e00: 2e75 7070 6572 2829 203d 3d20 222e 504e  .upper() == ".PN
-00005e10: 4722 3a0d 0a20 2020 2020 2020 2020 2020  G":..           
-00005e20: 2020 2020 2020 2020 2074 6f6f 6c5f 6f75           tool_ou
-00005e30: 7470 7574 2e63 6c65 6172 5f6f 7574 7075  tput.clear_outpu
-00005e40: 7428 290d 0a20 2020 2020 2020 2020 2020  t()..           
-00005e50: 2020 2020 2020 2020 2073 656c 662e 746f           self.to
-00005e60: 6f6c 6261 725f 6275 7474 6f6e 2e76 616c  olbar_button.val
-00005e70: 7565 203d 2046 616c 7365 0d0a 2020 2020  ue = False..    
-00005e80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005e90: 7469 6d65 2e73 6c65 6570 2831 290d 0a20  time.sleep(1).. 
-00005ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005eb0: 2020 2073 6372 6565 6e5f 6361 7074 7572     screen_captur
-00005ec0: 6528 6f75 7466 696c 653d 6669 6c65 5f70  e(outfile=file_p
-00005ed0: 6174 6829 0d0a 2020 2020 2020 2020 2020  ath)..          
-00005ee0: 2020 2020 2020 656c 6966 2073 6176 655f        elif save_
-00005ef0: 7479 7065 2e76 616c 7565 203d 3d20 224a  type.value == "J
-00005f00: 5047 2220 616e 6420 6578 742e 7570 7065  PG" and ext.uppe
-00005f10: 7228 2920 3d3d 2022 2e4a 5047 223a 0d0a  r() == ".JPG":..
-00005f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005f30: 2020 2020 746f 6f6c 5f6f 7574 7075 742e      tool_output.
-00005f40: 636c 6561 725f 6f75 7470 7574 2829 0d0a  clear_output()..
-00005f50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005f60: 2020 2020 7365 6c66 2e74 6f6f 6c62 6172      self.toolbar
-00005f70: 5f62 7574 746f 6e2e 7661 6c75 6520 3d20  _button.value = 
-00005f80: 4661 6c73 650d 0a20 2020 2020 2020 2020  False..         
-00005f90: 2020 2020 2020 2020 2020 2074 696d 652e             time.
-00005fa0: 736c 6565 7028 3129 0d0a 2020 2020 2020  sleep(1)..      
-00005fb0: 2020 2020 2020 2020 2020 2020 2020 7363                sc
-00005fc0: 7265 656e 5f63 6170 7475 7265 286f 7574  reen_capture(out
-00005fd0: 6669 6c65 3d66 696c 655f 7061 7468 290d  file=file_path).
-00005fe0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00005ff0: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
-00006000: 2020 2020 2020 2020 2020 2020 6c61 6265              labe
-00006010: 6c20 3d20 7769 6467 6574 732e 4c61 6265  l = widgets.Labe
-00006020: 6c28 0d0a 2020 2020 2020 2020 2020 2020  l(..            
-00006030: 2020 2020 2020 2020 2020 2020 7661 6c75              valu
-00006040: 653d 2254 6865 2073 656c 6563 7465 6420  e="The selected 
-00006050: 6669 6c65 2065 7874 656e 7369 6f6e 2064  file extension d
-00006060: 6f65 7320 6e6f 7420 6d61 7463 6820 7468  oes not match th
-00006070: 6520 7365 6c65 6374 6564 2065 7870 6f72  e selected expor
-00006080: 7469 6e67 2074 7970 652e 220d 0a20 2020  ting type."..   
+00005c50: 6669 6c65 5f63 686f 6f73 6572 5d0d 0a0d  file_chooser]...
+00005c60: 0a20 2020 2020 2020 2064 6566 2063 686f  .        def cho
+00005c70: 6f73 6572 5f63 616c 6c62 6163 6b28 6368  oser_callback(ch
+00005c80: 6f6f 7365 7229 3a0d 0a20 2020 2020 2020  ooser):..       
+00005c90: 2020 2020 2073 6176 655f 6d61 705f 7769       save_map_wi
+00005ca0: 6467 6574 2e63 6869 6c64 7265 6e20 3d20  dget.children = 
+00005cb0: 5b73 6176 655f 7479 7065 2c20 6669 6c65  [save_type, file
+00005cc0: 5f63 686f 6f73 6572 2c20 6f6b 5f63 616e  _chooser, ok_can
+00005cd0: 6365 6c5d 0d0a 0d0a 2020 2020 2020 2020  cel]....        
+00005ce0: 6465 6620 6f6b 5f63 616e 6365 6c5f 636c  def ok_cancel_cl
+00005cf0: 6963 6b65 6428 6368 616e 6765 293a 0d0a  icked(change):..
+00005d00: 2020 2020 2020 2020 2020 2020 6966 2063              if c
+00005d10: 6861 6e67 655b 226e 6577 225d 203d 3d20  hange["new"] == 
+00005d20: 224f 4b22 3a0d 0a20 2020 2020 2020 2020  "OK":..         
+00005d30: 2020 2020 2020 2066 696c 655f 7061 7468         file_path
+00005d40: 203d 2066 696c 655f 6368 6f6f 7365 722e   = file_chooser.
+00005d50: 7365 6c65 6374 6564 0d0a 2020 2020 2020  selected..      
+00005d60: 2020 2020 2020 2020 2020 6578 7420 3d20            ext = 
+00005d70: 6f73 2e70 6174 682e 7370 6c69 7465 7874  os.path.splitext
+00005d80: 2866 696c 655f 7061 7468 295b 315d 0d0a  (file_path)[1]..
+00005d90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005da0: 6966 2073 6176 655f 7479 7065 2e76 616c  if save_type.val
+00005db0: 7565 203d 3d20 2248 544d 4c22 2061 6e64  ue == "HTML" and
+00005dc0: 2065 7874 2e75 7070 6572 2829 203d 3d20   ext.upper() == 
+00005dd0: 222e 4854 4d4c 223a 0d0a 2020 2020 2020  ".HTML":..      
+00005de0: 2020 2020 2020 2020 2020 2020 2020 746f                to
+00005df0: 6f6c 5f6f 7574 7075 742e 636c 6561 725f  ol_output.clear_
+00005e00: 6f75 7470 7574 2829 0d0a 2020 2020 2020  output()..      
+00005e10: 2020 2020 2020 2020 2020 2020 2020 7365                se
+00005e20: 6c66 2e74 6f5f 6874 6d6c 2866 696c 655f  lf.to_html(file_
+00005e30: 7061 7468 290d 0a20 2020 2020 2020 2020  path)..         
+00005e40: 2020 2020 2020 2065 6c69 6620 7361 7665         elif save
+00005e50: 5f74 7970 652e 7661 6c75 6520 3d3d 2022  _type.value == "
+00005e60: 504e 4722 2061 6e64 2065 7874 2e75 7070  PNG" and ext.upp
+00005e70: 6572 2829 203d 3d20 222e 504e 4722 3a0d  er() == ".PNG":.
+00005e80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00005e90: 2020 2020 2074 6f6f 6c5f 6f75 7470 7574       tool_output
+00005ea0: 2e63 6c65 6172 5f6f 7574 7075 7428 290d  .clear_output().
+00005eb0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00005ec0: 2020 2020 2073 656c 662e 746f 6f6c 6261       self.toolba
+00005ed0: 725f 6275 7474 6f6e 2e76 616c 7565 203d  r_button.value =
+00005ee0: 2046 616c 7365 0d0a 2020 2020 2020 2020   False..        
+00005ef0: 2020 2020 2020 2020 2020 2020 7469 6d65              time
+00005f00: 2e73 6c65 6570 2831 290d 0a20 2020 2020  .sleep(1)..     
+00005f10: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00005f20: 6372 6565 6e5f 6361 7074 7572 6528 6f75  creen_capture(ou
+00005f30: 7466 696c 653d 6669 6c65 5f70 6174 6829  tfile=file_path)
+00005f40: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00005f50: 2020 656c 6966 2073 6176 655f 7479 7065    elif save_type
+00005f60: 2e76 616c 7565 203d 3d20 224a 5047 2220  .value == "JPG" 
+00005f70: 616e 6420 6578 742e 7570 7065 7228 2920  and ext.upper() 
+00005f80: 3d3d 2022 2e4a 5047 223a 0d0a 2020 2020  == ".JPG":..    
+00005f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005fa0: 746f 6f6c 5f6f 7574 7075 742e 636c 6561  tool_output.clea
+00005fb0: 725f 6f75 7470 7574 2829 0d0a 2020 2020  r_output()..    
+00005fc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005fd0: 7365 6c66 2e74 6f6f 6c62 6172 5f62 7574  self.toolbar_but
+00005fe0: 746f 6e2e 7661 6c75 6520 3d20 4661 6c73  ton.value = Fals
+00005ff0: 650d 0a20 2020 2020 2020 2020 2020 2020  e..             
+00006000: 2020 2020 2020 2074 696d 652e 736c 6565         time.slee
+00006010: 7028 3129 0d0a 2020 2020 2020 2020 2020  p(1)..          
+00006020: 2020 2020 2020 2020 2020 7363 7265 656e            screen
+00006030: 5f63 6170 7475 7265 286f 7574 6669 6c65  _capture(outfile
+00006040: 3d66 696c 655f 7061 7468 290d 0a20 2020  =file_path)..   
+00006050: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+00006060: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+00006070: 2020 2020 2020 2020 6c61 6265 6c20 3d20          label = 
+00006080: 7769 6467 6574 732e 4c61 6265 6c28 0d0a  widgets.Label(..
 00006090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000060a0: 2029 0d0a 2020 2020 2020 2020 2020 2020   )..            
-000060b0: 2020 2020 2020 2020 7361 7665 5f6d 6170          save_map
-000060c0: 5f77 6964 6765 742e 6368 696c 6472 656e  _widget.children
-000060d0: 203d 205b 7361 7665 5f74 7970 652c 2066   = [save_type, f
-000060e0: 696c 655f 6368 6f6f 7365 722c 206c 6162  ile_chooser, lab
-000060f0: 656c 5d0d 0a20 2020 2020 2020 2020 2020  el]..           
-00006100: 2020 2020 2073 656c 662e 746f 6f6c 6261       self.toolba
-00006110: 725f 7265 7365 7428 290d 0a20 2020 2020  r_reset()..     
-00006120: 2020 2020 2020 2065 6c69 6620 6368 616e         elif chan
-00006130: 6765 5b22 6e65 7722 5d20 3d3d 2022 4361  ge["new"] == "Ca
-00006140: 6e63 656c 223a 0d0a 2020 2020 2020 2020  ncel":..        
-00006150: 2020 2020 2020 2020 746f 6f6c 5f6f 7574          tool_out
-00006160: 7075 742e 636c 6561 725f 6f75 7470 7574  put.clear_output
-00006170: 2829 0d0a 2020 2020 2020 2020 2020 2020  ()..            
-00006180: 2020 2020 7365 6c66 2e74 6f6f 6c62 6172      self.toolbar
-00006190: 5f72 6573 6574 2829 0d0a 0d0a 2020 2020  _reset()....    
-000061a0: 2020 2020 7361 7665 5f74 7970 652e 6f62      save_type.ob
-000061b0: 7365 7276 6528 7361 7665 5f74 7970 655f  serve(save_type_
-000061c0: 6368 616e 6765 642c 206e 616d 6573 3d22  changed, names="
-000061d0: 7661 6c75 6522 290d 0a20 2020 2020 2020  value")..       
-000061e0: 206f 6b5f 6361 6e63 656c 2e6f 6273 6572   ok_cancel.obser
-000061f0: 7665 286f 6b5f 6361 6e63 656c 5f63 6c69  ve(ok_cancel_cli
-00006200: 636b 6564 2c20 6e61 6d65 733d 2276 616c  cked, names="val
-00006210: 7565 2229 0d0a 0d0a 2020 2020 2020 2020  ue")....        
-00006220: 6669 6c65 5f63 686f 6f73 6572 2e72 6567  file_chooser.reg
-00006230: 6973 7465 725f 6361 6c6c 6261 636b 2863  ister_callback(c
-00006240: 686f 6f73 6572 5f63 616c 6c62 6163 6b29  hooser_callback)
-00006250: 0d0a 0d0a 2020 2020 2020 2020 7361 7665  ....        save
-00006260: 5f6d 6170 5f77 6964 6765 742e 6368 696c  _map_widget.chil
-00006270: 6472 656e 203d 205b 7361 7665 5f74 7970  dren = [save_typ
-00006280: 652c 2066 696c 655f 6368 6f6f 7365 725d  e, file_chooser]
-00006290: 0d0a 0d0a 2020 2020 2020 2020 746f 6f6c  ....        tool
-000062a0: 7320 3d20 7b0d 0a20 2020 2020 2020 2020  s = {..         
-000062b0: 2020 2022 696e 666f 223a 207b 226e 616d     "info": {"nam
-000062c0: 6522 3a20 2269 6e73 7065 6374 6f72 222c  e": "inspector",
-000062d0: 2022 746f 6f6c 7469 7022 3a20 2249 6e73   "tooltip": "Ins
-000062e0: 7065 6374 6f72 227d 2c0d 0a20 2020 2020  pector"},..     
-000062f0: 2020 2020 2020 2022 6261 722d 6368 6172         "bar-char
-00006300: 7422 3a20 7b22 6e61 6d65 223a 2022 706c  t": {"name": "pl
-00006310: 6f74 7469 6e67 222c 2022 746f 6f6c 7469  otting", "toolti
-00006320: 7022 3a20 2250 6c6f 7474 696e 6722 7d2c  p": "Plotting"},
-00006330: 0d0a 2020 2020 2020 2020 2020 2020 2263  ..            "c
-00006340: 616d 6572 6122 3a20 7b0d 0a20 2020 2020  amera": {..     
-00006350: 2020 2020 2020 2020 2020 2022 6e61 6d65             "name
-00006360: 223a 2022 746f 5f69 6d61 6765 222c 0d0a  ": "to_image",..
-00006370: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006380: 2274 6f6f 6c74 6970 223a 2022 5361 7665  "tooltip": "Save
-00006390: 206d 6170 2061 7320 4854 4d4c 206f 7220   map as HTML or 
-000063a0: 696d 6167 6522 2c0d 0a20 2020 2020 2020  image",..       
-000063b0: 2020 2020 207d 2c0d 0a20 2020 2020 2020       },..       
-000063c0: 2020 2020 2022 6572 6173 6572 223a 207b       "eraser": {
-000063d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000063e0: 2020 226e 616d 6522 3a20 2265 7261 7365    "name": "erase
-000063f0: 7222 2c0d 0a20 2020 2020 2020 2020 2020  r",..           
-00006400: 2020 2020 2022 746f 6f6c 7469 7022 3a20       "tooltip": 
-00006410: 2252 656d 6f76 6520 616c 6c20 6472 6177  "Remove all draw
-00006420: 6e20 6665 6174 7572 6573 222c 0d0a 2020  n features",..  
-00006430: 2020 2020 2020 2020 2020 7d2c 0d0a 2020            },..  
-00006440: 2020 2020 2020 2020 2020 2266 6f6c 6465            "folde
-00006450: 722d 6f70 656e 223a 207b 0d0a 2020 2020  r-open": {..    
-00006460: 2020 2020 2020 2020 2020 2020 226e 616d              "nam
-00006470: 6522 3a20 226f 7065 6e5f 6461 7461 222c  e": "open_data",
-00006480: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00006490: 2020 2274 6f6f 6c74 6970 223a 2022 4f70    "tooltip": "Op
-000064a0: 656e 206c 6f63 616c 2076 6563 746f 722f  en local vector/
-000064b0: 7261 7374 6572 2064 6174 6122 2c0d 0a20  raster data",.. 
-000064c0: 2020 2020 2020 2020 2020 207d 2c0d 0a20             },.. 
-000064d0: 2020 2020 2020 2020 2020 2023 2022 636c             # "cl
-000064e0: 6f75 642d 646f 776e 6c6f 6164 223a 207b  oud-download": {
-000064f0: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
-00006500: 2020 2020 226e 616d 6522 3a20 2265 7870      "name": "exp
-00006510: 6f72 745f 6461 7461 222c 0d0a 2020 2020  ort_data",..    
-00006520: 2020 2020 2020 2020 2320 2020 2020 2274          #     "t
-00006530: 6f6f 6c74 6970 223a 2022 4578 706f 7274  ooltip": "Export
-00006540: 2045 6172 7468 2045 6e67 696e 6520 6461   Earth Engine da
-00006550: 7461 222c 0d0a 2020 2020 2020 2020 2020  ta",..          
-00006560: 2020 2320 7d2c 0d0a 2020 2020 2020 2020    # },..        
-00006570: 2020 2020 2272 6574 7765 6574 223a 207b      "retweet": {
-00006580: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00006590: 2020 226e 616d 6522 3a20 2263 6f6e 7665    "name": "conve
-000065a0: 7274 5f6a 7322 2c0d 0a20 2020 2020 2020  rt_js",..       
-000065b0: 2020 2020 2020 2020 2022 746f 6f6c 7469           "toolti
-000065c0: 7022 3a20 2243 6f6e 7665 7274 2045 6172  p": "Convert Ear
-000065d0: 7468 2045 6e67 696e 6520 4a61 7661 5363  th Engine JavaSc
-000065e0: 7269 7074 2074 6f20 5079 7468 6f6e 222c  ript to Python",
-000065f0: 0d0a 2020 2020 2020 2020 2020 2020 7d2c  ..            },
-00006600: 0d0a 2020 2020 2020 2020 2020 2020 2267  ..            "g
-00006610: 6561 7273 223a 207b 0d0a 2020 2020 2020  ears": {..      
-00006620: 2020 2020 2020 2020 2020 226e 616d 6522            "name"
-00006630: 3a20 2277 6869 7465 626f 7822 2c0d 0a20  : "whitebox",.. 
-00006640: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00006650: 746f 6f6c 7469 7022 3a20 2257 6869 7465  tooltip": "White
-00006660: 626f 7854 6f6f 6c73 2066 6f72 206c 6f63  boxTools for loc
-00006670: 616c 2067 656f 7072 6f63 6573 7369 6e67  al geoprocessing
-00006680: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
-00006690: 7d2c 0d0a 2020 2020 2020 2020 2020 2020  },..            
-000066a0: 2267 6f6f 676c 6522 3a20 7b0d 0a20 2020  "google": {..   
-000066b0: 2020 2020 2020 2020 2020 2020 2022 6e61               "na
-000066c0: 6d65 223a 2022 6765 6574 6f6f 6c62 6f78  me": "geetoolbox
-000066d0: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
-000066e0: 2020 2020 2274 6f6f 6c74 6970 223a 2022      "tooltip": "
-000066f0: 4745 4520 546f 6f6c 626f 7820 666f 7220  GEE Toolbox for 
-00006700: 636c 6f75 6420 636f 6d70 7574 696e 6722  cloud computing"
-00006710: 2c0d 0a20 2020 2020 2020 2020 2020 207d  ,..            }
-00006720: 2c0d 0a20 2020 2020 2020 2020 2020 2022  ,..            "
-00006730: 6d61 7022 3a20 7b0d 0a20 2020 2020 2020  map": {..       
-00006740: 2020 2020 2020 2020 2022 6e61 6d65 223a           "name":
-00006750: 2022 6261 7365 6d61 7022 2c0d 0a20 2020   "basemap",..   
-00006760: 2020 2020 2020 2020 2020 2020 2022 746f               "to
-00006770: 6f6c 7469 7022 3a20 2243 6861 6e67 6520  oltip": "Change 
-00006780: 6261 7365 6d61 7022 2c0d 0a20 2020 2020  basemap",..     
-00006790: 2020 2020 2020 207d 2c0d 0a20 2020 2020         },..     
-000067a0: 2020 2020 2020 2022 676c 6f62 6522 3a20         "globe": 
-000067b0: 7b0d 0a20 2020 2020 2020 2020 2020 2020  {..             
-000067c0: 2020 2022 6e61 6d65 223a 2022 7469 6d65     "name": "time
-000067d0: 6c61 7073 6522 2c0d 0a20 2020 2020 2020  lapse",..       
-000067e0: 2020 2020 2020 2020 2022 746f 6f6c 7469           "toolti
-000067f0: 7022 3a20 2243 7265 6174 6520 7469 6d65  p": "Create time
-00006800: 6c61 7073 6522 2c0d 0a20 2020 2020 2020  lapse",..       
-00006810: 2020 2020 207d 2c0d 0a20 2020 2020 2020       },..       
-00006820: 2020 2020 2022 6661 7374 2d66 6f72 7761       "fast-forwa
-00006830: 7264 223a 207b 0d0a 2020 2020 2020 2020  rd": {..        
-00006840: 2020 2020 2020 2020 226e 616d 6522 3a20          "name": 
-00006850: 2274 696d 6573 6c69 6465 7222 2c0d 0a20  "timeslider",.. 
-00006860: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00006870: 746f 6f6c 7469 7022 3a20 2241 6374 6976  tooltip": "Activ
-00006880: 6174 6520 7469 6d65 736c 6964 6572 222c  ate timeslider",
-00006890: 0d0a 2020 2020 2020 2020 2020 2020 7d2c  ..            },
-000068a0: 0d0a 2020 2020 2020 2020 2020 2020 2268  ..            "h
-000068b0: 616e 642d 6f2d 7570 223a 207b 0d0a 2020  and-o-up": {..  
-000068c0: 2020 2020 2020 2020 2020 2020 2020 226e                "n
-000068d0: 616d 6522 3a20 2264 7261 7722 2c0d 0a20  ame": "draw",.. 
-000068e0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-000068f0: 746f 6f6c 7469 7022 3a20 2243 6f6c 6c65  tooltip": "Colle
-00006900: 6374 2074 7261 696e 696e 6720 7361 6d70  ct training samp
-00006910: 6c65 7322 2c0d 0a20 2020 2020 2020 2020  les",..         
-00006920: 2020 207d 2c0d 0a20 2020 2020 2020 2020     },..         
-00006930: 2020 2022 6c69 6e65 2d63 6861 7274 223a     "line-chart":
-00006940: 207b 0d0a 2020 2020 2020 2020 2020 2020   {..            
-00006950: 2020 2020 226e 616d 6522 3a20 2274 7261      "name": "tra
-00006960: 6e73 6563 7422 2c0d 0a20 2020 2020 2020  nsect",..       
-00006970: 2020 2020 2020 2020 2022 746f 6f6c 7469           "toolti
-00006980: 7022 3a20 2243 7265 6174 696e 6720 616e  p": "Creating an
-00006990: 6420 706c 6f74 7469 6e67 2074 7261 6e73  d plotting trans
-000069a0: 6563 7473 222c 0d0a 2020 2020 2020 2020  ects",..        
-000069b0: 2020 2020 7d2c 0d0a 2020 2020 2020 2020      },..        
-000069c0: 2020 2020 2272 616e 646f 6d22 3a20 7b0d      "random": {.
-000069d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000069e0: 2022 6e61 6d65 223a 2022 7361 6e6b 6565   "name": "sankee
-000069f0: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
-00006a00: 2020 2020 2274 6f6f 6c74 6970 223a 2022      "tooltip": "
-00006a10: 5361 6e6b 6579 2070 6c6f 7473 222c 0d0a  Sankey plots",..
-00006a20: 2020 2020 2020 2020 2020 2020 7d2c 0d0a              },..
-00006a30: 2020 2020 2020 2020 2020 2020 2261 646a              "adj
-00006a40: 7573 7422 3a20 7b0d 0a20 2020 2020 2020  ust": {..       
-00006a50: 2020 2020 2020 2020 2022 6e61 6d65 223a           "name":
-00006a60: 2022 706c 616e 6574 222c 0d0a 2020 2020   "planet",..    
-00006a70: 2020 2020 2020 2020 2020 2020 2274 6f6f              "too
-00006a80: 6c74 6970 223a 2022 506c 616e 6574 2069  ltip": "Planet i
-00006a90: 6d61 6765 7279 222c 0d0a 2020 2020 2020  magery",..      
-00006aa0: 2020 2020 2020 7d2c 0d0a 2020 2020 2020        },..      
-00006ab0: 2020 2020 2020 2273 6d69 6c65 2d6f 223a        "smile-o":
-00006ac0: 207b 0d0a 2020 2020 2020 2020 2020 2020   {..            
-00006ad0: 2020 2020 226e 616d 6522 3a20 2270 6c61      "name": "pla
-00006ae0: 6365 686f 6c64 222c 0d0a 2020 2020 2020  cehold",..      
-00006af0: 2020 2020 2020 2020 2020 2274 6f6f 6c74            "toolt
-00006b00: 6970 223a 2022 5468 6973 2069 7320 6120  ip": "This is a 
-00006b10: 706c 6163 6568 6f6c 6422 2c0d 0a20 2020  placehold",..   
-00006b20: 2020 2020 2020 2020 207d 2c0d 0a20 2020           },..   
-00006b30: 2020 2020 2020 2020 2022 7370 696e 6e65           "spinne
-00006b40: 7222 3a20 7b0d 0a20 2020 2020 2020 2020  r": {..         
-00006b50: 2020 2020 2020 2022 6e61 6d65 223a 2022         "name": "
-00006b60: 706c 6163 6568 6f6c 6432 222c 0d0a 2020  placehold2",..  
-00006b70: 2020 2020 2020 2020 2020 2020 2020 2274                "t
-00006b80: 6f6f 6c74 6970 223a 2022 5468 6973 2069  ooltip": "This i
-00006b90: 7320 6120 706c 6163 6568 6f6c 6422 2c0d  s a placehold",.
-00006ba0: 0a20 2020 2020 2020 2020 2020 207d 2c0d  .            },.
-00006bb0: 0a20 2020 2020 2020 2020 2020 2022 7175  .            "qu
-00006bc0: 6573 7469 6f6e 223a 207b 0d0a 2020 2020  estion": {..    
-00006bd0: 2020 2020 2020 2020 2020 2020 226e 616d              "nam
-00006be0: 6522 3a20 2268 656c 7022 2c0d 0a20 2020  e": "help",..   
-00006bf0: 2020 2020 2020 2020 2020 2020 2022 746f               "to
-00006c00: 6f6c 7469 7022 3a20 2247 6574 2068 656c  oltip": "Get hel
-00006c10: 7022 2c0d 0a20 2020 2020 2020 2020 2020  p",..           
-00006c20: 207d 2c0d 0a20 2020 2020 2020 207d 0d0a   },..        }..
-00006c30: 0d0a 2020 2020 2020 2020 2320 6966 206b  ..        # if k
-00006c40: 7761 7267 735b 2275 7365 5f76 6f69 6c61  wargs["use_voila
-00006c50: 225d 3a0d 0a20 2020 2020 2020 2023 2020  "]:..        #  
-00006c60: 2020 2076 6f69 6c61 5f74 6f6f 6c73 203d     voila_tools =
-00006c70: 205b 2263 616d 6572 6122 2c20 2266 6f6c   ["camera", "fol
-00006c80: 6465 722d 6f70 656e 222c 2022 636c 6f75  der-open", "clou
-00006c90: 642d 646f 776e 6c6f 6164 222c 2022 6765  d-download", "ge
-00006ca0: 6172 7322 5d0d 0a0d 0a20 2020 2020 2020  ars"]....       
-00006cb0: 2023 2020 2020 2066 6f72 2069 7465 6d20   #     for item 
-00006cc0: 696e 2076 6f69 6c61 5f74 6f6f 6c73 3a0d  in voila_tools:.
-00006cd0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00006ce0: 2020 2069 6620 6974 656d 2069 6e20 746f     if item in to
-00006cf0: 6f6c 732e 6b65 7973 2829 3a0d 0a20 2020  ols.keys():..   
-00006d00: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00006d10: 2020 2064 656c 2074 6f6f 6c73 5b69 7465     del tools[ite
-00006d20: 6d5d 0d0a 0d0a 2020 2020 2020 2020 6963  m]....        ic
-00006d30: 6f6e 7320 3d20 6c69 7374 2874 6f6f 6c73  ons = list(tools
-00006d40: 2e6b 6579 7328 2929 0d0a 2020 2020 2020  .keys())..      
-00006d50: 2020 746f 6f6c 7469 7073 203d 205b 6974    tooltips = [it
-00006d60: 656d 5b22 746f 6f6c 7469 7022 5d20 666f  em["tooltip"] fo
-00006d70: 7220 6974 656d 2069 6e20 6c69 7374 2874  r item in list(t
-00006d80: 6f6f 6c73 2e76 616c 7565 7328 2929 5d0d  ools.values())].
-00006d90: 0a0d 0a20 2020 2020 2020 2069 636f 6e5f  ...        icon_
-00006da0: 7769 6474 6820 3d20 2233 3270 7822 0d0a  width = "32px"..
-00006db0: 2020 2020 2020 2020 6963 6f6e 5f68 6569          icon_hei
-00006dc0: 6768 7420 3d20 2233 3270 7822 0d0a 2020  ght = "32px"..  
-00006dd0: 2020 2020 2020 6e5f 636f 6c73 203d 2033        n_cols = 3
-00006de0: 0d0a 2020 2020 2020 2020 6e5f 726f 7773  ..        n_rows
-00006df0: 203d 206d 6174 682e 6365 696c 286c 656e   = math.ceil(len
-00006e00: 2869 636f 6e73 2920 2f20 6e5f 636f 6c73  (icons) / n_cols
-00006e10: 290d 0a0d 0a20 2020 2020 2020 2074 6f6f  )....        too
-00006e20: 6c62 6172 5f67 7269 6420 3d20 7769 6467  lbar_grid = widg
-00006e30: 6574 732e 4772 6964 426f 7828 0d0a 2020  ets.GridBox(..  
-00006e40: 2020 2020 2020 2020 2020 6368 696c 6472            childr
-00006e50: 656e 3d5b 0d0a 2020 2020 2020 2020 2020  en=[..          
-00006e60: 2020 2020 2020 7769 6467 6574 732e 546f        widgets.To
-00006e70: 6767 6c65 4275 7474 6f6e 280d 0a20 2020  ggleButton(..   
-00006e80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006e90: 206c 6179 6f75 743d 7769 6467 6574 732e   layout=widgets.
-00006ea0: 4c61 796f 7574 280d 0a20 2020 2020 2020  Layout(..       
-00006eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006ec0: 2077 6964 7468 3d22 6175 746f 222c 2068   width="auto", h
-00006ed0: 6569 6768 743d 2261 7574 6f22 2c20 7061  eight="auto", pa
-00006ee0: 6464 696e 673d 2230 7078 2030 7078 2030  dding="0px 0px 0
-00006ef0: 7078 2034 7078 220d 0a20 2020 2020 2020  px 4px"..       
-00006f00: 2020 2020 2020 2020 2020 2020 2029 2c0d               ),.
-00006f10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00006f20: 2020 2020 2062 7574 746f 6e5f 7374 796c       button_styl
-00006f30: 653d 2270 7269 6d61 7279 222c 0d0a 2020  e="primary",..  
-00006f40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006f50: 2020 6963 6f6e 3d69 636f 6e73 5b69 5d2c    icon=icons[i],
-00006f60: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00006f70: 2020 2020 2020 746f 6f6c 7469 703d 746f        tooltip=to
-00006f80: 6f6c 7469 7073 5b69 5d2c 0d0a 2020 2020  oltips[i],..    
-00006f90: 2020 2020 2020 2020 2020 2020 290d 0a20              ).. 
-00006fa0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-00006fb0: 6f72 2069 2069 6e20 7261 6e67 6528 6c65  or i in range(le
-00006fc0: 6e28 6963 6f6e 7329 290d 0a20 2020 2020  n(icons))..     
-00006fd0: 2020 2020 2020 205d 2c0d 0a20 2020 2020         ],..     
-00006fe0: 2020 2020 2020 206c 6179 6f75 743d 7769         layout=wi
-00006ff0: 6467 6574 732e 4c61 796f 7574 280d 0a20  dgets.Layout(.. 
-00007000: 2020 2020 2020 2020 2020 2020 2020 2077                 w
-00007010: 6964 7468 3d22 3130 3970 7822 2c0d 0a20  idth="109px",.. 
-00007020: 2020 2020 2020 2020 2020 2020 2020 2067                 g
-00007030: 7269 645f 7465 6d70 6c61 7465 5f63 6f6c  rid_template_col
-00007040: 756d 6e73 3d28 6963 6f6e 5f77 6964 7468  umns=(icon_width
-00007050: 202b 2022 2022 2920 2a20 6e5f 636f 6c73   + " ") * n_cols
-00007060: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00007070: 2020 2067 7269 645f 7465 6d70 6c61 7465     grid_template
-00007080: 5f72 6f77 733d 2869 636f 6e5f 6865 6967  _rows=(icon_heig
-00007090: 6874 202b 2022 2022 2920 2a20 6e5f 726f  ht + " ") * n_ro
-000070a0: 7773 2c0d 0a20 2020 2020 2020 2020 2020  ws,..           
-000070b0: 2020 2020 2067 7269 645f 6761 703d 2231       grid_gap="1
-000070c0: 7078 2031 7078 222c 0d0a 2020 2020 2020  px 1px",..      
-000070d0: 2020 2020 2020 2020 2020 7061 6464 696e            paddin
-000070e0: 673d 2235 7078 222c 0d0a 2020 2020 2020  g="5px",..      
-000070f0: 2020 2020 2020 292c 0d0a 2020 2020 2020        ),..      
-00007100: 2020 290d 0a20 2020 2020 2020 2073 656c    )..        sel
-00007110: 662e 746f 6f6c 6261 7220 3d20 746f 6f6c  f.toolbar = tool
-00007120: 6261 725f 6772 6964 0d0a 0d0a 2020 2020  bar_grid....    
-00007130: 2020 2020 6465 6620 746f 6f6c 5f63 616c      def tool_cal
-00007140: 6c62 6163 6b28 6368 616e 6765 293a 0d0a  lback(change):..
-00007150: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
-00007160: 2063 6861 6e67 655b 226e 6577 225d 3a0d   change["new"]:.
-00007170: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00007180: 2063 7572 7265 6e74 5f74 6f6f 6c20 3d20   current_tool = 
-00007190: 6368 616e 6765 5b22 6f77 6e65 7222 5d0d  change["owner"].
-000071a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000071b0: 2066 6f72 2074 6f6f 6c20 696e 2074 6f6f   for tool in too
-000071c0: 6c62 6172 5f67 7269 642e 6368 696c 6472  lbar_grid.childr
-000071d0: 656e 3a0d 0a20 2020 2020 2020 2020 2020  en:..           
-000071e0: 2020 2020 2020 2020 2069 6620 746f 6f6c           if tool
-000071f0: 2069 7320 6e6f 7420 6375 7272 656e 745f   is not current_
-00007200: 746f 6f6c 3a0d 0a20 2020 2020 2020 2020  tool:..         
-00007210: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-00007220: 6f6f 6c2e 7661 6c75 6520 3d20 4661 6c73  ool.value = Fals
-00007230: 650d 0a20 2020 2020 2020 2020 2020 2020  e..             
-00007240: 2020 2074 6f6f 6c20 3d20 6368 616e 6765     tool = change
-00007250: 5b22 6f77 6e65 7222 5d0d 0a20 2020 2020  ["owner"]..     
-00007260: 2020 2020 2020 2020 2020 2074 6f6f 6c5f             tool_
-00007270: 6e61 6d65 203d 2074 6f6f 6c73 5b74 6f6f  name = tools[too
-00007280: 6c2e 6963 6f6e 5d5b 226e 616d 6522 5d0d  l.icon]["name"].
-00007290: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000072a0: 2069 6620 746f 6f6c 5f6e 616d 6520 3d3d   if tool_name ==
-000072b0: 2022 746f 5f69 6d61 6765 223a 0d0a 2020   "to_image":..  
-000072c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000072d0: 2020 6966 2074 6f6f 6c5f 6f75 7470 7574    if tool_output
-000072e0: 5f63 6f6e 7472 6f6c 206e 6f74 2069 6e20  _control not in 
-000072f0: 7365 6c66 2e63 6f6e 7472 6f6c 733a 0d0a  self.controls:..
-00007300: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007310: 2020 2020 2020 2020 7365 6c66 2e61 6464          self.add
-00007320: 5f63 6f6e 7472 6f6c 2874 6f6f 6c5f 6f75  _control(tool_ou
-00007330: 7470 7574 5f63 6f6e 7472 6f6c 290d 0a20  tput_control).. 
-00007340: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007350: 2020 2077 6974 6820 746f 6f6c 5f6f 7574     with tool_out
-00007360: 7075 743a 0d0a 2020 2020 2020 2020 2020  put:..          
-00007370: 2020 2020 2020 2020 2020 2020 2020 746f                to
-00007380: 6f6c 5f6f 7574 7075 742e 636c 6561 725f  ol_output.clear_
-00007390: 6f75 7470 7574 2829 0d0a 2020 2020 2020  output()..      
-000073a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000073b0: 2020 6469 7370 6c61 7928 7361 7665 5f6d    display(save_m
-000073c0: 6170 5f77 6964 6765 7429 0d0a 2020 2020  ap_widget)..    
-000073d0: 2020 2020 2020 2020 2020 2020 656c 6966              elif
-000073e0: 2074 6f6f 6c5f 6e61 6d65 203d 3d20 2265   tool_name == "e
-000073f0: 7261 7365 7222 3a0d 0a20 2020 2020 2020  raser":..       
-00007400: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-00007410: 662e 7265 6d6f 7665 5f64 7261 776e 5f66  f.remove_drawn_f
-00007420: 6561 7475 7265 7328 290d 0a20 2020 2020  eatures()..     
-00007430: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-00007440: 6f6f 6c2e 7661 6c75 6520 3d20 4661 6c73  ool.value = Fals
-00007450: 650d 0a20 2020 2020 2020 2020 2020 2020  e..             
-00007460: 2020 2065 6c69 6620 746f 6f6c 5f6e 616d     elif tool_nam
-00007470: 6520 3d3d 2022 696e 7370 6563 746f 7222  e == "inspector"
-00007480: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00007490: 2020 2020 2020 2073 656c 662e 696e 7370         self.insp
-000074a0: 6563 746f 725f 6368 6563 6b65 6420 3d20  ector_checked = 
-000074b0: 746f 6f6c 2e76 616c 7565 0d0a 2020 2020  tool.value..    
-000074c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000074d0: 6966 206e 6f74 2073 656c 662e 696e 7370  if not self.insp
-000074e0: 6563 746f 725f 6368 6563 6b65 643a 0d0a  ector_checked:..
+000060a0: 2020 2020 2020 2020 7661 6c75 653d 2254          value="T
+000060b0: 6865 2073 656c 6563 7465 6420 6669 6c65  he selected file
+000060c0: 2065 7874 656e 7369 6f6e 2064 6f65 7320   extension does 
+000060d0: 6e6f 7420 6d61 7463 6820 7468 6520 7365  not match the se
+000060e0: 6c65 6374 6564 2065 7870 6f72 7469 6e67  lected exporting
+000060f0: 2074 7970 652e 220d 0a20 2020 2020 2020   type."..       
+00006100: 2020 2020 2020 2020 2020 2020 2029 0d0a               )..
+00006110: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006120: 2020 2020 7361 7665 5f6d 6170 5f77 6964      save_map_wid
+00006130: 6765 742e 6368 696c 6472 656e 203d 205b  get.children = [
+00006140: 7361 7665 5f74 7970 652c 2066 696c 655f  save_type, file_
+00006150: 6368 6f6f 7365 722c 206c 6162 656c 5d0d  chooser, label].
+00006160: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00006170: 2073 656c 662e 746f 6f6c 6261 725f 7265   self.toolbar_re
+00006180: 7365 7428 290d 0a20 2020 2020 2020 2020  set()..         
+00006190: 2020 2065 6c69 6620 6368 616e 6765 5b22     elif change["
+000061a0: 6e65 7722 5d20 3d3d 2022 4361 6e63 656c  new"] == "Cancel
+000061b0: 223a 0d0a 2020 2020 2020 2020 2020 2020  ":..            
+000061c0: 2020 2020 746f 6f6c 5f6f 7574 7075 742e      tool_output.
+000061d0: 636c 6561 725f 6f75 7470 7574 2829 0d0a  clear_output()..
+000061e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000061f0: 7365 6c66 2e74 6f6f 6c62 6172 5f72 6573  self.toolbar_res
+00006200: 6574 2829 0d0a 0d0a 2020 2020 2020 2020  et()....        
+00006210: 7361 7665 5f74 7970 652e 6f62 7365 7276  save_type.observ
+00006220: 6528 7361 7665 5f74 7970 655f 6368 616e  e(save_type_chan
+00006230: 6765 642c 206e 616d 6573 3d22 7661 6c75  ged, names="valu
+00006240: 6522 290d 0a20 2020 2020 2020 206f 6b5f  e")..        ok_
+00006250: 6361 6e63 656c 2e6f 6273 6572 7665 286f  cancel.observe(o
+00006260: 6b5f 6361 6e63 656c 5f63 6c69 636b 6564  k_cancel_clicked
+00006270: 2c20 6e61 6d65 733d 2276 616c 7565 2229  , names="value")
+00006280: 0d0a 0d0a 2020 2020 2020 2020 6669 6c65  ....        file
+00006290: 5f63 686f 6f73 6572 2e72 6567 6973 7465  _chooser.registe
+000062a0: 725f 6361 6c6c 6261 636b 2863 686f 6f73  r_callback(choos
+000062b0: 6572 5f63 616c 6c62 6163 6b29 0d0a 0d0a  er_callback)....
+000062c0: 2020 2020 2020 2020 7361 7665 5f6d 6170          save_map
+000062d0: 5f77 6964 6765 742e 6368 696c 6472 656e  _widget.children
+000062e0: 203d 205b 7361 7665 5f74 7970 652c 2066   = [save_type, f
+000062f0: 696c 655f 6368 6f6f 7365 725d 0d0a 0d0a  ile_chooser]....
+00006300: 2020 2020 2020 2020 746f 6f6c 7320 3d20          tools = 
+00006310: 7b0d 0a20 2020 2020 2020 2020 2020 2022  {..            "
+00006320: 696e 666f 223a 207b 226e 616d 6522 3a20  info": {"name": 
+00006330: 2269 6e73 7065 6374 6f72 222c 2022 746f  "inspector", "to
+00006340: 6f6c 7469 7022 3a20 2249 6e73 7065 6374  oltip": "Inspect
+00006350: 6f72 227d 2c0d 0a20 2020 2020 2020 2020  or"},..         
+00006360: 2020 2022 6261 722d 6368 6172 7422 3a20     "bar-chart": 
+00006370: 7b22 6e61 6d65 223a 2022 706c 6f74 7469  {"name": "plotti
+00006380: 6e67 222c 2022 746f 6f6c 7469 7022 3a20  ng", "tooltip": 
+00006390: 2250 6c6f 7474 696e 6722 7d2c 0d0a 2020  "Plotting"},..  
+000063a0: 2020 2020 2020 2020 2020 2263 616d 6572            "camer
+000063b0: 6122 3a20 7b0d 0a20 2020 2020 2020 2020  a": {..         
+000063c0: 2020 2020 2020 2022 6e61 6d65 223a 2022         "name": "
+000063d0: 746f 5f69 6d61 6765 222c 0d0a 2020 2020  to_image",..    
+000063e0: 2020 2020 2020 2020 2020 2020 2274 6f6f              "too
+000063f0: 6c74 6970 223a 2022 5361 7665 206d 6170  ltip": "Save map
+00006400: 2061 7320 4854 4d4c 206f 7220 696d 6167   as HTML or imag
+00006410: 6522 2c0d 0a20 2020 2020 2020 2020 2020  e",..           
+00006420: 207d 2c0d 0a20 2020 2020 2020 2020 2020   },..           
+00006430: 2022 6572 6173 6572 223a 207b 0d0a 2020   "eraser": {..  
+00006440: 2020 2020 2020 2020 2020 2020 2020 226e                "n
+00006450: 616d 6522 3a20 2265 7261 7365 7222 2c0d  ame": "eraser",.
+00006460: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00006470: 2022 746f 6f6c 7469 7022 3a20 2252 656d   "tooltip": "Rem
+00006480: 6f76 6520 616c 6c20 6472 6177 6e20 6665  ove all drawn fe
+00006490: 6174 7572 6573 222c 0d0a 2020 2020 2020  atures",..      
+000064a0: 2020 2020 2020 7d2c 0d0a 2020 2020 2020        },..      
+000064b0: 2020 2020 2020 2266 6f6c 6465 722d 6f70        "folder-op
+000064c0: 656e 223a 207b 0d0a 2020 2020 2020 2020  en": {..        
+000064d0: 2020 2020 2020 2020 226e 616d 6522 3a20          "name": 
+000064e0: 226f 7065 6e5f 6461 7461 222c 0d0a 2020  "open_data",..  
+000064f0: 2020 2020 2020 2020 2020 2020 2020 2274                "t
+00006500: 6f6f 6c74 6970 223a 2022 4f70 656e 206c  ooltip": "Open l
+00006510: 6f63 616c 2076 6563 746f 722f 7261 7374  ocal vector/rast
+00006520: 6572 2064 6174 6122 2c0d 0a20 2020 2020  er data",..     
+00006530: 2020 2020 2020 207d 2c0d 0a20 2020 2020         },..     
+00006540: 2020 2020 2020 2023 2022 636c 6f75 642d         # "cloud-
+00006550: 646f 776e 6c6f 6164 223a 207b 0d0a 2020  download": {..  
+00006560: 2020 2020 2020 2020 2020 2320 2020 2020            #     
+00006570: 226e 616d 6522 3a20 2265 7870 6f72 745f  "name": "export_
+00006580: 6461 7461 222c 0d0a 2020 2020 2020 2020  data",..        
+00006590: 2020 2020 2320 2020 2020 2274 6f6f 6c74      #     "toolt
+000065a0: 6970 223a 2022 4578 706f 7274 2045 6172  ip": "Export Ear
+000065b0: 7468 2045 6e67 696e 6520 6461 7461 222c  th Engine data",
+000065c0: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+000065d0: 7d2c 0d0a 2020 2020 2020 2020 2020 2020  },..            
+000065e0: 2272 6574 7765 6574 223a 207b 0d0a 2020  "retweet": {..  
+000065f0: 2020 2020 2020 2020 2020 2020 2020 226e                "n
+00006600: 616d 6522 3a20 2263 6f6e 7665 7274 5f6a  ame": "convert_j
+00006610: 7322 2c0d 0a20 2020 2020 2020 2020 2020  s",..           
+00006620: 2020 2020 2022 746f 6f6c 7469 7022 3a20       "tooltip": 
+00006630: 2243 6f6e 7665 7274 2045 6172 7468 2045  "Convert Earth E
+00006640: 6e67 696e 6520 4a61 7661 5363 7269 7074  ngine JavaScript
+00006650: 2074 6f20 5079 7468 6f6e 222c 0d0a 2020   to Python",..  
+00006660: 2020 2020 2020 2020 2020 7d2c 0d0a 2020            },..  
+00006670: 2020 2020 2020 2020 2020 2267 6561 7273            "gears
+00006680: 223a 207b 0d0a 2020 2020 2020 2020 2020  ": {..          
+00006690: 2020 2020 2020 226e 616d 6522 3a20 2277        "name": "w
+000066a0: 6869 7465 626f 7822 2c0d 0a20 2020 2020  hitebox",..     
+000066b0: 2020 2020 2020 2020 2020 2022 746f 6f6c             "tool
+000066c0: 7469 7022 3a20 2257 6869 7465 626f 7854  tip": "WhiteboxT
+000066d0: 6f6f 6c73 2066 6f72 206c 6f63 616c 2067  ools for local g
+000066e0: 656f 7072 6f63 6573 7369 6e67 222c 0d0a  eoprocessing",..
+000066f0: 2020 2020 2020 2020 2020 2020 7d2c 0d0a              },..
+00006700: 2020 2020 2020 2020 2020 2020 2267 6f6f              "goo
+00006710: 676c 6522 3a20 7b0d 0a20 2020 2020 2020  gle": {..       
+00006720: 2020 2020 2020 2020 2022 6e61 6d65 223a           "name":
+00006730: 2022 6765 6574 6f6f 6c62 6f78 222c 0d0a   "geetoolbox",..
+00006740: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006750: 2274 6f6f 6c74 6970 223a 2022 4745 4520  "tooltip": "GEE 
+00006760: 546f 6f6c 626f 7820 666f 7220 636c 6f75  Toolbox for clou
+00006770: 6420 636f 6d70 7574 696e 6722 2c0d 0a20  d computing",.. 
+00006780: 2020 2020 2020 2020 2020 207d 2c0d 0a20             },.. 
+00006790: 2020 2020 2020 2020 2020 2022 6d61 7022             "map"
+000067a0: 3a20 7b0d 0a20 2020 2020 2020 2020 2020  : {..           
+000067b0: 2020 2020 2022 6e61 6d65 223a 2022 6261       "name": "ba
+000067c0: 7365 6d61 7022 2c0d 0a20 2020 2020 2020  semap",..       
+000067d0: 2020 2020 2020 2020 2022 746f 6f6c 7469           "toolti
+000067e0: 7022 3a20 2243 6861 6e67 6520 6261 7365  p": "Change base
+000067f0: 6d61 7022 2c0d 0a20 2020 2020 2020 2020  map",..         
+00006800: 2020 207d 2c0d 0a20 2020 2020 2020 2020     },..         
+00006810: 2020 2022 676c 6f62 6522 3a20 7b0d 0a20     "globe": {.. 
+00006820: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00006830: 6e61 6d65 223a 2022 7469 6d65 6c61 7073  name": "timelaps
+00006840: 6522 2c0d 0a20 2020 2020 2020 2020 2020  e",..           
+00006850: 2020 2020 2022 746f 6f6c 7469 7022 3a20       "tooltip": 
+00006860: 2243 7265 6174 6520 7469 6d65 6c61 7073  "Create timelaps
+00006870: 6522 2c0d 0a20 2020 2020 2020 2020 2020  e",..           
+00006880: 207d 2c0d 0a20 2020 2020 2020 2020 2020   },..           
+00006890: 2022 6661 7374 2d66 6f72 7761 7264 223a   "fast-forward":
+000068a0: 207b 0d0a 2020 2020 2020 2020 2020 2020   {..            
+000068b0: 2020 2020 226e 616d 6522 3a20 2274 696d      "name": "tim
+000068c0: 6573 6c69 6465 7222 2c0d 0a20 2020 2020  eslider",..     
+000068d0: 2020 2020 2020 2020 2020 2022 746f 6f6c             "tool
+000068e0: 7469 7022 3a20 2241 6374 6976 6174 6520  tip": "Activate 
+000068f0: 7469 6d65 736c 6964 6572 222c 0d0a 2020  timeslider",..  
+00006900: 2020 2020 2020 2020 2020 7d2c 0d0a 2020            },..  
+00006910: 2020 2020 2020 2020 2020 2268 616e 642d            "hand-
+00006920: 6f2d 7570 223a 207b 0d0a 2020 2020 2020  o-up": {..      
+00006930: 2020 2020 2020 2020 2020 226e 616d 6522            "name"
+00006940: 3a20 2264 7261 7722 2c0d 0a20 2020 2020  : "draw",..     
+00006950: 2020 2020 2020 2020 2020 2022 746f 6f6c             "tool
+00006960: 7469 7022 3a20 2243 6f6c 6c65 6374 2074  tip": "Collect t
+00006970: 7261 696e 696e 6720 7361 6d70 6c65 7322  raining samples"
+00006980: 2c0d 0a20 2020 2020 2020 2020 2020 207d  ,..            }
+00006990: 2c0d 0a20 2020 2020 2020 2020 2020 2022  ,..            "
+000069a0: 6c69 6e65 2d63 6861 7274 223a 207b 0d0a  line-chart": {..
+000069b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000069c0: 226e 616d 6522 3a20 2274 7261 6e73 6563  "name": "transec
+000069d0: 7422 2c0d 0a20 2020 2020 2020 2020 2020  t",..           
+000069e0: 2020 2020 2022 746f 6f6c 7469 7022 3a20       "tooltip": 
+000069f0: 2243 7265 6174 696e 6720 616e 6420 706c  "Creating and pl
+00006a00: 6f74 7469 6e67 2074 7261 6e73 6563 7473  otting transects
+00006a10: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
+00006a20: 7d2c 0d0a 2020 2020 2020 2020 2020 2020  },..            
+00006a30: 2272 616e 646f 6d22 3a20 7b0d 0a20 2020  "random": {..   
+00006a40: 2020 2020 2020 2020 2020 2020 2022 6e61               "na
+00006a50: 6d65 223a 2022 7361 6e6b 6565 222c 0d0a  me": "sankee",..
+00006a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006a70: 2274 6f6f 6c74 6970 223a 2022 5361 6e6b  "tooltip": "Sank
+00006a80: 6579 2070 6c6f 7473 222c 0d0a 2020 2020  ey plots",..    
+00006a90: 2020 2020 2020 2020 7d2c 0d0a 2020 2020          },..    
+00006aa0: 2020 2020 2020 2020 2261 646a 7573 7422          "adjust"
+00006ab0: 3a20 7b0d 0a20 2020 2020 2020 2020 2020  : {..           
+00006ac0: 2020 2020 2022 6e61 6d65 223a 2022 706c       "name": "pl
+00006ad0: 616e 6574 222c 0d0a 2020 2020 2020 2020  anet",..        
+00006ae0: 2020 2020 2020 2020 2274 6f6f 6c74 6970          "tooltip
+00006af0: 223a 2022 506c 616e 6574 2069 6d61 6765  ": "Planet image
+00006b00: 7279 222c 0d0a 2020 2020 2020 2020 2020  ry",..          
+00006b10: 2020 7d2c 0d0a 2020 2020 2020 2020 2020    },..          
+00006b20: 2020 2273 6d69 6c65 2d6f 223a 207b 0d0a    "smile-o": {..
+00006b30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006b40: 226e 616d 6522 3a20 2270 6c61 6365 686f  "name": "placeho
+00006b50: 6c64 222c 0d0a 2020 2020 2020 2020 2020  ld",..          
+00006b60: 2020 2020 2020 2274 6f6f 6c74 6970 223a        "tooltip":
+00006b70: 2022 5468 6973 2069 7320 6120 706c 6163   "This is a plac
+00006b80: 6568 6f6c 6422 2c0d 0a20 2020 2020 2020  ehold",..       
+00006b90: 2020 2020 207d 2c0d 0a20 2020 2020 2020       },..       
+00006ba0: 2020 2020 2022 7370 696e 6e65 7222 3a20       "spinner": 
+00006bb0: 7b0d 0a20 2020 2020 2020 2020 2020 2020  {..             
+00006bc0: 2020 2022 6e61 6d65 223a 2022 706c 6163     "name": "plac
+00006bd0: 6568 6f6c 6432 222c 0d0a 2020 2020 2020  ehold2",..      
+00006be0: 2020 2020 2020 2020 2020 2274 6f6f 6c74            "toolt
+00006bf0: 6970 223a 2022 5468 6973 2069 7320 6120  ip": "This is a 
+00006c00: 706c 6163 6568 6f6c 6422 2c0d 0a20 2020  placehold",..   
+00006c10: 2020 2020 2020 2020 207d 2c0d 0a20 2020           },..   
+00006c20: 2020 2020 2020 2020 2022 7175 6573 7469           "questi
+00006c30: 6f6e 223a 207b 0d0a 2020 2020 2020 2020  on": {..        
+00006c40: 2020 2020 2020 2020 226e 616d 6522 3a20          "name": 
+00006c50: 2268 656c 7022 2c0d 0a20 2020 2020 2020  "help",..       
+00006c60: 2020 2020 2020 2020 2022 746f 6f6c 7469           "toolti
+00006c70: 7022 3a20 2247 6574 2068 656c 7022 2c0d  p": "Get help",.
+00006c80: 0a20 2020 2020 2020 2020 2020 207d 2c0d  .            },.
+00006c90: 0a20 2020 2020 2020 207d 0d0a 0d0a 2020  .        }....  
+00006ca0: 2020 2020 2020 2320 6966 206b 7761 7267        # if kwarg
+00006cb0: 735b 2275 7365 5f76 6f69 6c61 225d 3a0d  s["use_voila"]:.
+00006cc0: 0a20 2020 2020 2020 2023 2020 2020 2076  .        #     v
+00006cd0: 6f69 6c61 5f74 6f6f 6c73 203d 205b 2263  oila_tools = ["c
+00006ce0: 616d 6572 6122 2c20 2266 6f6c 6465 722d  amera", "folder-
+00006cf0: 6f70 656e 222c 2022 636c 6f75 642d 646f  open", "cloud-do
+00006d00: 776e 6c6f 6164 222c 2022 6765 6172 7322  wnload", "gears"
+00006d10: 5d0d 0a0d 0a20 2020 2020 2020 2023 2020  ]....        #  
+00006d20: 2020 2066 6f72 2069 7465 6d20 696e 2076     for item in v
+00006d30: 6f69 6c61 5f74 6f6f 6c73 3a0d 0a20 2020  oila_tools:..   
+00006d40: 2020 2020 2023 2020 2020 2020 2020 2069       #         i
+00006d50: 6620 6974 656d 2069 6e20 746f 6f6c 732e  f item in tools.
+00006d60: 6b65 7973 2829 3a0d 0a20 2020 2020 2020  keys():..       
+00006d70: 2023 2020 2020 2020 2020 2020 2020 2064   #             d
+00006d80: 656c 2074 6f6f 6c73 5b69 7465 6d5d 0d0a  el tools[item]..
+00006d90: 0d0a 2020 2020 2020 2020 6963 6f6e 7320  ..        icons 
+00006da0: 3d20 6c69 7374 2874 6f6f 6c73 2e6b 6579  = list(tools.key
+00006db0: 7328 2929 0d0a 2020 2020 2020 2020 746f  s())..        to
+00006dc0: 6f6c 7469 7073 203d 205b 6974 656d 5b22  oltips = [item["
+00006dd0: 746f 6f6c 7469 7022 5d20 666f 7220 6974  tooltip"] for it
+00006de0: 656d 2069 6e20 6c69 7374 2874 6f6f 6c73  em in list(tools
+00006df0: 2e76 616c 7565 7328 2929 5d0d 0a0d 0a20  .values())].... 
+00006e00: 2020 2020 2020 2069 636f 6e5f 7769 6474         icon_widt
+00006e10: 6820 3d20 2233 3270 7822 0d0a 2020 2020  h = "32px"..    
+00006e20: 2020 2020 6963 6f6e 5f68 6569 6768 7420      icon_height 
+00006e30: 3d20 2233 3270 7822 0d0a 2020 2020 2020  = "32px"..      
+00006e40: 2020 6e5f 636f 6c73 203d 2033 0d0a 2020    n_cols = 3..  
+00006e50: 2020 2020 2020 6e5f 726f 7773 203d 206d        n_rows = m
+00006e60: 6174 682e 6365 696c 286c 656e 2869 636f  ath.ceil(len(ico
+00006e70: 6e73 2920 2f20 6e5f 636f 6c73 290d 0a0d  ns) / n_cols)...
+00006e80: 0a20 2020 2020 2020 2074 6f6f 6c62 6172  .        toolbar
+00006e90: 5f67 7269 6420 3d20 7769 6467 6574 732e  _grid = widgets.
+00006ea0: 4772 6964 426f 7828 0d0a 2020 2020 2020  GridBox(..      
+00006eb0: 2020 2020 2020 6368 696c 6472 656e 3d5b        children=[
+00006ec0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00006ed0: 2020 7769 6467 6574 732e 546f 6767 6c65    widgets.Toggle
+00006ee0: 4275 7474 6f6e 280d 0a20 2020 2020 2020  Button(..       
+00006ef0: 2020 2020 2020 2020 2020 2020 206c 6179               lay
+00006f00: 6f75 743d 7769 6467 6574 732e 4c61 796f  out=widgets.Layo
+00006f10: 7574 280d 0a20 2020 2020 2020 2020 2020  ut(..           
+00006f20: 2020 2020 2020 2020 2020 2020 2077 6964               wid
+00006f30: 7468 3d22 6175 746f 222c 2068 6569 6768  th="auto", heigh
+00006f40: 743d 2261 7574 6f22 2c20 7061 6464 696e  t="auto", paddin
+00006f50: 673d 2230 7078 2030 7078 2030 7078 2034  g="0px 0px 0px 4
+00006f60: 7078 220d 0a20 2020 2020 2020 2020 2020  px"..           
+00006f70: 2020 2020 2020 2020 2029 2c0d 0a20 2020           ),..   
+00006f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006f90: 2062 7574 746f 6e5f 7374 796c 653d 2270   button_style="p
+00006fa0: 7269 6d61 7279 222c 0d0a 2020 2020 2020  rimary",..      
+00006fb0: 2020 2020 2020 2020 2020 2020 2020 6963                ic
+00006fc0: 6f6e 3d69 636f 6e73 5b69 5d2c 0d0a 2020  on=icons[i],..  
+00006fd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006fe0: 2020 746f 6f6c 7469 703d 746f 6f6c 7469    tooltip=toolti
+00006ff0: 7073 5b69 5d2c 0d0a 2020 2020 2020 2020  ps[i],..        
+00007000: 2020 2020 2020 2020 290d 0a20 2020 2020          )..     
+00007010: 2020 2020 2020 2020 2020 2066 6f72 2069             for i
+00007020: 2069 6e20 7261 6e67 6528 6c65 6e28 6963   in range(len(ic
+00007030: 6f6e 7329 290d 0a20 2020 2020 2020 2020  ons))..         
+00007040: 2020 205d 2c0d 0a20 2020 2020 2020 2020     ],..         
+00007050: 2020 206c 6179 6f75 743d 7769 6467 6574     layout=widget
+00007060: 732e 4c61 796f 7574 280d 0a20 2020 2020  s.Layout(..     
+00007070: 2020 2020 2020 2020 2020 2077 6964 7468             width
+00007080: 3d22 3130 3970 7822 2c0d 0a20 2020 2020  ="109px",..     
+00007090: 2020 2020 2020 2020 2020 2067 7269 645f             grid_
+000070a0: 7465 6d70 6c61 7465 5f63 6f6c 756d 6e73  template_columns
+000070b0: 3d28 6963 6f6e 5f77 6964 7468 202b 2022  =(icon_width + "
+000070c0: 2022 2920 2a20 6e5f 636f 6c73 2c0d 0a20   ") * n_cols,.. 
+000070d0: 2020 2020 2020 2020 2020 2020 2020 2067                 g
+000070e0: 7269 645f 7465 6d70 6c61 7465 5f72 6f77  rid_template_row
+000070f0: 733d 2869 636f 6e5f 6865 6967 6874 202b  s=(icon_height +
+00007100: 2022 2022 2920 2a20 6e5f 726f 7773 2c0d   " ") * n_rows,.
+00007110: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00007120: 2067 7269 645f 6761 703d 2231 7078 2031   grid_gap="1px 1
+00007130: 7078 222c 0d0a 2020 2020 2020 2020 2020  px",..          
+00007140: 2020 2020 2020 7061 6464 696e 673d 2235        padding="5
+00007150: 7078 222c 0d0a 2020 2020 2020 2020 2020  px",..          
+00007160: 2020 292c 0d0a 2020 2020 2020 2020 290d    ),..        ).
+00007170: 0a20 2020 2020 2020 2073 656c 662e 746f  .        self.to
+00007180: 6f6c 6261 7220 3d20 746f 6f6c 6261 725f  olbar = toolbar_
+00007190: 6772 6964 0d0a 0d0a 2020 2020 2020 2020  grid....        
+000071a0: 6465 6620 746f 6f6c 5f63 616c 6c62 6163  def tool_callbac
+000071b0: 6b28 6368 616e 6765 293a 0d0a 0d0a 2020  k(change):....  
+000071c0: 2020 2020 2020 2020 2020 6966 2063 6861            if cha
+000071d0: 6e67 655b 226e 6577 225d 3a0d 0a20 2020  nge["new"]:..   
+000071e0: 2020 2020 2020 2020 2020 2020 2063 7572               cur
+000071f0: 7265 6e74 5f74 6f6f 6c20 3d20 6368 616e  rent_tool = chan
+00007200: 6765 5b22 6f77 6e65 7222 5d0d 0a20 2020  ge["owner"]..   
+00007210: 2020 2020 2020 2020 2020 2020 2066 6f72               for
+00007220: 2074 6f6f 6c20 696e 2074 6f6f 6c62 6172   tool in toolbar
+00007230: 5f67 7269 642e 6368 696c 6472 656e 3a0d  _grid.children:.
+00007240: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00007250: 2020 2020 2069 6620 746f 6f6c 2069 7320       if tool is 
+00007260: 6e6f 7420 6375 7272 656e 745f 746f 6f6c  not current_tool
+00007270: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00007280: 2020 2020 2020 2020 2020 2074 6f6f 6c2e             tool.
+00007290: 7661 6c75 6520 3d20 4661 6c73 650d 0a20  value = False.. 
+000072a0: 2020 2020 2020 2020 2020 2020 2020 2074                 t
+000072b0: 6f6f 6c20 3d20 6368 616e 6765 5b22 6f77  ool = change["ow
+000072c0: 6e65 7222 5d0d 0a20 2020 2020 2020 2020  ner"]..         
+000072d0: 2020 2020 2020 2074 6f6f 6c5f 6e61 6d65         tool_name
+000072e0: 203d 2074 6f6f 6c73 5b74 6f6f 6c2e 6963   = tools[tool.ic
+000072f0: 6f6e 5d5b 226e 616d 6522 5d0d 0a20 2020  on]["name"]..   
+00007300: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00007310: 746f 6f6c 5f6e 616d 6520 3d3d 2022 746f  tool_name == "to
+00007320: 5f69 6d61 6765 223a 0d0a 2020 2020 2020  _image":..      
+00007330: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00007340: 2074 6f6f 6c5f 6f75 7470 7574 5f63 6f6e   tool_output_con
+00007350: 7472 6f6c 206e 6f74 2069 6e20 7365 6c66  trol not in self
+00007360: 2e63 6f6e 7472 6f6c 733a 0d0a 2020 2020  .controls:..    
+00007370: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007380: 2020 2020 7365 6c66 2e61 6464 5f63 6f6e      self.add_con
+00007390: 7472 6f6c 2874 6f6f 6c5f 6f75 7470 7574  trol(tool_output
+000073a0: 5f63 6f6e 7472 6f6c 290d 0a20 2020 2020  _control)..     
+000073b0: 2020 2020 2020 2020 2020 2020 2020 2077                 w
+000073c0: 6974 6820 746f 6f6c 5f6f 7574 7075 743a  ith tool_output:
+000073d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000073e0: 2020 2020 2020 2020 2020 746f 6f6c 5f6f            tool_o
+000073f0: 7574 7075 742e 636c 6561 725f 6f75 7470  utput.clear_outp
+00007400: 7574 2829 0d0a 2020 2020 2020 2020 2020  ut()..          
+00007410: 2020 2020 2020 2020 2020 2020 2020 6469                di
+00007420: 7370 6c61 7928 7361 7665 5f6d 6170 5f77  splay(save_map_w
+00007430: 6964 6765 7429 0d0a 2020 2020 2020 2020  idget)..        
+00007440: 2020 2020 2020 2020 656c 6966 2074 6f6f          elif too
+00007450: 6c5f 6e61 6d65 203d 3d20 2265 7261 7365  l_name == "erase
+00007460: 7222 3a0d 0a20 2020 2020 2020 2020 2020  r":..           
+00007470: 2020 2020 2020 2020 2073 656c 662e 7265           self.re
+00007480: 6d6f 7665 5f64 7261 776e 5f66 6561 7475  move_drawn_featu
+00007490: 7265 7328 290d 0a20 2020 2020 2020 2020  res()..         
+000074a0: 2020 2020 2020 2020 2020 2074 6f6f 6c2e             tool.
+000074b0: 7661 6c75 6520 3d20 4661 6c73 650d 0a20  value = False.. 
+000074c0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+000074d0: 6c69 6620 746f 6f6c 5f6e 616d 6520 3d3d  lif tool_name ==
+000074e0: 2022 696e 7370 6563 746f 7222 3a0d 0a20   "inspector":.. 
 000074f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007500: 2020 2020 2020 2020 696e 7370 6563 746f          inspecto
-00007510: 725f 6f75 7470 7574 2e63 6c65 6172 5f6f  r_output.clear_o
-00007520: 7574 7075 7428 290d 0a20 2020 2020 2020  utput()..       
-00007530: 2020 2020 2020 2020 2065 6c69 6620 746f           elif to
-00007540: 6f6c 5f6e 616d 6520 3d3d 2022 706c 6f74  ol_name == "plot
-00007550: 7469 6e67 223a 0d0a 2020 2020 2020 2020  ting":..        
-00007560: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00007570: 2e70 6c6f 745f 6368 6563 6b65 6420 3d20  .plot_checked = 
-00007580: 5472 7565 0d0a 2020 2020 2020 2020 2020  True..          
-00007590: 2020 2020 2020 2020 2020 706c 6f74 5f64            plot_d
-000075a0: 726f 7064 6f77 6e5f 7769 6467 6574 203d  ropdown_widget =
-000075b0: 2077 6964 6765 7473 2e44 726f 7064 6f77   widgets.Dropdow
-000075c0: 6e28 0d0a 2020 2020 2020 2020 2020 2020  n(..            
-000075d0: 2020 2020 2020 2020 2020 2020 6f70 7469              opti
-000075e0: 6f6e 733d 6c69 7374 2873 656c 662e 6565  ons=list(self.ee
-000075f0: 5f72 6173 7465 725f 6c61 7965 725f 6e61  _raster_layer_na
-00007600: 6d65 7329 2c0d 0a20 2020 2020 2020 2020  mes),..         
-00007610: 2020 2020 2020 2020 2020 2029 0d0a 2020             )..  
-00007620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007630: 2020 706c 6f74 5f64 726f 7064 6f77 6e5f    plot_dropdown_
-00007640: 7769 6467 6574 2e6c 6179 6f75 742e 7769  widget.layout.wi
-00007650: 6474 6820 3d20 2231 3865 7822 0d0a 2020  dth = "18ex"..  
-00007660: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007670: 2020 7365 6c66 2e70 6c6f 745f 6472 6f70    self.plot_drop
-00007680: 646f 776e 5f77 6964 6765 7420 3d20 706c  down_widget = pl
-00007690: 6f74 5f64 726f 7064 6f77 6e5f 7769 6467  ot_dropdown_widg
-000076a0: 6574 0d0a 2020 2020 2020 2020 2020 2020  et..            
-000076b0: 2020 2020 2020 2020 706c 6f74 5f64 726f          plot_dro
-000076c0: 7064 6f77 6e5f 636f 6e74 726f 6c20 3d20  pdown_control = 
-000076d0: 6970 796c 6561 666c 6574 2e57 6964 6765  ipyleaflet.Widge
-000076e0: 7443 6f6e 7472 6f6c 280d 0a20 2020 2020  tControl(..     
-000076f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007700: 2020 2077 6964 6765 743d 706c 6f74 5f64     widget=plot_d
-00007710: 726f 7064 6f77 6e5f 7769 6467 6574 2c20  ropdown_widget, 
-00007720: 706f 7369 7469 6f6e 3d22 746f 7072 6967  position="toprig
-00007730: 6874 220d 0a20 2020 2020 2020 2020 2020  ht"..           
-00007740: 2020 2020 2020 2020 2029 0d0a 2020 2020           )..    
-00007750: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007760: 7365 6c66 2e70 6c6f 745f 6472 6f70 646f  self.plot_dropdo
-00007770: 776e 5f63 6f6e 7472 6f6c 203d 2070 6c6f  wn_control = plo
-00007780: 745f 6472 6f70 646f 776e 5f63 6f6e 7472  t_dropdown_contr
-00007790: 6f6c 0d0a 2020 2020 2020 2020 2020 2020  ol..            
-000077a0: 2020 2020 2020 2020 7365 6c66 2e61 6464          self.add
-000077b0: 5f63 6f6e 7472 6f6c 2870 6c6f 745f 6472  _control(plot_dr
-000077c0: 6f70 646f 776e 5f63 6f6e 7472 6f6c 290d  opdown_control).
-000077d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000077e0: 2020 2020 2069 6620 7365 6c66 2e64 7261       if self.dra
-000077f0: 775f 636f 6e74 726f 6c20 696e 2073 656c  w_control in sel
-00007800: 662e 636f 6e74 726f 6c73 3a0d 0a20 2020  f.controls:..   
-00007810: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007820: 2020 2020 2073 656c 662e 7265 6d6f 7665       self.remove
-00007830: 5f63 6f6e 7472 6f6c 2873 656c 662e 6472  _control(self.dr
-00007840: 6177 5f63 6f6e 7472 6f6c 290d 0a20 2020  aw_control)..   
-00007850: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007860: 2073 656c 662e 6164 645f 636f 6e74 726f   self.add_contro
-00007870: 6c28 7365 6c66 2e64 7261 775f 636f 6e74  l(self.draw_cont
-00007880: 726f 6c5f 6c69 7465 290d 0a20 2020 2020  rol_lite)..     
-00007890: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-000078a0: 746f 6f6c 5f6e 616d 6520 3d3d 2022 6f70  tool_name == "op
-000078b0: 656e 5f64 6174 6122 3a0d 0a20 2020 2020  en_data":..     
-000078c0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-000078d0: 726f 6d20 2e74 6f6f 6c62 6172 2069 6d70  rom .toolbar imp
-000078e0: 6f72 7420 6f70 656e 5f64 6174 615f 7769  ort open_data_wi
-000078f0: 6467 6574 0d0a 0d0a 2020 2020 2020 2020  dget....        
-00007900: 2020 2020 2020 2020 2020 2020 6f70 656e              open
-00007910: 5f64 6174 615f 7769 6467 6574 2873 656c  _data_widget(sel
-00007920: 6629 0d0a 2020 2020 2020 2020 2020 2020  f)..            
-00007930: 2020 2020 656c 6966 2074 6f6f 6c5f 6e61      elif tool_na
-00007940: 6d65 203d 3d20 2263 6f6e 7665 7274 5f6a  me == "convert_j
-00007950: 7322 3a0d 0a20 2020 2020 2020 2020 2020  s":..           
-00007960: 2020 2020 2020 2020 2066 726f 6d20 2e74           from .t
-00007970: 6f6f 6c62 6172 2069 6d70 6f72 7420 636f  oolbar import co
-00007980: 6e76 6572 745f 6a73 3270 790d 0a0d 0a20  nvert_js2py.... 
+00007500: 2020 2073 656c 662e 696e 7370 6563 746f     self.inspecto
+00007510: 725f 6368 6563 6b65 6420 3d20 746f 6f6c  r_checked = tool
+00007520: 2e76 616c 7565 0d0a 2020 2020 2020 2020  .value..        
+00007530: 2020 2020 2020 2020 2020 2020 6966 206e              if n
+00007540: 6f74 2073 656c 662e 696e 7370 6563 746f  ot self.inspecto
+00007550: 725f 6368 6563 6b65 643a 0d0a 2020 2020  r_checked:..    
+00007560: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007570: 2020 2020 696e 7370 6563 746f 725f 6f75      inspector_ou
+00007580: 7470 7574 2e63 6c65 6172 5f6f 7574 7075  tput.clear_outpu
+00007590: 7428 290d 0a20 2020 2020 2020 2020 2020  t()..           
+000075a0: 2020 2020 2065 6c69 6620 746f 6f6c 5f6e       elif tool_n
+000075b0: 616d 6520 3d3d 2022 706c 6f74 7469 6e67  ame == "plotting
+000075c0: 223a 0d0a 2020 2020 2020 2020 2020 2020  ":..            
+000075d0: 2020 2020 2020 2020 7365 6c66 2e70 6c6f          self.plo
+000075e0: 745f 6368 6563 6b65 6420 3d20 5472 7565  t_checked = True
+000075f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00007600: 2020 2020 2020 706c 6f74 5f64 726f 7064        plot_dropd
+00007610: 6f77 6e5f 7769 6467 6574 203d 2077 6964  own_widget = wid
+00007620: 6765 7473 2e44 726f 7064 6f77 6e28 0d0a  gets.Dropdown(..
+00007630: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007640: 2020 2020 2020 2020 6f70 7469 6f6e 733d          options=
+00007650: 6c69 7374 2873 656c 662e 6565 5f72 6173  list(self.ee_ras
+00007660: 7465 725f 6c61 7965 725f 6e61 6d65 7329  ter_layer_names)
+00007670: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+00007680: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
+00007690: 2020 2020 2020 2020 2020 2020 2020 706c                pl
+000076a0: 6f74 5f64 726f 7064 6f77 6e5f 7769 6467  ot_dropdown_widg
+000076b0: 6574 2e6c 6179 6f75 742e 7769 6474 6820  et.layout.width 
+000076c0: 3d20 2231 3865 7822 0d0a 2020 2020 2020  = "18ex"..      
+000076d0: 2020 2020 2020 2020 2020 2020 2020 7365                se
+000076e0: 6c66 2e70 6c6f 745f 6472 6f70 646f 776e  lf.plot_dropdown
+000076f0: 5f77 6964 6765 7420 3d20 706c 6f74 5f64  _widget = plot_d
+00007700: 726f 7064 6f77 6e5f 7769 6467 6574 0d0a  ropdown_widget..
+00007710: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007720: 2020 2020 706c 6f74 5f64 726f 7064 6f77      plot_dropdow
+00007730: 6e5f 636f 6e74 726f 6c20 3d20 6970 796c  n_control = ipyl
+00007740: 6561 666c 6574 2e57 6964 6765 7443 6f6e  eaflet.WidgetCon
+00007750: 7472 6f6c 280d 0a20 2020 2020 2020 2020  trol(..         
+00007760: 2020 2020 2020 2020 2020 2020 2020 2077                 w
+00007770: 6964 6765 743d 706c 6f74 5f64 726f 7064  idget=plot_dropd
+00007780: 6f77 6e5f 7769 6467 6574 2c20 706f 7369  own_widget, posi
+00007790: 7469 6f6e 3d22 746f 7072 6967 6874 220d  tion="topright".
+000077a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000077b0: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
+000077c0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+000077d0: 2e70 6c6f 745f 6472 6f70 646f 776e 5f63  .plot_dropdown_c
+000077e0: 6f6e 7472 6f6c 203d 2070 6c6f 745f 6472  ontrol = plot_dr
+000077f0: 6f70 646f 776e 5f63 6f6e 7472 6f6c 0d0a  opdown_control..
+00007800: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007810: 2020 2020 7365 6c66 2e61 6464 5f63 6f6e      self.add_con
+00007820: 7472 6f6c 2870 6c6f 745f 6472 6f70 646f  trol(plot_dropdo
+00007830: 776e 5f63 6f6e 7472 6f6c 290d 0a20 2020  wn_control)..   
+00007840: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007850: 2069 6620 7365 6c66 2e64 7261 775f 636f   if self.draw_co
+00007860: 6e74 726f 6c20 696e 2073 656c 662e 636f  ntrol in self.co
+00007870: 6e74 726f 6c73 3a0d 0a20 2020 2020 2020  ntrols:..       
+00007880: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007890: 2073 656c 662e 7265 6d6f 7665 5f63 6f6e   self.remove_con
+000078a0: 7472 6f6c 2873 656c 662e 6472 6177 5f63  trol(self.draw_c
+000078b0: 6f6e 7472 6f6c 290d 0a20 2020 2020 2020  ontrol)..       
+000078c0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+000078d0: 662e 6164 645f 636f 6e74 726f 6c28 7365  f.add_control(se
+000078e0: 6c66 2e64 7261 775f 636f 6e74 726f 6c5f  lf.draw_control_
+000078f0: 6c69 7465 290d 0a20 2020 2020 2020 2020  lite)..         
+00007900: 2020 2020 2020 2065 6c69 6620 746f 6f6c         elif tool
+00007910: 5f6e 616d 6520 3d3d 2022 6f70 656e 5f64  _name == "open_d
+00007920: 6174 6122 3a0d 0a20 2020 2020 2020 2020  ata":..         
+00007930: 2020 2020 2020 2020 2020 2066 726f 6d20             from 
+00007940: 2e74 6f6f 6c62 6172 2069 6d70 6f72 7420  .toolbar import 
+00007950: 6f70 656e 5f64 6174 615f 7769 6467 6574  open_data_widget
+00007960: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00007970: 2020 2020 2020 2020 6f70 656e 5f64 6174          open_dat
+00007980: 615f 7769 6467 6574 2873 656c 6629 0d0a  a_widget(self)..
 00007990: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000079a0: 2020 2063 6f6e 7665 7274 5f6a 7332 7079     convert_js2py
-000079b0: 2873 656c 6629 0d0a 2020 2020 2020 2020  (self)..        
-000079c0: 2020 2020 2020 2020 656c 6966 2074 6f6f          elif too
-000079d0: 6c5f 6e61 6d65 203d 3d20 2277 6869 7465  l_name == "white
-000079e0: 626f 7822 3a0d 0a20 2020 2020 2020 2020  box":..         
-000079f0: 2020 2020 2020 2020 2020 2069 6d70 6f72             impor
-00007a00: 7420 7768 6974 6562 6f78 6775 692e 7768  t whiteboxgui.wh
-00007a10: 6974 6562 6f78 6775 6920 6173 2077 6274  iteboxgui as wbt
-00007a20: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00007a30: 2020 2020 2020 2020 746f 6f6c 735f 6469          tools_di
-00007a40: 6374 203d 2077 6274 2e67 6574 5f77 6274  ct = wbt.get_wbt
-00007a50: 5f64 6963 7428 290d 0a20 2020 2020 2020  _dict()..       
-00007a60: 2020 2020 2020 2020 2020 2020 2077 6274               wbt
-00007a70: 5f74 6f6f 6c62 6f78 203d 2077 6274 2e62  _toolbox = wbt.b
-00007a80: 7569 6c64 5f74 6f6f 6c62 6f78 280d 0a20  uild_toolbox(.. 
+000079a0: 656c 6966 2074 6f6f 6c5f 6e61 6d65 203d  elif tool_name =
+000079b0: 3d20 2263 6f6e 7665 7274 5f6a 7322 3a0d  = "convert_js":.
+000079c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000079d0: 2020 2020 2066 726f 6d20 2e74 6f6f 6c62       from .toolb
+000079e0: 6172 2069 6d70 6f72 7420 636f 6e76 6572  ar import conver
+000079f0: 745f 6a73 3270 790d 0a0d 0a20 2020 2020  t_js2py....     
+00007a00: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+00007a10: 6f6e 7665 7274 5f6a 7332 7079 2873 656c  onvert_js2py(sel
+00007a20: 6629 0d0a 2020 2020 2020 2020 2020 2020  f)..            
+00007a30: 2020 2020 656c 6966 2074 6f6f 6c5f 6e61      elif tool_na
+00007a40: 6d65 203d 3d20 2277 6869 7465 626f 7822  me == "whitebox"
+00007a50: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00007a60: 2020 2020 2020 2069 6d70 6f72 7420 7768         import wh
+00007a70: 6974 6562 6f78 6775 692e 7768 6974 6562  iteboxgui.whiteb
+00007a80: 6f78 6775 6920 6173 2077 6274 0d0a 0d0a  oxgui as wbt....
 00007a90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007aa0: 2020 2020 2020 2074 6f6f 6c73 5f64 6963         tools_dic
-00007ab0: 742c 0d0a 2020 2020 2020 2020 2020 2020  t,..            
-00007ac0: 2020 2020 2020 2020 2020 2020 6d61 785f              max_
-00007ad0: 7769 6474 683d 2238 3030 7078 222c 0d0a  width="800px",..
-00007ae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007af0: 2020 2020 2020 2020 6d61 785f 6865 6967          max_heig
-00007b00: 6874 3d22 3530 3070 7822 2c0d 0a20 2020  ht="500px",..   
-00007b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007b20: 2020 2020 2073 616e 6462 6f78 5f70 6174       sandbox_pat
-00007b30: 683d 7365 6c66 2e73 616e 6462 6f78 5f70  h=self.sandbox_p
-00007b40: 6174 682c 0d0a 2020 2020 2020 2020 2020  ath,..          
-00007b50: 2020 2020 2020 2020 2020 290d 0a20 2020            )..   
-00007b60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007b70: 2077 6274 5f63 6f6e 7472 6f6c 203d 2069   wbt_control = i
-00007b80: 7079 6c65 6166 6c65 742e 5769 6467 6574  pyleaflet.Widget
-00007b90: 436f 6e74 726f 6c28 0d0a 2020 2020 2020  Control(..      
-00007ba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007bb0: 2020 7769 6467 6574 3d77 6274 5f74 6f6f    widget=wbt_too
-00007bc0: 6c62 6f78 2c20 706f 7369 7469 6f6e 3d22  lbox, position="
-00007bd0: 626f 7474 6f6d 7269 6768 7422 0d0a 2020  bottomright"..  
-00007be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007bf0: 2020 290d 0a20 2020 2020 2020 2020 2020    )..           
-00007c00: 2020 2020 2020 2020 2073 656c 662e 7768           self.wh
-00007c10: 6974 6562 6f78 203d 2077 6274 5f63 6f6e  itebox = wbt_con
-00007c20: 7472 6f6c 0d0a 2020 2020 2020 2020 2020  trol..          
-00007c30: 2020 2020 2020 2020 2020 7365 6c66 2e61            self.a
-00007c40: 6464 5f63 6f6e 7472 6f6c 2877 6274 5f63  dd_control(wbt_c
-00007c50: 6f6e 7472 6f6c 290d 0a20 2020 2020 2020  ontrol)..       
-00007c60: 2020 2020 2020 2020 2065 6c69 6620 746f           elif to
-00007c70: 6f6c 5f6e 616d 6520 3d3d 2022 6765 6574  ol_name == "geet
-00007c80: 6f6f 6c62 6f78 223a 0d0a 2020 2020 2020  oolbox":..      
-00007c90: 2020 2020 2020 2020 2020 2020 2020 6672                fr
-00007ca0: 6f6d 202e 746f 6f6c 6261 7220 696d 706f  om .toolbar impo
-00007cb0: 7274 2062 7569 6c64 5f74 6f6f 6c62 6f78  rt build_toolbox
-00007cc0: 2c20 6765 745f 746f 6f6c 735f 6469 6374  , get_tools_dict
-00007cd0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00007ce0: 2020 2020 2020 2020 746f 6f6c 735f 6469          tools_di
-00007cf0: 6374 203d 2067 6574 5f74 6f6f 6c73 5f64  ct = get_tools_d
-00007d00: 6963 7428 290d 0a20 2020 2020 2020 2020  ict()..         
-00007d10: 2020 2020 2020 2020 2020 2067 6565 5f74             gee_t
-00007d20: 6f6f 6c62 6f78 203d 2062 7569 6c64 5f74  oolbox = build_t
-00007d30: 6f6f 6c62 6f78 280d 0a20 2020 2020 2020  oolbox(..       
+00007aa0: 2020 2020 746f 6f6c 735f 6469 6374 203d      tools_dict =
+00007ab0: 2077 6274 2e67 6574 5f77 6274 5f64 6963   wbt.get_wbt_dic
+00007ac0: 7428 290d 0a20 2020 2020 2020 2020 2020  t()..           
+00007ad0: 2020 2020 2020 2020 2077 6274 5f74 6f6f           wbt_too
+00007ae0: 6c62 6f78 203d 2077 6274 2e62 7569 6c64  lbox = wbt.build
+00007af0: 5f74 6f6f 6c62 6f78 280d 0a20 2020 2020  _toolbox(..     
+00007b00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007b10: 2020 2074 6f6f 6c73 5f64 6963 742c 0d0a     tools_dict,..
+00007b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007b30: 2020 2020 2020 2020 6d61 785f 7769 6474          max_widt
+00007b40: 683d 2238 3030 7078 222c 0d0a 2020 2020  h="800px",..    
+00007b50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007b60: 2020 2020 6d61 785f 6865 6967 6874 3d22      max_height="
+00007b70: 3530 3070 7822 2c0d 0a20 2020 2020 2020  500px",..       
+00007b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007b90: 2073 616e 6462 6f78 5f70 6174 683d 7365   sandbox_path=se
+00007ba0: 6c66 2e73 616e 6462 6f78 5f70 6174 682c  lf.sandbox_path,
+00007bb0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00007bc0: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
+00007bd0: 2020 2020 2020 2020 2020 2020 2077 6274               wbt
+00007be0: 5f63 6f6e 7472 6f6c 203d 2069 7079 6c65  _control = ipyle
+00007bf0: 6166 6c65 742e 5769 6467 6574 436f 6e74  aflet.WidgetCont
+00007c00: 726f 6c28 0d0a 2020 2020 2020 2020 2020  rol(..          
+00007c10: 2020 2020 2020 2020 2020 2020 2020 7769                wi
+00007c20: 6467 6574 3d77 6274 5f74 6f6f 6c62 6f78  dget=wbt_toolbox
+00007c30: 2c20 706f 7369 7469 6f6e 3d22 626f 7474  , position="bott
+00007c40: 6f6d 7269 6768 7422 0d0a 2020 2020 2020  omright"..      
+00007c50: 2020 2020 2020 2020 2020 2020 2020 290d                ).
+00007c60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00007c70: 2020 2020 2073 656c 662e 7768 6974 6562       self.whiteb
+00007c80: 6f78 203d 2077 6274 5f63 6f6e 7472 6f6c  ox = wbt_control
+00007c90: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00007ca0: 2020 2020 2020 7365 6c66 2e61 6464 5f63        self.add_c
+00007cb0: 6f6e 7472 6f6c 2877 6274 5f63 6f6e 7472  ontrol(wbt_contr
+00007cc0: 6f6c 290d 0a20 2020 2020 2020 2020 2020  ol)..           
+00007cd0: 2020 2020 2065 6c69 6620 746f 6f6c 5f6e       elif tool_n
+00007ce0: 616d 6520 3d3d 2022 6765 6574 6f6f 6c62  ame == "geetoolb
+00007cf0: 6f78 223a 0d0a 2020 2020 2020 2020 2020  ox":..          
+00007d00: 2020 2020 2020 2020 2020 6672 6f6d 202e            from .
+00007d10: 746f 6f6c 6261 7220 696d 706f 7274 2062  toolbar import b
+00007d20: 7569 6c64 5f74 6f6f 6c62 6f78 2c20 6765  uild_toolbox, ge
+00007d30: 745f 746f 6f6c 735f 6469 6374 0d0a 0d0a  t_tools_dict....
 00007d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007d50: 2074 6f6f 6c73 5f64 6963 742c 206d 6178   tools_dict, max
-00007d60: 5f77 6964 7468 3d22 3830 3070 7822 2c20  _width="800px", 
-00007d70: 6d61 785f 6865 6967 6874 3d22 3530 3070  max_height="500p
-00007d80: 7822 0d0a 2020 2020 2020 2020 2020 2020  x"..            
-00007d90: 2020 2020 2020 2020 290d 0a20 2020 2020          )..     
-00007da0: 2020 2020 2020 2020 2020 2020 2020 2067                 g
-00007db0: 6565 746f 6f6c 626f 785f 636f 6e74 726f  eetoolbox_contro
-00007dc0: 6c20 3d20 6970 796c 6561 666c 6574 2e57  l = ipyleaflet.W
-00007dd0: 6964 6765 7443 6f6e 7472 6f6c 280d 0a20  idgetControl(.. 
-00007de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007df0: 2020 2020 2020 2077 6964 6765 743d 6765         widget=ge
-00007e00: 655f 746f 6f6c 626f 782c 2070 6f73 6974  e_toolbox, posit
-00007e10: 696f 6e3d 2262 6f74 746f 6d72 6967 6874  ion="bottomright
-00007e20: 220d 0a20 2020 2020 2020 2020 2020 2020  "..             
-00007e30: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
-00007e40: 2020 2020 2020 2020 2020 2020 2020 7365                se
-00007e50: 6c66 2e67 6565 746f 6f6c 626f 7820 3d20  lf.geetoolbox = 
-00007e60: 6765 6574 6f6f 6c62 6f78 5f63 6f6e 7472  geetoolbox_contr
-00007e70: 6f6c 0d0a 2020 2020 2020 2020 2020 2020  ol..            
-00007e80: 2020 2020 2020 2020 7365 6c66 2e61 6464          self.add
-00007e90: 5f63 6f6e 7472 6f6c 2867 6565 746f 6f6c  _control(geetool
-00007ea0: 626f 785f 636f 6e74 726f 6c29 0d0a 0d0a  box_control)....
-00007eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007ec0: 656c 6966 2074 6f6f 6c5f 6e61 6d65 203d  elif tool_name =
-00007ed0: 3d20 2262 6173 656d 6170 223a 0d0a 2020  = "basemap":..  
+00007d50: 2020 2020 746f 6f6c 735f 6469 6374 203d      tools_dict =
+00007d60: 2067 6574 5f74 6f6f 6c73 5f64 6963 7428   get_tools_dict(
+00007d70: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00007d80: 2020 2020 2020 2067 6565 5f74 6f6f 6c62         gee_toolb
+00007d90: 6f78 203d 2062 7569 6c64 5f74 6f6f 6c62  ox = build_toolb
+00007da0: 6f78 280d 0a20 2020 2020 2020 2020 2020  ox(..           
+00007db0: 2020 2020 2020 2020 2020 2020 2074 6f6f               too
+00007dc0: 6c73 5f64 6963 742c 206d 6178 5f77 6964  ls_dict, max_wid
+00007dd0: 7468 3d22 3830 3070 7822 2c20 6d61 785f  th="800px", max_
+00007de0: 6865 6967 6874 3d22 3530 3070 7822 0d0a  height="500px"..
+00007df0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007e00: 2020 2020 290d 0a20 2020 2020 2020 2020      )..         
+00007e10: 2020 2020 2020 2020 2020 2067 6565 746f             geeto
+00007e20: 6f6c 626f 785f 636f 6e74 726f 6c20 3d20  olbox_control = 
+00007e30: 6970 796c 6561 666c 6574 2e57 6964 6765  ipyleaflet.Widge
+00007e40: 7443 6f6e 7472 6f6c 280d 0a20 2020 2020  tControl(..     
+00007e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007e60: 2020 2077 6964 6765 743d 6765 655f 746f     widget=gee_to
+00007e70: 6f6c 626f 782c 2070 6f73 6974 696f 6e3d  olbox, position=
+00007e80: 2262 6f74 746f 6d72 6967 6874 220d 0a20  "bottomright".. 
+00007e90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007ea0: 2020 2029 0d0a 2020 2020 2020 2020 2020     )..          
+00007eb0: 2020 2020 2020 2020 2020 7365 6c66 2e67            self.g
+00007ec0: 6565 746f 6f6c 626f 7820 3d20 6765 6574  eetoolbox = geet
+00007ed0: 6f6f 6c62 6f78 5f63 6f6e 7472 6f6c 0d0a  oolbox_control..
 00007ee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007ef0: 2020 6672 6f6d 202e 746f 6f6c 6261 7220    from .toolbar 
-00007f00: 696d 706f 7274 2063 6861 6e67 655f 6261  import change_ba
-00007f10: 7365 6d61 700d 0a0d 0a20 2020 2020 2020  semap....       
-00007f20: 2020 2020 2020 2020 2020 2020 2063 6861               cha
-00007f30: 6e67 655f 6261 7365 6d61 7028 7365 6c66  nge_basemap(self
-00007f40: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-00007f50: 2020 2065 6c69 6620 746f 6f6c 5f6e 616d     elif tool_nam
-00007f60: 6520 3d3d 2022 7469 6d65 6c61 7073 6522  e == "timelapse"
-00007f70: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00007f80: 2020 2020 2020 2066 726f 6d20 2e74 6f6f         from .too
-00007f90: 6c62 6172 2069 6d70 6f72 7420 7469 6d65  lbar import time
-00007fa0: 6c61 7073 650d 0a0d 0a20 2020 2020 2020  lapse....       
-00007fb0: 2020 2020 2020 2020 2020 2020 2074 696d               tim
-00007fc0: 656c 6170 7365 2873 656c 6629 0d0a 2020  elapse(self)..  
-00007fd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007fe0: 2020 7365 6c66 2e74 6f6f 6c62 6172 5f72    self.toolbar_r
-00007ff0: 6573 6574 2829 0d0a 2020 2020 2020 2020  eset()..        
-00008000: 2020 2020 2020 2020 656c 6966 2074 6f6f          elif too
-00008010: 6c5f 6e61 6d65 203d 3d20 2274 696d 6573  l_name == "times
-00008020: 6c69 6465 7222 3a0d 0a20 2020 2020 2020  lider":..       
-00008030: 2020 2020 2020 2020 2020 2020 2066 726f               fro
-00008040: 6d20 2e74 6f6f 6c62 6172 2069 6d70 6f72  m .toolbar impor
-00008050: 7420 7469 6d65 5f73 6c69 6465 720d 0a0d  t time_slider...
-00008060: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00008070: 2020 2020 2074 696d 655f 736c 6964 6572       time_slider
-00008080: 2873 656c 6629 0d0a 2020 2020 2020 2020  (self)..        
-00008090: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-000080a0: 2e74 6f6f 6c62 6172 5f72 6573 6574 2829  .toolbar_reset()
-000080b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000080c0: 2020 656c 6966 2074 6f6f 6c5f 6e61 6d65    elif tool_name
-000080d0: 203d 3d20 2264 7261 7722 3a0d 0a20 2020   == "draw":..   
-000080e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000080f0: 2066 726f 6d20 2e74 6f6f 6c62 6172 2069   from .toolbar i
-00008100: 6d70 6f72 7420 636f 6c6c 6563 745f 7361  mport collect_sa
-00008110: 6d70 6c65 730d 0a0d 0a20 2020 2020 2020  mples....       
-00008120: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-00008130: 662e 7472 6169 6e69 6e67 5f63 7472 6c20  f.training_ctrl 
-00008140: 3d20 4e6f 6e65 0d0a 2020 2020 2020 2020  = None..        
-00008150: 2020 2020 2020 2020 2020 2020 636f 6c6c              coll
-00008160: 6563 745f 7361 6d70 6c65 7328 7365 6c66  ect_samples(self
-00008170: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-00008180: 2020 2065 6c69 6620 746f 6f6c 5f6e 616d     elif tool_nam
-00008190: 6520 3d3d 2022 7472 616e 7365 6374 223a  e == "transect":
-000081a0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000081b0: 2020 2020 2020 6672 6f6d 202e 746f 6f6c        from .tool
-000081c0: 6261 7220 696d 706f 7274 2070 6c6f 745f  bar import plot_
-000081d0: 7472 616e 7365 6374 0d0a 0d0a 2020 2020  transect....    
-000081e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000081f0: 706c 6f74 5f74 7261 6e73 6563 7428 7365  plot_transect(se
-00008200: 6c66 290d 0a20 2020 2020 2020 2020 2020  lf)..           
-00008210: 2020 2020 2065 6c69 6620 746f 6f6c 5f6e       elif tool_n
-00008220: 616d 6520 3d3d 2022 7361 6e6b 6565 223a  ame == "sankee":
-00008230: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00008240: 2020 2020 2020 6672 6f6d 202e 746f 6f6c        from .tool
-00008250: 6261 7220 696d 706f 7274 2073 616e 6b65  bar import sanke
-00008260: 655f 6775 690d 0a0d 0a20 2020 2020 2020  e_gui....       
-00008270: 2020 2020 2020 2020 2020 2020 2073 616e               san
-00008280: 6b65 655f 6775 6928 7365 6c66 290d 0a20  kee_gui(self).. 
-00008290: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-000082a0: 6c69 6620 746f 6f6c 5f6e 616d 6520 3d3d  lif tool_name ==
-000082b0: 2022 706c 616e 6574 223a 0d0a 2020 2020   "planet":..    
-000082c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000082d0: 6672 6f6d 202e 746f 6f6c 6261 7220 696d  from .toolbar im
-000082e0: 706f 7274 2073 706c 6974 5f62 6173 656d  port split_basem
-000082f0: 6170 730d 0a0d 0a20 2020 2020 2020 2020  aps....         
-00008300: 2020 2020 2020 2020 2020 2073 706c 6974             split
-00008310: 5f62 6173 656d 6170 7328 7365 6c66 2c20  _basemaps(self, 
-00008320: 6c61 7965 7273 5f64 6963 743d 706c 616e  layers_dict=plan
-00008330: 6574 5f74 696c 6573 2829 290d 0a20 2020  et_tiles())..   
-00008340: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008350: 2073 656c 662e 746f 6f6c 6261 725f 7265   self.toolbar_re
-00008360: 7365 7428 290d 0a0d 0a20 2020 2020 2020  set()....       
-00008370: 2020 2020 2020 2020 2065 6c69 6620 746f           elif to
-00008380: 6f6c 5f6e 616d 6520 3d3d 2022 6865 6c70  ol_name == "help
-00008390: 223a 0d0a 2020 2020 2020 2020 2020 2020  ":..            
-000083a0: 2020 2020 2020 2020 696d 706f 7274 2077          import w
-000083b0: 6562 6272 6f77 7365 720d 0a0d 0a20 2020  ebbrowser....   
-000083c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000083d0: 2077 6562 6272 6f77 7365 722e 6f70 656e   webbrowser.open
-000083e0: 5f6e 6577 5f74 6162 2822 6874 7470 733a  _new_tab("https:
-000083f0: 2f2f 6765 656d 6170 2e6f 7267 2229 0d0a  //geemap.org")..
-00008400: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008410: 2020 2020 6375 7272 656e 745f 746f 6f6c      current_tool
-00008420: 2e76 616c 7565 203d 2046 616c 7365 0d0a  .value = False..
-00008430: 2020 2020 2020 2020 2020 2020 656c 7365              else
-00008440: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00008450: 2020 2074 6f6f 6c20 3d20 6368 616e 6765     tool = change
-00008460: 5b22 6f77 6e65 7222 5d0d 0a20 2020 2020  ["owner"]..     
-00008470: 2020 2020 2020 2020 2020 2074 6f6f 6c5f             tool_
-00008480: 6e61 6d65 203d 2074 6f6f 6c73 5b74 6f6f  name = tools[too
-00008490: 6c2e 6963 6f6e 5d5b 226e 616d 6522 5d0d  l.icon]["name"].
-000084a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000084b0: 2069 6620 746f 6f6c 5f6e 616d 6520 3d3d   if tool_name ==
-000084c0: 2022 746f 5f69 6d61 6765 223a 0d0a 2020   "to_image":..  
-000084d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000084e0: 2020 746f 6f6c 5f6f 7574 7075 742e 636c    tool_output.cl
-000084f0: 6561 725f 6f75 7470 7574 2829 0d0a 2020  ear_output()..  
-00008500: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008510: 2020 7361 7665 5f6d 6170 5f77 6964 6765    save_map_widge
-00008520: 742e 6368 696c 6472 656e 203d 205b 7361  t.children = [sa
-00008530: 7665 5f74 7970 652c 2066 696c 655f 6368  ve_type, file_ch
-00008540: 6f6f 7365 725d 0d0a 2020 2020 2020 2020  ooser]..        
-00008550: 2020 2020 2020 2020 2020 2020 6966 2074              if t
-00008560: 6f6f 6c5f 6f75 7470 7574 5f63 6f6e 7472  ool_output_contr
-00008570: 6f6c 2069 6e20 7365 6c66 2e63 6f6e 7472  ol in self.contr
-00008580: 6f6c 733a 0d0a 2020 2020 2020 2020 2020  ols:..          
-00008590: 2020 2020 2020 2020 2020 2020 2020 7365                se
-000085a0: 6c66 2e72 656d 6f76 655f 636f 6e74 726f  lf.remove_contro
-000085b0: 6c28 746f 6f6c 5f6f 7574 7075 745f 636f  l(tool_output_co
-000085c0: 6e74 726f 6c29 0d0a 2020 2020 2020 2020  ntrol)..        
-000085d0: 2020 2020 2020 2020 6966 2074 6f6f 6c5f          if tool_
-000085e0: 6e61 6d65 203d 3d20 2269 6e73 7065 6374  name == "inspect
-000085f0: 6f72 223a 0d0a 2020 2020 2020 2020 2020  or":..          
-00008600: 2020 2020 2020 2020 2020 696e 7370 6563            inspec
-00008610: 746f 725f 6f75 7470 7574 2e63 6c65 6172  tor_output.clear
-00008620: 5f6f 7574 7075 7428 290d 0a20 2020 2020  _output()..     
-00008630: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00008640: 656c 662e 696e 7370 6563 746f 725f 6368  elf.inspector_ch
-00008650: 6563 6b65 6420 3d20 4661 6c73 650d 0a20  ecked = False.. 
-00008660: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008670: 2020 2069 6620 696e 7370 6563 746f 725f     if inspector_
-00008680: 6f75 7470 7574 5f63 6f6e 7472 6f6c 2069  output_control i
-00008690: 6e20 7365 6c66 2e63 6f6e 7472 6f6c 733a  n self.controls:
-000086a0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000086b0: 2020 2020 2020 2020 2020 7365 6c66 2e72            self.r
-000086c0: 656d 6f76 655f 636f 6e74 726f 6c28 696e  emove_control(in
-000086d0: 7370 6563 746f 725f 6f75 7470 7574 5f63  spector_output_c
-000086e0: 6f6e 7472 6f6c 290d 0a20 2020 2020 2020  ontrol)..       
-000086f0: 2020 2020 2020 2020 2065 6c69 6620 746f           elif to
-00008700: 6f6c 5f6e 616d 6520 3d3d 2022 706c 6f74  ol_name == "plot
-00008710: 7469 6e67 223a 0d0a 2020 2020 2020 2020  ting":..        
-00008720: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00008730: 2e70 6c6f 745f 6368 6563 6b65 6420 3d20  .plot_checked = 
-00008740: 4661 6c73 650d 0a20 2020 2020 2020 2020  False..         
-00008750: 2020 2020 2020 2020 2020 2070 6c6f 745f             plot_
-00008760: 6472 6f70 646f 776e 5f77 6964 6765 7420  dropdown_widget 
-00008770: 3d20 7365 6c66 2e70 6c6f 745f 6472 6f70  = self.plot_drop
-00008780: 646f 776e 5f77 6964 6765 740d 0a20 2020  down_widget..   
+00007ef0: 2020 2020 7365 6c66 2e61 6464 5f63 6f6e      self.add_con
+00007f00: 7472 6f6c 2867 6565 746f 6f6c 626f 785f  trol(geetoolbox_
+00007f10: 636f 6e74 726f 6c29 0d0a 0d0a 2020 2020  control)....    
+00007f20: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+00007f30: 2074 6f6f 6c5f 6e61 6d65 203d 3d20 2262   tool_name == "b
+00007f40: 6173 656d 6170 223a 0d0a 2020 2020 2020  asemap":..      
+00007f50: 2020 2020 2020 2020 2020 2020 2020 6672                fr
+00007f60: 6f6d 202e 746f 6f6c 6261 7220 696d 706f  om .toolbar impo
+00007f70: 7274 2063 6861 6e67 655f 6261 7365 6d61  rt change_basema
+00007f80: 700d 0a0d 0a20 2020 2020 2020 2020 2020  p....           
+00007f90: 2020 2020 2020 2020 2063 6861 6e67 655f           change_
+00007fa0: 6261 7365 6d61 7028 7365 6c66 290d 0a20  basemap(self).. 
+00007fb0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+00007fc0: 6c69 6620 746f 6f6c 5f6e 616d 6520 3d3d  lif tool_name ==
+00007fd0: 2022 7469 6d65 6c61 7073 6522 3a0d 0a20   "timelapse":.. 
+00007fe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007ff0: 2020 2066 726f 6d20 2e74 6f6f 6c62 6172     from .toolbar
+00008000: 2069 6d70 6f72 7420 7469 6d65 6c61 7073   import timelaps
+00008010: 655f 6775 690d 0a0d 0a20 2020 2020 2020  e_gui....       
+00008020: 2020 2020 2020 2020 2020 2020 2074 696d               tim
+00008030: 656c 6170 7365 5f67 7569 2873 656c 6629  elapse_gui(self)
+00008040: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00008050: 2020 2020 2020 7365 6c66 2e74 6f6f 6c62        self.toolb
+00008060: 6172 5f72 6573 6574 2829 0d0a 2020 2020  ar_reset()..    
+00008070: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+00008080: 2074 6f6f 6c5f 6e61 6d65 203d 3d20 2274   tool_name == "t
+00008090: 696d 6573 6c69 6465 7222 3a0d 0a20 2020  imeslider":..   
+000080a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000080b0: 2066 726f 6d20 2e74 6f6f 6c62 6172 2069   from .toolbar i
+000080c0: 6d70 6f72 7420 7469 6d65 5f73 6c69 6465  mport time_slide
+000080d0: 720d 0a0d 0a20 2020 2020 2020 2020 2020  r....           
+000080e0: 2020 2020 2020 2020 2074 696d 655f 736c           time_sl
+000080f0: 6964 6572 2873 656c 6629 0d0a 2020 2020  ider(self)..    
+00008100: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008110: 7365 6c66 2e74 6f6f 6c62 6172 5f72 6573  self.toolbar_res
+00008120: 6574 2829 0d0a 2020 2020 2020 2020 2020  et()..          
+00008130: 2020 2020 2020 656c 6966 2074 6f6f 6c5f        elif tool_
+00008140: 6e61 6d65 203d 3d20 2264 7261 7722 3a0d  name == "draw":.
+00008150: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00008160: 2020 2020 2066 726f 6d20 2e74 6f6f 6c62       from .toolb
+00008170: 6172 2069 6d70 6f72 7420 636f 6c6c 6563  ar import collec
+00008180: 745f 7361 6d70 6c65 730d 0a0d 0a20 2020  t_samples....   
+00008190: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000081a0: 2073 656c 662e 7472 6169 6e69 6e67 5f63   self.training_c
+000081b0: 7472 6c20 3d20 4e6f 6e65 0d0a 2020 2020  trl = None..    
+000081c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000081d0: 636f 6c6c 6563 745f 7361 6d70 6c65 7328  collect_samples(
+000081e0: 7365 6c66 290d 0a20 2020 2020 2020 2020  self)..         
+000081f0: 2020 2020 2020 2065 6c69 6620 746f 6f6c         elif tool
+00008200: 5f6e 616d 6520 3d3d 2022 7472 616e 7365  _name == "transe
+00008210: 6374 223a 0d0a 2020 2020 2020 2020 2020  ct":..          
+00008220: 2020 2020 2020 2020 2020 6672 6f6d 202e            from .
+00008230: 746f 6f6c 6261 7220 696d 706f 7274 2070  toolbar import p
+00008240: 6c6f 745f 7472 616e 7365 6374 0d0a 0d0a  lot_transect....
+00008250: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008260: 2020 2020 706c 6f74 5f74 7261 6e73 6563      plot_transec
+00008270: 7428 7365 6c66 290d 0a20 2020 2020 2020  t(self)..       
+00008280: 2020 2020 2020 2020 2065 6c69 6620 746f           elif to
+00008290: 6f6c 5f6e 616d 6520 3d3d 2022 7361 6e6b  ol_name == "sank
+000082a0: 6565 223a 0d0a 2020 2020 2020 2020 2020  ee":..          
+000082b0: 2020 2020 2020 2020 2020 6672 6f6d 202e            from .
+000082c0: 746f 6f6c 6261 7220 696d 706f 7274 2073  toolbar import s
+000082d0: 616e 6b65 655f 6775 690d 0a0d 0a20 2020  ankee_gui....   
+000082e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000082f0: 2073 616e 6b65 655f 6775 6928 7365 6c66   sankee_gui(self
+00008300: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00008310: 2020 2065 6c69 6620 746f 6f6c 5f6e 616d     elif tool_nam
+00008320: 6520 3d3d 2022 706c 616e 6574 223a 0d0a  e == "planet":..
+00008330: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008340: 2020 2020 6672 6f6d 202e 746f 6f6c 6261      from .toolba
+00008350: 7220 696d 706f 7274 2073 706c 6974 5f62  r import split_b
+00008360: 6173 656d 6170 730d 0a0d 0a20 2020 2020  asemaps....     
+00008370: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00008380: 706c 6974 5f62 6173 656d 6170 7328 7365  plit_basemaps(se
+00008390: 6c66 2c20 6c61 7965 7273 5f64 6963 743d  lf, layers_dict=
+000083a0: 706c 616e 6574 5f74 696c 6573 2829 290d  planet_tiles()).
+000083b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000083c0: 2020 2020 2073 656c 662e 746f 6f6c 6261       self.toolba
+000083d0: 725f 7265 7365 7428 290d 0a0d 0a20 2020  r_reset()....   
+000083e0: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
+000083f0: 6620 746f 6f6c 5f6e 616d 6520 3d3d 2022  f tool_name == "
+00008400: 6865 6c70 223a 0d0a 2020 2020 2020 2020  help":..        
+00008410: 2020 2020 2020 2020 2020 2020 696d 706f              impo
+00008420: 7274 2077 6562 6272 6f77 7365 720d 0a0d  rt webbrowser...
+00008430: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00008440: 2020 2020 2077 6562 6272 6f77 7365 722e       webbrowser.
+00008450: 6f70 656e 5f6e 6577 5f74 6162 2822 6874  open_new_tab("ht
+00008460: 7470 733a 2f2f 6765 656d 6170 2e6f 7267  tps://geemap.org
+00008470: 2229 0d0a 2020 2020 2020 2020 2020 2020  ")..            
+00008480: 2020 2020 2020 2020 6375 7272 656e 745f          current_
+00008490: 746f 6f6c 2e76 616c 7565 203d 2046 616c  tool.value = Fal
+000084a0: 7365 0d0a 2020 2020 2020 2020 2020 2020  se..            
+000084b0: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
+000084c0: 2020 2020 2020 2074 6f6f 6c20 3d20 6368         tool = ch
+000084d0: 616e 6765 5b22 6f77 6e65 7222 5d0d 0a20  ange["owner"].. 
+000084e0: 2020 2020 2020 2020 2020 2020 2020 2074                 t
+000084f0: 6f6f 6c5f 6e61 6d65 203d 2074 6f6f 6c73  ool_name = tools
+00008500: 5b74 6f6f 6c2e 6963 6f6e 5d5b 226e 616d  [tool.icon]["nam
+00008510: 6522 5d0d 0a20 2020 2020 2020 2020 2020  e"]..           
+00008520: 2020 2020 2069 6620 746f 6f6c 5f6e 616d       if tool_nam
+00008530: 6520 3d3d 2022 746f 5f69 6d61 6765 223a  e == "to_image":
+00008540: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00008550: 2020 2020 2020 746f 6f6c 5f6f 7574 7075        tool_outpu
+00008560: 742e 636c 6561 725f 6f75 7470 7574 2829  t.clear_output()
+00008570: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00008580: 2020 2020 2020 7361 7665 5f6d 6170 5f77        save_map_w
+00008590: 6964 6765 742e 6368 696c 6472 656e 203d  idget.children =
+000085a0: 205b 7361 7665 5f74 7970 652c 2066 696c   [save_type, fil
+000085b0: 655f 6368 6f6f 7365 725d 0d0a 2020 2020  e_chooser]..    
+000085c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000085d0: 6966 2074 6f6f 6c5f 6f75 7470 7574 5f63  if tool_output_c
+000085e0: 6f6e 7472 6f6c 2069 6e20 7365 6c66 2e63  ontrol in self.c
+000085f0: 6f6e 7472 6f6c 733a 0d0a 2020 2020 2020  ontrols:..      
+00008600: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008610: 2020 7365 6c66 2e72 656d 6f76 655f 636f    self.remove_co
+00008620: 6e74 726f 6c28 746f 6f6c 5f6f 7574 7075  ntrol(tool_outpu
+00008630: 745f 636f 6e74 726f 6c29 0d0a 2020 2020  t_control)..    
+00008640: 2020 2020 2020 2020 2020 2020 6966 2074              if t
+00008650: 6f6f 6c5f 6e61 6d65 203d 3d20 2269 6e73  ool_name == "ins
+00008660: 7065 6374 6f72 223a 0d0a 2020 2020 2020  pector":..      
+00008670: 2020 2020 2020 2020 2020 2020 2020 696e                in
+00008680: 7370 6563 746f 725f 6f75 7470 7574 2e63  spector_output.c
+00008690: 6c65 6172 5f6f 7574 7075 7428 290d 0a20  lear_output().. 
+000086a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000086b0: 2020 2073 656c 662e 696e 7370 6563 746f     self.inspecto
+000086c0: 725f 6368 6563 6b65 6420 3d20 4661 6c73  r_checked = Fals
+000086d0: 650d 0a20 2020 2020 2020 2020 2020 2020  e..             
+000086e0: 2020 2020 2020 2069 6620 696e 7370 6563         if inspec
+000086f0: 746f 725f 6f75 7470 7574 5f63 6f6e 7472  tor_output_contr
+00008700: 6f6c 2069 6e20 7365 6c66 2e63 6f6e 7472  ol in self.contr
+00008710: 6f6c 733a 0d0a 2020 2020 2020 2020 2020  ols:..          
+00008720: 2020 2020 2020 2020 2020 2020 2020 7365                se
+00008730: 6c66 2e72 656d 6f76 655f 636f 6e74 726f  lf.remove_contro
+00008740: 6c28 696e 7370 6563 746f 725f 6f75 7470  l(inspector_outp
+00008750: 7574 5f63 6f6e 7472 6f6c 290d 0a20 2020  ut_control)..   
+00008760: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
+00008770: 6620 746f 6f6c 5f6e 616d 6520 3d3d 2022  f tool_name == "
+00008780: 706c 6f74 7469 6e67 223a 0d0a 2020 2020  plotting":..    
 00008790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000087a0: 2070 6c6f 745f 6472 6f70 646f 776e 5f63   plot_dropdown_c
-000087b0: 6f6e 7472 6f6c 203d 2073 656c 662e 706c  ontrol = self.pl
-000087c0: 6f74 5f64 726f 7064 6f77 6e5f 636f 6e74  ot_dropdown_cont
-000087d0: 726f 6c0d 0a20 2020 2020 2020 2020 2020  rol..           
-000087e0: 2020 2020 2020 2020 2069 6620 706c 6f74           if plot
-000087f0: 5f64 726f 7064 6f77 6e5f 636f 6e74 726f  _dropdown_contro
-00008800: 6c20 696e 2073 656c 662e 636f 6e74 726f  l in self.contro
-00008810: 6c73 3a0d 0a20 2020 2020 2020 2020 2020  ls:..           
-00008820: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-00008830: 662e 7265 6d6f 7665 5f63 6f6e 7472 6f6c  f.remove_control
-00008840: 2870 6c6f 745f 6472 6f70 646f 776e 5f63  (plot_dropdown_c
-00008850: 6f6e 7472 6f6c 290d 0a20 2020 2020 2020  ontrol)..       
-00008860: 2020 2020 2020 2020 2020 2020 2064 656c               del
-00008870: 2070 6c6f 745f 6472 6f70 646f 776e 5f77   plot_dropdown_w
-00008880: 6964 6765 740d 0a20 2020 2020 2020 2020  idget..         
-00008890: 2020 2020 2020 2020 2020 2064 656c 2070             del p
-000088a0: 6c6f 745f 6472 6f70 646f 776e 5f63 6f6e  lot_dropdown_con
-000088b0: 7472 6f6c 0d0a 2020 2020 2020 2020 2020  trol..          
-000088c0: 2020 2020 2020 2020 2020 6966 2073 656c            if sel
-000088d0: 662e 706c 6f74 5f63 6f6e 7472 6f6c 2069  f.plot_control i
-000088e0: 6e20 7365 6c66 2e63 6f6e 7472 6f6c 733a  n self.controls:
-000088f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00008900: 2020 2020 2020 2020 2020 706c 6f74 5f63            plot_c
-00008910: 6f6e 7472 6f6c 203d 2073 656c 662e 706c  ontrol = self.pl
-00008920: 6f74 5f63 6f6e 7472 6f6c 0d0a 2020 2020  ot_control..    
-00008930: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008940: 2020 2020 706c 6f74 5f77 6964 6765 7420      plot_widget 
-00008950: 3d20 7365 6c66 2e70 6c6f 745f 7769 6467  = self.plot_widg
-00008960: 6574 0d0a 2020 2020 2020 2020 2020 2020  et..            
-00008970: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00008980: 2e72 656d 6f76 655f 636f 6e74 726f 6c28  .remove_control(
-00008990: 706c 6f74 5f63 6f6e 7472 6f6c 290d 0a20  plot_control).. 
+000087a0: 7365 6c66 2e70 6c6f 745f 6368 6563 6b65  self.plot_checke
+000087b0: 6420 3d20 4661 6c73 650d 0a20 2020 2020  d = False..     
+000087c0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+000087d0: 6c6f 745f 6472 6f70 646f 776e 5f77 6964  lot_dropdown_wid
+000087e0: 6765 7420 3d20 7365 6c66 2e70 6c6f 745f  get = self.plot_
+000087f0: 6472 6f70 646f 776e 5f77 6964 6765 740d  dropdown_widget.
+00008800: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00008810: 2020 2020 2070 6c6f 745f 6472 6f70 646f       plot_dropdo
+00008820: 776e 5f63 6f6e 7472 6f6c 203d 2073 656c  wn_control = sel
+00008830: 662e 706c 6f74 5f64 726f 7064 6f77 6e5f  f.plot_dropdown_
+00008840: 636f 6e74 726f 6c0d 0a20 2020 2020 2020  control..       
+00008850: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00008860: 706c 6f74 5f64 726f 7064 6f77 6e5f 636f  plot_dropdown_co
+00008870: 6e74 726f 6c20 696e 2073 656c 662e 636f  ntrol in self.co
+00008880: 6e74 726f 6c73 3a0d 0a20 2020 2020 2020  ntrols:..       
+00008890: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000088a0: 2073 656c 662e 7265 6d6f 7665 5f63 6f6e   self.remove_con
+000088b0: 7472 6f6c 2870 6c6f 745f 6472 6f70 646f  trol(plot_dropdo
+000088c0: 776e 5f63 6f6e 7472 6f6c 290d 0a20 2020  wn_control)..   
+000088d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000088e0: 2064 656c 2070 6c6f 745f 6472 6f70 646f   del plot_dropdo
+000088f0: 776e 5f77 6964 6765 740d 0a20 2020 2020  wn_widget..     
+00008900: 2020 2020 2020 2020 2020 2020 2020 2064                 d
+00008910: 656c 2070 6c6f 745f 6472 6f70 646f 776e  el plot_dropdown
+00008920: 5f63 6f6e 7472 6f6c 0d0a 2020 2020 2020  _control..      
+00008930: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00008940: 2073 656c 662e 706c 6f74 5f63 6f6e 7472   self.plot_contr
+00008950: 6f6c 2069 6e20 7365 6c66 2e63 6f6e 7472  ol in self.contr
+00008960: 6f6c 733a 0d0a 2020 2020 2020 2020 2020  ols:..          
+00008970: 2020 2020 2020 2020 2020 2020 2020 706c                pl
+00008980: 6f74 5f63 6f6e 7472 6f6c 203d 2073 656c  ot_control = sel
+00008990: 662e 706c 6f74 5f63 6f6e 7472 6f6c 0d0a  f.plot_control..
 000089a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000089b0: 2020 2020 2020 2073 656c 662e 706c 6f74         self.plot
-000089c0: 5f63 6f6e 7472 6f6c 203d 204e 6f6e 650d  _control = None.
-000089d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000089e0: 2020 2020 2020 2020 2073 656c 662e 706c           self.pl
-000089f0: 6f74 5f77 6964 6765 7420 3d20 4e6f 6e65  ot_widget = None
-00008a00: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00008a10: 2020 2020 2020 2020 2020 6465 6c20 706c            del pl
-00008a20: 6f74 5f63 6f6e 7472 6f6c 0d0a 2020 2020  ot_control..    
-00008a30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008a40: 2020 2020 6465 6c20 706c 6f74 5f77 6964      del plot_wid
-00008a50: 6765 740d 0a20 2020 2020 2020 2020 2020  get..           
-00008a60: 2020 2020 2020 2020 2069 6620 280d 0a20           if (.. 
-00008a70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008a80: 2020 2020 2020 2073 656c 662e 706c 6f74         self.plot
-00008a90: 5f6d 6172 6b65 725f 636c 7573 7465 7220  _marker_cluster 
-00008aa0: 6973 206e 6f74 204e 6f6e 650d 0a20 2020  is not None..   
-00008ab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008ac0: 2020 2020 2061 6e64 2073 656c 662e 706c       and self.pl
-00008ad0: 6f74 5f6d 6172 6b65 725f 636c 7573 7465  ot_marker_cluste
-00008ae0: 7220 696e 2073 656c 662e 6c61 7965 7273  r in self.layers
-00008af0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00008b00: 2020 2020 2020 293a 0d0a 2020 2020 2020        ):..      
-00008b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008b20: 2020 7365 6c66 2e72 656d 6f76 655f 6c61    self.remove_la
-00008b30: 7965 7228 7365 6c66 2e70 6c6f 745f 6d61  yer(self.plot_ma
-00008b40: 726b 6572 5f63 6c75 7374 6572 290d 0a20  rker_cluster).. 
-00008b50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008b60: 2020 2069 6620 7365 6c66 2e64 7261 775f     if self.draw_
-00008b70: 636f 6e74 726f 6c5f 6c69 7465 2069 6e20  control_lite in 
-00008b80: 7365 6c66 2e63 6f6e 7472 6f6c 733a 0d0a  self.controls:..
-00008b90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008ba0: 2020 2020 2020 2020 7365 6c66 2e72 656d          self.rem
-00008bb0: 6f76 655f 636f 6e74 726f 6c28 7365 6c66  ove_control(self
-00008bc0: 2e64 7261 775f 636f 6e74 726f 6c5f 6c69  .draw_control_li
-00008bd0: 7465 290d 0a20 2020 2020 2020 2020 2020  te)..           
-00008be0: 2020 2020 2020 2020 2073 656c 662e 6164           self.ad
-00008bf0: 645f 636f 6e74 726f 6c28 7365 6c66 2e64  d_control(self.d
-00008c00: 7261 775f 636f 6e74 726f 6c29 0d0a 2020  raw_control)..  
-00008c10: 2020 2020 2020 2020 2020 2020 2020 656c                el
-00008c20: 6966 2074 6f6f 6c5f 6e61 6d65 203d 3d20  if tool_name == 
-00008c30: 2277 6869 7465 626f 7822 3a0d 0a20 2020  "whitebox":..   
-00008c40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008c50: 2069 6620 7365 6c66 2e77 6869 7465 626f   if self.whitebo
-00008c60: 7820 6973 206e 6f74 204e 6f6e 6520 616e  x is not None an
-00008c70: 6420 7365 6c66 2e77 6869 7465 626f 7820  d self.whitebox 
-00008c80: 696e 2073 656c 662e 636f 6e74 726f 6c73  in self.controls
-00008c90: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00008ca0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00008cb0: 7265 6d6f 7665 5f63 6f6e 7472 6f6c 2873  remove_control(s
-00008cc0: 656c 662e 7768 6974 6562 6f78 290d 0a20  elf.whitebox).. 
-00008cd0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00008ce0: 6c69 6620 746f 6f6c 5f6e 616d 6520 3d3d  lif tool_name ==
-00008cf0: 2022 636f 6e76 6572 745f 6a73 223a 0d0a   "convert_js":..
-00008d00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008d10: 2020 2020 6966 2028 0d0a 2020 2020 2020      if (..      
-00008d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008d30: 2020 7365 6c66 2e63 6f6e 7665 7274 5f63    self.convert_c
-00008d40: 7472 6c20 6973 206e 6f74 204e 6f6e 650d  trl is not None.
-00008d50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00008d60: 2020 2020 2020 2020 2061 6e64 2073 656c           and sel
-00008d70: 662e 636f 6e76 6572 745f 6374 726c 2069  f.convert_ctrl i
-00008d80: 6e20 7365 6c66 2e63 6f6e 7472 6f6c 730d  n self.controls.
-00008d90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00008da0: 2020 2020 2029 3a0d 0a20 2020 2020 2020       ):..       
-00008db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008dc0: 2073 656c 662e 7265 6d6f 7665 5f63 6f6e   self.remove_con
-00008dd0: 7472 6f6c 2873 656c 662e 636f 6e76 6572  trol(self.conver
-00008de0: 745f 6374 726c 290d 0a0d 0a20 2020 2020  t_ctrl)....     
-00008df0: 2020 2066 6f72 2074 6f6f 6c20 696e 2074     for tool in t
-00008e00: 6f6f 6c62 6172 5f67 7269 642e 6368 696c  oolbar_grid.chil
-00008e10: 6472 656e 3a0d 0a20 2020 2020 2020 2020  dren:..         
-00008e20: 2020 2074 6f6f 6c2e 6f62 7365 7276 6528     tool.observe(
-00008e30: 746f 6f6c 5f63 616c 6c62 6163 6b2c 2022  tool_callback, "
-00008e40: 7661 6c75 6522 290d 0a0d 0a20 2020 2020  value")....     
-00008e50: 2020 2074 6f6f 6c62 6172 5f62 7574 746f     toolbar_butto
-00008e60: 6e20 3d20 7769 6467 6574 732e 546f 6767  n = widgets.Togg
-00008e70: 6c65 4275 7474 6f6e 280d 0a20 2020 2020  leButton(..     
-00008e80: 2020 2020 2020 2076 616c 7565 3d46 616c         value=Fal
-00008e90: 7365 2c0d 0a20 2020 2020 2020 2020 2020  se,..           
-00008ea0: 2074 6f6f 6c74 6970 3d22 546f 6f6c 6261   tooltip="Toolba
-00008eb0: 7222 2c0d 0a20 2020 2020 2020 2020 2020  r",..           
-00008ec0: 2069 636f 6e3d 2277 7265 6e63 6822 2c0d   icon="wrench",.
-00008ed0: 0a20 2020 2020 2020 2020 2020 206c 6179  .            lay
-00008ee0: 6f75 743d 7769 6467 6574 732e 4c61 796f  out=widgets.Layo
-00008ef0: 7574 280d 0a20 2020 2020 2020 2020 2020  ut(..           
-00008f00: 2020 2020 2077 6964 7468 3d22 3238 7078       width="28px
-00008f10: 222c 2068 6569 6768 743d 2232 3870 7822  ", height="28px"
-00008f20: 2c20 7061 6464 696e 673d 2230 7078 2030  , padding="0px 0
-00008f30: 7078 2030 7078 2034 7078 220d 0a20 2020  px 0px 4px"..   
-00008f40: 2020 2020 2020 2020 2029 2c0d 0a20 2020           ),..   
-00008f50: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
-00008f60: 7365 6c66 2e74 6f6f 6c62 6172 5f62 7574  self.toolbar_but
-00008f70: 746f 6e20 3d20 746f 6f6c 6261 725f 6275  ton = toolbar_bu
-00008f80: 7474 6f6e 0d0a 0d0a 2020 2020 2020 2020  tton....        
-00008f90: 6c61 7965 7273 5f62 7574 746f 6e20 3d20  layers_button = 
-00008fa0: 7769 6467 6574 732e 546f 6767 6c65 4275  widgets.ToggleBu
-00008fb0: 7474 6f6e 280d 0a20 2020 2020 2020 2020  tton(..         
-00008fc0: 2020 2076 616c 7565 3d46 616c 7365 2c0d     value=False,.
-00008fd0: 0a20 2020 2020 2020 2020 2020 2074 6f6f  .            too
-00008fe0: 6c74 6970 3d22 4c61 7965 7273 222c 0d0a  ltip="Layers",..
-00008ff0: 2020 2020 2020 2020 2020 2020 6963 6f6e              icon
-00009000: 3d22 7365 7276 6572 222c 0d0a 2020 2020  ="server",..    
-00009010: 2020 2020 2020 2020 6c61 796f 7574 3d77          layout=w
-00009020: 6964 6765 7473 2e4c 6179 6f75 7428 6865  idgets.Layout(he
-00009030: 6967 6874 3d22 3238 7078 222c 2077 6964  ight="28px", wid
-00009040: 7468 3d22 3732 7078 2229 2c0d 0a20 2020  th="72px"),..   
-00009050: 2020 2020 2029 0d0a 0d0a 2020 2020 2020       )....      
-00009060: 2020 746f 6f6c 6261 725f 7769 6467 6574    toolbar_widget
-00009070: 203d 2077 6964 6765 7473 2e56 426f 7828   = widgets.VBox(
-00009080: 290d 0a20 2020 2020 2020 2074 6f6f 6c62  )..        toolb
-00009090: 6172 5f77 6964 6765 742e 6368 696c 6472  ar_widget.childr
-000090a0: 656e 203d 205b 746f 6f6c 6261 725f 6275  en = [toolbar_bu
-000090b0: 7474 6f6e 5d0d 0a20 2020 2020 2020 2074  tton]..        t
-000090c0: 6f6f 6c62 6172 5f68 6561 6465 7220 3d20  oolbar_header = 
-000090d0: 7769 6467 6574 732e 4842 6f78 2829 0d0a  widgets.HBox()..
-000090e0: 2020 2020 2020 2020 746f 6f6c 6261 725f          toolbar_
-000090f0: 6865 6164 6572 2e63 6869 6c64 7265 6e20  header.children 
-00009100: 3d20 5b6c 6179 6572 735f 6275 7474 6f6e  = [layers_button
-00009110: 2c20 746f 6f6c 6261 725f 6275 7474 6f6e  , toolbar_button
-00009120: 5d0d 0a20 2020 2020 2020 2074 6f6f 6c62  ]..        toolb
-00009130: 6172 5f66 6f6f 7465 7220 3d20 7769 6467  ar_footer = widg
-00009140: 6574 732e 5642 6f78 2829 0d0a 2020 2020  ets.VBox()..    
-00009150: 2020 2020 746f 6f6c 6261 725f 666f 6f74      toolbar_foot
-00009160: 6572 2e63 6869 6c64 7265 6e20 3d20 5b74  er.children = [t
-00009170: 6f6f 6c62 6172 5f67 7269 645d 0d0a 0d0a  oolbar_grid]....
-00009180: 2020 2020 2020 2020 746f 6f6c 6261 725f          toolbar_
-00009190: 6576 656e 7420 3d20 6970 7965 7665 6e74  event = ipyevent
-000091a0: 732e 4576 656e 7428 0d0a 2020 2020 2020  s.Event(..      
-000091b0: 2020 2020 2020 736f 7572 6365 3d74 6f6f        source=too
-000091c0: 6c62 6172 5f77 6964 6765 742c 2077 6174  lbar_widget, wat
-000091d0: 6368 6564 5f65 7665 6e74 733d 5b22 6d6f  ched_events=["mo
-000091e0: 7573 6565 6e74 6572 222c 2022 6d6f 7573  useenter", "mous
-000091f0: 656c 6561 7665 225d 0d0a 2020 2020 2020  eleave"]..      
-00009200: 2020 290d 0a0d 0a20 2020 2020 2020 2064    )....        d
-00009210: 6566 2068 616e 646c 655f 746f 6f6c 6261  ef handle_toolba
-00009220: 725f 6576 656e 7428 6576 656e 7429 3a0d  r_event(event):.
-00009230: 0a0d 0a20 2020 2020 2020 2020 2020 2069  ...            i
-00009240: 6620 6576 656e 745b 2274 7970 6522 5d20  f event["type"] 
-00009250: 3d3d 2022 6d6f 7573 6565 6e74 6572 223a  == "mouseenter":
-00009260: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00009270: 2020 746f 6f6c 6261 725f 7769 6467 6574    toolbar_widget
-00009280: 2e63 6869 6c64 7265 6e20 3d20 5b74 6f6f  .children = [too
-00009290: 6c62 6172 5f68 6561 6465 722c 2074 6f6f  lbar_header, too
-000092a0: 6c62 6172 5f66 6f6f 7465 725d 0d0a 2020  lbar_footer]..  
-000092b0: 2020 2020 2020 2020 2020 656c 6966 2065            elif e
-000092c0: 7665 6e74 5b22 7479 7065 225d 203d 3d20  vent["type"] == 
-000092d0: 226d 6f75 7365 6c65 6176 6522 3a0d 0a20  "mouseleave":.. 
-000092e0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-000092f0: 6620 6e6f 7420 746f 6f6c 6261 725f 6275  f not toolbar_bu
-00009300: 7474 6f6e 2e76 616c 7565 3a0d 0a20 2020  tton.value:..   
-00009310: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009320: 2074 6f6f 6c62 6172 5f77 6964 6765 742e   toolbar_widget.
-00009330: 6368 696c 6472 656e 203d 205b 746f 6f6c  children = [tool
-00009340: 6261 725f 6275 7474 6f6e 5d0d 0a20 2020  bar_button]..   
-00009350: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009360: 2074 6f6f 6c62 6172 5f62 7574 746f 6e2e   toolbar_button.
-00009370: 7661 6c75 6520 3d20 4661 6c73 650d 0a20  value = False.. 
-00009380: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009390: 2020 206c 6179 6572 735f 6275 7474 6f6e     layers_button
-000093a0: 2e76 616c 7565 203d 2046 616c 7365 0d0a  .value = False..
-000093b0: 0d0a 2020 2020 2020 2020 746f 6f6c 6261  ..        toolba
-000093c0: 725f 6576 656e 742e 6f6e 5f64 6f6d 5f65  r_event.on_dom_e
-000093d0: 7665 6e74 2868 616e 646c 655f 746f 6f6c  vent(handle_tool
-000093e0: 6261 725f 6576 656e 7429 0d0a 0d0a 2020  bar_event)....  
-000093f0: 2020 2020 2020 6465 6620 746f 6f6c 6261        def toolba
-00009400: 725f 6274 6e5f 636c 6963 6b28 6368 616e  r_btn_click(chan
-00009410: 6765 293a 0d0a 2020 2020 2020 2020 2020  ge):..          
-00009420: 2020 6966 2063 6861 6e67 655b 226e 6577    if change["new
-00009430: 225d 3a0d 0a20 2020 2020 2020 2020 2020  "]:..           
-00009440: 2020 2020 206c 6179 6572 735f 6275 7474       layers_butt
-00009450: 6f6e 2e76 616c 7565 203d 2046 616c 7365  on.value = False
-00009460: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00009470: 2020 746f 6f6c 6261 725f 7769 6467 6574    toolbar_widget
-00009480: 2e63 6869 6c64 7265 6e20 3d20 5b74 6f6f  .children = [too
-00009490: 6c62 6172 5f68 6561 6465 722c 2074 6f6f  lbar_header, too
-000094a0: 6c62 6172 5f66 6f6f 7465 725d 0d0a 2020  lbar_footer]..  
-000094b0: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
-000094c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000094d0: 2069 6620 6e6f 7420 6c61 7965 7273 5f62   if not layers_b
-000094e0: 7574 746f 6e2e 7661 6c75 653a 0d0a 2020  utton.value:..  
-000094f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009500: 2020 746f 6f6c 6261 725f 7769 6467 6574    toolbar_widget
-00009510: 2e63 6869 6c64 7265 6e20 3d20 5b74 6f6f  .children = [too
-00009520: 6c62 6172 5f62 7574 746f 6e5d 0d0a 0d0a  lbar_button]....
-00009530: 2020 2020 2020 2020 746f 6f6c 6261 725f          toolbar_
-00009540: 6275 7474 6f6e 2e6f 6273 6572 7665 2874  button.observe(t
-00009550: 6f6f 6c62 6172 5f62 746e 5f63 6c69 636b  oolbar_btn_click
-00009560: 2c20 2276 616c 7565 2229 0d0a 0d0a 2020  , "value")....  
-00009570: 2020 2020 2020 6465 6620 6c61 7965 7273        def layers
-00009580: 5f62 746e 5f63 6c69 636b 2863 6861 6e67  _btn_click(chang
-00009590: 6529 3a0d 0a20 2020 2020 2020 2020 2020  e):..           
-000095a0: 2069 6620 6368 616e 6765 5b22 6e65 7722   if change["new"
-000095b0: 5d3a 0d0a 0d0a 2020 2020 2020 2020 2020  ]:....          
-000095c0: 2020 2020 2020 6c61 7965 7273 5f68 626f        layers_hbo
-000095d0: 7820 3d20 5b5d 0d0a 2020 2020 2020 2020  x = []..        
-000095e0: 2020 2020 2020 2020 616c 6c5f 6c61 7965          all_laye
-000095f0: 7273 5f63 686b 203d 2077 6964 6765 7473  rs_chk = widgets
-00009600: 2e43 6865 636b 626f 7828 0d0a 2020 2020  .Checkbox(..    
-00009610: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009620: 7661 6c75 653d 4661 6c73 652c 0d0a 2020  value=False,..  
-00009630: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009640: 2020 6465 7363 7269 7074 696f 6e3d 2241    description="A
-00009650: 6c6c 206c 6179 6572 7320 6f6e 2f6f 6666  ll layers on/off
-00009660: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
-00009670: 2020 2020 2020 2020 696e 6465 6e74 3d46          indent=F
-00009680: 616c 7365 2c0d 0a20 2020 2020 2020 2020  alse,..         
-00009690: 2020 2020 2020 2020 2020 206c 6179 6f75             layou
-000096a0: 743d 7769 6467 6574 732e 4c61 796f 7574  t=widgets.Layout
-000096b0: 2868 6569 6768 743d 2231 3870 7822 2c20  (height="18px", 
-000096c0: 7061 6464 696e 673d 2230 7078 2038 7078  padding="0px 8px
-000096d0: 2032 3570 7820 3870 7822 292c 0d0a 2020   25px 8px"),..  
-000096e0: 2020 2020 2020 2020 2020 2020 2020 290d                ).
-000096f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00009700: 2061 6c6c 5f6c 6179 6572 735f 6368 6b2e   all_layers_chk.
-00009710: 6c61 796f 7574 2e77 6964 7468 203d 2022  layout.width = "
-00009720: 3330 6578 220d 0a20 2020 2020 2020 2020  30ex"..         
-00009730: 2020 2020 2020 206c 6179 6572 735f 6862         layers_hb
-00009740: 6f78 2e61 7070 656e 6428 616c 6c5f 6c61  ox.append(all_la
-00009750: 7965 7273 5f63 686b 290d 0a0d 0a20 2020  yers_chk)....   
-00009760: 2020 2020 2020 2020 2020 2020 2064 6566               def
-00009770: 2061 6c6c 5f6c 6179 6572 735f 6368 6b5f   all_layers_chk_
-00009780: 6368 616e 6765 6428 6368 616e 6765 293a  changed(change):
-00009790: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000097a0: 2020 2020 2020 6966 2063 6861 6e67 655b        if change[
-000097b0: 226e 6577 225d 3a0d 0a20 2020 2020 2020  "new"]:..       
-000097c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000097d0: 2066 6f72 206c 6179 6572 2069 6e20 7365   for layer in se
-000097e0: 6c66 2e6c 6179 6572 733a 0d0a 2020 2020  lf.layers:..    
-000097f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009800: 2020 2020 2020 2020 6c61 7965 722e 7669          layer.vi
-00009810: 7369 626c 6520 3d20 5472 7565 0d0a 2020  sible = True..  
-00009820: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009830: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
-00009840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009850: 2066 6f72 206c 6179 6572 2069 6e20 7365   for layer in se
-00009860: 6c66 2e6c 6179 6572 733a 0d0a 2020 2020  lf.layers:..    
-00009870: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009880: 2020 2020 2020 2020 6c61 7965 722e 7669          layer.vi
-00009890: 7369 626c 6520 3d20 4661 6c73 650d 0a0d  sible = False...
-000098a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000098b0: 2061 6c6c 5f6c 6179 6572 735f 6368 6b2e   all_layers_chk.
-000098c0: 6f62 7365 7276 6528 616c 6c5f 6c61 7965  observe(all_laye
-000098d0: 7273 5f63 686b 5f63 6861 6e67 6564 2c20  rs_chk_changed, 
-000098e0: 2276 616c 7565 2229 0d0a 0d0a 2020 2020  "value")....    
+000089b0: 2020 2020 2020 2020 706c 6f74 5f77 6964          plot_wid
+000089c0: 6765 7420 3d20 7365 6c66 2e70 6c6f 745f  get = self.plot_
+000089d0: 7769 6467 6574 0d0a 2020 2020 2020 2020  widget..        
+000089e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000089f0: 7365 6c66 2e72 656d 6f76 655f 636f 6e74  self.remove_cont
+00008a00: 726f 6c28 706c 6f74 5f63 6f6e 7472 6f6c  rol(plot_control
+00008a10: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00008a20: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00008a30: 706c 6f74 5f63 6f6e 7472 6f6c 203d 204e  plot_control = N
+00008a40: 6f6e 650d 0a20 2020 2020 2020 2020 2020  one..           
+00008a50: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+00008a60: 662e 706c 6f74 5f77 6964 6765 7420 3d20  f.plot_widget = 
+00008a70: 4e6f 6e65 0d0a 2020 2020 2020 2020 2020  None..          
+00008a80: 2020 2020 2020 2020 2020 2020 2020 6465                de
+00008a90: 6c20 706c 6f74 5f63 6f6e 7472 6f6c 0d0a  l plot_control..
+00008aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008ab0: 2020 2020 2020 2020 6465 6c20 706c 6f74          del plot
+00008ac0: 5f77 6964 6765 740d 0a20 2020 2020 2020  _widget..       
+00008ad0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00008ae0: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
+00008af0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00008b00: 706c 6f74 5f6d 6172 6b65 725f 636c 7573  plot_marker_clus
+00008b10: 7465 7220 6973 206e 6f74 204e 6f6e 650d  ter is not None.
+00008b20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00008b30: 2020 2020 2020 2020 2061 6e64 2073 656c           and sel
+00008b40: 662e 706c 6f74 5f6d 6172 6b65 725f 636c  f.plot_marker_cl
+00008b50: 7573 7465 7220 696e 2073 656c 662e 6c61  uster in self.la
+00008b60: 7965 7273 0d0a 2020 2020 2020 2020 2020  yers..          
+00008b70: 2020 2020 2020 2020 2020 293a 0d0a 2020            ):..  
+00008b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008b90: 2020 2020 2020 7365 6c66 2e72 656d 6f76        self.remov
+00008ba0: 655f 6c61 7965 7228 7365 6c66 2e70 6c6f  e_layer(self.plo
+00008bb0: 745f 6d61 726b 6572 5f63 6c75 7374 6572  t_marker_cluster
+00008bc0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00008bd0: 2020 2020 2020 2069 6620 7365 6c66 2e64         if self.d
+00008be0: 7261 775f 636f 6e74 726f 6c5f 6c69 7465  raw_control_lite
+00008bf0: 2069 6e20 7365 6c66 2e63 6f6e 7472 6f6c   in self.control
+00008c00: 733a 0d0a 2020 2020 2020 2020 2020 2020  s:..            
+00008c10: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00008c20: 2e72 656d 6f76 655f 636f 6e74 726f 6c28  .remove_control(
+00008c30: 7365 6c66 2e64 7261 775f 636f 6e74 726f  self.draw_contro
+00008c40: 6c5f 6c69 7465 290d 0a20 2020 2020 2020  l_lite)..       
+00008c50: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+00008c60: 662e 6164 645f 636f 6e74 726f 6c28 7365  f.add_control(se
+00008c70: 6c66 2e64 7261 775f 636f 6e74 726f 6c29  lf.draw_control)
+00008c80: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00008c90: 2020 656c 6966 2074 6f6f 6c5f 6e61 6d65    elif tool_name
+00008ca0: 203d 3d20 2277 6869 7465 626f 7822 3a0d   == "whitebox":.
+00008cb0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00008cc0: 2020 2020 2069 6620 7365 6c66 2e77 6869       if self.whi
+00008cd0: 7465 626f 7820 6973 206e 6f74 204e 6f6e  tebox is not Non
+00008ce0: 6520 616e 6420 7365 6c66 2e77 6869 7465  e and self.white
+00008cf0: 626f 7820 696e 2073 656c 662e 636f 6e74  box in self.cont
+00008d00: 726f 6c73 3a0d 0a20 2020 2020 2020 2020  rols:..         
+00008d10: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00008d20: 656c 662e 7265 6d6f 7665 5f63 6f6e 7472  elf.remove_contr
+00008d30: 6f6c 2873 656c 662e 7768 6974 6562 6f78  ol(self.whitebox
+00008d40: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00008d50: 2020 2065 6c69 6620 746f 6f6c 5f6e 616d     elif tool_nam
+00008d60: 6520 3d3d 2022 636f 6e76 6572 745f 6a73  e == "convert_js
+00008d70: 223a 0d0a 2020 2020 2020 2020 2020 2020  ":..            
+00008d80: 2020 2020 2020 2020 6966 2028 0d0a 2020          if (..  
+00008d90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008da0: 2020 2020 2020 7365 6c66 2e63 6f6e 7665        self.conve
+00008db0: 7274 5f63 7472 6c20 6973 206e 6f74 204e  rt_ctrl is not N
+00008dc0: 6f6e 650d 0a20 2020 2020 2020 2020 2020  one..           
+00008dd0: 2020 2020 2020 2020 2020 2020 2061 6e64               and
+00008de0: 2073 656c 662e 636f 6e76 6572 745f 6374   self.convert_ct
+00008df0: 726c 2069 6e20 7365 6c66 2e63 6f6e 7472  rl in self.contr
+00008e00: 6f6c 730d 0a20 2020 2020 2020 2020 2020  ols..           
+00008e10: 2020 2020 2020 2020 2029 3a0d 0a20 2020           ):..   
+00008e20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008e30: 2020 2020 2073 656c 662e 7265 6d6f 7665       self.remove
+00008e40: 5f63 6f6e 7472 6f6c 2873 656c 662e 636f  _control(self.co
+00008e50: 6e76 6572 745f 6374 726c 290d 0a0d 0a20  nvert_ctrl).... 
+00008e60: 2020 2020 2020 2066 6f72 2074 6f6f 6c20         for tool 
+00008e70: 696e 2074 6f6f 6c62 6172 5f67 7269 642e  in toolbar_grid.
+00008e80: 6368 696c 6472 656e 3a0d 0a20 2020 2020  children:..     
+00008e90: 2020 2020 2020 2074 6f6f 6c2e 6f62 7365         tool.obse
+00008ea0: 7276 6528 746f 6f6c 5f63 616c 6c62 6163  rve(tool_callbac
+00008eb0: 6b2c 2022 7661 6c75 6522 290d 0a0d 0a20  k, "value").... 
+00008ec0: 2020 2020 2020 2074 6f6f 6c62 6172 5f62         toolbar_b
+00008ed0: 7574 746f 6e20 3d20 7769 6467 6574 732e  utton = widgets.
+00008ee0: 546f 6767 6c65 4275 7474 6f6e 280d 0a20  ToggleButton(.. 
+00008ef0: 2020 2020 2020 2020 2020 2076 616c 7565             value
+00008f00: 3d46 616c 7365 2c0d 0a20 2020 2020 2020  =False,..       
+00008f10: 2020 2020 2074 6f6f 6c74 6970 3d22 546f       tooltip="To
+00008f20: 6f6c 6261 7222 2c0d 0a20 2020 2020 2020  olbar",..       
+00008f30: 2020 2020 2069 636f 6e3d 2277 7265 6e63       icon="wrenc
+00008f40: 6822 2c0d 0a20 2020 2020 2020 2020 2020  h",..           
+00008f50: 206c 6179 6f75 743d 7769 6467 6574 732e   layout=widgets.
+00008f60: 4c61 796f 7574 280d 0a20 2020 2020 2020  Layout(..       
+00008f70: 2020 2020 2020 2020 2077 6964 7468 3d22           width="
+00008f80: 3238 7078 222c 2068 6569 6768 743d 2232  28px", height="2
+00008f90: 3870 7822 2c20 7061 6464 696e 673d 2230  8px", padding="0
+00008fa0: 7078 2030 7078 2030 7078 2034 7078 220d  px 0px 0px 4px".
+00008fb0: 0a20 2020 2020 2020 2020 2020 2029 2c0d  .            ),.
+00008fc0: 0a20 2020 2020 2020 2029 0d0a 2020 2020  .        )..    
+00008fd0: 2020 2020 7365 6c66 2e74 6f6f 6c62 6172      self.toolbar
+00008fe0: 5f62 7574 746f 6e20 3d20 746f 6f6c 6261  _button = toolba
+00008ff0: 725f 6275 7474 6f6e 0d0a 0d0a 2020 2020  r_button....    
+00009000: 2020 2020 6c61 7965 7273 5f62 7574 746f      layers_butto
+00009010: 6e20 3d20 7769 6467 6574 732e 546f 6767  n = widgets.Togg
+00009020: 6c65 4275 7474 6f6e 280d 0a20 2020 2020  leButton(..     
+00009030: 2020 2020 2020 2076 616c 7565 3d46 616c         value=Fal
+00009040: 7365 2c0d 0a20 2020 2020 2020 2020 2020  se,..           
+00009050: 2074 6f6f 6c74 6970 3d22 4c61 7965 7273   tooltip="Layers
+00009060: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
+00009070: 6963 6f6e 3d22 7365 7276 6572 222c 0d0a  icon="server",..
+00009080: 2020 2020 2020 2020 2020 2020 6c61 796f              layo
+00009090: 7574 3d77 6964 6765 7473 2e4c 6179 6f75  ut=widgets.Layou
+000090a0: 7428 6865 6967 6874 3d22 3238 7078 222c  t(height="28px",
+000090b0: 2077 6964 7468 3d22 3732 7078 2229 2c0d   width="72px"),.
+000090c0: 0a20 2020 2020 2020 2029 0d0a 0d0a 2020  .        )....  
+000090d0: 2020 2020 2020 746f 6f6c 6261 725f 7769        toolbar_wi
+000090e0: 6467 6574 203d 2077 6964 6765 7473 2e56  dget = widgets.V
+000090f0: 426f 7828 290d 0a20 2020 2020 2020 2074  Box()..        t
+00009100: 6f6f 6c62 6172 5f77 6964 6765 742e 6368  oolbar_widget.ch
+00009110: 696c 6472 656e 203d 205b 746f 6f6c 6261  ildren = [toolba
+00009120: 725f 6275 7474 6f6e 5d0d 0a20 2020 2020  r_button]..     
+00009130: 2020 2074 6f6f 6c62 6172 5f68 6561 6465     toolbar_heade
+00009140: 7220 3d20 7769 6467 6574 732e 4842 6f78  r = widgets.HBox
+00009150: 2829 0d0a 2020 2020 2020 2020 746f 6f6c  ()..        tool
+00009160: 6261 725f 6865 6164 6572 2e63 6869 6c64  bar_header.child
+00009170: 7265 6e20 3d20 5b6c 6179 6572 735f 6275  ren = [layers_bu
+00009180: 7474 6f6e 2c20 746f 6f6c 6261 725f 6275  tton, toolbar_bu
+00009190: 7474 6f6e 5d0d 0a20 2020 2020 2020 2074  tton]..        t
+000091a0: 6f6f 6c62 6172 5f66 6f6f 7465 7220 3d20  oolbar_footer = 
+000091b0: 7769 6467 6574 732e 5642 6f78 2829 0d0a  widgets.VBox()..
+000091c0: 2020 2020 2020 2020 746f 6f6c 6261 725f          toolbar_
+000091d0: 666f 6f74 6572 2e63 6869 6c64 7265 6e20  footer.children 
+000091e0: 3d20 5b74 6f6f 6c62 6172 5f67 7269 645d  = [toolbar_grid]
+000091f0: 0d0a 0d0a 2020 2020 2020 2020 746f 6f6c  ....        tool
+00009200: 6261 725f 6576 656e 7420 3d20 6970 7965  bar_event = ipye
+00009210: 7665 6e74 732e 4576 656e 7428 0d0a 2020  vents.Event(..  
+00009220: 2020 2020 2020 2020 2020 736f 7572 6365            source
+00009230: 3d74 6f6f 6c62 6172 5f77 6964 6765 742c  =toolbar_widget,
+00009240: 2077 6174 6368 6564 5f65 7665 6e74 733d   watched_events=
+00009250: 5b22 6d6f 7573 6565 6e74 6572 222c 2022  ["mouseenter", "
+00009260: 6d6f 7573 656c 6561 7665 225d 0d0a 2020  mouseleave"]..  
+00009270: 2020 2020 2020 290d 0a0d 0a20 2020 2020        )....     
+00009280: 2020 2064 6566 2068 616e 646c 655f 746f     def handle_to
+00009290: 6f6c 6261 725f 6576 656e 7428 6576 656e  olbar_event(even
+000092a0: 7429 3a0d 0a0d 0a20 2020 2020 2020 2020  t):....         
+000092b0: 2020 2069 6620 6576 656e 745b 2274 7970     if event["typ
+000092c0: 6522 5d20 3d3d 2022 6d6f 7573 6565 6e74  e"] == "mouseent
+000092d0: 6572 223a 0d0a 2020 2020 2020 2020 2020  er":..          
+000092e0: 2020 2020 2020 746f 6f6c 6261 725f 7769        toolbar_wi
+000092f0: 6467 6574 2e63 6869 6c64 7265 6e20 3d20  dget.children = 
+00009300: 5b74 6f6f 6c62 6172 5f68 6561 6465 722c  [toolbar_header,
+00009310: 2074 6f6f 6c62 6172 5f66 6f6f 7465 725d   toolbar_footer]
+00009320: 0d0a 2020 2020 2020 2020 2020 2020 656c  ..            el
+00009330: 6966 2065 7665 6e74 5b22 7479 7065 225d  if event["type"]
+00009340: 203d 3d20 226d 6f75 7365 6c65 6176 6522   == "mouseleave"
+00009350: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00009360: 2020 2069 6620 6e6f 7420 746f 6f6c 6261     if not toolba
+00009370: 725f 6275 7474 6f6e 2e76 616c 7565 3a0d  r_button.value:.
+00009380: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00009390: 2020 2020 2074 6f6f 6c62 6172 5f77 6964       toolbar_wid
+000093a0: 6765 742e 6368 696c 6472 656e 203d 205b  get.children = [
+000093b0: 746f 6f6c 6261 725f 6275 7474 6f6e 5d0d  toolbar_button].
+000093c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000093d0: 2020 2020 2074 6f6f 6c62 6172 5f62 7574       toolbar_but
+000093e0: 746f 6e2e 7661 6c75 6520 3d20 4661 6c73  ton.value = Fals
+000093f0: 650d 0a20 2020 2020 2020 2020 2020 2020  e..             
+00009400: 2020 2020 2020 206c 6179 6572 735f 6275         layers_bu
+00009410: 7474 6f6e 2e76 616c 7565 203d 2046 616c  tton.value = Fal
+00009420: 7365 0d0a 0d0a 2020 2020 2020 2020 746f  se....        to
+00009430: 6f6c 6261 725f 6576 656e 742e 6f6e 5f64  olbar_event.on_d
+00009440: 6f6d 5f65 7665 6e74 2868 616e 646c 655f  om_event(handle_
+00009450: 746f 6f6c 6261 725f 6576 656e 7429 0d0a  toolbar_event)..
+00009460: 0d0a 2020 2020 2020 2020 6465 6620 746f  ..        def to
+00009470: 6f6c 6261 725f 6274 6e5f 636c 6963 6b28  olbar_btn_click(
+00009480: 6368 616e 6765 293a 0d0a 2020 2020 2020  change):..      
+00009490: 2020 2020 2020 6966 2063 6861 6e67 655b        if change[
+000094a0: 226e 6577 225d 3a0d 0a20 2020 2020 2020  "new"]:..       
+000094b0: 2020 2020 2020 2020 206c 6179 6572 735f           layers_
+000094c0: 6275 7474 6f6e 2e76 616c 7565 203d 2046  button.value = F
+000094d0: 616c 7365 0d0a 2020 2020 2020 2020 2020  alse..          
+000094e0: 2020 2020 2020 746f 6f6c 6261 725f 7769        toolbar_wi
+000094f0: 6467 6574 2e63 6869 6c64 7265 6e20 3d20  dget.children = 
+00009500: 5b74 6f6f 6c62 6172 5f68 6561 6465 722c  [toolbar_header,
+00009510: 2074 6f6f 6c62 6172 5f66 6f6f 7465 725d   toolbar_footer]
+00009520: 0d0a 2020 2020 2020 2020 2020 2020 656c  ..            el
+00009530: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
+00009540: 2020 2020 2069 6620 6e6f 7420 6c61 7965       if not laye
+00009550: 7273 5f62 7574 746f 6e2e 7661 6c75 653a  rs_button.value:
+00009560: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00009570: 2020 2020 2020 746f 6f6c 6261 725f 7769        toolbar_wi
+00009580: 6467 6574 2e63 6869 6c64 7265 6e20 3d20  dget.children = 
+00009590: 5b74 6f6f 6c62 6172 5f62 7574 746f 6e5d  [toolbar_button]
+000095a0: 0d0a 0d0a 2020 2020 2020 2020 746f 6f6c  ....        tool
+000095b0: 6261 725f 6275 7474 6f6e 2e6f 6273 6572  bar_button.obser
+000095c0: 7665 2874 6f6f 6c62 6172 5f62 746e 5f63  ve(toolbar_btn_c
+000095d0: 6c69 636b 2c20 2276 616c 7565 2229 0d0a  lick, "value")..
+000095e0: 0d0a 2020 2020 2020 2020 6465 6620 6c61  ..        def la
+000095f0: 7965 7273 5f62 746e 5f63 6c69 636b 2863  yers_btn_click(c
+00009600: 6861 6e67 6529 3a0d 0a20 2020 2020 2020  hange):..       
+00009610: 2020 2020 2069 6620 6368 616e 6765 5b22       if change["
+00009620: 6e65 7722 5d3a 0d0a 0d0a 2020 2020 2020  new"]:....      
+00009630: 2020 2020 2020 2020 2020 6c61 7965 7273            layers
+00009640: 5f68 626f 7820 3d20 5b5d 0d0a 2020 2020  _hbox = []..    
+00009650: 2020 2020 2020 2020 2020 2020 616c 6c5f              all_
+00009660: 6c61 7965 7273 5f63 686b 203d 2077 6964  layers_chk = wid
+00009670: 6765 7473 2e43 6865 636b 626f 7828 0d0a  gets.Checkbox(..
+00009680: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009690: 2020 2020 7661 6c75 653d 4661 6c73 652c      value=False,
+000096a0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000096b0: 2020 2020 2020 6465 7363 7269 7074 696f        descriptio
+000096c0: 6e3d 2241 6c6c 206c 6179 6572 7320 6f6e  n="All layers on
+000096d0: 2f6f 6666 222c 0d0a 2020 2020 2020 2020  /off",..        
+000096e0: 2020 2020 2020 2020 2020 2020 696e 6465              inde
+000096f0: 6e74 3d46 616c 7365 2c0d 0a20 2020 2020  nt=False,..     
+00009700: 2020 2020 2020 2020 2020 2020 2020 206c                 l
+00009710: 6179 6f75 743d 7769 6467 6574 732e 4c61  ayout=widgets.La
+00009720: 796f 7574 2868 6569 6768 743d 2231 3870  yout(height="18p
+00009730: 7822 2c20 7061 6464 696e 673d 2230 7078  x", padding="0px
+00009740: 2038 7078 2032 3570 7820 3870 7822 292c   8px 25px 8px"),
+00009750: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00009760: 2020 290d 0a20 2020 2020 2020 2020 2020    )..           
+00009770: 2020 2020 2061 6c6c 5f6c 6179 6572 735f       all_layers_
+00009780: 6368 6b2e 6c61 796f 7574 2e77 6964 7468  chk.layout.width
+00009790: 203d 2022 3330 6578 220d 0a20 2020 2020   = "30ex"..     
+000097a0: 2020 2020 2020 2020 2020 206c 6179 6572             layer
+000097b0: 735f 6862 6f78 2e61 7070 656e 6428 616c  s_hbox.append(al
+000097c0: 6c5f 6c61 7965 7273 5f63 686b 290d 0a0d  l_layers_chk)...
+000097d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000097e0: 2064 6566 2061 6c6c 5f6c 6179 6572 735f   def all_layers_
+000097f0: 6368 6b5f 6368 616e 6765 6428 6368 616e  chk_changed(chan
+00009800: 6765 293a 0d0a 2020 2020 2020 2020 2020  ge):..          
+00009810: 2020 2020 2020 2020 2020 6966 2063 6861            if cha
+00009820: 6e67 655b 226e 6577 225d 3a0d 0a20 2020  nge["new"]:..   
+00009830: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009840: 2020 2020 2066 6f72 206c 6179 6572 2069       for layer i
+00009850: 6e20 7365 6c66 2e6c 6179 6572 733a 0d0a  n self.layers:..
+00009860: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009870: 2020 2020 2020 2020 2020 2020 6c61 7965              laye
+00009880: 722e 7669 7369 626c 6520 3d20 5472 7565  r.visible = True
+00009890: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000098a0: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
+000098b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000098c0: 2020 2020 2066 6f72 206c 6179 6572 2069       for layer i
+000098d0: 6e20 7365 6c66 2e6c 6179 6572 733a 0d0a  n self.layers:..
+000098e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000098f0: 2020 2020 2020 2020 2020 2020 6c61 7965              laye
-00009900: 7273 203d 205b 0d0a 2020 2020 2020 2020  rs = [..        
-00009910: 2020 2020 2020 2020 2020 2020 6c79 720d              lyr.
-00009920: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00009930: 2020 2020 2066 6f72 206c 7972 2069 6e20       for lyr in 
-00009940: 7365 6c66 2e6c 6179 6572 735b 313a 5d0d  self.layers[1:].
-00009950: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00009960: 2020 2020 2069 6620 280d 0a20 2020 2020       if (..     
-00009970: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009980: 2020 2069 7369 6e73 7461 6e63 6528 6c79     isinstance(ly
-00009990: 722c 2069 7079 6c65 6166 6c65 742e 5469  r, ipyleaflet.Ti
-000099a0: 6c65 4c61 7965 7229 0d0a 2020 2020 2020  leLayer)..      
-000099b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000099c0: 2020 6f72 2069 7369 6e73 7461 6e63 6528    or isinstance(
-000099d0: 6c79 722c 2069 7079 6c65 6166 6c65 742e  lyr, ipyleaflet.
-000099e0: 574d 534c 6179 6572 290d 0a20 2020 2020  WMSLayer)..     
-000099f0: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-00009a00: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00009a10: 2020 5d0d 0a0d 0a20 2020 2020 2020 2020    ]....         
-00009a20: 2020 2020 2020 2023 2069 6620 7468 6520         # if the 
-00009a30: 6c61 7965 7273 2063 6f6e 7461 696e 2075  layers contain u
-00009a40: 6e73 7570 706f 7274 6564 206c 6179 6572  nsupported layer
-00009a50: 7320 2865 2e67 2e2c 2047 656f 4a53 4f4e  s (e.g., GeoJSON
-00009a60: 2c20 4765 6f44 6174 6129 2c20 6164 6473  , GeoData), adds
-00009a70: 2074 6865 2069 7079 6c65 6166 6c65 7420   the ipyleaflet 
-00009a80: 6275 696c 742d 696e 204c 6179 6572 436f  built-in LayerCo
-00009a90: 6e74 726f 6c0d 0a20 2020 2020 2020 2020  ntrol..         
-00009aa0: 2020 2020 2020 2069 6620 6c65 6e28 6c61         if len(la
-00009ab0: 7965 7273 2920 3c20 286c 656e 2873 656c  yers) < (len(sel
-00009ac0: 662e 6c61 7965 7273 2920 2d20 3129 3a0d  f.layers) - 1):.
-00009ad0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00009ae0: 2020 2020 2069 6620 7365 6c66 2e6c 6179       if self.lay
-00009af0: 6572 5f63 6f6e 7472 6f6c 2069 7320 4e6f  er_control is No
-00009b00: 6e65 3a0d 0a20 2020 2020 2020 2020 2020  ne:..           
-00009b10: 2020 2020 2020 2020 2020 2020 206c 6179               lay
-00009b20: 6572 5f63 6f6e 7472 6f6c 203d 2069 7079  er_control = ipy
-00009b30: 6c65 6166 6c65 742e 4c61 7965 7273 436f  leaflet.LayersCo
-00009b40: 6e74 726f 6c28 706f 7369 7469 6f6e 3d22  ntrol(position="
-00009b50: 746f 7072 6967 6874 2229 0d0a 2020 2020  topright")..    
-00009b60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009b70: 2020 2020 7365 6c66 2e6c 6179 6572 5f63      self.layer_c
-00009b80: 6f6e 7472 6f6c 203d 206c 6179 6572 5f63  ontrol = layer_c
-00009b90: 6f6e 7472 6f6c 0d0a 2020 2020 2020 2020  ontrol..        
-00009ba0: 2020 2020 2020 2020 2020 2020 6966 2073              if s
-00009bb0: 656c 662e 6c61 7965 725f 636f 6e74 726f  elf.layer_contro
-00009bc0: 6c20 6e6f 7420 696e 2073 656c 662e 636f  l not in self.co
-00009bd0: 6e74 726f 6c73 3a0d 0a20 2020 2020 2020  ntrols:..       
-00009be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009bf0: 2073 656c 662e 6164 645f 636f 6e74 726f   self.add_contro
-00009c00: 6c28 7365 6c66 2e6c 6179 6572 5f63 6f6e  l(self.layer_con
-00009c10: 7472 6f6c 290d 0a0d 0a20 2020 2020 2020  trol)....       
-00009c20: 2020 2020 2020 2020 2023 2066 6f72 206e           # for n
-00009c30: 6f6e 2d54 696c 654c 6179 6572 2c20 7573  on-TileLayer, us
-00009c40: 6520 6c61 7965 722e 7374 796c 653d 7b27  e layer.style={'
-00009c50: 6f70 6163 6974 7927 3a30 2c20 2766 696c  opacity':0, 'fil
-00009c60: 6c4f 7061 6369 7479 273a 2030 7d20 746f  lOpacity': 0} to
-00009c70: 2074 7572 6e20 6c61 7965 7220 6f66 662e   turn layer off.
-00009c80: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00009c90: 2020 666f 7220 6c61 7965 7220 696e 206c    for layer in l
-00009ca0: 6179 6572 733a 0d0a 2020 2020 2020 2020  ayers:..        
-00009cb0: 2020 2020 2020 2020 2020 2020 6c61 7965              laye
-00009cc0: 725f 6368 6b20 3d20 7769 6467 6574 732e  r_chk = widgets.
-00009cd0: 4368 6563 6b62 6f78 280d 0a20 2020 2020  Checkbox(..     
-00009ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009cf0: 2020 2076 616c 7565 3d6c 6179 6572 2e76     value=layer.v
-00009d00: 6973 6962 6c65 2c0d 0a20 2020 2020 2020  isible,..       
-00009d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009d20: 2064 6573 6372 6970 7469 6f6e 3d6c 6179   description=lay
-00009d30: 6572 2e6e 616d 652c 0d0a 2020 2020 2020  er.name,..      
-00009d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009d50: 2020 696e 6465 6e74 3d46 616c 7365 2c0d    indent=False,.
-00009d60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00009d70: 2020 2020 2020 2020 206c 6179 6f75 743d           layout=
-00009d80: 7769 6467 6574 732e 4c61 796f 7574 2868  widgets.Layout(h
-00009d90: 6569 6768 743d 2231 3870 7822 292c 0d0a  eight="18px"),..
-00009da0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009db0: 2020 2020 290d 0a20 2020 2020 2020 2020      )..         
-00009dc0: 2020 2020 2020 2020 2020 206c 6179 6572             layer
-00009dd0: 5f63 686b 2e6c 6179 6f75 742e 7769 6474  _chk.layout.widt
-00009de0: 6820 3d20 2232 3565 7822 0d0a 2020 2020  h = "25ex"..    
-00009df0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009e00: 6c61 7965 725f 6f70 6163 6974 7920 3d20  layer_opacity = 
-00009e10: 7769 6467 6574 732e 466c 6f61 7453 6c69  widgets.FloatSli
-00009e20: 6465 7228 0d0a 2020 2020 2020 2020 2020  der(..          
-00009e30: 2020 2020 2020 2020 2020 2020 2020 7661                va
-00009e40: 6c75 653d 6c61 7965 722e 6f70 6163 6974  lue=layer.opacit
-00009e50: 792c 0d0a 2020 2020 2020 2020 2020 2020  y,..            
-00009e60: 2020 2020 2020 2020 2020 2020 6d69 6e3d              min=
-00009e70: 302c 0d0a 2020 2020 2020 2020 2020 2020  0,..            
-00009e80: 2020 2020 2020 2020 2020 2020 6d61 783d              max=
-00009e90: 312c 0d0a 2020 2020 2020 2020 2020 2020  1,..            
-00009ea0: 2020 2020 2020 2020 2020 2020 7374 6570              step
-00009eb0: 3d30 2e30 312c 0d0a 2020 2020 2020 2020  =0.01,..        
-00009ec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009ed0: 7265 6164 6f75 743d 4661 6c73 652c 0d0a  readout=False,..
-00009ee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009ef0: 2020 2020 2020 2020 6c61 796f 7574 3d77          layout=w
-00009f00: 6964 6765 7473 2e4c 6179 6f75 7428 7769  idgets.Layout(wi
-00009f10: 6474 683d 2238 3070 7822 292c 0d0a 2020  dth="80px"),..  
-00009f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009f30: 2020 290d 0a20 2020 2020 2020 2020 2020    )..           
-00009f40: 2020 2020 2020 2020 206c 6179 6572 5f73           layer_s
-00009f50: 6574 7469 6e67 7320 3d20 7769 6467 6574  ettings = widget
-00009f60: 732e 546f 6767 6c65 4275 7474 6f6e 280d  s.ToggleButton(.
-00009f70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00009f80: 2020 2020 2020 2020 2069 636f 6e3d 2267           icon="g
-00009f90: 6561 7222 2c0d 0a20 2020 2020 2020 2020  ear",..         
-00009fa0: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-00009fb0: 6f6f 6c74 6970 3d6c 6179 6572 2e6e 616d  ooltip=layer.nam
-00009fc0: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
-00009fd0: 2020 2020 2020 2020 2020 2020 6c61 796f              layo
-00009fe0: 7574 3d77 6964 6765 7473 2e4c 6179 6f75  ut=widgets.Layou
-00009ff0: 7428 0d0a 2020 2020 2020 2020 2020 2020  t(..            
-0000a000: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a010: 7769 6474 683d 2232 3570 7822 2c20 6865  width="25px", he
-0000a020: 6967 6874 3d22 3235 7078 222c 2070 6164  ight="25px", pad
-0000a030: 6469 6e67 3d22 3070 7820 3070 7820 3070  ding="0px 0px 0p
-0000a040: 7820 3570 7822 0d0a 2020 2020 2020 2020  x 5px"..        
-0000a050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a060: 292c 0d0a 2020 2020 2020 2020 2020 2020  ),..            
-0000a070: 2020 2020 2020 2020 290d 0a0d 0a20 2020          )....   
-0000a080: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a090: 2064 6566 206c 6179 6572 5f76 6973 5f6f   def layer_vis_o
-0000a0a0: 6e5f 636c 6963 6b28 6368 616e 6765 293a  n_click(change):
-0000a0b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000a0c0: 2020 2020 2020 2020 2020 6966 2063 6861            if cha
-0000a0d0: 6e67 655b 226e 6577 225d 3a0d 0a20 2020  nge["new"]:..   
-0000a0e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a0f0: 2020 2020 2020 2020 206c 6179 6572 5f6e           layer_n
-0000a100: 616d 6520 3d20 6368 616e 6765 5b22 6f77  ame = change["ow
-0000a110: 6e65 7222 5d2e 746f 6f6c 7469 700d 0a20  ner"].tooltip.. 
-0000a120: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a130: 2020 2020 2020 2020 2020 2023 2069 6620             # if 
-0000a140: 6c61 7965 725f 6e61 6d65 2069 6e20 7365  layer_name in se
-0000a150: 6c66 2e65 655f 7261 7374 6572 5f6c 6179  lf.ee_raster_lay
-0000a160: 6572 5f6e 616d 6573 3a0d 0a20 2020 2020  er_names:..     
-0000a170: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a180: 2020 2020 2020 2069 6620 6c61 7965 725f         if layer_
-0000a190: 6e61 6d65 2069 6e20 7365 6c66 2e65 655f  name in self.ee_
-0000a1a0: 6c61 7965 725f 6e61 6d65 733a 0d0a 2020  layer_names:..  
-0000a1b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a1c0: 2020 2020 2020 2020 2020 2020 2020 6c61                la
-0000a1d0: 7965 725f 6469 6374 203d 2073 656c 662e  yer_dict = self.
-0000a1e0: 6565 5f6c 6179 6572 5f64 6963 745b 6c61  ee_layer_dict[la
-0000a1f0: 7965 725f 6e61 6d65 5d0d 0a0d 0a20 2020  yer_name]....   
-0000a200: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a210: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0000a220: 7365 6c66 2e76 6973 5f77 6964 6765 7420  self.vis_widget 
-0000a230: 6973 206e 6f74 204e 6f6e 653a 0d0a 2020  is not None:..  
-0000a240: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a250: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a260: 2020 7365 6c66 2e76 6973 5f77 6964 6765    self.vis_widge
-0000a270: 7420 3d20 4e6f 6e65 0d0a 2020 2020 2020  t = None..      
+00009900: 722e 7669 7369 626c 6520 3d20 4661 6c73  r.visible = Fals
+00009910: 650d 0a0d 0a20 2020 2020 2020 2020 2020  e....           
+00009920: 2020 2020 2061 6c6c 5f6c 6179 6572 735f       all_layers_
+00009930: 6368 6b2e 6f62 7365 7276 6528 616c 6c5f  chk.observe(all_
+00009940: 6c61 7965 7273 5f63 686b 5f63 6861 6e67  layers_chk_chang
+00009950: 6564 2c20 2276 616c 7565 2229 0d0a 0d0a  ed, "value")....
+00009960: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009970: 6c61 7965 7273 203d 205b 0d0a 2020 2020  layers = [..    
+00009980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009990: 6c79 720d 0a20 2020 2020 2020 2020 2020  lyr..           
+000099a0: 2020 2020 2020 2020 2066 6f72 206c 7972           for lyr
+000099b0: 2069 6e20 7365 6c66 2e6c 6179 6572 735b   in self.layers[
+000099c0: 313a 5d0d 0a20 2020 2020 2020 2020 2020  1:]..           
+000099d0: 2020 2020 2020 2020 2069 6620 280d 0a20           if (.. 
+000099e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000099f0: 2020 2020 2020 2069 7369 6e73 7461 6e63         isinstanc
+00009a00: 6528 6c79 722c 2069 7079 6c65 6166 6c65  e(lyr, ipyleafle
+00009a10: 742e 5469 6c65 4c61 7965 7229 0d0a 2020  t.TileLayer)..  
+00009a20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009a30: 2020 2020 2020 6f72 2069 7369 6e73 7461        or isinsta
+00009a40: 6e63 6528 6c79 722c 2069 7079 6c65 6166  nce(lyr, ipyleaf
+00009a50: 6c65 742e 574d 534c 6179 6572 290d 0a20  let.WMSLayer).. 
+00009a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009a70: 2020 2029 0d0a 2020 2020 2020 2020 2020     )..          
+00009a80: 2020 2020 2020 5d0d 0a0d 0a20 2020 2020        ]....     
+00009a90: 2020 2020 2020 2020 2020 2023 2069 6620             # if 
+00009aa0: 7468 6520 6c61 7965 7273 2063 6f6e 7461  the layers conta
+00009ab0: 696e 2075 6e73 7570 706f 7274 6564 206c  in unsupported l
+00009ac0: 6179 6572 7320 2865 2e67 2e2c 2047 656f  ayers (e.g., Geo
+00009ad0: 4a53 4f4e 2c20 4765 6f44 6174 6129 2c20  JSON, GeoData), 
+00009ae0: 6164 6473 2074 6865 2069 7079 6c65 6166  adds the ipyleaf
+00009af0: 6c65 7420 6275 696c 742d 696e 204c 6179  let built-in Lay
+00009b00: 6572 436f 6e74 726f 6c0d 0a20 2020 2020  erControl..     
+00009b10: 2020 2020 2020 2020 2020 2069 6620 6c65             if le
+00009b20: 6e28 6c61 7965 7273 2920 3c20 286c 656e  n(layers) < (len
+00009b30: 2873 656c 662e 6c61 7965 7273 2920 2d20  (self.layers) - 
+00009b40: 3129 3a0d 0a20 2020 2020 2020 2020 2020  1):..           
+00009b50: 2020 2020 2020 2020 2069 6620 7365 6c66           if self
+00009b60: 2e6c 6179 6572 5f63 6f6e 7472 6f6c 2069  .layer_control i
+00009b70: 7320 4e6f 6e65 3a0d 0a20 2020 2020 2020  s None:..       
+00009b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009b90: 206c 6179 6572 5f63 6f6e 7472 6f6c 203d   layer_control =
+00009ba0: 2069 7079 6c65 6166 6c65 742e 4c61 7965   ipyleaflet.Laye
+00009bb0: 7273 436f 6e74 726f 6c28 706f 7369 7469  rsControl(positi
+00009bc0: 6f6e 3d22 746f 7072 6967 6874 2229 0d0a  on="topright")..
+00009bd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009be0: 2020 2020 2020 2020 7365 6c66 2e6c 6179          self.lay
+00009bf0: 6572 5f63 6f6e 7472 6f6c 203d 206c 6179  er_control = lay
+00009c00: 6572 5f63 6f6e 7472 6f6c 0d0a 2020 2020  er_control..    
+00009c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009c20: 6966 2073 656c 662e 6c61 7965 725f 636f  if self.layer_co
+00009c30: 6e74 726f 6c20 6e6f 7420 696e 2073 656c  ntrol not in sel
+00009c40: 662e 636f 6e74 726f 6c73 3a0d 0a20 2020  f.controls:..   
+00009c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009c60: 2020 2020 2073 656c 662e 6164 645f 636f       self.add_co
+00009c70: 6e74 726f 6c28 7365 6c66 2e6c 6179 6572  ntrol(self.layer
+00009c80: 5f63 6f6e 7472 6f6c 290d 0a0d 0a20 2020  _control)....   
+00009c90: 2020 2020 2020 2020 2020 2020 2023 2066               # f
+00009ca0: 6f72 206e 6f6e 2d54 696c 654c 6179 6572  or non-TileLayer
+00009cb0: 2c20 7573 6520 6c61 7965 722e 7374 796c  , use layer.styl
+00009cc0: 653d 7b27 6f70 6163 6974 7927 3a30 2c20  e={'opacity':0, 
+00009cd0: 2766 696c 6c4f 7061 6369 7479 273a 2030  'fillOpacity': 0
+00009ce0: 7d20 746f 2074 7572 6e20 6c61 7965 7220  } to turn layer 
+00009cf0: 6f66 662e 0d0a 2020 2020 2020 2020 2020  off...          
+00009d00: 2020 2020 2020 666f 7220 6c61 7965 7220        for layer 
+00009d10: 696e 206c 6179 6572 733a 0d0a 2020 2020  in layers:..    
+00009d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009d30: 6c61 7965 725f 6368 6b20 3d20 7769 6467  layer_chk = widg
+00009d40: 6574 732e 4368 6563 6b62 6f78 280d 0a20  ets.Checkbox(.. 
+00009d50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009d60: 2020 2020 2020 2076 616c 7565 3d6c 6179         value=lay
+00009d70: 6572 2e76 6973 6962 6c65 2c0d 0a20 2020  er.visible,..   
+00009d80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009d90: 2020 2020 2064 6573 6372 6970 7469 6f6e       description
+00009da0: 3d6c 6179 6572 2e6e 616d 652c 0d0a 2020  =layer.name,..  
+00009db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009dc0: 2020 2020 2020 696e 6465 6e74 3d46 616c        indent=Fal
+00009dd0: 7365 2c0d 0a20 2020 2020 2020 2020 2020  se,..           
+00009de0: 2020 2020 2020 2020 2020 2020 206c 6179               lay
+00009df0: 6f75 743d 7769 6467 6574 732e 4c61 796f  out=widgets.Layo
+00009e00: 7574 2868 6569 6768 743d 2231 3870 7822  ut(height="18px"
+00009e10: 292c 0d0a 2020 2020 2020 2020 2020 2020  ),..            
+00009e20: 2020 2020 2020 2020 290d 0a20 2020 2020          )..     
+00009e30: 2020 2020 2020 2020 2020 2020 2020 206c                 l
+00009e40: 6179 6572 5f63 686b 2e6c 6179 6f75 742e  ayer_chk.layout.
+00009e50: 7769 6474 6820 3d20 2232 3565 7822 0d0a  width = "25ex"..
+00009e60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009e70: 2020 2020 6c61 7965 725f 6f70 6163 6974      layer_opacit
+00009e80: 7920 3d20 7769 6467 6574 732e 466c 6f61  y = widgets.Floa
+00009e90: 7453 6c69 6465 7228 0d0a 2020 2020 2020  tSlider(..      
+00009ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009eb0: 2020 7661 6c75 653d 6c61 7965 722e 6f70    value=layer.op
+00009ec0: 6163 6974 792c 0d0a 2020 2020 2020 2020  acity,..        
+00009ed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009ee0: 6d69 6e3d 302c 0d0a 2020 2020 2020 2020  min=0,..        
+00009ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009f00: 6d61 783d 312c 0d0a 2020 2020 2020 2020  max=1,..        
+00009f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009f20: 7374 6570 3d30 2e30 312c 0d0a 2020 2020  step=0.01,..    
+00009f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009f40: 2020 2020 7265 6164 6f75 743d 4661 6c73      readout=Fals
+00009f50: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
+00009f60: 2020 2020 2020 2020 2020 2020 6c61 796f              layo
+00009f70: 7574 3d77 6964 6765 7473 2e4c 6179 6f75  ut=widgets.Layou
+00009f80: 7428 7769 6474 683d 2238 3070 7822 292c  t(width="80px"),
+00009f90: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00009fa0: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
+00009fb0: 2020 2020 2020 2020 2020 2020 206c 6179               lay
+00009fc0: 6572 5f73 6574 7469 6e67 7320 3d20 7769  er_settings = wi
+00009fd0: 6467 6574 732e 546f 6767 6c65 4275 7474  dgets.ToggleButt
+00009fe0: 6f6e 280d 0a20 2020 2020 2020 2020 2020  on(..           
+00009ff0: 2020 2020 2020 2020 2020 2020 2069 636f               ico
+0000a000: 6e3d 2267 6561 7222 2c0d 0a20 2020 2020  n="gear",..     
+0000a010: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a020: 2020 2074 6f6f 6c74 6970 3d6c 6179 6572     tooltip=layer
+0000a030: 2e6e 616d 652c 0d0a 2020 2020 2020 2020  .name,..        
+0000a040: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a050: 6c61 796f 7574 3d77 6964 6765 7473 2e4c  layout=widgets.L
+0000a060: 6179 6f75 7428 0d0a 2020 2020 2020 2020  ayout(..        
+0000a070: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a080: 2020 2020 7769 6474 683d 2232 3570 7822      width="25px"
+0000a090: 2c20 6865 6967 6874 3d22 3235 7078 222c  , height="25px",
+0000a0a0: 2070 6164 6469 6e67 3d22 3070 7820 3070   padding="0px 0p
+0000a0b0: 7820 3070 7820 3570 7822 0d0a 2020 2020  x 0px 5px"..    
+0000a0c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a0d0: 2020 2020 292c 0d0a 2020 2020 2020 2020      ),..        
+0000a0e0: 2020 2020 2020 2020 2020 2020 290d 0a0d              )...
+0000a0f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000a100: 2020 2020 2064 6566 206c 6179 6572 5f76       def layer_v
+0000a110: 6973 5f6f 6e5f 636c 6963 6b28 6368 616e  is_on_click(chan
+0000a120: 6765 293a 0d0a 2020 2020 2020 2020 2020  ge):..          
+0000a130: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0000a140: 2063 6861 6e67 655b 226e 6577 225d 3a0d   change["new"]:.
+0000a150: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000a160: 2020 2020 2020 2020 2020 2020 206c 6179               lay
+0000a170: 6572 5f6e 616d 6520 3d20 6368 616e 6765  er_name = change
+0000a180: 5b22 6f77 6e65 7222 5d2e 746f 6f6c 7469  ["owner"].toolti
+0000a190: 700d 0a20 2020 2020 2020 2020 2020 2020  p..             
+0000a1a0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0000a1b0: 2069 6620 6c61 7965 725f 6e61 6d65 2069   if layer_name i
+0000a1c0: 6e20 7365 6c66 2e65 655f 7261 7374 6572  n self.ee_raster
+0000a1d0: 5f6c 6179 6572 5f6e 616d 6573 3a0d 0a20  _layer_names:.. 
+0000a1e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a1f0: 2020 2020 2020 2020 2020 2069 6620 6c61             if la
+0000a200: 7965 725f 6e61 6d65 2069 6e20 7365 6c66  yer_name in self
+0000a210: 2e65 655f 6c61 7965 725f 6e61 6d65 733a  .ee_layer_names:
+0000a220: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000a230: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a240: 2020 6c61 7965 725f 6469 6374 203d 2073    layer_dict = s
+0000a250: 656c 662e 6565 5f6c 6179 6572 5f64 6963  elf.ee_layer_dic
+0000a260: 745b 6c61 7965 725f 6e61 6d65 5d0d 0a0d  t[layer_name]...
+0000a270: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 0000a280: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a290: 2020 2020 2020 2020 2020 7365 6c66 2e76            self.v
-0000a2a0: 6973 5f77 6964 6765 7420 3d20 7365 6c66  is_widget = self
-0000a2b0: 2e63 7265 6174 655f 7669 735f 7769 6467  .create_vis_widg
-0000a2c0: 6574 286c 6179 6572 5f64 6963 7429 0d0a  et(layer_dict)..
-0000a2d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a2e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a2f0: 6966 2073 656c 662e 7669 735f 636f 6e74  if self.vis_cont
-0000a300: 726f 6c20 696e 2073 656c 662e 636f 6e74  rol in self.cont
-0000a310: 726f 6c73 3a0d 0a20 2020 2020 2020 2020  rols:..         
-0000a320: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a330: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0000a340: 7265 6d6f 7665 5f63 6f6e 7472 6f6c 2873  remove_control(s
-0000a350: 656c 662e 7669 735f 636f 6e74 726f 6c29  elf.vis_control)
-0000a360: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000a370: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a380: 2020 2020 2020 7365 6c66 2e76 6973 5f63        self.vis_c
-0000a390: 6f6e 7472 6f6c 203d 204e 6f6e 650d 0a20  ontrol = None.. 
-0000a3a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a3b0: 2020 2020 2020 2020 2020 2020 2020 2076                 v
-0000a3c0: 6973 5f63 6f6e 7472 6f6c 203d 2069 7079  is_control = ipy
-0000a3d0: 6c65 6166 6c65 742e 5769 6467 6574 436f  leaflet.WidgetCo
-0000a3e0: 6e74 726f 6c28 0d0a 2020 2020 2020 2020  ntrol(..        
-0000a3f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a400: 2020 2020 2020 2020 2020 2020 7769 6467              widg
-0000a410: 6574 3d73 656c 662e 7669 735f 7769 6467  et=self.vis_widg
-0000a420: 6574 2c20 706f 7369 7469 6f6e 3d22 746f  et, position="to
-0000a430: 7072 6967 6874 220d 0a20 2020 2020 2020  pright"..       
-0000a440: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a450: 2020 2020 2020 2020 2029 0d0a 2020 2020           )..    
+0000a290: 2069 6620 7365 6c66 2e76 6973 5f77 6964   if self.vis_wid
+0000a2a0: 6765 7420 6973 206e 6f74 204e 6f6e 653a  get is not None:
+0000a2b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000a2c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a2d0: 2020 2020 2020 7365 6c66 2e76 6973 5f77        self.vis_w
+0000a2e0: 6964 6765 7420 3d20 4e6f 6e65 0d0a 2020  idget = None..  
+0000a2f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a300: 2020 2020 2020 2020 2020 2020 2020 7365                se
+0000a310: 6c66 2e76 6973 5f77 6964 6765 7420 3d20  lf.vis_widget = 
+0000a320: 7365 6c66 2e63 7265 6174 655f 7669 735f  self.create_vis_
+0000a330: 7769 6467 6574 286c 6179 6572 5f64 6963  widget(layer_dic
+0000a340: 7429 0d0a 2020 2020 2020 2020 2020 2020  t)..            
+0000a350: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a360: 2020 2020 6966 2073 656c 662e 7669 735f      if self.vis_
+0000a370: 636f 6e74 726f 6c20 696e 2073 656c 662e  control in self.
+0000a380: 636f 6e74 726f 6c73 3a0d 0a20 2020 2020  controls:..     
+0000a390: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a3a0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0000a3b0: 656c 662e 7265 6d6f 7665 5f63 6f6e 7472  elf.remove_contr
+0000a3c0: 6f6c 2873 656c 662e 7669 735f 636f 6e74  ol(self.vis_cont
+0000a3d0: 726f 6c29 0d0a 2020 2020 2020 2020 2020  rol)..          
+0000a3e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a3f0: 2020 2020 2020 2020 2020 7365 6c66 2e76            self.v
+0000a400: 6973 5f63 6f6e 7472 6f6c 203d 204e 6f6e  is_control = Non
+0000a410: 650d 0a20 2020 2020 2020 2020 2020 2020  e..             
+0000a420: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a430: 2020 2076 6973 5f63 6f6e 7472 6f6c 203d     vis_control =
+0000a440: 2069 7079 6c65 6166 6c65 742e 5769 6467   ipyleaflet.Widg
+0000a450: 6574 436f 6e74 726f 6c28 0d0a 2020 2020  etControl(..    
 0000a460: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a470: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0000a480: 2e61 6464 5f63 6f6e 7472 6f6c 2828 7669  .add_control((vi
-0000a490: 735f 636f 6e74 726f 6c29 290d 0a20 2020  s_control))..   
-0000a4a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a4b0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-0000a4c0: 662e 7669 735f 636f 6e74 726f 6c20 3d20  f.vis_control = 
-0000a4d0: 7669 735f 636f 6e74 726f 6c0d 0a20 2020  vis_control..   
+0000a470: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a480: 7769 6467 6574 3d73 656c 662e 7669 735f  widget=self.vis_
+0000a490: 7769 6467 6574 2c20 706f 7369 7469 6f6e  widget, position
+0000a4a0: 3d22 746f 7072 6967 6874 220d 0a20 2020  ="topright"..   
+0000a4b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a4c0: 2020 2020 2020 2020 2020 2020 2029 0d0a               )..
+0000a4d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000a4e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a4f0: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
-0000a500: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a510: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a520: 6966 2073 656c 662e 7669 735f 7769 6467  if self.vis_widg
-0000a530: 6574 2069 7320 6e6f 7420 4e6f 6e65 3a0d  et is not None:.
-0000a540: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000a550: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a560: 2020 2020 2073 656c 662e 7669 735f 7769       self.vis_wi
-0000a570: 6467 6574 203d 204e 6f6e 650d 0a20 2020  dget = None..   
+0000a4f0: 7365 6c66 2e61 6464 5f63 6f6e 7472 6f6c  self.add_control
+0000a500: 2828 7669 735f 636f 6e74 726f 6c29 290d  ((vis_control)).
+0000a510: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000a520: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a530: 2073 656c 662e 7669 735f 636f 6e74 726f   self.vis_contro
+0000a540: 6c20 3d20 7669 735f 636f 6e74 726f 6c0d  l = vis_control.
+0000a550: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000a560: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+0000a570: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
 0000a580: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a590: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0000a5a0: 7365 6c66 2e76 6973 5f63 6f6e 7472 6f6c  self.vis_control
-0000a5b0: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
+0000a590: 2020 2020 6966 2073 656c 662e 7669 735f      if self.vis_
+0000a5a0: 7769 6467 6574 2069 7320 6e6f 7420 4e6f  widget is not No
+0000a5b0: 6e65 3a0d 0a20 2020 2020 2020 2020 2020  ne:..           
 0000a5c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a5d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a5e0: 2020 2069 6620 7365 6c66 2e76 6973 5f63     if self.vis_c
-0000a5f0: 6f6e 7472 6f6c 2069 6e20 7365 6c66 2e63  ontrol in self.c
-0000a600: 6f6e 7472 6f6c 733a 0d0a 2020 2020 2020  ontrols:..      
-0000a610: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a630: 2020 7365 6c66 2e72 656d 6f76 655f 636f    self.remove_co
-0000a640: 6e74 726f 6c28 7365 6c66 2e76 6973 5f63  ntrol(self.vis_c
-0000a650: 6f6e 7472 6f6c 290d 0a20 2020 2020 2020  ontrol)..       
-0000a660: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a670: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-0000a680: 662e 7669 735f 636f 6e74 726f 6c20 3d20  f.vis_control = 
-0000a690: 4e6f 6e65 0d0a 2020 2020 2020 2020 2020  None..          
-0000a6a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a6b0: 2020 6368 616e 6765 5b22 6f77 6e65 7222    change["owner"
-0000a6c0: 5d2e 7661 6c75 6520 3d20 4661 6c73 650d  ].value = False.
-0000a6d0: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0000a6e0: 2020 2020 2020 206c 6179 6572 5f73 6574         layer_set
-0000a6f0: 7469 6e67 732e 6f62 7365 7276 6528 6c61  tings.observe(la
-0000a700: 7965 725f 7669 735f 6f6e 5f63 6c69 636b  yer_vis_on_click
-0000a710: 2c20 2276 616c 7565 2229 0d0a 0d0a 2020  , "value")....  
-0000a720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a730: 2020 6465 6620 6c61 7965 725f 6368 6b5f    def layer_chk_
-0000a740: 6368 616e 6765 6428 6368 616e 6765 293a  changed(change):
-0000a750: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0000a760: 2020 2020 2020 2020 2020 2020 6c61 7965              laye
-0000a770: 725f 6e61 6d65 203d 2063 6861 6e67 655b  r_name = change[
-0000a780: 226f 776e 6572 225d 2e64 6573 6372 6970  "owner"].descrip
-0000a790: 7469 6f6e 0d0a 2020 2020 2020 2020 2020  tion..          
-0000a7a0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0000a7b0: 206c 6179 6572 5f6e 616d 6520 696e 2073   layer_name in s
-0000a7c0: 656c 662e 6565 5f6c 6179 6572 5f6e 616d  elf.ee_layer_nam
-0000a7d0: 6573 3a0d 0a20 2020 2020 2020 2020 2020  es:..           
-0000a7e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a7f0: 2069 6620 6368 616e 6765 5b22 6e65 7722   if change["new"
-0000a800: 5d3a 0d0a 2020 2020 2020 2020 2020 2020  ]:..            
+0000a5d0: 2020 2020 2020 2020 2073 656c 662e 7669           self.vi
+0000a5e0: 735f 7769 6467 6574 203d 204e 6f6e 650d  s_widget = None.
+0000a5f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000a600: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a610: 2069 6620 7365 6c66 2e76 6973 5f63 6f6e   if self.vis_con
+0000a620: 7472 6f6c 2069 7320 6e6f 7420 4e6f 6e65  trol is not None
+0000a630: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0000a640: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a650: 2020 2020 2020 2069 6620 7365 6c66 2e76         if self.v
+0000a660: 6973 5f63 6f6e 7472 6f6c 2069 6e20 7365  is_control in se
+0000a670: 6c66 2e63 6f6e 7472 6f6c 733a 0d0a 2020  lf.controls:..  
+0000a680: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a690: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a6a0: 2020 2020 2020 7365 6c66 2e72 656d 6f76        self.remov
+0000a6b0: 655f 636f 6e74 726f 6c28 7365 6c66 2e76  e_control(self.v
+0000a6c0: 6973 5f63 6f6e 7472 6f6c 290d 0a20 2020  is_control)..   
+0000a6d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a6e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a6f0: 2073 656c 662e 7669 735f 636f 6e74 726f   self.vis_contro
+0000a700: 6c20 3d20 4e6f 6e65 0d0a 2020 2020 2020  l = None..      
+0000a710: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a720: 2020 2020 2020 6368 616e 6765 5b22 6f77        change["ow
+0000a730: 6e65 7222 5d2e 7661 6c75 6520 3d20 4661  ner"].value = Fa
+0000a740: 6c73 650d 0a0d 0a20 2020 2020 2020 2020  lse....         
+0000a750: 2020 2020 2020 2020 2020 206c 6179 6572             layer
+0000a760: 5f73 6574 7469 6e67 732e 6f62 7365 7276  _settings.observ
+0000a770: 6528 6c61 7965 725f 7669 735f 6f6e 5f63  e(layer_vis_on_c
+0000a780: 6c69 636b 2c20 2276 616c 7565 2229 0d0a  lick, "value")..
+0000a790: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000a7a0: 2020 2020 2020 6465 6620 6c61 7965 725f        def layer_
+0000a7b0: 6368 6b5f 6368 616e 6765 6428 6368 616e  chk_changed(chan
+0000a7c0: 6765 293a 0d0a 0d0a 2020 2020 2020 2020  ge):....        
+0000a7d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a7e0: 6c61 7965 725f 6e61 6d65 203d 2063 6861  layer_name = cha
+0000a7f0: 6e67 655b 226f 776e 6572 225d 2e64 6573  nge["owner"].des
+0000a800: 6372 6970 7469 6f6e 0d0a 2020 2020 2020  cription..      
 0000a810: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a820: 2020 2020 6966 2022 6c65 6765 6e64 2220      if "legend" 
+0000a820: 2020 6966 206c 6179 6572 5f6e 616d 6520    if layer_name 
 0000a830: 696e 2073 656c 662e 6565 5f6c 6179 6572  in self.ee_layer
-0000a840: 5f64 6963 745b 6c61 7965 725f 6e61 6d65  _dict[layer_name
-0000a850: 5d2e 6b65 7973 2829 3a0d 0a20 2020 2020  ].keys():..     
-0000a860: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a870: 2020 2020 2020 2020 2020 2020 2020 206c                 l
-0000a880: 6567 656e 6420 3d20 7365 6c66 2e65 655f  egend = self.ee_
-0000a890: 6c61 7965 725f 6469 6374 5b6c 6179 6572  layer_dict[layer
-0000a8a0: 5f6e 616d 655d 5b22 6c65 6765 6e64 225d  _name]["legend"]
-0000a8b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000a8c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a8d0: 2020 2020 2020 6966 206c 6567 656e 6420        if legend 
-0000a8e0: 6e6f 7420 696e 2073 656c 662e 636f 6e74  not in self.cont
-0000a8f0: 726f 6c73 3a0d 0a20 2020 2020 2020 2020  rols:..         
-0000a900: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a910: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0000a920: 656c 662e 6164 645f 636f 6e74 726f 6c28  elf.add_control(
-0000a930: 6c65 6765 6e64 290d 0a20 2020 2020 2020  legend)..       
-0000a940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a950: 2020 2020 2020 2020 2069 6620 2263 6f6c           if "col
-0000a960: 6f72 6261 7222 2069 6e20 7365 6c66 2e65  orbar" in self.e
-0000a970: 655f 6c61 7965 725f 6469 6374 5b6c 6179  e_layer_dict[lay
-0000a980: 6572 5f6e 616d 655d 2e6b 6579 7328 293a  er_name].keys():
-0000a990: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000a9a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a9b0: 2020 2020 2020 636f 6c6f 7262 6172 203d        colorbar =
-0000a9c0: 2073 656c 662e 6565 5f6c 6179 6572 5f64   self.ee_layer_d
-0000a9d0: 6963 745b 6c61 7965 725f 6e61 6d65 5d5b  ict[layer_name][
-0000a9e0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000a9f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000aa00: 2020 2020 2020 2020 2020 2263 6f6c 6f72            "color
-0000aa10: 6261 7222 0d0a 2020 2020 2020 2020 2020  bar"..          
-0000aa20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000aa30: 2020 2020 2020 2020 2020 5d0d 0a20 2020            ]..   
-0000aa40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000aa50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000aa60: 2069 6620 636f 6c6f 7262 6172 206e 6f74   if colorbar not
-0000aa70: 2069 6e20 7365 6c66 2e63 6f6e 7472 6f6c   in self.control
-0000aa80: 733a 0d0a 2020 2020 2020 2020 2020 2020  s:..            
+0000a840: 5f6e 616d 6573 3a0d 0a20 2020 2020 2020  _names:..       
+0000a850: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a860: 2020 2020 2069 6620 6368 616e 6765 5b22       if change["
+0000a870: 6e65 7722 5d3a 0d0a 2020 2020 2020 2020  new"]:..        
+0000a880: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a890: 2020 2020 2020 2020 6966 2022 6c65 6765          if "lege
+0000a8a0: 6e64 2220 696e 2073 656c 662e 6565 5f6c  nd" in self.ee_l
+0000a8b0: 6179 6572 5f64 6963 745b 6c61 7965 725f  ayer_dict[layer_
+0000a8c0: 6e61 6d65 5d2e 6b65 7973 2829 3a0d 0a20  name].keys():.. 
+0000a8d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a8e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a8f0: 2020 206c 6567 656e 6420 3d20 7365 6c66     legend = self
+0000a900: 2e65 655f 6c61 7965 725f 6469 6374 5b6c  .ee_layer_dict[l
+0000a910: 6179 6572 5f6e 616d 655d 5b22 6c65 6765  ayer_name]["lege
+0000a920: 6e64 225d 0d0a 2020 2020 2020 2020 2020  nd"]..          
+0000a930: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a940: 2020 2020 2020 2020 2020 6966 206c 6567            if leg
+0000a950: 656e 6420 6e6f 7420 696e 2073 656c 662e  end not in self.
+0000a960: 636f 6e74 726f 6c73 3a0d 0a20 2020 2020  controls:..     
+0000a970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a990: 2020 2073 656c 662e 6164 645f 636f 6e74     self.add_cont
+0000a9a0: 726f 6c28 6c65 6765 6e64 290d 0a20 2020  rol(legend)..   
+0000a9b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a9c0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0000a9d0: 2263 6f6c 6f72 6261 7222 2069 6e20 7365  "colorbar" in se
+0000a9e0: 6c66 2e65 655f 6c61 7965 725f 6469 6374  lf.ee_layer_dict
+0000a9f0: 5b6c 6179 6572 5f6e 616d 655d 2e6b 6579  [layer_name].key
+0000aa00: 7328 293a 0d0a 2020 2020 2020 2020 2020  s():..          
+0000aa10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000aa20: 2020 2020 2020 2020 2020 636f 6c6f 7262            colorb
+0000aa30: 6172 203d 2073 656c 662e 6565 5f6c 6179  ar = self.ee_lay
+0000aa40: 6572 5f64 6963 745b 6c61 7965 725f 6e61  er_dict[layer_na
+0000aa50: 6d65 5d5b 0d0a 2020 2020 2020 2020 2020  me][..          
+0000aa60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000aa70: 2020 2020 2020 2020 2020 2020 2020 2263                "c
+0000aa80: 6f6c 6f72 6261 7222 0d0a 2020 2020 2020  olorbar"..      
 0000aa90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000aaa0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0000aab0: 2e61 6464 5f63 6f6e 7472 6f6c 2863 6f6c  .add_control(col
-0000aac0: 6f72 6261 7229 0d0a 2020 2020 2020 2020  orbar)..        
-0000aad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000aae0: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
-0000aaf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ab00: 2020 2020 2020 2020 2020 2069 6620 226c             if "l
-0000ab10: 6567 656e 6422 2069 6e20 7365 6c66 2e65  egend" in self.e
-0000ab20: 655f 6c61 7965 725f 6469 6374 5b6c 6179  e_layer_dict[lay
-0000ab30: 6572 5f6e 616d 655d 2e6b 6579 7328 293a  er_name].keys():
-0000ab40: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000ab50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ab60: 2020 2020 2020 6c65 6765 6e64 203d 2073        legend = s
-0000ab70: 656c 662e 6565 5f6c 6179 6572 5f64 6963  elf.ee_layer_dic
-0000ab80: 745b 6c61 7965 725f 6e61 6d65 5d5b 226c  t[layer_name]["l
-0000ab90: 6567 656e 6422 5d0d 0a20 2020 2020 2020  egend"]..       
-0000aba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000abb0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0000abc0: 6c65 6765 6e64 2069 6e20 7365 6c66 2e63  legend in self.c
-0000abd0: 6f6e 7472 6f6c 733a 0d0a 2020 2020 2020  ontrols:..      
-0000abe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000abf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ac00: 2020 7365 6c66 2e72 656d 6f76 655f 636f    self.remove_co
-0000ac10: 6e74 726f 6c28 6c65 6765 6e64 290d 0a20  ntrol(legend).. 
+0000aaa0: 2020 2020 2020 2020 2020 2020 2020 5d0d                ].
+0000aab0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000aac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000aad0: 2020 2020 2069 6620 636f 6c6f 7262 6172       if colorbar
+0000aae0: 206e 6f74 2069 6e20 7365 6c66 2e63 6f6e   not in self.con
+0000aaf0: 7472 6f6c 733a 0d0a 2020 2020 2020 2020  trols:..        
+0000ab00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ab10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ab20: 7365 6c66 2e61 6464 5f63 6f6e 7472 6f6c  self.add_control
+0000ab30: 2863 6f6c 6f72 6261 7229 0d0a 2020 2020  (colorbar)..    
+0000ab40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ab50: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
+0000ab60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ab70: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0000ab80: 6620 226c 6567 656e 6422 2069 6e20 7365  f "legend" in se
+0000ab90: 6c66 2e65 655f 6c61 7965 725f 6469 6374  lf.ee_layer_dict
+0000aba0: 5b6c 6179 6572 5f6e 616d 655d 2e6b 6579  [layer_name].key
+0000abb0: 7328 293a 0d0a 2020 2020 2020 2020 2020  s():..          
+0000abc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000abd0: 2020 2020 2020 2020 2020 6c65 6765 6e64            legend
+0000abe0: 203d 2073 656c 662e 6565 5f6c 6179 6572   = self.ee_layer
+0000abf0: 5f64 6963 745b 6c61 7965 725f 6e61 6d65  _dict[layer_name
+0000ac00: 5d5b 226c 6567 656e 6422 5d0d 0a20 2020  ]["legend"]..   
+0000ac10: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000ac20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ac30: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0000ac40: 6620 2263 6f6c 6f72 6261 7222 2069 6e20  f "colorbar" in 
-0000ac50: 7365 6c66 2e65 655f 6c61 7965 725f 6469  self.ee_layer_di
-0000ac60: 6374 5b6c 6179 6572 5f6e 616d 655d 2e6b  ct[layer_name].k
-0000ac70: 6579 7328 293a 0d0a 2020 2020 2020 2020  eys():..        
-0000ac80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ac90: 2020 2020 2020 2020 2020 2020 636f 6c6f              colo
-0000aca0: 7262 6172 203d 2073 656c 662e 6565 5f6c  rbar = self.ee_l
-0000acb0: 6179 6572 5f64 6963 745b 6c61 7965 725f  ayer_dict[layer_
-0000acc0: 6e61 6d65 5d5b 0d0a 2020 2020 2020 2020  name][..        
-0000acd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ace0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000acf0: 2263 6f6c 6f72 6261 7222 0d0a 2020 2020  "colorbar"..    
+0000ac30: 2069 6620 6c65 6765 6e64 2069 6e20 7365   if legend in se
+0000ac40: 6c66 2e63 6f6e 7472 6f6c 733a 0d0a 2020  lf.controls:..  
+0000ac50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ac60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ac70: 2020 2020 2020 7365 6c66 2e72 656d 6f76        self.remov
+0000ac80: 655f 636f 6e74 726f 6c28 6c65 6765 6e64  e_control(legend
+0000ac90: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+0000aca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000acb0: 2020 2069 6620 2263 6f6c 6f72 6261 7222     if "colorbar"
+0000acc0: 2069 6e20 7365 6c66 2e65 655f 6c61 7965   in self.ee_laye
+0000acd0: 725f 6469 6374 5b6c 6179 6572 5f6e 616d  r_dict[layer_nam
+0000ace0: 655d 2e6b 6579 7328 293a 0d0a 2020 2020  e].keys():..    
+0000acf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000ad00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ad10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ad20: 5d0d 0a20 2020 2020 2020 2020 2020 2020  ]..             
-0000ad30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ad40: 2020 2020 2020 2069 6620 636f 6c6f 7262         if colorb
-0000ad50: 6172 2069 6e20 7365 6c66 2e63 6f6e 7472  ar in self.contr
-0000ad60: 6f6c 733a 0d0a 2020 2020 2020 2020 2020  ols:..          
+0000ad10: 636f 6c6f 7262 6172 203d 2073 656c 662e  colorbar = self.
+0000ad20: 6565 5f6c 6179 6572 5f64 6963 745b 6c61  ee_layer_dict[la
+0000ad30: 7965 725f 6e61 6d65 5d5b 0d0a 2020 2020  yer_name][..    
+0000ad40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ad50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ad60: 2020 2020 2263 6f6c 6f72 6261 7222 0d0a      "colorbar"..
 0000ad70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ad80: 2020 2020 2020 2020 2020 2020 2020 7365                se
-0000ad90: 6c66 2e72 656d 6f76 655f 636f 6e74 726f  lf.remove_contro
-0000ada0: 6c28 636f 6c6f 7262 6172 290d 0a0d 0a20  l(colorbar).... 
-0000adb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000adc0: 2020 206c 6179 6572 5f63 686b 2e6f 6273     layer_chk.obs
-0000add0: 6572 7665 286c 6179 6572 5f63 686b 5f63  erve(layer_chk_c
-0000ade0: 6861 6e67 6564 2c20 2276 616c 7565 2229  hanged, "value")
-0000adf0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0000ae00: 2020 2020 2020 2020 7769 6467 6574 732e          widgets.
-0000ae10: 6a73 6c69 6e6b 2828 6c61 7965 725f 6368  jslink((layer_ch
-0000ae20: 6b2c 2022 7661 6c75 6522 292c 2028 6c61  k, "value"), (la
-0000ae30: 7965 722c 2022 7669 7369 626c 6522 2929  yer, "visible"))
-0000ae40: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000ae50: 2020 2020 2020 7769 6467 6574 732e 6a73        widgets.js
-0000ae60: 646c 696e 6b28 286c 6179 6572 5f6f 7061  dlink((layer_opa
-0000ae70: 6369 7479 2c20 2276 616c 7565 2229 2c20  city, "value"), 
-0000ae80: 286c 6179 6572 2c20 226f 7061 6369 7479  (layer, "opacity
-0000ae90: 2229 290d 0a20 2020 2020 2020 2020 2020  "))..           
-0000aea0: 2020 2020 2020 2020 2068 626f 7820 3d20           hbox = 
-0000aeb0: 7769 6467 6574 732e 4842 6f78 280d 0a20  widgets.HBox(.. 
-0000aec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000aed0: 2020 2020 2020 205b 6c61 7965 725f 6368         [layer_ch
-0000aee0: 6b2c 206c 6179 6572 5f73 6574 7469 6e67  k, layer_setting
-0000aef0: 732c 206c 6179 6572 5f6f 7061 6369 7479  s, layer_opacity
-0000af00: 5d2c 0d0a 2020 2020 2020 2020 2020 2020  ],..            
-0000af10: 2020 2020 2020 2020 2020 2020 6c61 796f              layo
-0000af20: 7574 3d77 6964 6765 7473 2e4c 6179 6f75  ut=widgets.Layou
-0000af30: 7428 7061 6464 696e 673d 2230 7078 2038  t(padding="0px 8
-0000af40: 7078 2030 7078 2038 7078 2229 2c0d 0a20  px 0px 8px"),.. 
-0000af50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000af60: 2020 2029 0d0a 2020 2020 2020 2020 2020     )..          
-0000af70: 2020 2020 2020 2020 2020 6c61 7965 7273            layers
-0000af80: 5f68 626f 782e 6170 7065 6e64 2868 626f  _hbox.append(hbo
-0000af90: 7829 0d0a 0d0a 2020 2020 2020 2020 2020  x)....          
-0000afa0: 2020 2020 2020 746f 6f6c 6261 725f 666f        toolbar_fo
-0000afb0: 6f74 6572 2e63 6869 6c64 7265 6e20 3d20  oter.children = 
-0000afc0: 6c61 7965 7273 5f68 626f 780d 0a20 2020  layers_hbox..   
-0000afd0: 2020 2020 2020 2020 2020 2020 2074 6f6f               too
-0000afe0: 6c62 6172 5f62 7574 746f 6e2e 7661 6c75  lbar_button.valu
-0000aff0: 6520 3d20 4661 6c73 650d 0a20 2020 2020  e = False..     
-0000b000: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
-0000b010: 2020 2020 2020 2020 2020 2020 2020 746f                to
-0000b020: 6f6c 6261 725f 666f 6f74 6572 2e63 6869  olbar_footer.chi
-0000b030: 6c64 7265 6e20 3d20 5b74 6f6f 6c62 6172  ldren = [toolbar
-0000b040: 5f67 7269 645d 0d0a 0d0a 2020 2020 2020  _grid]....      
-0000b050: 2020 6c61 7965 7273 5f62 7574 746f 6e2e    layers_button.
-0000b060: 6f62 7365 7276 6528 6c61 7965 7273 5f62  observe(layers_b
-0000b070: 746e 5f63 6c69 636b 2c20 2276 616c 7565  tn_click, "value
-0000b080: 2229 0d0a 2020 2020 2020 2020 746f 6f6c  ")..        tool
-0000b090: 6261 725f 636f 6e74 726f 6c20 3d20 6970  bar_control = ip
-0000b0a0: 796c 6561 666c 6574 2e57 6964 6765 7443  yleaflet.WidgetC
-0000b0b0: 6f6e 7472 6f6c 280d 0a20 2020 2020 2020  ontrol(..       
-0000b0c0: 2020 2020 2077 6964 6765 743d 746f 6f6c       widget=tool
-0000b0d0: 6261 725f 7769 6467 6574 2c20 706f 7369  bar_widget, posi
-0000b0e0: 7469 6f6e 3d22 746f 7072 6967 6874 220d  tion="topright".
-0000b0f0: 0a20 2020 2020 2020 2029 0d0a 0d0a 2020  .        )....  
-0000b100: 2020 2020 2020 6966 206b 7761 7267 732e        if kwargs.
-0000b110: 6765 7428 2274 6f6f 6c62 6172 5f63 7472  get("toolbar_ctr
-0000b120: 6c22 293a 0d0a 2020 2020 2020 2020 2020  l"):..          
-0000b130: 2020 7365 6c66 2e61 6464 5f63 6f6e 7472    self.add_contr
-0000b140: 6f6c 2874 6f6f 6c62 6172 5f63 6f6e 7472  ol(toolbar_contr
-0000b150: 6f6c 290d 0a0d 0a20 2020 2020 2020 2074  ol)....        t
-0000b160: 6f6f 6c5f 6f75 7470 7574 5f63 6f6e 7472  ool_output_contr
-0000b170: 6f6c 203d 2069 7079 6c65 6166 6c65 742e  ol = ipyleaflet.
-0000b180: 5769 6467 6574 436f 6e74 726f 6c28 0d0a  WidgetControl(..
-0000b190: 2020 2020 2020 2020 2020 2020 7769 6467              widg
-0000b1a0: 6574 3d74 6f6f 6c5f 6f75 7470 7574 2c20  et=tool_output, 
-0000b1b0: 706f 7369 7469 6f6e 3d22 746f 7072 6967  position="toprig
-0000b1c0: 6874 220d 0a20 2020 2020 2020 2029 0d0a  ht"..        )..
-0000b1d0: 2020 2020 2020 2020 2320 7365 6c66 2e61          # self.a
-0000b1e0: 6464 5f63 6f6e 7472 6f6c 2874 6f6f 6c5f  dd_control(tool_
-0000b1f0: 6f75 7470 7574 5f63 6f6e 7472 6f6c 290d  output_control).
-0000b200: 0a0d 0a20 2020 2020 2020 2064 6566 2068  ...        def h
-0000b210: 616e 646c 655f 696e 7465 7261 6374 696f  andle_interactio
-0000b220: 6e28 2a2a 6b77 6172 6773 293a 0d0a 2020  n(**kwargs):..  
-0000b230: 2020 2020 2020 2020 2020 6c61 746c 6f6e            latlon
-0000b240: 203d 206b 7761 7267 732e 6765 7428 2263   = kwargs.get("c
-0000b250: 6f6f 7264 696e 6174 6573 2229 0d0a 2020  oordinates")..  
-0000b260: 2020 2020 2020 2020 2020 6966 206b 7761            if kwa
-0000b270: 7267 732e 6765 7428 2274 7970 6522 2920  rgs.get("type") 
-0000b280: 3d3d 2022 636c 6963 6b22 2061 6e64 2073  == "click" and s
-0000b290: 656c 662e 696e 7370 6563 746f 725f 6368  elf.inspector_ch
-0000b2a0: 6563 6b65 643a 0d0a 2020 2020 2020 2020  ecked:..        
-0000b2b0: 2020 2020 2020 2020 7365 6c66 2e64 6566          self.def
-0000b2c0: 6175 6c74 5f73 7479 6c65 203d 207b 2263  ault_style = {"c
-0000b2d0: 7572 736f 7222 3a20 2277 6169 7422 7d0d  ursor": "wait"}.
-0000b2e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000b2f0: 2069 6620 696e 7370 6563 746f 725f 6f75   if inspector_ou
-0000b300: 7470 7574 5f63 6f6e 7472 6f6c 206e 6f74  tput_control not
-0000b310: 2069 6e20 7365 6c66 2e63 6f6e 7472 6f6c   in self.control
-0000b320: 733a 0d0a 2020 2020 2020 2020 2020 2020  s:..            
-0000b330: 2020 2020 2020 2020 7365 6c66 2e61 6464          self.add
-0000b340: 5f63 6f6e 7472 6f6c 2869 6e73 7065 6374  _control(inspect
-0000b350: 6f72 5f6f 7574 7075 745f 636f 6e74 726f  or_output_contro
-0000b360: 6c29 0d0a 2020 2020 2020 2020 2020 2020  l)..            
-0000b370: 2020 2020 7361 6d70 6c65 5f73 6361 6c65      sample_scale
-0000b380: 203d 2073 656c 662e 6765 7453 6361 6c65   = self.getScale
-0000b390: 2829 0d0a 2020 2020 2020 2020 2020 2020  ()..            
-0000b3a0: 2020 2020 6c61 7965 7273 203d 2073 656c      layers = sel
-0000b3b0: 662e 6565 5f6c 6179 6572 730d 0a0d 0a20  f.ee_layers.... 
-0000b3c0: 2020 2020 2020 2020 2020 2020 2020 2077                 w
-0000b3d0: 6974 6820 696e 7370 6563 746f 725f 6f75  ith inspector_ou
-0000b3e0: 7470 7574 3a0d 0a20 2020 2020 2020 2020  tput:..         
-0000b3f0: 2020 2020 2020 2020 2020 2069 6e73 7065             inspe
-0000b400: 6374 6f72 5f6f 7574 7075 742e 636c 6561  ctor_output.clea
-0000b410: 725f 6f75 7470 7574 2877 6169 743d 5472  r_output(wait=Tr
-0000b420: 7565 290d 0a20 2020 2020 2020 2020 2020  ue)..           
-0000b430: 2020 2020 2020 2020 2070 7269 6e74 280d           print(.
-0000b440: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000b450: 2020 2020 2020 2020 2066 2250 6f69 6e74           f"Point
-0000b460: 2028 7b6c 6174 6c6f 6e5b 315d 3a2e 3466   ({latlon[1]:.4f
-0000b470: 7d2c 207b 6c61 746c 6f6e 5b30 5d3a 2e34  }, {latlon[0]:.4
-0000b480: 667d 2920 6174 207b 696e 7428 7365 6c66  f}) at {int(self
-0000b490: 2e67 6574 5f73 6361 6c65 2829 297d 6d2f  .get_scale())}m/
-0000b4a0: 7078 220d 0a20 2020 2020 2020 2020 2020  px"..           
-0000b4b0: 2020 2020 2020 2020 2029 0d0a 2020 2020           )..    
-0000b4c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b4d0: 7879 203d 2065 652e 4765 6f6d 6574 7279  xy = ee.Geometry
-0000b4e0: 2e50 6f69 6e74 286c 6174 6c6f 6e5b 3a3a  .Point(latlon[::
-0000b4f0: 2d31 5d29 0d0a 2020 2020 2020 2020 2020  -1])..          
-0000b500: 2020 2020 2020 2020 2020 666f 7220 696e            for in
-0000b510: 6465 782c 2065 655f 6f62 6a65 6374 2069  dex, ee_object i
-0000b520: 6e20 656e 756d 6572 6174 6528 6c61 7965  n enumerate(laye
-0000b530: 7273 293a 0d0a 2020 2020 2020 2020 2020  rs):..          
-0000b540: 2020 2020 2020 2020 2020 2020 2020 6c61                la
-0000b550: 7965 725f 6e61 6d65 7320 3d20 7365 6c66  yer_names = self
-0000b560: 2e65 655f 6c61 7965 725f 6e61 6d65 730d  .ee_layer_names.
-0000b570: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000b580: 2020 2020 2020 2020 206c 6179 6572 5f6e           layer_n
-0000b590: 616d 6520 3d20 6c61 7965 725f 6e61 6d65  ame = layer_name
-0000b5a0: 735b 696e 6465 785d 0d0a 2020 2020 2020  s[index]..      
+0000ad80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ad90: 2020 2020 5d0d 0a20 2020 2020 2020 2020      ]..         
+0000ada0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000adb0: 2020 2020 2020 2020 2020 2069 6620 636f             if co
+0000adc0: 6c6f 7262 6172 2069 6e20 7365 6c66 2e63  lorbar in self.c
+0000add0: 6f6e 7472 6f6c 733a 0d0a 2020 2020 2020  ontrols:..      
+0000ade0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000adf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ae00: 2020 7365 6c66 2e72 656d 6f76 655f 636f    self.remove_co
+0000ae10: 6e74 726f 6c28 636f 6c6f 7262 6172 290d  ntrol(colorbar).
+0000ae20: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0000ae30: 2020 2020 2020 206c 6179 6572 5f63 686b         layer_chk
+0000ae40: 2e6f 6273 6572 7665 286c 6179 6572 5f63  .observe(layer_c
+0000ae50: 686b 5f63 6861 6e67 6564 2c20 2276 616c  hk_changed, "val
+0000ae60: 7565 2229 0d0a 0d0a 2020 2020 2020 2020  ue")....        
+0000ae70: 2020 2020 2020 2020 2020 2020 7769 6467              widg
+0000ae80: 6574 732e 6a73 6c69 6e6b 2828 6c61 7965  ets.jslink((laye
+0000ae90: 725f 6368 6b2c 2022 7661 6c75 6522 292c  r_chk, "value"),
+0000aea0: 2028 6c61 7965 722c 2022 7669 7369 626c   (layer, "visibl
+0000aeb0: 6522 2929 0d0a 2020 2020 2020 2020 2020  e"))..          
+0000aec0: 2020 2020 2020 2020 2020 7769 6467 6574            widget
+0000aed0: 732e 6a73 646c 696e 6b28 286c 6179 6572  s.jsdlink((layer
+0000aee0: 5f6f 7061 6369 7479 2c20 2276 616c 7565  _opacity, "value
+0000aef0: 2229 2c20 286c 6179 6572 2c20 226f 7061  "), (layer, "opa
+0000af00: 6369 7479 2229 290d 0a20 2020 2020 2020  city"))..       
+0000af10: 2020 2020 2020 2020 2020 2020 2068 626f               hbo
+0000af20: 7820 3d20 7769 6467 6574 732e 4842 6f78  x = widgets.HBox
+0000af30: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
+0000af40: 2020 2020 2020 2020 2020 205b 6c61 7965             [laye
+0000af50: 725f 6368 6b2c 206c 6179 6572 5f73 6574  r_chk, layer_set
+0000af60: 7469 6e67 732c 206c 6179 6572 5f6f 7061  tings, layer_opa
+0000af70: 6369 7479 5d2c 0d0a 2020 2020 2020 2020  city],..        
+0000af80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000af90: 6c61 796f 7574 3d77 6964 6765 7473 2e4c  layout=widgets.L
+0000afa0: 6179 6f75 7428 7061 6464 696e 673d 2230  ayout(padding="0
+0000afb0: 7078 2038 7078 2030 7078 2038 7078 2229  px 8px 0px 8px")
+0000afc0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+0000afd0: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
+0000afe0: 2020 2020 2020 2020 2020 2020 2020 6c61                la
+0000aff0: 7965 7273 5f68 626f 782e 6170 7065 6e64  yers_hbox.append
+0000b000: 2868 626f 7829 0d0a 0d0a 2020 2020 2020  (hbox)....      
+0000b010: 2020 2020 2020 2020 2020 746f 6f6c 6261            toolba
+0000b020: 725f 666f 6f74 6572 2e63 6869 6c64 7265  r_footer.childre
+0000b030: 6e20 3d20 6c61 7965 7273 5f68 626f 780d  n = layers_hbox.
+0000b040: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000b050: 2074 6f6f 6c62 6172 5f62 7574 746f 6e2e   toolbar_button.
+0000b060: 7661 6c75 6520 3d20 4661 6c73 650d 0a20  value = False.. 
+0000b070: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+0000b080: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000b090: 2020 746f 6f6c 6261 725f 666f 6f74 6572    toolbar_footer
+0000b0a0: 2e63 6869 6c64 7265 6e20 3d20 5b74 6f6f  .children = [too
+0000b0b0: 6c62 6172 5f67 7269 645d 0d0a 0d0a 2020  lbar_grid]....  
+0000b0c0: 2020 2020 2020 6c61 7965 7273 5f62 7574        layers_but
+0000b0d0: 746f 6e2e 6f62 7365 7276 6528 6c61 7965  ton.observe(laye
+0000b0e0: 7273 5f62 746e 5f63 6c69 636b 2c20 2276  rs_btn_click, "v
+0000b0f0: 616c 7565 2229 0d0a 2020 2020 2020 2020  alue")..        
+0000b100: 746f 6f6c 6261 725f 636f 6e74 726f 6c20  toolbar_control 
+0000b110: 3d20 6970 796c 6561 666c 6574 2e57 6964  = ipyleaflet.Wid
+0000b120: 6765 7443 6f6e 7472 6f6c 280d 0a20 2020  getControl(..   
+0000b130: 2020 2020 2020 2020 2077 6964 6765 743d           widget=
+0000b140: 746f 6f6c 6261 725f 7769 6467 6574 2c20  toolbar_widget, 
+0000b150: 706f 7369 7469 6f6e 3d22 746f 7072 6967  position="toprig
+0000b160: 6874 220d 0a20 2020 2020 2020 2029 0d0a  ht"..        )..
+0000b170: 0d0a 2020 2020 2020 2020 6966 206b 7761  ..        if kwa
+0000b180: 7267 732e 6765 7428 2274 6f6f 6c62 6172  rgs.get("toolbar
+0000b190: 5f63 7472 6c22 293a 0d0a 2020 2020 2020  _ctrl"):..      
+0000b1a0: 2020 2020 2020 7365 6c66 2e61 6464 5f63        self.add_c
+0000b1b0: 6f6e 7472 6f6c 2874 6f6f 6c62 6172 5f63  ontrol(toolbar_c
+0000b1c0: 6f6e 7472 6f6c 290d 0a0d 0a20 2020 2020  ontrol)....     
+0000b1d0: 2020 2074 6f6f 6c5f 6f75 7470 7574 5f63     tool_output_c
+0000b1e0: 6f6e 7472 6f6c 203d 2069 7079 6c65 6166  ontrol = ipyleaf
+0000b1f0: 6c65 742e 5769 6467 6574 436f 6e74 726f  let.WidgetContro
+0000b200: 6c28 0d0a 2020 2020 2020 2020 2020 2020  l(..            
+0000b210: 7769 6467 6574 3d74 6f6f 6c5f 6f75 7470  widget=tool_outp
+0000b220: 7574 2c20 706f 7369 7469 6f6e 3d22 746f  ut, position="to
+0000b230: 7072 6967 6874 220d 0a20 2020 2020 2020  pright"..       
+0000b240: 2029 0d0a 2020 2020 2020 2020 2320 7365   )..        # se
+0000b250: 6c66 2e61 6464 5f63 6f6e 7472 6f6c 2874  lf.add_control(t
+0000b260: 6f6f 6c5f 6f75 7470 7574 5f63 6f6e 7472  ool_output_contr
+0000b270: 6f6c 290d 0a0d 0a20 2020 2020 2020 2064  ol)....        d
+0000b280: 6566 2068 616e 646c 655f 696e 7465 7261  ef handle_intera
+0000b290: 6374 696f 6e28 2a2a 6b77 6172 6773 293a  ction(**kwargs):
+0000b2a0: 0d0a 2020 2020 2020 2020 2020 2020 6c61  ..            la
+0000b2b0: 746c 6f6e 203d 206b 7761 7267 732e 6765  tlon = kwargs.ge
+0000b2c0: 7428 2263 6f6f 7264 696e 6174 6573 2229  t("coordinates")
+0000b2d0: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
+0000b2e0: 206b 7761 7267 732e 6765 7428 2274 7970   kwargs.get("typ
+0000b2f0: 6522 2920 3d3d 2022 636c 6963 6b22 2061  e") == "click" a
+0000b300: 6e64 2073 656c 662e 696e 7370 6563 746f  nd self.inspecto
+0000b310: 725f 6368 6563 6b65 643a 0d0a 2020 2020  r_checked:..    
+0000b320: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0000b330: 2e64 6566 6175 6c74 5f73 7479 6c65 203d  .default_style =
+0000b340: 207b 2263 7572 736f 7222 3a20 2277 6169   {"cursor": "wai
+0000b350: 7422 7d0d 0a20 2020 2020 2020 2020 2020  t"}..           
+0000b360: 2020 2020 2069 6620 696e 7370 6563 746f       if inspecto
+0000b370: 725f 6f75 7470 7574 5f63 6f6e 7472 6f6c  r_output_control
+0000b380: 206e 6f74 2069 6e20 7365 6c66 2e63 6f6e   not in self.con
+0000b390: 7472 6f6c 733a 0d0a 2020 2020 2020 2020  trols:..        
+0000b3a0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0000b3b0: 2e61 6464 5f63 6f6e 7472 6f6c 2869 6e73  .add_control(ins
+0000b3c0: 7065 6374 6f72 5f6f 7574 7075 745f 636f  pector_output_co
+0000b3d0: 6e74 726f 6c29 0d0a 2020 2020 2020 2020  ntrol)..        
+0000b3e0: 2020 2020 2020 2020 7361 6d70 6c65 5f73          sample_s
+0000b3f0: 6361 6c65 203d 2073 656c 662e 6765 7453  cale = self.getS
+0000b400: 6361 6c65 2829 0d0a 2020 2020 2020 2020  cale()..        
+0000b410: 2020 2020 2020 2020 6c61 7965 7273 203d          layers =
+0000b420: 2073 656c 662e 6565 5f6c 6179 6572 730d   self.ee_layers.
+0000b430: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0000b440: 2020 2077 6974 6820 696e 7370 6563 746f     with inspecto
+0000b450: 725f 6f75 7470 7574 3a0d 0a20 2020 2020  r_output:..     
+0000b460: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0000b470: 6e73 7065 6374 6f72 5f6f 7574 7075 742e  nspector_output.
+0000b480: 636c 6561 725f 6f75 7470 7574 2877 6169  clear_output(wai
+0000b490: 743d 5472 7565 290d 0a20 2020 2020 2020  t=True)..       
+0000b4a0: 2020 2020 2020 2020 2020 2020 2070 7269               pri
+0000b4b0: 6e74 280d 0a20 2020 2020 2020 2020 2020  nt(..           
+0000b4c0: 2020 2020 2020 2020 2020 2020 2066 2250               f"P
+0000b4d0: 6f69 6e74 2028 7b6c 6174 6c6f 6e5b 315d  oint ({latlon[1]
+0000b4e0: 3a2e 3466 7d2c 207b 6c61 746c 6f6e 5b30  :.4f}, {latlon[0
+0000b4f0: 5d3a 2e34 667d 2920 6174 207b 696e 7428  ]:.4f}) at {int(
+0000b500: 7365 6c66 2e67 6574 5f73 6361 6c65 2829  self.get_scale()
+0000b510: 297d 6d2f 7078 220d 0a20 2020 2020 2020  )}m/px"..       
+0000b520: 2020 2020 2020 2020 2020 2020 2029 0d0a               )..
+0000b530: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b540: 2020 2020 7879 203d 2065 652e 4765 6f6d      xy = ee.Geom
+0000b550: 6574 7279 2e50 6f69 6e74 286c 6174 6c6f  etry.Point(latlo
+0000b560: 6e5b 3a3a 2d31 5d29 0d0a 2020 2020 2020  n[::-1])..      
+0000b570: 2020 2020 2020 2020 2020 2020 2020 666f                fo
+0000b580: 7220 696e 6465 782c 2065 655f 6f62 6a65  r index, ee_obje
+0000b590: 6374 2069 6e20 656e 756d 6572 6174 6528  ct in enumerate(
+0000b5a0: 6c61 7965 7273 293a 0d0a 2020 2020 2020  layers):..      
 0000b5b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b5c0: 2020 6f62 6a65 6374 5f74 7970 6520 3d20    object_type = 
-0000b5d0: 6565 5f6f 626a 6563 742e 5f5f 636c 6173  ee_object.__clas
-0000b5e0: 735f 5f2e 5f5f 6e61 6d65 5f5f 0d0a 0d0a  s__.__name__....
-0000b5f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b600: 2020 2020 2020 2020 6966 206e 6f74 2073          if not s
-0000b610: 656c 662e 6565 5f6c 6179 6572 5f64 6963  elf.ee_layer_dic
-0000b620: 745b 6c61 7965 725f 6e61 6d65 5d5b 2265  t[layer_name]["e
-0000b630: 655f 6c61 7965 7222 5d2e 7669 7369 626c  e_layer"].visibl
-0000b640: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-0000b650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b660: 636f 6e74 696e 7565 0d0a 0d0a 2020 2020  continue....    
-0000b670: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b680: 2020 2020 7472 793a 0d0a 2020 2020 2020      try:..      
-0000b690: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b6a0: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
-0000b6b0: 6e63 6528 6565 5f6f 626a 6563 742c 2065  nce(ee_object, e
-0000b6c0: 652e 496d 6167 6543 6f6c 6c65 6374 696f  e.ImageCollectio
-0000b6d0: 6e29 3a0d 0a20 2020 2020 2020 2020 2020  n):..           
+0000b5c0: 2020 6c61 7965 725f 6e61 6d65 7320 3d20    layer_names = 
+0000b5d0: 7365 6c66 2e65 655f 6c61 7965 725f 6e61  self.ee_layer_na
+0000b5e0: 6d65 730d 0a20 2020 2020 2020 2020 2020  mes..           
+0000b5f0: 2020 2020 2020 2020 2020 2020 206c 6179               lay
+0000b600: 6572 5f6e 616d 6520 3d20 6c61 7965 725f  er_name = layer_
+0000b610: 6e61 6d65 735b 696e 6465 785d 0d0a 2020  names[index]..  
+0000b620: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b630: 2020 2020 2020 6f62 6a65 6374 5f74 7970        object_typ
+0000b640: 6520 3d20 6565 5f6f 626a 6563 742e 5f5f  e = ee_object.__
+0000b650: 636c 6173 735f 5f2e 5f5f 6e61 6d65 5f5f  class__.__name__
+0000b660: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+0000b670: 2020 2020 2020 2020 2020 2020 6966 206e              if n
+0000b680: 6f74 2073 656c 662e 6565 5f6c 6179 6572  ot self.ee_layer
+0000b690: 5f64 6963 745b 6c61 7965 725f 6e61 6d65  _dict[layer_name
+0000b6a0: 5d5b 2265 655f 6c61 7965 7222 5d2e 7669  ]["ee_layer"].vi
+0000b6b0: 7369 626c 653a 0d0a 2020 2020 2020 2020  sible:..        
+0000b6c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b6d0: 2020 2020 636f 6e74 696e 7565 0d0a 0d0a      continue....
 0000b6e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b6f0: 2020 2020 2065 655f 6f62 6a65 6374 203d       ee_object =
-0000b700: 2065 655f 6f62 6a65 6374 2e6d 6f73 6169   ee_object.mosai
-0000b710: 6328 290d 0a20 2020 2020 2020 2020 2020  c()..           
-0000b720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b730: 2065 6c69 6620 280d 0a20 2020 2020 2020   elif (..       
-0000b740: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b750: 2020 2020 2020 2020 2069 7369 6e73 7461           isinsta
-0000b760: 6e63 6528 6565 5f6f 626a 6563 742c 2065  nce(ee_object, e
-0000b770: 652e 6765 6f6d 6574 7279 2e47 656f 6d65  e.geometry.Geome
-0000b780: 7472 7929 0d0a 2020 2020 2020 2020 2020  try)..          
+0000b6f0: 2020 2020 2020 2020 7472 793a 0d0a 2020          try:..  
+0000b700: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b710: 2020 2020 2020 2020 2020 6966 2069 7369            if isi
+0000b720: 6e73 7461 6e63 6528 6565 5f6f 626a 6563  nstance(ee_objec
+0000b730: 742c 2065 652e 496d 6167 6543 6f6c 6c65  t, ee.ImageColle
+0000b740: 6374 696f 6e29 3a0d 0a20 2020 2020 2020  ction):..       
+0000b750: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b760: 2020 2020 2020 2020 2065 655f 6f62 6a65           ee_obje
+0000b770: 6374 203d 2065 655f 6f62 6a65 6374 2e6d  ct = ee_object.m
+0000b780: 6f73 6169 6328 290d 0a20 2020 2020 2020  osaic()..       
 0000b790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b7a0: 2020 2020 2020 6f72 2069 7369 6e73 7461        or isinsta
-0000b7b0: 6e63 6528 6565 5f6f 626a 6563 742c 2065  nce(ee_object, e
-0000b7c0: 652e 6665 6174 7572 652e 4665 6174 7572  e.feature.Featur
-0000b7d0: 6529 0d0a 2020 2020 2020 2020 2020 2020  e)..            
-0000b7e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b7f0: 2020 2020 6f72 2069 7369 6e73 7461 6e63      or isinstanc
-0000b800: 6528 0d0a 2020 2020 2020 2020 2020 2020  e(..            
-0000b810: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b820: 2020 2020 2020 2020 6565 5f6f 626a 6563          ee_objec
-0000b830: 742c 0d0a 2020 2020 2020 2020 2020 2020  t,..            
-0000b840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b850: 2020 2020 2020 2020 6565 2e66 6561 7475          ee.featu
-0000b860: 7265 636f 6c6c 6563 7469 6f6e 2e46 6561  recollection.Fea
-0000b870: 7475 7265 436f 6c6c 6563 7469 6f6e 2c0d  tureCollection,.
-0000b880: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000b890: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b8a0: 2029 0d0a 2020 2020 2020 2020 2020 2020   )..            
+0000b7a0: 2020 2020 2065 6c69 6620 280d 0a20 2020       elif (..   
+0000b7b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b7c0: 2020 2020 2020 2020 2020 2020 2069 7369               isi
+0000b7d0: 6e73 7461 6e63 6528 6565 5f6f 626a 6563  nstance(ee_objec
+0000b7e0: 742c 2065 652e 6765 6f6d 6574 7279 2e47  t, ee.geometry.G
+0000b7f0: 656f 6d65 7472 7929 0d0a 2020 2020 2020  eometry)..      
+0000b800: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b810: 2020 2020 2020 2020 2020 6f72 2069 7369            or isi
+0000b820: 6e73 7461 6e63 6528 6565 5f6f 626a 6563  nstance(ee_objec
+0000b830: 742c 2065 652e 6665 6174 7572 652e 4665  t, ee.feature.Fe
+0000b840: 6174 7572 6529 0d0a 2020 2020 2020 2020  ature)..        
+0000b850: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b860: 2020 2020 2020 2020 6f72 2069 7369 6e73          or isins
+0000b870: 7461 6e63 6528 0d0a 2020 2020 2020 2020  tance(..        
+0000b880: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b890: 2020 2020 2020 2020 2020 2020 6565 5f6f              ee_o
+0000b8a0: 626a 6563 742c 0d0a 2020 2020 2020 2020  bject,..        
 0000b8b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b8c0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-0000b8d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b8e0: 2020 2020 6565 5f6f 626a 6563 7420 3d20      ee_object = 
-0000b8f0: 6565 2e46 6561 7475 7265 436f 6c6c 6563  ee.FeatureCollec
-0000b900: 7469 6f6e 2865 655f 6f62 6a65 6374 290d  tion(ee_object).
-0000b910: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0000b920: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0000b930: 6620 6973 696e 7374 616e 6365 2865 655f  f isinstance(ee_
-0000b940: 6f62 6a65 6374 2c20 6565 2e49 6d61 6765  object, ee.Image
-0000b950: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-0000b960: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b970: 2020 2020 6974 656d 203d 2065 655f 6f62      item = ee_ob
-0000b980: 6a65 6374 2e72 6564 7563 6552 6567 696f  ject.reduceRegio
-0000b990: 6e28 0d0a 2020 2020 2020 2020 2020 2020  n(..            
-0000b9a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b9b0: 2020 2020 2020 2020 6565 2e52 6564 7563          ee.Reduc
-0000b9c0: 6572 2e66 6972 7374 2829 2c20 7879 2c20  er.first(), xy, 
-0000b9d0: 7361 6d70 6c65 5f73 6361 6c65 0d0a 2020  sample_scale..  
-0000b9e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b9f0: 2020 2020 2020 2020 2020 2020 2020 292e                ).
-0000ba00: 6765 7449 6e66 6f28 290d 0a20 2020 2020  getInfo()..     
+0000b8c0: 2020 2020 2020 2020 2020 2020 6565 2e66              ee.f
+0000b8d0: 6561 7475 7265 636f 6c6c 6563 7469 6f6e  eaturecollection
+0000b8e0: 2e46 6561 7475 7265 436f 6c6c 6563 7469  .FeatureCollecti
+0000b8f0: 6f6e 2c0d 0a20 2020 2020 2020 2020 2020  on,..           
+0000b900: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b910: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
+0000b920: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b930: 2020 2020 293a 0d0a 2020 2020 2020 2020      ):..        
+0000b940: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b950: 2020 2020 2020 2020 6565 5f6f 626a 6563          ee_objec
+0000b960: 7420 3d20 6565 2e46 6561 7475 7265 436f  t = ee.FeatureCo
+0000b970: 6c6c 6563 7469 6f6e 2865 655f 6f62 6a65  llection(ee_obje
+0000b980: 6374 290d 0a0d 0a20 2020 2020 2020 2020  ct)....         
+0000b990: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b9a0: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+0000b9b0: 2865 655f 6f62 6a65 6374 2c20 6565 2e49  (ee_object, ee.I
+0000b9c0: 6d61 6765 293a 0d0a 2020 2020 2020 2020  mage):..        
+0000b9d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b9e0: 2020 2020 2020 2020 6974 656d 203d 2065          item = e
+0000b9f0: 655f 6f62 6a65 6374 2e72 6564 7563 6552  e_object.reduceR
+0000ba00: 6567 696f 6e28 0d0a 2020 2020 2020 2020  egion(..        
 0000ba10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ba20: 2020 2020 2020 2020 2020 2062 5f6e 616d             b_nam
-0000ba30: 6520 3d20 2262 616e 6422 0d0a 2020 2020  e = "band"..    
-0000ba40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ba50: 2020 2020 2020 2020 2020 2020 6966 206c              if l
-0000ba60: 656e 2869 7465 6d29 203e 2031 3a0d 0a20  en(item) > 1:.. 
-0000ba70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ba20: 2020 2020 2020 2020 2020 2020 6565 2e52              ee.R
+0000ba30: 6564 7563 6572 2e66 6972 7374 2829 2c20  educer.first(), 
+0000ba40: 7879 2c20 7361 6d70 6c65 5f73 6361 6c65  xy, sample_scale
+0000ba50: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000ba60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ba70: 2020 292e 6765 7449 6e66 6f28 290d 0a20    ).getInfo().. 
 0000ba80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ba90: 2020 2062 5f6e 616d 6520 3d20 2262 616e     b_name = "ban
-0000baa0: 6473 220d 0a20 2020 2020 2020 2020 2020  ds"..           
+0000ba90: 2020 2020 2020 2020 2020 2020 2020 2062                 b
+0000baa0: 5f6e 616d 6520 3d20 2262 616e 6422 0d0a  _name = "band"..
 0000bab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bac0: 2020 2020 2070 7269 6e74 280d 0a20 2020       print(..   
-0000bad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000baf0: 2022 7b7d 3a20 7b7d 2028 7b7d 207b 7d29   "{}: {} ({} {})
-0000bb00: 222e 666f 726d 6174 280d 0a20 2020 2020  ".format(..     
-0000bb10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bad0: 6966 206c 656e 2869 7465 6d29 203e 2031  if len(item) > 1
+0000bae0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0000baf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bb00: 2020 2020 2020 2062 5f6e 616d 6520 3d20         b_name = 
+0000bb10: 2262 616e 6473 220d 0a20 2020 2020 2020  "bands"..       
 0000bb20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bb30: 2020 206c 6179 6572 5f6e 616d 652c 0d0a     layer_name,..
-0000bb40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bb30: 2020 2020 2020 2020 2070 7269 6e74 280d           print(.
+0000bb40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 0000bb50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bb60: 2020 2020 2020 2020 6f62 6a65 6374 5f74          object_t
-0000bb70: 7970 652c 0d0a 2020 2020 2020 2020 2020  ype,..          
+0000bb60: 2020 2020 2022 7b7d 3a20 7b7d 2028 7b7d       "{}: {} ({}
+0000bb70: 207b 7d29 222e 666f 726d 6174 280d 0a20   {})".format(.. 
 0000bb80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bb90: 2020 2020 2020 2020 2020 2020 2020 6c65                le
-0000bba0: 6e28 6974 656d 292c 0d0a 2020 2020 2020  n(item),..      
-0000bbb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bb90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bba0: 2020 2020 2020 206c 6179 6572 5f6e 616d         layer_nam
+0000bbb0: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
 0000bbc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bbd0: 2020 625f 6e61 6d65 2c0d 0a20 2020 2020    b_name,..     
-0000bbe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bbf0: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-0000bc00: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000bc10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bc20: 2020 290d 0a20 2020 2020 2020 2020 2020    )..           
+0000bbd0: 2020 2020 2020 2020 2020 2020 6f62 6a65              obje
+0000bbe0: 6374 5f74 7970 652c 0d0a 2020 2020 2020  ct_type,..      
+0000bbf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bc00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bc10: 2020 6c65 6e28 6974 656d 292c 0d0a 2020    len(item),..  
+0000bc20: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000bc30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bc40: 2020 2020 206b 6579 7320 3d20 6974 656d       keys = item
-0000bc50: 2e6b 6579 7328 290d 0a20 2020 2020 2020  .keys()..       
+0000bc40: 2020 2020 2020 625f 6e61 6d65 2c0d 0a20        b_name,.. 
+0000bc50: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000bc60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bc70: 2020 2020 2020 2020 2066 6f72 206b 6579           for key
-0000bc80: 2069 6e20 6b65 7973 3a0d 0a20 2020 2020   in keys:..     
-0000bc90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bca0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-0000bcb0: 7269 6e74 2866 2220 207b 6b65 797d 3a20  rint(f"  {key}: 
-0000bcc0: 7b69 7465 6d5b 6b65 795d 7d22 290d 0a20  {item[key]}").. 
+0000bc70: 2020 2029 0d0a 2020 2020 2020 2020 2020     )..          
+0000bc80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bc90: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
+0000bca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bcb0: 2020 2020 2020 2020 206b 6579 7320 3d20           keys = 
+0000bcc0: 6974 656d 2e6b 6579 7328 290d 0a20 2020  item.keys()..   
 0000bcd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bce0: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-0000bcf0: 6973 696e 7374 616e 6365 2865 655f 6f62  isinstance(ee_ob
-0000bd00: 6a65 6374 2c20 6565 2e46 6561 7475 7265  ject, ee.Feature
-0000bd10: 436f 6c6c 6563 7469 6f6e 293a 0d0a 0d0a  Collection):....
-0000bd20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bd30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bd40: 2320 4368 6563 6b20 6765 6f6d 6574 7279  # Check geometry
-0000bd50: 2074 7970 650d 0a20 2020 2020 2020 2020   type..         
-0000bd60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bd70: 2020 2020 2020 2067 656f 6d5f 7479 7065         geom_type
-0000bd80: 203d 2028 0d0a 2020 2020 2020 2020 2020   = (..          
-0000bd90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bda0: 2020 2020 2020 2020 2020 6565 2e46 6561            ee.Fea
-0000bdb0: 7475 7265 2865 655f 6f62 6a65 6374 2e66  ture(ee_object.f
-0000bdc0: 6972 7374 2829 292e 6765 6f6d 6574 7279  irst()).geometry
-0000bdd0: 2829 2e74 7970 6528 290d 0a20 2020 2020  ().type()..     
-0000bde0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bdf0: 2020 2020 2020 2020 2020 2029 0d0a 2020             )..  
+0000bce0: 2020 2020 2020 2020 2020 2020 2066 6f72               for
+0000bcf0: 206b 6579 2069 6e20 6b65 7973 3a0d 0a20   key in keys:.. 
+0000bd00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bd10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bd20: 2020 2070 7269 6e74 2866 2220 207b 6b65     print(f"  {ke
+0000bd30: 797d 3a20 7b69 7465 6d5b 6b65 795d 7d22  y}: {item[key]}"
+0000bd40: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+0000bd50: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+0000bd60: 6c69 6620 6973 696e 7374 616e 6365 2865  lif isinstance(e
+0000bd70: 655f 6f62 6a65 6374 2c20 6565 2e46 6561  e_object, ee.Fea
+0000bd80: 7475 7265 436f 6c6c 6563 7469 6f6e 293a  tureCollection):
+0000bd90: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+0000bda0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bdb0: 2020 2020 2320 4368 6563 6b20 6765 6f6d      # Check geom
+0000bdc0: 6574 7279 2074 7970 650d 0a20 2020 2020  etry type..     
+0000bdd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bde0: 2020 2020 2020 2020 2020 2067 656f 6d5f             geom_
+0000bdf0: 7479 7065 203d 2028 0d0a 2020 2020 2020  type = (..      
 0000be00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000be10: 2020 2020 2020 2020 2020 2020 2020 6c61                la
-0000be20: 742c 206c 6f6e 203d 206c 6174 6c6f 6e0d  t, lon = latlon.
-0000be30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000be40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000be50: 2064 656c 7461 203d 2030 2e30 3035 0d0a   delta = 0.005..
-0000be60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000be70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000be80: 6262 6f78 203d 2065 652e 4765 6f6d 6574  bbox = ee.Geomet
-0000be90: 7279 2e42 426f 7828 0d0a 2020 2020 2020  ry.BBox(..      
-0000bea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000beb0: 2020 2020 2020 2020 2020 2020 2020 6c6f                lo
-0000bec0: 6e20 2d20 6465 6c74 612c 0d0a 2020 2020  n - delta,..    
-0000bed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000be10: 2020 2020 2020 2020 2020 2020 2020 6565                ee
+0000be20: 2e46 6561 7475 7265 2865 655f 6f62 6a65  .Feature(ee_obje
+0000be30: 6374 2e66 6972 7374 2829 292e 6765 6f6d  ct.first()).geom
+0000be40: 6574 7279 2829 2e74 7970 6528 290d 0a20  etry().type().. 
+0000be50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000be60: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+0000be70: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000be80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000be90: 2020 6c61 742c 206c 6f6e 203d 206c 6174    lat, lon = lat
+0000bea0: 6c6f 6e0d 0a20 2020 2020 2020 2020 2020  lon..           
+0000beb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bec0: 2020 2020 2064 656c 7461 203d 2030 2e30       delta = 0.0
+0000bed0: 3035 0d0a 2020 2020 2020 2020 2020 2020  05..            
 0000bee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bef0: 6c61 7420 2d20 6465 6c74 612c 0d0a 2020  lat - delta,..  
-0000bf00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bef0: 2020 2020 6262 6f78 203d 2065 652e 4765      bbox = ee.Ge
+0000bf00: 6f6d 6574 7279 2e42 426f 7828 0d0a 2020  ometry.BBox(..  
 0000bf10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bf20: 2020 6c6f 6e20 2b20 6465 6c74 612c 0d0a    lon + delta,..
-0000bf30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bf20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bf30: 2020 6c6f 6e20 2d20 6465 6c74 612c 0d0a    lon - delta,..
 0000bf40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bf50: 2020 2020 6c61 7420 2b20 6465 6c74 612c      lat + delta,
-0000bf60: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000bf70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bf80: 2020 290d 0a20 2020 2020 2020 2020 2020    )..           
-0000bf90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bfa0: 2020 2020 2023 2043 7265 6174 6520 6120       # Create a 
-0000bfb0: 626f 756e 6469 6e67 2062 6f78 2074 6f20  bounding box to 
-0000bfc0: 6669 6c74 6572 2070 6f69 6e74 730d 0a20  filter points.. 
-0000bfd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bfe0: 2020 2020 2020 2020 2020 2020 2020 2078                 x
-0000bff0: 7920 3d20 6565 2e41 6c67 6f72 6974 686d  y = ee.Algorithm
-0000c000: 732e 4966 280d 0a20 2020 2020 2020 2020  s.If(..         
-0000c010: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c020: 2020 2020 2020 2020 2020 2067 656f 6d5f             geom_
-0000c030: 7479 7065 2e63 6f6d 7061 7265 546f 2865  type.compareTo(e
-0000c040: 652e 5374 7269 6e67 2822 506f 696e 7422  e.String("Point"
-0000c050: 2929 2c0d 0a20 2020 2020 2020 2020 2020  )),..           
-0000c060: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c070: 2020 2020 2020 2020 2078 792c 0d0a 2020           xy,..  
+0000bf50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bf60: 2020 2020 6c61 7420 2d20 6465 6c74 612c      lat - delta,
+0000bf70: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000bf80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bf90: 2020 2020 2020 6c6f 6e20 2b20 6465 6c74        lon + delt
+0000bfa0: 612c 0d0a 2020 2020 2020 2020 2020 2020  a,..            
+0000bfb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bfc0: 2020 2020 2020 2020 6c61 7420 2b20 6465          lat + de
+0000bfd0: 6c74 612c 0d0a 2020 2020 2020 2020 2020  lta,..          
+0000bfe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bff0: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
+0000c000: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c010: 2020 2020 2020 2020 2023 2043 7265 6174           # Creat
+0000c020: 6520 6120 626f 756e 6469 6e67 2062 6f78  e a bounding box
+0000c030: 2074 6f20 6669 6c74 6572 2070 6f69 6e74   to filter point
+0000c040: 730d 0a20 2020 2020 2020 2020 2020 2020  s..             
+0000c050: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c060: 2020 2078 7920 3d20 6565 2e41 6c67 6f72     xy = ee.Algor
+0000c070: 6974 686d 732e 4966 280d 0a20 2020 2020  ithms.If(..     
 0000c080: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c0a0: 2020 6262 6f78 2c0d 0a20 2020 2020 2020    bbox,..       
-0000c0b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c0c0: 2020 2020 2020 2020 2029 0d0a 0d0a 2020           )....  
+0000c090: 2020 2020 2020 2020 2020 2020 2020 2067                 g
+0000c0a0: 656f 6d5f 7479 7065 2e63 6f6d 7061 7265  eom_type.compare
+0000c0b0: 546f 2865 652e 5374 7269 6e67 2822 506f  To(ee.String("Po
+0000c0c0: 696e 7422 2929 2c0d 0a20 2020 2020 2020  int")),..       
 0000c0d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c0e0: 2020 2020 2020 2020 2020 2020 2020 6669                fi
-0000c0f0: 6c74 6572 6564 203d 2065 655f 6f62 6a65  ltered = ee_obje
-0000c100: 6374 2e66 696c 7465 7242 6f75 6e64 7328  ct.filterBounds(
-0000c110: 7879 290d 0a20 2020 2020 2020 2020 2020  xy)..           
+0000c0e0: 2020 2020 2020 2020 2020 2020 2078 792c               xy,
+0000c0f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000c100: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c110: 2020 2020 2020 6262 6f78 2c0d 0a20 2020        bbox,..   
 0000c120: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c130: 2020 2020 2073 697a 6520 3d20 6669 6c74       size = filt
-0000c140: 6572 6564 2e73 697a 6528 292e 6765 7449  ered.size().getI
-0000c150: 6e66 6f28 290d 0a20 2020 2020 2020 2020  nfo()..         
-0000c160: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c170: 2020 2020 2020 2069 6620 7369 7a65 203e         if size >
-0000c180: 2030 3a0d 0a20 2020 2020 2020 2020 2020   0:..           
+0000c130: 2020 2020 2020 2020 2020 2020 2029 0d0a               )..
+0000c140: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000c150: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c160: 2020 6669 6c74 6572 6564 203d 2065 655f    filtered = ee_
+0000c170: 6f62 6a65 6374 2e66 696c 7465 7242 6f75  object.filterBou
+0000c180: 6e64 7328 7879 290d 0a20 2020 2020 2020  nds(xy)..       
 0000c190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c1a0: 2020 2020 2020 2020 2066 6972 7374 203d           first =
-0000c1b0: 2066 696c 7465 7265 642e 6669 7273 7428   filtered.first(
-0000c1c0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+0000c1a0: 2020 2020 2020 2020 2073 697a 6520 3d20           size = 
+0000c1b0: 6669 6c74 6572 6564 2e73 697a 6528 292e  filtered.size().
+0000c1c0: 6765 7449 6e66 6f28 290d 0a20 2020 2020  getInfo()..     
 0000c1d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c1e0: 2020 2020 2020 2070 726f 7073 203d 2066         props = f
-0000c1f0: 6972 7374 2e74 6f44 6963 7469 6f6e 6172  irst.toDictionar
-0000c200: 7928 292e 6765 7449 6e66 6f28 290d 0a20  y().getInfo().. 
-0000c210: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c220: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c230: 2020 2062 5f6e 616d 6520 3d20 2270 726f     b_name = "pro
-0000c240: 7065 7274 7922 0d0a 2020 2020 2020 2020  perty"..        
-0000c250: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c260: 2020 2020 2020 2020 2020 2020 6966 206c              if l
-0000c270: 656e 2870 726f 7073 2920 3e20 313a 0d0a  en(props) > 1:..
-0000c280: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c1e0: 2020 2020 2020 2020 2020 2069 6620 7369             if si
+0000c1f0: 7a65 203e 2030 3a0d 0a20 2020 2020 2020  ze > 0:..       
+0000c200: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c210: 2020 2020 2020 2020 2020 2020 2066 6972               fir
+0000c220: 7374 203d 2066 696c 7465 7265 642e 6669  st = filtered.fi
+0000c230: 7273 7428 290d 0a20 2020 2020 2020 2020  rst()..         
+0000c240: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c250: 2020 2020 2020 2020 2020 2070 726f 7073             props
+0000c260: 203d 2066 6972 7374 2e74 6f44 6963 7469   = first.toDicti
+0000c270: 6f6e 6172 7928 292e 6765 7449 6e66 6f28  onary().getInfo(
+0000c280: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
 0000c290: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c2a0: 2020 2020 2020 2020 625f 6e61 6d65 203d          b_name =
-0000c2b0: 2022 7072 6f70 6572 7469 6573 220d 0a20   "properties".. 
+0000c2a0: 2020 2020 2020 2062 5f6e 616d 6520 3d20         b_name = 
+0000c2b0: 2270 726f 7065 7274 7922 0d0a 2020 2020  "property"..    
 0000c2c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000c2d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c2e0: 2020 2070 7269 6e74 280d 0a20 2020 2020     print(..     
-0000c2f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c2e0: 6966 206c 656e 2870 726f 7073 2920 3e20  if len(props) > 
+0000c2f0: 313a 0d0a 2020 2020 2020 2020 2020 2020  1:..            
 0000c300: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c310: 2020 2066 227b 6c61 7965 725f 6e61 6d65     f"{layer_name
-0000c320: 7d3a 2046 6561 7475 7265 2028 7b6c 656e  }: Feature ({len
-0000c330: 2870 726f 7073 297d 207b 625f 6e61 6d65  (props)} {b_name
-0000c340: 7d29 220d 0a20 2020 2020 2020 2020 2020  })"..           
-0000c350: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c360: 2020 2020 2020 2020 2029 0d0a 2020 2020           )..    
+0000c310: 2020 2020 2020 2020 2020 2020 625f 6e61              b_na
+0000c320: 6d65 203d 2022 7072 6f70 6572 7469 6573  me = "properties
+0000c330: 220d 0a20 2020 2020 2020 2020 2020 2020  "..             
+0000c340: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c350: 2020 2020 2020 2070 7269 6e74 280d 0a20         print(.. 
+0000c360: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000c370: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c380: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c390: 6b65 7973 203d 2070 726f 7073 2e6b 6579  keys = props.key
-0000c3a0: 7328 290d 0a20 2020 2020 2020 2020 2020  s()..           
-0000c3b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c3c0: 2020 2020 2020 2020 2066 6f72 206b 6579           for key
-0000c3d0: 2069 6e20 6b65 7973 3a0d 0a20 2020 2020   in keys:..     
+0000c380: 2020 2020 2020 2066 227b 6c61 7965 725f         f"{layer_
+0000c390: 6e61 6d65 7d3a 2046 6561 7475 7265 2028  name}: Feature (
+0000c3a0: 7b6c 656e 2870 726f 7073 297d 207b 625f  {len(props)} {b_
+0000c3b0: 6e61 6d65 7d29 220d 0a20 2020 2020 2020  name})"..       
+0000c3c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c3d0: 2020 2020 2020 2020 2020 2020 2029 0d0a               )..
 0000c3e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000c3f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c400: 2020 2070 7269 6e74 2866 2220 207b 6b65     print(f"  {ke
-0000c410: 797d 3a20 7b70 726f 7073 5b6b 6579 5d7d  y}: {props[key]}
-0000c420: 2229 0d0a 2020 2020 2020 2020 2020 2020  ")..            
-0000c430: 2020 2020 2020 2020 2020 2020 6578 6365              exce
-0000c440: 7074 2045 7863 6570 7469 6f6e 2061 7320  pt Exception as 
-0000c450: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+0000c400: 2020 2020 6b65 7973 203d 2070 726f 7073      keys = props
+0000c410: 2e6b 6579 7328 290d 0a20 2020 2020 2020  .keys()..       
+0000c420: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c430: 2020 2020 2020 2020 2020 2020 2066 6f72               for
+0000c440: 206b 6579 2069 6e20 6b65 7973 3a0d 0a20   key in keys:.. 
+0000c450: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000c460: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c470: 7072 696e 7428 6529 0d0a 0d0a 2020 2020  print(e)....    
-0000c480: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0000c490: 2e64 6566 6175 6c74 5f73 7479 6c65 203d  .default_style =
-0000c4a0: 207b 2263 7572 736f 7222 3a20 2263 726f   {"cursor": "cro
-0000c4b0: 7373 6861 6972 227d 0d0a 2020 2020 2020  sshair"}..      
-0000c4c0: 2020 2020 2020 6966 2028 0d0a 2020 2020        if (..    
-0000c4d0: 2020 2020 2020 2020 2020 2020 6b77 6172              kwar
-0000c4e0: 6773 2e67 6574 2822 7479 7065 2229 203d  gs.get("type") =
-0000c4f0: 3d20 2263 6c69 636b 220d 0a20 2020 2020  = "click"..     
-0000c500: 2020 2020 2020 2020 2020 2061 6e64 2073             and s
-0000c510: 656c 662e 706c 6f74 5f63 6865 636b 6564  elf.plot_checked
-0000c520: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000c530: 2020 616e 6420 6c65 6e28 7365 6c66 2e65    and len(self.e
-0000c540: 655f 7261 7374 6572 5f6c 6179 6572 7329  e_raster_layers)
-0000c550: 203e 2030 0d0a 2020 2020 2020 2020 2020   > 0..          
-0000c560: 2020 293a 0d0a 2020 2020 2020 2020 2020    ):..          
-0000c570: 2020 2020 2020 706c 6f74 5f6c 6179 6572        plot_layer
-0000c580: 5f6e 616d 6520 3d20 7365 6c66 2e70 6c6f  _name = self.plo
-0000c590: 745f 6472 6f70 646f 776e 5f77 6964 6765  t_dropdown_widge
-0000c5a0: 742e 7661 6c75 650d 0a20 2020 2020 2020  t.value..       
-0000c5b0: 2020 2020 2020 2020 206c 6179 6572 5f6e           layer_n
-0000c5c0: 616d 6573 203d 2073 656c 662e 6565 5f72  ames = self.ee_r
-0000c5d0: 6173 7465 725f 6c61 7965 725f 6e61 6d65  aster_layer_name
-0000c5e0: 730d 0a20 2020 2020 2020 2020 2020 2020  s..             
-0000c5f0: 2020 206c 6179 6572 7320 3d20 7365 6c66     layers = self
-0000c600: 2e65 655f 7261 7374 6572 5f6c 6179 6572  .ee_raster_layer
-0000c610: 730d 0a20 2020 2020 2020 2020 2020 2020  s..             
-0000c620: 2020 2069 6e64 6578 203d 206c 6179 6572     index = layer
-0000c630: 5f6e 616d 6573 2e69 6e64 6578 2870 6c6f  _names.index(plo
-0000c640: 745f 6c61 7965 725f 6e61 6d65 290d 0a20  t_layer_name).. 
-0000c650: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-0000c660: 655f 6f62 6a65 6374 203d 206c 6179 6572  e_object = layer
-0000c670: 735b 696e 6465 785d 0d0a 0d0a 2020 2020  s[index]....    
-0000c680: 2020 2020 2020 2020 2020 2020 6966 2069              if i
-0000c690: 7369 6e73 7461 6e63 6528 6565 5f6f 626a  sinstance(ee_obj
-0000c6a0: 6563 742c 2065 652e 496d 6167 6543 6f6c  ect, ee.ImageCol
-0000c6b0: 6c65 6374 696f 6e29 3a0d 0a20 2020 2020  lection):..     
-0000c6c0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-0000c6d0: 655f 6f62 6a65 6374 203d 2065 655f 6f62  e_object = ee_ob
-0000c6e0: 6a65 6374 2e6d 6f73 6169 6328 290d 0a0d  ject.mosaic()...
-0000c6f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000c700: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
-0000c710: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0000c720: 6465 6661 756c 745f 7374 796c 6520 3d20  default_style = 
-0000c730: 7b22 6375 7273 6f72 223a 2022 7761 6974  {"cursor": "wait
-0000c740: 227d 0d0a 2020 2020 2020 2020 2020 2020  "}..            
-0000c750: 2020 2020 2020 2020 706c 6f74 5f6f 7074          plot_opt
-0000c760: 696f 6e73 203d 2073 656c 662e 706c 6f74  ions = self.plot
-0000c770: 5f6f 7074 696f 6e73 0d0a 2020 2020 2020  _options..      
-0000c780: 2020 2020 2020 2020 2020 2020 2020 7361                sa
-0000c790: 6d70 6c65 5f73 6361 6c65 203d 2073 656c  mple_scale = sel
-0000c7a0: 662e 6765 7453 6361 6c65 2829 0d0a 2020  f.getScale()..  
-0000c7b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c7c0: 2020 6966 2022 7361 6d70 6c65 5f73 6361    if "sample_sca
-0000c7d0: 6c65 2220 696e 2070 6c6f 745f 6f70 7469  le" in plot_opti
-0000c7e0: 6f6e 732e 6b65 7973 2829 2061 6e64 2028  ons.keys() and (
-0000c7f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000c800: 2020 2020 2020 2020 2020 706c 6f74 5f6f            plot_o
-0000c810: 7074 696f 6e73 5b22 7361 6d70 6c65 5f73  ptions["sample_s
-0000c820: 6361 6c65 225d 2069 7320 6e6f 7420 4e6f  cale"] is not No
-0000c830: 6e65 0d0a 2020 2020 2020 2020 2020 2020  ne..            
-0000c840: 2020 2020 2020 2020 293a 0d0a 2020 2020          ):..    
-0000c850: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c860: 2020 2020 7361 6d70 6c65 5f73 6361 6c65      sample_scale
-0000c870: 203d 2070 6c6f 745f 6f70 7469 6f6e 735b   = plot_options[
-0000c880: 2273 616d 706c 655f 7363 616c 6522 5d0d  "sample_scale"].
-0000c890: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000c8a0: 2020 2020 2069 6620 2274 6974 6c65 2220       if "title" 
-0000c8b0: 6e6f 7420 696e 2070 6c6f 745f 6f70 7469  not in plot_opti
-0000c8c0: 6f6e 732e 6b65 7973 2829 3a0d 0a20 2020  ons.keys():..   
-0000c8d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c8e0: 2020 2020 2070 6c6f 745f 6f70 7469 6f6e       plot_option
-0000c8f0: 735b 2274 6974 6c65 225d 203d 2070 6c6f  s["title"] = plo
-0000c900: 745f 6c61 7965 725f 6e61 6d65 0d0a 2020  t_layer_name..  
-0000c910: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c920: 2020 6966 2028 2261 6464 5f6d 6172 6b65    if ("add_marke
-0000c930: 725f 636c 7573 7465 7222 2069 6e20 706c  r_cluster" in pl
-0000c940: 6f74 5f6f 7074 696f 6e73 2e6b 6579 7328  ot_options.keys(
-0000c950: 2929 2061 6e64 2070 6c6f 745f 6f70 7469  )) and plot_opti
-0000c960: 6f6e 735b 0d0a 2020 2020 2020 2020 2020  ons[..          
-0000c970: 2020 2020 2020 2020 2020 2020 2020 2261                "a
-0000c980: 6464 5f6d 6172 6b65 725f 636c 7573 7465  dd_marker_cluste
-0000c990: 7222 0d0a 2020 2020 2020 2020 2020 2020  r"..            
-0000c9a0: 2020 2020 2020 2020 5d3a 0d0a 2020 2020          ]:..    
-0000c9b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c9c0: 2020 2020 706c 6f74 5f63 6f6f 7264 696e      plot_coordin
-0000c9d0: 6174 6573 203d 2073 656c 662e 706c 6f74  ates = self.plot
-0000c9e0: 5f63 6f6f 7264 696e 6174 6573 0d0a 2020  _coordinates..  
-0000c9f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ca00: 2020 2020 2020 6d61 726b 6572 7320 3d20        markers = 
-0000ca10: 7365 6c66 2e70 6c6f 745f 6d61 726b 6572  self.plot_marker
-0000ca20: 730d 0a20 2020 2020 2020 2020 2020 2020  s..             
-0000ca30: 2020 2020 2020 2020 2020 206d 6172 6b65             marke
-0000ca40: 725f 636c 7573 7465 7220 3d20 7365 6c66  r_cluster = self
-0000ca50: 2e70 6c6f 745f 6d61 726b 6572 5f63 6c75  .plot_marker_clu
-0000ca60: 7374 6572 0d0a 2020 2020 2020 2020 2020  ster..          
-0000ca70: 2020 2020 2020 2020 2020 2020 2020 706c                pl
-0000ca80: 6f74 5f63 6f6f 7264 696e 6174 6573 2e61  ot_coordinates.a
-0000ca90: 7070 656e 6428 6c61 746c 6f6e 290d 0a20  ppend(latlon).. 
-0000caa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cab0: 2020 2020 2020 2073 656c 662e 706c 6f74         self.plot
-0000cac0: 5f6c 6173 745f 636c 6963 6b20 3d20 6c61  _last_click = la
-0000cad0: 746c 6f6e 0d0a 2020 2020 2020 2020 2020  tlon..          
-0000cae0: 2020 2020 2020 2020 2020 2020 2020 7365                se
-0000caf0: 6c66 2e70 6c6f 745f 616c 6c5f 636c 6963  lf.plot_all_clic
-0000cb00: 6b73 203d 2070 6c6f 745f 636f 6f72 6469  ks = plot_coordi
-0000cb10: 6e61 7465 730d 0a20 2020 2020 2020 2020  nates..         
-0000cb20: 2020 2020 2020 2020 2020 2020 2020 206d                 m
-0000cb30: 6172 6b65 7273 2e61 7070 656e 6428 6970  arkers.append(ip
-0000cb40: 796c 6561 666c 6574 2e4d 6172 6b65 7228  yleaflet.Marker(
-0000cb50: 6c6f 6361 7469 6f6e 3d6c 6174 6c6f 6e29  location=latlon)
-0000cb60: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-0000cb70: 2020 2020 2020 2020 2020 206d 6172 6b65             marke
-0000cb80: 725f 636c 7573 7465 722e 6d61 726b 6572  r_cluster.marker
-0000cb90: 7320 3d20 6d61 726b 6572 730d 0a20 2020  s = markers..   
-0000cba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cbb0: 2020 2020 2073 656c 662e 706c 6f74 5f6d       self.plot_m
-0000cbc0: 6172 6b65 725f 636c 7573 7465 7220 3d20  arker_cluster = 
-0000cbd0: 6d61 726b 6572 5f63 6c75 7374 6572 0d0a  marker_cluster..
-0000cbe0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000cbf0: 2020 2020 2020 6261 6e64 5f6e 616d 6573        band_names
-0000cc00: 203d 2065 655f 6f62 6a65 6374 2e62 616e   = ee_object.ban
-0000cc10: 644e 616d 6573 2829 2e67 6574 496e 666f  dNames().getInfo
-0000cc20: 2829 0d0a 2020 2020 2020 2020 2020 2020  ()..            
-0000cc30: 2020 2020 2020 2020 6966 2061 6e79 286c          if any(l
-0000cc40: 656e 286e 616d 6529 203e 2033 2066 6f72  en(name) > 3 for
-0000cc50: 206e 616d 6520 696e 2062 616e 645f 6e61   name in band_na
-0000cc60: 6d65 7329 3a0d 0a20 2020 2020 2020 2020  mes):..         
-0000cc70: 2020 2020 2020 2020 2020 2020 2020 2062                 b
-0000cc80: 616e 645f 6e61 6d65 7320 3d20 6c69 7374  and_names = list
-0000cc90: 2872 616e 6765 2831 2c20 6c65 6e28 6261  (range(1, len(ba
-0000cca0: 6e64 5f6e 616d 6573 2920 2b20 3129 290d  nd_names) + 1)).
-0000ccb0: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0000ccc0: 2020 2020 2020 2073 656c 662e 6368 6172         self.char
-0000ccd0: 745f 6c61 6265 6c73 203d 2062 616e 645f  t_labels = band_
-0000cce0: 6e61 6d65 730d 0a0d 0a20 2020 2020 2020  names....       
-0000ccf0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0000cd00: 7365 6c66 2e72 6f69 5f65 6e64 3a0d 0a20  self.roi_end:.. 
-0000cd10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cd20: 2020 2020 2020 2069 6620 7365 6c66 2e72         if self.r
-0000cd30: 6f69 5f72 6564 7563 6572 5f73 6361 6c65  oi_reducer_scale
-0000cd40: 2069 7320 4e6f 6e65 3a0d 0a20 2020 2020   is None:..     
-0000cd50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cd60: 2020 2020 2020 2073 6361 6c65 203d 2065         scale = e
-0000cd70: 655f 6f62 6a65 6374 2e73 656c 6563 7428  e_object.select(
-0000cd80: 3029 2e70 726f 6a65 6374 696f 6e28 292e  0).projection().
-0000cd90: 6e6f 6d69 6e61 6c53 6361 6c65 2829 0d0a  nominalScale()..
-0000cda0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cdb0: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
+0000c470: 2020 2020 2020 2070 7269 6e74 2866 2220         print(f" 
+0000c480: 207b 6b65 797d 3a20 7b70 726f 7073 5b6b   {key}: {props[k
+0000c490: 6579 5d7d 2229 0d0a 2020 2020 2020 2020  ey]}")..        
+0000c4a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c4b0: 6578 6365 7074 2045 7863 6570 7469 6f6e  except Exception
+0000c4c0: 2061 7320 653a 0d0a 2020 2020 2020 2020   as e:..        
+0000c4d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c4e0: 2020 2020 7072 696e 7428 6529 0d0a 0d0a      print(e)....
+0000c4f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c500: 7365 6c66 2e64 6566 6175 6c74 5f73 7479  self.default_sty
+0000c510: 6c65 203d 207b 2263 7572 736f 7222 3a20  le = {"cursor": 
+0000c520: 2263 726f 7373 6861 6972 227d 0d0a 2020  "crosshair"}..  
+0000c530: 2020 2020 2020 2020 2020 6966 2028 0d0a            if (..
+0000c540: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c550: 6b77 6172 6773 2e67 6574 2822 7479 7065  kwargs.get("type
+0000c560: 2229 203d 3d20 2263 6c69 636b 220d 0a20  ") == "click".. 
+0000c570: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+0000c580: 6e64 2073 656c 662e 706c 6f74 5f63 6865  nd self.plot_che
+0000c590: 636b 6564 0d0a 2020 2020 2020 2020 2020  cked..          
+0000c5a0: 2020 2020 2020 616e 6420 6c65 6e28 7365        and len(se
+0000c5b0: 6c66 2e65 655f 7261 7374 6572 5f6c 6179  lf.ee_raster_lay
+0000c5c0: 6572 7329 203e 2030 0d0a 2020 2020 2020  ers) > 0..      
+0000c5d0: 2020 2020 2020 293a 0d0a 2020 2020 2020        ):..      
+0000c5e0: 2020 2020 2020 2020 2020 706c 6f74 5f6c            plot_l
+0000c5f0: 6179 6572 5f6e 616d 6520 3d20 7365 6c66  ayer_name = self
+0000c600: 2e70 6c6f 745f 6472 6f70 646f 776e 5f77  .plot_dropdown_w
+0000c610: 6964 6765 742e 7661 6c75 650d 0a20 2020  idget.value..   
+0000c620: 2020 2020 2020 2020 2020 2020 206c 6179               lay
+0000c630: 6572 5f6e 616d 6573 203d 2073 656c 662e  er_names = self.
+0000c640: 6565 5f72 6173 7465 725f 6c61 7965 725f  ee_raster_layer_
+0000c650: 6e61 6d65 730d 0a20 2020 2020 2020 2020  names..         
+0000c660: 2020 2020 2020 206c 6179 6572 7320 3d20         layers = 
+0000c670: 7365 6c66 2e65 655f 7261 7374 6572 5f6c  self.ee_raster_l
+0000c680: 6179 6572 730d 0a20 2020 2020 2020 2020  ayers..         
+0000c690: 2020 2020 2020 2069 6e64 6578 203d 206c         index = l
+0000c6a0: 6179 6572 5f6e 616d 6573 2e69 6e64 6578  ayer_names.index
+0000c6b0: 2870 6c6f 745f 6c61 7965 725f 6e61 6d65  (plot_layer_name
+0000c6c0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+0000c6d0: 2020 2065 655f 6f62 6a65 6374 203d 206c     ee_object = l
+0000c6e0: 6179 6572 735b 696e 6465 785d 0d0a 0d0a  ayers[index]....
+0000c6f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c700: 6966 2069 7369 6e73 7461 6e63 6528 6565  if isinstance(ee
+0000c710: 5f6f 626a 6563 742c 2065 652e 496d 6167  _object, ee.Imag
+0000c720: 6543 6f6c 6c65 6374 696f 6e29 3a0d 0a20  eCollection):.. 
+0000c730: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c740: 2020 2065 655f 6f62 6a65 6374 203d 2065     ee_object = e
+0000c750: 655f 6f62 6a65 6374 2e6d 6f73 6169 6328  e_object.mosaic(
+0000c760: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+0000c770: 2020 2020 2074 7279 3a0d 0a20 2020 2020       try:..     
+0000c780: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0000c790: 656c 662e 6465 6661 756c 745f 7374 796c  elf.default_styl
+0000c7a0: 6520 3d20 7b22 6375 7273 6f72 223a 2022  e = {"cursor": "
+0000c7b0: 7761 6974 227d 0d0a 2020 2020 2020 2020  wait"}..        
+0000c7c0: 2020 2020 2020 2020 2020 2020 706c 6f74              plot
+0000c7d0: 5f6f 7074 696f 6e73 203d 2073 656c 662e  _options = self.
+0000c7e0: 706c 6f74 5f6f 7074 696f 6e73 0d0a 2020  plot_options..  
+0000c7f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c800: 2020 7361 6d70 6c65 5f73 6361 6c65 203d    sample_scale =
+0000c810: 2073 656c 662e 6765 7453 6361 6c65 2829   self.getScale()
+0000c820: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000c830: 2020 2020 2020 6966 2022 7361 6d70 6c65        if "sample
+0000c840: 5f73 6361 6c65 2220 696e 2070 6c6f 745f  _scale" in plot_
+0000c850: 6f70 7469 6f6e 732e 6b65 7973 2829 2061  options.keys() a
+0000c860: 6e64 2028 0d0a 2020 2020 2020 2020 2020  nd (..          
+0000c870: 2020 2020 2020 2020 2020 2020 2020 706c                pl
+0000c880: 6f74 5f6f 7074 696f 6e73 5b22 7361 6d70  ot_options["samp
+0000c890: 6c65 5f73 6361 6c65 225d 2069 7320 6e6f  le_scale"] is no
+0000c8a0: 7420 4e6f 6e65 0d0a 2020 2020 2020 2020  t None..        
+0000c8b0: 2020 2020 2020 2020 2020 2020 293a 0d0a              ):..
+0000c8c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c8d0: 2020 2020 2020 2020 7361 6d70 6c65 5f73          sample_s
+0000c8e0: 6361 6c65 203d 2070 6c6f 745f 6f70 7469  cale = plot_opti
+0000c8f0: 6f6e 735b 2273 616d 706c 655f 7363 616c  ons["sample_scal
+0000c900: 6522 5d0d 0a20 2020 2020 2020 2020 2020  e"]..           
+0000c910: 2020 2020 2020 2020 2069 6620 2274 6974           if "tit
+0000c920: 6c65 2220 6e6f 7420 696e 2070 6c6f 745f  le" not in plot_
+0000c930: 6f70 7469 6f6e 732e 6b65 7973 2829 3a0d  options.keys():.
+0000c940: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000c950: 2020 2020 2020 2020 2070 6c6f 745f 6f70           plot_op
+0000c960: 7469 6f6e 735b 2274 6974 6c65 225d 203d  tions["title"] =
+0000c970: 2070 6c6f 745f 6c61 7965 725f 6e61 6d65   plot_layer_name
+0000c980: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000c990: 2020 2020 2020 6966 2028 2261 6464 5f6d        if ("add_m
+0000c9a0: 6172 6b65 725f 636c 7573 7465 7222 2069  arker_cluster" i
+0000c9b0: 6e20 706c 6f74 5f6f 7074 696f 6e73 2e6b  n plot_options.k
+0000c9c0: 6579 7328 2929 2061 6e64 2070 6c6f 745f  eys()) and plot_
+0000c9d0: 6f70 7469 6f6e 735b 0d0a 2020 2020 2020  options[..      
+0000c9e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c9f0: 2020 2261 6464 5f6d 6172 6b65 725f 636c    "add_marker_cl
+0000ca00: 7573 7465 7222 0d0a 2020 2020 2020 2020  uster"..        
+0000ca10: 2020 2020 2020 2020 2020 2020 5d3a 0d0a              ]:..
+0000ca20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ca30: 2020 2020 2020 2020 706c 6f74 5f63 6f6f          plot_coo
+0000ca40: 7264 696e 6174 6573 203d 2073 656c 662e  rdinates = self.
+0000ca50: 706c 6f74 5f63 6f6f 7264 696e 6174 6573  plot_coordinates
+0000ca60: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000ca70: 2020 2020 2020 2020 2020 6d61 726b 6572            marker
+0000ca80: 7320 3d20 7365 6c66 2e70 6c6f 745f 6d61  s = self.plot_ma
+0000ca90: 726b 6572 730d 0a20 2020 2020 2020 2020  rkers..         
+0000caa0: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+0000cab0: 6172 6b65 725f 636c 7573 7465 7220 3d20  arker_cluster = 
+0000cac0: 7365 6c66 2e70 6c6f 745f 6d61 726b 6572  self.plot_marker
+0000cad0: 5f63 6c75 7374 6572 0d0a 2020 2020 2020  _cluster..      
+0000cae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000caf0: 2020 706c 6f74 5f63 6f6f 7264 696e 6174    plot_coordinat
+0000cb00: 6573 2e61 7070 656e 6428 6c61 746c 6f6e  es.append(latlon
+0000cb10: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+0000cb20: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0000cb30: 706c 6f74 5f6c 6173 745f 636c 6963 6b20  plot_last_click 
+0000cb40: 3d20 6c61 746c 6f6e 0d0a 2020 2020 2020  = latlon..      
+0000cb50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cb60: 2020 7365 6c66 2e70 6c6f 745f 616c 6c5f    self.plot_all_
+0000cb70: 636c 6963 6b73 203d 2070 6c6f 745f 636f  clicks = plot_co
+0000cb80: 6f72 6469 6e61 7465 730d 0a20 2020 2020  ordinates..     
+0000cb90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cba0: 2020 206d 6172 6b65 7273 2e61 7070 656e     markers.appen
+0000cbb0: 6428 6970 796c 6561 666c 6574 2e4d 6172  d(ipyleaflet.Mar
+0000cbc0: 6b65 7228 6c6f 6361 7469 6f6e 3d6c 6174  ker(location=lat
+0000cbd0: 6c6f 6e29 290d 0a20 2020 2020 2020 2020  lon))..         
+0000cbe0: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+0000cbf0: 6172 6b65 725f 636c 7573 7465 722e 6d61  arker_cluster.ma
+0000cc00: 726b 6572 7320 3d20 6d61 726b 6572 730d  rkers = markers.
+0000cc10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000cc20: 2020 2020 2020 2020 2073 656c 662e 706c           self.pl
+0000cc30: 6f74 5f6d 6172 6b65 725f 636c 7573 7465  ot_marker_cluste
+0000cc40: 7220 3d20 6d61 726b 6572 5f63 6c75 7374  r = marker_clust
+0000cc50: 6572 0d0a 0d0a 2020 2020 2020 2020 2020  er....          
+0000cc60: 2020 2020 2020 2020 2020 6261 6e64 5f6e            band_n
+0000cc70: 616d 6573 203d 2065 655f 6f62 6a65 6374  ames = ee_object
+0000cc80: 2e62 616e 644e 616d 6573 2829 2e67 6574  .bandNames().get
+0000cc90: 496e 666f 2829 0d0a 2020 2020 2020 2020  Info()..        
+0000cca0: 2020 2020 2020 2020 2020 2020 6966 2061              if a
+0000ccb0: 6e79 286c 656e 286e 616d 6529 203e 2033  ny(len(name) > 3
+0000ccc0: 2066 6f72 206e 616d 6520 696e 2062 616e   for name in ban
+0000ccd0: 645f 6e61 6d65 7329 3a0d 0a20 2020 2020  d_names):..     
+0000cce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ccf0: 2020 2062 616e 645f 6e61 6d65 7320 3d20     band_names = 
+0000cd00: 6c69 7374 2872 616e 6765 2831 2c20 6c65  list(range(1, le
+0000cd10: 6e28 6261 6e64 5f6e 616d 6573 2920 2b20  n(band_names) + 
+0000cd20: 3129 290d 0a0d 0a20 2020 2020 2020 2020  1))....         
+0000cd30: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0000cd40: 6368 6172 745f 6c61 6265 6c73 203d 2062  chart_labels = b
+0000cd50: 616e 645f 6e61 6d65 730d 0a0d 0a20 2020  and_names....   
+0000cd60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cd70: 2069 6620 7365 6c66 2e72 6f69 5f65 6e64   if self.roi_end
+0000cd80: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0000cd90: 2020 2020 2020 2020 2020 2069 6620 7365             if se
+0000cda0: 6c66 2e72 6f69 5f72 6564 7563 6572 5f73  lf.roi_reducer_s
+0000cdb0: 6361 6c65 2069 7320 4e6f 6e65 3a0d 0a20  cale is None:.. 
 0000cdc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000cdd0: 2020 2020 2020 2020 2020 2073 6361 6c65             scale
-0000cde0: 203d 2073 656c 662e 726f 695f 7265 6475   = self.roi_redu
-0000cdf0: 6365 725f 7363 616c 650d 0a20 2020 2020  cer_scale..     
-0000ce00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ce10: 2020 2064 6963 745f 7661 6c75 6573 5f74     dict_values_t
-0000ce20: 6d70 203d 2065 655f 6f62 6a65 6374 2e72  mp = ee_object.r
-0000ce30: 6564 7563 6552 6567 696f 6e28 0d0a 2020  educeRegion(..  
-0000ce40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ce50: 2020 2020 2020 2020 2020 7265 6475 6365            reduce
-0000ce60: 723d 7365 6c66 2e72 6f69 5f72 6564 7563  r=self.roi_reduc
-0000ce70: 6572 2c0d 0a20 2020 2020 2020 2020 2020  er,..           
-0000ce80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ce90: 2067 656f 6d65 7472 793d 7365 6c66 2e75   geometry=self.u
-0000cea0: 7365 725f 726f 692c 0d0a 2020 2020 2020  ser_roi,..      
-0000ceb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cec0: 2020 2020 2020 7363 616c 653d 7363 616c        scale=scal
-0000ced0: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
-0000cee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cef0: 6265 7374 4566 666f 7274 3d54 7275 652c  bestEffort=True,
-0000cf00: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000cf10: 2020 2020 2020 2020 2020 292e 6765 7449            ).getI
-0000cf20: 6e66 6f28 290d 0a20 2020 2020 2020 2020  nfo()..         
-0000cf30: 2020 2020 2020 2020 2020 2020 2020 2062                 b
-0000cf40: 5f6e 616d 6573 203d 2065 655f 6f62 6a65  _names = ee_obje
-0000cf50: 6374 2e62 616e 644e 616d 6573 2829 2e67  ct.bandNames().g
-0000cf60: 6574 496e 666f 2829 0d0a 2020 2020 2020  etInfo()..      
-0000cf70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cf80: 2020 6469 6374 5f76 616c 7565 7320 3d20    dict_values = 
-0000cf90: 6469 6374 280d 0a20 2020 2020 2020 2020  dict(..         
+0000cde0: 203d 2065 655f 6f62 6a65 6374 2e73 656c   = ee_object.sel
+0000cdf0: 6563 7428 3029 2e70 726f 6a65 6374 696f  ect(0).projectio
+0000ce00: 6e28 292e 6e6f 6d69 6e61 6c53 6361 6c65  n().nominalScale
+0000ce10: 2829 0d0a 2020 2020 2020 2020 2020 2020  ()..            
+0000ce20: 2020 2020 2020 2020 2020 2020 656c 7365              else
+0000ce30: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0000ce40: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0000ce50: 6361 6c65 203d 2073 656c 662e 726f 695f  cale = self.roi_
+0000ce60: 7265 6475 6365 725f 7363 616c 650d 0a20  reducer_scale.. 
+0000ce70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ce80: 2020 2020 2020 2064 6963 745f 7661 6c75         dict_valu
+0000ce90: 6573 5f74 6d70 203d 2065 655f 6f62 6a65  es_tmp = ee_obje
+0000cea0: 6374 2e72 6564 7563 6552 6567 696f 6e28  ct.reduceRegion(
+0000ceb0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000cec0: 2020 2020 2020 2020 2020 2020 2020 7265                re
+0000ced0: 6475 6365 723d 7365 6c66 2e72 6f69 5f72  ducer=self.roi_r
+0000cee0: 6564 7563 6572 2c0d 0a20 2020 2020 2020  educer,..       
+0000cef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cf00: 2020 2020 2067 656f 6d65 7472 793d 7365       geometry=se
+0000cf10: 6c66 2e75 7365 725f 726f 692c 0d0a 2020  lf.user_roi,..  
+0000cf20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cf30: 2020 2020 2020 2020 2020 7363 616c 653d            scale=
+0000cf40: 7363 616c 652c 0d0a 2020 2020 2020 2020  scale,..        
+0000cf50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cf60: 2020 2020 6265 7374 4566 666f 7274 3d54      bestEffort=T
+0000cf70: 7275 652c 0d0a 2020 2020 2020 2020 2020  rue,..          
+0000cf80: 2020 2020 2020 2020 2020 2020 2020 292e                ).
+0000cf90: 6765 7449 6e66 6f28 290d 0a20 2020 2020  getInfo()..     
 0000cfa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cfb0: 2020 207a 6970 2862 5f6e 616d 6573 2c20     zip(b_names, 
-0000cfc0: 5b64 6963 745f 7661 6c75 6573 5f74 6d70  [dict_values_tmp
-0000cfd0: 5b62 5d20 666f 7220 6220 696e 2062 5f6e  [b] for b in b_n
-0000cfe0: 616d 6573 5d29 0d0a 2020 2020 2020 2020  ames])..        
-0000cff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d000: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-0000d010: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0000d020: 6368 6172 745f 706f 696e 7473 2e61 7070  chart_points.app
-0000d030: 656e 6428 0d0a 2020 2020 2020 2020 2020  end(..          
-0000d040: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d050: 2020 7365 6c66 2e75 7365 725f 726f 692e    self.user_roi.
-0000d060: 6365 6e74 726f 6964 2831 292e 636f 6f72  centroid(1).coor
-0000d070: 6469 6e61 7465 7328 292e 6765 7449 6e66  dinates().getInf
-0000d080: 6f28 290d 0a20 2020 2020 2020 2020 2020  o()..           
-0000d090: 2020 2020 2020 2020 2020 2020 2029 0d0a               )..
-0000d0a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d0b0: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
-0000d0c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d0d0: 2020 2078 7920 3d20 6565 2e47 656f 6d65     xy = ee.Geome
-0000d0e0: 7472 792e 506f 696e 7428 6c61 746c 6f6e  try.Point(latlon
-0000d0f0: 5b3a 3a2d 315d 290d 0a20 2020 2020 2020  [::-1])..       
+0000cfb0: 2020 2062 5f6e 616d 6573 203d 2065 655f     b_names = ee_
+0000cfc0: 6f62 6a65 6374 2e62 616e 644e 616d 6573  object.bandNames
+0000cfd0: 2829 2e67 6574 496e 666f 2829 0d0a 2020  ().getInfo()..  
+0000cfe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cff0: 2020 2020 2020 6469 6374 5f76 616c 7565        dict_value
+0000d000: 7320 3d20 6469 6374 280d 0a20 2020 2020  s = dict(..     
+0000d010: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d020: 2020 2020 2020 207a 6970 2862 5f6e 616d         zip(b_nam
+0000d030: 6573 2c20 5b64 6963 745f 7661 6c75 6573  es, [dict_values
+0000d040: 5f74 6d70 5b62 5d20 666f 7220 6220 696e  _tmp[b] for b in
+0000d050: 2062 5f6e 616d 6573 5d29 0d0a 2020 2020   b_names])..    
+0000d060: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d070: 2020 2020 290d 0a20 2020 2020 2020 2020      )..         
+0000d080: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0000d090: 656c 662e 6368 6172 745f 706f 696e 7473  elf.chart_points
+0000d0a0: 2e61 7070 656e 6428 0d0a 2020 2020 2020  .append(..      
+0000d0b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d0c0: 2020 2020 2020 7365 6c66 2e75 7365 725f        self.user_
+0000d0d0: 726f 692e 6365 6e74 726f 6964 2831 292e  roi.centroid(1).
+0000d0e0: 636f 6f72 6469 6e61 7465 7328 292e 6765  coordinates().ge
+0000d0f0: 7449 6e66 6f28 290d 0a20 2020 2020 2020  tInfo()..       
 0000d100: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d110: 2064 6963 745f 7661 6c75 6573 5f74 6d70   dict_values_tmp
-0000d120: 203d 2028 0d0a 2020 2020 2020 2020 2020   = (..          
+0000d110: 2029 0d0a 2020 2020 2020 2020 2020 2020   )..            
+0000d120: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
 0000d130: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d140: 2020 6565 5f6f 626a 6563 742e 7361 6d70    ee_object.samp
-0000d150: 6c65 2878 792c 2073 6361 6c65 3d73 616d  le(xy, scale=sam
-0000d160: 706c 655f 7363 616c 6529 0d0a 2020 2020  ple_scale)..    
+0000d140: 2020 2020 2020 2078 7920 3d20 6565 2e47         xy = ee.G
+0000d150: 656f 6d65 7472 792e 506f 696e 7428 6c61  eometry.Point(la
+0000d160: 746c 6f6e 5b3a 3a2d 315d 290d 0a20 2020  tlon[::-1])..   
 0000d170: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d180: 2020 2020 2020 2020 2e66 6972 7374 2829          .first()
-0000d190: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000d1a0: 2020 2020 2020 2020 2020 2020 2020 2e74                .t
-0000d1b0: 6f44 6963 7469 6f6e 6172 7928 290d 0a20  oDictionary().. 
-0000d1c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d1d0: 2020 2020 2020 2020 2020 202e 6765 7449             .getI
-0000d1e0: 6e66 6f28 290d 0a20 2020 2020 2020 2020  nfo()..         
-0000d1f0: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-0000d200: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000d210: 2020 2020 2020 2020 2020 625f 6e61 6d65            b_name
-0000d220: 7320 3d20 6565 5f6f 626a 6563 742e 6261  s = ee_object.ba
-0000d230: 6e64 4e61 6d65 7328 292e 6765 7449 6e66  ndNames().getInf
-0000d240: 6f28 290d 0a20 2020 2020 2020 2020 2020  o()..           
-0000d250: 2020 2020 2020 2020 2020 2020 2064 6963               dic
-0000d260: 745f 7661 6c75 6573 203d 2064 6963 7428  t_values = dict(
-0000d270: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000d280: 2020 2020 2020 2020 2020 2020 2020 7a69                zi
-0000d290: 7028 625f 6e61 6d65 732c 205b 6469 6374  p(b_names, [dict
-0000d2a0: 5f76 616c 7565 735f 746d 705b 625d 2066  _values_tmp[b] f
-0000d2b0: 6f72 2062 2069 6e20 625f 6e61 6d65 735d  or b in b_names]
-0000d2c0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-0000d2d0: 2020 2020 2020 2020 2020 2029 0d0a 2020             )..  
-0000d2e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d2f0: 2020 2020 2020 7365 6c66 2e63 6861 7274        self.chart
-0000d300: 5f70 6f69 6e74 732e 6170 7065 6e64 2878  _points.append(x
-0000d310: 792e 636f 6f72 6469 6e61 7465 7328 292e  y.coordinates().
-0000d320: 6765 7449 6e66 6f28 2929 0d0a 2020 2020  getInfo())..    
-0000d330: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d340: 6261 6e64 5f76 616c 7565 7320 3d20 6c69  band_values = li
-0000d350: 7374 2864 6963 745f 7661 6c75 6573 2e76  st(dict_values.v
-0000d360: 616c 7565 7328 2929 0d0a 2020 2020 2020  alues())..      
-0000d370: 2020 2020 2020 2020 2020 2020 2020 7365                se
-0000d380: 6c66 2e63 6861 7274 5f76 616c 7565 732e  lf.chart_values.
-0000d390: 6170 7065 6e64 2862 616e 645f 7661 6c75  append(band_valu
-0000d3a0: 6573 290d 0a20 2020 2020 2020 2020 2020  es)..           
-0000d3b0: 2020 2020 2020 2020 2073 656c 662e 706c           self.pl
-0000d3c0: 6f74 2862 616e 645f 6e61 6d65 732c 2062  ot(band_names, b
-0000d3d0: 616e 645f 7661 6c75 6573 2c20 2a2a 706c  and_values, **pl
-0000d3e0: 6f74 5f6f 7074 696f 6e73 290d 0a20 2020  ot_options)..   
-0000d3f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d400: 2069 6620 706c 6f74 5f6f 7074 696f 6e73   if plot_options
-0000d410: 5b22 7469 746c 6522 5d20 3d3d 2070 6c6f  ["title"] == plo
-0000d420: 745f 6c61 7965 725f 6e61 6d65 3a0d 0a20  t_layer_name:.. 
-0000d430: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d440: 2020 2020 2020 2064 656c 2070 6c6f 745f         del plot_
-0000d450: 6f70 7469 6f6e 735b 2274 6974 6c65 225d  options["title"]
-0000d460: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000d470: 2020 2020 2020 7365 6c66 2e64 6566 6175        self.defau
-0000d480: 6c74 5f73 7479 6c65 203d 207b 2263 7572  lt_style = {"cur
-0000d490: 736f 7222 3a20 2263 726f 7373 6861 6972  sor": "crosshair
-0000d4a0: 227d 0d0a 2020 2020 2020 2020 2020 2020  "}..            
-0000d4b0: 2020 2020 2020 2020 7365 6c66 2e72 6f69          self.roi
-0000d4c0: 5f65 6e64 203d 2046 616c 7365 0d0a 2020  _end = False..  
-0000d4d0: 2020 2020 2020 2020 2020 2020 2020 6578                ex
-0000d4e0: 6365 7074 2045 7863 6570 7469 6f6e 2061  cept Exception a
-0000d4f0: 7320 653a 0d0a 2020 2020 2020 2020 2020  s e:..          
-0000d500: 2020 2020 2020 2020 2020 6966 2073 656c            if sel
-0000d510: 662e 706c 6f74 5f77 6964 6765 7420 6973  f.plot_widget is
-0000d520: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
-0000d530: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d540: 2020 2020 7769 7468 2073 656c 662e 706c      with self.pl
-0000d550: 6f74 5f77 6964 6765 743a 0d0a 2020 2020  ot_widget:..    
-0000d560: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d570: 2020 2020 2020 2020 7365 6c66 2e70 6c6f          self.plo
-0000d580: 745f 7769 6467 6574 2e63 6c65 6172 5f6f  t_widget.clear_o
-0000d590: 7574 7075 7428 290d 0a20 2020 2020 2020  utput()..       
+0000d180: 2020 2020 2064 6963 745f 7661 6c75 6573       dict_values
+0000d190: 5f74 6d70 203d 2028 0d0a 2020 2020 2020  _tmp = (..      
+0000d1a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d1b0: 2020 2020 2020 6565 5f6f 626a 6563 742e        ee_object.
+0000d1c0: 7361 6d70 6c65 2878 792c 2073 6361 6c65  sample(xy, scale
+0000d1d0: 3d73 616d 706c 655f 7363 616c 6529 0d0a  =sample_scale)..
+0000d1e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d1f0: 2020 2020 2020 2020 2020 2020 2e66 6972              .fir
+0000d200: 7374 2829 0d0a 2020 2020 2020 2020 2020  st()..          
+0000d210: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d220: 2020 2e74 6f44 6963 7469 6f6e 6172 7928    .toDictionary(
+0000d230: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+0000d240: 2020 2020 2020 2020 2020 2020 2020 202e                 .
+0000d250: 6765 7449 6e66 6f28 290d 0a20 2020 2020  getInfo()..     
+0000d260: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d270: 2020 2029 0d0a 2020 2020 2020 2020 2020     )..          
+0000d280: 2020 2020 2020 2020 2020 2020 2020 625f                b_
+0000d290: 6e61 6d65 7320 3d20 6565 5f6f 626a 6563  names = ee_objec
+0000d2a0: 742e 6261 6e64 4e61 6d65 7328 292e 6765  t.bandNames().ge
+0000d2b0: 7449 6e66 6f28 290d 0a20 2020 2020 2020  tInfo()..       
+0000d2c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d2d0: 2064 6963 745f 7661 6c75 6573 203d 2064   dict_values = d
+0000d2e0: 6963 7428 0d0a 2020 2020 2020 2020 2020  ict(..          
+0000d2f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d300: 2020 7a69 7028 625f 6e61 6d65 732c 205b    zip(b_names, [
+0000d310: 6469 6374 5f76 616c 7565 735f 746d 705b  dict_values_tmp[
+0000d320: 625d 2066 6f72 2062 2069 6e20 625f 6e61  b] for b in b_na
+0000d330: 6d65 735d 290d 0a20 2020 2020 2020 2020  mes])..         
+0000d340: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+0000d350: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000d360: 2020 2020 2020 2020 2020 7365 6c66 2e63            self.c
+0000d370: 6861 7274 5f70 6f69 6e74 732e 6170 7065  hart_points.appe
+0000d380: 6e64 2878 792e 636f 6f72 6469 6e61 7465  nd(xy.coordinate
+0000d390: 7328 292e 6765 7449 6e66 6f28 2929 0d0a  s().getInfo())..
+0000d3a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d3b0: 2020 2020 6261 6e64 5f76 616c 7565 7320      band_values 
+0000d3c0: 3d20 6c69 7374 2864 6963 745f 7661 6c75  = list(dict_valu
+0000d3d0: 6573 2e76 616c 7565 7328 2929 0d0a 2020  es.values())..  
+0000d3e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d3f0: 2020 7365 6c66 2e63 6861 7274 5f76 616c    self.chart_val
+0000d400: 7565 732e 6170 7065 6e64 2862 616e 645f  ues.append(band_
+0000d410: 7661 6c75 6573 290d 0a20 2020 2020 2020  values)..       
+0000d420: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+0000d430: 662e 706c 6f74 2862 616e 645f 6e61 6d65  f.plot(band_name
+0000d440: 732c 2062 616e 645f 7661 6c75 6573 2c20  s, band_values, 
+0000d450: 2a2a 706c 6f74 5f6f 7074 696f 6e73 290d  **plot_options).
+0000d460: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000d470: 2020 2020 2069 6620 706c 6f74 5f6f 7074       if plot_opt
+0000d480: 696f 6e73 5b22 7469 746c 6522 5d20 3d3d  ions["title"] ==
+0000d490: 2070 6c6f 745f 6c61 7965 725f 6e61 6d65   plot_layer_name
+0000d4a0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0000d4b0: 2020 2020 2020 2020 2020 2064 656c 2070             del p
+0000d4c0: 6c6f 745f 6f70 7469 6f6e 735b 2274 6974  lot_options["tit
+0000d4d0: 6c65 225d 0d0a 2020 2020 2020 2020 2020  le"]..          
+0000d4e0: 2020 2020 2020 2020 2020 7365 6c66 2e64            self.d
+0000d4f0: 6566 6175 6c74 5f73 7479 6c65 203d 207b  efault_style = {
+0000d500: 2263 7572 736f 7222 3a20 2263 726f 7373  "cursor": "cross
+0000d510: 6861 6972 227d 0d0a 2020 2020 2020 2020  hair"}..        
+0000d520: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0000d530: 2e72 6f69 5f65 6e64 203d 2046 616c 7365  .roi_end = False
+0000d540: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000d550: 2020 6578 6365 7074 2045 7863 6570 7469    except Excepti
+0000d560: 6f6e 2061 7320 653a 0d0a 2020 2020 2020  on as e:..      
+0000d570: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0000d580: 2073 656c 662e 706c 6f74 5f77 6964 6765   self.plot_widge
+0000d590: 7420 6973 206e 6f74 204e 6f6e 653a 0d0a  t is not None:..
 0000d5a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d5b0: 2020 2020 2070 7269 6e74 2822 4e6f 2064       print("No d
-0000d5c0: 6174 6120 666f 7220 7468 6520 636c 6963  ata for the clic
-0000d5d0: 6b65 6420 6c6f 6361 7469 6f6e 2e22 290d  ked location.").
-0000d5e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000d5f0: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
-0000d600: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d610: 2020 2020 7072 696e 7428 6529 0d0a 2020      print(e)..  
-0000d620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d630: 2020 7365 6c66 2e64 6566 6175 6c74 5f73    self.default_s
-0000d640: 7479 6c65 203d 207b 2263 7572 736f 7222  tyle = {"cursor"
-0000d650: 3a20 2263 726f 7373 6861 6972 227d 0d0a  : "crosshair"}..
-0000d660: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d670: 2020 2020 7365 6c66 2e72 6f69 5f65 6e64      self.roi_end
-0000d680: 203d 2046 616c 7365 0d0a 0d0a 2020 2020   = False....    
-0000d690: 2020 2020 7365 6c66 2e6f 6e5f 696e 7465      self.on_inte
-0000d6a0: 7261 6374 696f 6e28 6861 6e64 6c65 5f69  raction(handle_i
-0000d6b0: 6e74 6572 6163 7469 6f6e 290d 0a0d 0a20  nteraction).... 
-0000d6c0: 2020 2064 6566 2073 6574 5f6f 7074 696f     def set_optio
-0000d6d0: 6e73 2873 656c 662c 206d 6170 5479 7065  ns(self, mapType
-0000d6e0: 4964 3d22 4859 4252 4944 222c 2073 7479  Id="HYBRID", sty
-0000d6f0: 6c65 733d 4e6f 6e65 2c20 7479 7065 733d  les=None, types=
-0000d700: 4e6f 6e65 293a 0d0a 2020 2020 2020 2020  None):..        
-0000d710: 2222 2241 6464 7320 476f 6f67 6c65 2062  """Adds Google b
-0000d720: 6173 656d 6170 2061 6e64 2063 6f6e 7472  asemap and contr
-0000d730: 6f6c 7320 746f 2074 6865 2069 7079 6c65  ols to the ipyle
-0000d740: 6166 6c65 7420 6d61 702e 0d0a 0d0a 2020  aflet map.....  
-0000d750: 2020 2020 2020 4172 6773 3a0d 0a20 2020        Args:..   
-0000d760: 2020 2020 2020 2020 206d 6170 5479 7065           mapType
-0000d770: 4964 2028 7374 722c 206f 7074 696f 6e61  Id (str, optiona
-0000d780: 6c29 3a20 4120 6d61 7054 7970 6549 6420  l): A mapTypeId 
-0000d790: 746f 2073 6574 2074 6865 2062 6173 656d  to set the basem
-0000d7a0: 6170 2074 6f2e 2043 616e 2062 6520 6f6e  ap to. Can be on
-0000d7b0: 6520 6f66 2022 524f 4144 4d41 5022 2c20  e of "ROADMAP", 
-0000d7c0: 2253 4154 454c 4c49 5445 222c 2022 4859  "SATELLITE", "HY
-0000d7d0: 4252 4944 2220 6f72 2022 5445 5252 4149  BRID" or "TERRAI
-0000d7e0: 4e22 2074 6f20 7365 6c65 6374 206f 6e65  N" to select one
-0000d7f0: 206f 6620 7468 6520 7374 616e 6461 7264   of the standard
-0000d800: 2047 6f6f 676c 6520 4d61 7073 2041 5049   Google Maps API
-0000d810: 206d 6170 2074 7970 6573 2e20 4465 6661   map types. Defa
-0000d820: 756c 7473 2074 6f20 2748 5942 5249 4427  ults to 'HYBRID'
-0000d830: 2e0d 0a20 2020 2020 2020 2020 2020 2073  ...            s
-0000d840: 7479 6c65 7320 286f 626a 6563 742c 206f  tyles (object, o
-0000d850: 7074 696f 6e61 6c29 3a20 4120 6469 6374  ptional): A dict
-0000d860: 696f 6e61 7279 206f 6620 6375 7374 6f6d  ionary of custom
-0000d870: 204d 6170 5479 7065 5374 796c 6520 6f62   MapTypeStyle ob
-0000d880: 6a65 6374 7320 6b65 7965 6420 7769 7468  jects keyed with
-0000d890: 2061 206e 616d 6520 7468 6174 2077 696c   a name that wil
-0000d8a0: 6c20 6170 7065 6172 2069 6e20 7468 6520  l appear in the 
-0000d8b0: 6d61 7027 7320 4d61 7020 5479 7065 2043  map's Map Type C
-0000d8c0: 6f6e 7472 6f6c 732e 2044 6566 6175 6c74  ontrols. Default
-0000d8d0: 7320 746f 204e 6f6e 652e 0d0a 2020 2020  s to None...    
-0000d8e0: 2020 2020 2020 2020 7479 7065 7320 286c          types (l
-0000d8f0: 6973 742c 206f 7074 696f 6e61 6c29 3a20  ist, optional): 
-0000d900: 4120 6c69 7374 206f 6620 6d61 7054 7970  A list of mapTyp
-0000d910: 6549 6473 2074 6f20 6d61 6b65 2061 7661  eIds to make ava
-0000d920: 696c 6162 6c65 2e20 4966 206f 6d69 7474  ilable. If omitt
-0000d930: 6564 2c20 6275 7420 6f70 745f 7374 796c  ed, but opt_styl
-0000d940: 6573 2069 7320 7370 6563 6966 6965 642c  es is specified,
-0000d950: 2061 7070 656e 6473 2061 6c6c 206f 6620   appends all of 
-0000d960: 7468 6520 7374 796c 6520 6b65 7973 2074  the style keys t
-0000d970: 6f20 7468 6520 7374 616e 6461 7264 2047  o the standard G
-0000d980: 6f6f 676c 6520 4d61 7073 2041 5049 206d  oogle Maps API m
-0000d990: 6170 2074 7970 6573 2e2e 2044 6566 6175  ap types.. Defau
-0000d9a0: 6c74 7320 746f 204e 6f6e 652e 0d0a 2020  lts to None...  
-0000d9b0: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
-0000d9c0: 2020 2073 656c 662e 636c 6561 725f 6c61     self.clear_la
-0000d9d0: 7965 7273 2829 0d0a 2020 2020 2020 2020  yers()..        
-0000d9e0: 7365 6c66 2e63 6c65 6172 5f63 6f6e 7472  self.clear_contr
-0000d9f0: 6f6c 7328 290d 0a20 2020 2020 2020 2073  ols()..        s
-0000da00: 656c 662e 7363 726f 6c6c 5f77 6865 656c  elf.scroll_wheel
-0000da10: 5f7a 6f6f 6d20 3d20 5472 7565 0d0a 2020  _zoom = True..  
-0000da20: 2020 2020 2020 7365 6c66 2e61 6464 5f63        self.add_c
-0000da30: 6f6e 7472 6f6c 2869 7079 6c65 6166 6c65  ontrol(ipyleafle
-0000da40: 742e 5a6f 6f6d 436f 6e74 726f 6c28 706f  t.ZoomControl(po
-0000da50: 7369 7469 6f6e 3d22 746f 706c 6566 7422  sition="topleft"
-0000da60: 2929 0d0a 2020 2020 2020 2020 7365 6c66  ))..        self
-0000da70: 2e61 6464 5f63 6f6e 7472 6f6c 2869 7079  .add_control(ipy
-0000da80: 6c65 6166 6c65 742e 4c61 7965 7273 436f  leaflet.LayersCo
-0000da90: 6e74 726f 6c28 706f 7369 7469 6f6e 3d22  ntrol(position="
-0000daa0: 746f 7072 6967 6874 2229 290d 0a20 2020  topright"))..   
-0000dab0: 2020 2020 2073 656c 662e 6164 645f 636f       self.add_co
-0000dac0: 6e74 726f 6c28 6970 796c 6561 666c 6574  ntrol(ipyleaflet
-0000dad0: 2e53 6361 6c65 436f 6e74 726f 6c28 706f  .ScaleControl(po
-0000dae0: 7369 7469 6f6e 3d22 626f 7474 6f6d 6c65  sition="bottomle
-0000daf0: 6674 2229 290d 0a20 2020 2020 2020 2073  ft"))..        s
-0000db00: 656c 662e 6164 645f 636f 6e74 726f 6c28  elf.add_control(
-0000db10: 6970 796c 6561 666c 6574 2e46 756c 6c53  ipyleaflet.FullS
-0000db20: 6372 6565 6e43 6f6e 7472 6f6c 2829 290d  creenControl()).
-0000db30: 0a20 2020 2020 2020 2073 656c 662e 6164  .        self.ad
-0000db40: 645f 636f 6e74 726f 6c28 6970 796c 6561  d_control(ipylea
-0000db50: 666c 6574 2e44 7261 7743 6f6e 7472 6f6c  flet.DrawControl
-0000db60: 2829 290d 0a0d 0a20 2020 2020 2020 206d  ())....        m
-0000db70: 6561 7375 7265 203d 2069 7079 6c65 6166  easure = ipyleaf
-0000db80: 6c65 742e 4d65 6173 7572 6543 6f6e 7472  let.MeasureContr
-0000db90: 6f6c 280d 0a20 2020 2020 2020 2020 2020  ol(..           
-0000dba0: 2070 6f73 6974 696f 6e3d 2262 6f74 746f   position="botto
-0000dbb0: 6d6c 6566 7422 2c0d 0a20 2020 2020 2020  mleft",..       
-0000dbc0: 2020 2020 2061 6374 6976 655f 636f 6c6f       active_colo
-0000dbd0: 723d 226f 7261 6e67 6522 2c0d 0a20 2020  r="orange",..   
-0000dbe0: 2020 2020 2020 2020 2070 7269 6d61 7279           primary
-0000dbf0: 5f6c 656e 6774 685f 756e 6974 3d22 6b69  _length_unit="ki
-0000dc00: 6c6f 6d65 7465 7273 222c 0d0a 2020 2020  lometers",..    
-0000dc10: 2020 2020 290d 0a20 2020 2020 2020 2073      )..        s
-0000dc20: 656c 662e 6164 645f 636f 6e74 726f 6c28  elf.add_control(
-0000dc30: 6d65 6173 7572 6529 0d0a 0d0a 2020 2020  measure)....    
-0000dc40: 2020 2020 7472 793a 0d0a 2020 2020 2020      try:..      
-0000dc50: 2020 2020 2020 7365 6c66 2e61 6464 5f6c        self.add_l
-0000dc60: 6179 6572 2862 6173 656d 6170 5f74 696c  ayer(basemap_til
-0000dc70: 6573 5b6d 6170 5479 7065 4964 5d29 0d0a  es[mapTypeId])..
-0000dc80: 2020 2020 2020 2020 6578 6365 7074 2045          except E
-0000dc90: 7863 6570 7469 6f6e 3a0d 0a20 2020 2020  xception:..     
-0000dca0: 2020 2020 2020 2072 6169 7365 2056 616c         raise Val
-0000dcb0: 7565 4572 726f 7228 0d0a 2020 2020 2020  ueError(..      
-0000dcc0: 2020 2020 2020 2020 2020 2747 6f6f 676c            'Googl
-0000dcd0: 6520 6261 7365 6d61 7073 2063 616e 206f  e basemaps can o
-0000dce0: 6e6c 7920 6265 206f 6e65 206f 6620 2252  nly be one of "R
-0000dcf0: 4f41 444d 4150 222c 2022 5341 5445 4c4c  OADMAP", "SATELL
-0000dd00: 4954 4522 2c20 2248 5942 5249 4422 206f  ITE", "HYBRID" o
-0000dd10: 7220 2254 4552 5241 494e 222e 270d 0a20  r "TERRAIN".'.. 
-0000dd20: 2020 2020 2020 2020 2020 2029 0d0a 0d0a             )....
-0000dd30: 2020 2020 7365 744f 7074 696f 6e73 203d      setOptions =
-0000dd40: 2073 6574 5f6f 7074 696f 6e73 0d0a 0d0a   set_options....
-0000dd50: 2020 2020 6465 6620 6164 645f 6565 5f6c      def add_ee_l
-0000dd60: 6179 6572 280d 0a20 2020 2020 2020 2073  ayer(..        s
-0000dd70: 656c 662c 2065 655f 6f62 6a65 6374 2c20  elf, ee_object, 
-0000dd80: 7669 735f 7061 7261 6d73 3d7b 7d2c 206e  vis_params={}, n
-0000dd90: 616d 653d 4e6f 6e65 2c20 7368 6f77 6e3d  ame=None, shown=
-0000dda0: 5472 7565 2c20 6f70 6163 6974 793d 312e  True, opacity=1.
-0000ddb0: 300d 0a20 2020 2029 3a0d 0a20 2020 2020  0..    ):..     
-0000ddc0: 2020 2022 2222 4164 6473 2061 2067 6976     """Adds a giv
-0000ddd0: 656e 2045 4520 6f62 6a65 6374 2074 6f20  en EE object to 
-0000dde0: 7468 6520 6d61 7020 6173 2061 206c 6179  the map as a lay
-0000ddf0: 6572 2e0d 0a0d 0a20 2020 2020 2020 2041  er.....        A
-0000de00: 7267 733a 0d0a 2020 2020 2020 2020 2020  rgs:..          
-0000de10: 2020 6565 5f6f 626a 6563 7420 2843 6f6c    ee_object (Col
-0000de20: 6c65 6374 696f 6e7c 4665 6174 7572 657c  lection|Feature|
-0000de30: 496d 6167 657c 4d61 7049 6429 3a20 5468  Image|MapId): Th
-0000de40: 6520 6f62 6a65 6374 2074 6f20 6164 6420  e object to add 
-0000de50: 746f 2074 6865 206d 6170 2e0d 0a20 2020  to the map...   
-0000de60: 2020 2020 2020 2020 2076 6973 5f70 6172           vis_par
-0000de70: 616d 7320 2864 6963 742c 206f 7074 696f  ams (dict, optio
-0000de80: 6e61 6c29 3a20 5468 6520 7669 7375 616c  nal): The visual
-0000de90: 697a 6174 696f 6e20 7061 7261 6d65 7465  ization paramete
-0000dea0: 7273 2e20 4465 6661 756c 7473 2074 6f20  rs. Defaults to 
-0000deb0: 7b7d 2e0d 0a20 2020 2020 2020 2020 2020  {}...           
-0000dec0: 206e 616d 6520 2873 7472 2c20 6f70 7469   name (str, opti
-0000ded0: 6f6e 616c 293a 2054 6865 206e 616d 6520  onal): The name 
-0000dee0: 6f66 2074 6865 206c 6179 6572 2e20 4465  of the layer. De
-0000def0: 6661 756c 7473 2074 6f20 274c 6179 6572  faults to 'Layer
-0000df00: 204e 272e 0d0a 2020 2020 2020 2020 2020   N'...          
-0000df10: 2020 7368 6f77 6e20 2862 6f6f 6c2c 206f    shown (bool, o
-0000df20: 7074 696f 6e61 6c29 3a20 4120 666c 6167  ptional): A flag
-0000df30: 2069 6e64 6963 6174 696e 6720 7768 6574   indicating whet
-0000df40: 6865 7220 7468 6520 6c61 7965 7220 7368  her the layer sh
-0000df50: 6f75 6c64 2062 6520 6f6e 2062 7920 6465  ould be on by de
-0000df60: 6661 756c 742e 2044 6566 6175 6c74 7320  fault. Defaults 
-0000df70: 746f 2054 7275 652e 0d0a 2020 2020 2020  to True...      
-0000df80: 2020 2020 2020 6f70 6163 6974 7920 2866        opacity (f
-0000df90: 6c6f 6174 2c20 6f70 7469 6f6e 616c 293a  loat, optional):
-0000dfa0: 2054 6865 206c 6179 6572 2773 206f 7061   The layer's opa
-0000dfb0: 6369 7479 2072 6570 7265 7365 6e74 6564  city represented
-0000dfc0: 2061 7320 6120 6e75 6d62 6572 2062 6574   as a number bet
-0000dfd0: 7765 656e 2030 2061 6e64 2031 2e20 4465  ween 0 and 1. De
-0000dfe0: 6661 756c 7473 2074 6f20 312e 0d0a 2020  faults to 1...  
-0000dff0: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
-0000e000: 2020 2066 726f 6d20 626f 7820 696d 706f     from box impo
-0000e010: 7274 2042 6f78 0d0a 0d0a 2020 2020 2020  rt Box....      
-0000e020: 2020 696d 6167 6520 3d20 4e6f 6e65 0d0a    image = None..
-0000e030: 2020 2020 2020 2020 6966 206e 616d 6520          if name 
-0000e040: 6973 204e 6f6e 653a 0d0a 2020 2020 2020  is None:..      
-0000e050: 2020 2020 2020 6c61 7965 725f 636f 756e        layer_coun
-0000e060: 7420 3d20 6c65 6e28 7365 6c66 2e6c 6179  t = len(self.lay
-0000e070: 6572 7329 0d0a 2020 2020 2020 2020 2020  ers)..          
-0000e080: 2020 6e61 6d65 203d 2022 4c61 7965 7220    name = "Layer 
-0000e090: 2220 2b20 7374 7228 6c61 7965 725f 636f  " + str(layer_co
-0000e0a0: 756e 7420 2b20 3129 0d0a 0d0a 2020 2020  unt + 1)....    
-0000e0b0: 2020 2020 6966 2028 0d0a 2020 2020 2020      if (..      
-0000e0c0: 2020 2020 2020 6e6f 7420 6973 696e 7374        not isinst
-0000e0d0: 616e 6365 2865 655f 6f62 6a65 6374 2c20  ance(ee_object, 
-0000e0e0: 6565 2e49 6d61 6765 290d 0a20 2020 2020  ee.Image)..     
-0000e0f0: 2020 2020 2020 2061 6e64 206e 6f74 2069         and not i
-0000e100: 7369 6e73 7461 6e63 6528 6565 5f6f 626a  sinstance(ee_obj
-0000e110: 6563 742c 2065 652e 496d 6167 6543 6f6c  ect, ee.ImageCol
-0000e120: 6c65 6374 696f 6e29 0d0a 2020 2020 2020  lection)..      
-0000e130: 2020 2020 2020 616e 6420 6e6f 7420 6973        and not is
+0000d5b0: 2020 2020 2020 2020 7769 7468 2073 656c          with sel
+0000d5c0: 662e 706c 6f74 5f77 6964 6765 743a 0d0a  f.plot_widget:..
+0000d5d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d5e0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0000d5f0: 2e70 6c6f 745f 7769 6467 6574 2e63 6c65  .plot_widget.cle
+0000d600: 6172 5f6f 7574 7075 7428 290d 0a20 2020  ar_output()..   
+0000d610: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d620: 2020 2020 2020 2020 2070 7269 6e74 2822           print("
+0000d630: 4e6f 2064 6174 6120 666f 7220 7468 6520  No data for the 
+0000d640: 636c 6963 6b65 6420 6c6f 6361 7469 6f6e  clicked location
+0000d650: 2e22 290d 0a20 2020 2020 2020 2020 2020  .")..           
+0000d660: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
+0000d670: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d680: 2020 2020 2020 2020 7072 696e 7428 6529          print(e)
+0000d690: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000d6a0: 2020 2020 2020 7365 6c66 2e64 6566 6175        self.defau
+0000d6b0: 6c74 5f73 7479 6c65 203d 207b 2263 7572  lt_style = {"cur
+0000d6c0: 736f 7222 3a20 2263 726f 7373 6861 6972  sor": "crosshair
+0000d6d0: 227d 0d0a 2020 2020 2020 2020 2020 2020  "}..            
+0000d6e0: 2020 2020 2020 2020 7365 6c66 2e72 6f69          self.roi
+0000d6f0: 5f65 6e64 203d 2046 616c 7365 0d0a 0d0a  _end = False....
+0000d700: 2020 2020 2020 2020 7365 6c66 2e6f 6e5f          self.on_
+0000d710: 696e 7465 7261 6374 696f 6e28 6861 6e64  interaction(hand
+0000d720: 6c65 5f69 6e74 6572 6163 7469 6f6e 290d  le_interaction).
+0000d730: 0a0d 0a20 2020 2064 6566 2073 6574 5f6f  ...    def set_o
+0000d740: 7074 696f 6e73 2873 656c 662c 206d 6170  ptions(self, map
+0000d750: 5479 7065 4964 3d22 4859 4252 4944 222c  TypeId="HYBRID",
+0000d760: 2073 7479 6c65 733d 4e6f 6e65 2c20 7479   styles=None, ty
+0000d770: 7065 733d 4e6f 6e65 293a 0d0a 2020 2020  pes=None):..    
+0000d780: 2020 2020 2222 2241 6464 7320 476f 6f67      """Adds Goog
+0000d790: 6c65 2062 6173 656d 6170 2061 6e64 2063  le basemap and c
+0000d7a0: 6f6e 7472 6f6c 7320 746f 2074 6865 2069  ontrols to the i
+0000d7b0: 7079 6c65 6166 6c65 7420 6d61 702e 0d0a  pyleaflet map...
+0000d7c0: 0d0a 2020 2020 2020 2020 4172 6773 3a0d  ..        Args:.
+0000d7d0: 0a20 2020 2020 2020 2020 2020 206d 6170  .            map
+0000d7e0: 5479 7065 4964 2028 7374 722c 206f 7074  TypeId (str, opt
+0000d7f0: 696f 6e61 6c29 3a20 4120 6d61 7054 7970  ional): A mapTyp
+0000d800: 6549 6420 746f 2073 6574 2074 6865 2062  eId to set the b
+0000d810: 6173 656d 6170 2074 6f2e 2043 616e 2062  asemap to. Can b
+0000d820: 6520 6f6e 6520 6f66 2022 524f 4144 4d41  e one of "ROADMA
+0000d830: 5022 2c20 2253 4154 454c 4c49 5445 222c  P", "SATELLITE",
+0000d840: 2022 4859 4252 4944 2220 6f72 2022 5445   "HYBRID" or "TE
+0000d850: 5252 4149 4e22 2074 6f20 7365 6c65 6374  RRAIN" to select
+0000d860: 206f 6e65 206f 6620 7468 6520 7374 616e   one of the stan
+0000d870: 6461 7264 2047 6f6f 676c 6520 4d61 7073  dard Google Maps
+0000d880: 2041 5049 206d 6170 2074 7970 6573 2e20   API map types. 
+0000d890: 4465 6661 756c 7473 2074 6f20 2748 5942  Defaults to 'HYB
+0000d8a0: 5249 4427 2e0d 0a20 2020 2020 2020 2020  RID'...         
+0000d8b0: 2020 2073 7479 6c65 7320 286f 626a 6563     styles (objec
+0000d8c0: 742c 206f 7074 696f 6e61 6c29 3a20 4120  t, optional): A 
+0000d8d0: 6469 6374 696f 6e61 7279 206f 6620 6375  dictionary of cu
+0000d8e0: 7374 6f6d 204d 6170 5479 7065 5374 796c  stom MapTypeStyl
+0000d8f0: 6520 6f62 6a65 6374 7320 6b65 7965 6420  e objects keyed 
+0000d900: 7769 7468 2061 206e 616d 6520 7468 6174  with a name that
+0000d910: 2077 696c 6c20 6170 7065 6172 2069 6e20   will appear in 
+0000d920: 7468 6520 6d61 7027 7320 4d61 7020 5479  the map's Map Ty
+0000d930: 7065 2043 6f6e 7472 6f6c 732e 2044 6566  pe Controls. Def
+0000d940: 6175 6c74 7320 746f 204e 6f6e 652e 0d0a  aults to None...
+0000d950: 2020 2020 2020 2020 2020 2020 7479 7065              type
+0000d960: 7320 286c 6973 742c 206f 7074 696f 6e61  s (list, optiona
+0000d970: 6c29 3a20 4120 6c69 7374 206f 6620 6d61  l): A list of ma
+0000d980: 7054 7970 6549 6473 2074 6f20 6d61 6b65  pTypeIds to make
+0000d990: 2061 7661 696c 6162 6c65 2e20 4966 206f   available. If o
+0000d9a0: 6d69 7474 6564 2c20 6275 7420 6f70 745f  mitted, but opt_
+0000d9b0: 7374 796c 6573 2069 7320 7370 6563 6966  styles is specif
+0000d9c0: 6965 642c 2061 7070 656e 6473 2061 6c6c  ied, appends all
+0000d9d0: 206f 6620 7468 6520 7374 796c 6520 6b65   of the style ke
+0000d9e0: 7973 2074 6f20 7468 6520 7374 616e 6461  ys to the standa
+0000d9f0: 7264 2047 6f6f 676c 6520 4d61 7073 2041  rd Google Maps A
+0000da00: 5049 206d 6170 2074 7970 6573 2e2e 2044  PI map types.. D
+0000da10: 6566 6175 6c74 7320 746f 204e 6f6e 652e  efaults to None.
+0000da20: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+0000da30: 2020 2020 2020 2073 656c 662e 636c 6561         self.clea
+0000da40: 725f 6c61 7965 7273 2829 0d0a 2020 2020  r_layers()..    
+0000da50: 2020 2020 7365 6c66 2e63 6c65 6172 5f63      self.clear_c
+0000da60: 6f6e 7472 6f6c 7328 290d 0a20 2020 2020  ontrols()..     
+0000da70: 2020 2073 656c 662e 7363 726f 6c6c 5f77     self.scroll_w
+0000da80: 6865 656c 5f7a 6f6f 6d20 3d20 5472 7565  heel_zoom = True
+0000da90: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
+0000daa0: 6464 5f63 6f6e 7472 6f6c 2869 7079 6c65  dd_control(ipyle
+0000dab0: 6166 6c65 742e 5a6f 6f6d 436f 6e74 726f  aflet.ZoomContro
+0000dac0: 6c28 706f 7369 7469 6f6e 3d22 746f 706c  l(position="topl
+0000dad0: 6566 7422 2929 0d0a 2020 2020 2020 2020  eft"))..        
+0000dae0: 7365 6c66 2e61 6464 5f63 6f6e 7472 6f6c  self.add_control
+0000daf0: 2869 7079 6c65 6166 6c65 742e 4c61 7965  (ipyleaflet.Laye
+0000db00: 7273 436f 6e74 726f 6c28 706f 7369 7469  rsControl(positi
+0000db10: 6f6e 3d22 746f 7072 6967 6874 2229 290d  on="topright")).
+0000db20: 0a20 2020 2020 2020 2073 656c 662e 6164  .        self.ad
+0000db30: 645f 636f 6e74 726f 6c28 6970 796c 6561  d_control(ipylea
+0000db40: 666c 6574 2e53 6361 6c65 436f 6e74 726f  flet.ScaleContro
+0000db50: 6c28 706f 7369 7469 6f6e 3d22 626f 7474  l(position="bott
+0000db60: 6f6d 6c65 6674 2229 290d 0a20 2020 2020  omleft"))..     
+0000db70: 2020 2073 656c 662e 6164 645f 636f 6e74     self.add_cont
+0000db80: 726f 6c28 6970 796c 6561 666c 6574 2e46  rol(ipyleaflet.F
+0000db90: 756c 6c53 6372 6565 6e43 6f6e 7472 6f6c  ullScreenControl
+0000dba0: 2829 290d 0a20 2020 2020 2020 2073 656c  ())..        sel
+0000dbb0: 662e 6164 645f 636f 6e74 726f 6c28 6970  f.add_control(ip
+0000dbc0: 796c 6561 666c 6574 2e44 7261 7743 6f6e  yleaflet.DrawCon
+0000dbd0: 7472 6f6c 2829 290d 0a0d 0a20 2020 2020  trol())....     
+0000dbe0: 2020 206d 6561 7375 7265 203d 2069 7079     measure = ipy
+0000dbf0: 6c65 6166 6c65 742e 4d65 6173 7572 6543  leaflet.MeasureC
+0000dc00: 6f6e 7472 6f6c 280d 0a20 2020 2020 2020  ontrol(..       
+0000dc10: 2020 2020 2070 6f73 6974 696f 6e3d 2262       position="b
+0000dc20: 6f74 746f 6d6c 6566 7422 2c0d 0a20 2020  ottomleft",..   
+0000dc30: 2020 2020 2020 2020 2061 6374 6976 655f           active_
+0000dc40: 636f 6c6f 723d 226f 7261 6e67 6522 2c0d  color="orange",.
+0000dc50: 0a20 2020 2020 2020 2020 2020 2070 7269  .            pri
+0000dc60: 6d61 7279 5f6c 656e 6774 685f 756e 6974  mary_length_unit
+0000dc70: 3d22 6b69 6c6f 6d65 7465 7273 222c 0d0a  ="kilometers",..
+0000dc80: 2020 2020 2020 2020 290d 0a20 2020 2020          )..     
+0000dc90: 2020 2073 656c 662e 6164 645f 636f 6e74     self.add_cont
+0000dca0: 726f 6c28 6d65 6173 7572 6529 0d0a 0d0a  rol(measure)....
+0000dcb0: 2020 2020 2020 2020 7472 793a 0d0a 2020          try:..  
+0000dcc0: 2020 2020 2020 2020 2020 7365 6c66 2e61            self.a
+0000dcd0: 6464 5f6c 6179 6572 2862 6173 656d 6170  dd_layer(basemap
+0000dce0: 5f74 696c 6573 5b6d 6170 5479 7065 4964  _tiles[mapTypeId
+0000dcf0: 5d29 0d0a 2020 2020 2020 2020 6578 6365  ])..        exce
+0000dd00: 7074 2045 7863 6570 7469 6f6e 3a0d 0a20  pt Exception:.. 
+0000dd10: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+0000dd20: 2056 616c 7565 4572 726f 7228 0d0a 2020   ValueError(..  
+0000dd30: 2020 2020 2020 2020 2020 2020 2020 2747                'G
+0000dd40: 6f6f 676c 6520 6261 7365 6d61 7073 2063  oogle basemaps c
+0000dd50: 616e 206f 6e6c 7920 6265 206f 6e65 206f  an only be one o
+0000dd60: 6620 2252 4f41 444d 4150 222c 2022 5341  f "ROADMAP", "SA
+0000dd70: 5445 4c4c 4954 4522 2c20 2248 5942 5249  TELLITE", "HYBRI
+0000dd80: 4422 206f 7220 2254 4552 5241 494e 222e  D" or "TERRAIN".
+0000dd90: 270d 0a20 2020 2020 2020 2020 2020 2029  '..            )
+0000dda0: 0d0a 0d0a 2020 2020 7365 744f 7074 696f  ....    setOptio
+0000ddb0: 6e73 203d 2073 6574 5f6f 7074 696f 6e73  ns = set_options
+0000ddc0: 0d0a 0d0a 2020 2020 6465 6620 6164 645f  ....    def add_
+0000ddd0: 6565 5f6c 6179 6572 280d 0a20 2020 2020  ee_layer(..     
+0000dde0: 2020 2073 656c 662c 2065 655f 6f62 6a65     self, ee_obje
+0000ddf0: 6374 2c20 7669 735f 7061 7261 6d73 3d7b  ct, vis_params={
+0000de00: 7d2c 206e 616d 653d 4e6f 6e65 2c20 7368  }, name=None, sh
+0000de10: 6f77 6e3d 5472 7565 2c20 6f70 6163 6974  own=True, opacit
+0000de20: 793d 312e 300d 0a20 2020 2029 3a0d 0a20  y=1.0..    ):.. 
+0000de30: 2020 2020 2020 2022 2222 4164 6473 2061         """Adds a
+0000de40: 2067 6976 656e 2045 4520 6f62 6a65 6374   given EE object
+0000de50: 2074 6f20 7468 6520 6d61 7020 6173 2061   to the map as a
+0000de60: 206c 6179 6572 2e0d 0a0d 0a20 2020 2020   layer.....     
+0000de70: 2020 2041 7267 733a 0d0a 2020 2020 2020     Args:..      
+0000de80: 2020 2020 2020 6565 5f6f 626a 6563 7420        ee_object 
+0000de90: 2843 6f6c 6c65 6374 696f 6e7c 4665 6174  (Collection|Feat
+0000dea0: 7572 657c 496d 6167 657c 4d61 7049 6429  ure|Image|MapId)
+0000deb0: 3a20 5468 6520 6f62 6a65 6374 2074 6f20  : The object to 
+0000dec0: 6164 6420 746f 2074 6865 206d 6170 2e0d  add to the map..
+0000ded0: 0a20 2020 2020 2020 2020 2020 2076 6973  .            vis
+0000dee0: 5f70 6172 616d 7320 2864 6963 742c 206f  _params (dict, o
+0000def0: 7074 696f 6e61 6c29 3a20 5468 6520 7669  ptional): The vi
+0000df00: 7375 616c 697a 6174 696f 6e20 7061 7261  sualization para
+0000df10: 6d65 7465 7273 2e20 4465 6661 756c 7473  meters. Defaults
+0000df20: 2074 6f20 7b7d 2e0d 0a20 2020 2020 2020   to {}...       
+0000df30: 2020 2020 206e 616d 6520 2873 7472 2c20       name (str, 
+0000df40: 6f70 7469 6f6e 616c 293a 2054 6865 206e  optional): The n
+0000df50: 616d 6520 6f66 2074 6865 206c 6179 6572  ame of the layer
+0000df60: 2e20 4465 6661 756c 7473 2074 6f20 274c  . Defaults to 'L
+0000df70: 6179 6572 204e 272e 0d0a 2020 2020 2020  ayer N'...      
+0000df80: 2020 2020 2020 7368 6f77 6e20 2862 6f6f        shown (boo
+0000df90: 6c2c 206f 7074 696f 6e61 6c29 3a20 4120  l, optional): A 
+0000dfa0: 666c 6167 2069 6e64 6963 6174 696e 6720  flag indicating 
+0000dfb0: 7768 6574 6865 7220 7468 6520 6c61 7965  whether the laye
+0000dfc0: 7220 7368 6f75 6c64 2062 6520 6f6e 2062  r should be on b
+0000dfd0: 7920 6465 6661 756c 742e 2044 6566 6175  y default. Defau
+0000dfe0: 6c74 7320 746f 2054 7275 652e 0d0a 2020  lts to True...  
+0000dff0: 2020 2020 2020 2020 2020 6f70 6163 6974            opacit
+0000e000: 7920 2866 6c6f 6174 2c20 6f70 7469 6f6e  y (float, option
+0000e010: 616c 293a 2054 6865 206c 6179 6572 2773  al): The layer's
+0000e020: 206f 7061 6369 7479 2072 6570 7265 7365   opacity represe
+0000e030: 6e74 6564 2061 7320 6120 6e75 6d62 6572  nted as a number
+0000e040: 2062 6574 7765 656e 2030 2061 6e64 2031   between 0 and 1
+0000e050: 2e20 4465 6661 756c 7473 2074 6f20 312e  . Defaults to 1.
+0000e060: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+0000e070: 2020 2020 2020 2066 726f 6d20 626f 7820         from box 
+0000e080: 696d 706f 7274 2042 6f78 0d0a 0d0a 2020  import Box....  
+0000e090: 2020 2020 2020 696d 6167 6520 3d20 4e6f        image = No
+0000e0a0: 6e65 0d0a 2020 2020 2020 2020 6966 206e  ne..        if n
+0000e0b0: 616d 6520 6973 204e 6f6e 653a 0d0a 2020  ame is None:..  
+0000e0c0: 2020 2020 2020 2020 2020 6c61 7965 725f            layer_
+0000e0d0: 636f 756e 7420 3d20 6c65 6e28 7365 6c66  count = len(self
+0000e0e0: 2e6c 6179 6572 7329 0d0a 2020 2020 2020  .layers)..      
+0000e0f0: 2020 2020 2020 6e61 6d65 203d 2022 4c61        name = "La
+0000e100: 7965 7220 2220 2b20 7374 7228 6c61 7965  yer " + str(laye
+0000e110: 725f 636f 756e 7420 2b20 3129 0d0a 0d0a  r_count + 1)....
+0000e120: 2020 2020 2020 2020 6966 2028 0d0a 2020          if (..  
+0000e130: 2020 2020 2020 2020 2020 6e6f 7420 6973            not is
 0000e140: 696e 7374 616e 6365 2865 655f 6f62 6a65  instance(ee_obje
-0000e150: 6374 2c20 6565 2e46 6561 7475 7265 436f  ct, ee.FeatureCo
-0000e160: 6c6c 6563 7469 6f6e 290d 0a20 2020 2020  llection)..     
-0000e170: 2020 2020 2020 2061 6e64 206e 6f74 2069         and not i
-0000e180: 7369 6e73 7461 6e63 6528 6565 5f6f 626a  sinstance(ee_obj
-0000e190: 6563 742c 2065 652e 4665 6174 7572 6529  ect, ee.Feature)
-0000e1a0: 0d0a 2020 2020 2020 2020 2020 2020 616e  ..            an
-0000e1b0: 6420 6e6f 7420 6973 696e 7374 616e 6365  d not isinstance
-0000e1c0: 2865 655f 6f62 6a65 6374 2c20 6565 2e47  (ee_object, ee.G
-0000e1d0: 656f 6d65 7472 7929 0d0a 2020 2020 2020  eometry)..      
-0000e1e0: 2020 293a 0d0a 2020 2020 2020 2020 2020    ):..          
-0000e1f0: 2020 6572 725f 7374 7220 3d20 225c 6e5c    err_str = "\n\
-0000e200: 6e54 6865 2069 6d61 6765 2061 7267 756d  nThe image argum
-0000e210: 656e 7420 696e 2027 6164 644c 6179 6572  ent in 'addLayer
-0000e220: 2720 6675 6e63 7469 6f6e 206d 7573 7420  ' function must 
-0000e230: 6265 2061 6e20 696e 7374 616e 6365 206f  be an instance o
-0000e240: 6620 6f6e 6520 6f66 2065 652e 496d 6167  f one of ee.Imag
-0000e250: 652c 2065 652e 4765 6f6d 6574 7279 2c20  e, ee.Geometry, 
-0000e260: 6565 2e46 6561 7475 7265 206f 7220 6565  ee.Feature or ee
-0000e270: 2e46 6561 7475 7265 436f 6c6c 6563 7469  .FeatureCollecti
-0000e280: 6f6e 2e22 0d0a 2020 2020 2020 2020 2020  on."..          
-0000e290: 2020 7261 6973 6520 4174 7472 6962 7574    raise Attribut
-0000e2a0: 6545 7272 6f72 2865 7272 5f73 7472 290d  eError(err_str).
-0000e2b0: 0a0d 0a20 2020 2020 2020 2069 6620 280d  ...        if (.
-0000e2c0: 0a20 2020 2020 2020 2020 2020 2069 7369  .            isi
-0000e2d0: 6e73 7461 6e63 6528 6565 5f6f 626a 6563  nstance(ee_objec
-0000e2e0: 742c 2065 652e 6765 6f6d 6574 7279 2e47  t, ee.geometry.G
-0000e2f0: 656f 6d65 7472 7929 0d0a 2020 2020 2020  eometry)..      
-0000e300: 2020 2020 2020 6f72 2069 7369 6e73 7461        or isinsta
-0000e310: 6e63 6528 6565 5f6f 626a 6563 742c 2065  nce(ee_object, e
-0000e320: 652e 6665 6174 7572 652e 4665 6174 7572  e.feature.Featur
-0000e330: 6529 0d0a 2020 2020 2020 2020 2020 2020  e)..            
-0000e340: 6f72 2069 7369 6e73 7461 6e63 6528 6565  or isinstance(ee
-0000e350: 5f6f 626a 6563 742c 2065 652e 6665 6174  _object, ee.feat
-0000e360: 7572 6563 6f6c 6c65 6374 696f 6e2e 4665  urecollection.Fe
-0000e370: 6174 7572 6543 6f6c 6c65 6374 696f 6e29  atureCollection)
-0000e380: 0d0a 2020 2020 2020 2020 293a 0d0a 2020  ..        ):..  
-0000e390: 2020 2020 2020 2020 2020 6665 6174 7572            featur
-0000e3a0: 6573 203d 2065 652e 4665 6174 7572 6543  es = ee.FeatureC
-0000e3b0: 6f6c 6c65 6374 696f 6e28 6565 5f6f 626a  ollection(ee_obj
-0000e3c0: 6563 7429 0d0a 0d0a 2020 2020 2020 2020  ect)....        
-0000e3d0: 2020 2020 7769 6474 6820 3d20 320d 0a0d      width = 2...
-0000e3e0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0000e3f0: 2277 6964 7468 2220 696e 2076 6973 5f70  "width" in vis_p
-0000e400: 6172 616d 733a 0d0a 2020 2020 2020 2020  arams:..        
-0000e410: 2020 2020 2020 2020 7769 6474 6820 3d20          width = 
-0000e420: 7669 735f 7061 7261 6d73 5b22 7769 6474  vis_params["widt
-0000e430: 6822 5d0d 0a0d 0a20 2020 2020 2020 2020  h"]....         
-0000e440: 2020 2063 6f6c 6f72 203d 2022 3030 3030     color = "0000
-0000e450: 3030 220d 0a0d 0a20 2020 2020 2020 2020  00"....         
-0000e460: 2020 2069 6620 2263 6f6c 6f72 2220 696e     if "color" in
-0000e470: 2076 6973 5f70 6172 616d 733a 0d0a 2020   vis_params:..  
-0000e480: 2020 2020 2020 2020 2020 2020 2020 636f                co
-0000e490: 6c6f 7220 3d20 7669 735f 7061 7261 6d73  lor = vis_params
-0000e4a0: 5b22 636f 6c6f 7222 5d0d 0a0d 0a20 2020  ["color"]....   
-0000e4b0: 2020 2020 2020 2020 2069 6d61 6765 5f66           image_f
-0000e4c0: 696c 6c20 3d20 6665 6174 7572 6573 2e73  ill = features.s
-0000e4d0: 7479 6c65 282a 2a7b 2266 696c 6c43 6f6c  tyle(**{"fillCol
-0000e4e0: 6f72 223a 2063 6f6c 6f72 7d29 2e75 7064  or": color}).upd
-0000e4f0: 6174 654d 6173 6b28 0d0a 2020 2020 2020  ateMask(..      
-0000e500: 2020 2020 2020 2020 2020 6565 2e49 6d61            ee.Ima
-0000e510: 6765 2e63 6f6e 7374 616e 7428 302e 3529  ge.constant(0.5)
-0000e520: 0d0a 2020 2020 2020 2020 2020 2020 290d  ..            ).
-0000e530: 0a20 2020 2020 2020 2020 2020 2069 6d61  .            ima
-0000e540: 6765 5f6f 7574 6c69 6e65 203d 2066 6561  ge_outline = fea
-0000e550: 7475 7265 732e 7374 796c 6528 0d0a 2020  tures.style(..  
-0000e560: 2020 2020 2020 2020 2020 2020 2020 2a2a                **
-0000e570: 7b22 636f 6c6f 7222 3a20 636f 6c6f 722c  {"color": color,
-0000e580: 2022 6669 6c6c 436f 6c6f 7222 3a20 2230   "fillColor": "0
-0000e590: 3030 3030 3030 3022 2c20 2277 6964 7468  0000000", "width
-0000e5a0: 223a 2077 6964 7468 7d0d 0a20 2020 2020  ": width}..     
-0000e5b0: 2020 2020 2020 2029 0d0a 0d0a 2020 2020         )....    
-0000e5c0: 2020 2020 2020 2020 696d 6167 6520 3d20          image = 
-0000e5d0: 696d 6167 655f 6669 6c6c 2e62 6c65 6e64  image_fill.blend
-0000e5e0: 2869 6d61 6765 5f6f 7574 6c69 6e65 290d  (image_outline).
-0000e5f0: 0a20 2020 2020 2020 2065 6c69 6620 6973  .        elif is
-0000e600: 696e 7374 616e 6365 2865 655f 6f62 6a65  instance(ee_obje
-0000e610: 6374 2c20 6565 2e69 6d61 6765 2e49 6d61  ct, ee.image.Ima
-0000e620: 6765 293a 0d0a 2020 2020 2020 2020 2020  ge):..          
-0000e630: 2020 696d 6167 6520 3d20 6565 5f6f 626a    image = ee_obj
-0000e640: 6563 740d 0a20 2020 2020 2020 2065 6c69  ect..        eli
-0000e650: 6620 6973 696e 7374 616e 6365 2865 655f  f isinstance(ee_
-0000e660: 6f62 6a65 6374 2c20 6565 2e69 6d61 6765  object, ee.image
-0000e670: 636f 6c6c 6563 7469 6f6e 2e49 6d61 6765  collection.Image
-0000e680: 436f 6c6c 6563 7469 6f6e 293a 0d0a 2020  Collection):..  
-0000e690: 2020 2020 2020 2020 2020 696d 6167 6520            image 
-0000e6a0: 3d20 6565 5f6f 626a 6563 742e 6d6f 7361  = ee_object.mosa
-0000e6b0: 6963 2829 0d0a 0d0a 2020 2020 2020 2020  ic()....        
-0000e6c0: 6966 2022 7061 6c65 7474 6522 2069 6e20  if "palette" in 
-0000e6d0: 7669 735f 7061 7261 6d73 2061 6e64 2069  vis_params and i
-0000e6e0: 7369 6e73 7461 6e63 6528 7669 735f 7061  sinstance(vis_pa
-0000e6f0: 7261 6d73 5b22 7061 6c65 7474 6522 5d2c  rams["palette"],
-0000e700: 2042 6f78 293a 0d0a 2020 2020 2020 2020   Box):..        
-0000e710: 2020 2020 7472 793a 0d0a 2020 2020 2020      try:..      
-0000e720: 2020 2020 2020 2020 2020 7669 735f 7061            vis_pa
-0000e730: 7261 6d73 5b22 7061 6c65 7474 6522 5d20  rams["palette"] 
-0000e740: 3d20 7669 735f 7061 7261 6d73 5b22 7061  = vis_params["pa
-0000e750: 6c65 7474 6522 5d5b 2264 6566 6175 6c74  lette"]["default
-0000e760: 225d 0d0a 2020 2020 2020 2020 2020 2020  "]..            
-0000e770: 6578 6365 7074 2045 7863 6570 7469 6f6e  except Exception
-0000e780: 2061 7320 653a 0d0a 2020 2020 2020 2020   as e:..        
-0000e790: 2020 2020 2020 2020 7072 696e 7428 2254          print("T
-0000e7a0: 6865 2070 726f 7669 6465 6420 7061 6c65  he provided pale
-0000e7b0: 7474 6520 6973 2069 6e76 616c 6964 2e22  tte is invalid."
-0000e7c0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-0000e7d0: 2020 2072 6169 7365 2045 7863 6570 7469     raise Excepti
-0000e7e0: 6f6e 2865 290d 0a0d 0a20 2020 2020 2020  on(e)....       
-0000e7f0: 206d 6170 5f69 645f 6469 6374 203d 2065   map_id_dict = e
-0000e800: 652e 496d 6167 6528 696d 6167 6529 2e67  e.Image(image).g
-0000e810: 6574 4d61 7049 6428 7669 735f 7061 7261  etMapId(vis_para
-0000e820: 6d73 290d 0a20 2020 2020 2020 2074 696c  ms)..        til
-0000e830: 655f 6c61 7965 7220 3d20 6970 796c 6561  e_layer = ipylea
-0000e840: 666c 6574 2e54 696c 654c 6179 6572 280d  flet.TileLayer(.
-0000e850: 0a20 2020 2020 2020 2020 2020 2075 726c  .            url
-0000e860: 3d6d 6170 5f69 645f 6469 6374 5b22 7469  =map_id_dict["ti
-0000e870: 6c65 5f66 6574 6368 6572 225d 2e75 726c  le_fetcher"].url
-0000e880: 5f66 6f72 6d61 742c 0d0a 2020 2020 2020  _format,..      
-0000e890: 2020 2020 2020 6174 7472 6962 7574 696f        attributio
-0000e8a0: 6e3d 2247 6f6f 676c 6520 4561 7274 6820  n="Google Earth 
-0000e8b0: 456e 6769 6e65 222c 0d0a 2020 2020 2020  Engine",..      
-0000e8c0: 2020 2020 2020 6e61 6d65 3d6e 616d 652c        name=name,
-0000e8d0: 0d0a 2020 2020 2020 2020 2020 2020 6f70  ..            op
-0000e8e0: 6163 6974 793d 6f70 6163 6974 792c 0d0a  acity=opacity,..
-0000e8f0: 2020 2020 2020 2020 2020 2020 7669 7369              visi
-0000e900: 626c 653d 7368 6f77 6e2c 0d0a 2020 2020  ble=shown,..    
-0000e910: 2020 2020 290d 0a0d 0a20 2020 2020 2020      )....       
-0000e920: 206c 6179 6572 203d 2073 656c 662e 6669   layer = self.fi
-0000e930: 6e64 5f6c 6179 6572 286e 616d 653d 6e61  nd_layer(name=na
-0000e940: 6d65 290d 0a20 2020 2020 2020 2069 6620  me)..        if 
-0000e950: 6c61 7965 7220 6973 206e 6f74 204e 6f6e  layer is not Non
-0000e960: 653a 0d0a 0d0a 2020 2020 2020 2020 2020  e:....          
-0000e970: 2020 6578 6973 7469 6e67 5f6f 626a 6563    existing_objec
-0000e980: 7420 3d20 7365 6c66 2e65 655f 6c61 7965  t = self.ee_laye
-0000e990: 725f 6469 6374 5b6e 616d 655d 5b22 6565  r_dict[name]["ee
-0000e9a0: 5f6f 626a 6563 7422 5d0d 0a0d 0a20 2020  _object"]....   
-0000e9b0: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
-0000e9c0: 7374 616e 6365 2865 7869 7374 696e 675f  stance(existing_
-0000e9d0: 6f62 6a65 6374 2c20 6565 2e49 6d61 6765  object, ee.Image
-0000e9e0: 2920 6f72 2069 7369 6e73 7461 6e63 6528  ) or isinstance(
-0000e9f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000ea00: 2020 6578 6973 7469 6e67 5f6f 626a 6563    existing_objec
-0000ea10: 742c 2065 652e 496d 6167 6543 6f6c 6c65  t, ee.ImageColle
-0000ea20: 6374 696f 6e0d 0a20 2020 2020 2020 2020  ction..         
-0000ea30: 2020 2029 3a0d 0a20 2020 2020 2020 2020     ):..         
-0000ea40: 2020 2020 2020 2073 656c 662e 6565 5f72         self.ee_r
-0000ea50: 6173 7465 725f 6c61 7965 7273 2e72 656d  aster_layers.rem
-0000ea60: 6f76 6528 6578 6973 7469 6e67 5f6f 626a  ove(existing_obj
-0000ea70: 6563 7429 0d0a 2020 2020 2020 2020 2020  ect)..          
-0000ea80: 2020 2020 2020 7365 6c66 2e65 655f 7261        self.ee_ra
-0000ea90: 7374 6572 5f6c 6179 6572 5f6e 616d 6573  ster_layer_names
-0000eaa0: 2e72 656d 6f76 6528 6e61 6d65 290d 0a20  .remove(name).. 
-0000eab0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0000eac0: 6620 7365 6c66 2e70 6c6f 745f 6472 6f70  f self.plot_drop
-0000ead0: 646f 776e 5f77 6964 6765 7420 6973 206e  down_widget is n
-0000eae0: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
-0000eaf0: 2020 2020 2020 2020 2020 2020 2020 7365                se
-0000eb00: 6c66 2e70 6c6f 745f 6472 6f70 646f 776e  lf.plot_dropdown
-0000eb10: 5f77 6964 6765 742e 6f70 7469 6f6e 7320  _widget.options 
-0000eb20: 3d20 6c69 7374 2873 656c 662e 6565 5f72  = list(self.ee_r
-0000eb30: 6173 7465 725f 6c61 7965 725f 6e61 6d65  aster_layer_name
-0000eb40: 7329 0d0a 2020 2020 2020 2020 2020 2020  s)..            
-0000eb50: 656c 6966 2028 0d0a 2020 2020 2020 2020  elif (..        
-0000eb60: 2020 2020 2020 2020 6973 696e 7374 616e          isinstan
-0000eb70: 6365 2865 655f 6f62 6a65 6374 2c20 6565  ce(ee_object, ee
-0000eb80: 2e47 656f 6d65 7472 7929 0d0a 2020 2020  .Geometry)..    
-0000eb90: 2020 2020 2020 2020 2020 2020 6f72 2069              or i
-0000eba0: 7369 6e73 7461 6e63 6528 6565 5f6f 626a  sinstance(ee_obj
-0000ebb0: 6563 742c 2065 652e 4665 6174 7572 6529  ect, ee.Feature)
-0000ebc0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000ebd0: 2020 6f72 2069 7369 6e73 7461 6e63 6528    or isinstance(
-0000ebe0: 6565 5f6f 626a 6563 742c 2065 652e 4665  ee_object, ee.Fe
-0000ebf0: 6174 7572 6543 6f6c 6c65 6374 696f 6e29  atureCollection)
-0000ec00: 0d0a 2020 2020 2020 2020 2020 2020 293a  ..            ):
-0000ec10: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000ec20: 2020 7365 6c66 2e65 655f 7665 6374 6f72    self.ee_vector
-0000ec30: 5f6c 6179 6572 732e 7265 6d6f 7665 2865  _layers.remove(e
-0000ec40: 7869 7374 696e 675f 6f62 6a65 6374 290d  xisting_object).
-0000ec50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000ec60: 2073 656c 662e 6565 5f76 6563 746f 725f   self.ee_vector_
-0000ec70: 6c61 7965 725f 6e61 6d65 732e 7265 6d6f  layer_names.remo
-0000ec80: 7665 286e 616d 6529 0d0a 0d0a 2020 2020  ve(name)....    
-0000ec90: 2020 2020 2020 2020 7365 6c66 2e65 655f          self.ee_
-0000eca0: 6c61 7965 7273 2e72 656d 6f76 6528 6578  layers.remove(ex
-0000ecb0: 6973 7469 6e67 5f6f 626a 6563 7429 0d0a  isting_object)..
-0000ecc0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0000ecd0: 2e65 655f 6c61 7965 725f 6e61 6d65 732e  .ee_layer_names.
-0000ece0: 7265 6d6f 7665 286e 616d 6529 0d0a 2020  remove(name)..  
-0000ecf0: 2020 2020 2020 2020 2020 7365 6c66 2e72            self.r
-0000ed00: 656d 6f76 655f 6c61 7965 7228 6c61 7965  emove_layer(laye
-0000ed10: 7229 0d0a 0d0a 2020 2020 2020 2020 7365  r)....        se
-0000ed20: 6c66 2e65 655f 6c61 7965 7273 2e61 7070  lf.ee_layers.app
-0000ed30: 656e 6428 6565 5f6f 626a 6563 7429 0d0a  end(ee_object)..
-0000ed40: 2020 2020 2020 2020 6966 206e 616d 6520          if name 
-0000ed50: 6e6f 7420 696e 2073 656c 662e 6565 5f6c  not in self.ee_l
-0000ed60: 6179 6572 5f6e 616d 6573 3a0d 0a20 2020  ayer_names:..   
-0000ed70: 2020 2020 2020 2020 2073 656c 662e 6565           self.ee
-0000ed80: 5f6c 6179 6572 5f6e 616d 6573 2e61 7070  _layer_names.app
-0000ed90: 656e 6428 6e61 6d65 290d 0a20 2020 2020  end(name)..     
-0000eda0: 2020 2073 656c 662e 6565 5f6c 6179 6572     self.ee_layer
-0000edb0: 5f64 6963 745b 6e61 6d65 5d20 3d20 7b0d  _dict[name] = {.
-0000edc0: 0a20 2020 2020 2020 2020 2020 2022 6565  .            "ee
-0000edd0: 5f6f 626a 6563 7422 3a20 6565 5f6f 626a  _object": ee_obj
-0000ede0: 6563 742c 0d0a 2020 2020 2020 2020 2020  ect,..          
-0000edf0: 2020 2265 655f 6c61 7965 7222 3a20 7469    "ee_layer": ti
-0000ee00: 6c65 5f6c 6179 6572 2c0d 0a20 2020 2020  le_layer,..     
-0000ee10: 2020 2020 2020 2022 7669 735f 7061 7261         "vis_para
-0000ee20: 6d73 223a 2076 6973 5f70 6172 616d 732c  ms": vis_params,
-0000ee30: 0d0a 2020 2020 2020 2020 7d0d 0a0d 0a20  ..        }.... 
-0000ee40: 2020 2020 2020 2073 656c 662e 6164 645f         self.add_
-0000ee50: 6c61 7965 7228 7469 6c65 5f6c 6179 6572  layer(tile_layer
-0000ee60: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-0000ee70: 6c61 7374 5f65 655f 6c61 7965 7220 3d20  last_ee_layer = 
-0000ee80: 7365 6c66 2e65 655f 6c61 7965 725f 6469  self.ee_layer_di
-0000ee90: 6374 5b6e 616d 655d 0d0a 2020 2020 2020  ct[name]..      
-0000eea0: 2020 7365 6c66 2e6c 6173 745f 6565 5f64    self.last_ee_d
-0000eeb0: 6174 6120 3d20 7365 6c66 2e65 655f 6c61  ata = self.ee_la
-0000eec0: 7965 725f 6469 6374 5b6e 616d 655d 5b22  yer_dict[name]["
-0000eed0: 6565 5f6f 626a 6563 7422 5d0d 0a0d 0a20  ee_object"].... 
-0000eee0: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-0000eef0: 616e 6365 2865 655f 6f62 6a65 6374 2c20  ance(ee_object, 
-0000ef00: 6565 2e49 6d61 6765 2920 6f72 2069 7369  ee.Image) or isi
-0000ef10: 6e73 7461 6e63 6528 6565 5f6f 626a 6563  nstance(ee_objec
-0000ef20: 742c 2065 652e 496d 6167 6543 6f6c 6c65  t, ee.ImageColle
-0000ef30: 6374 696f 6e29 3a0d 0a20 2020 2020 2020  ction):..       
-0000ef40: 2020 2020 2073 656c 662e 6565 5f72 6173       self.ee_ras
-0000ef50: 7465 725f 6c61 7965 7273 2e61 7070 656e  ter_layers.appen
-0000ef60: 6428 6565 5f6f 626a 6563 7429 0d0a 2020  d(ee_object)..  
-0000ef70: 2020 2020 2020 2020 2020 7365 6c66 2e65            self.e
-0000ef80: 655f 7261 7374 6572 5f6c 6179 6572 5f6e  e_raster_layer_n
-0000ef90: 616d 6573 2e61 7070 656e 6428 6e61 6d65  ames.append(name
-0000efa0: 290d 0a20 2020 2020 2020 2020 2020 2069  )..            i
-0000efb0: 6620 7365 6c66 2e70 6c6f 745f 6472 6f70  f self.plot_drop
-0000efc0: 646f 776e 5f77 6964 6765 7420 6973 206e  down_widget is n
-0000efd0: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
-0000efe0: 2020 2020 2020 2020 2020 7365 6c66 2e70            self.p
-0000eff0: 6c6f 745f 6472 6f70 646f 776e 5f77 6964  lot_dropdown_wid
-0000f000: 6765 742e 6f70 7469 6f6e 7320 3d20 6c69  get.options = li
-0000f010: 7374 2873 656c 662e 6565 5f72 6173 7465  st(self.ee_raste
-0000f020: 725f 6c61 7965 725f 6e61 6d65 7329 0d0a  r_layer_names)..
-0000f030: 2020 2020 2020 2020 656c 6966 2028 0d0a          elif (..
-0000f040: 2020 2020 2020 2020 2020 2020 6973 696e              isin
-0000f050: 7374 616e 6365 2865 655f 6f62 6a65 6374  stance(ee_object
-0000f060: 2c20 6565 2e47 656f 6d65 7472 7929 0d0a  , ee.Geometry)..
-0000f070: 2020 2020 2020 2020 2020 2020 6f72 2069              or i
-0000f080: 7369 6e73 7461 6e63 6528 6565 5f6f 626a  sinstance(ee_obj
-0000f090: 6563 742c 2065 652e 4665 6174 7572 6529  ect, ee.Feature)
-0000f0a0: 0d0a 2020 2020 2020 2020 2020 2020 6f72  ..            or
-0000f0b0: 2069 7369 6e73 7461 6e63 6528 6565 5f6f   isinstance(ee_o
-0000f0c0: 626a 6563 742c 2065 652e 4665 6174 7572  bject, ee.Featur
-0000f0d0: 6543 6f6c 6c65 6374 696f 6e29 0d0a 2020  eCollection)..  
-0000f0e0: 2020 2020 2020 293a 0d0a 2020 2020 2020        ):..      
-0000f0f0: 2020 2020 2020 7365 6c66 2e65 655f 7665        self.ee_ve
-0000f100: 6374 6f72 5f6c 6179 6572 732e 6170 7065  ctor_layers.appe
-0000f110: 6e64 2865 655f 6f62 6a65 6374 290d 0a20  nd(ee_object).. 
-0000f120: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0000f130: 6565 5f76 6563 746f 725f 6c61 7965 725f  ee_vector_layer_
-0000f140: 6e61 6d65 732e 6170 7065 6e64 286e 616d  names.append(nam
-0000f150: 6529 0d0a 0d0a 2020 2020 6164 644c 6179  e)....    addLay
-0000f160: 6572 203d 2061 6464 5f65 655f 6c61 7965  er = add_ee_laye
-0000f170: 720d 0a0d 0a20 2020 2064 6566 2072 656d  r....    def rem
-0000f180: 6f76 655f 6565 5f6c 6179 6572 2873 656c  ove_ee_layer(sel
-0000f190: 662c 206e 616d 6529 3a0d 0a20 2020 2020  f, name):..     
-0000f1a0: 2020 2022 2222 5265 6d6f 7665 7320 616e     """Removes an
-0000f1b0: 2045 6172 7468 2045 6e67 696e 6520 6c61   Earth Engine la
-0000f1c0: 7965 722e 0d0a 0d0a 2020 2020 2020 2020  yer.....        
-0000f1d0: 4172 6773 3a0d 0a20 2020 2020 2020 2020  Args:..         
-0000f1e0: 2020 206e 616d 6520 2873 7472 293a 2054     name (str): T
-0000f1f0: 6865 206e 616d 6520 6f66 2074 6865 2045  he name of the E
-0000f200: 6172 7468 2045 6e67 696e 6520 6c61 7965  arth Engine laye
-0000f210: 7220 746f 2072 656d 6f76 652e 0d0a 2020  r to remove...  
-0000f220: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
-0000f230: 2020 2069 6620 6e61 6d65 2069 6e20 7365     if name in se
-0000f240: 6c66 2e65 655f 6c61 7965 725f 6469 6374  lf.ee_layer_dict
-0000f250: 3a0d 0a20 2020 2020 2020 2020 2020 2065  :..            e
-0000f260: 655f 6f62 6a65 6374 203d 2073 656c 662e  e_object = self.
-0000f270: 6565 5f6c 6179 6572 5f64 6963 745b 6e61  ee_layer_dict[na
-0000f280: 6d65 5d5b 2265 655f 6f62 6a65 6374 225d  me]["ee_object"]
-0000f290: 0d0a 2020 2020 2020 2020 2020 2020 6565  ..            ee
-0000f2a0: 5f6c 6179 6572 203d 2073 656c 662e 6565  _layer = self.ee
-0000f2b0: 5f6c 6179 6572 5f64 6963 745b 6e61 6d65  _layer_dict[name
-0000f2c0: 5d5b 2265 655f 6c61 7965 7222 5d0d 0a20  ]["ee_layer"].. 
-0000f2d0: 2020 2020 2020 2020 2020 2069 6620 6e61             if na
-0000f2e0: 6d65 2069 6e20 7365 6c66 2e65 655f 7261  me in self.ee_ra
-0000f2f0: 7374 6572 5f6c 6179 6572 5f6e 616d 6573  ster_layer_names
-0000f300: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-0000f310: 2020 2073 656c 662e 6565 5f72 6173 7465     self.ee_raste
-0000f320: 725f 6c61 7965 725f 6e61 6d65 732e 7265  r_layer_names.re
-0000f330: 6d6f 7665 286e 616d 6529 0d0a 2020 2020  move(name)..    
-0000f340: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0000f350: 2e65 655f 7261 7374 6572 5f6c 6179 6572  .ee_raster_layer
-0000f360: 732e 7265 6d6f 7665 2865 655f 6f62 6a65  s.remove(ee_obje
-0000f370: 6374 290d 0a20 2020 2020 2020 2020 2020  ct)..           
-0000f380: 2065 6c69 6620 6e61 6d65 2069 6e20 7365   elif name in se
-0000f390: 6c66 2e65 655f 7665 6374 6f72 5f6c 6179  lf.ee_vector_lay
-0000f3a0: 6572 5f6e 616d 6573 3a0d 0a20 2020 2020  er_names:..     
-0000f3b0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0000f3c0: 6565 5f76 6563 746f 725f 6c61 7965 725f  ee_vector_layer_
-0000f3d0: 6e61 6d65 732e 7265 6d6f 7665 286e 616d  names.remove(nam
-0000f3e0: 6529 0d0a 2020 2020 2020 2020 2020 2020  e)..            
-0000f3f0: 2020 2020 7365 6c66 2e65 655f 7665 6374      self.ee_vect
-0000f400: 6f72 5f6c 6179 6572 732e 7265 6d6f 7665  or_layers.remove
-0000f410: 2865 655f 6f62 6a65 6374 290d 0a20 2020  (ee_object)..   
-0000f420: 2020 2020 2020 2020 2073 656c 662e 6565           self.ee
-0000f430: 5f6c 6179 6572 732e 7265 6d6f 7665 2865  _layers.remove(e
-0000f440: 655f 6f62 6a65 6374 290d 0a20 2020 2020  e_object)..     
-0000f450: 2020 2020 2020 2073 656c 662e 6565 5f6c         self.ee_l
-0000f460: 6179 6572 5f6e 616d 6573 2e72 656d 6f76  ayer_names.remov
-0000f470: 6528 6e61 6d65 290d 0a20 2020 2020 2020  e(name)..       
-0000f480: 2020 2020 2069 6620 6565 5f6c 6179 6572       if ee_layer
-0000f490: 2069 6e20 7365 6c66 2e6c 6179 6572 733a   in self.layers:
-0000f4a0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000f4b0: 2020 7365 6c66 2e72 656d 6f76 655f 6c61    self.remove_la
-0000f4c0: 7965 7228 6565 5f6c 6179 6572 290d 0a0d  yer(ee_layer)...
-0000f4d0: 0a20 2020 2064 6566 2064 7261 775f 6c61  .    def draw_la
-0000f4e0: 7965 725f 6f6e 5f74 6f70 2873 656c 6629  yer_on_top(self)
-0000f4f0: 3a0d 0a20 2020 2020 2020 2022 2222 4d6f  :..        """Mo
-0000f500: 7665 2075 7365 722d 6472 6177 6e20 6665  ve user-drawn fe
-0000f510: 6174 7572 6520 6c61 7965 7220 746f 2074  ature layer to t
-0000f520: 6865 2074 6f70 206f 6620 616c 6c20 6c61  he top of all la
-0000f530: 7965 7273 2e22 2222 0d0a 2020 2020 2020  yers."""..      
-0000f540: 2020 6472 6177 5f6c 6179 6572 5f69 6e64    draw_layer_ind
-0000f550: 6578 203d 2073 656c 662e 6669 6e64 5f6c  ex = self.find_l
-0000f560: 6179 6572 5f69 6e64 6578 286e 616d 653d  ayer_index(name=
-0000f570: 2244 7261 776e 2046 6561 7475 7265 7322  "Drawn Features"
-0000f580: 290d 0a20 2020 2020 2020 2069 6620 6472  )..        if dr
-0000f590: 6177 5f6c 6179 6572 5f69 6e64 6578 203e  aw_layer_index >
-0000f5a0: 202d 3120 616e 6420 6472 6177 5f6c 6179   -1 and draw_lay
-0000f5b0: 6572 5f69 6e64 6578 203c 2028 6c65 6e28  er_index < (len(
-0000f5c0: 7365 6c66 2e6c 6179 6572 7329 202d 2031  self.layers) - 1
-0000f5d0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-0000f5e0: 6c61 7965 7273 203d 206c 6973 7428 7365  layers = list(se
-0000f5f0: 6c66 2e6c 6179 6572 7329 0d0a 2020 2020  lf.layers)..    
-0000f600: 2020 2020 2020 2020 6c61 7965 7273 203d          layers =
-0000f610: 2028 0d0a 2020 2020 2020 2020 2020 2020   (..            
-0000f620: 2020 2020 6c61 7965 7273 5b30 3a64 7261      layers[0:dra
-0000f630: 775f 6c61 7965 725f 696e 6465 785d 0d0a  w_layer_index]..
-0000f640: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f650: 2b20 6c61 7965 7273 5b28 6472 6177 5f6c  + layers[(draw_l
-0000f660: 6179 6572 5f69 6e64 6578 202b 2031 2920  ayer_index + 1) 
-0000f670: 3a5d 0d0a 2020 2020 2020 2020 2020 2020  :]..            
-0000f680: 2020 2020 2b20 5b6c 6179 6572 735b 6472      + [layers[dr
-0000f690: 6177 5f6c 6179 6572 5f69 6e64 6578 5d5d  aw_layer_index]]
-0000f6a0: 0d0a 2020 2020 2020 2020 2020 2020 290d  ..            ).
-0000f6b0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-0000f6c0: 662e 6c61 7965 7273 203d 206c 6179 6572  f.layers = layer
-0000f6d0: 730d 0a0d 0a20 2020 2064 6566 2073 6574  s....    def set
-0000f6e0: 5f63 656e 7465 7228 7365 6c66 2c20 6c6f  _center(self, lo
-0000f6f0: 6e2c 206c 6174 2c20 7a6f 6f6d 3d4e 6f6e  n, lat, zoom=Non
-0000f700: 6529 3a0d 0a20 2020 2020 2020 2022 2222  e):..        """
-0000f710: 4365 6e74 6572 7320 7468 6520 6d61 7020  Centers the map 
-0000f720: 7669 6577 2061 7420 6120 6769 7665 6e20  view at a given 
-0000f730: 636f 6f72 6469 6e61 7465 7320 7769 7468  coordinates with
-0000f740: 2074 6865 2067 6976 656e 207a 6f6f 6d20   the given zoom 
-0000f750: 6c65 7665 6c2e 0d0a 0d0a 2020 2020 2020  level.....      
-0000f760: 2020 4172 6773 3a0d 0a20 2020 2020 2020    Args:..       
-0000f770: 2020 2020 206c 6f6e 2028 666c 6f61 7429       lon (float)
-0000f780: 3a20 5468 6520 6c6f 6e67 6974 7564 6520  : The longitude 
-0000f790: 6f66 2074 6865 2063 656e 7465 722c 2069  of the center, i
-0000f7a0: 6e20 6465 6772 6565 732e 0d0a 2020 2020  n degrees...    
-0000f7b0: 2020 2020 2020 2020 6c61 7420 2866 6c6f          lat (flo
-0000f7c0: 6174 293a 2054 6865 206c 6174 6974 7564  at): The latitud
-0000f7d0: 6520 6f66 2074 6865 2063 656e 7465 722c  e of the center,
-0000f7e0: 2069 6e20 6465 6772 6565 732e 0d0a 2020   in degrees...  
-0000f7f0: 2020 2020 2020 2020 2020 7a6f 6f6d 2028            zoom (
-0000f800: 696e 742c 206f 7074 696f 6e61 6c29 3a20  int, optional): 
-0000f810: 5468 6520 7a6f 6f6d 206c 6576 656c 2c20  The zoom level, 
-0000f820: 6672 6f6d 2031 2074 6f20 3234 2e20 4465  from 1 to 24. De
-0000f830: 6661 756c 7473 2074 6f20 4e6f 6e65 2e0d  faults to None..
-0000f840: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
-0000f850: 2020 2020 2020 7365 6c66 2e63 656e 7465        self.cente
-0000f860: 7220 3d20 286c 6174 2c20 6c6f 6e29 0d0a  r = (lat, lon)..
-0000f870: 2020 2020 2020 2020 6966 207a 6f6f 6d20          if zoom 
-0000f880: 6973 206e 6f74 204e 6f6e 653a 0d0a 2020  is not None:..  
-0000f890: 2020 2020 2020 2020 2020 7365 6c66 2e7a            self.z
-0000f8a0: 6f6f 6d20 3d20 7a6f 6f6d 0d0a 0d0a 2020  oom = zoom....  
-0000f8b0: 2020 7365 7443 656e 7465 7220 3d20 7365    setCenter = se
-0000f8c0: 745f 6365 6e74 6572 0d0a 0d0a 2020 2020  t_center....    
-0000f8d0: 6465 6620 6365 6e74 6572 5f6f 626a 6563  def center_objec
-0000f8e0: 7428 7365 6c66 2c20 6565 5f6f 626a 6563  t(self, ee_objec
-0000f8f0: 742c 207a 6f6f 6d3d 4e6f 6e65 293a 0d0a  t, zoom=None):..
-0000f900: 2020 2020 2020 2020 2222 2243 656e 7465          """Cente
-0000f910: 7273 2074 6865 206d 6170 2076 6965 7720  rs the map view 
-0000f920: 6f6e 2061 2067 6976 656e 206f 626a 6563  on a given objec
-0000f930: 742e 0d0a 0d0a 2020 2020 2020 2020 4172  t.....        Ar
-0000f940: 6773 3a0d 0a20 2020 2020 2020 2020 2020  gs:..           
-0000f950: 2065 655f 6f62 6a65 6374 2028 456c 656d   ee_object (Elem
-0000f960: 656e 747c 4765 6f6d 6574 7279 293a 2041  ent|Geometry): A
-0000f970: 6e20 4561 7274 6820 456e 6769 6e65 206f  n Earth Engine o
-0000f980: 626a 6563 7420 746f 2063 656e 7465 7220  bject to center 
-0000f990: 6f6e 2061 2067 656f 6d65 7472 792c 2069  on a geometry, i
-0000f9a0: 6d61 6765 206f 7220 6665 6174 7572 652e  mage or feature.
-0000f9b0: 0d0a 2020 2020 2020 2020 2020 2020 7a6f  ..            zo
-0000f9c0: 6f6d 2028 696e 742c 206f 7074 696f 6e61  om (int, optiona
-0000f9d0: 6c29 3a20 5468 6520 7a6f 6f6d 206c 6576  l): The zoom lev
-0000f9e0: 656c 2c20 6672 6f6d 2031 2074 6f20 3234  el, from 1 to 24
-0000f9f0: 2e20 4465 6661 756c 7473 2074 6f20 4e6f  . Defaults to No
-0000fa00: 6e65 2e0d 0a20 2020 2020 2020 2022 2222  ne...        """
-0000fa10: 0d0a 2020 2020 2020 2020 6966 207a 6f6f  ..        if zoo
-0000fa20: 6d20 6973 204e 6f6e 6520 616e 6420 6861  m is None and ha
-0000fa30: 7361 7474 7228 7365 6c66 2c20 2266 6974  sattr(self, "fit
-0000fa40: 5f62 6f75 6e64 7322 293a 0d0a 2020 2020  _bounds"):..    
-0000fa50: 2020 2020 2020 2020 7365 6c66 2e7a 6f6f          self.zoo
-0000fa60: 6d5f 746f 5f6f 626a 6563 7428 6565 5f6f  m_to_object(ee_o
-0000fa70: 626a 6563 7429 0d0a 2020 2020 2020 2020  bject)..        
-0000fa80: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
-0000fa90: 2020 206c 6174 203d 2030 0d0a 2020 2020     lat = 0..    
-0000faa0: 2020 2020 2020 2020 6c6f 6e20 3d20 300d          lon = 0.
-0000fab0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0000fac0: 6973 696e 7374 616e 6365 2865 655f 6f62  isinstance(ee_ob
-0000fad0: 6a65 6374 2c20 6565 2e67 656f 6d65 7472  ject, ee.geometr
-0000fae0: 792e 4765 6f6d 6574 7279 293a 0d0a 2020  y.Geometry):..  
-0000faf0: 2020 2020 2020 2020 2020 2020 2020 6365                ce
-0000fb00: 6e74 726f 6964 203d 2065 655f 6f62 6a65  ntroid = ee_obje
-0000fb10: 6374 2e63 656e 7472 6f69 6428 3129 0d0a  ct.centroid(1)..
-0000fb20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fb30: 6c6f 6e2c 206c 6174 203d 2063 656e 7472  lon, lat = centr
-0000fb40: 6f69 642e 6765 7449 6e66 6f28 295b 2263  oid.getInfo()["c
-0000fb50: 6f6f 7264 696e 6174 6573 225d 0d0a 2020  oordinates"]..  
-0000fb60: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
-0000fb70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000fb80: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
-0000fb90: 2020 2020 2020 2020 2020 2063 656e 7472             centr
-0000fba0: 6f69 6420 3d20 6565 5f6f 626a 6563 742e  oid = ee_object.
-0000fbb0: 6765 6f6d 6574 7279 2829 2e63 656e 7472  geometry().centr
-0000fbc0: 6f69 6428 3129 0d0a 2020 2020 2020 2020  oid(1)..        
-0000fbd0: 2020 2020 2020 2020 2020 2020 6c6f 6e2c              lon,
-0000fbe0: 206c 6174 203d 2063 656e 7472 6f69 642e   lat = centroid.
-0000fbf0: 6765 7449 6e66 6f28 295b 2263 6f6f 7264  getInfo()["coord
-0000fc00: 696e 6174 6573 225d 0d0a 2020 2020 2020  inates"]..      
-0000fc10: 2020 2020 2020 2020 2020 6578 6365 7074            except
-0000fc20: 2045 7863 6570 7469 6f6e 2061 7320 653a   Exception as e:
-0000fc30: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000fc40: 2020 2020 2020 7072 696e 7428 6529 0d0a        print(e)..
-0000fc50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fc60: 2020 2020 7261 6973 6520 4578 6365 7074      raise Except
-0000fc70: 696f 6e28 6529 0d0a 0d0a 2020 2020 2020  ion(e)....      
-0000fc80: 2020 2020 2020 7365 6c66 2e73 6574 4365        self.setCe
-0000fc90: 6e74 6572 286c 6f6e 2c20 6c61 742c 207a  nter(lon, lat, z
-0000fca0: 6f6f 6d29 0d0a 0d0a 2020 2020 6365 6e74  oom)....    cent
-0000fcb0: 6572 4f62 6a65 6374 203d 2063 656e 7465  erObject = cente
-0000fcc0: 725f 6f62 6a65 6374 0d0a 0d0a 2020 2020  r_object....    
-0000fcd0: 6465 6620 7a6f 6f6d 5f74 6f5f 6f62 6a65  def zoom_to_obje
-0000fce0: 6374 2873 656c 662c 2065 655f 6f62 6a65  ct(self, ee_obje
-0000fcf0: 6374 293a 0d0a 2020 2020 2020 2020 2222  ct):..        ""
-0000fd00: 225a 6f6f 6d20 746f 2074 6865 2066 756c  "Zoom to the ful
-0000fd10: 6c20 6578 7465 6e74 206f 6620 616e 2045  l extent of an E
-0000fd20: 6172 7468 2045 6e67 696e 6520 6f62 6a65  arth Engine obje
-0000fd30: 6374 2e0d 0a0d 0a20 2020 2020 2020 2041  ct.....        A
-0000fd40: 7267 733a 0d0a 2020 2020 2020 2020 2020  rgs:..          
-0000fd50: 2020 6565 5f6f 626a 6563 7420 286f 626a    ee_object (obj
-0000fd60: 6563 7429 3a20 416e 2045 6172 7468 2045  ect): An Earth E
-0000fd70: 6e67 696e 6520 6f62 6a65 6374 2c20 7375  ngine object, su
-0000fd80: 6368 2061 7320 496d 6167 652c 2049 6d61  ch as Image, Ima
-0000fd90: 6765 436f 6c6c 6563 7469 6f6e 2c20 4765  geCollection, Ge
-0000fda0: 6f6d 6574 7279 2c20 4665 6174 7572 652c  ometry, Feature,
-0000fdb0: 2046 6561 7475 7265 436f 6c6c 6563 7469   FeatureCollecti
-0000fdc0: 6f6e 2e0d 0a0d 0a20 2020 2020 2020 2052  on.....        R
-0000fdd0: 6169 7365 733a 0d0a 2020 2020 2020 2020  aises:..        
-0000fde0: 2020 2020 4578 6365 7074 696f 6e3a 2045      Exception: E
-0000fdf0: 7272 6f72 2067 6574 7469 6e67 2067 656f  rror getting geo
-0000fe00: 6d65 7472 792e 0d0a 2020 2020 2020 2020  metry...        
-0000fe10: 2222 220d 0a20 2020 2020 2020 2063 6f6f  """..        coo
-0000fe20: 7264 696e 6174 6573 203d 204e 6f6e 650d  rdinates = None.
-0000fe30: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
-0000fe40: 7374 616e 6365 2865 655f 6f62 6a65 6374  stance(ee_object
-0000fe50: 2c20 6565 2e67 656f 6d65 7472 792e 4765  , ee.geometry.Ge
-0000fe60: 6f6d 6574 7279 293a 0d0a 2020 2020 2020  ometry):..      
-0000fe70: 2020 2020 2020 626f 756e 6473 203d 2065        bounds = e
-0000fe80: 655f 6f62 6a65 6374 2e62 6f75 6e64 7328  e_object.bounds(
-0000fe90: 290d 0a20 2020 2020 2020 2020 2020 2063  )..            c
-0000fea0: 6f6f 7264 696e 6174 6573 203d 2062 6f75  oordinates = bou
-0000feb0: 6e64 732e 6765 7449 6e66 6f28 295b 2263  nds.getInfo()["c
-0000fec0: 6f6f 7264 696e 6174 6573 225d 5b30 5d0d  oordinates"][0].
-0000fed0: 0a0d 0a20 2020 2020 2020 2065 6c73 653a  ...        else:
-0000fee0: 0d0a 2020 2020 2020 2020 2020 2020 7472  ..            tr
-0000fef0: 793a 0d0a 2020 2020 2020 2020 2020 2020  y:..            
-0000ff00: 2020 2020 626f 756e 6473 203d 2065 655f      bounds = ee_
-0000ff10: 6f62 6a65 6374 2e67 656f 6d65 7472 7928  object.geometry(
-0000ff20: 292e 626f 756e 6473 2829 0d0a 2020 2020  ).bounds()..    
-0000ff30: 2020 2020 2020 2020 2020 2020 636f 6f72              coor
-0000ff40: 6469 6e61 7465 7320 3d20 626f 756e 6473  dinates = bounds
-0000ff50: 2e67 6574 496e 666f 2829 5b22 636f 6f72  .getInfo()["coor
-0000ff60: 6469 6e61 7465 7322 5d5b 305d 0d0a 0d0a  dinates"][0]....
-0000ff70: 2020 2020 2020 2020 2020 2020 6578 6365              exce
-0000ff80: 7074 2045 7863 6570 7469 6f6e 2061 7320  pt Exception as 
-0000ff90: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-0000ffa0: 2020 2020 7072 696e 7428 6529 0d0a 2020      print(e)..  
-0000ffb0: 2020 2020 2020 2020 2020 2020 2020 7261                ra
-0000ffc0: 6973 6520 4578 6365 7074 696f 6e28 6529  ise Exception(e)
-0000ffd0: 0d0a 0d0a 2020 2020 2020 2020 6966 2063  ....        if c
-0000ffe0: 6f6f 7264 696e 6174 6573 2069 7320 6e6f  oordinates is no
-0000fff0: 7420 4e6f 6e65 3a0d 0a20 2020 2020 2020  t None:..       
-00010000: 2020 2020 2073 6f75 7468 203d 2063 6f6f       south = coo
-00010010: 7264 696e 6174 6573 5b30 5d5b 315d 0d0a  rdinates[0][1]..
-00010020: 2020 2020 2020 2020 2020 2020 7765 7374              west
-00010030: 203d 2063 6f6f 7264 696e 6174 6573 5b30   = coordinates[0
-00010040: 5d5b 305d 0d0a 2020 2020 2020 2020 2020  ][0]..          
-00010050: 2020 6e6f 7274 6820 3d20 636f 6f72 6469    north = coordi
-00010060: 6e61 7465 735b 325d 5b31 5d0d 0a20 2020  nates[2][1]..   
-00010070: 2020 2020 2020 2020 2065 6173 7420 3d20           east = 
-00010080: 636f 6f72 6469 6e61 7465 735b 325d 5b30  coordinates[2][0
-00010090: 5d0d 0a20 2020 2020 2020 2020 2020 2073  ]..            s
-000100a0: 656c 662e 6669 745f 626f 756e 6473 285b  elf.fit_bounds([
-000100b0: 5b73 6f75 7468 2c20 6561 7374 5d2c 205b  [south, east], [
-000100c0: 6e6f 7274 682c 2077 6573 745d 5d29 0d0a  north, west]])..
-000100d0: 0d0a 2020 2020 7a6f 6f6d 546f 4f62 6a65  ..    zoomToObje
-000100e0: 6374 203d 207a 6f6f 6d5f 746f 5f6f 626a  ct = zoom_to_obj
-000100f0: 6563 740d 0a0d 0a20 2020 2064 6566 207a  ect....    def z
-00010100: 6f6f 6d5f 746f 5f6d 6528 7365 6c66 2c20  oom_to_me(self, 
-00010110: 7a6f 6f6d 3d31 342c 2061 6464 5f6d 6172  zoom=14, add_mar
-00010120: 6b65 723d 5472 7565 293a 0d0a 2020 2020  ker=True):..    
-00010130: 2020 2020 2222 225a 6f6f 6d20 746f 2074      """Zoom to t
-00010140: 6865 2063 7572 7265 6e74 2064 6576 6963  he current devic
-00010150: 6520 6c6f 6361 7469 6f6e 2e0d 0a0d 0a20  e location..... 
-00010160: 2020 2020 2020 2041 7267 733a 0d0a 2020         Args:..  
-00010170: 2020 2020 2020 2020 2020 7a6f 6f6d 2028            zoom (
-00010180: 696e 742c 206f 7074 696f 6e61 6c29 3a20  int, optional): 
-00010190: 5a6f 6f6d 206c 6576 656c 2e20 4465 6661  Zoom level. Defa
-000101a0: 756c 7473 2074 6f20 3134 2e0d 0a20 2020  ults to 14...   
-000101b0: 2020 2020 2020 2020 2061 6464 5f6d 6172           add_mar
-000101c0: 6b65 7220 2862 6f6f 6c2c 206f 7074 696f  ker (bool, optio
-000101d0: 6e61 6c29 3a20 5768 6574 6865 7220 746f  nal): Whether to
-000101e0: 2061 6464 2061 206d 6172 6b65 7220 6f66   add a marker of
-000101f0: 2074 6865 2063 7572 7265 6e74 2064 6576   the current dev
-00010200: 6963 6520 6c6f 6361 7469 6f6e 2e20 4465  ice location. De
-00010210: 6661 756c 7473 2074 6f20 5472 7565 2e0d  faults to True..
-00010220: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
-00010230: 2020 2020 2020 6c61 742c 206c 6f6e 203d        lat, lon =
-00010240: 2067 6574 5f63 7572 7265 6e74 5f6c 6174   get_current_lat
-00010250: 6c6f 6e28 290d 0a20 2020 2020 2020 2073  lon()..        s
-00010260: 656c 662e 7365 745f 6365 6e74 6572 286c  elf.set_center(l
-00010270: 6f6e 2c20 6c61 742c 207a 6f6f 6d29 0d0a  on, lat, zoom)..
-00010280: 0d0a 2020 2020 2020 2020 6966 2061 6464  ..        if add
-00010290: 5f6d 6172 6b65 723a 0d0a 2020 2020 2020  _marker:..      
-000102a0: 2020 2020 2020 6d61 726b 6572 203d 2069        marker = i
-000102b0: 7079 6c65 6166 6c65 742e 4d61 726b 6572  pyleaflet.Marker
-000102c0: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
-000102d0: 2020 206c 6f63 6174 696f 6e3d 286c 6174     location=(lat
-000102e0: 2c20 6c6f 6e29 2c0d 0a20 2020 2020 2020  , lon),..       
-000102f0: 2020 2020 2020 2020 2064 7261 6767 6162           draggab
-00010300: 6c65 3d46 616c 7365 2c0d 0a20 2020 2020  le=False,..     
-00010310: 2020 2020 2020 2020 2020 206e 616d 653d             name=
-00010320: 2244 6576 6963 6520 6c6f 6361 7469 6f6e  "Device location
-00010330: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
-00010340: 290d 0a20 2020 2020 2020 2020 2020 2073  )..            s
-00010350: 656c 662e 6164 645f 6c61 7965 7228 6d61  elf.add_layer(ma
-00010360: 726b 6572 290d 0a0d 0a20 2020 2064 6566  rker)....    def
-00010370: 2067 6574 5f73 6361 6c65 2873 656c 6629   get_scale(self)
-00010380: 3a0d 0a20 2020 2020 2020 2022 2222 5265  :..        """Re
-00010390: 7475 726e 7320 7468 6520 6170 7072 6f78  turns the approx
-000103a0: 696d 6174 6520 7069 7865 6c20 7363 616c  imate pixel scal
-000103b0: 6520 6f66 2074 6865 2063 7572 7265 6e74  e of the current
-000103c0: 206d 6170 2076 6965 772c 2069 6e20 6d65   map view, in me
-000103d0: 7465 7273 2e0d 0a0d 0a20 2020 2020 2020  ters.....       
-000103e0: 2052 6574 7572 6e73 3a0d 0a20 2020 2020   Returns:..     
-000103f0: 2020 2020 2020 2066 6c6f 6174 3a20 4d61         float: Ma
-00010400: 7020 7265 736f 6c75 7469 6f6e 2069 6e20  p resolution in 
-00010410: 6d65 7465 7273 2e0d 0a20 2020 2020 2020  meters...       
-00010420: 2022 2222 0d0a 2020 2020 2020 2020 7a6f   """..        zo
-00010430: 6f6d 5f6c 6576 656c 203d 2073 656c 662e  om_level = self.
-00010440: 7a6f 6f6d 0d0a 2020 2020 2020 2020 2320  zoom..        # 
-00010450: 5265 6665 7265 6e63 653a 2068 7474 7073  Reference: https
-00010460: 3a2f 2f62 6c6f 6773 2e62 696e 672e 636f  ://blogs.bing.co
-00010470: 6d2f 6d61 7073 2f32 3030 362f 3032 2f32  m/maps/2006/02/2
-00010480: 352f 6d61 702d 636f 6e74 726f 6c2d 7a6f  5/map-control-zo
-00010490: 6f6d 2d6c 6576 656c 732d 6774 2d72 6573  om-levels-gt-res
-000104a0: 6f6c 7574 696f 6e0d 0a20 2020 2020 2020  olution..       
-000104b0: 2072 6573 6f6c 7574 696f 6e20 3d20 3135   resolution = 15
-000104c0: 3635 3433 2e30 3420 2a20 6d61 7468 2e63  6543.04 * math.c
-000104d0: 6f73 2830 2920 2f20 6d61 7468 2e70 6f77  os(0) / math.pow
-000104e0: 2832 2c20 7a6f 6f6d 5f6c 6576 656c 290d  (2, zoom_level).
-000104f0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00010500: 7265 736f 6c75 7469 6f6e 0d0a 0d0a 2020  resolution....  
-00010510: 2020 6765 7453 6361 6c65 203d 2067 6574    getScale = get
-00010520: 5f73 6361 6c65 0d0a 0d0a 2020 2020 6465  _scale....    de
-00010530: 6620 6164 645f 6261 7365 6d61 7028 7365  f add_basemap(se
-00010540: 6c66 2c20 6261 7365 6d61 703d 2248 5942  lf, basemap="HYB
-00010550: 5249 4422 293a 0d0a 2020 2020 2020 2020  RID"):..        
-00010560: 2222 2241 6464 7320 6120 6261 7365 6d61  """Adds a basema
-00010570: 7020 746f 2074 6865 206d 6170 2e0d 0a0d  p to the map....
-00010580: 0a20 2020 2020 2020 2041 7267 733a 0d0a  .        Args:..
-00010590: 2020 2020 2020 2020 2020 2020 6261 7365              base
-000105a0: 6d61 7020 2873 7472 2c20 6f70 7469 6f6e  map (str, option
-000105b0: 616c 293a 2043 616e 2062 6520 6f6e 6520  al): Can be one 
-000105c0: 6f66 2073 7472 696e 6720 6672 6f6d 2065  of string from e
-000105d0: 655f 6261 7365 6d61 7073 2e20 4465 6661  e_basemaps. Defa
-000105e0: 756c 7473 2074 6f20 2748 5942 5249 4427  ults to 'HYBRID'
-000105f0: 2e0d 0a20 2020 2020 2020 2022 2222 0d0a  ...        """..
-00010600: 2020 2020 2020 2020 7472 793a 0d0a 2020          try:..  
-00010610: 2020 2020 2020 2020 2020 6966 2028 0d0a            if (..
-00010620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010630: 6261 7365 6d61 7020 696e 2062 6173 656d  basemap in basem
-00010640: 6170 5f74 696c 6573 2e6b 6579 7328 290d  ap_tiles.keys().
-00010650: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00010660: 2061 6e64 2062 6173 656d 6170 5f74 696c   and basemap_til
-00010670: 6573 5b62 6173 656d 6170 5d20 6e6f 7420  es[basemap] not 
-00010680: 696e 2073 656c 662e 6c61 7965 7273 0d0a  in self.layers..
-00010690: 2020 2020 2020 2020 2020 2020 293a 0d0a              ):..
-000106a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000106b0: 7365 6c66 2e61 6464 5f6c 6179 6572 2862  self.add_layer(b
-000106c0: 6173 656d 6170 5f74 696c 6573 5b62 6173  asemap_tiles[bas
-000106d0: 656d 6170 5d29 0d0a 0d0a 2020 2020 2020  emap])....      
-000106e0: 2020 6578 6365 7074 2045 7863 6570 7469    except Excepti
-000106f0: 6f6e 3a0d 0a20 2020 2020 2020 2020 2020  on:..           
-00010700: 2072 6169 7365 2056 616c 7565 4572 726f   raise ValueErro
-00010710: 7228 0d0a 2020 2020 2020 2020 2020 2020  r(..            
-00010720: 2020 2020 2242 6173 656d 6170 2063 616e      "Basemap can
-00010730: 206f 6e6c 7920 6265 206f 6e65 206f 6620   only be one of 
-00010740: 7468 6520 666f 6c6c 6f77 696e 673a 5c6e  the following:\n
-00010750: 2020 7b7d 222e 666f 726d 6174 280d 0a20    {}".format(.. 
-00010760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010770: 2020 2022 5c6e 2020 222e 6a6f 696e 2862     "\n  ".join(b
-00010780: 6173 656d 6170 5f74 696c 6573 2e6b 6579  asemap_tiles.key
-00010790: 7328 2929 0d0a 2020 2020 2020 2020 2020  s())..          
-000107a0: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
-000107b0: 2020 2020 2029 0d0a 0d0a 2020 2020 6465       )....    de
-000107c0: 6620 6669 6e64 5f6c 6179 6572 2873 656c  f find_layer(sel
-000107d0: 662c 206e 616d 6529 3a0d 0a20 2020 2020  f, name):..     
-000107e0: 2020 2022 2222 4669 6e64 7320 6c61 7965     """Finds laye
-000107f0: 7220 6279 206e 616d 650d 0a0d 0a20 2020  r by name....   
-00010800: 2020 2020 2041 7267 733a 0d0a 2020 2020       Args:..    
-00010810: 2020 2020 2020 2020 6e61 6d65 2028 7374          name (st
-00010820: 7229 3a20 4e61 6d65 206f 6620 7468 6520  r): Name of the 
-00010830: 6c61 7965 7220 746f 2066 696e 642e 0d0a  layer to find...
-00010840: 0d0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
-00010850: 733a 0d0a 2020 2020 2020 2020 2020 2020  s:..            
-00010860: 6f62 6a65 6374 3a20 6970 796c 6561 666c  object: ipyleafl
-00010870: 6574 206c 6179 6572 206f 626a 6563 742e  et layer object.
-00010880: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-00010890: 2020 2020 2020 206c 6179 6572 7320 3d20         layers = 
-000108a0: 7365 6c66 2e6c 6179 6572 730d 0a0d 0a20  self.layers.... 
-000108b0: 2020 2020 2020 2066 6f72 206c 6179 6572         for layer
-000108c0: 2069 6e20 6c61 7965 7273 3a0d 0a20 2020   in layers:..   
-000108d0: 2020 2020 2020 2020 2069 6620 6c61 7965           if laye
-000108e0: 722e 6e61 6d65 203d 3d20 6e61 6d65 3a0d  r.name == name:.
-000108f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00010900: 2072 6574 7572 6e20 6c61 7965 720d 0a0d   return layer...
-00010910: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00010920: 4e6f 6e65 0d0a 0d0a 2020 2020 6465 6620  None....    def 
-00010930: 6669 6e64 5f6c 6179 6572 5f69 6e64 6578  find_layer_index
-00010940: 2873 656c 662c 206e 616d 6529 3a0d 0a20  (self, name):.. 
-00010950: 2020 2020 2020 2022 2222 4669 6e64 7320         """Finds 
-00010960: 6c61 7965 7220 696e 6465 7820 6279 206e  layer index by n
-00010970: 616d 650d 0a0d 0a20 2020 2020 2020 2041  ame....        A
-00010980: 7267 733a 0d0a 2020 2020 2020 2020 2020  rgs:..          
-00010990: 2020 6e61 6d65 2028 7374 7229 3a20 4e61    name (str): Na
-000109a0: 6d65 206f 6620 7468 6520 6c61 7965 7220  me of the layer 
-000109b0: 746f 2066 696e 642e 0d0a 0d0a 2020 2020  to find.....    
-000109c0: 2020 2020 5265 7475 726e 733a 0d0a 2020      Returns:..  
-000109d0: 2020 2020 2020 2020 2020 696e 743a 2049            int: I
-000109e0: 6e64 6578 206f 6620 7468 6520 6c61 7965  ndex of the laye
-000109f0: 7220 7769 7468 2074 6865 2073 7065 6369  r with the speci
-00010a00: 6669 6564 206e 616d 650d 0a20 2020 2020  fied name..     
-00010a10: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
-00010a20: 6c61 7965 7273 203d 2073 656c 662e 6c61  layers = self.la
-00010a30: 7965 7273 0d0a 0d0a 2020 2020 2020 2020  yers....        
-00010a40: 666f 7220 696e 6465 782c 206c 6179 6572  for index, layer
-00010a50: 2069 6e20 656e 756d 6572 6174 6528 6c61   in enumerate(la
-00010a60: 7965 7273 293a 0d0a 2020 2020 2020 2020  yers):..        
-00010a70: 2020 2020 6966 206c 6179 6572 2e6e 616d      if layer.nam
-00010a80: 6520 3d3d 206e 616d 653a 0d0a 2020 2020  e == name:..    
-00010a90: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00010aa0: 726e 2069 6e64 6578 0d0a 0d0a 2020 2020  rn index....    
-00010ab0: 2020 2020 7265 7475 726e 202d 310d 0a0d      return -1...
-00010ac0: 0a20 2020 2064 6566 206c 6179 6572 5f6f  .    def layer_o
-00010ad0: 7061 6369 7479 2873 656c 662c 206e 616d  pacity(self, nam
-00010ae0: 652c 2076 616c 7565 3d31 2e30 293a 0d0a  e, value=1.0):..
-00010af0: 2020 2020 2020 2020 2222 2243 6861 6e67          """Chang
-00010b00: 6573 206c 6179 6572 206f 7061 6369 7479  es layer opacity
-00010b10: 2e0d 0a0d 0a20 2020 2020 2020 2041 7267  .....        Arg
-00010b20: 733a 0d0a 2020 2020 2020 2020 2020 2020  s:..            
-00010b30: 6e61 6d65 2028 7374 7229 3a20 5468 6520  name (str): The 
-00010b40: 6e61 6d65 206f 6620 7468 6520 6c61 7965  name of the laye
-00010b50: 7220 746f 2063 6861 6e67 6520 6f70 6163  r to change opac
-00010b60: 6974 792e 0d0a 2020 2020 2020 2020 2020  ity...          
-00010b70: 2020 7661 6c75 6520 2866 6c6f 6174 2c20    value (float, 
-00010b80: 6f70 7469 6f6e 616c 293a 2054 6865 206f  optional): The o
-00010b90: 7061 6369 7479 2076 616c 7565 2074 6f20  pacity value to 
-00010ba0: 7365 742e 2044 6566 6175 6c74 7320 746f  set. Defaults to
-00010bb0: 2031 2e30 2e0d 0a20 2020 2020 2020 2022   1.0...        "
-00010bc0: 2222 0d0a 2020 2020 2020 2020 6c61 7965  ""..        laye
-00010bd0: 7220 3d20 7365 6c66 2e66 696e 645f 6c61  r = self.find_la
-00010be0: 7965 7228 6e61 6d65 290d 0a20 2020 2020  yer(name)..     
-00010bf0: 2020 2074 7279 3a0d 0a20 2020 2020 2020     try:..       
-00010c00: 2020 2020 206c 6179 6572 2e6f 7061 6369       layer.opaci
-00010c10: 7479 203d 2076 616c 7565 0d0a 2020 2020  ty = value..    
-00010c20: 2020 2020 6578 6365 7074 2045 7863 6570      except Excep
-00010c30: 7469 6f6e 2061 7320 653a 0d0a 2020 2020  tion as e:..    
-00010c40: 2020 2020 2020 2020 7261 6973 6520 4578          raise Ex
-00010c50: 6365 7074 696f 6e28 6529 0d0a 0d0a 2020  ception(e)....  
-00010c60: 2020 6465 6620 6164 645f 776d 735f 6c61    def add_wms_la
-00010c70: 7965 7228 0d0a 2020 2020 2020 2020 7365  yer(..        se
-00010c80: 6c66 2c0d 0a20 2020 2020 2020 2075 726c  lf,..        url
-00010c90: 2c0d 0a20 2020 2020 2020 206c 6179 6572  ,..        layer
-00010ca0: 732c 0d0a 2020 2020 2020 2020 6e61 6d65  s,..        name
-00010cb0: 3d4e 6f6e 652c 0d0a 2020 2020 2020 2020  =None,..        
-00010cc0: 6174 7472 6962 7574 696f 6e3d 2222 2c0d  attribution="",.
-00010cd0: 0a20 2020 2020 2020 2066 6f72 6d61 743d  .        format=
-00010ce0: 2269 6d61 6765 2f6a 7065 6722 2c0d 0a20  "image/jpeg",.. 
-00010cf0: 2020 2020 2020 2074 7261 6e73 7061 7265         transpare
-00010d00: 6e74 3d46 616c 7365 2c0d 0a20 2020 2020  nt=False,..     
-00010d10: 2020 206f 7061 6369 7479 3d31 2e30 2c0d     opacity=1.0,.
-00010d20: 0a20 2020 2020 2020 2073 686f 776e 3d54  .        shown=T
-00010d30: 7275 652c 0d0a 2020 2020 2020 2020 2a2a  rue,..        **
-00010d40: 6b77 6172 6773 2c0d 0a20 2020 2029 3a0d  kwargs,..    ):.
-00010d50: 0a20 2020 2020 2020 2022 2222 4164 6420  .        """Add 
-00010d60: 6120 574d 5320 6c61 7965 7220 746f 2074  a WMS layer to t
-00010d70: 6865 206d 6170 2e0d 0a0d 0a20 2020 2020  he map.....     
-00010d80: 2020 2041 7267 733a 0d0a 2020 2020 2020     Args:..      
-00010d90: 2020 2020 2020 7572 6c20 2873 7472 293a        url (str):
-00010da0: 2054 6865 2055 524c 206f 6620 7468 6520   The URL of the 
-00010db0: 574d 5320 7765 6220 7365 7276 6963 652e  WMS web service.
-00010dc0: 0d0a 2020 2020 2020 2020 2020 2020 6c61  ..            la
-00010dd0: 7965 7273 2028 7374 7229 3a20 436f 6d6d  yers (str): Comm
-00010de0: 612d 7365 7061 7261 7465 6420 6c69 7374  a-separated list
-00010df0: 206f 6620 574d 5320 6c61 7965 7273 2074   of WMS layers t
-00010e00: 6f20 7368 6f77 2e0d 0a20 2020 2020 2020  o show...       
-00010e10: 2020 2020 206e 616d 6520 2873 7472 2c20       name (str, 
-00010e20: 6f70 7469 6f6e 616c 293a 2054 6865 206c  optional): The l
-00010e30: 6179 6572 206e 616d 6520 746f 2075 7365  ayer name to use
-00010e40: 206f 6e20 7468 6520 6c61 7965 7220 636f   on the layer co
-00010e50: 6e74 726f 6c2e 2044 6566 6175 6c74 7320  ntrol. Defaults 
-00010e60: 746f 204e 6f6e 652e 0d0a 2020 2020 2020  to None...      
-00010e70: 2020 2020 2020 6174 7472 6962 7574 696f        attributio
-00010e80: 6e20 2873 7472 2c20 6f70 7469 6f6e 616c  n (str, optional
-00010e90: 293a 2054 6865 2061 7474 7269 6275 7469  ): The attributi
-00010ea0: 6f6e 206f 6620 7468 6520 6461 7461 206c  on of the data l
-00010eb0: 6179 6572 2e20 4465 6661 756c 7473 2074  ayer. Defaults t
-00010ec0: 6f20 2727 2e0d 0a20 2020 2020 2020 2020  o ''...         
-00010ed0: 2020 2066 6f72 6d61 7420 2873 7472 2c20     format (str, 
-00010ee0: 6f70 7469 6f6e 616c 293a 2057 4d53 2069  optional): WMS i
-00010ef0: 6d61 6765 2066 6f72 6d61 7420 2875 7365  mage format (use
-00010f00: 20e2 8098 696d 6167 652f 706e 67e2 8099   ...image/png...
-00010f10: 2066 6f72 206c 6179 6572 7320 7769 7468   for layers with
-00010f20: 2074 7261 6e73 7061 7265 6e63 7929 2e20   transparency). 
-00010f30: 4465 6661 756c 7473 2074 6f20 2769 6d61  Defaults to 'ima
-00010f40: 6765 2f6a 7065 6727 2e0d 0a20 2020 2020  ge/jpeg'...     
-00010f50: 2020 2020 2020 2074 7261 6e73 7061 7265         transpare
-00010f60: 6e74 2028 626f 6f6c 2c20 6f70 7469 6f6e  nt (bool, option
-00010f70: 616c 293a 2049 6620 5472 7565 2c20 7468  al): If True, th
-00010f80: 6520 574d 5320 7365 7276 6963 6520 7769  e WMS service wi
-00010f90: 6c6c 2072 6574 7572 6e20 696d 6167 6573  ll return images
-00010fa0: 2077 6974 6820 7472 616e 7370 6172 656e   with transparen
-00010fb0: 6379 2e20 4465 6661 756c 7473 2074 6f20  cy. Defaults to 
-00010fc0: 4661 6c73 652e 0d0a 2020 2020 2020 2020  False...        
-00010fd0: 2020 2020 6f70 6163 6974 7920 2866 6c6f      opacity (flo
-00010fe0: 6174 2c20 6f70 7469 6f6e 616c 293a 2054  at, optional): T
-00010ff0: 6865 206f 7061 6369 7479 206f 6620 7468  he opacity of th
-00011000: 6520 6c61 7965 722e 2044 6566 6175 6c74  e layer. Default
-00011010: 7320 746f 2031 2e30 2e0d 0a20 2020 2020  s to 1.0...     
-00011020: 2020 2020 2020 2073 686f 776e 2028 626f         shown (bo
-00011030: 6f6c 2c20 6f70 7469 6f6e 616c 293a 2041  ol, optional): A
-00011040: 2066 6c61 6720 696e 6469 6361 7469 6e67   flag indicating
-00011050: 2077 6865 7468 6572 2074 6865 206c 6179   whether the lay
-00011060: 6572 2073 686f 756c 6420 6265 206f 6e20  er should be on 
-00011070: 6279 2064 6566 6175 6c74 2e20 4465 6661  by default. Defa
-00011080: 756c 7473 2074 6f20 5472 7565 2e0d 0a20  ults to True... 
-00011090: 2020 2020 2020 2022 2222 0d0a 0d0a 2020         """....  
-000110a0: 2020 2020 2020 6966 206e 616d 6520 6973        if name is
-000110b0: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
-000110c0: 2020 2020 6e61 6d65 203d 2073 7472 286c      name = str(l
-000110d0: 6179 6572 7329 0d0a 0d0a 2020 2020 2020  ayers)....      
-000110e0: 2020 7472 793a 0d0a 2020 2020 2020 2020    try:..        
-000110f0: 2020 2020 776d 735f 6c61 7965 7220 3d20      wms_layer = 
-00011100: 6970 796c 6561 666c 6574 2e57 4d53 4c61  ipyleaflet.WMSLa
-00011110: 7965 7228 0d0a 2020 2020 2020 2020 2020  yer(..          
-00011120: 2020 2020 2020 7572 6c3d 7572 6c2c 0d0a        url=url,..
-00011130: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011140: 6c61 7965 7273 3d6c 6179 6572 732c 0d0a  layers=layers,..
-00011150: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011160: 6e61 6d65 3d6e 616d 652c 0d0a 2020 2020  name=name,..    
-00011170: 2020 2020 2020 2020 2020 2020 6174 7472              attr
-00011180: 6962 7574 696f 6e3d 6174 7472 6962 7574  ibution=attribut
-00011190: 696f 6e2c 0d0a 2020 2020 2020 2020 2020  ion,..          
-000111a0: 2020 2020 2020 666f 726d 6174 3d66 6f72        format=for
-000111b0: 6d61 742c 0d0a 2020 2020 2020 2020 2020  mat,..          
-000111c0: 2020 2020 2020 7472 616e 7370 6172 656e        transparen
-000111d0: 743d 7472 616e 7370 6172 656e 742c 0d0a  t=transparent,..
-000111e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000111f0: 6f70 6163 6974 793d 6f70 6163 6974 792c  opacity=opacity,
-00011200: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00011210: 2020 7669 7369 626c 653d 7368 6f77 6e2c    visible=shown,
-00011220: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00011230: 2020 2a2a 6b77 6172 6773 2c0d 0a20 2020    **kwargs,..   
-00011240: 2020 2020 2020 2020 2029 0d0a 2020 2020           )..    
-00011250: 2020 2020 2020 2020 7365 6c66 2e61 6464          self.add
-00011260: 5f6c 6179 6572 2877 6d73 5f6c 6179 6572  _layer(wms_layer
-00011270: 290d 0a0d 0a20 2020 2020 2020 2065 7863  )....        exc
-00011280: 6570 7420 4578 6365 7074 696f 6e20 6173  ept Exception as
-00011290: 2065 3a0d 0a20 2020 2020 2020 2020 2020   e:..           
-000112a0: 2070 7269 6e74 2822 4661 696c 6564 2074   print("Failed t
-000112b0: 6f20 6164 6420 7468 6520 7370 6563 6966  o add the specif
-000112c0: 6965 6420 574d 5320 5469 6c65 4c61 7965  ied WMS TileLaye
-000112d0: 722e 2229 0d0a 2020 2020 2020 2020 2020  r.")..          
-000112e0: 2020 7261 6973 6520 4578 6365 7074 696f    raise Exceptio
-000112f0: 6e28 6529 0d0a 0d0a 2020 2020 6465 6620  n(e)....    def 
-00011300: 6164 645f 7469 6c65 5f6c 6179 6572 280d  add_tile_layer(.
-00011310: 0a20 2020 2020 2020 2073 656c 662c 0d0a  .        self,..
-00011320: 2020 2020 2020 2020 7572 6c3d 2268 7474          url="htt
-00011330: 7073 3a2f 2f7b 737d 2e74 696c 652e 6f70  ps://{s}.tile.op
-00011340: 656e 7374 7265 6574 6d61 702e 6f72 672f  enstreetmap.org/
-00011350: 7b7a 7d2f 7b78 7d2f 7b79 7d2e 706e 6722  {z}/{x}/{y}.png"
-00011360: 2c0d 0a20 2020 2020 2020 206e 616d 653d  ,..        name=
-00011370: 2255 6e74 6974 6c65 6422 2c0d 0a20 2020  "Untitled",..   
-00011380: 2020 2020 2061 7474 7269 6275 7469 6f6e       attribution
-00011390: 3d22 222c 0d0a 2020 2020 2020 2020 6f70  ="",..        op
-000113a0: 6163 6974 793d 312e 302c 0d0a 2020 2020  acity=1.0,..    
-000113b0: 2020 2020 7368 6f77 6e3d 5472 7565 2c0d      shown=True,.
-000113c0: 0a20 2020 2020 2020 202a 2a6b 7761 7267  .        **kwarg
-000113d0: 732c 0d0a 2020 2020 293a 0d0a 2020 2020  s,..    ):..    
-000113e0: 2020 2020 2222 2241 6464 7320 6120 5469      """Adds a Ti
-000113f0: 6c65 4c61 7965 7220 746f 2074 6865 206d  leLayer to the m
-00011400: 6170 2e0d 0a0d 0a20 2020 2020 2020 2041  ap.....        A
-00011410: 7267 733a 0d0a 2020 2020 2020 2020 2020  rgs:..          
-00011420: 2020 7572 6c20 2873 7472 2c20 6f70 7469    url (str, opti
-00011430: 6f6e 616c 293a 2054 6865 2055 524c 206f  onal): The URL o
-00011440: 6620 7468 6520 7469 6c65 206c 6179 6572  f the tile layer
-00011450: 2e20 4465 6661 756c 7473 2074 6f20 2768  . Defaults to 'h
-00011460: 7474 7073 3a2f 2f7b 737d 2e74 696c 652e  ttps://{s}.tile.
-00011470: 6f70 656e 7374 7265 6574 6d61 702e 6f72  openstreetmap.or
-00011480: 672f 7b7a 7d2f 7b78 7d2f 7b79 7d2e 706e  g/{z}/{x}/{y}.pn
-00011490: 6727 2e0d 0a20 2020 2020 2020 2020 2020  g'...           
-000114a0: 206e 616d 6520 2873 7472 2c20 6f70 7469   name (str, opti
-000114b0: 6f6e 616c 293a 2054 6865 206c 6179 6572  onal): The layer
-000114c0: 206e 616d 6520 746f 2075 7365 2066 6f72   name to use for
-000114d0: 2074 6865 206c 6179 6572 2e20 4465 6661   the layer. Defa
-000114e0: 756c 7473 2074 6f20 2755 6e74 6974 6c65  ults to 'Untitle
-000114f0: 6427 2e0d 0a20 2020 2020 2020 2020 2020  d'...           
-00011500: 2061 7474 7269 6275 7469 6f6e 2028 7374   attribution (st
-00011510: 722c 206f 7074 696f 6e61 6c29 3a20 5468  r, optional): Th
-00011520: 6520 6174 7472 6962 7574 696f 6e20 746f  e attribution to
-00011530: 2075 7365 2e20 4465 6661 756c 7473 2074   use. Defaults t
-00011540: 6f20 2727 2e0d 0a20 2020 2020 2020 2020  o ''...         
-00011550: 2020 206f 7061 6369 7479 2028 666c 6f61     opacity (floa
-00011560: 742c 206f 7074 696f 6e61 6c29 3a20 5468  t, optional): Th
-00011570: 6520 6f70 6163 6974 7920 6f66 2074 6865  e opacity of the
-00011580: 206c 6179 6572 2e20 4465 6661 756c 7473   layer. Defaults
-00011590: 2074 6f20 312e 0d0a 2020 2020 2020 2020   to 1...        
-000115a0: 2020 2020 7368 6f77 6e20 2862 6f6f 6c2c      shown (bool,
-000115b0: 206f 7074 696f 6e61 6c29 3a20 4120 666c   optional): A fl
-000115c0: 6167 2069 6e64 6963 6174 696e 6720 7768  ag indicating wh
-000115d0: 6574 6865 7220 7468 6520 6c61 7965 7220  ether the layer 
-000115e0: 7368 6f75 6c64 2062 6520 6f6e 2062 7920  should be on by 
-000115f0: 6465 6661 756c 742e 2044 6566 6175 6c74  default. Default
-00011600: 7320 746f 2054 7275 652e 0d0a 2020 2020  s to True...    
-00011610: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
-00011620: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
-00011630: 2020 2074 696c 655f 6c61 7965 7220 3d20     tile_layer = 
-00011640: 6970 796c 6561 666c 6574 2e54 696c 654c  ipyleaflet.TileL
-00011650: 6179 6572 280d 0a20 2020 2020 2020 2020  ayer(..         
-00011660: 2020 2020 2020 2075 726c 3d75 726c 2c0d         url=url,.
-00011670: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00011680: 206e 616d 653d 6e61 6d65 2c0d 0a20 2020   name=name,..   
-00011690: 2020 2020 2020 2020 2020 2020 2061 7474               att
-000116a0: 7269 6275 7469 6f6e 3d61 7474 7269 6275  ribution=attribu
-000116b0: 7469 6f6e 2c0d 0a20 2020 2020 2020 2020  tion,..         
-000116c0: 2020 2020 2020 206f 7061 6369 7479 3d6f         opacity=o
-000116d0: 7061 6369 7479 2c0d 0a20 2020 2020 2020  pacity,..       
-000116e0: 2020 2020 2020 2020 2076 6973 6962 6c65           visible
-000116f0: 3d73 686f 776e 2c0d 0a20 2020 2020 2020  =shown,..       
-00011700: 2020 2020 2020 2020 202a 2a6b 7761 7267           **kwarg
-00011710: 732c 0d0a 2020 2020 2020 2020 2020 2020  s,..            
-00011720: 290d 0a20 2020 2020 2020 2020 2020 2073  )..            s
-00011730: 656c 662e 6164 645f 6c61 7965 7228 7469  elf.add_layer(ti
-00011740: 6c65 5f6c 6179 6572 290d 0a0d 0a20 2020  le_layer)....   
-00011750: 2020 2020 2065 7863 6570 7420 4578 6365       except Exce
-00011760: 7074 696f 6e20 6173 2065 3a0d 0a20 2020  ption as e:..   
-00011770: 2020 2020 2020 2020 2070 7269 6e74 2822           print("
-00011780: 4661 696c 6564 2074 6f20 6164 6420 7468  Failed to add th
-00011790: 6520 7370 6563 6966 6965 6420 5469 6c65  e specified Tile
-000117a0: 4c61 7965 722e 2229 0d0a 2020 2020 2020  Layer.")..      
-000117b0: 2020 2020 2020 7261 6973 6520 4578 6365        raise Exce
-000117c0: 7074 696f 6e28 6529 0d0a 0d0a 2020 2020  ption(e)....    
-000117d0: 6465 6620 6164 645f 636f 675f 6c61 7965  def add_cog_laye
-000117e0: 7228 0d0a 2020 2020 2020 2020 7365 6c66  r(..        self
-000117f0: 2c0d 0a20 2020 2020 2020 2075 726c 2c0d  ,..        url,.
-00011800: 0a20 2020 2020 2020 206e 616d 653d 2255  .        name="U
-00011810: 6e74 6974 6c65 6422 2c0d 0a20 2020 2020  ntitled",..     
-00011820: 2020 2061 7474 7269 6275 7469 6f6e 3d22     attribution="
-00011830: 222c 0d0a 2020 2020 2020 2020 6f70 6163  ",..        opac
-00011840: 6974 793d 312e 302c 0d0a 2020 2020 2020  ity=1.0,..      
-00011850: 2020 7368 6f77 6e3d 5472 7565 2c0d 0a20    shown=True,.. 
-00011860: 2020 2020 2020 2074 6974 696c 6572 5f65         titiler_e
-00011870: 6e64 706f 696e 743d 2268 7474 7073 3a2f  ndpoint="https:/
-00011880: 2f61 7069 2e63 6f67 656f 2e78 797a 2f22  /api.cogeo.xyz/"
-00011890: 2c0d 0a20 2020 2020 2020 202a 2a6b 7761  ,..        **kwa
-000118a0: 7267 732c 0d0a 2020 2020 293a 0d0a 2020  rgs,..    ):..  
-000118b0: 2020 2020 2020 2222 2241 6464 7320 6120        """Adds a 
-000118c0: 434f 4720 5469 6c65 4c61 7965 7220 746f  COG TileLayer to
-000118d0: 2074 6865 206d 6170 2e0d 0a0d 0a20 2020   the map.....   
-000118e0: 2020 2020 2041 7267 733a 0d0a 2020 2020       Args:..    
-000118f0: 2020 2020 2020 2020 7572 6c20 2873 7472          url (str
-00011900: 293a 2054 6865 2055 524c 206f 6620 7468  ): The URL of th
-00011910: 6520 434f 4720 7469 6c65 206c 6179 6572  e COG tile layer
-00011920: 2e0d 0a20 2020 2020 2020 2020 2020 206e  ...            n
-00011930: 616d 6520 2873 7472 2c20 6f70 7469 6f6e  ame (str, option
-00011940: 616c 293a 2054 6865 206c 6179 6572 206e  al): The layer n
-00011950: 616d 6520 746f 2075 7365 2066 6f72 2074  ame to use for t
-00011960: 6865 206c 6179 6572 2e20 4465 6661 756c  he layer. Defaul
-00011970: 7473 2074 6f20 2755 6e74 6974 6c65 6427  ts to 'Untitled'
-00011980: 2e0d 0a20 2020 2020 2020 2020 2020 2061  ...            a
-00011990: 7474 7269 6275 7469 6f6e 2028 7374 722c  ttribution (str,
-000119a0: 206f 7074 696f 6e61 6c29 3a20 5468 6520   optional): The 
-000119b0: 6174 7472 6962 7574 696f 6e20 746f 2075  attribution to u
-000119c0: 7365 2e20 4465 6661 756c 7473 2074 6f20  se. Defaults to 
-000119d0: 2727 2e0d 0a20 2020 2020 2020 2020 2020  ''...           
-000119e0: 206f 7061 6369 7479 2028 666c 6f61 742c   opacity (float,
-000119f0: 206f 7074 696f 6e61 6c29 3a20 5468 6520   optional): The 
-00011a00: 6f70 6163 6974 7920 6f66 2074 6865 206c  opacity of the l
-00011a10: 6179 6572 2e20 4465 6661 756c 7473 2074  ayer. Defaults t
-00011a20: 6f20 312e 0d0a 2020 2020 2020 2020 2020  o 1...          
-00011a30: 2020 7368 6f77 6e20 2862 6f6f 6c2c 206f    shown (bool, o
-00011a40: 7074 696f 6e61 6c29 3a20 4120 666c 6167  ptional): A flag
-00011a50: 2069 6e64 6963 6174 696e 6720 7768 6574   indicating whet
-00011a60: 6865 7220 7468 6520 6c61 7965 7220 7368  her the layer sh
-00011a70: 6f75 6c64 2062 6520 6f6e 2062 7920 6465  ould be on by de
-00011a80: 6661 756c 742e 2044 6566 6175 6c74 7320  fault. Defaults 
-00011a90: 746f 2054 7275 652e 0d0a 2020 2020 2020  to True...      
-00011aa0: 2020 2020 2020 7469 7469 6c65 725f 656e        titiler_en
-00011ab0: 6470 6f69 6e74 2028 7374 722c 206f 7074  dpoint (str, opt
-00011ac0: 696f 6e61 6c29 3a20 5469 7469 6c65 7220  ional): Titiler 
-00011ad0: 656e 6470 6f69 6e74 2e20 4465 6661 756c  endpoint. Defaul
-00011ae0: 7473 2074 6f20 2268 7474 7073 3a2f 2f61  ts to "https://a
-00011af0: 7069 2e63 6f67 656f 2e78 797a 2f22 2e0d  pi.cogeo.xyz/"..
-00011b00: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
-00011b10: 2020 2020 2020 7469 6c65 5f75 726c 203d        tile_url =
-00011b20: 2067 6574 5f63 6f67 5f74 696c 6528 7572   get_cog_tile(ur
-00011b30: 6c2c 2074 6974 696c 6572 5f65 6e64 706f  l, titiler_endpo
-00011b40: 696e 742c 202a 2a6b 7761 7267 7329 0d0a  int, **kwargs)..
-00011b50: 2020 2020 2020 2020 6365 6e74 6572 203d          center =
-00011b60: 2067 6574 5f63 6f67 5f63 656e 7465 7228   get_cog_center(
-00011b70: 7572 6c2c 2074 6974 696c 6572 5f65 6e64  url, titiler_end
-00011b80: 706f 696e 7429 2020 2320 286c 6f6e 2c20  point)  # (lon, 
-00011b90: 6c61 7429 0d0a 2020 2020 2020 2020 7365  lat)..        se
-00011ba0: 6c66 2e61 6464 5f74 696c 655f 6c61 7965  lf.add_tile_laye
-00011bb0: 7228 7469 6c65 5f75 726c 2c20 6e61 6d65  r(tile_url, name
-00011bc0: 2c20 6174 7472 6962 7574 696f 6e2c 206f  , attribution, o
-00011bd0: 7061 6369 7479 2c20 7368 6f77 6e29 0d0a  pacity, shown)..
-00011be0: 2020 2020 2020 2020 7365 6c66 2e73 6574          self.set
-00011bf0: 5f63 656e 7465 7228 6c6f 6e3d 6365 6e74  _center(lon=cent
-00011c00: 6572 5b30 5d2c 206c 6174 3d63 656e 7465  er[0], lat=cente
-00011c10: 725b 315d 2c20 7a6f 6f6d 3d31 3029 0d0a  r[1], zoom=10)..
-00011c20: 0d0a 2020 2020 6465 6620 6164 645f 636f  ..    def add_co
-00011c30: 675f 6d6f 7361 6963 280d 0a20 2020 2020  g_mosaic(..     
-00011c40: 2020 2073 656c 662c 0d0a 2020 2020 2020     self,..      
-00011c50: 2020 6c69 6e6b 732c 0d0a 2020 2020 2020    links,..      
-00011c60: 2020 6e61 6d65 3d22 556e 7469 746c 6564    name="Untitled
-00011c70: 222c 0d0a 2020 2020 2020 2020 6174 7472  ",..        attr
-00011c80: 6962 7574 696f 6e3d 2222 2c0d 0a20 2020  ibution="",..   
-00011c90: 2020 2020 206f 7061 6369 7479 3d31 2e30       opacity=1.0
-00011ca0: 2c0d 0a20 2020 2020 2020 2073 686f 776e  ,..        shown
-00011cb0: 3d54 7275 652c 0d0a 2020 2020 2020 2020  =True,..        
-00011cc0: 7469 7469 6c65 725f 656e 6470 6f69 6e74  titiler_endpoint
-00011cd0: 3d22 6874 7470 733a 2f2f 6170 692e 636f  ="https://api.co
-00011ce0: 6765 6f2e 7879 7a2f 222c 0d0a 2020 2020  geo.xyz/",..    
-00011cf0: 2020 2020 7573 6572 6e61 6d65 3d22 616e      username="an
-00011d00: 6f6e 796d 6f75 7322 2c0d 0a20 2020 2020  onymous",..     
-00011d10: 2020 206f 7665 7277 7269 7465 3d46 616c     overwrite=Fal
-00011d20: 7365 2c0d 0a20 2020 2020 2020 2073 686f  se,..        sho
-00011d30: 775f 666f 6f74 7072 696e 7473 3d46 616c  w_footprints=Fal
-00011d40: 7365 2c0d 0a20 2020 2020 2020 2076 6572  se,..        ver
-00011d50: 626f 7365 3d54 7275 652c 0d0a 2020 2020  bose=True,..    
-00011d60: 2020 2020 2a2a 6b77 6172 6773 2c0d 0a20      **kwargs,.. 
-00011d70: 2020 2029 3a0d 0a20 2020 2020 2020 2022     ):..        "
-00011d80: 2222 4164 6420 6120 7669 7274 7561 6c20  ""Add a virtual 
-00011d90: 6d6f 7361 6963 206f 6620 434f 4773 2074  mosaic of COGs t
-00011da0: 6f20 7468 6520 6d61 702e 0d0a 0d0a 2020  o the map.....  
-00011db0: 2020 2020 2020 4172 6773 3a0d 0a20 2020        Args:..   
-00011dc0: 2020 2020 2020 2020 206c 696e 6b73 2028           links (
-00011dd0: 6c69 7374 293a 2041 206c 6973 7420 6f66  list): A list of
-00011de0: 206c 696e 6b73 2070 6f69 6e74 696e 6720   links pointing 
-00011df0: 746f 2043 4f47 732e 0d0a 2020 2020 2020  to COGs...      
-00011e00: 2020 2020 2020 6e61 6d65 2028 7374 722c        name (str,
-00011e10: 206f 7074 696f 6e61 6c29 3a20 5468 6520   optional): The 
-00011e20: 6c61 7965 7220 6e61 6d65 2074 6f20 7573  layer name to us
-00011e30: 6520 666f 7220 7468 6520 6c61 7965 722e  e for the layer.
-00011e40: 2044 6566 6175 6c74 7320 746f 2027 556e   Defaults to 'Un
-00011e50: 7469 746c 6564 272e 0d0a 2020 2020 2020  titled'...      
-00011e60: 2020 2020 2020 6174 7472 6962 7574 696f        attributio
-00011e70: 6e20 2873 7472 2c20 6f70 7469 6f6e 616c  n (str, optional
-00011e80: 293a 2054 6865 2061 7474 7269 6275 7469  ): The attributi
-00011e90: 6f6e 2074 6f20 7573 652e 2044 6566 6175  on to use. Defau
-00011ea0: 6c74 7320 746f 2027 272e 0d0a 2020 2020  lts to ''...    
-00011eb0: 2020 2020 2020 2020 6f70 6163 6974 7920          opacity 
-00011ec0: 2866 6c6f 6174 2c20 6f70 7469 6f6e 616c  (float, optional
-00011ed0: 293a 2054 6865 206f 7061 6369 7479 206f  ): The opacity o
-00011ee0: 6620 7468 6520 6c61 7965 722e 2044 6566  f the layer. Def
-00011ef0: 6175 6c74 7320 746f 2031 2e0d 0a20 2020  aults to 1...   
-00011f00: 2020 2020 2020 2020 2073 686f 776e 2028           shown (
-00011f10: 626f 6f6c 2c20 6f70 7469 6f6e 616c 293a  bool, optional):
-00011f20: 2041 2066 6c61 6720 696e 6469 6361 7469   A flag indicati
-00011f30: 6e67 2077 6865 7468 6572 2074 6865 206c  ng whether the l
-00011f40: 6179 6572 2073 686f 756c 6420 6265 206f  ayer should be o
-00011f50: 6e20 6279 2064 6566 6175 6c74 2e20 4465  n by default. De
-00011f60: 6661 756c 7473 2074 6f20 5472 7565 2e0d  faults to True..
-00011f70: 0a20 2020 2020 2020 2020 2020 2074 6974  .            tit
-00011f80: 696c 6572 5f65 6e64 706f 696e 7420 2873  iler_endpoint (s
-00011f90: 7472 2c20 6f70 7469 6f6e 616c 293a 2054  tr, optional): T
-00011fa0: 6974 696c 6572 2065 6e64 706f 696e 742e  itiler endpoint.
-00011fb0: 2044 6566 6175 6c74 7320 746f 2022 6874   Defaults to "ht
-00011fc0: 7470 733a 2f2f 6170 692e 636f 6765 6f2e  tps://api.cogeo.
-00011fd0: 7879 7a2f 222e 0d0a 2020 2020 2020 2020  xyz/"...        
-00011fe0: 2020 2020 7573 6572 6e61 6d65 2028 7374      username (st
-00011ff0: 722c 206f 7074 696f 6e61 6c29 3a20 5468  r, optional): Th
-00012000: 6520 7573 6572 6e61 6d65 2074 6f20 6372  e username to cr
-00012010: 6561 7465 206d 6f73 6169 6320 7573 696e  eate mosaic usin
-00012020: 6720 7468 6520 7469 7469 6c65 7220 656e  g the titiler en
-00012030: 6470 6f69 6e74 2e20 4465 6661 756c 7473  dpoint. Defaults
-00012040: 2074 6f20 2761 6e6f 6e79 6d6f 7573 272e   to 'anonymous'.
-00012050: 0d0a 2020 2020 2020 2020 2020 2020 6f76  ..            ov
-00012060: 6572 7772 6974 6520 2862 6f6f 6c2c 206f  erwrite (bool, o
-00012070: 7074 696f 6e61 6c29 3a20 5768 6574 6865  ptional): Whethe
-00012080: 7220 6f72 206e 6f74 2074 6f20 7265 706c  r or not to repl
-00012090: 6163 6520 6578 6973 7469 6e67 206c 6179  ace existing lay
-000120a0: 6572 2077 6974 6820 7468 6520 7361 6d65  er with the same
-000120b0: 206c 6179 6572 206e 616d 652e 2044 6566   layer name. Def
-000120c0: 6175 6c74 7320 746f 2046 616c 7365 2e0d  aults to False..
-000120d0: 0a20 2020 2020 2020 2020 2020 2073 686f  .            sho
-000120e0: 775f 666f 6f74 7072 696e 7473 2028 626f  w_footprints (bo
-000120f0: 6f6c 2c20 6f70 7469 6f6e 616c 293a 2057  ol, optional): W
-00012100: 6865 7468 6572 206f 7220 6e6f 7420 746f  hether or not to
-00012110: 2073 686f 7720 666f 6f74 7072 696e 7473   show footprints
-00012120: 206f 6620 434f 4773 2e20 4465 6661 756c   of COGs. Defaul
-00012130: 7473 2074 6f20 4661 6c73 652e 0d0a 2020  ts to False...  
-00012140: 2020 2020 2020 2020 2020 7665 7262 6f73            verbos
-00012150: 6520 2862 6f6f 6c2c 206f 7074 696f 6e61  e (bool, optiona
-00012160: 6c29 3a20 5768 6574 6865 7220 6f72 206e  l): Whether or n
-00012170: 6f74 2074 6f20 7072 696e 7420 6465 7363  ot to print desc
-00012180: 7269 7074 696f 6e73 2e20 4465 6661 756c  riptions. Defaul
-00012190: 7473 2074 6f20 5472 7565 2e0d 0a20 2020  ts to True...   
-000121a0: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
-000121b0: 2020 6c61 7965 726e 616d 6520 3d20 6e61    layername = na
-000121c0: 6d65 2e72 6570 6c61 6365 2822 2022 2c20  me.replace(" ", 
-000121d0: 225f 2229 0d0a 2020 2020 2020 2020 7469  "_")..        ti
-000121e0: 6c65 203d 2067 6574 5f63 6f67 5f6d 6f73  le = get_cog_mos
-000121f0: 6169 6328 0d0a 2020 2020 2020 2020 2020  aic(..          
-00012200: 2020 6c69 6e6b 732c 0d0a 2020 2020 2020    links,..      
-00012210: 2020 2020 2020 7469 7469 6c65 725f 656e        titiler_en
-00012220: 6470 6f69 6e74 3d74 6974 696c 6572 5f65  dpoint=titiler_e
-00012230: 6e64 706f 696e 742c 0d0a 2020 2020 2020  ndpoint,..      
-00012240: 2020 2020 2020 7573 6572 6e61 6d65 3d75        username=u
-00012250: 7365 726e 616d 652c 0d0a 2020 2020 2020  sername,..      
-00012260: 2020 2020 2020 6c61 7965 726e 616d 653d        layername=
-00012270: 6c61 7965 726e 616d 652c 0d0a 2020 2020  layername,..    
-00012280: 2020 2020 2020 2020 6f76 6572 7772 6974          overwrit
-00012290: 653d 6f76 6572 7772 6974 652c 0d0a 2020  e=overwrite,..  
-000122a0: 2020 2020 2020 2020 2020 7665 7262 6f73            verbos
-000122b0: 653d 7665 7262 6f73 652c 0d0a 2020 2020  e=verbose,..    
-000122c0: 2020 2020 290d 0a20 2020 2020 2020 2073      )..        s
-000122d0: 656c 662e 6164 645f 7469 6c65 5f6c 6179  elf.add_tile_lay
-000122e0: 6572 2874 696c 652c 206e 616d 652c 2061  er(tile, name, a
-000122f0: 7474 7269 6275 7469 6f6e 2c20 6f70 6163  ttribution, opac
-00012300: 6974 792c 2073 686f 776e 290d 0a0d 0a20  ity, shown).... 
-00012310: 2020 2020 2020 2069 6620 7368 6f77 5f66         if show_f
-00012320: 6f6f 7470 7269 6e74 733a 0d0a 2020 2020  ootprints:..    
-00012330: 2020 2020 2020 2020 6966 2076 6572 626f          if verbo
-00012340: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
-00012350: 2020 2020 2070 7269 6e74 280d 0a20 2020       print(..   
-00012360: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012370: 2066 2247 656e 6572 6174 696e 6720 666f   f"Generating fo
-00012380: 6f74 7072 696e 7473 206f 6620 7b6c 656e  otprints of {len
-00012390: 286c 696e 6b73 297d 2043 4f47 732e 2054  (links)} COGs. T
-000123a0: 6869 7320 6d69 6768 7420 7461 6b65 2061  his might take a
-000123b0: 2077 6869 6c65 202e 2e2e 220d 0a20 2020   while ..."..   
-000123c0: 2020 2020 2020 2020 2020 2020 2029 0d0a               )..
-000123d0: 2020 2020 2020 2020 2020 2020 636f 6f72              coor
-000123e0: 6473 203d 205b 5d0d 0a20 2020 2020 2020  ds = []..       
-000123f0: 2020 2020 2066 6f72 206c 696e 6b20 696e       for link in
-00012400: 206c 696e 6b73 3a0d 0a20 2020 2020 2020   links:..       
-00012410: 2020 2020 2020 2020 2063 6f6f 7264 203d           coord =
-00012420: 2067 6574 5f63 6f67 5f62 6f75 6e64 7328   get_cog_bounds(
-00012430: 6c69 6e6b 290d 0a20 2020 2020 2020 2020  link)..         
-00012440: 2020 2020 2020 2069 6620 636f 6f72 6420         if coord 
-00012450: 6973 206e 6f74 204e 6f6e 653a 0d0a 2020  is not None:..  
-00012460: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012470: 2020 636f 6f72 6473 2e61 7070 656e 6428    coords.append(
-00012480: 636f 6f72 6429 0d0a 2020 2020 2020 2020  coord)..        
-00012490: 2020 2020 6663 203d 2063 6f6f 7264 735f      fc = coords_
-000124a0: 746f 5f67 656f 6a73 6f6e 2863 6f6f 7264  to_geojson(coord
-000124b0: 7329 0d0a 0d0a 2020 2020 2020 2020 2020  s)....          
-000124c0: 2020 6765 6f5f 6a73 6f6e 203d 2069 7079    geo_json = ipy
-000124d0: 6c65 6166 6c65 742e 4765 6f4a 534f 4e28  leaflet.GeoJSON(
-000124e0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000124f0: 2020 6461 7461 3d66 632c 0d0a 2020 2020    data=fc,..    
-00012500: 2020 2020 2020 2020 2020 2020 7374 796c              styl
-00012510: 653d 7b0d 0a20 2020 2020 2020 2020 2020  e={..           
-00012520: 2020 2020 2020 2020 2022 6f70 6163 6974           "opacit
-00012530: 7922 3a20 312c 0d0a 2020 2020 2020 2020  y": 1,..        
-00012540: 2020 2020 2020 2020 2020 2020 2264 6173              "das
-00012550: 6841 7272 6179 223a 2022 3122 2c0d 0a20  hArray": "1",.. 
-00012560: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012570: 2020 2022 6669 6c6c 4f70 6163 6974 7922     "fillOpacity"
-00012580: 3a20 302c 0d0a 2020 2020 2020 2020 2020  : 0,..          
-00012590: 2020 2020 2020 2020 2020 2277 6569 6768            "weigh
-000125a0: 7422 3a20 312c 0d0a 2020 2020 2020 2020  t": 1,..        
-000125b0: 2020 2020 2020 2020 7d2c 0d0a 2020 2020          },..    
-000125c0: 2020 2020 2020 2020 2020 2020 6e61 6d65              name
-000125d0: 3d22 466f 6f74 7072 696e 7473 222c 0d0a  ="Footprints",..
-000125e0: 2020 2020 2020 2020 2020 2020 290d 0a0d              )...
-000125f0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00012600: 662e 6164 645f 6c61 7965 7228 6765 6f5f  f.add_layer(geo_
-00012610: 6a73 6f6e 290d 0a20 2020 2020 2020 2020  json)..         
-00012620: 2020 2063 656e 7465 7220 3d20 6765 745f     center = get_
-00012630: 6365 6e74 6572 2866 6329 0d0a 2020 2020  center(fc)..    
-00012640: 2020 2020 2020 2020 6966 2076 6572 626f          if verbo
-00012650: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
-00012660: 2020 2020 2070 7269 6e74 2822 5468 6520       print("The 
-00012670: 666f 6f74 7072 696e 7420 6c61 7965 7220  footprint layer 
-00012680: 6861 7320 6265 656e 2061 6464 6564 2e22  has been added."
-00012690: 290d 0a20 2020 2020 2020 2065 6c73 653a  )..        else:
-000126a0: 0d0a 2020 2020 2020 2020 2020 2020 6365  ..            ce
-000126b0: 6e74 6572 203d 2067 6574 5f63 6f67 5f63  nter = get_cog_c
-000126c0: 656e 7465 7228 6c69 6e6b 735b 305d 2c20  enter(links[0], 
-000126d0: 7469 7469 6c65 725f 656e 6470 6f69 6e74  titiler_endpoint
-000126e0: 290d 0a0d 0a20 2020 2020 2020 2073 656c  )....        sel
-000126f0: 662e 7365 745f 6365 6e74 6572 2863 656e  f.set_center(cen
-00012700: 7465 725b 305d 2c20 6365 6e74 6572 5b31  ter[0], center[1
-00012710: 5d2c 207a 6f6f 6d3d 3629 0d0a 0d0a 2020  ], zoom=6)....  
-00012720: 2020 6465 6620 6164 645f 7374 6163 5f6c    def add_stac_l
-00012730: 6179 6572 280d 0a20 2020 2020 2020 2073  ayer(..        s
-00012740: 656c 662c 0d0a 2020 2020 2020 2020 7572  elf,..        ur
-00012750: 6c2c 0d0a 2020 2020 2020 2020 6261 6e64  l,..        band
-00012760: 733d 4e6f 6e65 2c0d 0a20 2020 2020 2020  s=None,..       
-00012770: 206e 616d 653d 2255 6e74 6974 6c65 6422   name="Untitled"
-00012780: 2c0d 0a20 2020 2020 2020 2061 7474 7269  ,..        attri
-00012790: 6275 7469 6f6e 3d22 222c 0d0a 2020 2020  bution="",..    
-000127a0: 2020 2020 6f70 6163 6974 793d 312e 302c      opacity=1.0,
-000127b0: 0d0a 2020 2020 2020 2020 7368 6f77 6e3d  ..        shown=
-000127c0: 5472 7565 2c0d 0a20 2020 2020 2020 2074  True,..        t
-000127d0: 6974 696c 6572 5f65 6e64 706f 696e 743d  itiler_endpoint=
-000127e0: 2268 7474 7073 3a2f 2f61 7069 2e63 6f67  "https://api.cog
-000127f0: 656f 2e78 797a 2f22 2c0d 0a20 2020 2020  eo.xyz/",..     
-00012800: 2020 202a 2a6b 7761 7267 732c 0d0a 2020     **kwargs,..  
-00012810: 2020 293a 0d0a 2020 2020 2020 2020 2222    ):..        ""
-00012820: 2241 6464 7320 6120 5354 4143 2054 696c  "Adds a STAC Til
-00012830: 654c 6179 6572 2074 6f20 7468 6520 6d61  eLayer to the ma
-00012840: 702e 0d0a 0d0a 2020 2020 2020 2020 4172  p.....        Ar
-00012850: 6773 3a0d 0a20 2020 2020 2020 2020 2020  gs:..           
-00012860: 2075 726c 2028 7374 7229 3a20 5468 6520   url (str): The 
-00012870: 5552 4c20 6f66 2074 6865 2043 4f47 2074  URL of the COG t
-00012880: 696c 6520 6c61 7965 722e 0d0a 2020 2020  ile layer...    
-00012890: 2020 2020 2020 2020 6e61 6d65 2028 7374          name (st
-000128a0: 722c 206f 7074 696f 6e61 6c29 3a20 5468  r, optional): Th
-000128b0: 6520 6c61 7965 7220 6e61 6d65 2074 6f20  e layer name to 
-000128c0: 7573 6520 666f 7220 7468 6520 6c61 7965  use for the laye
-000128d0: 722e 2044 6566 6175 6c74 7320 746f 2027  r. Defaults to '
-000128e0: 556e 7469 746c 6564 272e 0d0a 2020 2020  Untitled'...    
-000128f0: 2020 2020 2020 2020 6174 7472 6962 7574          attribut
-00012900: 696f 6e20 2873 7472 2c20 6f70 7469 6f6e  ion (str, option
-00012910: 616c 293a 2054 6865 2061 7474 7269 6275  al): The attribu
-00012920: 7469 6f6e 2074 6f20 7573 652e 2044 6566  tion to use. Def
-00012930: 6175 6c74 7320 746f 2027 272e 0d0a 2020  aults to ''...  
-00012940: 2020 2020 2020 2020 2020 6f70 6163 6974            opacit
-00012950: 7920 2866 6c6f 6174 2c20 6f70 7469 6f6e  y (float, option
-00012960: 616c 293a 2054 6865 206f 7061 6369 7479  al): The opacity
-00012970: 206f 6620 7468 6520 6c61 7965 722e 2044   of the layer. D
-00012980: 6566 6175 6c74 7320 746f 2031 2e0d 0a20  efaults to 1... 
-00012990: 2020 2020 2020 2020 2020 2073 686f 776e             shown
-000129a0: 2028 626f 6f6c 2c20 6f70 7469 6f6e 616c   (bool, optional
-000129b0: 293a 2041 2066 6c61 6720 696e 6469 6361  ): A flag indica
-000129c0: 7469 6e67 2077 6865 7468 6572 2074 6865  ting whether the
-000129d0: 206c 6179 6572 2073 686f 756c 6420 6265   layer should be
-000129e0: 206f 6e20 6279 2064 6566 6175 6c74 2e20   on by default. 
-000129f0: 4465 6661 756c 7473 2074 6f20 5472 7565  Defaults to True
-00012a00: 2e0d 0a20 2020 2020 2020 2020 2020 2074  ...            t
-00012a10: 6974 696c 6572 5f65 6e64 706f 696e 7420  itiler_endpoint 
-00012a20: 2873 7472 2c20 6f70 7469 6f6e 616c 293a  (str, optional):
-00012a30: 2054 6974 696c 6572 2065 6e64 706f 696e   Titiler endpoin
-00012a40: 742e 2044 6566 6175 6c74 7320 746f 2022  t. Defaults to "
-00012a50: 6874 7470 733a 2f2f 6170 692e 636f 6765  https://api.coge
-00012a60: 6f2e 7879 7a2f 222e 0d0a 2020 2020 2020  o.xyz/"...      
-00012a70: 2020 2222 220d 0a20 2020 2020 2020 2074    """..        t
-00012a80: 696c 655f 7572 6c20 3d20 6765 745f 7374  ile_url = get_st
-00012a90: 6163 5f74 696c 6528 7572 6c2c 2062 616e  ac_tile(url, ban
-00012aa0: 6473 2c20 7469 7469 6c65 725f 656e 6470  ds, titiler_endp
-00012ab0: 6f69 6e74 2c20 2a2a 6b77 6172 6773 290d  oint, **kwargs).
-00012ac0: 0a20 2020 2020 2020 2063 656e 7465 7220  .        center 
-00012ad0: 3d20 6765 745f 7374 6163 5f63 656e 7465  = get_stac_cente
-00012ae0: 7228 7572 6c2c 2074 6974 696c 6572 5f65  r(url, titiler_e
-00012af0: 6e64 706f 696e 7429 0d0a 2020 2020 2020  ndpoint)..      
-00012b00: 2020 7365 6c66 2e61 6464 5f74 696c 655f    self.add_tile_
-00012b10: 6c61 7965 7228 7469 6c65 5f75 726c 2c20  layer(tile_url, 
-00012b20: 6e61 6d65 2c20 6174 7472 6962 7574 696f  name, attributio
-00012b30: 6e2c 206f 7061 6369 7479 2c20 7368 6f77  n, opacity, show
-00012b40: 6e29 0d0a 2020 2020 2020 2020 7365 6c66  n)..        self
-00012b50: 2e73 6574 5f63 656e 7465 7228 6c6f 6e3d  .set_center(lon=
-00012b60: 6365 6e74 6572 5b30 5d2c 206c 6174 3d63  center[0], lat=c
-00012b70: 656e 7465 725b 315d 2c20 7a6f 6f6d 3d31  enter[1], zoom=1
-00012b80: 3029 0d0a 0d0a 2020 2020 6465 6620 6164  0)....    def ad
-00012b90: 645f 6d69 6e69 6d61 7028 7365 6c66 2c20  d_minimap(self, 
-00012ba0: 7a6f 6f6d 3d35 2c20 706f 7369 7469 6f6e  zoom=5, position
-00012bb0: 3d22 626f 7474 6f6d 7269 6768 7422 293a  ="bottomright"):
-00012bc0: 0d0a 2020 2020 2020 2020 2222 2241 6464  ..        """Add
-00012bd0: 7320 6120 6d69 6e69 6d61 7020 286f 7665  s a minimap (ove
-00012be0: 7276 6965 7729 2074 6f20 7468 6520 6970  rview) to the ip
-00012bf0: 796c 6561 666c 6574 206d 6170 2e0d 0a0d  yleaflet map....
-00012c00: 0a20 2020 2020 2020 2041 7267 733a 0d0a  .        Args:..
-00012c10: 2020 2020 2020 2020 2020 2020 7a6f 6f6d              zoom
-00012c20: 2028 696e 742c 206f 7074 696f 6e61 6c29   (int, optional)
-00012c30: 3a20 496e 6974 6961 6c20 6d61 7020 7a6f  : Initial map zo
-00012c40: 6f6d 206c 6576 656c 2e20 4465 6661 756c  om level. Defaul
-00012c50: 7473 2074 6f20 352e 0d0a 2020 2020 2020  ts to 5...      
-00012c60: 2020 2020 2020 706f 7369 7469 6f6e 2028        position (
-00012c70: 7374 722c 206f 7074 696f 6e61 6c29 3a20  str, optional): 
-00012c80: 506f 7369 7469 6f6e 206f 6620 7468 6520  Position of the 
-00012c90: 6d69 6e69 6d61 702e 2044 6566 6175 6c74  minimap. Default
-00012ca0: 7320 746f 2022 626f 7474 6f6d 7269 6768  s to "bottomrigh
-00012cb0: 7422 2e0d 0a20 2020 2020 2020 2022 2222  t"...        """
-00012cc0: 0d0a 2020 2020 2020 2020 6d69 6e69 6d61  ..        minima
-00012cd0: 7020 3d20 6970 796c 6561 666c 6574 2e4d  p = ipyleaflet.M
-00012ce0: 6170 280d 0a20 2020 2020 2020 2020 2020  ap(..           
-00012cf0: 207a 6f6f 6d5f 636f 6e74 726f 6c3d 4661   zoom_control=Fa
-00012d00: 6c73 652c 0d0a 2020 2020 2020 2020 2020  lse,..          
-00012d10: 2020 6174 7472 6962 7574 696f 6e5f 636f    attribution_co
-00012d20: 6e74 726f 6c3d 4661 6c73 652c 0d0a 2020  ntrol=False,..  
-00012d30: 2020 2020 2020 2020 2020 7a6f 6f6d 3d7a            zoom=z
-00012d40: 6f6f 6d2c 0d0a 2020 2020 2020 2020 2020  oom,..          
-00012d50: 2020 6365 6e74 6572 3d73 656c 662e 6365    center=self.ce
-00012d60: 6e74 6572 2c0d 0a20 2020 2020 2020 2020  nter,..         
-00012d70: 2020 206c 6179 6572 733d 5b62 6173 656d     layers=[basem
-00012d80: 6170 5f74 696c 6573 5b22 524f 4144 4d41  ap_tiles["ROADMA
-00012d90: 5022 5d5d 2c0d 0a20 2020 2020 2020 2029  P"]],..        )
-00012da0: 0d0a 2020 2020 2020 2020 6d69 6e69 6d61  ..        minima
-00012db0: 702e 6c61 796f 7574 2e77 6964 7468 203d  p.layout.width =
-00012dc0: 2022 3135 3070 7822 0d0a 2020 2020 2020   "150px"..      
-00012dd0: 2020 6d69 6e69 6d61 702e 6c61 796f 7574    minimap.layout
-00012de0: 2e68 6569 6768 7420 3d20 2231 3530 7078  .height = "150px
-00012df0: 220d 0a20 2020 2020 2020 2069 7079 6c65  "..        ipyle
-00012e00: 6166 6c65 742e 6c69 6e6b 2828 6d69 6e69  aflet.link((mini
-00012e10: 6d61 702c 2022 6365 6e74 6572 2229 2c20  map, "center"), 
-00012e20: 2873 656c 662c 2022 6365 6e74 6572 2229  (self, "center")
-00012e30: 290d 0a20 2020 2020 2020 206d 696e 696d  )..        minim
-00012e40: 6170 5f63 6f6e 7472 6f6c 203d 2069 7079  ap_control = ipy
-00012e50: 6c65 6166 6c65 742e 5769 6467 6574 436f  leaflet.WidgetCo
-00012e60: 6e74 726f 6c28 7769 6467 6574 3d6d 696e  ntrol(widget=min
-00012e70: 696d 6170 2c20 706f 7369 7469 6f6e 3d70  imap, position=p
-00012e80: 6f73 6974 696f 6e29 0d0a 2020 2020 2020  osition)..      
-00012e90: 2020 7365 6c66 2e61 6464 5f63 6f6e 7472    self.add_contr
-00012ea0: 6f6c 286d 696e 696d 6170 5f63 6f6e 7472  ol(minimap_contr
-00012eb0: 6f6c 290d 0a0d 0a20 2020 2064 6566 206d  ol)....    def m
-00012ec0: 6172 6b65 725f 636c 7573 7465 7228 7365  arker_cluster(se
-00012ed0: 6c66 293a 0d0a 2020 2020 2020 2020 2222  lf):..        ""
-00012ee0: 2241 6464 7320 6120 6d61 726b 6572 2063  "Adds a marker c
-00012ef0: 6c75 7374 6572 2074 6f20 7468 6520 6d61  luster to the ma
-00012f00: 7020 616e 6420 7265 7475 726e 7320 6120  p and returns a 
-00012f10: 6c69 7374 206f 6620 6565 2e46 6561 7475  list of ee.Featu
-00012f20: 7265 2c20 7768 6963 6820 6361 6e20 6265  re, which can be
-00012f30: 2061 6363 6573 7365 6420 7573 696e 6720   accessed using 
-00012f40: 4d61 702e 6565 5f6d 6172 6b65 725f 636c  Map.ee_marker_cl
-00012f50: 7573 7465 722e 0d0a 0d0a 2020 2020 2020  uster.....      
-00012f60: 2020 5265 7475 726e 733a 0d0a 2020 2020    Returns:..    
-00012f70: 2020 2020 2020 2020 6f62 6a65 6374 3a20          object: 
-00012f80: 6120 6c69 7374 206f 6620 6565 2e46 6561  a list of ee.Fea
-00012f90: 7475 7265 0d0a 2020 2020 2020 2020 2222  ture..        ""
-00012fa0: 220d 0a20 2020 2020 2020 2063 6f6f 7264  "..        coord
-00012fb0: 696e 6174 6573 203d 205b 5d0d 0a20 2020  inates = []..   
-00012fc0: 2020 2020 206d 6172 6b65 7273 203d 205b       markers = [
-00012fd0: 5d0d 0a20 2020 2020 2020 206d 6172 6b65  ]..        marke
-00012fe0: 725f 636c 7573 7465 7220 3d20 6970 796c  r_cluster = ipyl
-00012ff0: 6561 666c 6574 2e4d 6172 6b65 7243 6c75  eaflet.MarkerClu
-00013000: 7374 6572 286e 616d 653d 224d 6172 6b65  ster(name="Marke
-00013010: 7220 436c 7573 7465 7222 290d 0a20 2020  r Cluster")..   
-00013020: 2020 2020 2073 656c 662e 6c61 7374 5f63       self.last_c
-00013030: 6c69 636b 203d 205b 5d0d 0a20 2020 2020  lick = []..     
-00013040: 2020 2073 656c 662e 616c 6c5f 636c 6963     self.all_clic
-00013050: 6b73 203d 205b 5d0d 0a20 2020 2020 2020  ks = []..       
-00013060: 2073 656c 662e 6565 5f6d 6172 6b65 7273   self.ee_markers
-00013070: 203d 205b 5d0d 0a20 2020 2020 2020 2073   = []..        s
-00013080: 656c 662e 6164 645f 6c61 7965 7228 6d61  elf.add_layer(ma
-00013090: 726b 6572 5f63 6c75 7374 6572 290d 0a0d  rker_cluster)...
-000130a0: 0a20 2020 2020 2020 2064 6566 2068 616e  .        def han
-000130b0: 646c 655f 696e 7465 7261 6374 696f 6e28  dle_interaction(
-000130c0: 2a2a 6b77 6172 6773 293a 0d0a 2020 2020  **kwargs):..    
-000130d0: 2020 2020 2020 2020 6c61 746c 6f6e 203d          latlon =
-000130e0: 206b 7761 7267 732e 6765 7428 2263 6f6f   kwargs.get("coo
-000130f0: 7264 696e 6174 6573 2229 0d0a 2020 2020  rdinates")..    
-00013100: 2020 2020 2020 2020 6966 206b 7761 7267          if kwarg
-00013110: 732e 6765 7428 2274 7970 6522 2920 3d3d  s.get("type") ==
-00013120: 2022 636c 6963 6b22 3a0d 0a20 2020 2020   "click":..     
-00013130: 2020 2020 2020 2020 2020 2063 6f6f 7264             coord
-00013140: 696e 6174 6573 2e61 7070 656e 6428 6c61  inates.append(la
-00013150: 746c 6f6e 290d 0a20 2020 2020 2020 2020  tlon)..         
-00013160: 2020 2020 2020 2067 656f 6d20 3d20 6565         geom = ee
-00013170: 2e47 656f 6d65 7472 792e 506f 696e 7428  .Geometry.Point(
-00013180: 6c61 746c 6f6e 5b31 5d2c 206c 6174 6c6f  latlon[1], latlo
-00013190: 6e5b 305d 290d 0a20 2020 2020 2020 2020  n[0])..         
-000131a0: 2020 2020 2020 2066 6561 7475 7265 203d         feature =
-000131b0: 2065 652e 4665 6174 7572 6528 6765 6f6d   ee.Feature(geom
-000131c0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-000131d0: 2020 2073 656c 662e 6565 5f6d 6172 6b65     self.ee_marke
-000131e0: 7273 2e61 7070 656e 6428 6665 6174 7572  rs.append(featur
-000131f0: 6529 0d0a 2020 2020 2020 2020 2020 2020  e)..            
-00013200: 2020 2020 7365 6c66 2e6c 6173 745f 636c      self.last_cl
-00013210: 6963 6b20 3d20 6c61 746c 6f6e 0d0a 2020  ick = latlon..  
-00013220: 2020 2020 2020 2020 2020 2020 2020 7365                se
-00013230: 6c66 2e61 6c6c 5f63 6c69 636b 7320 3d20  lf.all_clicks = 
-00013240: 636f 6f72 6469 6e61 7465 730d 0a20 2020  coordinates..   
-00013250: 2020 2020 2020 2020 2020 2020 206d 6172               mar
-00013260: 6b65 7273 2e61 7070 656e 6428 6970 796c  kers.append(ipyl
-00013270: 6561 666c 6574 2e4d 6172 6b65 7228 6c6f  eaflet.Marker(lo
-00013280: 6361 7469 6f6e 3d6c 6174 6c6f 6e29 290d  cation=latlon)).
-00013290: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000132a0: 206d 6172 6b65 725f 636c 7573 7465 722e   marker_cluster.
-000132b0: 6d61 726b 6572 7320 3d20 6d61 726b 6572  markers = marker
-000132c0: 730d 0a20 2020 2020 2020 2020 2020 2065  s..            e
-000132d0: 6c69 6620 6b77 6172 6773 2e67 6574 2822  lif kwargs.get("
-000132e0: 7479 7065 2229 203d 3d20 226d 6f75 7365  type") == "mouse
-000132f0: 6d6f 7665 223a 0d0a 2020 2020 2020 2020  move":..        
-00013300: 2020 2020 2020 2020 7061 7373 0d0a 0d0a          pass....
-00013310: 2020 2020 2020 2020 2320 6375 7273 6f72          # cursor
-00013320: 2073 7479 6c65 3a20 6874 7470 733a 2f2f   style: https://
-00013330: 7777 772e 7733 7363 686f 6f6c 732e 636f  www.w3schools.co
-00013340: 6d2f 6373 7372 6566 2f70 725f 636c 6173  m/cssref/pr_clas
-00013350: 735f 6375 7273 6f72 2e61 7370 0d0a 2020  s_cursor.asp..  
-00013360: 2020 2020 2020 7365 6c66 2e64 6566 6175        self.defau
-00013370: 6c74 5f73 7479 6c65 203d 207b 2263 7572  lt_style = {"cur
-00013380: 736f 7222 3a20 2263 726f 7373 6861 6972  sor": "crosshair
-00013390: 227d 0d0a 2020 2020 2020 2020 7365 6c66  "}..        self
-000133a0: 2e6f 6e5f 696e 7465 7261 6374 696f 6e28  .on_interaction(
-000133b0: 6861 6e64 6c65 5f69 6e74 6572 6163 7469  handle_interacti
-000133c0: 6f6e 290d 0a0d 0a20 2020 2064 6566 2073  on)....    def s
-000133d0: 6574 5f70 6c6f 745f 6f70 7469 6f6e 7328  et_plot_options(
-000133e0: 0d0a 2020 2020 2020 2020 7365 6c66 2c0d  ..        self,.
-000133f0: 0a20 2020 2020 2020 2061 6464 5f6d 6172  .        add_mar
-00013400: 6b65 725f 636c 7573 7465 723d 4661 6c73  ker_cluster=Fals
-00013410: 652c 0d0a 2020 2020 2020 2020 7361 6d70  e,..        samp
-00013420: 6c65 5f73 6361 6c65 3d4e 6f6e 652c 0d0a  le_scale=None,..
-00013430: 2020 2020 2020 2020 706c 6f74 5f74 7970          plot_typ
-00013440: 653d 4e6f 6e65 2c0d 0a20 2020 2020 2020  e=None,..       
-00013450: 206f 7665 726c 6179 3d46 616c 7365 2c0d   overlay=False,.
-00013460: 0a20 2020 2020 2020 2070 6f73 6974 696f  .        positio
-00013470: 6e3d 2262 6f74 746f 6d72 6967 6874 222c  n="bottomright",
-00013480: 0d0a 2020 2020 2020 2020 6d69 6e5f 7769  ..        min_wi
-00013490: 6474 683d 4e6f 6e65 2c0d 0a20 2020 2020  dth=None,..     
-000134a0: 2020 206d 6178 5f77 6964 7468 3d4e 6f6e     max_width=Non
-000134b0: 652c 0d0a 2020 2020 2020 2020 6d69 6e5f  e,..        min_
-000134c0: 6865 6967 6874 3d4e 6f6e 652c 0d0a 2020  height=None,..  
-000134d0: 2020 2020 2020 6d61 785f 6865 6967 6874        max_height
-000134e0: 3d4e 6f6e 652c 0d0a 2020 2020 2020 2020  =None,..        
-000134f0: 2a2a 6b77 6172 6773 2c0d 0a20 2020 2029  **kwargs,..    )
-00013500: 3a0d 0a20 2020 2020 2020 2022 2222 5365  :..        """Se
-00013510: 7473 2070 6c6f 7474 696e 6720 6f70 7469  ts plotting opti
-00013520: 6f6e 732e 0d0a 0d0a 2020 2020 2020 2020  ons.....        
-00013530: 4172 6773 3a0d 0a20 2020 2020 2020 2020  Args:..         
-00013540: 2020 2061 6464 5f6d 6172 6b65 725f 636c     add_marker_cl
-00013550: 7573 7465 7220 2862 6f6f 6c2c 206f 7074  uster (bool, opt
-00013560: 696f 6e61 6c29 3a20 5768 6574 6865 7220  ional): Whether 
-00013570: 746f 2061 6464 2061 206d 6172 6b65 7220  to add a marker 
-00013580: 636c 7573 7465 722e 2044 6566 6175 6c74  cluster. Default
-00013590: 7320 746f 2046 616c 7365 2e0d 0a20 2020  s to False...   
-000135a0: 2020 2020 2020 2020 2073 616d 706c 655f           sample_
-000135b0: 7363 616c 6520 2866 6c6f 6174 2c20 6f70  scale (float, op
-000135c0: 7469 6f6e 616c 293a 2020 4120 6e6f 6d69  tional):  A nomi
-000135d0: 6e61 6c20 7363 616c 6520 696e 206d 6574  nal scale in met
-000135e0: 6572 7320 6f66 2074 6865 2070 726f 6a65  ers of the proje
-000135f0: 6374 696f 6e20 746f 2073 616d 706c 6520  ction to sample 
-00013600: 696e 202e 2044 6566 6175 6c74 7320 746f  in . Defaults to
-00013610: 204e 6f6e 652e 0d0a 2020 2020 2020 2020   None...        
-00013620: 2020 2020 706c 6f74 5f74 7970 6520 2873      plot_type (s
-00013630: 7472 2c20 6f70 7469 6f6e 616c 293a 2054  tr, optional): T
-00013640: 6865 2070 6c6f 7420 7479 7065 2063 616e  he plot type can
-00013650: 2062 6520 6f6e 6520 6f66 2022 4e6f 6e65   be one of "None
-00013660: 222c 2022 6261 7222 2c20 2273 6361 7474  ", "bar", "scatt
-00013670: 6572 2220 6f72 2022 6869 7374 222e 2044  er" or "hist". D
-00013680: 6566 6175 6c74 7320 746f 204e 6f6e 652e  efaults to None.
-00013690: 0d0a 2020 2020 2020 2020 2020 2020 6f76  ..            ov
-000136a0: 6572 6c61 7920 2862 6f6f 6c2c 206f 7074  erlay (bool, opt
-000136b0: 696f 6e61 6c29 3a20 5768 6574 6865 7220  ional): Whether 
-000136c0: 746f 206f 7665 726c 6179 2070 6c6f 7474  to overlay plott
-000136d0: 6564 206c 696e 6573 206f 6e20 7468 6520  ed lines on the 
-000136e0: 6669 6775 7265 2e20 4465 6661 756c 7473  figure. Defaults
-000136f0: 2074 6f20 4661 6c73 652e 0d0a 2020 2020   to False...    
-00013700: 2020 2020 2020 2020 706f 7369 7469 6f6e          position
-00013710: 2028 7374 722c 206f 7074 696f 6e61 6c29   (str, optional)
-00013720: 3a20 506f 7369 7469 6f6e 206f 6620 7468  : Position of th
-00013730: 6520 636f 6e74 726f 6c2c 2063 616e 2062  e control, can b
-00013740: 6520 e280 9862 6f74 746f 6d6c 6566 74e2  e ...bottomleft.
-00013750: 8099 2c20 e280 9862 6f74 746f 6d72 6967  .., ...bottomrig
-00013760: 6874 e280 992c 20e2 8098 746f 706c 6566  ht..., ...toplef
-00013770: 74e2 8099 2c20 6f72 20e2 8098 746f 7072  t..., or ...topr
-00013780: 6967 6874 e280 992e 2044 6566 6175 6c74  ight.... Default
-00013790: 7320 746f 2027 626f 7474 6f6d 7269 6768  s to 'bottomrigh
-000137a0: 7427 2e0d 0a20 2020 2020 2020 2020 2020  t'...           
-000137b0: 206d 696e 5f77 6964 7468 2028 696e 742c   min_width (int,
-000137c0: 206f 7074 696f 6e61 6c29 3a20 4d69 6e20   optional): Min 
-000137d0: 7769 6474 6820 6f66 2074 6865 2077 6964  width of the wid
-000137e0: 6765 7420 2869 6e20 7069 7865 6c73 292c  get (in pixels),
-000137f0: 2069 6620 4e6f 6e65 2069 7420 7769 6c6c   if None it will
-00013800: 2072 6573 7065 6374 2074 6865 2063 6f6e   respect the con
-00013810: 7465 6e74 2073 697a 652e 2044 6566 6175  tent size. Defau
-00013820: 6c74 7320 746f 204e 6f6e 652e 0d0a 2020  lts to None...  
-00013830: 2020 2020 2020 2020 2020 6d61 785f 7769            max_wi
-00013840: 6474 6820 2869 6e74 2c20 6f70 7469 6f6e  dth (int, option
-00013850: 616c 293a 204d 6178 2077 6964 7468 206f  al): Max width o
-00013860: 6620 7468 6520 7769 6467 6574 2028 696e  f the widget (in
-00013870: 2070 6978 656c 7329 2c20 6966 204e 6f6e   pixels), if Non
-00013880: 6520 6974 2077 696c 6c20 7265 7370 6563  e it will respec
-00013890: 7420 7468 6520 636f 6e74 656e 7420 7369  t the content si
-000138a0: 7a65 2e20 4465 6661 756c 7473 2074 6f20  ze. Defaults to 
-000138b0: 4e6f 6e65 2e0d 0a20 2020 2020 2020 2020  None...         
-000138c0: 2020 206d 696e 5f68 6569 6768 7420 2869     min_height (i
-000138d0: 6e74 2c20 6f70 7469 6f6e 616c 293a 204d  nt, optional): M
-000138e0: 696e 2068 6569 6768 7420 6f66 2074 6865  in height of the
-000138f0: 2077 6964 6765 7420 2869 6e20 7069 7865   widget (in pixe
-00013900: 6c73 292c 2069 6620 4e6f 6e65 2069 7420  ls), if None it 
-00013910: 7769 6c6c 2072 6573 7065 6374 2074 6865  will respect the
-00013920: 2063 6f6e 7465 6e74 2073 697a 652e 2044   content size. D
-00013930: 6566 6175 6c74 7320 746f 204e 6f6e 652e  efaults to None.
-00013940: 0d0a 2020 2020 2020 2020 2020 2020 6d61  ..            ma
-00013950: 785f 6865 6967 6874 2028 696e 742c 206f  x_height (int, o
-00013960: 7074 696f 6e61 6c29 3a20 4d61 7820 6865  ptional): Max he
-00013970: 6967 6874 206f 6620 7468 6520 7769 6467  ight of the widg
-00013980: 6574 2028 696e 2070 6978 656c 7329 2c20  et (in pixels), 
-00013990: 6966 204e 6f6e 6520 6974 2077 696c 6c20  if None it will 
-000139a0: 7265 7370 6563 7420 7468 6520 636f 6e74  respect the cont
-000139b0: 656e 7420 7369 7a65 2e20 4465 6661 756c  ent size. Defaul
-000139c0: 7473 2074 6f20 4e6f 6e65 2e0d 0a0d 0a20  ts to None..... 
-000139d0: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
-000139e0: 2020 2020 706c 6f74 5f6f 7074 696f 6e73      plot_options
-000139f0: 5f64 6963 7420 3d20 7b7d 0d0a 2020 2020  _dict = {}..    
-00013a00: 2020 2020 706c 6f74 5f6f 7074 696f 6e73      plot_options
-00013a10: 5f64 6963 745b 2261 6464 5f6d 6172 6b65  _dict["add_marke
-00013a20: 725f 636c 7573 7465 7222 5d20 3d20 6164  r_cluster"] = ad
-00013a30: 645f 6d61 726b 6572 5f63 6c75 7374 6572  d_marker_cluster
-00013a40: 0d0a 2020 2020 2020 2020 706c 6f74 5f6f  ..        plot_o
-00013a50: 7074 696f 6e73 5f64 6963 745b 2273 616d  ptions_dict["sam
-00013a60: 706c 655f 7363 616c 6522 5d20 3d20 7361  ple_scale"] = sa
-00013a70: 6d70 6c65 5f73 6361 6c65 0d0a 2020 2020  mple_scale..    
-00013a80: 2020 2020 706c 6f74 5f6f 7074 696f 6e73      plot_options
-00013a90: 5f64 6963 745b 2270 6c6f 745f 7479 7065  _dict["plot_type
-00013aa0: 225d 203d 2070 6c6f 745f 7479 7065 0d0a  "] = plot_type..
-00013ab0: 2020 2020 2020 2020 706c 6f74 5f6f 7074          plot_opt
-00013ac0: 696f 6e73 5f64 6963 745b 226f 7665 726c  ions_dict["overl
-00013ad0: 6179 225d 203d 206f 7665 726c 6179 0d0a  ay"] = overlay..
-00013ae0: 2020 2020 2020 2020 706c 6f74 5f6f 7074          plot_opt
-00013af0: 696f 6e73 5f64 6963 745b 2270 6f73 6974  ions_dict["posit
-00013b00: 696f 6e22 5d20 3d20 706f 7369 7469 6f6e  ion"] = position
-00013b10: 0d0a 2020 2020 2020 2020 706c 6f74 5f6f  ..        plot_o
-00013b20: 7074 696f 6e73 5f64 6963 745b 226d 696e  ptions_dict["min
-00013b30: 5f77 6964 7468 225d 203d 206d 696e 5f77  _width"] = min_w
-00013b40: 6964 7468 0d0a 2020 2020 2020 2020 706c  idth..        pl
-00013b50: 6f74 5f6f 7074 696f 6e73 5f64 6963 745b  ot_options_dict[
-00013b60: 226d 6178 5f77 6964 7468 225d 203d 206d  "max_width"] = m
-00013b70: 6178 5f77 6964 7468 0d0a 2020 2020 2020  ax_width..      
-00013b80: 2020 706c 6f74 5f6f 7074 696f 6e73 5f64    plot_options_d
-00013b90: 6963 745b 226d 696e 5f68 6569 6768 7422  ict["min_height"
-00013ba0: 5d20 3d20 6d69 6e5f 6865 6967 6874 0d0a  ] = min_height..
-00013bb0: 2020 2020 2020 2020 706c 6f74 5f6f 7074          plot_opt
-00013bc0: 696f 6e73 5f64 6963 745b 226d 6178 5f68  ions_dict["max_h
-00013bd0: 6569 6768 7422 5d20 3d20 6d61 785f 6865  eight"] = max_he
-00013be0: 6967 6874 0d0a 0d0a 2020 2020 2020 2020  ight....        
-00013bf0: 666f 7220 6b65 7920 696e 206b 7761 7267  for key in kwarg
-00013c00: 732e 6b65 7973 2829 3a0d 0a20 2020 2020  s.keys():..     
-00013c10: 2020 2020 2020 2070 6c6f 745f 6f70 7469         plot_opti
-00013c20: 6f6e 735f 6469 6374 5b6b 6579 5d20 3d20  ons_dict[key] = 
-00013c30: 6b77 6172 6773 5b6b 6579 5d0d 0a0d 0a20  kwargs[key].... 
-00013c40: 2020 2020 2020 2073 656c 662e 706c 6f74         self.plot
-00013c50: 5f6f 7074 696f 6e73 203d 2070 6c6f 745f  _options = plot_
-00013c60: 6f70 7469 6f6e 735f 6469 6374 0d0a 0d0a  options_dict....
-00013c70: 2020 2020 2020 2020 6966 2061 6464 5f6d          if add_m
-00013c80: 6172 6b65 725f 636c 7573 7465 7220 616e  arker_cluster an
-00013c90: 6420 2873 656c 662e 706c 6f74 5f6d 6172  d (self.plot_mar
-00013ca0: 6b65 725f 636c 7573 7465 7220 6e6f 7420  ker_cluster not 
-00013cb0: 696e 2073 656c 662e 6c61 7965 7273 293a  in self.layers):
-00013cc0: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-00013cd0: 6c66 2e61 6464 5f6c 6179 6572 2873 656c  lf.add_layer(sel
-00013ce0: 662e 706c 6f74 5f6d 6172 6b65 725f 636c  f.plot_marker_cl
-00013cf0: 7573 7465 7229 0d0a 0d0a 2020 2020 6465  uster)....    de
-00013d00: 6620 706c 6f74 280d 0a20 2020 2020 2020  f plot(..       
-00013d10: 2073 656c 662c 0d0a 2020 2020 2020 2020   self,..        
-00013d20: 782c 0d0a 2020 2020 2020 2020 792c 0d0a  x,..        y,..
-00013d30: 2020 2020 2020 2020 706c 6f74 5f74 7970          plot_typ
-00013d40: 653d 4e6f 6e65 2c0d 0a20 2020 2020 2020  e=None,..       
-00013d50: 206f 7665 726c 6179 3d46 616c 7365 2c0d   overlay=False,.
-00013d60: 0a20 2020 2020 2020 2070 6f73 6974 696f  .        positio
-00013d70: 6e3d 2262 6f74 746f 6d72 6967 6874 222c  n="bottomright",
-00013d80: 0d0a 2020 2020 2020 2020 6d69 6e5f 7769  ..        min_wi
-00013d90: 6474 683d 4e6f 6e65 2c0d 0a20 2020 2020  dth=None,..     
-00013da0: 2020 206d 6178 5f77 6964 7468 3d4e 6f6e     max_width=Non
-00013db0: 652c 0d0a 2020 2020 2020 2020 6d69 6e5f  e,..        min_
-00013dc0: 6865 6967 6874 3d4e 6f6e 652c 0d0a 2020  height=None,..  
-00013dd0: 2020 2020 2020 6d61 785f 6865 6967 6874        max_height
-00013de0: 3d4e 6f6e 652c 0d0a 2020 2020 2020 2020  =None,..        
-00013df0: 2a2a 6b77 6172 6773 2c0d 0a20 2020 2029  **kwargs,..    )
-00013e00: 3a0d 0a20 2020 2020 2020 2022 2222 4372  :..        """Cr
-00013e10: 6561 7465 7320 6120 706c 6f74 2062 6173  eates a plot bas
-00013e20: 6564 206f 6e20 782d 6172 7261 7920 616e  ed on x-array an
-00013e30: 6420 792d 6172 7261 7920 6461 7461 2e0d  d y-array data..
-00013e40: 0a0d 0a20 2020 2020 2020 2041 7267 733a  ...        Args:
-00013e50: 0d0a 2020 2020 2020 2020 2020 2020 7820  ..            x 
-00013e60: 286e 756d 7079 2e6e 6461 7272 6179 206f  (numpy.ndarray o
-00013e70: 7220 6c69 7374 293a 2054 6865 2078 2d63  r list): The x-c
-00013e80: 6f6f 7264 696e 6174 6573 206f 6620 7468  oordinates of th
-00013e90: 6520 706c 6f74 7465 6420 6c69 6e65 2e0d  e plotted line..
-00013ea0: 0a20 2020 2020 2020 2020 2020 2079 2028  .            y (
-00013eb0: 6e75 6d70 792e 6e64 6172 7261 7920 6f72  numpy.ndarray or
-00013ec0: 206c 6973 7429 3a20 5468 6520 792d 636f   list): The y-co
-00013ed0: 6f72 6469 6e61 7465 7320 6f66 2074 6865  ordinates of the
-00013ee0: 2070 6c6f 7474 6564 206c 696e 652e 0d0a   plotted line...
-00013ef0: 2020 2020 2020 2020 2020 2020 706c 6f74              plot
-00013f00: 5f74 7970 6520 2873 7472 2c20 6f70 7469  _type (str, opti
-00013f10: 6f6e 616c 293a 2054 6865 2070 6c6f 7420  onal): The plot 
-00013f20: 7479 7065 2063 616e 2062 6520 6f6e 6520  type can be one 
-00013f30: 6f66 2022 4e6f 6e65 222c 2022 6261 7222  of "None", "bar"
-00013f40: 2c20 2273 6361 7474 6572 2220 6f72 2022  , "scatter" or "
-00013f50: 6869 7374 222e 2044 6566 6175 6c74 7320  hist". Defaults 
-00013f60: 746f 204e 6f6e 652e 0d0a 2020 2020 2020  to None...      
-00013f70: 2020 2020 2020 6f76 6572 6c61 7920 2862        overlay (b
-00013f80: 6f6f 6c2c 206f 7074 696f 6e61 6c29 3a20  ool, optional): 
-00013f90: 5768 6574 6865 7220 746f 206f 7665 726c  Whether to overl
-00013fa0: 6179 2070 6c6f 7474 6564 206c 696e 6573  ay plotted lines
-00013fb0: 206f 6e20 7468 6520 6669 6775 7265 2e20   on the figure. 
-00013fc0: 4465 6661 756c 7473 2074 6f20 4661 6c73  Defaults to Fals
-00013fd0: 652e 0d0a 2020 2020 2020 2020 2020 2020  e...            
-00013fe0: 706f 7369 7469 6f6e 2028 7374 722c 206f  position (str, o
-00013ff0: 7074 696f 6e61 6c29 3a20 506f 7369 7469  ptional): Positi
-00014000: 6f6e 206f 6620 7468 6520 636f 6e74 726f  on of the contro
-00014010: 6c2c 2063 616e 2062 6520 e280 9862 6f74  l, can be ...bot
-00014020: 746f 6d6c 6566 74e2 8099 2c20 e280 9862  tomleft..., ...b
-00014030: 6f74 746f 6d72 6967 6874 e280 992c 20e2  ottomright..., .
-00014040: 8098 746f 706c 6566 74e2 8099 2c20 6f72  ..topleft..., or
-00014050: 20e2 8098 746f 7072 6967 6874 e280 992e   ...topright....
-00014060: 2044 6566 6175 6c74 7320 746f 2027 626f   Defaults to 'bo
-00014070: 7474 6f6d 7269 6768 7427 2e0d 0a20 2020  ttomright'...   
-00014080: 2020 2020 2020 2020 206d 696e 5f77 6964           min_wid
-00014090: 7468 2028 696e 742c 206f 7074 696f 6e61  th (int, optiona
-000140a0: 6c29 3a20 4d69 6e20 7769 6474 6820 6f66  l): Min width of
-000140b0: 2074 6865 2077 6964 6765 7420 2869 6e20   the widget (in 
-000140c0: 7069 7865 6c73 292c 2069 6620 4e6f 6e65  pixels), if None
-000140d0: 2069 7420 7769 6c6c 2072 6573 7065 6374   it will respect
-000140e0: 2074 6865 2063 6f6e 7465 6e74 2073 697a   the content siz
-000140f0: 652e 2044 6566 6175 6c74 7320 746f 204e  e. Defaults to N
-00014100: 6f6e 652e 0d0a 2020 2020 2020 2020 2020  one...          
-00014110: 2020 6d61 785f 7769 6474 6820 2869 6e74    max_width (int
-00014120: 2c20 6f70 7469 6f6e 616c 293a 204d 6178  , optional): Max
-00014130: 2077 6964 7468 206f 6620 7468 6520 7769   width of the wi
-00014140: 6467 6574 2028 696e 2070 6978 656c 7329  dget (in pixels)
-00014150: 2c20 6966 204e 6f6e 6520 6974 2077 696c  , if None it wil
-00014160: 6c20 7265 7370 6563 7420 7468 6520 636f  l respect the co
-00014170: 6e74 656e 7420 7369 7a65 2e20 4465 6661  ntent size. Defa
-00014180: 756c 7473 2074 6f20 4e6f 6e65 2e0d 0a20  ults to None... 
-00014190: 2020 2020 2020 2020 2020 206d 696e 5f68             min_h
-000141a0: 6569 6768 7420 2869 6e74 2c20 6f70 7469  eight (int, opti
-000141b0: 6f6e 616c 293a 204d 696e 2068 6569 6768  onal): Min heigh
-000141c0: 7420 6f66 2074 6865 2077 6964 6765 7420  t of the widget 
-000141d0: 2869 6e20 7069 7865 6c73 292c 2069 6620  (in pixels), if 
-000141e0: 4e6f 6e65 2069 7420 7769 6c6c 2072 6573  None it will res
-000141f0: 7065 6374 2074 6865 2063 6f6e 7465 6e74  pect the content
-00014200: 2073 697a 652e 2044 6566 6175 6c74 7320   size. Defaults 
-00014210: 746f 204e 6f6e 652e 0d0a 2020 2020 2020  to None...      
-00014220: 2020 2020 2020 6d61 785f 6865 6967 6874        max_height
-00014230: 2028 696e 742c 206f 7074 696f 6e61 6c29   (int, optional)
-00014240: 3a20 4d61 7820 6865 6967 6874 206f 6620  : Max height of 
-00014250: 7468 6520 7769 6467 6574 2028 696e 2070  the widget (in p
-00014260: 6978 656c 7329 2c20 6966 204e 6f6e 6520  ixels), if None 
-00014270: 6974 2077 696c 6c20 7265 7370 6563 7420  it will respect 
-00014280: 7468 6520 636f 6e74 656e 7420 7369 7a65  the content size
-00014290: 2e20 4465 6661 756c 7473 2074 6f20 4e6f  . Defaults to No
-000142a0: 6e65 2e0d 0a0d 0a20 2020 2020 2020 2022  ne.....        "
-000142b0: 2222 0d0a 2020 2020 2020 2020 6966 2073  ""..        if s
-000142c0: 656c 662e 706c 6f74 5f77 6964 6765 7420  elf.plot_widget 
-000142d0: 6973 206e 6f74 204e 6f6e 653a 0d0a 2020  is not None:..  
-000142e0: 2020 2020 2020 2020 2020 706c 6f74 5f77            plot_w
-000142f0: 6964 6765 7420 3d20 7365 6c66 2e70 6c6f  idget = self.plo
-00014300: 745f 7769 6467 6574 0d0a 2020 2020 2020  t_widget..      
-00014310: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
-00014320: 2020 2020 2070 6c6f 745f 7769 6467 6574       plot_widget
-00014330: 203d 2077 6964 6765 7473 2e4f 7574 7075   = widgets.Outpu
-00014340: 7428 6c61 796f 7574 3d7b 2262 6f72 6465  t(layout={"borde
-00014350: 7222 3a20 2231 7078 2073 6f6c 6964 2062  r": "1px solid b
-00014360: 6c61 636b 227d 290d 0a20 2020 2020 2020  lack"})..       
-00014370: 2020 2020 2070 6c6f 745f 636f 6e74 726f       plot_contro
-00014380: 6c20 3d20 6970 796c 6561 666c 6574 2e57  l = ipyleaflet.W
-00014390: 6964 6765 7443 6f6e 7472 6f6c 280d 0a20  idgetControl(.. 
-000143a0: 2020 2020 2020 2020 2020 2020 2020 2077                 w
-000143b0: 6964 6765 743d 706c 6f74 5f77 6964 6765  idget=plot_widge
-000143c0: 742c 0d0a 2020 2020 2020 2020 2020 2020  t,..            
-000143d0: 2020 2020 706f 7369 7469 6f6e 3d70 6f73      position=pos
-000143e0: 6974 696f 6e2c 0d0a 2020 2020 2020 2020  ition,..        
-000143f0: 2020 2020 2020 2020 6d69 6e5f 7769 6474          min_widt
-00014400: 683d 6d69 6e5f 7769 6474 682c 0d0a 2020  h=min_width,..  
-00014410: 2020 2020 2020 2020 2020 2020 2020 6d61                ma
-00014420: 785f 7769 6474 683d 6d61 785f 7769 6474  x_width=max_widt
-00014430: 682c 0d0a 2020 2020 2020 2020 2020 2020  h,..            
-00014440: 2020 2020 6d69 6e5f 6865 6967 6874 3d6d      min_height=m
-00014450: 696e 5f68 6569 6768 742c 0d0a 2020 2020  in_height,..    
-00014460: 2020 2020 2020 2020 2020 2020 6d61 785f              max_
-00014470: 6865 6967 6874 3d6d 6178 5f68 6569 6768  height=max_heigh
-00014480: 742c 0d0a 2020 2020 2020 2020 2020 2020  t,..            
-00014490: 290d 0a20 2020 2020 2020 2020 2020 2073  )..            s
-000144a0: 656c 662e 706c 6f74 5f77 6964 6765 7420  elf.plot_widget 
-000144b0: 3d20 706c 6f74 5f77 6964 6765 740d 0a20  = plot_widget.. 
-000144c0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-000144d0: 706c 6f74 5f63 6f6e 7472 6f6c 203d 2070  plot_control = p
-000144e0: 6c6f 745f 636f 6e74 726f 6c0d 0a20 2020  lot_control..   
-000144f0: 2020 2020 2020 2020 2073 656c 662e 6164           self.ad
-00014500: 645f 636f 6e74 726f 6c28 706c 6f74 5f63  d_control(plot_c
-00014510: 6f6e 7472 6f6c 290d 0a0d 0a20 2020 2020  ontrol)....     
-00014520: 2020 2069 6620 6d61 785f 7769 6474 6820     if max_width 
-00014530: 6973 204e 6f6e 653a 0d0a 2020 2020 2020  is None:..      
-00014540: 2020 2020 2020 6d61 785f 7769 6474 6820        max_width 
-00014550: 3d20 3530 300d 0a20 2020 2020 2020 2069  = 500..        i
-00014560: 6620 6d61 785f 6865 6967 6874 2069 7320  f max_height is 
-00014570: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
-00014580: 2020 206d 6178 5f68 6569 6768 7420 3d20     max_height = 
-00014590: 3330 300d 0a0d 0a20 2020 2020 2020 2069  300....        i
-000145a0: 6620 2870 6c6f 745f 7479 7065 2069 7320  f (plot_type is 
-000145b0: 4e6f 6e65 2920 616e 6420 2822 6d61 726b  None) and ("mark
-000145c0: 6572 7322 206e 6f74 2069 6e20 6b77 6172  ers" not in kwar
-000145d0: 6773 2e6b 6579 7328 2929 3a0d 0a20 2020  gs.keys()):..   
-000145e0: 2020 2020 2020 2020 206b 7761 7267 735b           kwargs[
-000145f0: 226d 6172 6b65 7273 225d 203d 2022 6369  "markers"] = "ci
-00014600: 7263 6c65 220d 0a0d 0a20 2020 2020 2020  rcle"....       
-00014610: 2077 6974 6820 706c 6f74 5f77 6964 6765   with plot_widge
-00014620: 743a 0d0a 2020 2020 2020 2020 2020 2020  t:..            
-00014630: 7472 793a 0d0a 2020 2020 2020 2020 2020  try:..          
-00014640: 2020 2020 2020 6669 6720 3d20 706c 742e        fig = plt.
-00014650: 6669 6775 7265 2831 2c20 2a2a 6b77 6172  figure(1, **kwar
-00014660: 6773 290d 0a20 2020 2020 2020 2020 2020  gs)..           
-00014670: 2020 2020 2069 6620 6d61 785f 7769 6474       if max_widt
-00014680: 6820 6973 206e 6f74 204e 6f6e 653a 0d0a  h is not None:..
-00014690: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000146a0: 2020 2020 6669 672e 6c61 796f 7574 2e77      fig.layout.w
-000146b0: 6964 7468 203d 2073 7472 286d 6178 5f77  idth = str(max_w
-000146c0: 6964 7468 2920 2b20 2270 7822 0d0a 2020  idth) + "px"..  
-000146d0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-000146e0: 206d 6178 5f68 6569 6768 7420 6973 206e   max_height is n
-000146f0: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
-00014700: 2020 2020 2020 2020 2020 2020 2020 6669                fi
-00014710: 672e 6c61 796f 7574 2e68 6569 6768 7420  g.layout.height 
-00014720: 3d20 7374 7228 6d61 785f 6865 6967 6874  = str(max_height
-00014730: 2920 2b20 2270 7822 0d0a 0d0a 2020 2020  ) + "px"....    
-00014740: 2020 2020 2020 2020 2020 2020 706c 6f74              plot
-00014750: 5f77 6964 6765 742e 636c 6561 725f 6f75  _widget.clear_ou
-00014760: 7470 7574 2877 6169 743d 5472 7565 290d  tput(wait=True).
-00014770: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00014780: 2069 6620 6e6f 7420 6f76 6572 6c61 793a   if not overlay:
-00014790: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000147a0: 2020 2020 2020 706c 742e 636c 6561 7228        plt.clear(
-000147b0: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
-000147c0: 2020 2020 2069 6620 706c 6f74 5f74 7970       if plot_typ
-000147d0: 6520 6973 204e 6f6e 653a 0d0a 2020 2020  e is None:..    
-000147e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000147f0: 6966 2022 6d61 726b 6572 2220 6e6f 7420  if "marker" not 
-00014800: 696e 206b 7761 7267 732e 6b65 7973 2829  in kwargs.keys()
-00014810: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00014820: 2020 2020 2020 2020 2020 206b 7761 7267             kwarg
-00014830: 735b 226d 6172 6b65 7222 5d20 3d20 2263  s["marker"] = "c
-00014840: 6972 636c 6522 0d0a 2020 2020 2020 2020  ircle"..        
-00014850: 2020 2020 2020 2020 2020 2020 706c 742e              plt.
-00014860: 706c 6f74 2878 2c20 792c 202a 2a6b 7761  plot(x, y, **kwa
-00014870: 7267 7329 0d0a 2020 2020 2020 2020 2020  rgs)..          
-00014880: 2020 2020 2020 656c 6966 2070 6c6f 745f        elif plot_
-00014890: 7479 7065 203d 3d20 2262 6172 223a 0d0a  type == "bar":..
+0000e150: 6374 2c20 6565 2e49 6d61 6765 290d 0a20  ct, ee.Image).. 
+0000e160: 2020 2020 2020 2020 2020 2061 6e64 206e             and n
+0000e170: 6f74 2069 7369 6e73 7461 6e63 6528 6565  ot isinstance(ee
+0000e180: 5f6f 626a 6563 742c 2065 652e 496d 6167  _object, ee.Imag
+0000e190: 6543 6f6c 6c65 6374 696f 6e29 0d0a 2020  eCollection)..  
+0000e1a0: 2020 2020 2020 2020 2020 616e 6420 6e6f            and no
+0000e1b0: 7420 6973 696e 7374 616e 6365 2865 655f  t isinstance(ee_
+0000e1c0: 6f62 6a65 6374 2c20 6565 2e46 6561 7475  object, ee.Featu
+0000e1d0: 7265 436f 6c6c 6563 7469 6f6e 290d 0a20  reCollection).. 
+0000e1e0: 2020 2020 2020 2020 2020 2061 6e64 206e             and n
+0000e1f0: 6f74 2069 7369 6e73 7461 6e63 6528 6565  ot isinstance(ee
+0000e200: 5f6f 626a 6563 742c 2065 652e 4665 6174  _object, ee.Feat
+0000e210: 7572 6529 0d0a 2020 2020 2020 2020 2020  ure)..          
+0000e220: 2020 616e 6420 6e6f 7420 6973 696e 7374    and not isinst
+0000e230: 616e 6365 2865 655f 6f62 6a65 6374 2c20  ance(ee_object, 
+0000e240: 6565 2e47 656f 6d65 7472 7929 0d0a 2020  ee.Geometry)..  
+0000e250: 2020 2020 2020 293a 0d0a 2020 2020 2020        ):..      
+0000e260: 2020 2020 2020 6572 725f 7374 7220 3d20        err_str = 
+0000e270: 225c 6e5c 6e54 6865 2069 6d61 6765 2061  "\n\nThe image a
+0000e280: 7267 756d 656e 7420 696e 2027 6164 644c  rgument in 'addL
+0000e290: 6179 6572 2720 6675 6e63 7469 6f6e 206d  ayer' function m
+0000e2a0: 7573 7420 6265 2061 6e20 696e 7374 616e  ust be an instan
+0000e2b0: 6365 206f 6620 6f6e 6520 6f66 2065 652e  ce of one of ee.
+0000e2c0: 496d 6167 652c 2065 652e 4765 6f6d 6574  Image, ee.Geomet
+0000e2d0: 7279 2c20 6565 2e46 6561 7475 7265 206f  ry, ee.Feature o
+0000e2e0: 7220 6565 2e46 6561 7475 7265 436f 6c6c  r ee.FeatureColl
+0000e2f0: 6563 7469 6f6e 2e22 0d0a 2020 2020 2020  ection."..      
+0000e300: 2020 2020 2020 7261 6973 6520 4174 7472        raise Attr
+0000e310: 6962 7574 6545 7272 6f72 2865 7272 5f73  ibuteError(err_s
+0000e320: 7472 290d 0a0d 0a20 2020 2020 2020 2069  tr)....        i
+0000e330: 6620 280d 0a20 2020 2020 2020 2020 2020  f (..           
+0000e340: 2069 7369 6e73 7461 6e63 6528 6565 5f6f   isinstance(ee_o
+0000e350: 626a 6563 742c 2065 652e 6765 6f6d 6574  bject, ee.geomet
+0000e360: 7279 2e47 656f 6d65 7472 7929 0d0a 2020  ry.Geometry)..  
+0000e370: 2020 2020 2020 2020 2020 6f72 2069 7369            or isi
+0000e380: 6e73 7461 6e63 6528 6565 5f6f 626a 6563  nstance(ee_objec
+0000e390: 742c 2065 652e 6665 6174 7572 652e 4665  t, ee.feature.Fe
+0000e3a0: 6174 7572 6529 0d0a 2020 2020 2020 2020  ature)..        
+0000e3b0: 2020 2020 6f72 2069 7369 6e73 7461 6e63      or isinstanc
+0000e3c0: 6528 6565 5f6f 626a 6563 742c 2065 652e  e(ee_object, ee.
+0000e3d0: 6665 6174 7572 6563 6f6c 6c65 6374 696f  featurecollectio
+0000e3e0: 6e2e 4665 6174 7572 6543 6f6c 6c65 6374  n.FeatureCollect
+0000e3f0: 696f 6e29 0d0a 2020 2020 2020 2020 293a  ion)..        ):
+0000e400: 0d0a 2020 2020 2020 2020 2020 2020 6665  ..            fe
+0000e410: 6174 7572 6573 203d 2065 652e 4665 6174  atures = ee.Feat
+0000e420: 7572 6543 6f6c 6c65 6374 696f 6e28 6565  ureCollection(ee
+0000e430: 5f6f 626a 6563 7429 0d0a 0d0a 2020 2020  _object)....    
+0000e440: 2020 2020 2020 2020 7769 6474 6820 3d20          width = 
+0000e450: 320d 0a0d 0a20 2020 2020 2020 2020 2020  2....           
+0000e460: 2069 6620 2277 6964 7468 2220 696e 2076   if "width" in v
+0000e470: 6973 5f70 6172 616d 733a 0d0a 2020 2020  is_params:..    
+0000e480: 2020 2020 2020 2020 2020 2020 7769 6474              widt
+0000e490: 6820 3d20 7669 735f 7061 7261 6d73 5b22  h = vis_params["
+0000e4a0: 7769 6474 6822 5d0d 0a0d 0a20 2020 2020  width"]....     
+0000e4b0: 2020 2020 2020 2063 6f6c 6f72 203d 2022         color = "
+0000e4c0: 3030 3030 3030 220d 0a0d 0a20 2020 2020  000000"....     
+0000e4d0: 2020 2020 2020 2069 6620 2263 6f6c 6f72         if "color
+0000e4e0: 2220 696e 2076 6973 5f70 6172 616d 733a  " in vis_params:
+0000e4f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000e500: 2020 636f 6c6f 7220 3d20 7669 735f 7061    color = vis_pa
+0000e510: 7261 6d73 5b22 636f 6c6f 7222 5d0d 0a0d  rams["color"]...
+0000e520: 0a20 2020 2020 2020 2020 2020 2069 6d61  .            ima
+0000e530: 6765 5f66 696c 6c20 3d20 6665 6174 7572  ge_fill = featur
+0000e540: 6573 2e73 7479 6c65 282a 2a7b 2266 696c  es.style(**{"fil
+0000e550: 6c43 6f6c 6f72 223a 2063 6f6c 6f72 7d29  lColor": color})
+0000e560: 2e75 7064 6174 654d 6173 6b28 0d0a 2020  .updateMask(..  
+0000e570: 2020 2020 2020 2020 2020 2020 2020 6565                ee
+0000e580: 2e49 6d61 6765 2e63 6f6e 7374 616e 7428  .Image.constant(
+0000e590: 302e 3529 0d0a 2020 2020 2020 2020 2020  0.5)..          
+0000e5a0: 2020 290d 0a20 2020 2020 2020 2020 2020    )..           
+0000e5b0: 2069 6d61 6765 5f6f 7574 6c69 6e65 203d   image_outline =
+0000e5c0: 2066 6561 7475 7265 732e 7374 796c 6528   features.style(
+0000e5d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000e5e0: 2020 2a2a 7b22 636f 6c6f 7222 3a20 636f    **{"color": co
+0000e5f0: 6c6f 722c 2022 6669 6c6c 436f 6c6f 7222  lor, "fillColor"
+0000e600: 3a20 2230 3030 3030 3030 3022 2c20 2277  : "00000000", "w
+0000e610: 6964 7468 223a 2077 6964 7468 7d0d 0a20  idth": width}.. 
+0000e620: 2020 2020 2020 2020 2020 2029 0d0a 0d0a             )....
+0000e630: 2020 2020 2020 2020 2020 2020 696d 6167              imag
+0000e640: 6520 3d20 696d 6167 655f 6669 6c6c 2e62  e = image_fill.b
+0000e650: 6c65 6e64 2869 6d61 6765 5f6f 7574 6c69  lend(image_outli
+0000e660: 6e65 290d 0a20 2020 2020 2020 2065 6c69  ne)..        eli
+0000e670: 6620 6973 696e 7374 616e 6365 2865 655f  f isinstance(ee_
+0000e680: 6f62 6a65 6374 2c20 6565 2e69 6d61 6765  object, ee.image
+0000e690: 2e49 6d61 6765 293a 0d0a 2020 2020 2020  .Image):..      
+0000e6a0: 2020 2020 2020 696d 6167 6520 3d20 6565        image = ee
+0000e6b0: 5f6f 626a 6563 740d 0a20 2020 2020 2020  _object..       
+0000e6c0: 2065 6c69 6620 6973 696e 7374 616e 6365   elif isinstance
+0000e6d0: 2865 655f 6f62 6a65 6374 2c20 6565 2e69  (ee_object, ee.i
+0000e6e0: 6d61 6765 636f 6c6c 6563 7469 6f6e 2e49  magecollection.I
+0000e6f0: 6d61 6765 436f 6c6c 6563 7469 6f6e 293a  mageCollection):
+0000e700: 0d0a 2020 2020 2020 2020 2020 2020 696d  ..            im
+0000e710: 6167 6520 3d20 6565 5f6f 626a 6563 742e  age = ee_object.
+0000e720: 6d6f 7361 6963 2829 0d0a 0d0a 2020 2020  mosaic()....    
+0000e730: 2020 2020 6966 2022 7061 6c65 7474 6522      if "palette"
+0000e740: 2069 6e20 7669 735f 7061 7261 6d73 2061   in vis_params a
+0000e750: 6e64 2069 7369 6e73 7461 6e63 6528 7669  nd isinstance(vi
+0000e760: 735f 7061 7261 6d73 5b22 7061 6c65 7474  s_params["palett
+0000e770: 6522 5d2c 2042 6f78 293a 0d0a 2020 2020  e"], Box):..    
+0000e780: 2020 2020 2020 2020 7472 793a 0d0a 2020          try:..  
+0000e790: 2020 2020 2020 2020 2020 2020 2020 7669                vi
+0000e7a0: 735f 7061 7261 6d73 5b22 7061 6c65 7474  s_params["palett
+0000e7b0: 6522 5d20 3d20 7669 735f 7061 7261 6d73  e"] = vis_params
+0000e7c0: 5b22 7061 6c65 7474 6522 5d5b 2264 6566  ["palette"]["def
+0000e7d0: 6175 6c74 225d 0d0a 2020 2020 2020 2020  ault"]..        
+0000e7e0: 2020 2020 6578 6365 7074 2045 7863 6570      except Excep
+0000e7f0: 7469 6f6e 2061 7320 653a 0d0a 2020 2020  tion as e:..    
+0000e800: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+0000e810: 7428 2254 6865 2070 726f 7669 6465 6420  t("The provided 
+0000e820: 7061 6c65 7474 6520 6973 2069 6e76 616c  palette is inval
+0000e830: 6964 2e22 290d 0a20 2020 2020 2020 2020  id.")..         
+0000e840: 2020 2020 2020 2072 6169 7365 2045 7863         raise Exc
+0000e850: 6570 7469 6f6e 2865 290d 0a0d 0a20 2020  eption(e)....   
+0000e860: 2020 2020 206d 6170 5f69 645f 6469 6374       map_id_dict
+0000e870: 203d 2065 652e 496d 6167 6528 696d 6167   = ee.Image(imag
+0000e880: 6529 2e67 6574 4d61 7049 6428 7669 735f  e).getMapId(vis_
+0000e890: 7061 7261 6d73 290d 0a20 2020 2020 2020  params)..       
+0000e8a0: 2074 696c 655f 6c61 7965 7220 3d20 6970   tile_layer = ip
+0000e8b0: 796c 6561 666c 6574 2e54 696c 654c 6179  yleaflet.TileLay
+0000e8c0: 6572 280d 0a20 2020 2020 2020 2020 2020  er(..           
+0000e8d0: 2075 726c 3d6d 6170 5f69 645f 6469 6374   url=map_id_dict
+0000e8e0: 5b22 7469 6c65 5f66 6574 6368 6572 225d  ["tile_fetcher"]
+0000e8f0: 2e75 726c 5f66 6f72 6d61 742c 0d0a 2020  .url_format,..  
+0000e900: 2020 2020 2020 2020 2020 6174 7472 6962            attrib
+0000e910: 7574 696f 6e3d 2247 6f6f 676c 6520 4561  ution="Google Ea
+0000e920: 7274 6820 456e 6769 6e65 222c 0d0a 2020  rth Engine",..  
+0000e930: 2020 2020 2020 2020 2020 6e61 6d65 3d6e            name=n
+0000e940: 616d 652c 0d0a 2020 2020 2020 2020 2020  ame,..          
+0000e950: 2020 6f70 6163 6974 793d 6f70 6163 6974    opacity=opacit
+0000e960: 792c 0d0a 2020 2020 2020 2020 2020 2020  y,..            
+0000e970: 7669 7369 626c 653d 7368 6f77 6e2c 0d0a  visible=shown,..
+0000e980: 2020 2020 2020 2020 2020 2020 6d61 785f              max_
+0000e990: 7a6f 6f6d 3d32 340d 0a20 2020 2020 2020  zoom=24..       
+0000e9a0: 2029 0d0a 0d0a 2020 2020 2020 2020 6c61   )....        la
+0000e9b0: 7965 7220 3d20 7365 6c66 2e66 696e 645f  yer = self.find_
+0000e9c0: 6c61 7965 7228 6e61 6d65 3d6e 616d 6529  layer(name=name)
+0000e9d0: 0d0a 2020 2020 2020 2020 6966 206c 6179  ..        if lay
+0000e9e0: 6572 2069 7320 6e6f 7420 4e6f 6e65 3a0d  er is not None:.
+0000e9f0: 0a0d 0a20 2020 2020 2020 2020 2020 2065  ...            e
+0000ea00: 7869 7374 696e 675f 6f62 6a65 6374 203d  xisting_object =
+0000ea10: 2073 656c 662e 6565 5f6c 6179 6572 5f64   self.ee_layer_d
+0000ea20: 6963 745b 6e61 6d65 5d5b 2265 655f 6f62  ict[name]["ee_ob
+0000ea30: 6a65 6374 225d 0d0a 0d0a 2020 2020 2020  ject"]....      
+0000ea40: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
+0000ea50: 6e63 6528 6578 6973 7469 6e67 5f6f 626a  nce(existing_obj
+0000ea60: 6563 742c 2065 652e 496d 6167 6529 206f  ect, ee.Image) o
+0000ea70: 7220 6973 696e 7374 616e 6365 280d 0a20  r isinstance(.. 
+0000ea80: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+0000ea90: 7869 7374 696e 675f 6f62 6a65 6374 2c20  xisting_object, 
+0000eaa0: 6565 2e49 6d61 6765 436f 6c6c 6563 7469  ee.ImageCollecti
+0000eab0: 6f6e 0d0a 2020 2020 2020 2020 2020 2020  on..            
+0000eac0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+0000ead0: 2020 2020 7365 6c66 2e65 655f 7261 7374      self.ee_rast
+0000eae0: 6572 5f6c 6179 6572 732e 7265 6d6f 7665  er_layers.remove
+0000eaf0: 2865 7869 7374 696e 675f 6f62 6a65 6374  (existing_object
+0000eb00: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+0000eb10: 2020 2073 656c 662e 6565 5f72 6173 7465     self.ee_raste
+0000eb20: 725f 6c61 7965 725f 6e61 6d65 732e 7265  r_layer_names.re
+0000eb30: 6d6f 7665 286e 616d 6529 0d0a 2020 2020  move(name)..    
+0000eb40: 2020 2020 2020 2020 2020 2020 6966 2073              if s
+0000eb50: 656c 662e 706c 6f74 5f64 726f 7064 6f77  elf.plot_dropdow
+0000eb60: 6e5f 7769 6467 6574 2069 7320 6e6f 7420  n_widget is not 
+0000eb70: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
+0000eb80: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0000eb90: 706c 6f74 5f64 726f 7064 6f77 6e5f 7769  plot_dropdown_wi
+0000eba0: 6467 6574 2e6f 7074 696f 6e73 203d 206c  dget.options = l
+0000ebb0: 6973 7428 7365 6c66 2e65 655f 7261 7374  ist(self.ee_rast
+0000ebc0: 6572 5f6c 6179 6572 5f6e 616d 6573 290d  er_layer_names).
+0000ebd0: 0a20 2020 2020 2020 2020 2020 2065 6c69  .            eli
+0000ebe0: 6620 280d 0a20 2020 2020 2020 2020 2020  f (..           
+0000ebf0: 2020 2020 2069 7369 6e73 7461 6e63 6528       isinstance(
+0000ec00: 6565 5f6f 626a 6563 742c 2065 652e 4765  ee_object, ee.Ge
+0000ec10: 6f6d 6574 7279 290d 0a20 2020 2020 2020  ometry)..       
+0000ec20: 2020 2020 2020 2020 206f 7220 6973 696e           or isin
+0000ec30: 7374 616e 6365 2865 655f 6f62 6a65 6374  stance(ee_object
+0000ec40: 2c20 6565 2e46 6561 7475 7265 290d 0a20  , ee.Feature).. 
+0000ec50: 2020 2020 2020 2020 2020 2020 2020 206f                 o
+0000ec60: 7220 6973 696e 7374 616e 6365 2865 655f  r isinstance(ee_
+0000ec70: 6f62 6a65 6374 2c20 6565 2e46 6561 7475  object, ee.Featu
+0000ec80: 7265 436f 6c6c 6563 7469 6f6e 290d 0a20  reCollection).. 
+0000ec90: 2020 2020 2020 2020 2020 2029 3a0d 0a20             ):.. 
+0000eca0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0000ecb0: 656c 662e 6565 5f76 6563 746f 725f 6c61  elf.ee_vector_la
+0000ecc0: 7965 7273 2e72 656d 6f76 6528 6578 6973  yers.remove(exis
+0000ecd0: 7469 6e67 5f6f 626a 6563 7429 0d0a 2020  ting_object)..  
+0000ece0: 2020 2020 2020 2020 2020 2020 2020 7365                se
+0000ecf0: 6c66 2e65 655f 7665 6374 6f72 5f6c 6179  lf.ee_vector_lay
+0000ed00: 6572 5f6e 616d 6573 2e72 656d 6f76 6528  er_names.remove(
+0000ed10: 6e61 6d65 290d 0a0d 0a20 2020 2020 2020  name)....       
+0000ed20: 2020 2020 2073 656c 662e 6565 5f6c 6179       self.ee_lay
+0000ed30: 6572 732e 7265 6d6f 7665 2865 7869 7374  ers.remove(exist
+0000ed40: 696e 675f 6f62 6a65 6374 290d 0a20 2020  ing_object)..   
+0000ed50: 2020 2020 2020 2020 2073 656c 662e 6565           self.ee
+0000ed60: 5f6c 6179 6572 5f6e 616d 6573 2e72 656d  _layer_names.rem
+0000ed70: 6f76 6528 6e61 6d65 290d 0a20 2020 2020  ove(name)..     
+0000ed80: 2020 2020 2020 2073 656c 662e 7265 6d6f         self.remo
+0000ed90: 7665 5f6c 6179 6572 286c 6179 6572 290d  ve_layer(layer).
+0000eda0: 0a0d 0a20 2020 2020 2020 2073 656c 662e  ...        self.
+0000edb0: 6565 5f6c 6179 6572 732e 6170 7065 6e64  ee_layers.append
+0000edc0: 2865 655f 6f62 6a65 6374 290d 0a20 2020  (ee_object)..   
+0000edd0: 2020 2020 2069 6620 6e61 6d65 206e 6f74       if name not
+0000ede0: 2069 6e20 7365 6c66 2e65 655f 6c61 7965   in self.ee_laye
+0000edf0: 725f 6e61 6d65 733a 0d0a 2020 2020 2020  r_names:..      
+0000ee00: 2020 2020 2020 7365 6c66 2e65 655f 6c61        self.ee_la
+0000ee10: 7965 725f 6e61 6d65 732e 6170 7065 6e64  yer_names.append
+0000ee20: 286e 616d 6529 0d0a 2020 2020 2020 2020  (name)..        
+0000ee30: 7365 6c66 2e65 655f 6c61 7965 725f 6469  self.ee_layer_di
+0000ee40: 6374 5b6e 616d 655d 203d 207b 0d0a 2020  ct[name] = {..  
+0000ee50: 2020 2020 2020 2020 2020 2265 655f 6f62            "ee_ob
+0000ee60: 6a65 6374 223a 2065 655f 6f62 6a65 6374  ject": ee_object
+0000ee70: 2c0d 0a20 2020 2020 2020 2020 2020 2022  ,..            "
+0000ee80: 6565 5f6c 6179 6572 223a 2074 696c 655f  ee_layer": tile_
+0000ee90: 6c61 7965 722c 0d0a 2020 2020 2020 2020  layer,..        
+0000eea0: 2020 2020 2276 6973 5f70 6172 616d 7322      "vis_params"
+0000eeb0: 3a20 7669 735f 7061 7261 6d73 2c0d 0a20  : vis_params,.. 
+0000eec0: 2020 2020 2020 207d 0d0a 0d0a 2020 2020         }....    
+0000eed0: 2020 2020 7365 6c66 2e61 6464 5f6c 6179      self.add_lay
+0000eee0: 6572 2874 696c 655f 6c61 7965 7229 0d0a  er(tile_layer)..
+0000eef0: 2020 2020 2020 2020 7365 6c66 2e6c 6173          self.las
+0000ef00: 745f 6565 5f6c 6179 6572 203d 2073 656c  t_ee_layer = sel
+0000ef10: 662e 6565 5f6c 6179 6572 5f64 6963 745b  f.ee_layer_dict[
+0000ef20: 6e61 6d65 5d0d 0a20 2020 2020 2020 2073  name]..        s
+0000ef30: 656c 662e 6c61 7374 5f65 655f 6461 7461  elf.last_ee_data
+0000ef40: 203d 2073 656c 662e 6565 5f6c 6179 6572   = self.ee_layer
+0000ef50: 5f64 6963 745b 6e61 6d65 5d5b 2265 655f  _dict[name]["ee_
+0000ef60: 6f62 6a65 6374 225d 0d0a 0d0a 2020 2020  object"]....    
+0000ef70: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
+0000ef80: 6528 6565 5f6f 626a 6563 742c 2065 652e  e(ee_object, ee.
+0000ef90: 496d 6167 6529 206f 7220 6973 696e 7374  Image) or isinst
+0000efa0: 616e 6365 2865 655f 6f62 6a65 6374 2c20  ance(ee_object, 
+0000efb0: 6565 2e49 6d61 6765 436f 6c6c 6563 7469  ee.ImageCollecti
+0000efc0: 6f6e 293a 0d0a 2020 2020 2020 2020 2020  on):..          
+0000efd0: 2020 7365 6c66 2e65 655f 7261 7374 6572    self.ee_raster
+0000efe0: 5f6c 6179 6572 732e 6170 7065 6e64 2865  _layers.append(e
+0000eff0: 655f 6f62 6a65 6374 290d 0a20 2020 2020  e_object)..     
+0000f000: 2020 2020 2020 2073 656c 662e 6565 5f72         self.ee_r
+0000f010: 6173 7465 725f 6c61 7965 725f 6e61 6d65  aster_layer_name
+0000f020: 732e 6170 7065 6e64 286e 616d 6529 0d0a  s.append(name)..
+0000f030: 2020 2020 2020 2020 2020 2020 6966 2073              if s
+0000f040: 656c 662e 706c 6f74 5f64 726f 7064 6f77  elf.plot_dropdow
+0000f050: 6e5f 7769 6467 6574 2069 7320 6e6f 7420  n_widget is not 
+0000f060: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
+0000f070: 2020 2020 2020 2073 656c 662e 706c 6f74         self.plot
+0000f080: 5f64 726f 7064 6f77 6e5f 7769 6467 6574  _dropdown_widget
+0000f090: 2e6f 7074 696f 6e73 203d 206c 6973 7428  .options = list(
+0000f0a0: 7365 6c66 2e65 655f 7261 7374 6572 5f6c  self.ee_raster_l
+0000f0b0: 6179 6572 5f6e 616d 6573 290d 0a20 2020  ayer_names)..   
+0000f0c0: 2020 2020 2065 6c69 6620 280d 0a20 2020       elif (..   
+0000f0d0: 2020 2020 2020 2020 2069 7369 6e73 7461           isinsta
+0000f0e0: 6e63 6528 6565 5f6f 626a 6563 742c 2065  nce(ee_object, e
+0000f0f0: 652e 4765 6f6d 6574 7279 290d 0a20 2020  e.Geometry)..   
+0000f100: 2020 2020 2020 2020 206f 7220 6973 696e           or isin
+0000f110: 7374 616e 6365 2865 655f 6f62 6a65 6374  stance(ee_object
+0000f120: 2c20 6565 2e46 6561 7475 7265 290d 0a20  , ee.Feature).. 
+0000f130: 2020 2020 2020 2020 2020 206f 7220 6973             or is
+0000f140: 696e 7374 616e 6365 2865 655f 6f62 6a65  instance(ee_obje
+0000f150: 6374 2c20 6565 2e46 6561 7475 7265 436f  ct, ee.FeatureCo
+0000f160: 6c6c 6563 7469 6f6e 290d 0a20 2020 2020  llection)..     
+0000f170: 2020 2029 3a0d 0a20 2020 2020 2020 2020     ):..         
+0000f180: 2020 2073 656c 662e 6565 5f76 6563 746f     self.ee_vecto
+0000f190: 725f 6c61 7965 7273 2e61 7070 656e 6428  r_layers.append(
+0000f1a0: 6565 5f6f 626a 6563 7429 0d0a 2020 2020  ee_object)..    
+0000f1b0: 2020 2020 2020 2020 7365 6c66 2e65 655f          self.ee_
+0000f1c0: 7665 6374 6f72 5f6c 6179 6572 5f6e 616d  vector_layer_nam
+0000f1d0: 6573 2e61 7070 656e 6428 6e61 6d65 290d  es.append(name).
+0000f1e0: 0a0d 0a20 2020 2061 6464 4c61 7965 7220  ...    addLayer 
+0000f1f0: 3d20 6164 645f 6565 5f6c 6179 6572 0d0a  = add_ee_layer..
+0000f200: 0d0a 2020 2020 6465 6620 7265 6d6f 7665  ..    def remove
+0000f210: 5f65 655f 6c61 7965 7228 7365 6c66 2c20  _ee_layer(self, 
+0000f220: 6e61 6d65 293a 0d0a 2020 2020 2020 2020  name):..        
+0000f230: 2222 2252 656d 6f76 6573 2061 6e20 4561  """Removes an Ea
+0000f240: 7274 6820 456e 6769 6e65 206c 6179 6572  rth Engine layer
+0000f250: 2e0d 0a0d 0a20 2020 2020 2020 2041 7267  .....        Arg
+0000f260: 733a 0d0a 2020 2020 2020 2020 2020 2020  s:..            
+0000f270: 6e61 6d65 2028 7374 7229 3a20 5468 6520  name (str): The 
+0000f280: 6e61 6d65 206f 6620 7468 6520 4561 7274  name of the Eart
+0000f290: 6820 456e 6769 6e65 206c 6179 6572 2074  h Engine layer t
+0000f2a0: 6f20 7265 6d6f 7665 2e0d 0a20 2020 2020  o remove...     
+0000f2b0: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
+0000f2c0: 6966 206e 616d 6520 696e 2073 656c 662e  if name in self.
+0000f2d0: 6565 5f6c 6179 6572 5f64 6963 743a 0d0a  ee_layer_dict:..
+0000f2e0: 2020 2020 2020 2020 2020 2020 6565 5f6f              ee_o
+0000f2f0: 626a 6563 7420 3d20 7365 6c66 2e65 655f  bject = self.ee_
+0000f300: 6c61 7965 725f 6469 6374 5b6e 616d 655d  layer_dict[name]
+0000f310: 5b22 6565 5f6f 626a 6563 7422 5d0d 0a20  ["ee_object"].. 
+0000f320: 2020 2020 2020 2020 2020 2065 655f 6c61             ee_la
+0000f330: 7965 7220 3d20 7365 6c66 2e65 655f 6c61  yer = self.ee_la
+0000f340: 7965 725f 6469 6374 5b6e 616d 655d 5b22  yer_dict[name]["
+0000f350: 6565 5f6c 6179 6572 225d 0d0a 2020 2020  ee_layer"]..    
+0000f360: 2020 2020 2020 2020 6966 206e 616d 6520          if name 
+0000f370: 696e 2073 656c 662e 6565 5f72 6173 7465  in self.ee_raste
+0000f380: 725f 6c61 7965 725f 6e61 6d65 733a 0d0a  r_layer_names:..
+0000f390: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f3a0: 7365 6c66 2e65 655f 7261 7374 6572 5f6c  self.ee_raster_l
+0000f3b0: 6179 6572 5f6e 616d 6573 2e72 656d 6f76  ayer_names.remov
+0000f3c0: 6528 6e61 6d65 290d 0a20 2020 2020 2020  e(name)..       
+0000f3d0: 2020 2020 2020 2020 2073 656c 662e 6565           self.ee
+0000f3e0: 5f72 6173 7465 725f 6c61 7965 7273 2e72  _raster_layers.r
+0000f3f0: 656d 6f76 6528 6565 5f6f 626a 6563 7429  emove(ee_object)
+0000f400: 0d0a 2020 2020 2020 2020 2020 2020 656c  ..            el
+0000f410: 6966 206e 616d 6520 696e 2073 656c 662e  if name in self.
+0000f420: 6565 5f76 6563 746f 725f 6c61 7965 725f  ee_vector_layer_
+0000f430: 6e61 6d65 733a 0d0a 2020 2020 2020 2020  names:..        
+0000f440: 2020 2020 2020 2020 7365 6c66 2e65 655f          self.ee_
+0000f450: 7665 6374 6f72 5f6c 6179 6572 5f6e 616d  vector_layer_nam
+0000f460: 6573 2e72 656d 6f76 6528 6e61 6d65 290d  es.remove(name).
+0000f470: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000f480: 2073 656c 662e 6565 5f76 6563 746f 725f   self.ee_vector_
+0000f490: 6c61 7965 7273 2e72 656d 6f76 6528 6565  layers.remove(ee
+0000f4a0: 5f6f 626a 6563 7429 0d0a 2020 2020 2020  _object)..      
+0000f4b0: 2020 2020 2020 7365 6c66 2e65 655f 6c61        self.ee_la
+0000f4c0: 7965 7273 2e72 656d 6f76 6528 6565 5f6f  yers.remove(ee_o
+0000f4d0: 626a 6563 7429 0d0a 2020 2020 2020 2020  bject)..        
+0000f4e0: 2020 2020 7365 6c66 2e65 655f 6c61 7965      self.ee_laye
+0000f4f0: 725f 6e61 6d65 732e 7265 6d6f 7665 286e  r_names.remove(n
+0000f500: 616d 6529 0d0a 2020 2020 2020 2020 2020  ame)..          
+0000f510: 2020 6966 2065 655f 6c61 7965 7220 696e    if ee_layer in
+0000f520: 2073 656c 662e 6c61 7965 7273 3a0d 0a20   self.layers:.. 
+0000f530: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0000f540: 656c 662e 7265 6d6f 7665 5f6c 6179 6572  elf.remove_layer
+0000f550: 2865 655f 6c61 7965 7229 0d0a 0d0a 2020  (ee_layer)....  
+0000f560: 2020 6465 6620 6472 6177 5f6c 6179 6572    def draw_layer
+0000f570: 5f6f 6e5f 746f 7028 7365 6c66 293a 0d0a  _on_top(self):..
+0000f580: 2020 2020 2020 2020 2222 224d 6f76 6520          """Move 
+0000f590: 7573 6572 2d64 7261 776e 2066 6561 7475  user-drawn featu
+0000f5a0: 7265 206c 6179 6572 2074 6f20 7468 6520  re layer to the 
+0000f5b0: 746f 7020 6f66 2061 6c6c 206c 6179 6572  top of all layer
+0000f5c0: 732e 2222 220d 0a20 2020 2020 2020 2064  s."""..        d
+0000f5d0: 7261 775f 6c61 7965 725f 696e 6465 7820  raw_layer_index 
+0000f5e0: 3d20 7365 6c66 2e66 696e 645f 6c61 7965  = self.find_laye
+0000f5f0: 725f 696e 6465 7828 6e61 6d65 3d22 4472  r_index(name="Dr
+0000f600: 6177 6e20 4665 6174 7572 6573 2229 0d0a  awn Features")..
+0000f610: 2020 2020 2020 2020 6966 2064 7261 775f          if draw_
+0000f620: 6c61 7965 725f 696e 6465 7820 3e20 2d31  layer_index > -1
+0000f630: 2061 6e64 2064 7261 775f 6c61 7965 725f   and draw_layer_
+0000f640: 696e 6465 7820 3c20 286c 656e 2873 656c  index < (len(sel
+0000f650: 662e 6c61 7965 7273 2920 2d20 3129 3a0d  f.layers) - 1):.
+0000f660: 0a20 2020 2020 2020 2020 2020 206c 6179  .            lay
+0000f670: 6572 7320 3d20 6c69 7374 2873 656c 662e  ers = list(self.
+0000f680: 6c61 7965 7273 290d 0a20 2020 2020 2020  layers)..       
+0000f690: 2020 2020 206c 6179 6572 7320 3d20 280d       layers = (.
+0000f6a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000f6b0: 206c 6179 6572 735b 303a 6472 6177 5f6c   layers[0:draw_l
+0000f6c0: 6179 6572 5f69 6e64 6578 5d0d 0a20 2020  ayer_index]..   
+0000f6d0: 2020 2020 2020 2020 2020 2020 202b 206c               + l
+0000f6e0: 6179 6572 735b 2864 7261 775f 6c61 7965  ayers[(draw_laye
+0000f6f0: 725f 696e 6465 7820 2b20 3129 203a 5d0d  r_index + 1) :].
+0000f700: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000f710: 202b 205b 6c61 7965 7273 5b64 7261 775f   + [layers[draw_
+0000f720: 6c61 7965 725f 696e 6465 785d 5d0d 0a20  layer_index]].. 
+0000f730: 2020 2020 2020 2020 2020 2029 0d0a 2020             )..  
+0000f740: 2020 2020 2020 2020 2020 7365 6c66 2e6c            self.l
+0000f750: 6179 6572 7320 3d20 6c61 7965 7273 0d0a  ayers = layers..
+0000f760: 0d0a 2020 2020 6465 6620 7365 745f 6365  ..    def set_ce
+0000f770: 6e74 6572 2873 656c 662c 206c 6f6e 2c20  nter(self, lon, 
+0000f780: 6c61 742c 207a 6f6f 6d3d 4e6f 6e65 293a  lat, zoom=None):
+0000f790: 0d0a 2020 2020 2020 2020 2222 2243 656e  ..        """Cen
+0000f7a0: 7465 7273 2074 6865 206d 6170 2076 6965  ters the map vie
+0000f7b0: 7720 6174 2061 2067 6976 656e 2063 6f6f  w at a given coo
+0000f7c0: 7264 696e 6174 6573 2077 6974 6820 7468  rdinates with th
+0000f7d0: 6520 6769 7665 6e20 7a6f 6f6d 206c 6576  e given zoom lev
+0000f7e0: 656c 2e0d 0a0d 0a20 2020 2020 2020 2041  el.....        A
+0000f7f0: 7267 733a 0d0a 2020 2020 2020 2020 2020  rgs:..          
+0000f800: 2020 6c6f 6e20 2866 6c6f 6174 293a 2054    lon (float): T
+0000f810: 6865 206c 6f6e 6769 7475 6465 206f 6620  he longitude of 
+0000f820: 7468 6520 6365 6e74 6572 2c20 696e 2064  the center, in d
+0000f830: 6567 7265 6573 2e0d 0a20 2020 2020 2020  egrees...       
+0000f840: 2020 2020 206c 6174 2028 666c 6f61 7429       lat (float)
+0000f850: 3a20 5468 6520 6c61 7469 7475 6465 206f  : The latitude o
+0000f860: 6620 7468 6520 6365 6e74 6572 2c20 696e  f the center, in
+0000f870: 2064 6567 7265 6573 2e0d 0a20 2020 2020   degrees...     
+0000f880: 2020 2020 2020 207a 6f6f 6d20 2869 6e74         zoom (int
+0000f890: 2c20 6f70 7469 6f6e 616c 293a 2054 6865  , optional): The
+0000f8a0: 207a 6f6f 6d20 6c65 7665 6c2c 2066 726f   zoom level, fro
+0000f8b0: 6d20 3120 746f 2032 342e 2044 6566 6175  m 1 to 24. Defau
+0000f8c0: 6c74 7320 746f 204e 6f6e 652e 0d0a 2020  lts to None...  
+0000f8d0: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
+0000f8e0: 2020 2073 656c 662e 6365 6e74 6572 203d     self.center =
+0000f8f0: 2028 6c61 742c 206c 6f6e 290d 0a20 2020   (lat, lon)..   
+0000f900: 2020 2020 2069 6620 7a6f 6f6d 2069 7320       if zoom is 
+0000f910: 6e6f 7420 4e6f 6e65 3a0d 0a20 2020 2020  not None:..     
+0000f920: 2020 2020 2020 2073 656c 662e 7a6f 6f6d         self.zoom
+0000f930: 203d 207a 6f6f 6d0d 0a0d 0a20 2020 2073   = zoom....    s
+0000f940: 6574 4365 6e74 6572 203d 2073 6574 5f63  etCenter = set_c
+0000f950: 656e 7465 720d 0a0d 0a20 2020 2064 6566  enter....    def
+0000f960: 2063 656e 7465 725f 6f62 6a65 6374 2873   center_object(s
+0000f970: 656c 662c 2065 655f 6f62 6a65 6374 2c20  elf, ee_object, 
+0000f980: 7a6f 6f6d 3d4e 6f6e 6529 3a0d 0a20 2020  zoom=None):..   
+0000f990: 2020 2020 2022 2222 4365 6e74 6572 7320       """Centers 
+0000f9a0: 7468 6520 6d61 7020 7669 6577 206f 6e20  the map view on 
+0000f9b0: 6120 6769 7665 6e20 6f62 6a65 6374 2e0d  a given object..
+0000f9c0: 0a0d 0a20 2020 2020 2020 2041 7267 733a  ...        Args:
+0000f9d0: 0d0a 2020 2020 2020 2020 2020 2020 6565  ..            ee
+0000f9e0: 5f6f 626a 6563 7420 2845 6c65 6d65 6e74  _object (Element
+0000f9f0: 7c47 656f 6d65 7472 7929 3a20 416e 2045  |Geometry): An E
+0000fa00: 6172 7468 2045 6e67 696e 6520 6f62 6a65  arth Engine obje
+0000fa10: 6374 2074 6f20 6365 6e74 6572 206f 6e20  ct to center on 
+0000fa20: 6120 6765 6f6d 6574 7279 2c20 696d 6167  a geometry, imag
+0000fa30: 6520 6f72 2066 6561 7475 7265 2e0d 0a20  e or feature... 
+0000fa40: 2020 2020 2020 2020 2020 207a 6f6f 6d20             zoom 
+0000fa50: 2869 6e74 2c20 6f70 7469 6f6e 616c 293a  (int, optional):
+0000fa60: 2054 6865 207a 6f6f 6d20 6c65 7665 6c2c   The zoom level,
+0000fa70: 2066 726f 6d20 3120 746f 2032 342e 2044   from 1 to 24. D
+0000fa80: 6566 6175 6c74 7320 746f 204e 6f6e 652e  efaults to None.
+0000fa90: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+0000faa0: 2020 2020 2020 2069 6620 7a6f 6f6d 2069         if zoom i
+0000fab0: 7320 4e6f 6e65 2061 6e64 2068 6173 6174  s None and hasat
+0000fac0: 7472 2873 656c 662c 2022 6669 745f 626f  tr(self, "fit_bo
+0000fad0: 756e 6473 2229 3a0d 0a20 2020 2020 2020  unds"):..       
+0000fae0: 2020 2020 2073 656c 662e 7a6f 6f6d 5f74       self.zoom_t
+0000faf0: 6f5f 6f62 6a65 6374 2865 655f 6f62 6a65  o_object(ee_obje
+0000fb00: 6374 290d 0a20 2020 2020 2020 2065 6c73  ct)..        els
+0000fb10: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+0000fb20: 6c61 7420 3d20 300d 0a20 2020 2020 2020  lat = 0..       
+0000fb30: 2020 2020 206c 6f6e 203d 2030 0d0a 2020       lon = 0..  
+0000fb40: 2020 2020 2020 2020 2020 6966 2069 7369            if isi
+0000fb50: 6e73 7461 6e63 6528 6565 5f6f 626a 6563  nstance(ee_objec
+0000fb60: 742c 2065 652e 6765 6f6d 6574 7279 2e47  t, ee.geometry.G
+0000fb70: 656f 6d65 7472 7929 3a0d 0a20 2020 2020  eometry):..     
+0000fb80: 2020 2020 2020 2020 2020 2063 656e 7472             centr
+0000fb90: 6f69 6420 3d20 6565 5f6f 626a 6563 742e  oid = ee_object.
+0000fba0: 6365 6e74 726f 6964 2831 290d 0a20 2020  centroid(1)..   
+0000fbb0: 2020 2020 2020 2020 2020 2020 206c 6f6e               lon
+0000fbc0: 2c20 6c61 7420 3d20 6365 6e74 726f 6964  , lat = centroid
+0000fbd0: 2e67 6574 496e 666f 2829 5b22 636f 6f72  .getInfo()["coor
+0000fbe0: 6469 6e61 7465 7322 5d0d 0a20 2020 2020  dinates"]..     
+0000fbf0: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
+0000fc00: 2020 2020 2020 2020 2020 2020 2020 7472                tr
+0000fc10: 793a 0d0a 2020 2020 2020 2020 2020 2020  y:..            
+0000fc20: 2020 2020 2020 2020 6365 6e74 726f 6964          centroid
+0000fc30: 203d 2065 655f 6f62 6a65 6374 2e67 656f   = ee_object.geo
+0000fc40: 6d65 7472 7928 292e 6365 6e74 726f 6964  metry().centroid
+0000fc50: 2831 290d 0a20 2020 2020 2020 2020 2020  (1)..           
+0000fc60: 2020 2020 2020 2020 206c 6f6e 2c20 6c61           lon, la
+0000fc70: 7420 3d20 6365 6e74 726f 6964 2e67 6574  t = centroid.get
+0000fc80: 496e 666f 2829 5b22 636f 6f72 6469 6e61  Info()["coordina
+0000fc90: 7465 7322 5d0d 0a20 2020 2020 2020 2020  tes"]..         
+0000fca0: 2020 2020 2020 2065 7863 6570 7420 4578         except Ex
+0000fcb0: 6365 7074 696f 6e20 6173 2065 3a0d 0a20  ception as e:.. 
+0000fcc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000fcd0: 2020 2070 7269 6e74 2865 290d 0a20 2020     print(e)..   
+0000fce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000fcf0: 2072 6169 7365 2045 7863 6570 7469 6f6e   raise Exception
+0000fd00: 2865 290d 0a0d 0a20 2020 2020 2020 2020  (e)....         
+0000fd10: 2020 2073 656c 662e 7365 7443 656e 7465     self.setCente
+0000fd20: 7228 6c6f 6e2c 206c 6174 2c20 7a6f 6f6d  r(lon, lat, zoom
+0000fd30: 290d 0a0d 0a20 2020 2063 656e 7465 724f  )....    centerO
+0000fd40: 626a 6563 7420 3d20 6365 6e74 6572 5f6f  bject = center_o
+0000fd50: 626a 6563 740d 0a0d 0a20 2020 2064 6566  bject....    def
+0000fd60: 207a 6f6f 6d5f 746f 5f6f 626a 6563 7428   zoom_to_object(
+0000fd70: 7365 6c66 2c20 6565 5f6f 626a 6563 7429  self, ee_object)
+0000fd80: 3a0d 0a20 2020 2020 2020 2022 2222 5a6f  :..        """Zo
+0000fd90: 6f6d 2074 6f20 7468 6520 6675 6c6c 2065  om to the full e
+0000fda0: 7874 656e 7420 6f66 2061 6e20 4561 7274  xtent of an Eart
+0000fdb0: 6820 456e 6769 6e65 206f 626a 6563 742e  h Engine object.
+0000fdc0: 0d0a 0d0a 2020 2020 2020 2020 4172 6773  ....        Args
+0000fdd0: 3a0d 0a20 2020 2020 2020 2020 2020 2065  :..            e
+0000fde0: 655f 6f62 6a65 6374 2028 6f62 6a65 6374  e_object (object
+0000fdf0: 293a 2041 6e20 4561 7274 6820 456e 6769  ): An Earth Engi
+0000fe00: 6e65 206f 626a 6563 742c 2073 7563 6820  ne object, such 
+0000fe10: 6173 2049 6d61 6765 2c20 496d 6167 6543  as Image, ImageC
+0000fe20: 6f6c 6c65 6374 696f 6e2c 2047 656f 6d65  ollection, Geome
+0000fe30: 7472 792c 2046 6561 7475 7265 2c20 4665  try, Feature, Fe
+0000fe40: 6174 7572 6543 6f6c 6c65 6374 696f 6e2e  atureCollection.
+0000fe50: 0d0a 0d0a 2020 2020 2020 2020 5261 6973  ....        Rais
+0000fe60: 6573 3a0d 0a20 2020 2020 2020 2020 2020  es:..           
+0000fe70: 2045 7863 6570 7469 6f6e 3a20 4572 726f   Exception: Erro
+0000fe80: 7220 6765 7474 696e 6720 6765 6f6d 6574  r getting geomet
+0000fe90: 7279 2e0d 0a20 2020 2020 2020 2022 2222  ry...        """
+0000fea0: 0d0a 2020 2020 2020 2020 636f 6f72 6469  ..        coordi
+0000feb0: 6e61 7465 7320 3d20 4e6f 6e65 0d0a 2020  nates = None..  
+0000fec0: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
+0000fed0: 6e63 6528 6565 5f6f 626a 6563 742c 2065  nce(ee_object, e
+0000fee0: 652e 6765 6f6d 6574 7279 2e47 656f 6d65  e.geometry.Geome
+0000fef0: 7472 7929 3a0d 0a20 2020 2020 2020 2020  try):..         
+0000ff00: 2020 2062 6f75 6e64 7320 3d20 6565 5f6f     bounds = ee_o
+0000ff10: 626a 6563 742e 626f 756e 6473 2829 0d0a  bject.bounds()..
+0000ff20: 2020 2020 2020 2020 2020 2020 636f 6f72              coor
+0000ff30: 6469 6e61 7465 7320 3d20 626f 756e 6473  dinates = bounds
+0000ff40: 2e67 6574 496e 666f 2829 5b22 636f 6f72  .getInfo()["coor
+0000ff50: 6469 6e61 7465 7322 5d5b 305d 0d0a 0d0a  dinates"][0]....
+0000ff60: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
+0000ff70: 2020 2020 2020 2020 2020 2074 7279 3a0d             try:.
+0000ff80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000ff90: 2062 6f75 6e64 7320 3d20 6565 5f6f 626a   bounds = ee_obj
+0000ffa0: 6563 742e 6765 6f6d 6574 7279 2829 2e62  ect.geometry().b
+0000ffb0: 6f75 6e64 7328 290d 0a20 2020 2020 2020  ounds()..       
+0000ffc0: 2020 2020 2020 2020 2063 6f6f 7264 696e           coordin
+0000ffd0: 6174 6573 203d 2062 6f75 6e64 732e 6765  ates = bounds.ge
+0000ffe0: 7449 6e66 6f28 295b 2263 6f6f 7264 696e  tInfo()["coordin
+0000fff0: 6174 6573 225d 5b30 5d0d 0a0d 0a20 2020  ates"][0]....   
+00010000: 2020 2020 2020 2020 2065 7863 6570 7420           except 
+00010010: 4578 6365 7074 696f 6e20 6173 2065 3a0d  Exception as e:.
+00010020: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00010030: 2070 7269 6e74 2865 290d 0a20 2020 2020   print(e)..     
+00010040: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+00010050: 2045 7863 6570 7469 6f6e 2865 290d 0a0d   Exception(e)...
+00010060: 0a20 2020 2020 2020 2069 6620 636f 6f72  .        if coor
+00010070: 6469 6e61 7465 7320 6973 206e 6f74 204e  dinates is not N
+00010080: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
+00010090: 2020 736f 7574 6820 3d20 636f 6f72 6469    south = coordi
+000100a0: 6e61 7465 735b 305d 5b31 5d0d 0a20 2020  nates[0][1]..   
+000100b0: 2020 2020 2020 2020 2077 6573 7420 3d20           west = 
+000100c0: 636f 6f72 6469 6e61 7465 735b 305d 5b30  coordinates[0][0
+000100d0: 5d0d 0a20 2020 2020 2020 2020 2020 206e  ]..            n
+000100e0: 6f72 7468 203d 2063 6f6f 7264 696e 6174  orth = coordinat
+000100f0: 6573 5b32 5d5b 315d 0d0a 2020 2020 2020  es[2][1]..      
+00010100: 2020 2020 2020 6561 7374 203d 2063 6f6f        east = coo
+00010110: 7264 696e 6174 6573 5b32 5d5b 305d 0d0a  rdinates[2][0]..
+00010120: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00010130: 2e66 6974 5f62 6f75 6e64 7328 5b5b 736f  .fit_bounds([[so
+00010140: 7574 682c 2065 6173 745d 2c20 5b6e 6f72  uth, east], [nor
+00010150: 7468 2c20 7765 7374 5d5d 290d 0a0d 0a20  th, west]]).... 
+00010160: 2020 207a 6f6f 6d54 6f4f 626a 6563 7420     zoomToObject 
+00010170: 3d20 7a6f 6f6d 5f74 6f5f 6f62 6a65 6374  = zoom_to_object
+00010180: 0d0a 0d0a 2020 2020 6465 6620 7a6f 6f6d  ....    def zoom
+00010190: 5f74 6f5f 6d65 2873 656c 662c 207a 6f6f  _to_me(self, zoo
+000101a0: 6d3d 3134 2c20 6164 645f 6d61 726b 6572  m=14, add_marker
+000101b0: 3d54 7275 6529 3a0d 0a20 2020 2020 2020  =True):..       
+000101c0: 2022 2222 5a6f 6f6d 2074 6f20 7468 6520   """Zoom to the 
+000101d0: 6375 7272 656e 7420 6465 7669 6365 206c  current device l
+000101e0: 6f63 6174 696f 6e2e 0d0a 0d0a 2020 2020  ocation.....    
+000101f0: 2020 2020 4172 6773 3a0d 0a20 2020 2020      Args:..     
+00010200: 2020 2020 2020 207a 6f6f 6d20 2869 6e74         zoom (int
+00010210: 2c20 6f70 7469 6f6e 616c 293a 205a 6f6f  , optional): Zoo
+00010220: 6d20 6c65 7665 6c2e 2044 6566 6175 6c74  m level. Default
+00010230: 7320 746f 2031 342e 0d0a 2020 2020 2020  s to 14...      
+00010240: 2020 2020 2020 6164 645f 6d61 726b 6572        add_marker
+00010250: 2028 626f 6f6c 2c20 6f70 7469 6f6e 616c   (bool, optional
+00010260: 293a 2057 6865 7468 6572 2074 6f20 6164  ): Whether to ad
+00010270: 6420 6120 6d61 726b 6572 206f 6620 7468  d a marker of th
+00010280: 6520 6375 7272 656e 7420 6465 7669 6365  e current device
+00010290: 206c 6f63 6174 696f 6e2e 2044 6566 6175   location. Defau
+000102a0: 6c74 7320 746f 2054 7275 652e 0d0a 2020  lts to True...  
+000102b0: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
+000102c0: 2020 206c 6174 2c20 6c6f 6e20 3d20 6765     lat, lon = ge
+000102d0: 745f 6375 7272 656e 745f 6c61 746c 6f6e  t_current_latlon
+000102e0: 2829 0d0a 2020 2020 2020 2020 7365 6c66  ()..        self
+000102f0: 2e73 6574 5f63 656e 7465 7228 6c6f 6e2c  .set_center(lon,
+00010300: 206c 6174 2c20 7a6f 6f6d 290d 0a0d 0a20   lat, zoom).... 
+00010310: 2020 2020 2020 2069 6620 6164 645f 6d61         if add_ma
+00010320: 726b 6572 3a0d 0a20 2020 2020 2020 2020  rker:..         
+00010330: 2020 206d 6172 6b65 7220 3d20 6970 796c     marker = ipyl
+00010340: 6561 666c 6574 2e4d 6172 6b65 7228 0d0a  eaflet.Marker(..
+00010350: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010360: 6c6f 6361 7469 6f6e 3d28 6c61 742c 206c  location=(lat, l
+00010370: 6f6e 292c 0d0a 2020 2020 2020 2020 2020  on),..          
+00010380: 2020 2020 2020 6472 6167 6761 626c 653d        draggable=
+00010390: 4661 6c73 652c 0d0a 2020 2020 2020 2020  False,..        
+000103a0: 2020 2020 2020 2020 6e61 6d65 3d22 4465          name="De
+000103b0: 7669 6365 206c 6f63 6174 696f 6e22 2c0d  vice location",.
+000103c0: 0a20 2020 2020 2020 2020 2020 2029 0d0a  .            )..
+000103d0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+000103e0: 2e61 6464 5f6c 6179 6572 286d 6172 6b65  .add_layer(marke
+000103f0: 7229 0d0a 0d0a 2020 2020 6465 6620 6765  r)....    def ge
+00010400: 745f 7363 616c 6528 7365 6c66 293a 0d0a  t_scale(self):..
+00010410: 2020 2020 2020 2020 2222 2252 6574 7572          """Retur
+00010420: 6e73 2074 6865 2061 7070 726f 7869 6d61  ns the approxima
+00010430: 7465 2070 6978 656c 2073 6361 6c65 206f  te pixel scale o
+00010440: 6620 7468 6520 6375 7272 656e 7420 6d61  f the current ma
+00010450: 7020 7669 6577 2c20 696e 206d 6574 6572  p view, in meter
+00010460: 732e 0d0a 0d0a 2020 2020 2020 2020 5265  s.....        Re
+00010470: 7475 726e 733a 0d0a 2020 2020 2020 2020  turns:..        
+00010480: 2020 2020 666c 6f61 743a 204d 6170 2072      float: Map r
+00010490: 6573 6f6c 7574 696f 6e20 696e 206d 6574  esolution in met
+000104a0: 6572 732e 0d0a 2020 2020 2020 2020 2222  ers...        ""
+000104b0: 220d 0a20 2020 2020 2020 207a 6f6f 6d5f  "..        zoom_
+000104c0: 6c65 7665 6c20 3d20 7365 6c66 2e7a 6f6f  level = self.zoo
+000104d0: 6d0d 0a20 2020 2020 2020 2023 2052 6566  m..        # Ref
+000104e0: 6572 656e 6365 3a20 6874 7470 733a 2f2f  erence: https://
+000104f0: 626c 6f67 732e 6269 6e67 2e63 6f6d 2f6d  blogs.bing.com/m
+00010500: 6170 732f 3230 3036 2f30 322f 3235 2f6d  aps/2006/02/25/m
+00010510: 6170 2d63 6f6e 7472 6f6c 2d7a 6f6f 6d2d  ap-control-zoom-
+00010520: 6c65 7665 6c73 2d67 742d 7265 736f 6c75  levels-gt-resolu
+00010530: 7469 6f6e 0d0a 2020 2020 2020 2020 7265  tion..        re
+00010540: 736f 6c75 7469 6f6e 203d 2031 3536 3534  solution = 15654
+00010550: 332e 3034 202a 206d 6174 682e 636f 7328  3.04 * math.cos(
+00010560: 3029 202f 206d 6174 682e 706f 7728 322c  0) / math.pow(2,
+00010570: 207a 6f6f 6d5f 6c65 7665 6c29 0d0a 2020   zoom_level)..  
+00010580: 2020 2020 2020 7265 7475 726e 2072 6573        return res
+00010590: 6f6c 7574 696f 6e0d 0a0d 0a20 2020 2067  olution....    g
+000105a0: 6574 5363 616c 6520 3d20 6765 745f 7363  etScale = get_sc
+000105b0: 616c 650d 0a0d 0a20 2020 2064 6566 2061  ale....    def a
+000105c0: 6464 5f62 6173 656d 6170 2873 656c 662c  dd_basemap(self,
+000105d0: 2062 6173 656d 6170 3d22 4859 4252 4944   basemap="HYBRID
+000105e0: 2229 3a0d 0a20 2020 2020 2020 2022 2222  "):..        """
+000105f0: 4164 6473 2061 2062 6173 656d 6170 2074  Adds a basemap t
+00010600: 6f20 7468 6520 6d61 702e 0d0a 0d0a 2020  o the map.....  
+00010610: 2020 2020 2020 4172 6773 3a0d 0a20 2020        Args:..   
+00010620: 2020 2020 2020 2020 2062 6173 656d 6170           basemap
+00010630: 2028 7374 722c 206f 7074 696f 6e61 6c29   (str, optional)
+00010640: 3a20 4361 6e20 6265 206f 6e65 206f 6620  : Can be one of 
+00010650: 7374 7269 6e67 2066 726f 6d20 6565 5f62  string from ee_b
+00010660: 6173 656d 6170 732e 2044 6566 6175 6c74  asemaps. Default
+00010670: 7320 746f 2027 4859 4252 4944 272e 0d0a  s to 'HYBRID'...
+00010680: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
+00010690: 2020 2020 2074 7279 3a0d 0a20 2020 2020       try:..     
+000106a0: 2020 2020 2020 2069 6620 280d 0a20 2020         if (..   
+000106b0: 2020 2020 2020 2020 2020 2020 2062 6173               bas
+000106c0: 656d 6170 2069 6e20 6261 7365 6d61 705f  emap in basemap_
+000106d0: 7469 6c65 732e 6b65 7973 2829 0d0a 2020  tiles.keys()..  
+000106e0: 2020 2020 2020 2020 2020 2020 2020 616e                an
+000106f0: 6420 6261 7365 6d61 705f 7469 6c65 735b  d basemap_tiles[
+00010700: 6261 7365 6d61 705d 206e 6f74 2069 6e20  basemap] not in 
+00010710: 7365 6c66 2e6c 6179 6572 730d 0a20 2020  self.layers..   
+00010720: 2020 2020 2020 2020 2029 3a0d 0a20 2020           ):..   
+00010730: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+00010740: 662e 6164 645f 6c61 7965 7228 6261 7365  f.add_layer(base
+00010750: 6d61 705f 7469 6c65 735b 6261 7365 6d61  map_tiles[basema
+00010760: 705d 290d 0a0d 0a20 2020 2020 2020 2065  p])....        e
+00010770: 7863 6570 7420 4578 6365 7074 696f 6e3a  xcept Exception:
+00010780: 0d0a 2020 2020 2020 2020 2020 2020 7261  ..            ra
+00010790: 6973 6520 5661 6c75 6545 7272 6f72 280d  ise ValueError(.
+000107a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000107b0: 2022 4261 7365 6d61 7020 6361 6e20 6f6e   "Basemap can on
+000107c0: 6c79 2062 6520 6f6e 6520 6f66 2074 6865  ly be one of the
+000107d0: 2066 6f6c 6c6f 7769 6e67 3a5c 6e20 207b   following:\n  {
+000107e0: 7d22 2e66 6f72 6d61 7428 0d0a 2020 2020  }".format(..    
+000107f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010800: 225c 6e20 2022 2e6a 6f69 6e28 6261 7365  "\n  ".join(base
+00010810: 6d61 705f 7469 6c65 732e 6b65 7973 2829  map_tiles.keys()
+00010820: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00010830: 2020 2029 0d0a 2020 2020 2020 2020 2020     )..          
+00010840: 2020 290d 0a0d 0a20 2020 2064 6566 2066    )....    def f
+00010850: 696e 645f 6c61 7965 7228 7365 6c66 2c20  ind_layer(self, 
+00010860: 6e61 6d65 293a 0d0a 2020 2020 2020 2020  name):..        
+00010870: 2222 2246 696e 6473 206c 6179 6572 2062  """Finds layer b
+00010880: 7920 6e61 6d65 0d0a 0d0a 2020 2020 2020  y name....      
+00010890: 2020 4172 6773 3a0d 0a20 2020 2020 2020    Args:..       
+000108a0: 2020 2020 206e 616d 6520 2873 7472 293a       name (str):
+000108b0: 204e 616d 6520 6f66 2074 6865 206c 6179   Name of the lay
+000108c0: 6572 2074 6f20 6669 6e64 2e0d 0a0d 0a20  er to find..... 
+000108d0: 2020 2020 2020 2052 6574 7572 6e73 3a0d         Returns:.
+000108e0: 0a20 2020 2020 2020 2020 2020 206f 626a  .            obj
+000108f0: 6563 743a 2069 7079 6c65 6166 6c65 7420  ect: ipyleaflet 
+00010900: 6c61 7965 7220 6f62 6a65 6374 2e0d 0a20  layer object... 
+00010910: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
+00010920: 2020 2020 6c61 7965 7273 203d 2073 656c      layers = sel
+00010930: 662e 6c61 7965 7273 0d0a 0d0a 2020 2020  f.layers....    
+00010940: 2020 2020 666f 7220 6c61 7965 7220 696e      for layer in
+00010950: 206c 6179 6572 733a 0d0a 2020 2020 2020   layers:..      
+00010960: 2020 2020 2020 6966 206c 6179 6572 2e6e        if layer.n
+00010970: 616d 6520 3d3d 206e 616d 653a 0d0a 2020  ame == name:..  
+00010980: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00010990: 7475 726e 206c 6179 6572 0d0a 0d0a 2020  turn layer....  
+000109a0: 2020 2020 2020 7265 7475 726e 204e 6f6e        return Non
+000109b0: 650d 0a0d 0a20 2020 2064 6566 2066 696e  e....    def fin
+000109c0: 645f 6c61 7965 725f 696e 6465 7828 7365  d_layer_index(se
+000109d0: 6c66 2c20 6e61 6d65 293a 0d0a 2020 2020  lf, name):..    
+000109e0: 2020 2020 2222 2246 696e 6473 206c 6179      """Finds lay
+000109f0: 6572 2069 6e64 6578 2062 7920 6e61 6d65  er index by name
+00010a00: 0d0a 0d0a 2020 2020 2020 2020 4172 6773  ....        Args
+00010a10: 3a0d 0a20 2020 2020 2020 2020 2020 206e  :..            n
+00010a20: 616d 6520 2873 7472 293a 204e 616d 6520  ame (str): Name 
+00010a30: 6f66 2074 6865 206c 6179 6572 2074 6f20  of the layer to 
+00010a40: 6669 6e64 2e0d 0a0d 0a20 2020 2020 2020  find.....       
+00010a50: 2052 6574 7572 6e73 3a0d 0a20 2020 2020   Returns:..     
+00010a60: 2020 2020 2020 2069 6e74 3a20 496e 6465         int: Inde
+00010a70: 7820 6f66 2074 6865 206c 6179 6572 2077  x of the layer w
+00010a80: 6974 6820 7468 6520 7370 6563 6966 6965  ith the specifie
+00010a90: 6420 6e61 6d65 0d0a 2020 2020 2020 2020  d name..        
+00010aa0: 2222 220d 0a20 2020 2020 2020 206c 6179  """..        lay
+00010ab0: 6572 7320 3d20 7365 6c66 2e6c 6179 6572  ers = self.layer
+00010ac0: 730d 0a0d 0a20 2020 2020 2020 2066 6f72  s....        for
+00010ad0: 2069 6e64 6578 2c20 6c61 7965 7220 696e   index, layer in
+00010ae0: 2065 6e75 6d65 7261 7465 286c 6179 6572   enumerate(layer
+00010af0: 7329 3a0d 0a20 2020 2020 2020 2020 2020  s):..           
+00010b00: 2069 6620 6c61 7965 722e 6e61 6d65 203d   if layer.name =
+00010b10: 3d20 6e61 6d65 3a0d 0a20 2020 2020 2020  = name:..       
+00010b20: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00010b30: 696e 6465 780d 0a0d 0a20 2020 2020 2020  index....       
+00010b40: 2072 6574 7572 6e20 2d31 0d0a 0d0a 2020   return -1....  
+00010b50: 2020 6465 6620 6c61 7965 725f 6f70 6163    def layer_opac
+00010b60: 6974 7928 7365 6c66 2c20 6e61 6d65 2c20  ity(self, name, 
+00010b70: 7661 6c75 653d 312e 3029 3a0d 0a20 2020  value=1.0):..   
+00010b80: 2020 2020 2022 2222 4368 616e 6765 7320       """Changes 
+00010b90: 6c61 7965 7220 6f70 6163 6974 792e 0d0a  layer opacity...
+00010ba0: 0d0a 2020 2020 2020 2020 4172 6773 3a0d  ..        Args:.
+00010bb0: 0a20 2020 2020 2020 2020 2020 206e 616d  .            nam
+00010bc0: 6520 2873 7472 293a 2054 6865 206e 616d  e (str): The nam
+00010bd0: 6520 6f66 2074 6865 206c 6179 6572 2074  e of the layer t
+00010be0: 6f20 6368 616e 6765 206f 7061 6369 7479  o change opacity
+00010bf0: 2e0d 0a20 2020 2020 2020 2020 2020 2076  ...            v
+00010c00: 616c 7565 2028 666c 6f61 742c 206f 7074  alue (float, opt
+00010c10: 696f 6e61 6c29 3a20 5468 6520 6f70 6163  ional): The opac
+00010c20: 6974 7920 7661 6c75 6520 746f 2073 6574  ity value to set
+00010c30: 2e20 4465 6661 756c 7473 2074 6f20 312e  . Defaults to 1.
+00010c40: 302e 0d0a 2020 2020 2020 2020 2222 220d  0...        """.
+00010c50: 0a20 2020 2020 2020 206c 6179 6572 203d  .        layer =
+00010c60: 2073 656c 662e 6669 6e64 5f6c 6179 6572   self.find_layer
+00010c70: 286e 616d 6529 0d0a 2020 2020 2020 2020  (name)..        
+00010c80: 7472 793a 0d0a 2020 2020 2020 2020 2020  try:..          
+00010c90: 2020 6c61 7965 722e 6f70 6163 6974 7920    layer.opacity 
+00010ca0: 3d20 7661 6c75 650d 0a20 2020 2020 2020  = value..       
+00010cb0: 2065 7863 6570 7420 4578 6365 7074 696f   except Exceptio
+00010cc0: 6e20 6173 2065 3a0d 0a20 2020 2020 2020  n as e:..       
+00010cd0: 2020 2020 2072 6169 7365 2045 7863 6570       raise Excep
+00010ce0: 7469 6f6e 2865 290d 0a0d 0a20 2020 2064  tion(e)....    d
+00010cf0: 6566 2061 6464 5f77 6d73 5f6c 6179 6572  ef add_wms_layer
+00010d00: 280d 0a20 2020 2020 2020 2073 656c 662c  (..        self,
+00010d10: 0d0a 2020 2020 2020 2020 7572 6c2c 0d0a  ..        url,..
+00010d20: 2020 2020 2020 2020 6c61 7965 7273 2c0d          layers,.
+00010d30: 0a20 2020 2020 2020 206e 616d 653d 4e6f  .        name=No
+00010d40: 6e65 2c0d 0a20 2020 2020 2020 2061 7474  ne,..        att
+00010d50: 7269 6275 7469 6f6e 3d22 222c 0d0a 2020  ribution="",..  
+00010d60: 2020 2020 2020 666f 726d 6174 3d22 696d        format="im
+00010d70: 6167 652f 6a70 6567 222c 0d0a 2020 2020  age/jpeg",..    
+00010d80: 2020 2020 7472 616e 7370 6172 656e 743d      transparent=
+00010d90: 4661 6c73 652c 0d0a 2020 2020 2020 2020  False,..        
+00010da0: 6f70 6163 6974 793d 312e 302c 0d0a 2020  opacity=1.0,..  
+00010db0: 2020 2020 2020 7368 6f77 6e3d 5472 7565        shown=True
+00010dc0: 2c0d 0a20 2020 2020 2020 202a 2a6b 7761  ,..        **kwa
+00010dd0: 7267 732c 0d0a 2020 2020 293a 0d0a 2020  rgs,..    ):..  
+00010de0: 2020 2020 2020 2222 2241 6464 2061 2057        """Add a W
+00010df0: 4d53 206c 6179 6572 2074 6f20 7468 6520  MS layer to the 
+00010e00: 6d61 702e 0d0a 0d0a 2020 2020 2020 2020  map.....        
+00010e10: 4172 6773 3a0d 0a20 2020 2020 2020 2020  Args:..         
+00010e20: 2020 2075 726c 2028 7374 7229 3a20 5468     url (str): Th
+00010e30: 6520 5552 4c20 6f66 2074 6865 2057 4d53  e URL of the WMS
+00010e40: 2077 6562 2073 6572 7669 6365 2e0d 0a20   web service... 
+00010e50: 2020 2020 2020 2020 2020 206c 6179 6572             layer
+00010e60: 7320 2873 7472 293a 2043 6f6d 6d61 2d73  s (str): Comma-s
+00010e70: 6570 6172 6174 6564 206c 6973 7420 6f66  eparated list of
+00010e80: 2057 4d53 206c 6179 6572 7320 746f 2073   WMS layers to s
+00010e90: 686f 772e 0d0a 2020 2020 2020 2020 2020  how...          
+00010ea0: 2020 6e61 6d65 2028 7374 722c 206f 7074    name (str, opt
+00010eb0: 696f 6e61 6c29 3a20 5468 6520 6c61 7965  ional): The laye
+00010ec0: 7220 6e61 6d65 2074 6f20 7573 6520 6f6e  r name to use on
+00010ed0: 2074 6865 206c 6179 6572 2063 6f6e 7472   the layer contr
+00010ee0: 6f6c 2e20 4465 6661 756c 7473 2074 6f20  ol. Defaults to 
+00010ef0: 4e6f 6e65 2e0d 0a20 2020 2020 2020 2020  None...         
+00010f00: 2020 2061 7474 7269 6275 7469 6f6e 2028     attribution (
+00010f10: 7374 722c 206f 7074 696f 6e61 6c29 3a20  str, optional): 
+00010f20: 5468 6520 6174 7472 6962 7574 696f 6e20  The attribution 
+00010f30: 6f66 2074 6865 2064 6174 6120 6c61 7965  of the data laye
+00010f40: 722e 2044 6566 6175 6c74 7320 746f 2027  r. Defaults to '
+00010f50: 272e 0d0a 2020 2020 2020 2020 2020 2020  '...            
+00010f60: 666f 726d 6174 2028 7374 722c 206f 7074  format (str, opt
+00010f70: 696f 6e61 6c29 3a20 574d 5320 696d 6167  ional): WMS imag
+00010f80: 6520 666f 726d 6174 2028 7573 6520 e280  e format (use ..
+00010f90: 9869 6d61 6765 2f70 6e67 e280 9920 666f  .image/png... fo
+00010fa0: 7220 6c61 7965 7273 2077 6974 6820 7472  r layers with tr
+00010fb0: 616e 7370 6172 656e 6379 292e 2044 6566  ansparency). Def
+00010fc0: 6175 6c74 7320 746f 2027 696d 6167 652f  aults to 'image/
+00010fd0: 6a70 6567 272e 0d0a 2020 2020 2020 2020  jpeg'...        
+00010fe0: 2020 2020 7472 616e 7370 6172 656e 7420      transparent 
+00010ff0: 2862 6f6f 6c2c 206f 7074 696f 6e61 6c29  (bool, optional)
+00011000: 3a20 4966 2054 7275 652c 2074 6865 2057  : If True, the W
+00011010: 4d53 2073 6572 7669 6365 2077 696c 6c20  MS service will 
+00011020: 7265 7475 726e 2069 6d61 6765 7320 7769  return images wi
+00011030: 7468 2074 7261 6e73 7061 7265 6e63 792e  th transparency.
+00011040: 2044 6566 6175 6c74 7320 746f 2046 616c   Defaults to Fal
+00011050: 7365 2e0d 0a20 2020 2020 2020 2020 2020  se...           
+00011060: 206f 7061 6369 7479 2028 666c 6f61 742c   opacity (float,
+00011070: 206f 7074 696f 6e61 6c29 3a20 5468 6520   optional): The 
+00011080: 6f70 6163 6974 7920 6f66 2074 6865 206c  opacity of the l
+00011090: 6179 6572 2e20 4465 6661 756c 7473 2074  ayer. Defaults t
+000110a0: 6f20 312e 302e 0d0a 2020 2020 2020 2020  o 1.0...        
+000110b0: 2020 2020 7368 6f77 6e20 2862 6f6f 6c2c      shown (bool,
+000110c0: 206f 7074 696f 6e61 6c29 3a20 4120 666c   optional): A fl
+000110d0: 6167 2069 6e64 6963 6174 696e 6720 7768  ag indicating wh
+000110e0: 6574 6865 7220 7468 6520 6c61 7965 7220  ether the layer 
+000110f0: 7368 6f75 6c64 2062 6520 6f6e 2062 7920  should be on by 
+00011100: 6465 6661 756c 742e 2044 6566 6175 6c74  default. Default
+00011110: 7320 746f 2054 7275 652e 0d0a 2020 2020  s to True...    
+00011120: 2020 2020 2222 220d 0a0d 0a20 2020 2020      """....     
+00011130: 2020 2069 6620 6e61 6d65 2069 7320 4e6f     if name is No
+00011140: 6e65 3a0d 0a20 2020 2020 2020 2020 2020  ne:..           
+00011150: 206e 616d 6520 3d20 7374 7228 6c61 7965   name = str(laye
+00011160: 7273 290d 0a0d 0a20 2020 2020 2020 2074  rs)....        t
+00011170: 7279 3a0d 0a20 2020 2020 2020 2020 2020  ry:..           
+00011180: 2077 6d73 5f6c 6179 6572 203d 2069 7079   wms_layer = ipy
+00011190: 6c65 6166 6c65 742e 574d 534c 6179 6572  leaflet.WMSLayer
+000111a0: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
+000111b0: 2020 2075 726c 3d75 726c 2c0d 0a20 2020     url=url,..   
+000111c0: 2020 2020 2020 2020 2020 2020 206c 6179               lay
+000111d0: 6572 733d 6c61 7965 7273 2c0d 0a20 2020  ers=layers,..   
+000111e0: 2020 2020 2020 2020 2020 2020 206e 616d               nam
+000111f0: 653d 6e61 6d65 2c0d 0a20 2020 2020 2020  e=name,..       
+00011200: 2020 2020 2020 2020 2061 7474 7269 6275           attribu
+00011210: 7469 6f6e 3d61 7474 7269 6275 7469 6f6e  tion=attribution
+00011220: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+00011230: 2020 2066 6f72 6d61 743d 666f 726d 6174     format=format
+00011240: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+00011250: 2020 2074 7261 6e73 7061 7265 6e74 3d74     transparent=t
+00011260: 7261 6e73 7061 7265 6e74 2c0d 0a20 2020  ransparent,..   
+00011270: 2020 2020 2020 2020 2020 2020 206f 7061               opa
+00011280: 6369 7479 3d6f 7061 6369 7479 2c0d 0a20  city=opacity,.. 
+00011290: 2020 2020 2020 2020 2020 2020 2020 2076                 v
+000112a0: 6973 6962 6c65 3d73 686f 776e 2c0d 0a20  isible=shown,.. 
+000112b0: 2020 2020 2020 2020 2020 2020 2020 202a                 *
+000112c0: 2a6b 7761 7267 732c 0d0a 2020 2020 2020  *kwargs,..      
+000112d0: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
+000112e0: 2020 2020 2073 656c 662e 6164 645f 6c61       self.add_la
+000112f0: 7965 7228 776d 735f 6c61 7965 7229 0d0a  yer(wms_layer)..
+00011300: 0d0a 2020 2020 2020 2020 6578 6365 7074  ..        except
+00011310: 2045 7863 6570 7469 6f6e 2061 7320 653a   Exception as e:
+00011320: 0d0a 2020 2020 2020 2020 2020 2020 7072  ..            pr
+00011330: 696e 7428 2246 6169 6c65 6420 746f 2061  int("Failed to a
+00011340: 6464 2074 6865 2073 7065 6369 6669 6564  dd the specified
+00011350: 2057 4d53 2054 696c 654c 6179 6572 2e22   WMS TileLayer."
+00011360: 290d 0a20 2020 2020 2020 2020 2020 2072  )..            r
+00011370: 6169 7365 2045 7863 6570 7469 6f6e 2865  aise Exception(e
+00011380: 290d 0a0d 0a20 2020 2064 6566 2061 6464  )....    def add
+00011390: 5f74 696c 655f 6c61 7965 7228 0d0a 2020  _tile_layer(..  
+000113a0: 2020 2020 2020 7365 6c66 2c0d 0a20 2020        self,..   
+000113b0: 2020 2020 2075 726c 3d22 6874 7470 733a       url="https:
+000113c0: 2f2f 7b73 7d2e 7469 6c65 2e6f 7065 6e73  //{s}.tile.opens
+000113d0: 7472 6565 746d 6170 2e6f 7267 2f7b 7a7d  treetmap.org/{z}
+000113e0: 2f7b 787d 2f7b 797d 2e70 6e67 222c 0d0a  /{x}/{y}.png",..
+000113f0: 2020 2020 2020 2020 6e61 6d65 3d22 556e          name="Un
+00011400: 7469 746c 6564 222c 0d0a 2020 2020 2020  titled",..      
+00011410: 2020 6174 7472 6962 7574 696f 6e3d 2222    attribution=""
+00011420: 2c0d 0a20 2020 2020 2020 206f 7061 6369  ,..        opaci
+00011430: 7479 3d31 2e30 2c0d 0a20 2020 2020 2020  ty=1.0,..       
+00011440: 2073 686f 776e 3d54 7275 652c 0d0a 2020   shown=True,..  
+00011450: 2020 2020 2020 2a2a 6b77 6172 6773 2c0d        **kwargs,.
+00011460: 0a20 2020 2029 3a0d 0a20 2020 2020 2020  .    ):..       
+00011470: 2022 2222 4164 6473 2061 2054 696c 654c   """Adds a TileL
+00011480: 6179 6572 2074 6f20 7468 6520 6d61 702e  ayer to the map.
+00011490: 0d0a 0d0a 2020 2020 2020 2020 4172 6773  ....        Args
+000114a0: 3a0d 0a20 2020 2020 2020 2020 2020 2075  :..            u
+000114b0: 726c 2028 7374 722c 206f 7074 696f 6e61  rl (str, optiona
+000114c0: 6c29 3a20 5468 6520 5552 4c20 6f66 2074  l): The URL of t
+000114d0: 6865 2074 696c 6520 6c61 7965 722e 2044  he tile layer. D
+000114e0: 6566 6175 6c74 7320 746f 2027 6874 7470  efaults to 'http
+000114f0: 733a 2f2f 7b73 7d2e 7469 6c65 2e6f 7065  s://{s}.tile.ope
+00011500: 6e73 7472 6565 746d 6170 2e6f 7267 2f7b  nstreetmap.org/{
+00011510: 7a7d 2f7b 787d 2f7b 797d 2e70 6e67 272e  z}/{x}/{y}.png'.
+00011520: 0d0a 2020 2020 2020 2020 2020 2020 6e61  ..            na
+00011530: 6d65 2028 7374 722c 206f 7074 696f 6e61  me (str, optiona
+00011540: 6c29 3a20 5468 6520 6c61 7965 7220 6e61  l): The layer na
+00011550: 6d65 2074 6f20 7573 6520 666f 7220 7468  me to use for th
+00011560: 6520 6c61 7965 722e 2044 6566 6175 6c74  e layer. Default
+00011570: 7320 746f 2027 556e 7469 746c 6564 272e  s to 'Untitled'.
+00011580: 0d0a 2020 2020 2020 2020 2020 2020 6174  ..            at
+00011590: 7472 6962 7574 696f 6e20 2873 7472 2c20  tribution (str, 
+000115a0: 6f70 7469 6f6e 616c 293a 2054 6865 2061  optional): The a
+000115b0: 7474 7269 6275 7469 6f6e 2074 6f20 7573  ttribution to us
+000115c0: 652e 2044 6566 6175 6c74 7320 746f 2027  e. Defaults to '
+000115d0: 272e 0d0a 2020 2020 2020 2020 2020 2020  '...            
+000115e0: 6f70 6163 6974 7920 2866 6c6f 6174 2c20  opacity (float, 
+000115f0: 6f70 7469 6f6e 616c 293a 2054 6865 206f  optional): The o
+00011600: 7061 6369 7479 206f 6620 7468 6520 6c61  pacity of the la
+00011610: 7965 722e 2044 6566 6175 6c74 7320 746f  yer. Defaults to
+00011620: 2031 2e0d 0a20 2020 2020 2020 2020 2020   1...           
+00011630: 2073 686f 776e 2028 626f 6f6c 2c20 6f70   shown (bool, op
+00011640: 7469 6f6e 616c 293a 2041 2066 6c61 6720  tional): A flag 
+00011650: 696e 6469 6361 7469 6e67 2077 6865 7468  indicating wheth
+00011660: 6572 2074 6865 206c 6179 6572 2073 686f  er the layer sho
+00011670: 756c 6420 6265 206f 6e20 6279 2064 6566  uld be on by def
+00011680: 6175 6c74 2e20 4465 6661 756c 7473 2074  ault. Defaults t
+00011690: 6f20 5472 7565 2e0d 0a20 2020 2020 2020  o True...       
+000116a0: 2022 2222 0d0a 2020 2020 2020 2020 7472   """..        tr
+000116b0: 793a 0d0a 2020 2020 2020 2020 2020 2020  y:..            
+000116c0: 7469 6c65 5f6c 6179 6572 203d 2069 7079  tile_layer = ipy
+000116d0: 6c65 6166 6c65 742e 5469 6c65 4c61 7965  leaflet.TileLaye
+000116e0: 7228 0d0a 2020 2020 2020 2020 2020 2020  r(..            
+000116f0: 2020 2020 7572 6c3d 7572 6c2c 0d0a 2020      url=url,..  
+00011700: 2020 2020 2020 2020 2020 2020 2020 6e61                na
+00011710: 6d65 3d6e 616d 652c 0d0a 2020 2020 2020  me=name,..      
+00011720: 2020 2020 2020 2020 2020 6174 7472 6962            attrib
+00011730: 7574 696f 6e3d 6174 7472 6962 7574 696f  ution=attributio
+00011740: 6e2c 0d0a 2020 2020 2020 2020 2020 2020  n,..            
+00011750: 2020 2020 6f70 6163 6974 793d 6f70 6163      opacity=opac
+00011760: 6974 792c 0d0a 2020 2020 2020 2020 2020  ity,..          
+00011770: 2020 2020 2020 7669 7369 626c 653d 7368        visible=sh
+00011780: 6f77 6e2c 0d0a 2020 2020 2020 2020 2020  own,..          
+00011790: 2020 2020 2020 2a2a 6b77 6172 6773 2c0d        **kwargs,.
+000117a0: 0a20 2020 2020 2020 2020 2020 2029 0d0a  .            )..
+000117b0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+000117c0: 2e61 6464 5f6c 6179 6572 2874 696c 655f  .add_layer(tile_
+000117d0: 6c61 7965 7229 0d0a 0d0a 2020 2020 2020  layer)....      
+000117e0: 2020 6578 6365 7074 2045 7863 6570 7469    except Excepti
+000117f0: 6f6e 2061 7320 653a 0d0a 2020 2020 2020  on as e:..      
+00011800: 2020 2020 2020 7072 696e 7428 2246 6169        print("Fai
+00011810: 6c65 6420 746f 2061 6464 2074 6865 2073  led to add the s
+00011820: 7065 6369 6669 6564 2054 696c 654c 6179  pecified TileLay
+00011830: 6572 2e22 290d 0a20 2020 2020 2020 2020  er.")..         
+00011840: 2020 2072 6169 7365 2045 7863 6570 7469     raise Excepti
+00011850: 6f6e 2865 290d 0a0d 0a20 2020 2064 6566  on(e)....    def
+00011860: 2061 6464 5f63 6f67 5f6c 6179 6572 280d   add_cog_layer(.
+00011870: 0a20 2020 2020 2020 2073 656c 662c 0d0a  .        self,..
+00011880: 2020 2020 2020 2020 7572 6c2c 0d0a 2020          url,..  
+00011890: 2020 2020 2020 6e61 6d65 3d22 556e 7469        name="Unti
+000118a0: 746c 6564 222c 0d0a 2020 2020 2020 2020  tled",..        
+000118b0: 6174 7472 6962 7574 696f 6e3d 2222 2c0d  attribution="",.
+000118c0: 0a20 2020 2020 2020 206f 7061 6369 7479  .        opacity
+000118d0: 3d31 2e30 2c0d 0a20 2020 2020 2020 2073  =1.0,..        s
+000118e0: 686f 776e 3d54 7275 652c 0d0a 2020 2020  hown=True,..    
+000118f0: 2020 2020 7469 7469 6c65 725f 656e 6470      titiler_endp
+00011900: 6f69 6e74 3d22 6874 7470 733a 2f2f 6170  oint="https://ap
+00011910: 692e 636f 6765 6f2e 7879 7a2f 222c 0d0a  i.cogeo.xyz/",..
+00011920: 2020 2020 2020 2020 2a2a 6b77 6172 6773          **kwargs
+00011930: 2c0d 0a20 2020 2029 3a0d 0a20 2020 2020  ,..    ):..     
+00011940: 2020 2022 2222 4164 6473 2061 2043 4f47     """Adds a COG
+00011950: 2054 696c 654c 6179 6572 2074 6f20 7468   TileLayer to th
+00011960: 6520 6d61 702e 0d0a 0d0a 2020 2020 2020  e map.....      
+00011970: 2020 4172 6773 3a0d 0a20 2020 2020 2020    Args:..       
+00011980: 2020 2020 2075 726c 2028 7374 7229 3a20       url (str): 
+00011990: 5468 6520 5552 4c20 6f66 2074 6865 2043  The URL of the C
+000119a0: 4f47 2074 696c 6520 6c61 7965 722e 0d0a  OG tile layer...
+000119b0: 2020 2020 2020 2020 2020 2020 6e61 6d65              name
+000119c0: 2028 7374 722c 206f 7074 696f 6e61 6c29   (str, optional)
+000119d0: 3a20 5468 6520 6c61 7965 7220 6e61 6d65  : The layer name
+000119e0: 2074 6f20 7573 6520 666f 7220 7468 6520   to use for the 
+000119f0: 6c61 7965 722e 2044 6566 6175 6c74 7320  layer. Defaults 
+00011a00: 746f 2027 556e 7469 746c 6564 272e 0d0a  to 'Untitled'...
+00011a10: 2020 2020 2020 2020 2020 2020 6174 7472              attr
+00011a20: 6962 7574 696f 6e20 2873 7472 2c20 6f70  ibution (str, op
+00011a30: 7469 6f6e 616c 293a 2054 6865 2061 7474  tional): The att
+00011a40: 7269 6275 7469 6f6e 2074 6f20 7573 652e  ribution to use.
+00011a50: 2044 6566 6175 6c74 7320 746f 2027 272e   Defaults to ''.
+00011a60: 0d0a 2020 2020 2020 2020 2020 2020 6f70  ..            op
+00011a70: 6163 6974 7920 2866 6c6f 6174 2c20 6f70  acity (float, op
+00011a80: 7469 6f6e 616c 293a 2054 6865 206f 7061  tional): The opa
+00011a90: 6369 7479 206f 6620 7468 6520 6c61 7965  city of the laye
+00011aa0: 722e 2044 6566 6175 6c74 7320 746f 2031  r. Defaults to 1
+00011ab0: 2e0d 0a20 2020 2020 2020 2020 2020 2073  ...            s
+00011ac0: 686f 776e 2028 626f 6f6c 2c20 6f70 7469  hown (bool, opti
+00011ad0: 6f6e 616c 293a 2041 2066 6c61 6720 696e  onal): A flag in
+00011ae0: 6469 6361 7469 6e67 2077 6865 7468 6572  dicating whether
+00011af0: 2074 6865 206c 6179 6572 2073 686f 756c   the layer shoul
+00011b00: 6420 6265 206f 6e20 6279 2064 6566 6175  d be on by defau
+00011b10: 6c74 2e20 4465 6661 756c 7473 2074 6f20  lt. Defaults to 
+00011b20: 5472 7565 2e0d 0a20 2020 2020 2020 2020  True...         
+00011b30: 2020 2074 6974 696c 6572 5f65 6e64 706f     titiler_endpo
+00011b40: 696e 7420 2873 7472 2c20 6f70 7469 6f6e  int (str, option
+00011b50: 616c 293a 2054 6974 696c 6572 2065 6e64  al): Titiler end
+00011b60: 706f 696e 742e 2044 6566 6175 6c74 7320  point. Defaults 
+00011b70: 746f 2022 6874 7470 733a 2f2f 6170 692e  to "https://api.
+00011b80: 636f 6765 6f2e 7879 7a2f 222e 0d0a 2020  cogeo.xyz/"...  
+00011b90: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
+00011ba0: 2020 2074 696c 655f 7572 6c20 3d20 6765     tile_url = ge
+00011bb0: 745f 636f 675f 7469 6c65 2875 726c 2c20  t_cog_tile(url, 
+00011bc0: 7469 7469 6c65 725f 656e 6470 6f69 6e74  titiler_endpoint
+00011bd0: 2c20 2a2a 6b77 6172 6773 290d 0a20 2020  , **kwargs)..   
+00011be0: 2020 2020 2063 656e 7465 7220 3d20 6765       center = ge
+00011bf0: 745f 636f 675f 6365 6e74 6572 2875 726c  t_cog_center(url
+00011c00: 2c20 7469 7469 6c65 725f 656e 6470 6f69  , titiler_endpoi
+00011c10: 6e74 2920 2023 2028 6c6f 6e2c 206c 6174  nt)  # (lon, lat
+00011c20: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+00011c30: 6164 645f 7469 6c65 5f6c 6179 6572 2874  add_tile_layer(t
+00011c40: 696c 655f 7572 6c2c 206e 616d 652c 2061  ile_url, name, a
+00011c50: 7474 7269 6275 7469 6f6e 2c20 6f70 6163  ttribution, opac
+00011c60: 6974 792c 2073 686f 776e 290d 0a20 2020  ity, shown)..   
+00011c70: 2020 2020 2073 656c 662e 7365 745f 6365       self.set_ce
+00011c80: 6e74 6572 286c 6f6e 3d63 656e 7465 725b  nter(lon=center[
+00011c90: 305d 2c20 6c61 743d 6365 6e74 6572 5b31  0], lat=center[1
+00011ca0: 5d2c 207a 6f6f 6d3d 3130 290d 0a0d 0a20  ], zoom=10).... 
+00011cb0: 2020 2064 6566 2061 6464 5f63 6f67 5f6d     def add_cog_m
+00011cc0: 6f73 6169 6328 0d0a 2020 2020 2020 2020  osaic(..        
+00011cd0: 7365 6c66 2c0d 0a20 2020 2020 2020 206c  self,..        l
+00011ce0: 696e 6b73 2c0d 0a20 2020 2020 2020 206e  inks,..        n
+00011cf0: 616d 653d 2255 6e74 6974 6c65 6422 2c0d  ame="Untitled",.
+00011d00: 0a20 2020 2020 2020 2061 7474 7269 6275  .        attribu
+00011d10: 7469 6f6e 3d22 222c 0d0a 2020 2020 2020  tion="",..      
+00011d20: 2020 6f70 6163 6974 793d 312e 302c 0d0a    opacity=1.0,..
+00011d30: 2020 2020 2020 2020 7368 6f77 6e3d 5472          shown=Tr
+00011d40: 7565 2c0d 0a20 2020 2020 2020 2074 6974  ue,..        tit
+00011d50: 696c 6572 5f65 6e64 706f 696e 743d 2268  iler_endpoint="h
+00011d60: 7474 7073 3a2f 2f61 7069 2e63 6f67 656f  ttps://api.cogeo
+00011d70: 2e78 797a 2f22 2c0d 0a20 2020 2020 2020  .xyz/",..       
+00011d80: 2075 7365 726e 616d 653d 2261 6e6f 6e79   username="anony
+00011d90: 6d6f 7573 222c 0d0a 2020 2020 2020 2020  mous",..        
+00011da0: 6f76 6572 7772 6974 653d 4661 6c73 652c  overwrite=False,
+00011db0: 0d0a 2020 2020 2020 2020 7368 6f77 5f66  ..        show_f
+00011dc0: 6f6f 7470 7269 6e74 733d 4661 6c73 652c  ootprints=False,
+00011dd0: 0d0a 2020 2020 2020 2020 7665 7262 6f73  ..        verbos
+00011de0: 653d 5472 7565 2c0d 0a20 2020 2020 2020  e=True,..       
+00011df0: 202a 2a6b 7761 7267 732c 0d0a 2020 2020   **kwargs,..    
+00011e00: 293a 0d0a 2020 2020 2020 2020 2222 2241  ):..        """A
+00011e10: 6464 2061 2076 6972 7475 616c 206d 6f73  dd a virtual mos
+00011e20: 6169 6320 6f66 2043 4f47 7320 746f 2074  aic of COGs to t
+00011e30: 6865 206d 6170 2e0d 0a0d 0a20 2020 2020  he map.....     
+00011e40: 2020 2041 7267 733a 0d0a 2020 2020 2020     Args:..      
+00011e50: 2020 2020 2020 6c69 6e6b 7320 286c 6973        links (lis
+00011e60: 7429 3a20 4120 6c69 7374 206f 6620 6c69  t): A list of li
+00011e70: 6e6b 7320 706f 696e 7469 6e67 2074 6f20  nks pointing to 
+00011e80: 434f 4773 2e0d 0a20 2020 2020 2020 2020  COGs...         
+00011e90: 2020 206e 616d 6520 2873 7472 2c20 6f70     name (str, op
+00011ea0: 7469 6f6e 616c 293a 2054 6865 206c 6179  tional): The lay
+00011eb0: 6572 206e 616d 6520 746f 2075 7365 2066  er name to use f
+00011ec0: 6f72 2074 6865 206c 6179 6572 2e20 4465  or the layer. De
+00011ed0: 6661 756c 7473 2074 6f20 2755 6e74 6974  faults to 'Untit
+00011ee0: 6c65 6427 2e0d 0a20 2020 2020 2020 2020  led'...         
+00011ef0: 2020 2061 7474 7269 6275 7469 6f6e 2028     attribution (
+00011f00: 7374 722c 206f 7074 696f 6e61 6c29 3a20  str, optional): 
+00011f10: 5468 6520 6174 7472 6962 7574 696f 6e20  The attribution 
+00011f20: 746f 2075 7365 2e20 4465 6661 756c 7473  to use. Defaults
+00011f30: 2074 6f20 2727 2e0d 0a20 2020 2020 2020   to ''...       
+00011f40: 2020 2020 206f 7061 6369 7479 2028 666c       opacity (fl
+00011f50: 6f61 742c 206f 7074 696f 6e61 6c29 3a20  oat, optional): 
+00011f60: 5468 6520 6f70 6163 6974 7920 6f66 2074  The opacity of t
+00011f70: 6865 206c 6179 6572 2e20 4465 6661 756c  he layer. Defaul
+00011f80: 7473 2074 6f20 312e 0d0a 2020 2020 2020  ts to 1...      
+00011f90: 2020 2020 2020 7368 6f77 6e20 2862 6f6f        shown (boo
+00011fa0: 6c2c 206f 7074 696f 6e61 6c29 3a20 4120  l, optional): A 
+00011fb0: 666c 6167 2069 6e64 6963 6174 696e 6720  flag indicating 
+00011fc0: 7768 6574 6865 7220 7468 6520 6c61 7965  whether the laye
+00011fd0: 7220 7368 6f75 6c64 2062 6520 6f6e 2062  r should be on b
+00011fe0: 7920 6465 6661 756c 742e 2044 6566 6175  y default. Defau
+00011ff0: 6c74 7320 746f 2054 7275 652e 0d0a 2020  lts to True...  
+00012000: 2020 2020 2020 2020 2020 7469 7469 6c65            titile
+00012010: 725f 656e 6470 6f69 6e74 2028 7374 722c  r_endpoint (str,
+00012020: 206f 7074 696f 6e61 6c29 3a20 5469 7469   optional): Titi
+00012030: 6c65 7220 656e 6470 6f69 6e74 2e20 4465  ler endpoint. De
+00012040: 6661 756c 7473 2074 6f20 2268 7474 7073  faults to "https
+00012050: 3a2f 2f61 7069 2e63 6f67 656f 2e78 797a  ://api.cogeo.xyz
+00012060: 2f22 2e0d 0a20 2020 2020 2020 2020 2020  /"...           
+00012070: 2075 7365 726e 616d 6520 2873 7472 2c20   username (str, 
+00012080: 6f70 7469 6f6e 616c 293a 2054 6865 2075  optional): The u
+00012090: 7365 726e 616d 6520 746f 2063 7265 6174  sername to creat
+000120a0: 6520 6d6f 7361 6963 2075 7369 6e67 2074  e mosaic using t
+000120b0: 6865 2074 6974 696c 6572 2065 6e64 706f  he titiler endpo
+000120c0: 696e 742e 2044 6566 6175 6c74 7320 746f  int. Defaults to
+000120d0: 2027 616e 6f6e 796d 6f75 7327 2e0d 0a20   'anonymous'... 
+000120e0: 2020 2020 2020 2020 2020 206f 7665 7277             overw
+000120f0: 7269 7465 2028 626f 6f6c 2c20 6f70 7469  rite (bool, opti
+00012100: 6f6e 616c 293a 2057 6865 7468 6572 206f  onal): Whether o
+00012110: 7220 6e6f 7420 746f 2072 6570 6c61 6365  r not to replace
+00012120: 2065 7869 7374 696e 6720 6c61 7965 7220   existing layer 
+00012130: 7769 7468 2074 6865 2073 616d 6520 6c61  with the same la
+00012140: 7965 7220 6e61 6d65 2e20 4465 6661 756c  yer name. Defaul
+00012150: 7473 2074 6f20 4661 6c73 652e 0d0a 2020  ts to False...  
+00012160: 2020 2020 2020 2020 2020 7368 6f77 5f66            show_f
+00012170: 6f6f 7470 7269 6e74 7320 2862 6f6f 6c2c  ootprints (bool,
+00012180: 206f 7074 696f 6e61 6c29 3a20 5768 6574   optional): Whet
+00012190: 6865 7220 6f72 206e 6f74 2074 6f20 7368  her or not to sh
+000121a0: 6f77 2066 6f6f 7470 7269 6e74 7320 6f66  ow footprints of
+000121b0: 2043 4f47 732e 2044 6566 6175 6c74 7320   COGs. Defaults 
+000121c0: 746f 2046 616c 7365 2e0d 0a20 2020 2020  to False...     
+000121d0: 2020 2020 2020 2076 6572 626f 7365 2028         verbose (
+000121e0: 626f 6f6c 2c20 6f70 7469 6f6e 616c 293a  bool, optional):
+000121f0: 2057 6865 7468 6572 206f 7220 6e6f 7420   Whether or not 
+00012200: 746f 2070 7269 6e74 2064 6573 6372 6970  to print descrip
+00012210: 7469 6f6e 732e 2044 6566 6175 6c74 7320  tions. Defaults 
+00012220: 746f 2054 7275 652e 0d0a 2020 2020 2020  to True...      
+00012230: 2020 2222 220d 0a20 2020 2020 2020 206c    """..        l
+00012240: 6179 6572 6e61 6d65 203d 206e 616d 652e  ayername = name.
+00012250: 7265 706c 6163 6528 2220 222c 2022 5f22  replace(" ", "_"
+00012260: 290d 0a20 2020 2020 2020 2074 696c 6520  )..        tile 
+00012270: 3d20 6765 745f 636f 675f 6d6f 7361 6963  = get_cog_mosaic
+00012280: 280d 0a20 2020 2020 2020 2020 2020 206c  (..            l
+00012290: 696e 6b73 2c0d 0a20 2020 2020 2020 2020  inks,..         
+000122a0: 2020 2074 6974 696c 6572 5f65 6e64 706f     titiler_endpo
+000122b0: 696e 743d 7469 7469 6c65 725f 656e 6470  int=titiler_endp
+000122c0: 6f69 6e74 2c0d 0a20 2020 2020 2020 2020  oint,..         
+000122d0: 2020 2075 7365 726e 616d 653d 7573 6572     username=user
+000122e0: 6e61 6d65 2c0d 0a20 2020 2020 2020 2020  name,..         
+000122f0: 2020 206c 6179 6572 6e61 6d65 3d6c 6179     layername=lay
+00012300: 6572 6e61 6d65 2c0d 0a20 2020 2020 2020  ername,..       
+00012310: 2020 2020 206f 7665 7277 7269 7465 3d6f       overwrite=o
+00012320: 7665 7277 7269 7465 2c0d 0a20 2020 2020  verwrite,..     
+00012330: 2020 2020 2020 2076 6572 626f 7365 3d76         verbose=v
+00012340: 6572 626f 7365 2c0d 0a20 2020 2020 2020  erbose,..       
+00012350: 2029 0d0a 2020 2020 2020 2020 7365 6c66   )..        self
+00012360: 2e61 6464 5f74 696c 655f 6c61 7965 7228  .add_tile_layer(
+00012370: 7469 6c65 2c20 6e61 6d65 2c20 6174 7472  tile, name, attr
+00012380: 6962 7574 696f 6e2c 206f 7061 6369 7479  ibution, opacity
+00012390: 2c20 7368 6f77 6e29 0d0a 0d0a 2020 2020  , shown)....    
+000123a0: 2020 2020 6966 2073 686f 775f 666f 6f74      if show_foot
+000123b0: 7072 696e 7473 3a0d 0a20 2020 2020 2020  prints:..       
+000123c0: 2020 2020 2069 6620 7665 7262 6f73 653a       if verbose:
+000123d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000123e0: 2020 7072 696e 7428 0d0a 2020 2020 2020    print(..      
+000123f0: 2020 2020 2020 2020 2020 2020 2020 6622                f"
+00012400: 4765 6e65 7261 7469 6e67 2066 6f6f 7470  Generating footp
+00012410: 7269 6e74 7320 6f66 207b 6c65 6e28 6c69  rints of {len(li
+00012420: 6e6b 7329 7d20 434f 4773 2e20 5468 6973  nks)} COGs. This
+00012430: 206d 6967 6874 2074 616b 6520 6120 7768   might take a wh
+00012440: 696c 6520 2e2e 2e22 0d0a 2020 2020 2020  ile ..."..      
+00012450: 2020 2020 2020 2020 2020 290d 0a20 2020            )..   
+00012460: 2020 2020 2020 2020 2063 6f6f 7264 7320           coords 
+00012470: 3d20 5b5d 0d0a 2020 2020 2020 2020 2020  = []..          
+00012480: 2020 666f 7220 6c69 6e6b 2069 6e20 6c69    for link in li
+00012490: 6e6b 733a 0d0a 2020 2020 2020 2020 2020  nks:..          
+000124a0: 2020 2020 2020 636f 6f72 6420 3d20 6765        coord = ge
+000124b0: 745f 636f 675f 626f 756e 6473 286c 696e  t_cog_bounds(lin
+000124c0: 6b29 0d0a 2020 2020 2020 2020 2020 2020  k)..            
+000124d0: 2020 2020 6966 2063 6f6f 7264 2069 7320      if coord is 
+000124e0: 6e6f 7420 4e6f 6e65 3a0d 0a20 2020 2020  not None:..     
+000124f0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+00012500: 6f6f 7264 732e 6170 7065 6e64 2863 6f6f  oords.append(coo
+00012510: 7264 290d 0a20 2020 2020 2020 2020 2020  rd)..           
+00012520: 2066 6320 3d20 636f 6f72 6473 5f74 6f5f   fc = coords_to_
+00012530: 6765 6f6a 736f 6e28 636f 6f72 6473 290d  geojson(coords).
+00012540: 0a0d 0a20 2020 2020 2020 2020 2020 2067  ...            g
+00012550: 656f 5f6a 736f 6e20 3d20 6970 796c 6561  eo_json = ipylea
+00012560: 666c 6574 2e47 656f 4a53 4f4e 280d 0a20  flet.GeoJSON(.. 
+00012570: 2020 2020 2020 2020 2020 2020 2020 2064                 d
+00012580: 6174 613d 6663 2c0d 0a20 2020 2020 2020  ata=fc,..       
+00012590: 2020 2020 2020 2020 2073 7479 6c65 3d7b           style={
+000125a0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000125b0: 2020 2020 2020 226f 7061 6369 7479 223a        "opacity":
+000125c0: 2031 2c0d 0a20 2020 2020 2020 2020 2020   1,..           
+000125d0: 2020 2020 2020 2020 2022 6461 7368 4172           "dashAr
+000125e0: 7261 7922 3a20 2231 222c 0d0a 2020 2020  ray": "1",..    
+000125f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012600: 2266 696c 6c4f 7061 6369 7479 223a 2030  "fillOpacity": 0
+00012610: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+00012620: 2020 2020 2020 2022 7765 6967 6874 223a         "weight":
+00012630: 2031 2c0d 0a20 2020 2020 2020 2020 2020   1,..           
+00012640: 2020 2020 207d 2c0d 0a20 2020 2020 2020       },..       
+00012650: 2020 2020 2020 2020 206e 616d 653d 2246           name="F
+00012660: 6f6f 7470 7269 6e74 7322 2c0d 0a20 2020  ootprints",..   
+00012670: 2020 2020 2020 2020 2029 0d0a 0d0a 2020           )....  
+00012680: 2020 2020 2020 2020 2020 7365 6c66 2e61            self.a
+00012690: 6464 5f6c 6179 6572 2867 656f 5f6a 736f  dd_layer(geo_jso
+000126a0: 6e29 0d0a 2020 2020 2020 2020 2020 2020  n)..            
+000126b0: 6365 6e74 6572 203d 2067 6574 5f63 656e  center = get_cen
+000126c0: 7465 7228 6663 290d 0a20 2020 2020 2020  ter(fc)..       
+000126d0: 2020 2020 2069 6620 7665 7262 6f73 653a       if verbose:
+000126e0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000126f0: 2020 7072 696e 7428 2254 6865 2066 6f6f    print("The foo
+00012700: 7470 7269 6e74 206c 6179 6572 2068 6173  tprint layer has
+00012710: 2062 6565 6e20 6164 6465 642e 2229 0d0a   been added.")..
+00012720: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
+00012730: 2020 2020 2020 2020 2020 2063 656e 7465             cente
+00012740: 7220 3d20 6765 745f 636f 675f 6365 6e74  r = get_cog_cent
+00012750: 6572 286c 696e 6b73 5b30 5d2c 2074 6974  er(links[0], tit
+00012760: 696c 6572 5f65 6e64 706f 696e 7429 0d0a  iler_endpoint)..
+00012770: 0d0a 2020 2020 2020 2020 7365 6c66 2e73  ..        self.s
+00012780: 6574 5f63 656e 7465 7228 6365 6e74 6572  et_center(center
+00012790: 5b30 5d2c 2063 656e 7465 725b 315d 2c20  [0], center[1], 
+000127a0: 7a6f 6f6d 3d36 290d 0a0d 0a20 2020 2064  zoom=6)....    d
+000127b0: 6566 2061 6464 5f73 7461 635f 6c61 7965  ef add_stac_laye
+000127c0: 7228 0d0a 2020 2020 2020 2020 7365 6c66  r(..        self
+000127d0: 2c0d 0a20 2020 2020 2020 2075 726c 2c0d  ,..        url,.
+000127e0: 0a20 2020 2020 2020 2062 616e 6473 3d4e  .        bands=N
+000127f0: 6f6e 652c 0d0a 2020 2020 2020 2020 6e61  one,..        na
+00012800: 6d65 3d22 556e 7469 746c 6564 222c 0d0a  me="Untitled",..
+00012810: 2020 2020 2020 2020 6174 7472 6962 7574          attribut
+00012820: 696f 6e3d 2222 2c0d 0a20 2020 2020 2020  ion="",..       
+00012830: 206f 7061 6369 7479 3d31 2e30 2c0d 0a20   opacity=1.0,.. 
+00012840: 2020 2020 2020 2073 686f 776e 3d54 7275         shown=Tru
+00012850: 652c 0d0a 2020 2020 2020 2020 7469 7469  e,..        titi
+00012860: 6c65 725f 656e 6470 6f69 6e74 3d22 6874  ler_endpoint="ht
+00012870: 7470 733a 2f2f 6170 692e 636f 6765 6f2e  tps://api.cogeo.
+00012880: 7879 7a2f 222c 0d0a 2020 2020 2020 2020  xyz/",..        
+00012890: 2a2a 6b77 6172 6773 2c0d 0a20 2020 2029  **kwargs,..    )
+000128a0: 3a0d 0a20 2020 2020 2020 2022 2222 4164  :..        """Ad
+000128b0: 6473 2061 2053 5441 4320 5469 6c65 4c61  ds a STAC TileLa
+000128c0: 7965 7220 746f 2074 6865 206d 6170 2e0d  yer to the map..
+000128d0: 0a0d 0a20 2020 2020 2020 2041 7267 733a  ...        Args:
+000128e0: 0d0a 2020 2020 2020 2020 2020 2020 7572  ..            ur
+000128f0: 6c20 2873 7472 293a 2054 6865 2055 524c  l (str): The URL
+00012900: 206f 6620 7468 6520 434f 4720 7469 6c65   of the COG tile
+00012910: 206c 6179 6572 2e0d 0a20 2020 2020 2020   layer...       
+00012920: 2020 2020 206e 616d 6520 2873 7472 2c20       name (str, 
+00012930: 6f70 7469 6f6e 616c 293a 2054 6865 206c  optional): The l
+00012940: 6179 6572 206e 616d 6520 746f 2075 7365  ayer name to use
+00012950: 2066 6f72 2074 6865 206c 6179 6572 2e20   for the layer. 
+00012960: 4465 6661 756c 7473 2074 6f20 2755 6e74  Defaults to 'Unt
+00012970: 6974 6c65 6427 2e0d 0a20 2020 2020 2020  itled'...       
+00012980: 2020 2020 2061 7474 7269 6275 7469 6f6e       attribution
+00012990: 2028 7374 722c 206f 7074 696f 6e61 6c29   (str, optional)
+000129a0: 3a20 5468 6520 6174 7472 6962 7574 696f  : The attributio
+000129b0: 6e20 746f 2075 7365 2e20 4465 6661 756c  n to use. Defaul
+000129c0: 7473 2074 6f20 2727 2e0d 0a20 2020 2020  ts to ''...     
+000129d0: 2020 2020 2020 206f 7061 6369 7479 2028         opacity (
+000129e0: 666c 6f61 742c 206f 7074 696f 6e61 6c29  float, optional)
+000129f0: 3a20 5468 6520 6f70 6163 6974 7920 6f66  : The opacity of
+00012a00: 2074 6865 206c 6179 6572 2e20 4465 6661   the layer. Defa
+00012a10: 756c 7473 2074 6f20 312e 0d0a 2020 2020  ults to 1...    
+00012a20: 2020 2020 2020 2020 7368 6f77 6e20 2862          shown (b
+00012a30: 6f6f 6c2c 206f 7074 696f 6e61 6c29 3a20  ool, optional): 
+00012a40: 4120 666c 6167 2069 6e64 6963 6174 696e  A flag indicatin
+00012a50: 6720 7768 6574 6865 7220 7468 6520 6c61  g whether the la
+00012a60: 7965 7220 7368 6f75 6c64 2062 6520 6f6e  yer should be on
+00012a70: 2062 7920 6465 6661 756c 742e 2044 6566   by default. Def
+00012a80: 6175 6c74 7320 746f 2054 7275 652e 0d0a  aults to True...
+00012a90: 2020 2020 2020 2020 2020 2020 7469 7469              titi
+00012aa0: 6c65 725f 656e 6470 6f69 6e74 2028 7374  ler_endpoint (st
+00012ab0: 722c 206f 7074 696f 6e61 6c29 3a20 5469  r, optional): Ti
+00012ac0: 7469 6c65 7220 656e 6470 6f69 6e74 2e20  tiler endpoint. 
+00012ad0: 4465 6661 756c 7473 2074 6f20 2268 7474  Defaults to "htt
+00012ae0: 7073 3a2f 2f61 7069 2e63 6f67 656f 2e78  ps://api.cogeo.x
+00012af0: 797a 2f22 2e0d 0a20 2020 2020 2020 2022  yz/"...        "
+00012b00: 2222 0d0a 2020 2020 2020 2020 7469 6c65  ""..        tile
+00012b10: 5f75 726c 203d 2067 6574 5f73 7461 635f  _url = get_stac_
+00012b20: 7469 6c65 2875 726c 2c20 6261 6e64 732c  tile(url, bands,
+00012b30: 2074 6974 696c 6572 5f65 6e64 706f 696e   titiler_endpoin
+00012b40: 742c 202a 2a6b 7761 7267 7329 0d0a 2020  t, **kwargs)..  
+00012b50: 2020 2020 2020 6365 6e74 6572 203d 2067        center = g
+00012b60: 6574 5f73 7461 635f 6365 6e74 6572 2875  et_stac_center(u
+00012b70: 726c 2c20 7469 7469 6c65 725f 656e 6470  rl, titiler_endp
+00012b80: 6f69 6e74 290d 0a20 2020 2020 2020 2073  oint)..        s
+00012b90: 656c 662e 6164 645f 7469 6c65 5f6c 6179  elf.add_tile_lay
+00012ba0: 6572 2874 696c 655f 7572 6c2c 206e 616d  er(tile_url, nam
+00012bb0: 652c 2061 7474 7269 6275 7469 6f6e 2c20  e, attribution, 
+00012bc0: 6f70 6163 6974 792c 2073 686f 776e 290d  opacity, shown).
+00012bd0: 0a20 2020 2020 2020 2073 656c 662e 7365  .        self.se
+00012be0: 745f 6365 6e74 6572 286c 6f6e 3d63 656e  t_center(lon=cen
+00012bf0: 7465 725b 305d 2c20 6c61 743d 6365 6e74  ter[0], lat=cent
+00012c00: 6572 5b31 5d2c 207a 6f6f 6d3d 3130 290d  er[1], zoom=10).
+00012c10: 0a0d 0a20 2020 2064 6566 2061 6464 5f6d  ...    def add_m
+00012c20: 696e 696d 6170 2873 656c 662c 207a 6f6f  inimap(self, zoo
+00012c30: 6d3d 352c 2070 6f73 6974 696f 6e3d 2262  m=5, position="b
+00012c40: 6f74 746f 6d72 6967 6874 2229 3a0d 0a20  ottomright"):.. 
+00012c50: 2020 2020 2020 2022 2222 4164 6473 2061         """Adds a
+00012c60: 206d 696e 696d 6170 2028 6f76 6572 7669   minimap (overvi
+00012c70: 6577 2920 746f 2074 6865 2069 7079 6c65  ew) to the ipyle
+00012c80: 6166 6c65 7420 6d61 702e 0d0a 0d0a 2020  aflet map.....  
+00012c90: 2020 2020 2020 4172 6773 3a0d 0a20 2020        Args:..   
+00012ca0: 2020 2020 2020 2020 207a 6f6f 6d20 2869           zoom (i
+00012cb0: 6e74 2c20 6f70 7469 6f6e 616c 293a 2049  nt, optional): I
+00012cc0: 6e69 7469 616c 206d 6170 207a 6f6f 6d20  nitial map zoom 
+00012cd0: 6c65 7665 6c2e 2044 6566 6175 6c74 7320  level. Defaults 
+00012ce0: 746f 2035 2e0d 0a20 2020 2020 2020 2020  to 5...         
+00012cf0: 2020 2070 6f73 6974 696f 6e20 2873 7472     position (str
+00012d00: 2c20 6f70 7469 6f6e 616c 293a 2050 6f73  , optional): Pos
+00012d10: 6974 696f 6e20 6f66 2074 6865 206d 696e  ition of the min
+00012d20: 696d 6170 2e20 4465 6661 756c 7473 2074  imap. Defaults t
+00012d30: 6f20 2262 6f74 746f 6d72 6967 6874 222e  o "bottomright".
+00012d40: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+00012d50: 2020 2020 2020 206d 696e 696d 6170 203d         minimap =
+00012d60: 2069 7079 6c65 6166 6c65 742e 4d61 7028   ipyleaflet.Map(
+00012d70: 0d0a 2020 2020 2020 2020 2020 2020 7a6f  ..            zo
+00012d80: 6f6d 5f63 6f6e 7472 6f6c 3d46 616c 7365  om_control=False
+00012d90: 2c0d 0a20 2020 2020 2020 2020 2020 2061  ,..            a
+00012da0: 7474 7269 6275 7469 6f6e 5f63 6f6e 7472  ttribution_contr
+00012db0: 6f6c 3d46 616c 7365 2c0d 0a20 2020 2020  ol=False,..     
+00012dc0: 2020 2020 2020 207a 6f6f 6d3d 7a6f 6f6d         zoom=zoom
+00012dd0: 2c0d 0a20 2020 2020 2020 2020 2020 2063  ,..            c
+00012de0: 656e 7465 723d 7365 6c66 2e63 656e 7465  enter=self.cente
+00012df0: 722c 0d0a 2020 2020 2020 2020 2020 2020  r,..            
+00012e00: 6c61 7965 7273 3d5b 6261 7365 6d61 705f  layers=[basemap_
+00012e10: 7469 6c65 735b 2252 4f41 444d 4150 225d  tiles["ROADMAP"]
+00012e20: 5d2c 0d0a 2020 2020 2020 2020 290d 0a20  ],..        ).. 
+00012e30: 2020 2020 2020 206d 696e 696d 6170 2e6c         minimap.l
+00012e40: 6179 6f75 742e 7769 6474 6820 3d20 2231  ayout.width = "1
+00012e50: 3530 7078 220d 0a20 2020 2020 2020 206d  50px"..        m
+00012e60: 696e 696d 6170 2e6c 6179 6f75 742e 6865  inimap.layout.he
+00012e70: 6967 6874 203d 2022 3135 3070 7822 0d0a  ight = "150px"..
+00012e80: 2020 2020 2020 2020 6970 796c 6561 666c          ipyleafl
+00012e90: 6574 2e6c 696e 6b28 286d 696e 696d 6170  et.link((minimap
+00012ea0: 2c20 2263 656e 7465 7222 292c 2028 7365  , "center"), (se
+00012eb0: 6c66 2c20 2263 656e 7465 7222 2929 0d0a  lf, "center"))..
+00012ec0: 2020 2020 2020 2020 6d69 6e69 6d61 705f          minimap_
+00012ed0: 636f 6e74 726f 6c20 3d20 6970 796c 6561  control = ipylea
+00012ee0: 666c 6574 2e57 6964 6765 7443 6f6e 7472  flet.WidgetContr
+00012ef0: 6f6c 2877 6964 6765 743d 6d69 6e69 6d61  ol(widget=minima
+00012f00: 702c 2070 6f73 6974 696f 6e3d 706f 7369  p, position=posi
+00012f10: 7469 6f6e 290d 0a20 2020 2020 2020 2073  tion)..        s
+00012f20: 656c 662e 6164 645f 636f 6e74 726f 6c28  elf.add_control(
+00012f30: 6d69 6e69 6d61 705f 636f 6e74 726f 6c29  minimap_control)
+00012f40: 0d0a 0d0a 2020 2020 6465 6620 6d61 726b  ....    def mark
+00012f50: 6572 5f63 6c75 7374 6572 2873 656c 6629  er_cluster(self)
+00012f60: 3a0d 0a20 2020 2020 2020 2022 2222 4164  :..        """Ad
+00012f70: 6473 2061 206d 6172 6b65 7220 636c 7573  ds a marker clus
+00012f80: 7465 7220 746f 2074 6865 206d 6170 2061  ter to the map a
+00012f90: 6e64 2072 6574 7572 6e73 2061 206c 6973  nd returns a lis
+00012fa0: 7420 6f66 2065 652e 4665 6174 7572 652c  t of ee.Feature,
+00012fb0: 2077 6869 6368 2063 616e 2062 6520 6163   which can be ac
+00012fc0: 6365 7373 6564 2075 7369 6e67 204d 6170  cessed using Map
+00012fd0: 2e65 655f 6d61 726b 6572 5f63 6c75 7374  .ee_marker_clust
+00012fe0: 6572 2e0d 0a0d 0a20 2020 2020 2020 2052  er.....        R
+00012ff0: 6574 7572 6e73 3a0d 0a20 2020 2020 2020  eturns:..       
+00013000: 2020 2020 206f 626a 6563 743a 2061 206c       object: a l
+00013010: 6973 7420 6f66 2065 652e 4665 6174 7572  ist of ee.Featur
+00013020: 650d 0a20 2020 2020 2020 2022 2222 0d0a  e..        """..
+00013030: 2020 2020 2020 2020 636f 6f72 6469 6e61          coordina
+00013040: 7465 7320 3d20 5b5d 0d0a 2020 2020 2020  tes = []..      
+00013050: 2020 6d61 726b 6572 7320 3d20 5b5d 0d0a    markers = []..
+00013060: 2020 2020 2020 2020 6d61 726b 6572 5f63          marker_c
+00013070: 6c75 7374 6572 203d 2069 7079 6c65 6166  luster = ipyleaf
+00013080: 6c65 742e 4d61 726b 6572 436c 7573 7465  let.MarkerCluste
+00013090: 7228 6e61 6d65 3d22 4d61 726b 6572 2043  r(name="Marker C
+000130a0: 6c75 7374 6572 2229 0d0a 2020 2020 2020  luster")..      
+000130b0: 2020 7365 6c66 2e6c 6173 745f 636c 6963    self.last_clic
+000130c0: 6b20 3d20 5b5d 0d0a 2020 2020 2020 2020  k = []..        
+000130d0: 7365 6c66 2e61 6c6c 5f63 6c69 636b 7320  self.all_clicks 
+000130e0: 3d20 5b5d 0d0a 2020 2020 2020 2020 7365  = []..        se
+000130f0: 6c66 2e65 655f 6d61 726b 6572 7320 3d20  lf.ee_markers = 
+00013100: 5b5d 0d0a 2020 2020 2020 2020 7365 6c66  []..        self
+00013110: 2e61 6464 5f6c 6179 6572 286d 6172 6b65  .add_layer(marke
+00013120: 725f 636c 7573 7465 7229 0d0a 0d0a 2020  r_cluster)....  
+00013130: 2020 2020 2020 6465 6620 6861 6e64 6c65        def handle
+00013140: 5f69 6e74 6572 6163 7469 6f6e 282a 2a6b  _interaction(**k
+00013150: 7761 7267 7329 3a0d 0a20 2020 2020 2020  wargs):..       
+00013160: 2020 2020 206c 6174 6c6f 6e20 3d20 6b77       latlon = kw
+00013170: 6172 6773 2e67 6574 2822 636f 6f72 6469  args.get("coordi
+00013180: 6e61 7465 7322 290d 0a20 2020 2020 2020  nates")..       
+00013190: 2020 2020 2069 6620 6b77 6172 6773 2e67       if kwargs.g
+000131a0: 6574 2822 7479 7065 2229 203d 3d20 2263  et("type") == "c
+000131b0: 6c69 636b 223a 0d0a 2020 2020 2020 2020  lick":..        
+000131c0: 2020 2020 2020 2020 636f 6f72 6469 6e61          coordina
+000131d0: 7465 732e 6170 7065 6e64 286c 6174 6c6f  tes.append(latlo
+000131e0: 6e29 0d0a 2020 2020 2020 2020 2020 2020  n)..            
+000131f0: 2020 2020 6765 6f6d 203d 2065 652e 4765      geom = ee.Ge
+00013200: 6f6d 6574 7279 2e50 6f69 6e74 286c 6174  ometry.Point(lat
+00013210: 6c6f 6e5b 315d 2c20 6c61 746c 6f6e 5b30  lon[1], latlon[0
+00013220: 5d29 0d0a 2020 2020 2020 2020 2020 2020  ])..            
+00013230: 2020 2020 6665 6174 7572 6520 3d20 6565      feature = ee
+00013240: 2e46 6561 7475 7265 2867 656f 6d29 0d0a  .Feature(geom)..
+00013250: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013260: 7365 6c66 2e65 655f 6d61 726b 6572 732e  self.ee_markers.
+00013270: 6170 7065 6e64 2866 6561 7475 7265 290d  append(feature).
+00013280: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00013290: 2073 656c 662e 6c61 7374 5f63 6c69 636b   self.last_click
+000132a0: 203d 206c 6174 6c6f 6e0d 0a20 2020 2020   = latlon..     
+000132b0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+000132c0: 616c 6c5f 636c 6963 6b73 203d 2063 6f6f  all_clicks = coo
+000132d0: 7264 696e 6174 6573 0d0a 2020 2020 2020  rdinates..      
+000132e0: 2020 2020 2020 2020 2020 6d61 726b 6572            marker
+000132f0: 732e 6170 7065 6e64 2869 7079 6c65 6166  s.append(ipyleaf
+00013300: 6c65 742e 4d61 726b 6572 286c 6f63 6174  let.Marker(locat
+00013310: 696f 6e3d 6c61 746c 6f6e 2929 0d0a 2020  ion=latlon))..  
+00013320: 2020 2020 2020 2020 2020 2020 2020 6d61                ma
+00013330: 726b 6572 5f63 6c75 7374 6572 2e6d 6172  rker_cluster.mar
+00013340: 6b65 7273 203d 206d 6172 6b65 7273 0d0a  kers = markers..
+00013350: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+00013360: 206b 7761 7267 732e 6765 7428 2274 7970   kwargs.get("typ
+00013370: 6522 2920 3d3d 2022 6d6f 7573 656d 6f76  e") == "mousemov
+00013380: 6522 3a0d 0a20 2020 2020 2020 2020 2020  e":..           
+00013390: 2020 2020 2070 6173 730d 0a0d 0a20 2020       pass....   
+000133a0: 2020 2020 2023 2063 7572 736f 7220 7374       # cursor st
+000133b0: 796c 653a 2068 7474 7073 3a2f 2f77 7777  yle: https://www
+000133c0: 2e77 3373 6368 6f6f 6c73 2e63 6f6d 2f63  .w3schools.com/c
+000133d0: 7373 7265 662f 7072 5f63 6c61 7373 5f63  ssref/pr_class_c
+000133e0: 7572 736f 722e 6173 700d 0a20 2020 2020  ursor.asp..     
+000133f0: 2020 2073 656c 662e 6465 6661 756c 745f     self.default_
+00013400: 7374 796c 6520 3d20 7b22 6375 7273 6f72  style = {"cursor
+00013410: 223a 2022 6372 6f73 7368 6169 7222 7d0d  ": "crosshair"}.
+00013420: 0a20 2020 2020 2020 2073 656c 662e 6f6e  .        self.on
+00013430: 5f69 6e74 6572 6163 7469 6f6e 2868 616e  _interaction(han
+00013440: 646c 655f 696e 7465 7261 6374 696f 6e29  dle_interaction)
+00013450: 0d0a 0d0a 2020 2020 6465 6620 7365 745f  ....    def set_
+00013460: 706c 6f74 5f6f 7074 696f 6e73 280d 0a20  plot_options(.. 
+00013470: 2020 2020 2020 2073 656c 662c 0d0a 2020         self,..  
+00013480: 2020 2020 2020 6164 645f 6d61 726b 6572        add_marker
+00013490: 5f63 6c75 7374 6572 3d46 616c 7365 2c0d  _cluster=False,.
+000134a0: 0a20 2020 2020 2020 2073 616d 706c 655f  .        sample_
+000134b0: 7363 616c 653d 4e6f 6e65 2c0d 0a20 2020  scale=None,..   
+000134c0: 2020 2020 2070 6c6f 745f 7479 7065 3d4e       plot_type=N
+000134d0: 6f6e 652c 0d0a 2020 2020 2020 2020 6f76  one,..        ov
+000134e0: 6572 6c61 793d 4661 6c73 652c 0d0a 2020  erlay=False,..  
+000134f0: 2020 2020 2020 706f 7369 7469 6f6e 3d22        position="
+00013500: 626f 7474 6f6d 7269 6768 7422 2c0d 0a20  bottomright",.. 
+00013510: 2020 2020 2020 206d 696e 5f77 6964 7468         min_width
+00013520: 3d4e 6f6e 652c 0d0a 2020 2020 2020 2020  =None,..        
+00013530: 6d61 785f 7769 6474 683d 4e6f 6e65 2c0d  max_width=None,.
+00013540: 0a20 2020 2020 2020 206d 696e 5f68 6569  .        min_hei
+00013550: 6768 743d 4e6f 6e65 2c0d 0a20 2020 2020  ght=None,..     
+00013560: 2020 206d 6178 5f68 6569 6768 743d 4e6f     max_height=No
+00013570: 6e65 2c0d 0a20 2020 2020 2020 202a 2a6b  ne,..        **k
+00013580: 7761 7267 732c 0d0a 2020 2020 293a 0d0a  wargs,..    ):..
+00013590: 2020 2020 2020 2020 2222 2253 6574 7320          """Sets 
+000135a0: 706c 6f74 7469 6e67 206f 7074 696f 6e73  plotting options
+000135b0: 2e0d 0a0d 0a20 2020 2020 2020 2041 7267  .....        Arg
+000135c0: 733a 0d0a 2020 2020 2020 2020 2020 2020  s:..            
+000135d0: 6164 645f 6d61 726b 6572 5f63 6c75 7374  add_marker_clust
+000135e0: 6572 2028 626f 6f6c 2c20 6f70 7469 6f6e  er (bool, option
+000135f0: 616c 293a 2057 6865 7468 6572 2074 6f20  al): Whether to 
+00013600: 6164 6420 6120 6d61 726b 6572 2063 6c75  add a marker clu
+00013610: 7374 6572 2e20 4465 6661 756c 7473 2074  ster. Defaults t
+00013620: 6f20 4661 6c73 652e 0d0a 2020 2020 2020  o False...      
+00013630: 2020 2020 2020 7361 6d70 6c65 5f73 6361        sample_sca
+00013640: 6c65 2028 666c 6f61 742c 206f 7074 696f  le (float, optio
+00013650: 6e61 6c29 3a20 2041 206e 6f6d 696e 616c  nal):  A nominal
+00013660: 2073 6361 6c65 2069 6e20 6d65 7465 7273   scale in meters
+00013670: 206f 6620 7468 6520 7072 6f6a 6563 7469   of the projecti
+00013680: 6f6e 2074 6f20 7361 6d70 6c65 2069 6e20  on to sample in 
+00013690: 2e20 4465 6661 756c 7473 2074 6f20 4e6f  . Defaults to No
+000136a0: 6e65 2e0d 0a20 2020 2020 2020 2020 2020  ne...           
+000136b0: 2070 6c6f 745f 7479 7065 2028 7374 722c   plot_type (str,
+000136c0: 206f 7074 696f 6e61 6c29 3a20 5468 6520   optional): The 
+000136d0: 706c 6f74 2074 7970 6520 6361 6e20 6265  plot type can be
+000136e0: 206f 6e65 206f 6620 224e 6f6e 6522 2c20   one of "None", 
+000136f0: 2262 6172 222c 2022 7363 6174 7465 7222  "bar", "scatter"
+00013700: 206f 7220 2268 6973 7422 2e20 4465 6661   or "hist". Defa
+00013710: 756c 7473 2074 6f20 4e6f 6e65 2e0d 0a20  ults to None... 
+00013720: 2020 2020 2020 2020 2020 206f 7665 726c             overl
+00013730: 6179 2028 626f 6f6c 2c20 6f70 7469 6f6e  ay (bool, option
+00013740: 616c 293a 2057 6865 7468 6572 2074 6f20  al): Whether to 
+00013750: 6f76 6572 6c61 7920 706c 6f74 7465 6420  overlay plotted 
+00013760: 6c69 6e65 7320 6f6e 2074 6865 2066 6967  lines on the fig
+00013770: 7572 652e 2044 6566 6175 6c74 7320 746f  ure. Defaults to
+00013780: 2046 616c 7365 2e0d 0a20 2020 2020 2020   False...       
+00013790: 2020 2020 2070 6f73 6974 696f 6e20 2873       position (s
+000137a0: 7472 2c20 6f70 7469 6f6e 616c 293a 2050  tr, optional): P
+000137b0: 6f73 6974 696f 6e20 6f66 2074 6865 2063  osition of the c
+000137c0: 6f6e 7472 6f6c 2c20 6361 6e20 6265 20e2  ontrol, can be .
+000137d0: 8098 626f 7474 6f6d 6c65 6674 e280 992c  ..bottomleft...,
+000137e0: 20e2 8098 626f 7474 6f6d 7269 6768 74e2   ...bottomright.
+000137f0: 8099 2c20 e280 9874 6f70 6c65 6674 e280  .., ...topleft..
+00013800: 992c 206f 7220 e280 9874 6f70 7269 6768  ., or ...toprigh
+00013810: 74e2 8099 2e20 4465 6661 756c 7473 2074  t.... Defaults t
+00013820: 6f20 2762 6f74 746f 6d72 6967 6874 272e  o 'bottomright'.
+00013830: 0d0a 2020 2020 2020 2020 2020 2020 6d69  ..            mi
+00013840: 6e5f 7769 6474 6820 2869 6e74 2c20 6f70  n_width (int, op
+00013850: 7469 6f6e 616c 293a 204d 696e 2077 6964  tional): Min wid
+00013860: 7468 206f 6620 7468 6520 7769 6467 6574  th of the widget
+00013870: 2028 696e 2070 6978 656c 7329 2c20 6966   (in pixels), if
+00013880: 204e 6f6e 6520 6974 2077 696c 6c20 7265   None it will re
+00013890: 7370 6563 7420 7468 6520 636f 6e74 656e  spect the conten
+000138a0: 7420 7369 7a65 2e20 4465 6661 756c 7473  t size. Defaults
+000138b0: 2074 6f20 4e6f 6e65 2e0d 0a20 2020 2020   to None...     
+000138c0: 2020 2020 2020 206d 6178 5f77 6964 7468         max_width
+000138d0: 2028 696e 742c 206f 7074 696f 6e61 6c29   (int, optional)
+000138e0: 3a20 4d61 7820 7769 6474 6820 6f66 2074  : Max width of t
+000138f0: 6865 2077 6964 6765 7420 2869 6e20 7069  he widget (in pi
+00013900: 7865 6c73 292c 2069 6620 4e6f 6e65 2069  xels), if None i
+00013910: 7420 7769 6c6c 2072 6573 7065 6374 2074  t will respect t
+00013920: 6865 2063 6f6e 7465 6e74 2073 697a 652e  he content size.
+00013930: 2044 6566 6175 6c74 7320 746f 204e 6f6e   Defaults to Non
+00013940: 652e 0d0a 2020 2020 2020 2020 2020 2020  e...            
+00013950: 6d69 6e5f 6865 6967 6874 2028 696e 742c  min_height (int,
+00013960: 206f 7074 696f 6e61 6c29 3a20 4d69 6e20   optional): Min 
+00013970: 6865 6967 6874 206f 6620 7468 6520 7769  height of the wi
+00013980: 6467 6574 2028 696e 2070 6978 656c 7329  dget (in pixels)
+00013990: 2c20 6966 204e 6f6e 6520 6974 2077 696c  , if None it wil
+000139a0: 6c20 7265 7370 6563 7420 7468 6520 636f  l respect the co
+000139b0: 6e74 656e 7420 7369 7a65 2e20 4465 6661  ntent size. Defa
+000139c0: 756c 7473 2074 6f20 4e6f 6e65 2e0d 0a20  ults to None... 
+000139d0: 2020 2020 2020 2020 2020 206d 6178 5f68             max_h
+000139e0: 6569 6768 7420 2869 6e74 2c20 6f70 7469  eight (int, opti
+000139f0: 6f6e 616c 293a 204d 6178 2068 6569 6768  onal): Max heigh
+00013a00: 7420 6f66 2074 6865 2077 6964 6765 7420  t of the widget 
+00013a10: 2869 6e20 7069 7865 6c73 292c 2069 6620  (in pixels), if 
+00013a20: 4e6f 6e65 2069 7420 7769 6c6c 2072 6573  None it will res
+00013a30: 7065 6374 2074 6865 2063 6f6e 7465 6e74  pect the content
+00013a40: 2073 697a 652e 2044 6566 6175 6c74 7320   size. Defaults 
+00013a50: 746f 204e 6f6e 652e 0d0a 0d0a 2020 2020  to None.....    
+00013a60: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+00013a70: 2070 6c6f 745f 6f70 7469 6f6e 735f 6469   plot_options_di
+00013a80: 6374 203d 207b 7d0d 0a20 2020 2020 2020  ct = {}..       
+00013a90: 2070 6c6f 745f 6f70 7469 6f6e 735f 6469   plot_options_di
+00013aa0: 6374 5b22 6164 645f 6d61 726b 6572 5f63  ct["add_marker_c
+00013ab0: 6c75 7374 6572 225d 203d 2061 6464 5f6d  luster"] = add_m
+00013ac0: 6172 6b65 725f 636c 7573 7465 720d 0a20  arker_cluster.. 
+00013ad0: 2020 2020 2020 2070 6c6f 745f 6f70 7469         plot_opti
+00013ae0: 6f6e 735f 6469 6374 5b22 7361 6d70 6c65  ons_dict["sample
+00013af0: 5f73 6361 6c65 225d 203d 2073 616d 706c  _scale"] = sampl
+00013b00: 655f 7363 616c 650d 0a20 2020 2020 2020  e_scale..       
+00013b10: 2070 6c6f 745f 6f70 7469 6f6e 735f 6469   plot_options_di
+00013b20: 6374 5b22 706c 6f74 5f74 7970 6522 5d20  ct["plot_type"] 
+00013b30: 3d20 706c 6f74 5f74 7970 650d 0a20 2020  = plot_type..   
+00013b40: 2020 2020 2070 6c6f 745f 6f70 7469 6f6e       plot_option
+00013b50: 735f 6469 6374 5b22 6f76 6572 6c61 7922  s_dict["overlay"
+00013b60: 5d20 3d20 6f76 6572 6c61 790d 0a20 2020  ] = overlay..   
+00013b70: 2020 2020 2070 6c6f 745f 6f70 7469 6f6e       plot_option
+00013b80: 735f 6469 6374 5b22 706f 7369 7469 6f6e  s_dict["position
+00013b90: 225d 203d 2070 6f73 6974 696f 6e0d 0a20  "] = position.. 
+00013ba0: 2020 2020 2020 2070 6c6f 745f 6f70 7469         plot_opti
+00013bb0: 6f6e 735f 6469 6374 5b22 6d69 6e5f 7769  ons_dict["min_wi
+00013bc0: 6474 6822 5d20 3d20 6d69 6e5f 7769 6474  dth"] = min_widt
+00013bd0: 680d 0a20 2020 2020 2020 2070 6c6f 745f  h..        plot_
+00013be0: 6f70 7469 6f6e 735f 6469 6374 5b22 6d61  options_dict["ma
+00013bf0: 785f 7769 6474 6822 5d20 3d20 6d61 785f  x_width"] = max_
+00013c00: 7769 6474 680d 0a20 2020 2020 2020 2070  width..        p
+00013c10: 6c6f 745f 6f70 7469 6f6e 735f 6469 6374  lot_options_dict
+00013c20: 5b22 6d69 6e5f 6865 6967 6874 225d 203d  ["min_height"] =
+00013c30: 206d 696e 5f68 6569 6768 740d 0a20 2020   min_height..   
+00013c40: 2020 2020 2070 6c6f 745f 6f70 7469 6f6e       plot_option
+00013c50: 735f 6469 6374 5b22 6d61 785f 6865 6967  s_dict["max_heig
+00013c60: 6874 225d 203d 206d 6178 5f68 6569 6768  ht"] = max_heigh
+00013c70: 740d 0a0d 0a20 2020 2020 2020 2066 6f72  t....        for
+00013c80: 206b 6579 2069 6e20 6b77 6172 6773 2e6b   key in kwargs.k
+00013c90: 6579 7328 293a 0d0a 2020 2020 2020 2020  eys():..        
+00013ca0: 2020 2020 706c 6f74 5f6f 7074 696f 6e73      plot_options
+00013cb0: 5f64 6963 745b 6b65 795d 203d 206b 7761  _dict[key] = kwa
+00013cc0: 7267 735b 6b65 795d 0d0a 0d0a 2020 2020  rgs[key]....    
+00013cd0: 2020 2020 7365 6c66 2e70 6c6f 745f 6f70      self.plot_op
+00013ce0: 7469 6f6e 7320 3d20 706c 6f74 5f6f 7074  tions = plot_opt
+00013cf0: 696f 6e73 5f64 6963 740d 0a0d 0a20 2020  ions_dict....   
+00013d00: 2020 2020 2069 6620 6164 645f 6d61 726b       if add_mark
+00013d10: 6572 5f63 6c75 7374 6572 2061 6e64 2028  er_cluster and (
+00013d20: 7365 6c66 2e70 6c6f 745f 6d61 726b 6572  self.plot_marker
+00013d30: 5f63 6c75 7374 6572 206e 6f74 2069 6e20  _cluster not in 
+00013d40: 7365 6c66 2e6c 6179 6572 7329 3a0d 0a20  self.layers):.. 
+00013d50: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00013d60: 6164 645f 6c61 7965 7228 7365 6c66 2e70  add_layer(self.p
+00013d70: 6c6f 745f 6d61 726b 6572 5f63 6c75 7374  lot_marker_clust
+00013d80: 6572 290d 0a0d 0a20 2020 2064 6566 2070  er)....    def p
+00013d90: 6c6f 7428 0d0a 2020 2020 2020 2020 7365  lot(..        se
+00013da0: 6c66 2c0d 0a20 2020 2020 2020 2078 2c0d  lf,..        x,.
+00013db0: 0a20 2020 2020 2020 2079 2c0d 0a20 2020  .        y,..   
+00013dc0: 2020 2020 2070 6c6f 745f 7479 7065 3d4e       plot_type=N
+00013dd0: 6f6e 652c 0d0a 2020 2020 2020 2020 6f76  one,..        ov
+00013de0: 6572 6c61 793d 4661 6c73 652c 0d0a 2020  erlay=False,..  
+00013df0: 2020 2020 2020 706f 7369 7469 6f6e 3d22        position="
+00013e00: 626f 7474 6f6d 7269 6768 7422 2c0d 0a20  bottomright",.. 
+00013e10: 2020 2020 2020 206d 696e 5f77 6964 7468         min_width
+00013e20: 3d4e 6f6e 652c 0d0a 2020 2020 2020 2020  =None,..        
+00013e30: 6d61 785f 7769 6474 683d 4e6f 6e65 2c0d  max_width=None,.
+00013e40: 0a20 2020 2020 2020 206d 696e 5f68 6569  .        min_hei
+00013e50: 6768 743d 4e6f 6e65 2c0d 0a20 2020 2020  ght=None,..     
+00013e60: 2020 206d 6178 5f68 6569 6768 743d 4e6f     max_height=No
+00013e70: 6e65 2c0d 0a20 2020 2020 2020 202a 2a6b  ne,..        **k
+00013e80: 7761 7267 732c 0d0a 2020 2020 293a 0d0a  wargs,..    ):..
+00013e90: 2020 2020 2020 2020 2222 2243 7265 6174          """Creat
+00013ea0: 6573 2061 2070 6c6f 7420 6261 7365 6420  es a plot based 
+00013eb0: 6f6e 2078 2d61 7272 6179 2061 6e64 2079  on x-array and y
+00013ec0: 2d61 7272 6179 2064 6174 612e 0d0a 0d0a  -array data.....
+00013ed0: 2020 2020 2020 2020 4172 6773 3a0d 0a20          Args:.. 
+00013ee0: 2020 2020 2020 2020 2020 2078 2028 6e75             x (nu
+00013ef0: 6d70 792e 6e64 6172 7261 7920 6f72 206c  mpy.ndarray or l
+00013f00: 6973 7429 3a20 5468 6520 782d 636f 6f72  ist): The x-coor
+00013f10: 6469 6e61 7465 7320 6f66 2074 6865 2070  dinates of the p
+00013f20: 6c6f 7474 6564 206c 696e 652e 0d0a 2020  lotted line...  
+00013f30: 2020 2020 2020 2020 2020 7920 286e 756d            y (num
+00013f40: 7079 2e6e 6461 7272 6179 206f 7220 6c69  py.ndarray or li
+00013f50: 7374 293a 2054 6865 2079 2d63 6f6f 7264  st): The y-coord
+00013f60: 696e 6174 6573 206f 6620 7468 6520 706c  inates of the pl
+00013f70: 6f74 7465 6420 6c69 6e65 2e0d 0a20 2020  otted line...   
+00013f80: 2020 2020 2020 2020 2070 6c6f 745f 7479           plot_ty
+00013f90: 7065 2028 7374 722c 206f 7074 696f 6e61  pe (str, optiona
+00013fa0: 6c29 3a20 5468 6520 706c 6f74 2074 7970  l): The plot typ
+00013fb0: 6520 6361 6e20 6265 206f 6e65 206f 6620  e can be one of 
+00013fc0: 224e 6f6e 6522 2c20 2262 6172 222c 2022  "None", "bar", "
+00013fd0: 7363 6174 7465 7222 206f 7220 2268 6973  scatter" or "his
+00013fe0: 7422 2e20 4465 6661 756c 7473 2074 6f20  t". Defaults to 
+00013ff0: 4e6f 6e65 2e0d 0a20 2020 2020 2020 2020  None...         
+00014000: 2020 206f 7665 726c 6179 2028 626f 6f6c     overlay (bool
+00014010: 2c20 6f70 7469 6f6e 616c 293a 2057 6865  , optional): Whe
+00014020: 7468 6572 2074 6f20 6f76 6572 6c61 7920  ther to overlay 
+00014030: 706c 6f74 7465 6420 6c69 6e65 7320 6f6e  plotted lines on
+00014040: 2074 6865 2066 6967 7572 652e 2044 6566   the figure. Def
+00014050: 6175 6c74 7320 746f 2046 616c 7365 2e0d  aults to False..
+00014060: 0a20 2020 2020 2020 2020 2020 2070 6f73  .            pos
+00014070: 6974 696f 6e20 2873 7472 2c20 6f70 7469  ition (str, opti
+00014080: 6f6e 616c 293a 2050 6f73 6974 696f 6e20  onal): Position 
+00014090: 6f66 2074 6865 2063 6f6e 7472 6f6c 2c20  of the control, 
+000140a0: 6361 6e20 6265 20e2 8098 626f 7474 6f6d  can be ...bottom
+000140b0: 6c65 6674 e280 992c 20e2 8098 626f 7474  left..., ...bott
+000140c0: 6f6d 7269 6768 74e2 8099 2c20 e280 9874  omright..., ...t
+000140d0: 6f70 6c65 6674 e280 992c 206f 7220 e280  opleft..., or ..
+000140e0: 9874 6f70 7269 6768 74e2 8099 2e20 4465  .topright.... De
+000140f0: 6661 756c 7473 2074 6f20 2762 6f74 746f  faults to 'botto
+00014100: 6d72 6967 6874 272e 0d0a 2020 2020 2020  mright'...      
+00014110: 2020 2020 2020 6d69 6e5f 7769 6474 6820        min_width 
+00014120: 2869 6e74 2c20 6f70 7469 6f6e 616c 293a  (int, optional):
+00014130: 204d 696e 2077 6964 7468 206f 6620 7468   Min width of th
+00014140: 6520 7769 6467 6574 2028 696e 2070 6978  e widget (in pix
+00014150: 656c 7329 2c20 6966 204e 6f6e 6520 6974  els), if None it
+00014160: 2077 696c 6c20 7265 7370 6563 7420 7468   will respect th
+00014170: 6520 636f 6e74 656e 7420 7369 7a65 2e20  e content size. 
+00014180: 4465 6661 756c 7473 2074 6f20 4e6f 6e65  Defaults to None
+00014190: 2e0d 0a20 2020 2020 2020 2020 2020 206d  ...            m
+000141a0: 6178 5f77 6964 7468 2028 696e 742c 206f  ax_width (int, o
+000141b0: 7074 696f 6e61 6c29 3a20 4d61 7820 7769  ptional): Max wi
+000141c0: 6474 6820 6f66 2074 6865 2077 6964 6765  dth of the widge
+000141d0: 7420 2869 6e20 7069 7865 6c73 292c 2069  t (in pixels), i
+000141e0: 6620 4e6f 6e65 2069 7420 7769 6c6c 2072  f None it will r
+000141f0: 6573 7065 6374 2074 6865 2063 6f6e 7465  espect the conte
+00014200: 6e74 2073 697a 652e 2044 6566 6175 6c74  nt size. Default
+00014210: 7320 746f 204e 6f6e 652e 0d0a 2020 2020  s to None...    
+00014220: 2020 2020 2020 2020 6d69 6e5f 6865 6967          min_heig
+00014230: 6874 2028 696e 742c 206f 7074 696f 6e61  ht (int, optiona
+00014240: 6c29 3a20 4d69 6e20 6865 6967 6874 206f  l): Min height o
+00014250: 6620 7468 6520 7769 6467 6574 2028 696e  f the widget (in
+00014260: 2070 6978 656c 7329 2c20 6966 204e 6f6e   pixels), if Non
+00014270: 6520 6974 2077 696c 6c20 7265 7370 6563  e it will respec
+00014280: 7420 7468 6520 636f 6e74 656e 7420 7369  t the content si
+00014290: 7a65 2e20 4465 6661 756c 7473 2074 6f20  ze. Defaults to 
+000142a0: 4e6f 6e65 2e0d 0a20 2020 2020 2020 2020  None...         
+000142b0: 2020 206d 6178 5f68 6569 6768 7420 2869     max_height (i
+000142c0: 6e74 2c20 6f70 7469 6f6e 616c 293a 204d  nt, optional): M
+000142d0: 6178 2068 6569 6768 7420 6f66 2074 6865  ax height of the
+000142e0: 2077 6964 6765 7420 2869 6e20 7069 7865   widget (in pixe
+000142f0: 6c73 292c 2069 6620 4e6f 6e65 2069 7420  ls), if None it 
+00014300: 7769 6c6c 2072 6573 7065 6374 2074 6865  will respect the
+00014310: 2063 6f6e 7465 6e74 2073 697a 652e 2044   content size. D
+00014320: 6566 6175 6c74 7320 746f 204e 6f6e 652e  efaults to None.
+00014330: 0d0a 0d0a 2020 2020 2020 2020 2222 220d  ....        """.
+00014340: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
+00014350: 2e70 6c6f 745f 7769 6467 6574 2069 7320  .plot_widget is 
+00014360: 6e6f 7420 4e6f 6e65 3a0d 0a20 2020 2020  not None:..     
+00014370: 2020 2020 2020 2070 6c6f 745f 7769 6467         plot_widg
+00014380: 6574 203d 2073 656c 662e 706c 6f74 5f77  et = self.plot_w
+00014390: 6964 6765 740d 0a20 2020 2020 2020 2065  idget..        e
+000143a0: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
+000143b0: 2020 706c 6f74 5f77 6964 6765 7420 3d20    plot_widget = 
+000143c0: 7769 6467 6574 732e 4f75 7470 7574 286c  widgets.Output(l
+000143d0: 6179 6f75 743d 7b22 626f 7264 6572 223a  ayout={"border":
+000143e0: 2022 3170 7820 736f 6c69 6420 626c 6163   "1px solid blac
+000143f0: 6b22 7d29 0d0a 2020 2020 2020 2020 2020  k"})..          
+00014400: 2020 706c 6f74 5f63 6f6e 7472 6f6c 203d    plot_control =
+00014410: 2069 7079 6c65 6166 6c65 742e 5769 6467   ipyleaflet.Widg
+00014420: 6574 436f 6e74 726f 6c28 0d0a 2020 2020  etControl(..    
+00014430: 2020 2020 2020 2020 2020 2020 7769 6467              widg
+00014440: 6574 3d70 6c6f 745f 7769 6467 6574 2c0d  et=plot_widget,.
+00014450: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00014460: 2070 6f73 6974 696f 6e3d 706f 7369 7469   position=positi
+00014470: 6f6e 2c0d 0a20 2020 2020 2020 2020 2020  on,..           
+00014480: 2020 2020 206d 696e 5f77 6964 7468 3d6d       min_width=m
+00014490: 696e 5f77 6964 7468 2c0d 0a20 2020 2020  in_width,..     
+000144a0: 2020 2020 2020 2020 2020 206d 6178 5f77             max_w
+000144b0: 6964 7468 3d6d 6178 5f77 6964 7468 2c0d  idth=max_width,.
+000144c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000144d0: 206d 696e 5f68 6569 6768 743d 6d69 6e5f   min_height=min_
+000144e0: 6865 6967 6874 2c0d 0a20 2020 2020 2020  height,..       
+000144f0: 2020 2020 2020 2020 206d 6178 5f68 6569           max_hei
+00014500: 6768 743d 6d61 785f 6865 6967 6874 2c0d  ght=max_height,.
+00014510: 0a20 2020 2020 2020 2020 2020 2029 0d0a  .            )..
+00014520: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00014530: 2e70 6c6f 745f 7769 6467 6574 203d 2070  .plot_widget = p
+00014540: 6c6f 745f 7769 6467 6574 0d0a 2020 2020  lot_widget..    
+00014550: 2020 2020 2020 2020 7365 6c66 2e70 6c6f          self.plo
+00014560: 745f 636f 6e74 726f 6c20 3d20 706c 6f74  t_control = plot
+00014570: 5f63 6f6e 7472 6f6c 0d0a 2020 2020 2020  _control..      
+00014580: 2020 2020 2020 7365 6c66 2e61 6464 5f63        self.add_c
+00014590: 6f6e 7472 6f6c 2870 6c6f 745f 636f 6e74  ontrol(plot_cont
+000145a0: 726f 6c29 0d0a 0d0a 2020 2020 2020 2020  rol)....        
+000145b0: 6966 206d 6178 5f77 6964 7468 2069 7320  if max_width is 
+000145c0: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
+000145d0: 2020 206d 6178 5f77 6964 7468 203d 2035     max_width = 5
+000145e0: 3030 0d0a 2020 2020 2020 2020 6966 206d  00..        if m
+000145f0: 6178 5f68 6569 6768 7420 6973 204e 6f6e  ax_height is Non
+00014600: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+00014610: 6d61 785f 6865 6967 6874 203d 2033 3030  max_height = 300
+00014620: 0d0a 0d0a 2020 2020 2020 2020 6966 2028  ....        if (
+00014630: 706c 6f74 5f74 7970 6520 6973 204e 6f6e  plot_type is Non
+00014640: 6529 2061 6e64 2028 226d 6172 6b65 7273  e) and ("markers
+00014650: 2220 6e6f 7420 696e 206b 7761 7267 732e  " not in kwargs.
+00014660: 6b65 7973 2829 293a 0d0a 2020 2020 2020  keys()):..      
+00014670: 2020 2020 2020 6b77 6172 6773 5b22 6d61        kwargs["ma
+00014680: 726b 6572 7322 5d20 3d20 2263 6972 636c  rkers"] = "circl
+00014690: 6522 0d0a 0d0a 2020 2020 2020 2020 7769  e"....        wi
+000146a0: 7468 2070 6c6f 745f 7769 6467 6574 3a0d  th plot_widget:.
+000146b0: 0a20 2020 2020 2020 2020 2020 2074 7279  .            try
+000146c0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+000146d0: 2020 2066 6967 203d 2070 6c74 2e66 6967     fig = plt.fig
+000146e0: 7572 6528 312c 202a 2a6b 7761 7267 7329  ure(1, **kwargs)
+000146f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00014700: 2020 6966 206d 6178 5f77 6964 7468 2069    if max_width i
+00014710: 7320 6e6f 7420 4e6f 6e65 3a0d 0a20 2020  s not None:..   
+00014720: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014730: 2066 6967 2e6c 6179 6f75 742e 7769 6474   fig.layout.widt
+00014740: 6820 3d20 7374 7228 6d61 785f 7769 6474  h = str(max_widt
+00014750: 6829 202b 2022 7078 220d 0a20 2020 2020  h) + "px"..     
+00014760: 2020 2020 2020 2020 2020 2069 6620 6d61             if ma
+00014770: 785f 6865 6967 6874 2069 7320 6e6f 7420  x_height is not 
+00014780: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
+00014790: 2020 2020 2020 2020 2020 2066 6967 2e6c             fig.l
+000147a0: 6179 6f75 742e 6865 6967 6874 203d 2073  ayout.height = s
+000147b0: 7472 286d 6178 5f68 6569 6768 7429 202b  tr(max_height) +
+000147c0: 2022 7078 220d 0a0d 0a20 2020 2020 2020   "px"....       
+000147d0: 2020 2020 2020 2020 2070 6c6f 745f 7769           plot_wi
+000147e0: 6467 6574 2e63 6c65 6172 5f6f 7574 7075  dget.clear_outpu
+000147f0: 7428 7761 6974 3d54 7275 6529 0d0a 2020  t(wait=True)..  
+00014800: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00014810: 206e 6f74 206f 7665 726c 6179 3a0d 0a20   not overlay:.. 
+00014820: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014830: 2020 2070 6c74 2e63 6c65 6172 2829 0d0a     plt.clear()..
+00014840: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00014850: 2020 6966 2070 6c6f 745f 7479 7065 2069    if plot_type i
+00014860: 7320 4e6f 6e65 3a0d 0a20 2020 2020 2020  s None:..       
+00014870: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00014880: 226d 6172 6b65 7222 206e 6f74 2069 6e20  "marker" not in 
+00014890: 6b77 6172 6773 2e6b 6579 7328 293a 0d0a  kwargs.keys():..
 000148a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000148b0: 2020 2020 706c 742e 6261 7228 782c 2079      plt.bar(x, y
-000148c0: 2c20 2a2a 6b77 6172 6773 290d 0a20 2020  , **kwargs)..   
-000148d0: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
-000148e0: 6620 706c 6f74 5f74 7970 6520 3d3d 2022  f plot_type == "
-000148f0: 7363 6174 7465 7222 3a0d 0a20 2020 2020  scatter":..     
-00014900: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-00014910: 6c74 2e73 6361 7474 6572 2878 2c20 792c  lt.scatter(x, y,
-00014920: 202a 2a6b 7761 7267 7329 0d0a 2020 2020   **kwargs)..    
-00014930: 2020 2020 2020 2020 2020 2020 656c 6966              elif
-00014940: 2070 6c6f 745f 7479 7065 203d 3d20 2268   plot_type == "h
-00014950: 6973 7422 3a0d 0a20 2020 2020 2020 2020  ist":..         
-00014960: 2020 2020 2020 2020 2020 2070 6c74 2e68             plt.h
-00014970: 6973 7428 792c 202a 2a6b 7761 7267 7329  ist(y, **kwargs)
-00014980: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00014990: 2020 706c 742e 7368 6f77 2829 0d0a 0d0a    plt.show()....
-000149a0: 2020 2020 2020 2020 2020 2020 6578 6365              exce
-000149b0: 7074 2045 7863 6570 7469 6f6e 2061 7320  pt Exception as 
-000149c0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-000149d0: 2020 2020 7072 696e 7428 2246 6169 6c65      print("Faile
-000149e0: 6420 746f 2063 7265 6174 6520 706c 6f74  d to create plot
-000149f0: 2e22 290d 0a20 2020 2020 2020 2020 2020  .")..           
-00014a00: 2020 2020 2072 6169 7365 2045 7863 6570       raise Excep
-00014a10: 7469 6f6e 2865 290d 0a0d 0a20 2020 2064  tion(e)....    d
-00014a20: 6566 2070 6c6f 745f 6465 6d6f 280d 0a20  ef plot_demo(.. 
-00014a30: 2020 2020 2020 2073 656c 662c 0d0a 2020         self,..  
-00014a40: 2020 2020 2020 6974 6572 6174 696f 6e73        iterations
-00014a50: 3d32 302c 0d0a 2020 2020 2020 2020 706c  =20,..        pl
-00014a60: 6f74 5f74 7970 653d 4e6f 6e65 2c0d 0a20  ot_type=None,.. 
-00014a70: 2020 2020 2020 206f 7665 726c 6179 3d46         overlay=F
-00014a80: 616c 7365 2c0d 0a20 2020 2020 2020 2070  alse,..        p
-00014a90: 6f73 6974 696f 6e3d 2262 6f74 746f 6d72  osition="bottomr
-00014aa0: 6967 6874 222c 0d0a 2020 2020 2020 2020  ight",..        
-00014ab0: 6d69 6e5f 7769 6474 683d 4e6f 6e65 2c0d  min_width=None,.
-00014ac0: 0a20 2020 2020 2020 206d 6178 5f77 6964  .        max_wid
-00014ad0: 7468 3d4e 6f6e 652c 0d0a 2020 2020 2020  th=None,..      
-00014ae0: 2020 6d69 6e5f 6865 6967 6874 3d4e 6f6e    min_height=Non
-00014af0: 652c 0d0a 2020 2020 2020 2020 6d61 785f  e,..        max_
-00014b00: 6865 6967 6874 3d4e 6f6e 652c 0d0a 2020  height=None,..  
-00014b10: 2020 2020 2020 2a2a 6b77 6172 6773 2c0d        **kwargs,.
-00014b20: 0a20 2020 2029 3a0d 0a20 2020 2020 2020  .    ):..       
-00014b30: 2022 2222 4120 6465 6d6f 206f 6620 696e   """A demo of in
-00014b40: 7465 7261 6374 6976 6520 706c 6f74 7469  teractive plotti
-00014b50: 6e67 2075 7369 6e67 2072 616e 646f 6d20  ng using random 
-00014b60: 7069 7865 6c20 636f 6f72 6469 6e61 7465  pixel coordinate
-00014b70: 732e 0d0a 0d0a 2020 2020 2020 2020 4172  s.....        Ar
-00014b80: 6773 3a0d 0a20 2020 2020 2020 2020 2020  gs:..           
-00014b90: 2069 7465 7261 7469 6f6e 7320 2869 6e74   iterations (int
-00014ba0: 2c20 6f70 7469 6f6e 616c 293a 2048 6f77  , optional): How
-00014bb0: 206d 616e 7920 6974 6572 6174 696f 6e73   many iterations
-00014bc0: 2074 6f20 7275 6e20 666f 7220 7468 6520   to run for the 
-00014bd0: 6465 6d6f 2e20 4465 6661 756c 7473 2074  demo. Defaults t
-00014be0: 6f20 3230 2e0d 0a20 2020 2020 2020 2020  o 20...         
-00014bf0: 2020 2070 6c6f 745f 7479 7065 2028 7374     plot_type (st
-00014c00: 722c 206f 7074 696f 6e61 6c29 3a20 5468  r, optional): Th
-00014c10: 6520 706c 6f74 2074 7970 6520 6361 6e20  e plot type can 
-00014c20: 6265 206f 6e65 206f 6620 224e 6f6e 6522  be one of "None"
-00014c30: 2c20 2262 6172 222c 2022 7363 6174 7465  , "bar", "scatte
-00014c40: 7222 206f 7220 2268 6973 7422 2e20 4465  r" or "hist". De
-00014c50: 6661 756c 7473 2074 6f20 4e6f 6e65 2e0d  faults to None..
-00014c60: 0a20 2020 2020 2020 2020 2020 206f 7665  .            ove
-00014c70: 726c 6179 2028 626f 6f6c 2c20 6f70 7469  rlay (bool, opti
-00014c80: 6f6e 616c 293a 2057 6865 7468 6572 2074  onal): Whether t
-00014c90: 6f20 6f76 6572 6c61 7920 706c 6f74 7465  o overlay plotte
-00014ca0: 6420 6c69 6e65 7320 6f6e 2074 6865 2066  d lines on the f
-00014cb0: 6967 7572 652e 2044 6566 6175 6c74 7320  igure. Defaults 
-00014cc0: 746f 2046 616c 7365 2e0d 0a20 2020 2020  to False...     
-00014cd0: 2020 2020 2020 2070 6f73 6974 696f 6e20         position 
-00014ce0: 2873 7472 2c20 6f70 7469 6f6e 616c 293a  (str, optional):
-00014cf0: 2050 6f73 6974 696f 6e20 6f66 2074 6865   Position of the
-00014d00: 2063 6f6e 7472 6f6c 2c20 6361 6e20 6265   control, can be
-00014d10: 20e2 8098 626f 7474 6f6d 6c65 6674 e280   ...bottomleft..
-00014d20: 992c 20e2 8098 626f 7474 6f6d 7269 6768  ., ...bottomrigh
-00014d30: 74e2 8099 2c20 e280 9874 6f70 6c65 6674  t..., ...topleft
-00014d40: e280 992c 206f 7220 e280 9874 6f70 7269  ..., or ...topri
-00014d50: 6768 74e2 8099 2e20 4465 6661 756c 7473  ght.... Defaults
-00014d60: 2074 6f20 2762 6f74 746f 6d72 6967 6874   to 'bottomright
-00014d70: 272e 0d0a 2020 2020 2020 2020 2020 2020  '...            
-00014d80: 6d69 6e5f 7769 6474 6820 2869 6e74 2c20  min_width (int, 
-00014d90: 6f70 7469 6f6e 616c 293a 204d 696e 2077  optional): Min w
-00014da0: 6964 7468 206f 6620 7468 6520 7769 6467  idth of the widg
-00014db0: 6574 2028 696e 2070 6978 656c 7329 2c20  et (in pixels), 
-00014dc0: 6966 204e 6f6e 6520 6974 2077 696c 6c20  if None it will 
-00014dd0: 7265 7370 6563 7420 7468 6520 636f 6e74  respect the cont
-00014de0: 656e 7420 7369 7a65 2e20 4465 6661 756c  ent size. Defaul
-00014df0: 7473 2074 6f20 4e6f 6e65 2e0d 0a20 2020  ts to None...   
-00014e00: 2020 2020 2020 2020 206d 6178 5f77 6964           max_wid
-00014e10: 7468 2028 696e 742c 206f 7074 696f 6e61  th (int, optiona
-00014e20: 6c29 3a20 4d61 7820 7769 6474 6820 6f66  l): Max width of
-00014e30: 2074 6865 2077 6964 6765 7420 2869 6e20   the widget (in 
-00014e40: 7069 7865 6c73 292c 2069 6620 4e6f 6e65  pixels), if None
-00014e50: 2069 7420 7769 6c6c 2072 6573 7065 6374   it will respect
-00014e60: 2074 6865 2063 6f6e 7465 6e74 2073 697a   the content siz
-00014e70: 652e 2044 6566 6175 6c74 7320 746f 204e  e. Defaults to N
-00014e80: 6f6e 652e 0d0a 2020 2020 2020 2020 2020  one...          
-00014e90: 2020 6d69 6e5f 6865 6967 6874 2028 696e    min_height (in
-00014ea0: 742c 206f 7074 696f 6e61 6c29 3a20 4d69  t, optional): Mi
-00014eb0: 6e20 6865 6967 6874 206f 6620 7468 6520  n height of the 
-00014ec0: 7769 6467 6574 2028 696e 2070 6978 656c  widget (in pixel
-00014ed0: 7329 2c20 6966 204e 6f6e 6520 6974 2077  s), if None it w
-00014ee0: 696c 6c20 7265 7370 6563 7420 7468 6520  ill respect the 
-00014ef0: 636f 6e74 656e 7420 7369 7a65 2e20 4465  content size. De
-00014f00: 6661 756c 7473 2074 6f20 4e6f 6e65 2e0d  faults to None..
-00014f10: 0a20 2020 2020 2020 2020 2020 206d 6178  .            max
-00014f20: 5f68 6569 6768 7420 2869 6e74 2c20 6f70  _height (int, op
-00014f30: 7469 6f6e 616c 293a 204d 6178 2068 6569  tional): Max hei
-00014f40: 6768 7420 6f66 2074 6865 2077 6964 6765  ght of the widge
-00014f50: 7420 2869 6e20 7069 7865 6c73 292c 2069  t (in pixels), i
-00014f60: 6620 4e6f 6e65 2069 7420 7769 6c6c 2072  f None it will r
-00014f70: 6573 7065 6374 2074 6865 2063 6f6e 7465  espect the conte
-00014f80: 6e74 2073 697a 652e 2044 6566 6175 6c74  nt size. Default
-00014f90: 7320 746f 204e 6f6e 652e 0d0a 2020 2020  s to None...    
-00014fa0: 2020 2020 2222 220d 0a0d 0a20 2020 2020      """....     
-00014fb0: 2020 2069 6d70 6f72 7420 6e75 6d70 7920     import numpy 
-00014fc0: 6173 206e 700d 0a0d 0a20 2020 2020 2020  as np....       
-00014fd0: 2069 6620 7365 6c66 2e72 616e 646f 6d5f   if self.random_
-00014fe0: 6d61 726b 6572 2069 7320 6e6f 7420 4e6f  marker is not No
-00014ff0: 6e65 3a0d 0a20 2020 2020 2020 2020 2020  ne:..           
-00015000: 2073 656c 662e 7265 6d6f 7665 5f6c 6179   self.remove_lay
-00015010: 6572 2873 656c 662e 7261 6e64 6f6d 5f6d  er(self.random_m
-00015020: 6172 6b65 7229 0d0a 0d0a 2020 2020 2020  arker)....      
-00015030: 2020 696d 6167 6520 3d20 6565 2e49 6d61    image = ee.Ima
-00015040: 6765 2822 4c45 375f 544f 415f 3559 4541  ge("LE7_TOA_5YEA
-00015050: 522f 3139 3939 5f32 3030 3322 292e 7365  R/1999_2003").se
-00015060: 6c65 6374 285b 302c 2031 2c20 322c 2033  lect([0, 1, 2, 3
-00015070: 2c20 342c 2036 5d29 0d0a 2020 2020 2020  , 4, 6])..      
-00015080: 2020 7365 6c66 2e61 6464 4c61 7965 7228    self.addLayer(
-00015090: 0d0a 2020 2020 2020 2020 2020 2020 696d  ..            im
-000150a0: 6167 652c 0d0a 2020 2020 2020 2020 2020  age,..          
-000150b0: 2020 7b22 6261 6e64 7322 3a20 5b22 4234    {"bands": ["B4
-000150c0: 222c 2022 4233 222c 2022 4232 225d 2c20  ", "B3", "B2"], 
-000150d0: 2267 616d 6d61 223a 2031 2e34 7d2c 0d0a  "gamma": 1.4},..
-000150e0: 2020 2020 2020 2020 2020 2020 224c 4537              "LE7
-000150f0: 5f54 4f41 5f35 5945 4152 2f31 3939 395f  _TOA_5YEAR/1999_
-00015100: 3230 3033 222c 0d0a 2020 2020 2020 2020  2003",..        
-00015110: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-00015120: 7365 7443 656e 7465 7228 2d35 302e 3037  setCenter(-50.07
-00015130: 3838 3737 2c20 3235 2e31 3930 3033 302c  8877, 25.190030,
-00015140: 2033 290d 0a20 2020 2020 2020 2062 616e   3)..        ban
-00015150: 645f 6e61 6d65 7320 3d20 696d 6167 652e  d_names = image.
-00015160: 6261 6e64 4e61 6d65 7328 292e 6765 7449  bandNames().getI
-00015170: 6e66 6f28 290d 0a20 2020 2020 2020 2023  nfo()..        #
-00015180: 2062 616e 645f 636f 756e 7420 3d20 6c65   band_count = le
-00015190: 6e28 6261 6e64 5f6e 616d 6573 290d 0a0d  n(band_names)...
-000151a0: 0a20 2020 2020 2020 206c 6174 6974 7564  .        latitud
-000151b0: 6573 203d 206e 702e 7261 6e64 6f6d 2e75  es = np.random.u
-000151c0: 6e69 666f 726d 2833 302c 2034 382c 2073  niform(30, 48, s
-000151d0: 697a 653d 6974 6572 6174 696f 6e73 290d  ize=iterations).
-000151e0: 0a20 2020 2020 2020 206c 6f6e 6769 7475  .        longitu
-000151f0: 6465 7320 3d20 6e70 2e72 616e 646f 6d2e  des = np.random.
-00015200: 756e 6966 6f72 6d28 2d31 3231 2c20 2d37  uniform(-121, -7
-00015210: 362c 2073 697a 653d 6974 6572 6174 696f  6, size=iteratio
-00015220: 6e73 290d 0a0d 0a20 2020 2020 2020 206d  ns)....        m
-00015230: 6172 6b65 7220 3d20 6970 796c 6561 666c  arker = ipyleafl
-00015240: 6574 2e4d 6172 6b65 7228 6c6f 6361 7469  et.Marker(locati
-00015250: 6f6e 3d28 302c 2030 2929 0d0a 2020 2020  on=(0, 0))..    
-00015260: 2020 2020 7365 6c66 2e72 616e 646f 6d5f      self.random_
-00015270: 6d61 726b 6572 203d 206d 6172 6b65 720d  marker = marker.
-00015280: 0a20 2020 2020 2020 2073 656c 662e 6164  .        self.ad
-00015290: 645f 6c61 7965 7228 6d61 726b 6572 290d  d_layer(marker).
-000152a0: 0a0d 0a20 2020 2020 2020 2066 6f72 2069  ...        for i
-000152b0: 2069 6e20 7261 6e67 6528 6974 6572 6174   in range(iterat
-000152c0: 696f 6e73 293a 0d0a 2020 2020 2020 2020  ions):..        
-000152d0: 2020 2020 7472 793a 0d0a 2020 2020 2020      try:..      
-000152e0: 2020 2020 2020 2020 2020 636f 6f72 6469            coordi
-000152f0: 6e61 7465 203d 2065 652e 4765 6f6d 6574  nate = ee.Geomet
-00015300: 7279 2e50 6f69 6e74 285b 6c6f 6e67 6974  ry.Point([longit
-00015310: 7564 6573 5b69 5d2c 206c 6174 6974 7564  udes[i], latitud
-00015320: 6573 5b69 5d5d 290d 0a20 2020 2020 2020  es[i]])..       
-00015330: 2020 2020 2020 2020 2064 6963 745f 7661           dict_va
-00015340: 6c75 6573 203d 2069 6d61 6765 2e73 616d  lues = image.sam
-00015350: 706c 6528 636f 6f72 6469 6e61 7465 292e  ple(coordinate).
-00015360: 6669 7273 7428 292e 746f 4469 6374 696f  first().toDictio
-00015370: 6e61 7279 2829 2e67 6574 496e 666f 2829  nary().getInfo()
-00015380: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00015390: 2020 6261 6e64 5f76 616c 7565 7320 3d20    band_values = 
-000153a0: 6c69 7374 2864 6963 745f 7661 6c75 6573  list(dict_values
-000153b0: 2e76 616c 7565 7328 2929 0d0a 2020 2020  .values())..    
-000153c0: 2020 2020 2020 2020 2020 2020 7469 746c              titl
-000153d0: 6520 3d20 227b 7d2f 7b7d 3a20 5370 6563  e = "{}/{}: Spec
-000153e0: 7472 616c 2073 6967 6e61 7475 7265 2061  tral signature a
-000153f0: 7420 287b 7d2c 207b 7d29 222e 666f 726d  t ({}, {})".form
-00015400: 6174 280d 0a20 2020 2020 2020 2020 2020  at(..           
-00015410: 2020 2020 2020 2020 2069 202b 2031 2c0d           i + 1,.
-00015420: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00015430: 2020 2020 2069 7465 7261 7469 6f6e 732c       iterations,
-00015440: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00015450: 2020 2020 2020 726f 756e 6428 6c61 7469        round(lati
-00015460: 7475 6465 735b 695d 2c20 3229 2c0d 0a20  tudes[i], 2),.. 
-00015470: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015480: 2020 2072 6f75 6e64 286c 6f6e 6769 7475     round(longitu
-00015490: 6465 735b 695d 2c20 3229 2c0d 0a20 2020  des[i], 2),..   
-000154a0: 2020 2020 2020 2020 2020 2020 2029 0d0a               )..
+000148b0: 2020 2020 2020 2020 6b77 6172 6773 5b22          kwargs["
+000148c0: 6d61 726b 6572 225d 203d 2022 6369 7263  marker"] = "circ
+000148d0: 6c65 220d 0a20 2020 2020 2020 2020 2020  le"..           
+000148e0: 2020 2020 2020 2020 2070 6c74 2e70 6c6f           plt.plo
+000148f0: 7428 782c 2079 2c20 2a2a 6b77 6172 6773  t(x, y, **kwargs
+00014900: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00014910: 2020 2065 6c69 6620 706c 6f74 5f74 7970     elif plot_typ
+00014920: 6520 3d3d 2022 6261 7222 3a0d 0a20 2020  e == "bar":..   
+00014930: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014940: 2070 6c74 2e62 6172 2878 2c20 792c 202a   plt.bar(x, y, *
+00014950: 2a6b 7761 7267 7329 0d0a 2020 2020 2020  *kwargs)..      
+00014960: 2020 2020 2020 2020 2020 656c 6966 2070            elif p
+00014970: 6c6f 745f 7479 7065 203d 3d20 2273 6361  lot_type == "sca
+00014980: 7474 6572 223a 0d0a 2020 2020 2020 2020  tter":..        
+00014990: 2020 2020 2020 2020 2020 2020 706c 742e              plt.
+000149a0: 7363 6174 7465 7228 782c 2079 2c20 2a2a  scatter(x, y, **
+000149b0: 6b77 6172 6773 290d 0a20 2020 2020 2020  kwargs)..       
+000149c0: 2020 2020 2020 2020 2065 6c69 6620 706c           elif pl
+000149d0: 6f74 5f74 7970 6520 3d3d 2022 6869 7374  ot_type == "hist
+000149e0: 223a 0d0a 2020 2020 2020 2020 2020 2020  ":..            
+000149f0: 2020 2020 2020 2020 706c 742e 6869 7374          plt.hist
+00014a00: 2879 2c20 2a2a 6b77 6172 6773 290d 0a20  (y, **kwargs).. 
+00014a10: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+00014a20: 6c74 2e73 686f 7728 290d 0a0d 0a20 2020  lt.show()....   
+00014a30: 2020 2020 2020 2020 2065 7863 6570 7420           except 
+00014a40: 4578 6365 7074 696f 6e20 6173 2065 3a0d  Exception as e:.
+00014a50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00014a60: 2070 7269 6e74 2822 4661 696c 6564 2074   print("Failed t
+00014a70: 6f20 6372 6561 7465 2070 6c6f 742e 2229  o create plot.")
+00014a80: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00014a90: 2020 7261 6973 6520 4578 6365 7074 696f    raise Exceptio
+00014aa0: 6e28 6529 0d0a 0d0a 2020 2020 6465 6620  n(e)....    def 
+00014ab0: 706c 6f74 5f64 656d 6f28 0d0a 2020 2020  plot_demo(..    
+00014ac0: 2020 2020 7365 6c66 2c0d 0a20 2020 2020      self,..     
+00014ad0: 2020 2069 7465 7261 7469 6f6e 733d 3230     iterations=20
+00014ae0: 2c0d 0a20 2020 2020 2020 2070 6c6f 745f  ,..        plot_
+00014af0: 7479 7065 3d4e 6f6e 652c 0d0a 2020 2020  type=None,..    
+00014b00: 2020 2020 6f76 6572 6c61 793d 4661 6c73      overlay=Fals
+00014b10: 652c 0d0a 2020 2020 2020 2020 706f 7369  e,..        posi
+00014b20: 7469 6f6e 3d22 626f 7474 6f6d 7269 6768  tion="bottomrigh
+00014b30: 7422 2c0d 0a20 2020 2020 2020 206d 696e  t",..        min
+00014b40: 5f77 6964 7468 3d4e 6f6e 652c 0d0a 2020  _width=None,..  
+00014b50: 2020 2020 2020 6d61 785f 7769 6474 683d        max_width=
+00014b60: 4e6f 6e65 2c0d 0a20 2020 2020 2020 206d  None,..        m
+00014b70: 696e 5f68 6569 6768 743d 4e6f 6e65 2c0d  in_height=None,.
+00014b80: 0a20 2020 2020 2020 206d 6178 5f68 6569  .        max_hei
+00014b90: 6768 743d 4e6f 6e65 2c0d 0a20 2020 2020  ght=None,..     
+00014ba0: 2020 202a 2a6b 7761 7267 732c 0d0a 2020     **kwargs,..  
+00014bb0: 2020 293a 0d0a 2020 2020 2020 2020 2222    ):..        ""
+00014bc0: 2241 2064 656d 6f20 6f66 2069 6e74 6572  "A demo of inter
+00014bd0: 6163 7469 7665 2070 6c6f 7474 696e 6720  active plotting 
+00014be0: 7573 696e 6720 7261 6e64 6f6d 2070 6978  using random pix
+00014bf0: 656c 2063 6f6f 7264 696e 6174 6573 2e0d  el coordinates..
+00014c00: 0a0d 0a20 2020 2020 2020 2041 7267 733a  ...        Args:
+00014c10: 0d0a 2020 2020 2020 2020 2020 2020 6974  ..            it
+00014c20: 6572 6174 696f 6e73 2028 696e 742c 206f  erations (int, o
+00014c30: 7074 696f 6e61 6c29 3a20 486f 7720 6d61  ptional): How ma
+00014c40: 6e79 2069 7465 7261 7469 6f6e 7320 746f  ny iterations to
+00014c50: 2072 756e 2066 6f72 2074 6865 2064 656d   run for the dem
+00014c60: 6f2e 2044 6566 6175 6c74 7320 746f 2032  o. Defaults to 2
+00014c70: 302e 0d0a 2020 2020 2020 2020 2020 2020  0...            
+00014c80: 706c 6f74 5f74 7970 6520 2873 7472 2c20  plot_type (str, 
+00014c90: 6f70 7469 6f6e 616c 293a 2054 6865 2070  optional): The p
+00014ca0: 6c6f 7420 7479 7065 2063 616e 2062 6520  lot type can be 
+00014cb0: 6f6e 6520 6f66 2022 4e6f 6e65 222c 2022  one of "None", "
+00014cc0: 6261 7222 2c20 2273 6361 7474 6572 2220  bar", "scatter" 
+00014cd0: 6f72 2022 6869 7374 222e 2044 6566 6175  or "hist". Defau
+00014ce0: 6c74 7320 746f 204e 6f6e 652e 0d0a 2020  lts to None...  
+00014cf0: 2020 2020 2020 2020 2020 6f76 6572 6c61            overla
+00014d00: 7920 2862 6f6f 6c2c 206f 7074 696f 6e61  y (bool, optiona
+00014d10: 6c29 3a20 5768 6574 6865 7220 746f 206f  l): Whether to o
+00014d20: 7665 726c 6179 2070 6c6f 7474 6564 206c  verlay plotted l
+00014d30: 696e 6573 206f 6e20 7468 6520 6669 6775  ines on the figu
+00014d40: 7265 2e20 4465 6661 756c 7473 2074 6f20  re. Defaults to 
+00014d50: 4661 6c73 652e 0d0a 2020 2020 2020 2020  False...        
+00014d60: 2020 2020 706f 7369 7469 6f6e 2028 7374      position (st
+00014d70: 722c 206f 7074 696f 6e61 6c29 3a20 506f  r, optional): Po
+00014d80: 7369 7469 6f6e 206f 6620 7468 6520 636f  sition of the co
+00014d90: 6e74 726f 6c2c 2063 616e 2062 6520 e280  ntrol, can be ..
+00014da0: 9862 6f74 746f 6d6c 6566 74e2 8099 2c20  .bottomleft..., 
+00014db0: e280 9862 6f74 746f 6d72 6967 6874 e280  ...bottomright..
+00014dc0: 992c 20e2 8098 746f 706c 6566 74e2 8099  ., ...topleft...
+00014dd0: 2c20 6f72 20e2 8098 746f 7072 6967 6874  , or ...topright
+00014de0: e280 992e 2044 6566 6175 6c74 7320 746f  .... Defaults to
+00014df0: 2027 626f 7474 6f6d 7269 6768 7427 2e0d   'bottomright'..
+00014e00: 0a20 2020 2020 2020 2020 2020 206d 696e  .            min
+00014e10: 5f77 6964 7468 2028 696e 742c 206f 7074  _width (int, opt
+00014e20: 696f 6e61 6c29 3a20 4d69 6e20 7769 6474  ional): Min widt
+00014e30: 6820 6f66 2074 6865 2077 6964 6765 7420  h of the widget 
+00014e40: 2869 6e20 7069 7865 6c73 292c 2069 6620  (in pixels), if 
+00014e50: 4e6f 6e65 2069 7420 7769 6c6c 2072 6573  None it will res
+00014e60: 7065 6374 2074 6865 2063 6f6e 7465 6e74  pect the content
+00014e70: 2073 697a 652e 2044 6566 6175 6c74 7320   size. Defaults 
+00014e80: 746f 204e 6f6e 652e 0d0a 2020 2020 2020  to None...      
+00014e90: 2020 2020 2020 6d61 785f 7769 6474 6820        max_width 
+00014ea0: 2869 6e74 2c20 6f70 7469 6f6e 616c 293a  (int, optional):
+00014eb0: 204d 6178 2077 6964 7468 206f 6620 7468   Max width of th
+00014ec0: 6520 7769 6467 6574 2028 696e 2070 6978  e widget (in pix
+00014ed0: 656c 7329 2c20 6966 204e 6f6e 6520 6974  els), if None it
+00014ee0: 2077 696c 6c20 7265 7370 6563 7420 7468   will respect th
+00014ef0: 6520 636f 6e74 656e 7420 7369 7a65 2e20  e content size. 
+00014f00: 4465 6661 756c 7473 2074 6f20 4e6f 6e65  Defaults to None
+00014f10: 2e0d 0a20 2020 2020 2020 2020 2020 206d  ...            m
+00014f20: 696e 5f68 6569 6768 7420 2869 6e74 2c20  in_height (int, 
+00014f30: 6f70 7469 6f6e 616c 293a 204d 696e 2068  optional): Min h
+00014f40: 6569 6768 7420 6f66 2074 6865 2077 6964  eight of the wid
+00014f50: 6765 7420 2869 6e20 7069 7865 6c73 292c  get (in pixels),
+00014f60: 2069 6620 4e6f 6e65 2069 7420 7769 6c6c   if None it will
+00014f70: 2072 6573 7065 6374 2074 6865 2063 6f6e   respect the con
+00014f80: 7465 6e74 2073 697a 652e 2044 6566 6175  tent size. Defau
+00014f90: 6c74 7320 746f 204e 6f6e 652e 0d0a 2020  lts to None...  
+00014fa0: 2020 2020 2020 2020 2020 6d61 785f 6865            max_he
+00014fb0: 6967 6874 2028 696e 742c 206f 7074 696f  ight (int, optio
+00014fc0: 6e61 6c29 3a20 4d61 7820 6865 6967 6874  nal): Max height
+00014fd0: 206f 6620 7468 6520 7769 6467 6574 2028   of the widget (
+00014fe0: 696e 2070 6978 656c 7329 2c20 6966 204e  in pixels), if N
+00014ff0: 6f6e 6520 6974 2077 696c 6c20 7265 7370  one it will resp
+00015000: 6563 7420 7468 6520 636f 6e74 656e 7420  ect the content 
+00015010: 7369 7a65 2e20 4465 6661 756c 7473 2074  size. Defaults t
+00015020: 6f20 4e6f 6e65 2e0d 0a20 2020 2020 2020  o None...       
+00015030: 2022 2222 0d0a 0d0a 2020 2020 2020 2020   """....        
+00015040: 696d 706f 7274 206e 756d 7079 2061 7320  import numpy as 
+00015050: 6e70 0d0a 0d0a 2020 2020 2020 2020 6966  np....        if
+00015060: 2073 656c 662e 7261 6e64 6f6d 5f6d 6172   self.random_mar
+00015070: 6b65 7220 6973 206e 6f74 204e 6f6e 653a  ker is not None:
+00015080: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
+00015090: 6c66 2e72 656d 6f76 655f 6c61 7965 7228  lf.remove_layer(
+000150a0: 7365 6c66 2e72 616e 646f 6d5f 6d61 726b  self.random_mark
+000150b0: 6572 290d 0a0d 0a20 2020 2020 2020 2069  er)....        i
+000150c0: 6d61 6765 203d 2065 652e 496d 6167 6528  mage = ee.Image(
+000150d0: 224c 4537 5f54 4f41 5f35 5945 4152 2f31  "LE7_TOA_5YEAR/1
+000150e0: 3939 395f 3230 3033 2229 2e73 656c 6563  999_2003").selec
+000150f0: 7428 5b30 2c20 312c 2032 2c20 332c 2034  t([0, 1, 2, 3, 4
+00015100: 2c20 365d 290d 0a20 2020 2020 2020 2073  , 6])..        s
+00015110: 656c 662e 6164 644c 6179 6572 280d 0a20  elf.addLayer(.. 
+00015120: 2020 2020 2020 2020 2020 2069 6d61 6765             image
+00015130: 2c0d 0a20 2020 2020 2020 2020 2020 207b  ,..            {
+00015140: 2262 616e 6473 223a 205b 2242 3422 2c20  "bands": ["B4", 
+00015150: 2242 3322 2c20 2242 3222 5d2c 2022 6761  "B3", "B2"], "ga
+00015160: 6d6d 6122 3a20 312e 347d 2c0d 0a20 2020  mma": 1.4},..   
+00015170: 2020 2020 2020 2020 2022 4c45 375f 544f           "LE7_TO
+00015180: 415f 3559 4541 522f 3139 3939 5f32 3030  A_5YEAR/1999_200
+00015190: 3322 2c0d 0a20 2020 2020 2020 2029 0d0a  3",..        )..
+000151a0: 2020 2020 2020 2020 7365 6c66 2e73 6574          self.set
+000151b0: 4365 6e74 6572 282d 3530 2e30 3738 3837  Center(-50.07887
+000151c0: 372c 2032 352e 3139 3030 3330 2c20 3329  7, 25.190030, 3)
+000151d0: 0d0a 2020 2020 2020 2020 6261 6e64 5f6e  ..        band_n
+000151e0: 616d 6573 203d 2069 6d61 6765 2e62 616e  ames = image.ban
+000151f0: 644e 616d 6573 2829 2e67 6574 496e 666f  dNames().getInfo
+00015200: 2829 0d0a 2020 2020 2020 2020 2320 6261  ()..        # ba
+00015210: 6e64 5f63 6f75 6e74 203d 206c 656e 2862  nd_count = len(b
+00015220: 616e 645f 6e61 6d65 7329 0d0a 0d0a 2020  and_names)....  
+00015230: 2020 2020 2020 6c61 7469 7475 6465 7320        latitudes 
+00015240: 3d20 6e70 2e72 616e 646f 6d2e 756e 6966  = np.random.unif
+00015250: 6f72 6d28 3330 2c20 3438 2c20 7369 7a65  orm(30, 48, size
+00015260: 3d69 7465 7261 7469 6f6e 7329 0d0a 2020  =iterations)..  
+00015270: 2020 2020 2020 6c6f 6e67 6974 7564 6573        longitudes
+00015280: 203d 206e 702e 7261 6e64 6f6d 2e75 6e69   = np.random.uni
+00015290: 666f 726d 282d 3132 312c 202d 3736 2c20  form(-121, -76, 
+000152a0: 7369 7a65 3d69 7465 7261 7469 6f6e 7329  size=iterations)
+000152b0: 0d0a 0d0a 2020 2020 2020 2020 6d61 726b  ....        mark
+000152c0: 6572 203d 2069 7079 6c65 6166 6c65 742e  er = ipyleaflet.
+000152d0: 4d61 726b 6572 286c 6f63 6174 696f 6e3d  Marker(location=
+000152e0: 2830 2c20 3029 290d 0a20 2020 2020 2020  (0, 0))..       
+000152f0: 2073 656c 662e 7261 6e64 6f6d 5f6d 6172   self.random_mar
+00015300: 6b65 7220 3d20 6d61 726b 6572 0d0a 2020  ker = marker..  
+00015310: 2020 2020 2020 7365 6c66 2e61 6464 5f6c        self.add_l
+00015320: 6179 6572 286d 6172 6b65 7229 0d0a 0d0a  ayer(marker)....
+00015330: 2020 2020 2020 2020 666f 7220 6920 696e          for i in
+00015340: 2072 616e 6765 2869 7465 7261 7469 6f6e   range(iteration
+00015350: 7329 3a0d 0a20 2020 2020 2020 2020 2020  s):..           
+00015360: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
+00015370: 2020 2020 2020 2063 6f6f 7264 696e 6174         coordinat
+00015380: 6520 3d20 6565 2e47 656f 6d65 7472 792e  e = ee.Geometry.
+00015390: 506f 696e 7428 5b6c 6f6e 6769 7475 6465  Point([longitude
+000153a0: 735b 695d 2c20 6c61 7469 7475 6465 735b  s[i], latitudes[
+000153b0: 695d 5d29 0d0a 2020 2020 2020 2020 2020  i]])..          
+000153c0: 2020 2020 2020 6469 6374 5f76 616c 7565        dict_value
+000153d0: 7320 3d20 696d 6167 652e 7361 6d70 6c65  s = image.sample
+000153e0: 2863 6f6f 7264 696e 6174 6529 2e66 6972  (coordinate).fir
+000153f0: 7374 2829 2e74 6f44 6963 7469 6f6e 6172  st().toDictionar
+00015400: 7928 292e 6765 7449 6e66 6f28 290d 0a20  y().getInfo().. 
+00015410: 2020 2020 2020 2020 2020 2020 2020 2062                 b
+00015420: 616e 645f 7661 6c75 6573 203d 206c 6973  and_values = lis
+00015430: 7428 6469 6374 5f76 616c 7565 732e 7661  t(dict_values.va
+00015440: 6c75 6573 2829 290d 0a20 2020 2020 2020  lues())..       
+00015450: 2020 2020 2020 2020 2074 6974 6c65 203d           title =
+00015460: 2022 7b7d 2f7b 7d3a 2053 7065 6374 7261   "{}/{}: Spectra
+00015470: 6c20 7369 676e 6174 7572 6520 6174 2028  l signature at (
+00015480: 7b7d 2c20 7b7d 2922 2e66 6f72 6d61 7428  {}, {})".format(
+00015490: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000154a0: 2020 2020 2020 6920 2b20 312c 0d0a 2020        i + 1,..  
 000154b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000154c0: 6d61 726b 6572 2e6c 6f63 6174 696f 6e20  marker.location 
-000154d0: 3d20 286c 6174 6974 7564 6573 5b69 5d2c  = (latitudes[i],
-000154e0: 206c 6f6e 6769 7475 6465 735b 695d 290d   longitudes[i]).
-000154f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00015500: 2073 656c 662e 706c 6f74 280d 0a20 2020   self.plot(..   
-00015510: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015520: 2062 616e 645f 6e61 6d65 732c 0d0a 2020   band_names,..  
-00015530: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015540: 2020 6261 6e64 5f76 616c 7565 732c 0d0a    band_values,..
-00015550: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015560: 2020 2020 706c 6f74 5f74 7970 653d 706c      plot_type=pl
-00015570: 6f74 5f74 7970 652c 0d0a 2020 2020 2020  ot_type,..      
-00015580: 2020 2020 2020 2020 2020 2020 2020 6f76                ov
-00015590: 6572 6c61 793d 6f76 6572 6c61 792c 0d0a  erlay=overlay,..
-000155a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000155b0: 2020 2020 6d69 6e5f 7769 6474 683d 6d69      min_width=mi
-000155c0: 6e5f 7769 6474 682c 0d0a 2020 2020 2020  n_width,..      
-000155d0: 2020 2020 2020 2020 2020 2020 2020 6d61                ma
-000155e0: 785f 7769 6474 683d 6d61 785f 7769 6474  x_width=max_widt
-000155f0: 682c 0d0a 2020 2020 2020 2020 2020 2020  h,..            
-00015600: 2020 2020 2020 2020 6d69 6e5f 6865 6967          min_heig
-00015610: 6874 3d6d 696e 5f68 6569 6768 742c 0d0a  ht=min_height,..
-00015620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015630: 2020 2020 6d61 785f 6865 6967 6874 3d6d      max_height=m
-00015640: 6178 5f68 6569 6768 742c 0d0a 2020 2020  ax_height,..    
-00015650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015660: 7469 746c 653d 7469 746c 652c 0d0a 2020  title=title,..  
-00015670: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015680: 2020 2a2a 6b77 6172 6773 2c0d 0a20 2020    **kwargs,..   
-00015690: 2020 2020 2020 2020 2020 2020 2029 0d0a               )..
-000156a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000156b0: 7469 6d65 2e73 6c65 6570 2830 2e33 290d  time.sleep(0.3).
-000156c0: 0a20 2020 2020 2020 2020 2020 2065 7863  .            exc
-000156d0: 6570 7420 4578 6365 7074 696f 6e20 6173  ept Exception as
-000156e0: 2065 3a0d 0a20 2020 2020 2020 2020 2020   e:..           
-000156f0: 2020 2020 2072 6169 7365 2045 7863 6570       raise Excep
-00015700: 7469 6f6e 2865 290d 0a0d 0a20 2020 2064  tion(e)....    d
-00015710: 6566 2070 6c6f 745f 7261 7374 6572 280d  ef plot_raster(.
-00015720: 0a20 2020 2020 2020 2073 656c 662c 0d0a  .        self,..
-00015730: 2020 2020 2020 2020 6565 5f6f 626a 6563          ee_objec
-00015740: 743d 4e6f 6e65 2c0d 0a20 2020 2020 2020  t=None,..       
-00015750: 2073 616d 706c 655f 7363 616c 653d 4e6f   sample_scale=No
-00015760: 6e65 2c0d 0a20 2020 2020 2020 2070 6c6f  ne,..        plo
-00015770: 745f 7479 7065 3d4e 6f6e 652c 0d0a 2020  t_type=None,..  
-00015780: 2020 2020 2020 6f76 6572 6c61 793d 4661        overlay=Fa
-00015790: 6c73 652c 0d0a 2020 2020 2020 2020 706f  lse,..        po
-000157a0: 7369 7469 6f6e 3d22 626f 7474 6f6d 7269  sition="bottomri
-000157b0: 6768 7422 2c0d 0a20 2020 2020 2020 206d  ght",..        m
-000157c0: 696e 5f77 6964 7468 3d4e 6f6e 652c 0d0a  in_width=None,..
-000157d0: 2020 2020 2020 2020 6d61 785f 7769 6474          max_widt
-000157e0: 683d 4e6f 6e65 2c0d 0a20 2020 2020 2020  h=None,..       
-000157f0: 206d 696e 5f68 6569 6768 743d 4e6f 6e65   min_height=None
-00015800: 2c0d 0a20 2020 2020 2020 206d 6178 5f68  ,..        max_h
-00015810: 6569 6768 743d 4e6f 6e65 2c0d 0a20 2020  eight=None,..   
-00015820: 2020 2020 202a 2a6b 7761 7267 732c 0d0a       **kwargs,..
-00015830: 2020 2020 293a 0d0a 2020 2020 2020 2020      ):..        
-00015840: 2222 2249 6e74 6572 6163 7469 7665 2070  """Interactive p
-00015850: 6c6f 7474 696e 6720 6f66 2045 6172 7468  lotting of Earth
-00015860: 2045 6e67 696e 6520 6461 7461 2062 7920   Engine data by 
-00015870: 636c 6963 6b69 6e67 206f 6e20 7468 6520  clicking on the 
-00015880: 6d61 702e 0d0a 0d0a 2020 2020 2020 2020  map.....        
-00015890: 4172 6773 3a0d 0a20 2020 2020 2020 2020  Args:..         
-000158a0: 2020 2065 655f 6f62 6a65 6374 2028 6f62     ee_object (ob
-000158b0: 6a65 6374 2c20 6f70 7469 6f6e 616c 293a  ject, optional):
-000158c0: 2054 6865 2065 652e 496d 6167 6520 6f72   The ee.Image or
-000158d0: 2065 652e 496d 6167 6543 6f6c 6c65 6374   ee.ImageCollect
-000158e0: 696f 6e20 746f 2073 616d 706c 652e 2044  ion to sample. D
-000158f0: 6566 6175 6c74 7320 746f 204e 6f6e 652e  efaults to None.
-00015900: 0d0a 2020 2020 2020 2020 2020 2020 7361  ..            sa
-00015910: 6d70 6c65 5f73 6361 6c65 2028 666c 6f61  mple_scale (floa
-00015920: 742c 206f 7074 696f 6e61 6c29 3a20 4120  t, optional): A 
-00015930: 6e6f 6d69 6e61 6c20 7363 616c 6520 696e  nominal scale in
-00015940: 206d 6574 6572 7320 6f66 2074 6865 2070   meters of the p
-00015950: 726f 6a65 6374 696f 6e20 746f 2073 616d  rojection to sam
-00015960: 706c 6520 696e 2e20 4465 6661 756c 7473  ple in. Defaults
-00015970: 2074 6f20 4e6f 6e65 2e0d 0a20 2020 2020   to None...     
-00015980: 2020 2020 2020 2070 6c6f 745f 7479 7065         plot_type
-00015990: 2028 7374 722c 206f 7074 696f 6e61 6c29   (str, optional)
-000159a0: 3a20 5468 6520 706c 6f74 2074 7970 6520  : The plot type 
-000159b0: 6361 6e20 6265 206f 6e65 206f 6620 224e  can be one of "N
-000159c0: 6f6e 6522 2c20 2262 6172 222c 2022 7363  one", "bar", "sc
-000159d0: 6174 7465 7222 206f 7220 2268 6973 7422  atter" or "hist"
-000159e0: 2e20 4465 6661 756c 7473 2074 6f20 4e6f  . Defaults to No
-000159f0: 6e65 2e0d 0a20 2020 2020 2020 2020 2020  ne...           
-00015a00: 206f 7665 726c 6179 2028 626f 6f6c 2c20   overlay (bool, 
-00015a10: 6f70 7469 6f6e 616c 293a 2057 6865 7468  optional): Wheth
-00015a20: 6572 2074 6f20 6f76 6572 6c61 7920 706c  er to overlay pl
-00015a30: 6f74 7465 6420 6c69 6e65 7320 6f6e 2074  otted lines on t
-00015a40: 6865 2066 6967 7572 652e 2044 6566 6175  he figure. Defau
-00015a50: 6c74 7320 746f 2046 616c 7365 2e0d 0a20  lts to False... 
-00015a60: 2020 2020 2020 2020 2020 2070 6f73 6974             posit
-00015a70: 696f 6e20 2873 7472 2c20 6f70 7469 6f6e  ion (str, option
-00015a80: 616c 293a 2050 6f73 6974 696f 6e20 6f66  al): Position of
-00015a90: 2074 6865 2063 6f6e 7472 6f6c 2c20 6361   the control, ca
-00015aa0: 6e20 6265 20e2 8098 626f 7474 6f6d 6c65  n be ...bottomle
-00015ab0: 6674 e280 992c 20e2 8098 626f 7474 6f6d  ft..., ...bottom
-00015ac0: 7269 6768 74e2 8099 2c20 e280 9874 6f70  right..., ...top
-00015ad0: 6c65 6674 e280 992c 206f 7220 e280 9874  left..., or ...t
-00015ae0: 6f70 7269 6768 74e2 8099 2e20 4465 6661  opright.... Defa
-00015af0: 756c 7473 2074 6f20 2762 6f74 746f 6d72  ults to 'bottomr
-00015b00: 6967 6874 272e 0d0a 2020 2020 2020 2020  ight'...        
-00015b10: 2020 2020 6d69 6e5f 7769 6474 6820 2869      min_width (i
-00015b20: 6e74 2c20 6f70 7469 6f6e 616c 293a 204d  nt, optional): M
-00015b30: 696e 2077 6964 7468 206f 6620 7468 6520  in width of the 
-00015b40: 7769 6467 6574 2028 696e 2070 6978 656c  widget (in pixel
-00015b50: 7329 2c20 6966 204e 6f6e 6520 6974 2077  s), if None it w
-00015b60: 696c 6c20 7265 7370 6563 7420 7468 6520  ill respect the 
-00015b70: 636f 6e74 656e 7420 7369 7a65 2e20 4465  content size. De
-00015b80: 6661 756c 7473 2074 6f20 4e6f 6e65 2e0d  faults to None..
-00015b90: 0a20 2020 2020 2020 2020 2020 206d 6178  .            max
-00015ba0: 5f77 6964 7468 2028 696e 742c 206f 7074  _width (int, opt
-00015bb0: 696f 6e61 6c29 3a20 4d61 7820 7769 6474  ional): Max widt
-00015bc0: 6820 6f66 2074 6865 2077 6964 6765 7420  h of the widget 
-00015bd0: 2869 6e20 7069 7865 6c73 292c 2069 6620  (in pixels), if 
-00015be0: 4e6f 6e65 2069 7420 7769 6c6c 2072 6573  None it will res
-00015bf0: 7065 6374 2074 6865 2063 6f6e 7465 6e74  pect the content
-00015c00: 2073 697a 652e 2044 6566 6175 6c74 7320   size. Defaults 
-00015c10: 746f 204e 6f6e 652e 0d0a 2020 2020 2020  to None...      
-00015c20: 2020 2020 2020 6d69 6e5f 6865 6967 6874        min_height
-00015c30: 2028 696e 742c 206f 7074 696f 6e61 6c29   (int, optional)
-00015c40: 3a20 4d69 6e20 6865 6967 6874 206f 6620  : Min height of 
-00015c50: 7468 6520 7769 6467 6574 2028 696e 2070  the widget (in p
-00015c60: 6978 656c 7329 2c20 6966 204e 6f6e 6520  ixels), if None 
-00015c70: 6974 2077 696c 6c20 7265 7370 6563 7420  it will respect 
-00015c80: 7468 6520 636f 6e74 656e 7420 7369 7a65  the content size
-00015c90: 2e20 4465 6661 756c 7473 2074 6f20 4e6f  . Defaults to No
-00015ca0: 6e65 2e0d 0a20 2020 2020 2020 2020 2020  ne...           
-00015cb0: 206d 6178 5f68 6569 6768 7420 2869 6e74   max_height (int
-00015cc0: 2c20 6f70 7469 6f6e 616c 293a 204d 6178  , optional): Max
-00015cd0: 2068 6569 6768 7420 6f66 2074 6865 2077   height of the w
-00015ce0: 6964 6765 7420 2869 6e20 7069 7865 6c73  idget (in pixels
-00015cf0: 292c 2069 6620 4e6f 6e65 2069 7420 7769  ), if None it wi
-00015d00: 6c6c 2072 6573 7065 6374 2074 6865 2063  ll respect the c
-00015d10: 6f6e 7465 6e74 2073 697a 652e 2044 6566  ontent size. Def
-00015d20: 6175 6c74 7320 746f 204e 6f6e 652e 0d0a  aults to None...
-00015d30: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-00015d40: 2020 2020 2020 2069 6620 7365 6c66 2e70         if self.p
-00015d50: 6c6f 745f 636f 6e74 726f 6c20 6973 206e  lot_control is n
-00015d60: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
-00015d70: 2020 2020 2020 6465 6c20 7365 6c66 2e70        del self.p
-00015d80: 6c6f 745f 7769 6467 6574 0d0a 2020 2020  lot_widget..    
-00015d90: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
-00015da0: 706c 6f74 5f63 6f6e 7472 6f6c 2069 6e20  plot_control in 
-00015db0: 7365 6c66 2e63 6f6e 7472 6f6c 733a 0d0a  self.controls:..
-00015dc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015dd0: 7365 6c66 2e72 656d 6f76 655f 636f 6e74  self.remove_cont
-00015de0: 726f 6c28 7365 6c66 2e70 6c6f 745f 636f  rol(self.plot_co
-00015df0: 6e74 726f 6c29 0d0a 0d0a 2020 2020 2020  ntrol)....      
-00015e00: 2020 6966 2073 656c 662e 7261 6e64 6f6d    if self.random
-00015e10: 5f6d 6172 6b65 7220 6973 206e 6f74 204e  _marker is not N
-00015e20: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
-00015e30: 2020 7365 6c66 2e72 656d 6f76 655f 6c61    self.remove_la
-00015e40: 7965 7228 7365 6c66 2e72 616e 646f 6d5f  yer(self.random_
-00015e50: 6d61 726b 6572 290d 0a0d 0a20 2020 2020  marker)....     
-00015e60: 2020 2070 6c6f 745f 7769 6467 6574 203d     plot_widget =
-00015e70: 2077 6964 6765 7473 2e4f 7574 7075 7428   widgets.Output(
-00015e80: 6c61 796f 7574 3d7b 2262 6f72 6465 7222  layout={"border"
-00015e90: 3a20 2231 7078 2073 6f6c 6964 2062 6c61  : "1px solid bla
-00015ea0: 636b 227d 290d 0a20 2020 2020 2020 2070  ck"})..        p
-00015eb0: 6c6f 745f 636f 6e74 726f 6c20 3d20 6970  lot_control = ip
-00015ec0: 796c 6561 666c 6574 2e57 6964 6765 7443  yleaflet.WidgetC
-00015ed0: 6f6e 7472 6f6c 280d 0a20 2020 2020 2020  ontrol(..       
-00015ee0: 2020 2020 2077 6964 6765 743d 706c 6f74       widget=plot
-00015ef0: 5f77 6964 6765 742c 0d0a 2020 2020 2020  _widget,..      
-00015f00: 2020 2020 2020 706f 7369 7469 6f6e 3d70        position=p
-00015f10: 6f73 6974 696f 6e2c 0d0a 2020 2020 2020  osition,..      
-00015f20: 2020 2020 2020 6d69 6e5f 7769 6474 683d        min_width=
-00015f30: 6d69 6e5f 7769 6474 682c 0d0a 2020 2020  min_width,..    
-00015f40: 2020 2020 2020 2020 6d61 785f 7769 6474          max_widt
-00015f50: 683d 6d61 785f 7769 6474 682c 0d0a 2020  h=max_width,..  
-00015f60: 2020 2020 2020 2020 2020 6d69 6e5f 6865            min_he
-00015f70: 6967 6874 3d6d 696e 5f68 6569 6768 742c  ight=min_height,
-00015f80: 0d0a 2020 2020 2020 2020 2020 2020 6d61  ..            ma
-00015f90: 785f 6865 6967 6874 3d6d 6178 5f68 6569  x_height=max_hei
-00015fa0: 6768 742c 0d0a 2020 2020 2020 2020 290d  ght,..        ).
-00015fb0: 0a20 2020 2020 2020 2073 656c 662e 706c  .        self.pl
-00015fc0: 6f74 5f77 6964 6765 7420 3d20 706c 6f74  ot_widget = plot
-00015fd0: 5f77 6964 6765 740d 0a20 2020 2020 2020  _widget..       
-00015fe0: 2073 656c 662e 706c 6f74 5f63 6f6e 7472   self.plot_contr
-00015ff0: 6f6c 203d 2070 6c6f 745f 636f 6e74 726f  ol = plot_contro
-00016000: 6c0d 0a20 2020 2020 2020 2073 656c 662e  l..        self.
-00016010: 6164 645f 636f 6e74 726f 6c28 706c 6f74  add_control(plot
-00016020: 5f63 6f6e 7472 6f6c 290d 0a0d 0a20 2020  _control)....   
-00016030: 2020 2020 2073 656c 662e 6465 6661 756c       self.defaul
-00016040: 745f 7374 796c 6520 3d20 7b22 6375 7273  t_style = {"curs
-00016050: 6f72 223a 2022 6372 6f73 7368 6169 7222  or": "crosshair"
-00016060: 7d0d 0a20 2020 2020 2020 206d 7367 203d  }..        msg =
-00016070: 2022 5468 6520 706c 6f74 2066 756e 6374   "The plot funct
-00016080: 696f 6e20 6361 6e20 6f6e 6c79 2062 6520  ion can only be 
-00016090: 7573 6564 206f 6e20 6565 2e49 6d61 6765  used on ee.Image
-000160a0: 206f 7220 6565 2e49 6d61 6765 436f 6c6c   or ee.ImageColl
-000160b0: 6563 7469 6f6e 2077 6974 6820 6d6f 7265  ection with more
-000160c0: 2074 6861 6e20 6f6e 6520 6261 6e64 2e22   than one band."
-000160d0: 0d0a 2020 2020 2020 2020 6966 2028 6565  ..        if (ee
-000160e0: 5f6f 626a 6563 7420 6973 204e 6f6e 6529  _object is None)
-000160f0: 2061 6e64 206c 656e 2873 656c 662e 6565   and len(self.ee
-00016100: 5f72 6173 7465 725f 6c61 7965 7273 2920  _raster_layers) 
-00016110: 3e20 303a 0d0a 2020 2020 2020 2020 2020  > 0:..          
-00016120: 2020 6565 5f6f 626a 6563 7420 3d20 7365    ee_object = se
-00016130: 6c66 2e65 655f 7261 7374 6572 5f6c 6179  lf.ee_raster_lay
-00016140: 6572 735b 2d31 5d0d 0a20 2020 2020 2020  ers[-1]..       
-00016150: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
-00016160: 6365 2865 655f 6f62 6a65 6374 2c20 6565  ce(ee_object, ee
-00016170: 2e49 6d61 6765 436f 6c6c 6563 7469 6f6e  .ImageCollection
-00016180: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-00016190: 2020 2020 6565 5f6f 626a 6563 7420 3d20      ee_object = 
-000161a0: 6565 5f6f 626a 6563 742e 6d6f 7361 6963  ee_object.mosaic
-000161b0: 2829 0d0a 2020 2020 2020 2020 656c 6966  ()..        elif
-000161c0: 2069 7369 6e73 7461 6e63 6528 6565 5f6f   isinstance(ee_o
-000161d0: 626a 6563 742c 2065 652e 496d 6167 6543  bject, ee.ImageC
-000161e0: 6f6c 6c65 6374 696f 6e29 3a0d 0a20 2020  ollection):..   
-000161f0: 2020 2020 2020 2020 2065 655f 6f62 6a65           ee_obje
-00016200: 6374 203d 2065 655f 6f62 6a65 6374 2e6d  ct = ee_object.m
-00016210: 6f73 6169 6328 290d 0a20 2020 2020 2020  osaic()..       
-00016220: 2065 6c69 6620 6e6f 7420 6973 696e 7374   elif not isinst
-00016230: 616e 6365 2865 655f 6f62 6a65 6374 2c20  ance(ee_object, 
-00016240: 6565 2e49 6d61 6765 293a 0d0a 2020 2020  ee.Image):..    
-00016250: 2020 2020 2020 2020 7072 696e 7428 6d73          print(ms
-00016260: 6729 0d0a 2020 2020 2020 2020 2020 2020  g)..            
-00016270: 7265 7475 726e 0d0a 0d0a 2020 2020 2020  return....      
-00016280: 2020 6966 2073 616d 706c 655f 7363 616c    if sample_scal
-00016290: 6520 6973 204e 6f6e 653a 0d0a 2020 2020  e is None:..    
-000162a0: 2020 2020 2020 2020 7361 6d70 6c65 5f73          sample_s
-000162b0: 6361 6c65 203d 2073 656c 662e 6765 7453  cale = self.getS
-000162c0: 6361 6c65 2829 0d0a 0d0a 2020 2020 2020  cale()....      
-000162d0: 2020 6966 206d 6178 5f77 6964 7468 2069    if max_width i
-000162e0: 7320 4e6f 6e65 3a0d 0a20 2020 2020 2020  s None:..       
-000162f0: 2020 2020 206d 6178 5f77 6964 7468 203d       max_width =
-00016300: 2035 3030 0d0a 0d0a 2020 2020 2020 2020   500....        
-00016310: 6261 6e64 5f6e 616d 6573 203d 2065 655f  band_names = ee_
-00016320: 6f62 6a65 6374 2e62 616e 644e 616d 6573  object.bandNames
-00016330: 2829 2e67 6574 496e 666f 2829 0d0a 0d0a  ().getInfo()....
-00016340: 2020 2020 2020 2020 636f 6f72 6469 6e61          coordina
-00016350: 7465 7320 3d20 5b5d 0d0a 2020 2020 2020  tes = []..      
-00016360: 2020 6d61 726b 6572 7320 3d20 5b5d 0d0a    markers = []..
-00016370: 2020 2020 2020 2020 6d61 726b 6572 5f63          marker_c
-00016380: 6c75 7374 6572 203d 2069 7079 6c65 6166  luster = ipyleaf
-00016390: 6c65 742e 4d61 726b 6572 436c 7573 7465  let.MarkerCluste
-000163a0: 7228 6e61 6d65 3d22 4d61 726b 6572 2043  r(name="Marker C
-000163b0: 6c75 7374 6572 2229 0d0a 2020 2020 2020  luster")..      
-000163c0: 2020 7365 6c66 2e6c 6173 745f 636c 6963    self.last_clic
-000163d0: 6b20 3d20 5b5d 0d0a 2020 2020 2020 2020  k = []..        
-000163e0: 7365 6c66 2e61 6c6c 5f63 6c69 636b 7320  self.all_clicks 
-000163f0: 3d20 5b5d 0d0a 2020 2020 2020 2020 7365  = []..        se
-00016400: 6c66 2e61 6464 5f6c 6179 6572 286d 6172  lf.add_layer(mar
-00016410: 6b65 725f 636c 7573 7465 7229 0d0a 0d0a  ker_cluster)....
-00016420: 2020 2020 2020 2020 6465 6620 6861 6e64          def hand
-00016430: 6c65 5f69 6e74 6572 6163 7469 6f6e 282a  le_interaction(*
-00016440: 2a6b 7761 7267 7332 293a 0d0a 2020 2020  *kwargs2):..    
-00016450: 2020 2020 2020 2020 6c61 746c 6f6e 203d          latlon =
-00016460: 206b 7761 7267 7332 2e67 6574 2822 636f   kwargs2.get("co
-00016470: 6f72 6469 6e61 7465 7322 290d 0a0d 0a20  ordinates").... 
-00016480: 2020 2020 2020 2020 2020 2069 6620 6b77             if kw
-00016490: 6172 6773 322e 6765 7428 2274 7970 6522  args2.get("type"
-000164a0: 2920 3d3d 2022 636c 6963 6b22 3a0d 0a20  ) == "click":.. 
-000164b0: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-000164c0: 7279 3a0d 0a20 2020 2020 2020 2020 2020  ry:..           
-000164d0: 2020 2020 2020 2020 2063 6f6f 7264 696e           coordin
-000164e0: 6174 6573 2e61 7070 656e 6428 6c61 746c  ates.append(latl
-000164f0: 6f6e 290d 0a20 2020 2020 2020 2020 2020  on)..           
-00016500: 2020 2020 2020 2020 2073 656c 662e 6c61           self.la
-00016510: 7374 5f63 6c69 636b 203d 206c 6174 6c6f  st_click = latlo
-00016520: 6e0d 0a20 2020 2020 2020 2020 2020 2020  n..             
-00016530: 2020 2020 2020 2073 656c 662e 616c 6c5f         self.all_
-00016540: 636c 6963 6b73 203d 2063 6f6f 7264 696e  clicks = coordin
-00016550: 6174 6573 0d0a 2020 2020 2020 2020 2020  ates..          
-00016560: 2020 2020 2020 2020 2020 6d61 726b 6572            marker
-00016570: 732e 6170 7065 6e64 2869 7079 6c65 6166  s.append(ipyleaf
-00016580: 6c65 742e 4d61 726b 6572 286c 6f63 6174  let.Marker(locat
-00016590: 696f 6e3d 6c61 746c 6f6e 2929 0d0a 2020  ion=latlon))..  
-000165a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000165b0: 2020 6d61 726b 6572 5f63 6c75 7374 6572    marker_cluster
-000165c0: 2e6d 6172 6b65 7273 203d 206d 6172 6b65  .markers = marke
-000165d0: 7273 0d0a 2020 2020 2020 2020 2020 2020  rs..            
-000165e0: 2020 2020 2020 2020 7365 6c66 2e64 6566          self.def
-000165f0: 6175 6c74 5f73 7479 6c65 203d 207b 2263  ault_style = {"c
-00016600: 7572 736f 7222 3a20 2277 6169 7422 7d0d  ursor": "wait"}.
-00016610: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00016620: 2020 2020 2078 7920 3d20 6565 2e47 656f       xy = ee.Geo
-00016630: 6d65 7472 792e 506f 696e 7428 6c61 746c  metry.Point(latl
-00016640: 6f6e 5b3a 3a2d 315d 290d 0a20 2020 2020  on[::-1])..     
-00016650: 2020 2020 2020 2020 2020 2020 2020 2064                 d
-00016660: 6963 745f 7661 6c75 6573 203d 2028 0d0a  ict_values = (..
-00016670: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016680: 2020 2020 2020 2020 6565 5f6f 626a 6563          ee_objec
-00016690: 742e 7361 6d70 6c65 2878 792c 2073 6361  t.sample(xy, sca
-000166a0: 6c65 3d73 616d 706c 655f 7363 616c 6529  le=sample_scale)
-000166b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000166c0: 2020 2020 2020 2020 2020 2e66 6972 7374            .first
-000166d0: 2829 0d0a 2020 2020 2020 2020 2020 2020  ()..            
-000166e0: 2020 2020 2020 2020 2020 2020 2e74 6f44              .toD
-000166f0: 6963 7469 6f6e 6172 7928 290d 0a20 2020  ictionary()..   
+000154c0: 2020 6974 6572 6174 696f 6e73 2c0d 0a20    iterations,.. 
+000154d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000154e0: 2020 2072 6f75 6e64 286c 6174 6974 7564     round(latitud
+000154f0: 6573 5b69 5d2c 2032 292c 0d0a 2020 2020  es[i], 2),..    
+00015500: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015510: 726f 756e 6428 6c6f 6e67 6974 7564 6573  round(longitudes
+00015520: 5b69 5d2c 2032 292c 0d0a 2020 2020 2020  [i], 2),..      
+00015530: 2020 2020 2020 2020 2020 290d 0a20 2020            )..   
+00015540: 2020 2020 2020 2020 2020 2020 206d 6172               mar
+00015550: 6b65 722e 6c6f 6361 7469 6f6e 203d 2028  ker.location = (
+00015560: 6c61 7469 7475 6465 735b 695d 2c20 6c6f  latitudes[i], lo
+00015570: 6e67 6974 7564 6573 5b69 5d29 0d0a 2020  ngitudes[i])..  
+00015580: 2020 2020 2020 2020 2020 2020 2020 7365                se
+00015590: 6c66 2e70 6c6f 7428 0d0a 2020 2020 2020  lf.plot(..      
+000155a0: 2020 2020 2020 2020 2020 2020 2020 6261                ba
+000155b0: 6e64 5f6e 616d 6573 2c0d 0a20 2020 2020  nd_names,..     
+000155c0: 2020 2020 2020 2020 2020 2020 2020 2062                 b
+000155d0: 616e 645f 7661 6c75 6573 2c0d 0a20 2020  and_values,..   
+000155e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000155f0: 2070 6c6f 745f 7479 7065 3d70 6c6f 745f   plot_type=plot_
+00015600: 7479 7065 2c0d 0a20 2020 2020 2020 2020  type,..         
+00015610: 2020 2020 2020 2020 2020 206f 7665 726c             overl
+00015620: 6179 3d6f 7665 726c 6179 2c0d 0a20 2020  ay=overlay,..   
+00015630: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015640: 206d 696e 5f77 6964 7468 3d6d 696e 5f77   min_width=min_w
+00015650: 6964 7468 2c0d 0a20 2020 2020 2020 2020  idth,..         
+00015660: 2020 2020 2020 2020 2020 206d 6178 5f77             max_w
+00015670: 6964 7468 3d6d 6178 5f77 6964 7468 2c0d  idth=max_width,.
+00015680: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00015690: 2020 2020 206d 696e 5f68 6569 6768 743d       min_height=
+000156a0: 6d69 6e5f 6865 6967 6874 2c0d 0a20 2020  min_height,..   
+000156b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000156c0: 206d 6178 5f68 6569 6768 743d 6d61 785f   max_height=max_
+000156d0: 6865 6967 6874 2c0d 0a20 2020 2020 2020  height,..       
+000156e0: 2020 2020 2020 2020 2020 2020 2074 6974               tit
+000156f0: 6c65 3d74 6974 6c65 2c0d 0a20 2020 2020  le=title,..     
+00015700: 2020 2020 2020 2020 2020 2020 2020 202a                 *
+00015710: 2a6b 7761 7267 732c 0d0a 2020 2020 2020  *kwargs,..      
+00015720: 2020 2020 2020 2020 2020 290d 0a20 2020            )..   
+00015730: 2020 2020 2020 2020 2020 2020 2074 696d               tim
+00015740: 652e 736c 6565 7028 302e 3329 0d0a 2020  e.sleep(0.3)..  
+00015750: 2020 2020 2020 2020 2020 6578 6365 7074            except
+00015760: 2045 7863 6570 7469 6f6e 2061 7320 653a   Exception as e:
+00015770: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00015780: 2020 7261 6973 6520 4578 6365 7074 696f    raise Exceptio
+00015790: 6e28 6529 0d0a 0d0a 2020 2020 6465 6620  n(e)....    def 
+000157a0: 706c 6f74 5f72 6173 7465 7228 0d0a 2020  plot_raster(..  
+000157b0: 2020 2020 2020 7365 6c66 2c0d 0a20 2020        self,..   
+000157c0: 2020 2020 2065 655f 6f62 6a65 6374 3d4e       ee_object=N
+000157d0: 6f6e 652c 0d0a 2020 2020 2020 2020 7361  one,..        sa
+000157e0: 6d70 6c65 5f73 6361 6c65 3d4e 6f6e 652c  mple_scale=None,
+000157f0: 0d0a 2020 2020 2020 2020 706c 6f74 5f74  ..        plot_t
+00015800: 7970 653d 4e6f 6e65 2c0d 0a20 2020 2020  ype=None,..     
+00015810: 2020 206f 7665 726c 6179 3d46 616c 7365     overlay=False
+00015820: 2c0d 0a20 2020 2020 2020 2070 6f73 6974  ,..        posit
+00015830: 696f 6e3d 2262 6f74 746f 6d72 6967 6874  ion="bottomright
+00015840: 222c 0d0a 2020 2020 2020 2020 6d69 6e5f  ",..        min_
+00015850: 7769 6474 683d 4e6f 6e65 2c0d 0a20 2020  width=None,..   
+00015860: 2020 2020 206d 6178 5f77 6964 7468 3d4e       max_width=N
+00015870: 6f6e 652c 0d0a 2020 2020 2020 2020 6d69  one,..        mi
+00015880: 6e5f 6865 6967 6874 3d4e 6f6e 652c 0d0a  n_height=None,..
+00015890: 2020 2020 2020 2020 6d61 785f 6865 6967          max_heig
+000158a0: 6874 3d4e 6f6e 652c 0d0a 2020 2020 2020  ht=None,..      
+000158b0: 2020 2a2a 6b77 6172 6773 2c0d 0a20 2020    **kwargs,..   
+000158c0: 2029 3a0d 0a20 2020 2020 2020 2022 2222   ):..        """
+000158d0: 496e 7465 7261 6374 6976 6520 706c 6f74  Interactive plot
+000158e0: 7469 6e67 206f 6620 4561 7274 6820 456e  ting of Earth En
+000158f0: 6769 6e65 2064 6174 6120 6279 2063 6c69  gine data by cli
+00015900: 636b 696e 6720 6f6e 2074 6865 206d 6170  cking on the map
+00015910: 2e0d 0a0d 0a20 2020 2020 2020 2041 7267  .....        Arg
+00015920: 733a 0d0a 2020 2020 2020 2020 2020 2020  s:..            
+00015930: 6565 5f6f 626a 6563 7420 286f 626a 6563  ee_object (objec
+00015940: 742c 206f 7074 696f 6e61 6c29 3a20 5468  t, optional): Th
+00015950: 6520 6565 2e49 6d61 6765 206f 7220 6565  e ee.Image or ee
+00015960: 2e49 6d61 6765 436f 6c6c 6563 7469 6f6e  .ImageCollection
+00015970: 2074 6f20 7361 6d70 6c65 2e20 4465 6661   to sample. Defa
+00015980: 756c 7473 2074 6f20 4e6f 6e65 2e0d 0a20  ults to None... 
+00015990: 2020 2020 2020 2020 2020 2073 616d 706c             sampl
+000159a0: 655f 7363 616c 6520 2866 6c6f 6174 2c20  e_scale (float, 
+000159b0: 6f70 7469 6f6e 616c 293a 2041 206e 6f6d  optional): A nom
+000159c0: 696e 616c 2073 6361 6c65 2069 6e20 6d65  inal scale in me
+000159d0: 7465 7273 206f 6620 7468 6520 7072 6f6a  ters of the proj
+000159e0: 6563 7469 6f6e 2074 6f20 7361 6d70 6c65  ection to sample
+000159f0: 2069 6e2e 2044 6566 6175 6c74 7320 746f   in. Defaults to
+00015a00: 204e 6f6e 652e 0d0a 2020 2020 2020 2020   None...        
+00015a10: 2020 2020 706c 6f74 5f74 7970 6520 2873      plot_type (s
+00015a20: 7472 2c20 6f70 7469 6f6e 616c 293a 2054  tr, optional): T
+00015a30: 6865 2070 6c6f 7420 7479 7065 2063 616e  he plot type can
+00015a40: 2062 6520 6f6e 6520 6f66 2022 4e6f 6e65   be one of "None
+00015a50: 222c 2022 6261 7222 2c20 2273 6361 7474  ", "bar", "scatt
+00015a60: 6572 2220 6f72 2022 6869 7374 222e 2044  er" or "hist". D
+00015a70: 6566 6175 6c74 7320 746f 204e 6f6e 652e  efaults to None.
+00015a80: 0d0a 2020 2020 2020 2020 2020 2020 6f76  ..            ov
+00015a90: 6572 6c61 7920 2862 6f6f 6c2c 206f 7074  erlay (bool, opt
+00015aa0: 696f 6e61 6c29 3a20 5768 6574 6865 7220  ional): Whether 
+00015ab0: 746f 206f 7665 726c 6179 2070 6c6f 7474  to overlay plott
+00015ac0: 6564 206c 696e 6573 206f 6e20 7468 6520  ed lines on the 
+00015ad0: 6669 6775 7265 2e20 4465 6661 756c 7473  figure. Defaults
+00015ae0: 2074 6f20 4661 6c73 652e 0d0a 2020 2020   to False...    
+00015af0: 2020 2020 2020 2020 706f 7369 7469 6f6e          position
+00015b00: 2028 7374 722c 206f 7074 696f 6e61 6c29   (str, optional)
+00015b10: 3a20 506f 7369 7469 6f6e 206f 6620 7468  : Position of th
+00015b20: 6520 636f 6e74 726f 6c2c 2063 616e 2062  e control, can b
+00015b30: 6520 e280 9862 6f74 746f 6d6c 6566 74e2  e ...bottomleft.
+00015b40: 8099 2c20 e280 9862 6f74 746f 6d72 6967  .., ...bottomrig
+00015b50: 6874 e280 992c 20e2 8098 746f 706c 6566  ht..., ...toplef
+00015b60: 74e2 8099 2c20 6f72 20e2 8098 746f 7072  t..., or ...topr
+00015b70: 6967 6874 e280 992e 2044 6566 6175 6c74  ight.... Default
+00015b80: 7320 746f 2027 626f 7474 6f6d 7269 6768  s to 'bottomrigh
+00015b90: 7427 2e0d 0a20 2020 2020 2020 2020 2020  t'...           
+00015ba0: 206d 696e 5f77 6964 7468 2028 696e 742c   min_width (int,
+00015bb0: 206f 7074 696f 6e61 6c29 3a20 4d69 6e20   optional): Min 
+00015bc0: 7769 6474 6820 6f66 2074 6865 2077 6964  width of the wid
+00015bd0: 6765 7420 2869 6e20 7069 7865 6c73 292c  get (in pixels),
+00015be0: 2069 6620 4e6f 6e65 2069 7420 7769 6c6c   if None it will
+00015bf0: 2072 6573 7065 6374 2074 6865 2063 6f6e   respect the con
+00015c00: 7465 6e74 2073 697a 652e 2044 6566 6175  tent size. Defau
+00015c10: 6c74 7320 746f 204e 6f6e 652e 0d0a 2020  lts to None...  
+00015c20: 2020 2020 2020 2020 2020 6d61 785f 7769            max_wi
+00015c30: 6474 6820 2869 6e74 2c20 6f70 7469 6f6e  dth (int, option
+00015c40: 616c 293a 204d 6178 2077 6964 7468 206f  al): Max width o
+00015c50: 6620 7468 6520 7769 6467 6574 2028 696e  f the widget (in
+00015c60: 2070 6978 656c 7329 2c20 6966 204e 6f6e   pixels), if Non
+00015c70: 6520 6974 2077 696c 6c20 7265 7370 6563  e it will respec
+00015c80: 7420 7468 6520 636f 6e74 656e 7420 7369  t the content si
+00015c90: 7a65 2e20 4465 6661 756c 7473 2074 6f20  ze. Defaults to 
+00015ca0: 4e6f 6e65 2e0d 0a20 2020 2020 2020 2020  None...         
+00015cb0: 2020 206d 696e 5f68 6569 6768 7420 2869     min_height (i
+00015cc0: 6e74 2c20 6f70 7469 6f6e 616c 293a 204d  nt, optional): M
+00015cd0: 696e 2068 6569 6768 7420 6f66 2074 6865  in height of the
+00015ce0: 2077 6964 6765 7420 2869 6e20 7069 7865   widget (in pixe
+00015cf0: 6c73 292c 2069 6620 4e6f 6e65 2069 7420  ls), if None it 
+00015d00: 7769 6c6c 2072 6573 7065 6374 2074 6865  will respect the
+00015d10: 2063 6f6e 7465 6e74 2073 697a 652e 2044   content size. D
+00015d20: 6566 6175 6c74 7320 746f 204e 6f6e 652e  efaults to None.
+00015d30: 0d0a 2020 2020 2020 2020 2020 2020 6d61  ..            ma
+00015d40: 785f 6865 6967 6874 2028 696e 742c 206f  x_height (int, o
+00015d50: 7074 696f 6e61 6c29 3a20 4d61 7820 6865  ptional): Max he
+00015d60: 6967 6874 206f 6620 7468 6520 7769 6467  ight of the widg
+00015d70: 6574 2028 696e 2070 6978 656c 7329 2c20  et (in pixels), 
+00015d80: 6966 204e 6f6e 6520 6974 2077 696c 6c20  if None it will 
+00015d90: 7265 7370 6563 7420 7468 6520 636f 6e74  respect the cont
+00015da0: 656e 7420 7369 7a65 2e20 4465 6661 756c  ent size. Defaul
+00015db0: 7473 2074 6f20 4e6f 6e65 2e0d 0a0d 0a20  ts to None..... 
+00015dc0: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
+00015dd0: 2020 2020 6966 2073 656c 662e 706c 6f74      if self.plot
+00015de0: 5f63 6f6e 7472 6f6c 2069 7320 6e6f 7420  _control is not 
+00015df0: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
+00015e00: 2020 2064 656c 2073 656c 662e 706c 6f74     del self.plot
+00015e10: 5f77 6964 6765 740d 0a20 2020 2020 2020  _widget..       
+00015e20: 2020 2020 2069 6620 7365 6c66 2e70 6c6f       if self.plo
+00015e30: 745f 636f 6e74 726f 6c20 696e 2073 656c  t_control in sel
+00015e40: 662e 636f 6e74 726f 6c73 3a0d 0a20 2020  f.controls:..   
+00015e50: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+00015e60: 662e 7265 6d6f 7665 5f63 6f6e 7472 6f6c  f.remove_control
+00015e70: 2873 656c 662e 706c 6f74 5f63 6f6e 7472  (self.plot_contr
+00015e80: 6f6c 290d 0a0d 0a20 2020 2020 2020 2069  ol)....        i
+00015e90: 6620 7365 6c66 2e72 616e 646f 6d5f 6d61  f self.random_ma
+00015ea0: 726b 6572 2069 7320 6e6f 7420 4e6f 6e65  rker is not None
+00015eb0: 3a0d 0a20 2020 2020 2020 2020 2020 2073  :..            s
+00015ec0: 656c 662e 7265 6d6f 7665 5f6c 6179 6572  elf.remove_layer
+00015ed0: 2873 656c 662e 7261 6e64 6f6d 5f6d 6172  (self.random_mar
+00015ee0: 6b65 7229 0d0a 0d0a 2020 2020 2020 2020  ker)....        
+00015ef0: 706c 6f74 5f77 6964 6765 7420 3d20 7769  plot_widget = wi
+00015f00: 6467 6574 732e 4f75 7470 7574 286c 6179  dgets.Output(lay
+00015f10: 6f75 743d 7b22 626f 7264 6572 223a 2022  out={"border": "
+00015f20: 3170 7820 736f 6c69 6420 626c 6163 6b22  1px solid black"
+00015f30: 7d29 0d0a 2020 2020 2020 2020 706c 6f74  })..        plot
+00015f40: 5f63 6f6e 7472 6f6c 203d 2069 7079 6c65  _control = ipyle
+00015f50: 6166 6c65 742e 5769 6467 6574 436f 6e74  aflet.WidgetCont
+00015f60: 726f 6c28 0d0a 2020 2020 2020 2020 2020  rol(..          
+00015f70: 2020 7769 6467 6574 3d70 6c6f 745f 7769    widget=plot_wi
+00015f80: 6467 6574 2c0d 0a20 2020 2020 2020 2020  dget,..         
+00015f90: 2020 2070 6f73 6974 696f 6e3d 706f 7369     position=posi
+00015fa0: 7469 6f6e 2c0d 0a20 2020 2020 2020 2020  tion,..         
+00015fb0: 2020 206d 696e 5f77 6964 7468 3d6d 696e     min_width=min
+00015fc0: 5f77 6964 7468 2c0d 0a20 2020 2020 2020  _width,..       
+00015fd0: 2020 2020 206d 6178 5f77 6964 7468 3d6d       max_width=m
+00015fe0: 6178 5f77 6964 7468 2c0d 0a20 2020 2020  ax_width,..     
+00015ff0: 2020 2020 2020 206d 696e 5f68 6569 6768         min_heigh
+00016000: 743d 6d69 6e5f 6865 6967 6874 2c0d 0a20  t=min_height,.. 
+00016010: 2020 2020 2020 2020 2020 206d 6178 5f68             max_h
+00016020: 6569 6768 743d 6d61 785f 6865 6967 6874  eight=max_height
+00016030: 2c0d 0a20 2020 2020 2020 2029 0d0a 2020  ,..        )..  
+00016040: 2020 2020 2020 7365 6c66 2e70 6c6f 745f        self.plot_
+00016050: 7769 6467 6574 203d 2070 6c6f 745f 7769  widget = plot_wi
+00016060: 6467 6574 0d0a 2020 2020 2020 2020 7365  dget..        se
+00016070: 6c66 2e70 6c6f 745f 636f 6e74 726f 6c20  lf.plot_control 
+00016080: 3d20 706c 6f74 5f63 6f6e 7472 6f6c 0d0a  = plot_control..
+00016090: 2020 2020 2020 2020 7365 6c66 2e61 6464          self.add
+000160a0: 5f63 6f6e 7472 6f6c 2870 6c6f 745f 636f  _control(plot_co
+000160b0: 6e74 726f 6c29 0d0a 0d0a 2020 2020 2020  ntrol)....      
+000160c0: 2020 7365 6c66 2e64 6566 6175 6c74 5f73    self.default_s
+000160d0: 7479 6c65 203d 207b 2263 7572 736f 7222  tyle = {"cursor"
+000160e0: 3a20 2263 726f 7373 6861 6972 227d 0d0a  : "crosshair"}..
+000160f0: 2020 2020 2020 2020 6d73 6720 3d20 2254          msg = "T
+00016100: 6865 2070 6c6f 7420 6675 6e63 7469 6f6e  he plot function
+00016110: 2063 616e 206f 6e6c 7920 6265 2075 7365   can only be use
+00016120: 6420 6f6e 2065 652e 496d 6167 6520 6f72  d on ee.Image or
+00016130: 2065 652e 496d 6167 6543 6f6c 6c65 6374   ee.ImageCollect
+00016140: 696f 6e20 7769 7468 206d 6f72 6520 7468  ion with more th
+00016150: 616e 206f 6e65 2062 616e 642e 220d 0a20  an one band.".. 
+00016160: 2020 2020 2020 2069 6620 2865 655f 6f62         if (ee_ob
+00016170: 6a65 6374 2069 7320 4e6f 6e65 2920 616e  ject is None) an
+00016180: 6420 6c65 6e28 7365 6c66 2e65 655f 7261  d len(self.ee_ra
+00016190: 7374 6572 5f6c 6179 6572 7329 203e 2030  ster_layers) > 0
+000161a0: 3a0d 0a20 2020 2020 2020 2020 2020 2065  :..            e
+000161b0: 655f 6f62 6a65 6374 203d 2073 656c 662e  e_object = self.
+000161c0: 6565 5f72 6173 7465 725f 6c61 7965 7273  ee_raster_layers
+000161d0: 5b2d 315d 0d0a 2020 2020 2020 2020 2020  [-1]..          
+000161e0: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+000161f0: 6565 5f6f 626a 6563 742c 2065 652e 496d  ee_object, ee.Im
+00016200: 6167 6543 6f6c 6c65 6374 696f 6e29 3a0d  ageCollection):.
+00016210: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00016220: 2065 655f 6f62 6a65 6374 203d 2065 655f   ee_object = ee_
+00016230: 6f62 6a65 6374 2e6d 6f73 6169 6328 290d  object.mosaic().
+00016240: 0a20 2020 2020 2020 2065 6c69 6620 6973  .        elif is
+00016250: 696e 7374 616e 6365 2865 655f 6f62 6a65  instance(ee_obje
+00016260: 6374 2c20 6565 2e49 6d61 6765 436f 6c6c  ct, ee.ImageColl
+00016270: 6563 7469 6f6e 293a 0d0a 2020 2020 2020  ection):..      
+00016280: 2020 2020 2020 6565 5f6f 626a 6563 7420        ee_object 
+00016290: 3d20 6565 5f6f 626a 6563 742e 6d6f 7361  = ee_object.mosa
+000162a0: 6963 2829 0d0a 2020 2020 2020 2020 656c  ic()..        el
+000162b0: 6966 206e 6f74 2069 7369 6e73 7461 6e63  if not isinstanc
+000162c0: 6528 6565 5f6f 626a 6563 742c 2065 652e  e(ee_object, ee.
+000162d0: 496d 6167 6529 3a0d 0a20 2020 2020 2020  Image):..       
+000162e0: 2020 2020 2070 7269 6e74 286d 7367 290d       print(msg).
+000162f0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00016300: 7572 6e0d 0a0d 0a20 2020 2020 2020 2069  urn....        i
+00016310: 6620 7361 6d70 6c65 5f73 6361 6c65 2069  f sample_scale i
+00016320: 7320 4e6f 6e65 3a0d 0a20 2020 2020 2020  s None:..       
+00016330: 2020 2020 2073 616d 706c 655f 7363 616c       sample_scal
+00016340: 6520 3d20 7365 6c66 2e67 6574 5363 616c  e = self.getScal
+00016350: 6528 290d 0a0d 0a20 2020 2020 2020 2069  e()....        i
+00016360: 6620 6d61 785f 7769 6474 6820 6973 204e  f max_width is N
+00016370: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
+00016380: 2020 6d61 785f 7769 6474 6820 3d20 3530    max_width = 50
+00016390: 300d 0a0d 0a20 2020 2020 2020 2062 616e  0....        ban
+000163a0: 645f 6e61 6d65 7320 3d20 6565 5f6f 626a  d_names = ee_obj
+000163b0: 6563 742e 6261 6e64 4e61 6d65 7328 292e  ect.bandNames().
+000163c0: 6765 7449 6e66 6f28 290d 0a0d 0a20 2020  getInfo()....   
+000163d0: 2020 2020 2063 6f6f 7264 696e 6174 6573       coordinates
+000163e0: 203d 205b 5d0d 0a20 2020 2020 2020 206d   = []..        m
+000163f0: 6172 6b65 7273 203d 205b 5d0d 0a20 2020  arkers = []..   
+00016400: 2020 2020 206d 6172 6b65 725f 636c 7573       marker_clus
+00016410: 7465 7220 3d20 6970 796c 6561 666c 6574  ter = ipyleaflet
+00016420: 2e4d 6172 6b65 7243 6c75 7374 6572 286e  .MarkerCluster(n
+00016430: 616d 653d 224d 6172 6b65 7220 436c 7573  ame="Marker Clus
+00016440: 7465 7222 290d 0a20 2020 2020 2020 2073  ter")..        s
+00016450: 656c 662e 6c61 7374 5f63 6c69 636b 203d  elf.last_click =
+00016460: 205b 5d0d 0a20 2020 2020 2020 2073 656c   []..        sel
+00016470: 662e 616c 6c5f 636c 6963 6b73 203d 205b  f.all_clicks = [
+00016480: 5d0d 0a20 2020 2020 2020 2073 656c 662e  ]..        self.
+00016490: 6164 645f 6c61 7965 7228 6d61 726b 6572  add_layer(marker
+000164a0: 5f63 6c75 7374 6572 290d 0a0d 0a20 2020  _cluster)....   
+000164b0: 2020 2020 2064 6566 2068 616e 646c 655f       def handle_
+000164c0: 696e 7465 7261 6374 696f 6e28 2a2a 6b77  interaction(**kw
+000164d0: 6172 6773 3229 3a0d 0a20 2020 2020 2020  args2):..       
+000164e0: 2020 2020 206c 6174 6c6f 6e20 3d20 6b77       latlon = kw
+000164f0: 6172 6773 322e 6765 7428 2263 6f6f 7264  args2.get("coord
+00016500: 696e 6174 6573 2229 0d0a 0d0a 2020 2020  inates")....    
+00016510: 2020 2020 2020 2020 6966 206b 7761 7267          if kwarg
+00016520: 7332 2e67 6574 2822 7479 7065 2229 203d  s2.get("type") =
+00016530: 3d20 2263 6c69 636b 223a 0d0a 2020 2020  = "click":..    
+00016540: 2020 2020 2020 2020 2020 2020 7472 793a              try:
+00016550: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00016560: 2020 2020 2020 636f 6f72 6469 6e61 7465        coordinate
+00016570: 732e 6170 7065 6e64 286c 6174 6c6f 6e29  s.append(latlon)
+00016580: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00016590: 2020 2020 2020 7365 6c66 2e6c 6173 745f        self.last_
+000165a0: 636c 6963 6b20 3d20 6c61 746c 6f6e 0d0a  click = latlon..
+000165b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000165c0: 2020 2020 7365 6c66 2e61 6c6c 5f63 6c69      self.all_cli
+000165d0: 636b 7320 3d20 636f 6f72 6469 6e61 7465  cks = coordinate
+000165e0: 730d 0a20 2020 2020 2020 2020 2020 2020  s..             
+000165f0: 2020 2020 2020 206d 6172 6b65 7273 2e61         markers.a
+00016600: 7070 656e 6428 6970 796c 6561 666c 6574  ppend(ipyleaflet
+00016610: 2e4d 6172 6b65 7228 6c6f 6361 7469 6f6e  .Marker(location
+00016620: 3d6c 6174 6c6f 6e29 290d 0a20 2020 2020  =latlon))..     
+00016630: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+00016640: 6172 6b65 725f 636c 7573 7465 722e 6d61  arker_cluster.ma
+00016650: 726b 6572 7320 3d20 6d61 726b 6572 730d  rkers = markers.
+00016660: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00016670: 2020 2020 2073 656c 662e 6465 6661 756c       self.defaul
+00016680: 745f 7374 796c 6520 3d20 7b22 6375 7273  t_style = {"curs
+00016690: 6f72 223a 2022 7761 6974 227d 0d0a 2020  or": "wait"}..  
+000166a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000166b0: 2020 7879 203d 2065 652e 4765 6f6d 6574    xy = ee.Geomet
+000166c0: 7279 2e50 6f69 6e74 286c 6174 6c6f 6e5b  ry.Point(latlon[
+000166d0: 3a3a 2d31 5d29 0d0a 2020 2020 2020 2020  ::-1])..        
+000166e0: 2020 2020 2020 2020 2020 2020 6469 6374              dict
+000166f0: 5f76 616c 7565 7320 3d20 280d 0a20 2020  _values = (..   
 00016700: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016710: 2020 2020 202e 6765 7449 6e66 6f28 290d       .getInfo().
-00016720: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00016730: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
-00016740: 2020 2020 2020 2020 2020 2020 6261 6e64              band
-00016750: 5f76 616c 7565 7320 3d20 6c69 7374 2864  _values = list(d
-00016760: 6963 745f 7661 6c75 6573 2e76 616c 7565  ict_values.value
-00016770: 7328 2929 0d0a 2020 2020 2020 2020 2020  s())..          
-00016780: 2020 2020 2020 2020 2020 7365 6c66 2e70            self.p
-00016790: 6c6f 7428 0d0a 2020 2020 2020 2020 2020  lot(..          
-000167a0: 2020 2020 2020 2020 2020 2020 2020 6261                ba
-000167b0: 6e64 5f6e 616d 6573 2c0d 0a20 2020 2020  nd_names,..     
-000167c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000167d0: 2020 2062 616e 645f 7661 6c75 6573 2c0d     band_values,.
-000167e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000167f0: 2020 2020 2020 2020 2070 6c6f 745f 7479           plot_ty
-00016800: 7065 3d70 6c6f 745f 7479 7065 2c0d 0a20  pe=plot_type,.. 
-00016810: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016820: 2020 2020 2020 206f 7665 726c 6179 3d6f         overlay=o
-00016830: 7665 726c 6179 2c0d 0a20 2020 2020 2020  verlay,..       
-00016840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016850: 206d 696e 5f77 6964 7468 3d6d 696e 5f77   min_width=min_w
-00016860: 6964 7468 2c0d 0a20 2020 2020 2020 2020  idth,..         
-00016870: 2020 2020 2020 2020 2020 2020 2020 206d                 m
-00016880: 6178 5f77 6964 7468 3d6d 6178 5f77 6964  ax_width=max_wid
-00016890: 7468 2c0d 0a20 2020 2020 2020 2020 2020  th,..           
-000168a0: 2020 2020 2020 2020 2020 2020 206d 696e               min
-000168b0: 5f68 6569 6768 743d 6d69 6e5f 6865 6967  _height=min_heig
-000168c0: 6874 2c0d 0a20 2020 2020 2020 2020 2020  ht,..           
-000168d0: 2020 2020 2020 2020 2020 2020 206d 6178               max
-000168e0: 5f68 6569 6768 743d 6d61 785f 6865 6967  _height=max_heig
-000168f0: 6874 2c0d 0a20 2020 2020 2020 2020 2020  ht,..           
-00016900: 2020 2020 2020 2020 2020 2020 202a 2a6b               **k
-00016910: 7761 7267 732c 0d0a 2020 2020 2020 2020  wargs,..        
-00016920: 2020 2020 2020 2020 2020 2020 290d 0a20              ).. 
-00016930: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016940: 2020 2073 656c 662e 6465 6661 756c 745f     self.default_
-00016950: 7374 796c 6520 3d20 7b22 6375 7273 6f72  style = {"cursor
-00016960: 223a 2022 6372 6f73 7368 6169 7222 7d0d  ": "crosshair"}.
-00016970: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00016980: 2065 7863 6570 7420 4578 6365 7074 696f   except Exceptio
-00016990: 6e20 6173 2065 3a0d 0a20 2020 2020 2020  n as e:..       
-000169a0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-000169b0: 7365 6c66 2e70 6c6f 745f 7769 6467 6574  self.plot_widget
-000169c0: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
-000169d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000169e0: 2020 2020 2020 2077 6974 6820 7365 6c66         with self
-000169f0: 2e70 6c6f 745f 7769 6467 6574 3a0d 0a20  .plot_widget:.. 
-00016a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016a10: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00016a20: 706c 6f74 5f77 6964 6765 742e 636c 6561  plot_widget.clea
-00016a30: 725f 6f75 7470 7574 2829 0d0a 2020 2020  r_output()..    
-00016a40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016a50: 2020 2020 2020 2020 7072 696e 7428 224e          print("N
-00016a60: 6f20 6461 7461 2066 6f72 2074 6865 2063  o data for the c
-00016a70: 6c69 636b 6564 206c 6f63 6174 696f 6e2e  licked location.
-00016a80: 2229 0d0a 2020 2020 2020 2020 2020 2020  ")..            
-00016a90: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
-00016aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016ab0: 2020 2020 2020 2070 7269 6e74 2865 290d         print(e).
-00016ac0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00016ad0: 2020 2020 2073 656c 662e 6465 6661 756c       self.defaul
-00016ae0: 745f 7374 796c 6520 3d20 7b22 6375 7273  t_style = {"curs
-00016af0: 6f72 223a 2022 6372 6f73 7368 6169 7222  or": "crosshair"
-00016b00: 7d0d 0a0d 0a20 2020 2020 2020 2073 656c  }....        sel
-00016b10: 662e 6f6e 5f69 6e74 6572 6163 7469 6f6e  f.on_interaction
-00016b20: 2868 616e 646c 655f 696e 7465 7261 6374  (handle_interact
-00016b30: 696f 6e29 0d0a 0d0a 2020 2020 6465 6620  ion)....    def 
-00016b40: 6164 645f 6d61 6b65 725f 636c 7573 7465  add_maker_cluste
-00016b50: 7228 7365 6c66 2c20 6576 656e 743d 2263  r(self, event="c
-00016b60: 6c69 636b 222c 2061 6464 5f6d 6172 6b65  lick", add_marke
-00016b70: 723d 5472 7565 293a 0d0a 2020 2020 2020  r=True):..      
-00016b80: 2020 2222 2243 6170 7475 7265 7320 7573    """Captures us
-00016b90: 6572 2069 6e70 7574 7320 616e 6420 6164  er inputs and ad
-00016ba0: 6420 6d61 726b 6572 7320 746f 2074 6865  d markers to the
-00016bb0: 206d 6170 2e0d 0a0d 0a20 2020 2020 2020   map.....       
-00016bc0: 2041 7267 733a 0d0a 2020 2020 2020 2020   Args:..        
-00016bd0: 2020 2020 6576 656e 7420 2873 7472 2c20      event (str, 
-00016be0: 6f70 7469 6f6e 616c 293a 205b 6465 7363  optional): [desc
-00016bf0: 7269 7074 696f 6e5d 2e20 4465 6661 756c  ription]. Defaul
-00016c00: 7473 2074 6f20 2763 6c69 636b 272e 0d0a  ts to 'click'...
-00016c10: 2020 2020 2020 2020 2020 2020 6164 645f              add_
-00016c20: 6d61 726b 6572 2028 626f 6f6c 2c20 6f70  marker (bool, op
-00016c30: 7469 6f6e 616c 293a 2049 6620 5472 7565  tional): If True
-00016c40: 2c20 6164 6420 6d61 726b 6572 7320 746f  , add markers to
-00016c50: 2074 6865 206d 6170 2e20 4465 6661 756c   the map. Defaul
-00016c60: 7473 2074 6f20 5472 7565 2e0d 0a0d 0a20  ts to True..... 
-00016c70: 2020 2020 2020 2052 6574 7572 6e73 3a0d         Returns:.
-00016c80: 0a20 2020 2020 2020 2020 2020 206f 626a  .            obj
-00016c90: 6563 743a 2061 206d 6172 6b65 7220 636c  ect: a marker cl
-00016ca0: 7573 7465 722e 0d0a 2020 2020 2020 2020  uster...        
-00016cb0: 2222 220d 0a20 2020 2020 2020 2063 6f6f  """..        coo
-00016cc0: 7264 696e 6174 6573 203d 205b 5d0d 0a20  rdinates = [].. 
-00016cd0: 2020 2020 2020 206d 6172 6b65 7273 203d         markers =
-00016ce0: 205b 5d0d 0a20 2020 2020 2020 206d 6172   []..        mar
-00016cf0: 6b65 725f 636c 7573 7465 7220 3d20 6970  ker_cluster = ip
-00016d00: 796c 6561 666c 6574 2e4d 6172 6b65 7243  yleaflet.MarkerC
-00016d10: 6c75 7374 6572 286e 616d 653d 224d 6172  luster(name="Mar
-00016d20: 6b65 7220 436c 7573 7465 7222 290d 0a20  ker Cluster").. 
-00016d30: 2020 2020 2020 2073 656c 662e 6c61 7374         self.last
-00016d40: 5f63 6c69 636b 203d 205b 5d0d 0a20 2020  _click = []..   
-00016d50: 2020 2020 2073 656c 662e 616c 6c5f 636c       self.all_cl
-00016d60: 6963 6b73 203d 205b 5d0d 0a20 2020 2020  icks = []..     
-00016d70: 2020 2069 6620 6164 645f 6d61 726b 6572     if add_marker
-00016d80: 3a0d 0a20 2020 2020 2020 2020 2020 2073  :..            s
-00016d90: 656c 662e 6164 645f 6c61 7965 7228 6d61  elf.add_layer(ma
-00016da0: 726b 6572 5f63 6c75 7374 6572 290d 0a0d  rker_cluster)...
-00016db0: 0a20 2020 2020 2020 2064 6566 2068 616e  .        def han
-00016dc0: 646c 655f 696e 7465 7261 6374 696f 6e28  dle_interaction(
-00016dd0: 2a2a 6b77 6172 6773 293a 0d0a 2020 2020  **kwargs):..    
-00016de0: 2020 2020 2020 2020 6c61 746c 6f6e 203d          latlon =
-00016df0: 206b 7761 7267 732e 6765 7428 2263 6f6f   kwargs.get("coo
-00016e00: 7264 696e 6174 6573 2229 0d0a 0d0a 2020  rdinates")....  
-00016e10: 2020 2020 2020 2020 2020 6966 2065 7665            if eve
-00016e20: 6e74 203d 3d20 2263 6c69 636b 2220 616e  nt == "click" an
-00016e30: 6420 6b77 6172 6773 2e67 6574 2822 7479  d kwargs.get("ty
-00016e40: 7065 2229 203d 3d20 2263 6c69 636b 223a  pe") == "click":
-00016e50: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00016e60: 2020 636f 6f72 6469 6e61 7465 732e 6170    coordinates.ap
-00016e70: 7065 6e64 286c 6174 6c6f 6e29 0d0a 2020  pend(latlon)..  
-00016e80: 2020 2020 2020 2020 2020 2020 2020 7365                se
-00016e90: 6c66 2e6c 6173 745f 636c 6963 6b20 3d20  lf.last_click = 
-00016ea0: 6c61 746c 6f6e 0d0a 2020 2020 2020 2020  latlon..        
-00016eb0: 2020 2020 2020 2020 7365 6c66 2e61 6c6c          self.all
-00016ec0: 5f63 6c69 636b 7320 3d20 636f 6f72 6469  _clicks = coordi
-00016ed0: 6e61 7465 730d 0a20 2020 2020 2020 2020  nates..         
-00016ee0: 2020 2020 2020 2069 6620 6164 645f 6d61         if add_ma
-00016ef0: 726b 6572 3a0d 0a20 2020 2020 2020 2020  rker:..         
-00016f00: 2020 2020 2020 2020 2020 206d 6172 6b65             marke
-00016f10: 7273 2e61 7070 656e 6428 6970 796c 6561  rs.append(ipylea
-00016f20: 666c 6574 2e4d 6172 6b65 7228 6c6f 6361  flet.Marker(loca
-00016f30: 7469 6f6e 3d6c 6174 6c6f 6e29 290d 0a20  tion=latlon)).. 
-00016f40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016f50: 2020 206d 6172 6b65 725f 636c 7573 7465     marker_cluste
-00016f60: 722e 6d61 726b 6572 7320 3d20 6d61 726b  r.markers = mark
-00016f70: 6572 730d 0a20 2020 2020 2020 2020 2020  ers..           
-00016f80: 2065 6c69 6620 6b77 6172 6773 2e67 6574   elif kwargs.get
-00016f90: 2822 7479 7065 2229 203d 3d20 226d 6f75  ("type") == "mou
-00016fa0: 7365 6d6f 7665 223a 0d0a 2020 2020 2020  semove":..      
-00016fb0: 2020 2020 2020 2020 2020 7061 7373 0d0a            pass..
-00016fc0: 0d0a 2020 2020 2020 2020 2320 6375 7273  ..        # curs
-00016fd0: 6f72 2073 7479 6c65 3a20 6874 7470 733a  or style: https:
-00016fe0: 2f2f 7777 772e 7733 7363 686f 6f6c 732e  //www.w3schools.
-00016ff0: 636f 6d2f 6373 7372 6566 2f70 725f 636c  com/cssref/pr_cl
-00017000: 6173 735f 6375 7273 6f72 2e61 7370 0d0a  ass_cursor.asp..
-00017010: 2020 2020 2020 2020 7365 6c66 2e64 6566          self.def
-00017020: 6175 6c74 5f73 7479 6c65 203d 207b 2263  ault_style = {"c
-00017030: 7572 736f 7222 3a20 2263 726f 7373 6861  ursor": "crossha
-00017040: 6972 227d 0d0a 2020 2020 2020 2020 7365  ir"}..        se
-00017050: 6c66 2e6f 6e5f 696e 7465 7261 6374 696f  lf.on_interactio
-00017060: 6e28 6861 6e64 6c65 5f69 6e74 6572 6163  n(handle_interac
-00017070: 7469 6f6e 290d 0a0d 0a20 2020 2064 6566  tion)....    def
-00017080: 2073 6574 5f63 6f6e 7472 6f6c 5f76 6973   set_control_vis
-00017090: 6962 696c 6974 7928 0d0a 2020 2020 2020  ibility(..      
-000170a0: 2020 7365 6c66 2c20 6c61 7965 7243 6f6e    self, layerCon
-000170b0: 7472 6f6c 3d54 7275 652c 2066 756c 6c73  trol=True, fulls
-000170c0: 6372 6565 6e43 6f6e 7472 6f6c 3d54 7275  creenControl=Tru
-000170d0: 652c 206c 6174 4c6e 6750 6f70 7570 3d54  e, latLngPopup=T
-000170e0: 7275 650d 0a20 2020 2029 3a0d 0a20 2020  rue..    ):..   
-000170f0: 2020 2020 2022 2222 5365 7473 2074 6865       """Sets the
-00017100: 2076 6973 6962 696c 6974 7920 6f66 2074   visibility of t
-00017110: 6865 2063 6f6e 7472 6f6c 7320 6f6e 2074  he controls on t
-00017120: 6865 206d 6170 2e0d 0a0d 0a20 2020 2020  he map.....     
-00017130: 2020 2041 7267 733a 0d0a 2020 2020 2020     Args:..      
-00017140: 2020 2020 2020 6c61 7965 7243 6f6e 7472        layerContr
-00017150: 6f6c 2028 626f 6f6c 2c20 6f70 7469 6f6e  ol (bool, option
-00017160: 616c 293a 2057 6865 7468 6572 2074 6f20  al): Whether to 
-00017170: 7368 6f77 2074 6865 2063 6f6e 7472 6f6c  show the control
-00017180: 2074 6861 7420 616c 6c6f 7773 2074 6865   that allows the
-00017190: 2075 7365 7220 746f 2074 6f67 676c 6520   user to toggle 
-000171a0: 6c61 7965 7273 206f 6e2f 6f66 662e 2044  layers on/off. D
-000171b0: 6566 6175 6c74 7320 746f 2054 7275 652e  efaults to True.
-000171c0: 0d0a 2020 2020 2020 2020 2020 2020 6675  ..            fu
-000171d0: 6c6c 7363 7265 656e 436f 6e74 726f 6c20  llscreenControl 
+00016710: 2020 2020 2065 655f 6f62 6a65 6374 2e73       ee_object.s
+00016720: 616d 706c 6528 7879 2c20 7363 616c 653d  ample(xy, scale=
+00016730: 7361 6d70 6c65 5f73 6361 6c65 290d 0a20  sample_scale).. 
+00016740: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016750: 2020 2020 2020 202e 6669 7273 7428 290d         .first().
+00016760: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00016770: 2020 2020 2020 2020 202e 746f 4469 6374           .toDict
+00016780: 696f 6e61 7279 2829 0d0a 2020 2020 2020  ionary()..      
+00016790: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000167a0: 2020 2e67 6574 496e 666f 2829 0d0a 2020    .getInfo()..  
+000167b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000167c0: 2020 290d 0a20 2020 2020 2020 2020 2020    )..           
+000167d0: 2020 2020 2020 2020 2062 616e 645f 7661           band_va
+000167e0: 6c75 6573 203d 206c 6973 7428 6469 6374  lues = list(dict
+000167f0: 5f76 616c 7565 732e 7661 6c75 6573 2829  _values.values()
+00016800: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00016810: 2020 2020 2020 2073 656c 662e 706c 6f74         self.plot
+00016820: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
+00016830: 2020 2020 2020 2020 2020 2062 616e 645f             band_
+00016840: 6e61 6d65 732c 0d0a 2020 2020 2020 2020  names,..        
+00016850: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016860: 6261 6e64 5f76 616c 7565 732c 0d0a 2020  band_values,..  
+00016870: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016880: 2020 2020 2020 706c 6f74 5f74 7970 653d        plot_type=
+00016890: 706c 6f74 5f74 7970 652c 0d0a 2020 2020  plot_type,..    
+000168a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000168b0: 2020 2020 6f76 6572 6c61 793d 6f76 6572      overlay=over
+000168c0: 6c61 792c 0d0a 2020 2020 2020 2020 2020  lay,..          
+000168d0: 2020 2020 2020 2020 2020 2020 2020 6d69                mi
+000168e0: 6e5f 7769 6474 683d 6d69 6e5f 7769 6474  n_width=min_widt
+000168f0: 682c 0d0a 2020 2020 2020 2020 2020 2020  h,..            
+00016900: 2020 2020 2020 2020 2020 2020 6d61 785f              max_
+00016910: 7769 6474 683d 6d61 785f 7769 6474 682c  width=max_width,
+00016920: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00016930: 2020 2020 2020 2020 2020 6d69 6e5f 6865            min_he
+00016940: 6967 6874 3d6d 696e 5f68 6569 6768 742c  ight=min_height,
+00016950: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00016960: 2020 2020 2020 2020 2020 6d61 785f 6865            max_he
+00016970: 6967 6874 3d6d 6178 5f68 6569 6768 742c  ight=max_height,
+00016980: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00016990: 2020 2020 2020 2020 2020 2a2a 6b77 6172            **kwar
+000169a0: 6773 2c0d 0a20 2020 2020 2020 2020 2020  gs,..           
+000169b0: 2020 2020 2020 2020 2029 0d0a 2020 2020           )..    
+000169c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000169d0: 7365 6c66 2e64 6566 6175 6c74 5f73 7479  self.default_sty
+000169e0: 6c65 203d 207b 2263 7572 736f 7222 3a20  le = {"cursor": 
+000169f0: 2263 726f 7373 6861 6972 227d 0d0a 2020  "crosshair"}..  
+00016a00: 2020 2020 2020 2020 2020 2020 2020 6578                ex
+00016a10: 6365 7074 2045 7863 6570 7469 6f6e 2061  cept Exception a
+00016a20: 7320 653a 0d0a 2020 2020 2020 2020 2020  s e:..          
+00016a30: 2020 2020 2020 2020 2020 6966 2073 656c            if sel
+00016a40: 662e 706c 6f74 5f77 6964 6765 7420 6973  f.plot_widget is
+00016a50: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
+00016a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016a70: 2020 2020 7769 7468 2073 656c 662e 706c      with self.pl
+00016a80: 6f74 5f77 6964 6765 743a 0d0a 2020 2020  ot_widget:..    
+00016a90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016aa0: 2020 2020 2020 2020 7365 6c66 2e70 6c6f          self.plo
+00016ab0: 745f 7769 6467 6574 2e63 6c65 6172 5f6f  t_widget.clear_o
+00016ac0: 7574 7075 7428 290d 0a20 2020 2020 2020  utput()..       
+00016ad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016ae0: 2020 2020 2070 7269 6e74 2822 4e6f 2064       print("No d
+00016af0: 6174 6120 666f 7220 7468 6520 636c 6963  ata for the clic
+00016b00: 6b65 6420 6c6f 6361 7469 6f6e 2e22 290d  ked location.").
+00016b10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00016b20: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
+00016b30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016b40: 2020 2020 7072 696e 7428 6529 0d0a 2020      print(e)..  
+00016b50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016b60: 2020 7365 6c66 2e64 6566 6175 6c74 5f73    self.default_s
+00016b70: 7479 6c65 203d 207b 2263 7572 736f 7222  tyle = {"cursor"
+00016b80: 3a20 2263 726f 7373 6861 6972 227d 0d0a  : "crosshair"}..
+00016b90: 0d0a 2020 2020 2020 2020 7365 6c66 2e6f  ..        self.o
+00016ba0: 6e5f 696e 7465 7261 6374 696f 6e28 6861  n_interaction(ha
+00016bb0: 6e64 6c65 5f69 6e74 6572 6163 7469 6f6e  ndle_interaction
+00016bc0: 290d 0a0d 0a20 2020 2064 6566 2061 6464  )....    def add
+00016bd0: 5f6d 616b 6572 5f63 6c75 7374 6572 2873  _maker_cluster(s
+00016be0: 656c 662c 2065 7665 6e74 3d22 636c 6963  elf, event="clic
+00016bf0: 6b22 2c20 6164 645f 6d61 726b 6572 3d54  k", add_marker=T
+00016c00: 7275 6529 3a0d 0a20 2020 2020 2020 2022  rue):..        "
+00016c10: 2222 4361 7074 7572 6573 2075 7365 7220  ""Captures user 
+00016c20: 696e 7075 7473 2061 6e64 2061 6464 206d  inputs and add m
+00016c30: 6172 6b65 7273 2074 6f20 7468 6520 6d61  arkers to the ma
+00016c40: 702e 0d0a 0d0a 2020 2020 2020 2020 4172  p.....        Ar
+00016c50: 6773 3a0d 0a20 2020 2020 2020 2020 2020  gs:..           
+00016c60: 2065 7665 6e74 2028 7374 722c 206f 7074   event (str, opt
+00016c70: 696f 6e61 6c29 3a20 5b64 6573 6372 6970  ional): [descrip
+00016c80: 7469 6f6e 5d2e 2044 6566 6175 6c74 7320  tion]. Defaults 
+00016c90: 746f 2027 636c 6963 6b27 2e0d 0a20 2020  to 'click'...   
+00016ca0: 2020 2020 2020 2020 2061 6464 5f6d 6172           add_mar
+00016cb0: 6b65 7220 2862 6f6f 6c2c 206f 7074 696f  ker (bool, optio
+00016cc0: 6e61 6c29 3a20 4966 2054 7275 652c 2061  nal): If True, a
+00016cd0: 6464 206d 6172 6b65 7273 2074 6f20 7468  dd markers to th
+00016ce0: 6520 6d61 702e 2044 6566 6175 6c74 7320  e map. Defaults 
+00016cf0: 746f 2054 7275 652e 0d0a 0d0a 2020 2020  to True.....    
+00016d00: 2020 2020 5265 7475 726e 733a 0d0a 2020      Returns:..  
+00016d10: 2020 2020 2020 2020 2020 6f62 6a65 6374            object
+00016d20: 3a20 6120 6d61 726b 6572 2063 6c75 7374  : a marker clust
+00016d30: 6572 2e0d 0a20 2020 2020 2020 2022 2222  er...        """
+00016d40: 0d0a 2020 2020 2020 2020 636f 6f72 6469  ..        coordi
+00016d50: 6e61 7465 7320 3d20 5b5d 0d0a 2020 2020  nates = []..    
+00016d60: 2020 2020 6d61 726b 6572 7320 3d20 5b5d      markers = []
+00016d70: 0d0a 2020 2020 2020 2020 6d61 726b 6572  ..        marker
+00016d80: 5f63 6c75 7374 6572 203d 2069 7079 6c65  _cluster = ipyle
+00016d90: 6166 6c65 742e 4d61 726b 6572 436c 7573  aflet.MarkerClus
+00016da0: 7465 7228 6e61 6d65 3d22 4d61 726b 6572  ter(name="Marker
+00016db0: 2043 6c75 7374 6572 2229 0d0a 2020 2020   Cluster")..    
+00016dc0: 2020 2020 7365 6c66 2e6c 6173 745f 636c      self.last_cl
+00016dd0: 6963 6b20 3d20 5b5d 0d0a 2020 2020 2020  ick = []..      
+00016de0: 2020 7365 6c66 2e61 6c6c 5f63 6c69 636b    self.all_click
+00016df0: 7320 3d20 5b5d 0d0a 2020 2020 2020 2020  s = []..        
+00016e00: 6966 2061 6464 5f6d 6172 6b65 723a 0d0a  if add_marker:..
+00016e10: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00016e20: 2e61 6464 5f6c 6179 6572 286d 6172 6b65  .add_layer(marke
+00016e30: 725f 636c 7573 7465 7229 0d0a 0d0a 2020  r_cluster)....  
+00016e40: 2020 2020 2020 6465 6620 6861 6e64 6c65        def handle
+00016e50: 5f69 6e74 6572 6163 7469 6f6e 282a 2a6b  _interaction(**k
+00016e60: 7761 7267 7329 3a0d 0a20 2020 2020 2020  wargs):..       
+00016e70: 2020 2020 206c 6174 6c6f 6e20 3d20 6b77       latlon = kw
+00016e80: 6172 6773 2e67 6574 2822 636f 6f72 6469  args.get("coordi
+00016e90: 6e61 7465 7322 290d 0a0d 0a20 2020 2020  nates")....     
+00016ea0: 2020 2020 2020 2069 6620 6576 656e 7420         if event 
+00016eb0: 3d3d 2022 636c 6963 6b22 2061 6e64 206b  == "click" and k
+00016ec0: 7761 7267 732e 6765 7428 2274 7970 6522  wargs.get("type"
+00016ed0: 2920 3d3d 2022 636c 6963 6b22 3a0d 0a20  ) == "click":.. 
+00016ee0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+00016ef0: 6f6f 7264 696e 6174 6573 2e61 7070 656e  oordinates.appen
+00016f00: 6428 6c61 746c 6f6e 290d 0a20 2020 2020  d(latlon)..     
+00016f10: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00016f20: 6c61 7374 5f63 6c69 636b 203d 206c 6174  last_click = lat
+00016f30: 6c6f 6e0d 0a20 2020 2020 2020 2020 2020  lon..           
+00016f40: 2020 2020 2073 656c 662e 616c 6c5f 636c       self.all_cl
+00016f50: 6963 6b73 203d 2063 6f6f 7264 696e 6174  icks = coordinat
+00016f60: 6573 0d0a 2020 2020 2020 2020 2020 2020  es..            
+00016f70: 2020 2020 6966 2061 6464 5f6d 6172 6b65      if add_marke
+00016f80: 723a 0d0a 2020 2020 2020 2020 2020 2020  r:..            
+00016f90: 2020 2020 2020 2020 6d61 726b 6572 732e          markers.
+00016fa0: 6170 7065 6e64 2869 7079 6c65 6166 6c65  append(ipyleafle
+00016fb0: 742e 4d61 726b 6572 286c 6f63 6174 696f  t.Marker(locatio
+00016fc0: 6e3d 6c61 746c 6f6e 2929 0d0a 2020 2020  n=latlon))..    
+00016fd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016fe0: 6d61 726b 6572 5f63 6c75 7374 6572 2e6d  marker_cluster.m
+00016ff0: 6172 6b65 7273 203d 206d 6172 6b65 7273  arkers = markers
+00017000: 0d0a 2020 2020 2020 2020 2020 2020 656c  ..            el
+00017010: 6966 206b 7761 7267 732e 6765 7428 2274  if kwargs.get("t
+00017020: 7970 6522 2920 3d3d 2022 6d6f 7573 656d  ype") == "mousem
+00017030: 6f76 6522 3a0d 0a20 2020 2020 2020 2020  ove":..         
+00017040: 2020 2020 2020 2070 6173 730d 0a0d 0a20         pass.... 
+00017050: 2020 2020 2020 2023 2063 7572 736f 7220         # cursor 
+00017060: 7374 796c 653a 2068 7474 7073 3a2f 2f77  style: https://w
+00017070: 7777 2e77 3373 6368 6f6f 6c73 2e63 6f6d  ww.w3schools.com
+00017080: 2f63 7373 7265 662f 7072 5f63 6c61 7373  /cssref/pr_class
+00017090: 5f63 7572 736f 722e 6173 700d 0a20 2020  _cursor.asp..   
+000170a0: 2020 2020 2073 656c 662e 6465 6661 756c       self.defaul
+000170b0: 745f 7374 796c 6520 3d20 7b22 6375 7273  t_style = {"curs
+000170c0: 6f72 223a 2022 6372 6f73 7368 6169 7222  or": "crosshair"
+000170d0: 7d0d 0a20 2020 2020 2020 2073 656c 662e  }..        self.
+000170e0: 6f6e 5f69 6e74 6572 6163 7469 6f6e 2868  on_interaction(h
+000170f0: 616e 646c 655f 696e 7465 7261 6374 696f  andle_interactio
+00017100: 6e29 0d0a 0d0a 2020 2020 6465 6620 7365  n)....    def se
+00017110: 745f 636f 6e74 726f 6c5f 7669 7369 6269  t_control_visibi
+00017120: 6c69 7479 280d 0a20 2020 2020 2020 2073  lity(..        s
+00017130: 656c 662c 206c 6179 6572 436f 6e74 726f  elf, layerContro
+00017140: 6c3d 5472 7565 2c20 6675 6c6c 7363 7265  l=True, fullscre
+00017150: 656e 436f 6e74 726f 6c3d 5472 7565 2c20  enControl=True, 
+00017160: 6c61 744c 6e67 506f 7075 703d 5472 7565  latLngPopup=True
+00017170: 0d0a 2020 2020 293a 0d0a 2020 2020 2020  ..    ):..      
+00017180: 2020 2222 2253 6574 7320 7468 6520 7669    """Sets the vi
+00017190: 7369 6269 6c69 7479 206f 6620 7468 6520  sibility of the 
+000171a0: 636f 6e74 726f 6c73 206f 6e20 7468 6520  controls on the 
+000171b0: 6d61 702e 0d0a 0d0a 2020 2020 2020 2020  map.....        
+000171c0: 4172 6773 3a0d 0a20 2020 2020 2020 2020  Args:..         
+000171d0: 2020 206c 6179 6572 436f 6e74 726f 6c20     layerControl 
 000171e0: 2862 6f6f 6c2c 206f 7074 696f 6e61 6c29  (bool, optional)
 000171f0: 3a20 5768 6574 6865 7220 746f 2073 686f  : Whether to sho
 00017200: 7720 7468 6520 636f 6e74 726f 6c20 7468  w the control th
 00017210: 6174 2061 6c6c 6f77 7320 7468 6520 7573  at allows the us
-00017220: 6572 2074 6f20 6d61 6b65 2074 6865 206d  er to make the m
-00017230: 6170 2066 756c 6c2d 7363 7265 656e 2e20  ap full-screen. 
-00017240: 4465 6661 756c 7473 2074 6f20 5472 7565  Defaults to True
-00017250: 2e0d 0a20 2020 2020 2020 2020 2020 206c  ...            l
-00017260: 6174 4c6e 6750 6f70 7570 2028 626f 6f6c  atLngPopup (bool
-00017270: 2c20 6f70 7469 6f6e 616c 293a 2057 6865  , optional): Whe
-00017280: 7468 6572 2074 6f20 7368 6f77 2074 6865  ther to show the
-00017290: 2063 6f6e 7472 6f6c 2074 6861 7420 706f   control that po
-000172a0: 7073 2075 7020 7468 6520 4c61 742f 6c6f  ps up the Lat/lo
-000172b0: 6e20 7768 656e 2074 6865 2075 7365 7220  n when the user 
-000172c0: 636c 6963 6b73 206f 6e20 7468 6520 6d61  clicks on the ma
-000172d0: 702e 2044 6566 6175 6c74 7320 746f 2054  p. Defaults to T
-000172e0: 7275 652e 0d0a 2020 2020 2020 2020 2222  rue...        ""
-000172f0: 220d 0a20 2020 2020 2020 2070 6173 730d  "..        pass.
-00017300: 0a0d 0a20 2020 2073 6574 436f 6e74 726f  ...    setContro
-00017310: 6c56 6973 6962 696c 6974 7920 3d20 7365  lVisibility = se
-00017320: 745f 636f 6e74 726f 6c5f 7669 7369 6269  t_control_visibi
-00017330: 6c69 7479 0d0a 0d0a 2020 2020 6465 6620  lity....    def 
-00017340: 6164 645f 6c61 7965 725f 636f 6e74 726f  add_layer_contro
-00017350: 6c28 7365 6c66 293a 0d0a 2020 2020 2020  l(self):..      
-00017360: 2020 2222 2241 6464 7320 7468 6520 6c61    """Adds the la
-00017370: 7965 7220 636f 6e74 726f 6c20 746f 2074  yer control to t
-00017380: 6865 206d 6170 2e22 2222 0d0a 2020 2020  he map."""..    
-00017390: 2020 2020 7061 7373 0d0a 0d0a 2020 2020      pass....    
-000173a0: 6164 644c 6179 6572 436f 6e74 726f 6c20  addLayerControl 
-000173b0: 3d20 6164 645f 6c61 7965 725f 636f 6e74  = add_layer_cont
-000173c0: 726f 6c0d 0a0d 0a20 2020 2064 6566 2073  rol....    def s
-000173d0: 706c 6974 5f6d 6170 2873 656c 662c 206c  plit_map(self, l
-000173e0: 6566 745f 6c61 7965 723d 2248 5942 5249  eft_layer="HYBRI
-000173f0: 4422 2c20 7269 6768 745f 6c61 7965 723d  D", right_layer=
-00017400: 2245 5352 4922 293a 0d0a 2020 2020 2020  "ESRI"):..      
-00017410: 2020 2222 2241 6464 7320 7370 6c69 7420    """Adds split 
-00017420: 6d61 702e 0d0a 0d0a 2020 2020 2020 2020  map.....        
-00017430: 4172 6773 3a0d 0a20 2020 2020 2020 2020  Args:..         
-00017440: 2020 206c 6566 745f 6c61 7965 7220 2873     left_layer (s
-00017450: 7472 2c20 6f70 7469 6f6e 616c 293a 2054  tr, optional): T
-00017460: 6865 206c 6179 6572 2074 696c 6520 6c61  he layer tile la
-00017470: 7965 722e 2044 6566 6175 6c74 7320 746f  yer. Defaults to
-00017480: 2027 4859 4252 4944 272e 0d0a 2020 2020   'HYBRID'...    
-00017490: 2020 2020 2020 2020 7269 6768 745f 6c61          right_la
-000174a0: 7965 7220 2873 7472 2c20 6f70 7469 6f6e  yer (str, option
-000174b0: 616c 293a 2054 6865 2072 6967 6874 2074  al): The right t
-000174c0: 696c 6520 6c61 7965 722e 2044 6566 6175  ile layer. Defau
-000174d0: 6c74 7320 746f 2027 4553 5249 272e 0d0a  lts to 'ESRI'...
-000174e0: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
-000174f0: 2020 2020 2074 7279 3a0d 0a20 2020 2020       try:..     
-00017500: 2020 2020 2020 2063 6f6e 7472 6f6c 7320         controls 
-00017510: 3d20 7365 6c66 2e63 6f6e 7472 6f6c 730d  = self.controls.
-00017520: 0a20 2020 2020 2020 2020 2020 206c 6179  .            lay
-00017530: 6572 7320 3d20 7365 6c66 2e6c 6179 6572  ers = self.layer
-00017540: 730d 0a20 2020 2020 2020 2020 2020 2073  s..            s
-00017550: 656c 662e 636c 6561 725f 636f 6e74 726f  elf.clear_contro
-00017560: 6c73 2829 0d0a 0d0a 2020 2020 2020 2020  ls()....        
-00017570: 2020 2020 7365 6c66 2e61 6464 5f63 6f6e      self.add_con
-00017580: 7472 6f6c 2869 7079 6c65 6166 6c65 742e  trol(ipyleaflet.
-00017590: 5a6f 6f6d 436f 6e74 726f 6c28 2929 0d0a  ZoomControl())..
-000175a0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-000175b0: 2e61 6464 5f63 6f6e 7472 6f6c 2869 7079  .add_control(ipy
-000175c0: 6c65 6166 6c65 742e 4675 6c6c 5363 7265  leaflet.FullScre
-000175d0: 656e 436f 6e74 726f 6c28 2929 0d0a 2020  enControl())..  
-000175e0: 2020 2020 2020 2020 2020 6966 206c 6566            if lef
-000175f0: 745f 6c61 7965 7220 696e 2062 6173 656d  t_layer in basem
-00017600: 6170 5f74 696c 6573 2e6b 6579 7328 293a  ap_tiles.keys():
-00017610: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00017620: 2020 6c65 6674 5f6c 6179 6572 203d 2062    left_layer = b
-00017630: 6173 656d 6170 5f74 696c 6573 5b6c 6566  asemap_tiles[lef
-00017640: 745f 6c61 7965 725d 0d0a 0d0a 2020 2020  t_layer]....    
-00017650: 2020 2020 2020 2020 6966 2072 6967 6874          if right
-00017660: 5f6c 6179 6572 2069 6e20 6261 7365 6d61  _layer in basema
-00017670: 705f 7469 6c65 732e 6b65 7973 2829 3a0d  p_tiles.keys():.
-00017680: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00017690: 2072 6967 6874 5f6c 6179 6572 203d 2062   right_layer = b
-000176a0: 6173 656d 6170 5f74 696c 6573 5b72 6967  asemap_tiles[rig
-000176b0: 6874 5f6c 6179 6572 5d0d 0a0d 0a20 2020  ht_layer]....   
-000176c0: 2020 2020 2020 2020 2063 6f6e 7472 6f6c           control
-000176d0: 203d 2069 7079 6c65 6166 6c65 742e 5370   = ipyleaflet.Sp
-000176e0: 6c69 744d 6170 436f 6e74 726f 6c28 0d0a  litMapControl(..
-000176f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017700: 6c65 6674 5f6c 6179 6572 3d6c 6566 745f  left_layer=left_
-00017710: 6c61 7965 722c 2072 6967 6874 5f6c 6179  layer, right_lay
-00017720: 6572 3d72 6967 6874 5f6c 6179 6572 0d0a  er=right_layer..
-00017730: 2020 2020 2020 2020 2020 2020 290d 0a0d              )...
-00017740: 0a20 2020 2020 2020 2020 2020 2063 6c6f  .            clo
-00017750: 7365 5f62 7574 746f 6e20 3d20 7769 6467  se_button = widg
-00017760: 6574 732e 546f 6767 6c65 4275 7474 6f6e  ets.ToggleButton
-00017770: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
-00017780: 2020 2076 616c 7565 3d46 616c 7365 2c0d     value=False,.
-00017790: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000177a0: 2074 6f6f 6c74 6970 3d22 436c 6f73 6520   tooltip="Close 
-000177b0: 7370 6c69 742d 7061 6e65 6c20 6d61 7022  split-panel map"
-000177c0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-000177d0: 2020 2069 636f 6e3d 2274 696d 6573 222c     icon="times",
-000177e0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000177f0: 2020 6c61 796f 7574 3d77 6964 6765 7473    layout=widgets
-00017800: 2e4c 6179 6f75 7428 0d0a 2020 2020 2020  .Layout(..      
-00017810: 2020 2020 2020 2020 2020 2020 2020 6865                he
-00017820: 6967 6874 3d22 3238 7078 222c 2077 6964  ight="28px", wid
-00017830: 7468 3d22 3238 7078 222c 2070 6164 6469  th="28px", paddi
-00017840: 6e67 3d22 3070 7820 3070 7820 3070 7820  ng="0px 0px 0px 
-00017850: 3470 7822 0d0a 2020 2020 2020 2020 2020  4px"..          
-00017860: 2020 2020 2020 292c 0d0a 2020 2020 2020        ),..      
-00017870: 2020 2020 2020 290d 0a0d 0a20 2020 2020        )....     
-00017880: 2020 2020 2020 2064 6566 2063 6c6f 7365         def close
-00017890: 5f62 746e 5f63 6c69 636b 2863 6861 6e67  _btn_click(chang
-000178a0: 6529 3a0d 0a20 2020 2020 2020 2020 2020  e):..           
-000178b0: 2020 2020 2069 6620 6368 616e 6765 5b22       if change["
-000178c0: 6e65 7722 5d3a 0d0a 2020 2020 2020 2020  new"]:..        
-000178d0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-000178e0: 2e63 6f6e 7472 6f6c 7320 3d20 636f 6e74  .controls = cont
-000178f0: 726f 6c73 0d0a 2020 2020 2020 2020 2020  rols..          
-00017900: 2020 2020 2020 2020 2020 7365 6c66 2e6c            self.l
-00017910: 6179 6572 7320 3d20 6c61 7965 7273 5b3a  ayers = layers[:
-00017920: 2d31 5d0d 0a20 2020 2020 2020 2020 2020  -1]..           
-00017930: 2020 2020 2020 2020 2073 656c 662e 6164           self.ad
-00017940: 645f 6c61 7965 7228 6c61 7965 7273 5b2d  d_layer(layers[-
-00017950: 315d 290d 0a0d 0a20 2020 2020 2020 2020  1])....         
-00017960: 2020 2063 6c6f 7365 5f62 7574 746f 6e2e     close_button.
-00017970: 6f62 7365 7276 6528 636c 6f73 655f 6274  observe(close_bt
-00017980: 6e5f 636c 6963 6b2c 2022 7661 6c75 6522  n_click, "value"
-00017990: 290d 0a20 2020 2020 2020 2020 2020 2063  )..            c
-000179a0: 6c6f 7365 5f63 6f6e 7472 6f6c 203d 2069  lose_control = i
-000179b0: 7079 6c65 6166 6c65 742e 5769 6467 6574  pyleaflet.Widget
-000179c0: 436f 6e74 726f 6c28 0d0a 2020 2020 2020  Control(..      
-000179d0: 2020 2020 2020 2020 2020 7769 6467 6574            widget
-000179e0: 3d63 6c6f 7365 5f62 7574 746f 6e2c 2070  =close_button, p
-000179f0: 6f73 6974 696f 6e3d 2262 6f74 746f 6d72  osition="bottomr
-00017a00: 6967 6874 220d 0a20 2020 2020 2020 2020  ight"..         
-00017a10: 2020 2029 0d0a 0d0a 2020 2020 2020 2020     )....        
-00017a20: 2020 2020 7365 6c66 2e61 6464 5f63 6f6e      self.add_con
-00017a30: 7472 6f6c 2863 6f6e 7472 6f6c 290d 0a20  trol(control).. 
-00017a40: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00017a50: 6164 645f 636f 6e74 726f 6c28 636c 6f73  add_control(clos
-00017a60: 655f 636f 6e74 726f 6c29 0d0a 0d0a 2020  e_control)....  
-00017a70: 2020 2020 2020 6578 6365 7074 2045 7863        except Exc
-00017a80: 6570 7469 6f6e 2061 7320 653a 0d0a 2020  eption as e:..  
-00017a90: 2020 2020 2020 2020 2020 7072 696e 7428            print(
-00017aa0: 2254 6865 2070 726f 7669 6465 6420 6c61  "The provided la
-00017ab0: 7965 7273 2061 7265 2069 6e76 616c 6964  yers are invalid
-00017ac0: 2122 290d 0a20 2020 2020 2020 2020 2020  !")..           
-00017ad0: 2072 6169 7365 2056 616c 7565 4572 726f   raise ValueErro
-00017ae0: 7228 6529 0d0a 0d0a 2020 2020 6465 6620  r(e)....    def 
-00017af0: 7473 5f69 6e73 7065 6374 6f72 280d 0a20  ts_inspector(.. 
-00017b00: 2020 2020 2020 2073 656c 662c 0d0a 2020         self,..  
-00017b10: 2020 2020 2020 6c65 6674 5f74 732c 0d0a        left_ts,..
-00017b20: 2020 2020 2020 2020 7269 6768 745f 7473          right_ts
-00017b30: 2c0d 0a20 2020 2020 2020 206c 6566 745f  ,..        left_
-00017b40: 6e61 6d65 732c 0d0a 2020 2020 2020 2020  names,..        
-00017b50: 7269 6768 745f 6e61 6d65 732c 0d0a 2020  right_names,..  
-00017b60: 2020 2020 2020 6c65 6674 5f76 6973 3d7b        left_vis={
-00017b70: 7d2c 0d0a 2020 2020 2020 2020 7269 6768  },..        righ
-00017b80: 745f 7669 733d 7b7d 2c0d 0a20 2020 2020  t_vis={},..     
-00017b90: 2020 2077 6964 7468 3d22 3133 3070 7822     width="130px"
-00017ba0: 2c0d 0a20 2020 2020 2020 202a 2a6b 7761  ,..        **kwa
-00017bb0: 7267 732c 0d0a 2020 2020 293a 0d0a 2020  rgs,..    ):..  
-00017bc0: 2020 2020 2020 2222 2243 7265 6174 6573        """Creates
-00017bd0: 2061 2073 706c 6974 2d70 616e 656c 206d   a split-panel m
-00017be0: 6170 2066 6f72 2069 6e73 7065 6374 696e  ap for inspectin
-00017bf0: 6720 7469 6d65 7365 7269 6573 2069 6d61  g timeseries ima
-00017c00: 6765 732e 0d0a 0d0a 2020 2020 2020 2020  ges.....        
-00017c10: 4172 6773 3a0d 0a20 2020 2020 2020 2020  Args:..         
-00017c20: 2020 206c 6566 745f 7473 2028 6f62 6a65     left_ts (obje
-00017c30: 6374 293a 2041 6e20 6565 2e49 6d61 6765  ct): An ee.Image
-00017c40: 436f 6c6c 6563 7469 6f6e 2074 6f20 7368  Collection to sh
-00017c50: 6f77 206f 6e20 7468 6520 6c65 6674 2070  ow on the left p
-00017c60: 616e 656c 2e0d 0a20 2020 2020 2020 2020  anel...         
-00017c70: 2020 2072 6967 6874 5f74 7320 286f 626a     right_ts (obj
-00017c80: 6563 7429 3a20 416e 2065 652e 496d 6167  ect): An ee.Imag
-00017c90: 6543 6f6c 6c65 6374 696f 6e20 746f 2073  eCollection to s
-00017ca0: 686f 7720 6f6e 2074 6865 2072 6967 6874  how on the right
-00017cb0: 2070 616e 656c 2e0d 0a20 2020 2020 2020   panel...       
-00017cc0: 2020 2020 206c 6566 745f 6e61 6d65 7320       left_names 
-00017cd0: 286c 6973 7429 3a20 4120 6c69 7374 206f  (list): A list o
-00017ce0: 6620 6e61 6d65 7320 746f 2073 686f 7720  f names to show 
-00017cf0: 756e 6465 7220 7468 6520 6c65 6674 2064  under the left d
-00017d00: 726f 7064 6f77 6e2e 0d0a 2020 2020 2020  ropdown...      
-00017d10: 2020 2020 2020 7269 6768 745f 6e61 6d65        right_name
-00017d20: 7320 286c 6973 7429 3a20 4120 6c69 7374  s (list): A list
-00017d30: 206f 6620 6e61 6d65 7320 746f 2073 686f   of names to sho
-00017d40: 7720 756e 6465 7220 7468 6520 7269 6768  w under the righ
-00017d50: 7420 6472 6f70 646f 776e 2e0d 0a20 2020  t dropdown...   
-00017d60: 2020 2020 2020 2020 206c 6566 745f 7669           left_vi
-00017d70: 7320 2864 6963 742c 206f 7074 696f 6e61  s (dict, optiona
-00017d80: 6c29 3a20 5669 7375 616c 697a 6174 696f  l): Visualizatio
-00017d90: 6e20 7061 7261 6d65 7465 7273 2066 6f72  n parameters for
-00017da0: 2074 6865 206c 6566 7420 6c61 7965 722e   the left layer.
-00017db0: 2044 6566 6175 6c74 7320 746f 207b 7d2e   Defaults to {}.
-00017dc0: 0d0a 2020 2020 2020 2020 2020 2020 7269  ..            ri
-00017dd0: 6768 745f 7669 7320 2864 6963 742c 206f  ght_vis (dict, o
-00017de0: 7074 696f 6e61 6c29 3a20 5669 7375 616c  ptional): Visual
-00017df0: 697a 6174 696f 6e20 7061 7261 6d65 7465  ization paramete
-00017e00: 7273 2066 6f72 2074 6865 2072 6967 6874  rs for the right
-00017e10: 206c 6179 6572 2e20 4465 6661 756c 7473   layer. Defaults
-00017e20: 2074 6f20 7b7d 2e0d 0a20 2020 2020 2020   to {}...       
-00017e30: 2020 2020 2077 6964 7468 2028 7374 722c       width (str,
-00017e40: 206f 7074 696f 6e61 6c29 3a20 5468 6520   optional): The 
-00017e50: 7769 6474 6820 6f66 2074 6865 2064 726f  width of the dro
-00017e60: 7064 6f77 6e20 6c69 7374 2e20 4465 6661  pdown list. Defa
-00017e70: 756c 7473 2074 6f20 2731 3330 7078 272e  ults to '130px'.
-00017e80: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-00017e90: 2020 2020 2020 2063 6f6e 7472 6f6c 7320         controls 
-00017ea0: 3d20 7365 6c66 2e63 6f6e 7472 6f6c 730d  = self.controls.
-00017eb0: 0a20 2020 2020 2020 206c 6179 6572 7320  .        layers 
-00017ec0: 3d20 7365 6c66 2e6c 6179 6572 730d 0a0d  = self.layers...
-00017ed0: 0a20 2020 2020 2020 206c 6566 745f 636f  .        left_co
-00017ee0: 756e 7420 3d20 696e 7428 6c65 6674 5f74  unt = int(left_t
-00017ef0: 732e 7369 7a65 2829 2e67 6574 496e 666f  s.size().getInfo
-00017f00: 2829 290d 0a20 2020 2020 2020 2072 6967  ())..        rig
-00017f10: 6874 5f63 6f75 6e74 203d 2069 6e74 2872  ht_count = int(r
-00017f20: 6967 6874 5f74 732e 7369 7a65 2829 2e67  ight_ts.size().g
-00017f30: 6574 496e 666f 2829 290d 0a0d 0a20 2020  etInfo())....   
-00017f40: 2020 2020 2069 6620 6c65 6674 5f63 6f75       if left_cou
-00017f50: 6e74 2021 3d20 6c65 6e28 6c65 6674 5f6e  nt != len(left_n
-00017f60: 616d 6573 293a 0d0a 2020 2020 2020 2020  ames):..        
-00017f70: 2020 2020 7072 696e 7428 0d0a 2020 2020      print(..    
-00017f80: 2020 2020 2020 2020 2020 2020 2254 6865              "The
-00017f90: 206e 756d 6265 7220 6f66 2069 6d61 6765   number of image
-00017fa0: 7320 696e 206c 6566 745f 7473 206d 7573  s in left_ts mus
-00017fb0: 7420 6d61 7463 6820 7468 6520 6e75 6d62  t match the numb
-00017fc0: 6572 206f 6620 6c61 7965 7220 6e61 6d65  er of layer name
-00017fd0: 7320 696e 206c 6566 745f 6e61 6d65 732e  s in left_names.
-00017fe0: 220d 0a20 2020 2020 2020 2020 2020 2029  "..            )
-00017ff0: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
-00018000: 7475 726e 0d0a 2020 2020 2020 2020 6966  turn..        if
-00018010: 2072 6967 6874 5f63 6f75 6e74 2021 3d20   right_count != 
-00018020: 6c65 6e28 7269 6768 745f 6e61 6d65 7329  len(right_names)
-00018030: 3a0d 0a20 2020 2020 2020 2020 2020 2070  :..            p
-00018040: 7269 6e74 280d 0a20 2020 2020 2020 2020  rint(..         
-00018050: 2020 2020 2020 2022 5468 6520 6e75 6d62         "The numb
-00018060: 6572 206f 6620 696d 6167 6573 2069 6e20  er of images in 
-00018070: 7269 6768 745f 7473 206d 7573 7420 6d61  right_ts must ma
-00018080: 7463 6820 7468 6520 6e75 6d62 6572 206f  tch the number o
-00018090: 6620 6c61 7965 7220 6e61 6d65 7320 696e  f layer names in
-000180a0: 2072 6967 6874 5f6e 616d 6573 2e22 0d0a   right_names."..
-000180b0: 2020 2020 2020 2020 2020 2020 290d 0a20              ).. 
-000180c0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-000180d0: 6e0d 0a0d 0a20 2020 2020 2020 206c 6566  n....        lef
-000180e0: 745f 6c61 7965 7220 3d20 6970 796c 6561  t_layer = ipylea
-000180f0: 666c 6574 2e54 696c 654c 6179 6572 280d  flet.TileLayer(.
-00018100: 0a20 2020 2020 2020 2020 2020 2075 726c  .            url
-00018110: 3d22 6874 7470 733a 2f2f 6d74 312e 676f  ="https://mt1.go
-00018120: 6f67 6c65 2e63 6f6d 2f76 742f 6c79 7273  ogle.com/vt/lyrs
-00018130: 3d6d 2678 3d7b 787d 2679 3d7b 797d 267a  =m&x={x}&y={y}&z
-00018140: 3d7b 7a7d 222c 0d0a 2020 2020 2020 2020  ={z}",..        
-00018150: 2020 2020 6174 7472 6962 7574 696f 6e3d      attribution=
-00018160: 2247 6f6f 676c 6522 2c0d 0a20 2020 2020  "Google",..     
-00018170: 2020 2020 2020 206e 616d 653d 2247 6f6f         name="Goo
-00018180: 676c 6520 4d61 7073 222c 0d0a 2020 2020  gle Maps",..    
-00018190: 2020 2020 290d 0a20 2020 2020 2020 2072      )..        r
-000181a0: 6967 6874 5f6c 6179 6572 203d 2069 7079  ight_layer = ipy
-000181b0: 6c65 6166 6c65 742e 5469 6c65 4c61 7965  leaflet.TileLaye
-000181c0: 7228 0d0a 2020 2020 2020 2020 2020 2020  r(..            
-000181d0: 7572 6c3d 2268 7474 7073 3a2f 2f6d 7431  url="https://mt1
-000181e0: 2e67 6f6f 676c 652e 636f 6d2f 7674 2f6c  .google.com/vt/l
-000181f0: 7972 733d 6d26 783d 7b78 7d26 793d 7b79  yrs=m&x={x}&y={y
-00018200: 7d26 7a3d 7b7a 7d22 2c0d 0a20 2020 2020  }&z={z}",..     
-00018210: 2020 2020 2020 2061 7474 7269 6275 7469         attributi
-00018220: 6f6e 3d22 476f 6f67 6c65 222c 0d0a 2020  on="Google",..  
-00018230: 2020 2020 2020 2020 2020 6e61 6d65 3d22            name="
-00018240: 476f 6f67 6c65 204d 6170 7322 2c0d 0a20  Google Maps",.. 
-00018250: 2020 2020 2020 2029 0d0a 0d0a 2020 2020         )....    
-00018260: 2020 2020 7365 6c66 2e63 6c65 6172 5f63      self.clear_c
-00018270: 6f6e 7472 6f6c 7328 290d 0a20 2020 2020  ontrols()..     
-00018280: 2020 206c 6566 745f 6472 6f70 646f 776e     left_dropdown
-00018290: 203d 2077 6964 6765 7473 2e44 726f 7064   = widgets.Dropd
-000182a0: 6f77 6e28 6f70 7469 6f6e 733d 6c65 6674  own(options=left
-000182b0: 5f6e 616d 6573 2c20 7661 6c75 653d 4e6f  _names, value=No
-000182c0: 6e65 290d 0a20 2020 2020 2020 2072 6967  ne)..        rig
-000182d0: 6874 5f64 726f 7064 6f77 6e20 3d20 7769  ht_dropdown = wi
-000182e0: 6467 6574 732e 4472 6f70 646f 776e 286f  dgets.Dropdown(o
-000182f0: 7074 696f 6e73 3d72 6967 6874 5f6e 616d  ptions=right_nam
-00018300: 6573 2c20 7661 6c75 653d 4e6f 6e65 290d  es, value=None).
-00018310: 0a20 2020 2020 2020 206c 6566 745f 6472  .        left_dr
-00018320: 6f70 646f 776e 2e6c 6179 6f75 742e 6d61  opdown.layout.ma
-00018330: 785f 7769 6474 6820 3d20 7769 6474 680d  x_width = width.
-00018340: 0a20 2020 2020 2020 2072 6967 6874 5f64  .        right_d
-00018350: 726f 7064 6f77 6e2e 6c61 796f 7574 2e6d  ropdown.layout.m
-00018360: 6178 5f77 6964 7468 203d 2077 6964 7468  ax_width = width
-00018370: 0d0a 0d0a 2020 2020 2020 2020 6c65 6674  ....        left
-00018380: 5f63 6f6e 7472 6f6c 203d 2069 7079 6c65  _control = ipyle
-00018390: 6166 6c65 742e 5769 6467 6574 436f 6e74  aflet.WidgetCont
-000183a0: 726f 6c28 0d0a 2020 2020 2020 2020 2020  rol(..          
-000183b0: 2020 7769 6467 6574 3d6c 6566 745f 6472    widget=left_dr
-000183c0: 6f70 646f 776e 2c20 706f 7369 7469 6f6e  opdown, position
-000183d0: 3d22 746f 706c 6566 7422 0d0a 2020 2020  ="topleft"..    
-000183e0: 2020 2020 290d 0a20 2020 2020 2020 2072      )..        r
-000183f0: 6967 6874 5f63 6f6e 7472 6f6c 203d 2069  ight_control = i
-00018400: 7079 6c65 6166 6c65 742e 5769 6467 6574  pyleaflet.Widget
-00018410: 436f 6e74 726f 6c28 0d0a 2020 2020 2020  Control(..      
-00018420: 2020 2020 2020 7769 6467 6574 3d72 6967        widget=rig
-00018430: 6874 5f64 726f 7064 6f77 6e2c 2070 6f73  ht_dropdown, pos
-00018440: 6974 696f 6e3d 2274 6f70 7269 6768 7422  ition="topright"
-00018450: 0d0a 2020 2020 2020 2020 290d 0a0d 0a20  ..        ).... 
-00018460: 2020 2020 2020 2073 656c 662e 6164 645f         self.add_
-00018470: 636f 6e74 726f 6c28 636f 6e74 726f 6c3d  control(control=
-00018480: 6c65 6674 5f63 6f6e 7472 6f6c 290d 0a20  left_control).. 
-00018490: 2020 2020 2020 2073 656c 662e 6164 645f         self.add_
-000184a0: 636f 6e74 726f 6c28 636f 6e74 726f 6c3d  control(control=
-000184b0: 7269 6768 745f 636f 6e74 726f 6c29 0d0a  right_control)..
-000184c0: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
-000184d0: 6464 5f63 6f6e 7472 6f6c 2869 7079 6c65  dd_control(ipyle
-000184e0: 6166 6c65 742e 5a6f 6f6d 436f 6e74 726f  aflet.ZoomContro
-000184f0: 6c28 706f 7369 7469 6f6e 3d22 746f 706c  l(position="topl
-00018500: 6566 7422 2929 0d0a 2020 2020 2020 2020  eft"))..        
-00018510: 7365 6c66 2e61 6464 5f63 6f6e 7472 6f6c  self.add_control
-00018520: 2869 7079 6c65 6166 6c65 742e 5363 616c  (ipyleaflet.Scal
-00018530: 6543 6f6e 7472 6f6c 2870 6f73 6974 696f  eControl(positio
-00018540: 6e3d 2262 6f74 746f 6d6c 6566 7422 2929  n="bottomleft"))
-00018550: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
-00018560: 6464 5f63 6f6e 7472 6f6c 2869 7079 6c65  dd_control(ipyle
-00018570: 6166 6c65 742e 4675 6c6c 5363 7265 656e  aflet.FullScreen
-00018580: 436f 6e74 726f 6c28 2929 0d0a 0d0a 2020  Control())....  
-00018590: 2020 2020 2020 6465 6620 6c65 6674 5f64        def left_d
-000185a0: 726f 7064 6f77 6e5f 6368 616e 6765 2863  ropdown_change(c
-000185b0: 6861 6e67 6529 3a0d 0a20 2020 2020 2020  hange):..       
-000185c0: 2020 2020 206c 6566 745f 6472 6f70 646f       left_dropdo
-000185d0: 776e 5f69 6e64 6578 203d 206c 6566 745f  wn_index = left_
-000185e0: 6472 6f70 646f 776e 2e69 6e64 6578 0d0a  dropdown.index..
-000185f0: 2020 2020 2020 2020 2020 2020 6966 206c              if l
-00018600: 6566 745f 6472 6f70 646f 776e 5f69 6e64  eft_dropdown_ind
-00018610: 6578 2069 7320 6e6f 7420 4e6f 6e65 2061  ex is not None a
-00018620: 6e64 206c 6566 745f 6472 6f70 646f 776e  nd left_dropdown
-00018630: 5f69 6e64 6578 203e 3d20 303a 0d0a 2020  _index >= 0:..  
-00018640: 2020 2020 2020 2020 2020 2020 2020 7472                tr
-00018650: 793a 0d0a 2020 2020 2020 2020 2020 2020  y:..            
-00018660: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-00018670: 7461 6e63 6528 6c65 6674 5f74 732c 2065  tance(left_ts, e
-00018680: 652e 496d 6167 6543 6f6c 6c65 6374 696f  e.ImageCollectio
-00018690: 6e29 3a0d 0a20 2020 2020 2020 2020 2020  n):..           
-000186a0: 2020 2020 2020 2020 2020 2020 206c 6566               lef
-000186b0: 745f 696d 6167 6520 3d20 6c65 6674 5f74  t_image = left_t
-000186c0: 732e 746f 4c69 7374 286c 6566 745f 7473  s.toList(left_ts
-000186d0: 2e73 697a 6528 2929 2e67 6574 280d 0a20  .size()).get(.. 
-000186e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000186f0: 2020 2020 2020 2020 2020 206c 6566 745f             left_
-00018700: 6472 6f70 646f 776e 5f69 6e64 6578 0d0a  dropdown_index..
-00018710: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018720: 2020 2020 2020 2020 290d 0a20 2020 2020          )..     
-00018730: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00018740: 6c69 6620 6973 696e 7374 616e 6365 286c  lif isinstance(l
-00018750: 6566 745f 7473 2c20 6565 2e4c 6973 7429  eft_ts, ee.List)
-00018760: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00018770: 2020 2020 2020 2020 2020 206c 6566 745f             left_
-00018780: 696d 6167 6520 3d20 6c65 6674 5f74 732e  image = left_ts.
-00018790: 6765 7428 6c65 6674 5f64 726f 7064 6f77  get(left_dropdow
-000187a0: 6e5f 696e 6465 7829 0d0a 2020 2020 2020  n_index)..      
-000187b0: 2020 2020 2020 2020 2020 2020 2020 656c                el
-000187c0: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
-000187d0: 2020 2020 2020 2020 2020 2020 2070 7269               pri
-000187e0: 6e74 2822 5468 6520 6c65 6674 5f74 7320  nt("The left_ts 
-000187f0: 6172 6775 6d65 6e74 206d 7573 7420 6265  argument must be
-00018800: 2061 6e20 496d 6167 6543 6f6c 6c65 6374   an ImageCollect
-00018810: 696f 6e2e 2229 0d0a 2020 2020 2020 2020  ion.")..        
-00018820: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018830: 7265 7475 726e 0d0a 0d0a 2020 2020 2020  return....      
-00018840: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00018850: 2069 7369 6e73 7461 6e63 6528 6c65 6674   isinstance(left
-00018860: 5f69 6d61 6765 2c20 6565 2e49 6d61 6765  _image, ee.Image
-00018870: 436f 6c6c 6563 7469 6f6e 293a 0d0a 2020  Collection):..  
-00018880: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018890: 2020 2020 2020 6c65 6674 5f69 6d61 6765        left_image
-000188a0: 203d 2065 652e 496d 6167 6528 6c65 6674   = ee.Image(left
-000188b0: 5f69 6d61 6765 2e6d 6f73 6169 6328 2929  _image.mosaic())
-000188c0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000188d0: 2020 2020 2020 656c 6966 2069 7369 6e73        elif isins
-000188e0: 7461 6e63 6528 6c65 6674 5f69 6d61 6765  tance(left_image
-000188f0: 2c20 6565 2e49 6d61 6765 293a 0d0a 2020  , ee.Image):..  
-00018900: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018910: 2020 2020 2020 7061 7373 0d0a 2020 2020        pass..    
-00018920: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018930: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
-00018940: 2020 2020 2020 2020 2020 2020 2020 206c                 l
-00018950: 6566 745f 696d 6167 6520 3d20 6565 2e49  eft_image = ee.I
-00018960: 6d61 6765 286c 6566 745f 696d 6167 6529  mage(left_image)
-00018970: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00018980: 2020 2020 2020 2020 6c65 6674 5f69 6d61          left_ima
-00018990: 6765 203d 2065 655f 7469 6c65 5f6c 6179  ge = ee_tile_lay
-000189a0: 6572 280d 0a20 2020 2020 2020 2020 2020  er(..           
-000189b0: 2020 2020 2020 2020 2020 2020 206c 6566               lef
-000189c0: 745f 696d 6167 652c 206c 6566 745f 7669  t_image, left_vi
-000189d0: 732c 206c 6566 745f 6e61 6d65 735b 6c65  s, left_names[le
-000189e0: 6674 5f64 726f 7064 6f77 6e5f 696e 6465  ft_dropdown_inde
-000189f0: 785d 0d0a 2020 2020 2020 2020 2020 2020  x]..            
-00018a00: 2020 2020 2020 2020 290d 0a20 2020 2020          )..     
-00018a10: 2020 2020 2020 2020 2020 2020 2020 206c                 l
-00018a20: 6566 745f 6c61 7965 722e 7572 6c20 3d20  eft_layer.url = 
-00018a30: 6c65 6674 5f69 6d61 6765 2e75 726c 0d0a  left_image.url..
-00018a40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018a50: 6578 6365 7074 2045 7863 6570 7469 6f6e  except Exception
-00018a60: 2061 7320 653a 0d0a 2020 2020 2020 2020   as e:..        
-00018a70: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-00018a80: 7428 6529 0d0a 2020 2020 2020 2020 2020  t(e)..          
-00018a90: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00018aa0: 0d0a 0d0a 2020 2020 2020 2020 6c65 6674  ....        left
-00018ab0: 5f64 726f 7064 6f77 6e2e 6f62 7365 7276  _dropdown.observ
-00018ac0: 6528 6c65 6674 5f64 726f 7064 6f77 6e5f  e(left_dropdown_
-00018ad0: 6368 616e 6765 2c20 6e61 6d65 733d 2276  change, names="v
-00018ae0: 616c 7565 2229 0d0a 0d0a 2020 2020 2020  alue")....      
-00018af0: 2020 6465 6620 7269 6768 745f 6472 6f70    def right_drop
-00018b00: 646f 776e 5f63 6861 6e67 6528 6368 616e  down_change(chan
-00018b10: 6765 293a 0d0a 2020 2020 2020 2020 2020  ge):..          
-00018b20: 2020 7269 6768 745f 6472 6f70 646f 776e    right_dropdown
-00018b30: 5f69 6e64 6578 203d 2072 6967 6874 5f64  _index = right_d
-00018b40: 726f 7064 6f77 6e2e 696e 6465 780d 0a20  ropdown.index.. 
-00018b50: 2020 2020 2020 2020 2020 2069 6620 7269             if ri
-00018b60: 6768 745f 6472 6f70 646f 776e 5f69 6e64  ght_dropdown_ind
-00018b70: 6578 2069 7320 6e6f 7420 4e6f 6e65 2061  ex is not None a
-00018b80: 6e64 2072 6967 6874 5f64 726f 7064 6f77  nd right_dropdow
-00018b90: 6e5f 696e 6465 7820 3e3d 2030 3a0d 0a20  n_index >= 0:.. 
-00018ba0: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-00018bb0: 7279 3a0d 0a20 2020 2020 2020 2020 2020  ry:..           
-00018bc0: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
-00018bd0: 7374 616e 6365 2872 6967 6874 5f74 732c  stance(right_ts,
-00018be0: 2065 652e 496d 6167 6543 6f6c 6c65 6374   ee.ImageCollect
-00018bf0: 696f 6e29 3a0d 0a20 2020 2020 2020 2020  ion):..         
-00018c00: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00018c10: 6967 6874 5f69 6d61 6765 203d 2072 6967  ight_image = rig
-00018c20: 6874 5f74 732e 746f 4c69 7374 286c 6566  ht_ts.toList(lef
-00018c30: 745f 7473 2e73 697a 6528 2929 2e67 6574  t_ts.size()).get
-00018c40: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
-00018c50: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00018c60: 6967 6874 5f64 726f 7064 6f77 6e5f 696e  ight_dropdown_in
-00018c70: 6465 780d 0a20 2020 2020 2020 2020 2020  dex..           
-00018c80: 2020 2020 2020 2020 2020 2020 2029 0d0a               )..
-00018c90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018ca0: 2020 2020 656c 6966 2069 7369 6e73 7461      elif isinsta
-00018cb0: 6e63 6528 7269 6768 745f 7473 2c20 6565  nce(right_ts, ee
-00018cc0: 2e4c 6973 7429 3a0d 0a20 2020 2020 2020  .List):..       
+00017220: 6572 2074 6f20 746f 6767 6c65 206c 6179  er to toggle lay
+00017230: 6572 7320 6f6e 2f6f 6666 2e20 4465 6661  ers on/off. Defa
+00017240: 756c 7473 2074 6f20 5472 7565 2e0d 0a20  ults to True... 
+00017250: 2020 2020 2020 2020 2020 2066 756c 6c73             fulls
+00017260: 6372 6565 6e43 6f6e 7472 6f6c 2028 626f  creenControl (bo
+00017270: 6f6c 2c20 6f70 7469 6f6e 616c 293a 2057  ol, optional): W
+00017280: 6865 7468 6572 2074 6f20 7368 6f77 2074  hether to show t
+00017290: 6865 2063 6f6e 7472 6f6c 2074 6861 7420  he control that 
+000172a0: 616c 6c6f 7773 2074 6865 2075 7365 7220  allows the user 
+000172b0: 746f 206d 616b 6520 7468 6520 6d61 7020  to make the map 
+000172c0: 6675 6c6c 2d73 6372 6565 6e2e 2044 6566  full-screen. Def
+000172d0: 6175 6c74 7320 746f 2054 7275 652e 0d0a  aults to True...
+000172e0: 2020 2020 2020 2020 2020 2020 6c61 744c              latL
+000172f0: 6e67 506f 7075 7020 2862 6f6f 6c2c 206f  ngPopup (bool, o
+00017300: 7074 696f 6e61 6c29 3a20 5768 6574 6865  ptional): Whethe
+00017310: 7220 746f 2073 686f 7720 7468 6520 636f  r to show the co
+00017320: 6e74 726f 6c20 7468 6174 2070 6f70 7320  ntrol that pops 
+00017330: 7570 2074 6865 204c 6174 2f6c 6f6e 2077  up the Lat/lon w
+00017340: 6865 6e20 7468 6520 7573 6572 2063 6c69  hen the user cli
+00017350: 636b 7320 6f6e 2074 6865 206d 6170 2e20  cks on the map. 
+00017360: 4465 6661 756c 7473 2074 6f20 5472 7565  Defaults to True
+00017370: 2e0d 0a20 2020 2020 2020 2022 2222 0d0a  ...        """..
+00017380: 2020 2020 2020 2020 7061 7373 0d0a 0d0a          pass....
+00017390: 2020 2020 7365 7443 6f6e 7472 6f6c 5669      setControlVi
+000173a0: 7369 6269 6c69 7479 203d 2073 6574 5f63  sibility = set_c
+000173b0: 6f6e 7472 6f6c 5f76 6973 6962 696c 6974  ontrol_visibilit
+000173c0: 790d 0a0d 0a20 2020 2064 6566 2061 6464  y....    def add
+000173d0: 5f6c 6179 6572 5f63 6f6e 7472 6f6c 2873  _layer_control(s
+000173e0: 656c 6629 3a0d 0a20 2020 2020 2020 2022  elf):..        "
+000173f0: 2222 4164 6473 2074 6865 206c 6179 6572  ""Adds the layer
+00017400: 2063 6f6e 7472 6f6c 2074 6f20 7468 6520   control to the 
+00017410: 6d61 702e 2222 220d 0a20 2020 2020 2020  map."""..       
+00017420: 2070 6173 730d 0a0d 0a20 2020 2061 6464   pass....    add
+00017430: 4c61 7965 7243 6f6e 7472 6f6c 203d 2061  LayerControl = a
+00017440: 6464 5f6c 6179 6572 5f63 6f6e 7472 6f6c  dd_layer_control
+00017450: 0d0a 0d0a 2020 2020 6465 6620 7370 6c69  ....    def spli
+00017460: 745f 6d61 7028 7365 6c66 2c20 6c65 6674  t_map(self, left
+00017470: 5f6c 6179 6572 3d22 4859 4252 4944 222c  _layer="HYBRID",
+00017480: 2072 6967 6874 5f6c 6179 6572 3d22 4553   right_layer="ES
+00017490: 5249 2229 3a0d 0a20 2020 2020 2020 2022  RI"):..        "
+000174a0: 2222 4164 6473 2073 706c 6974 206d 6170  ""Adds split map
+000174b0: 2e0d 0a0d 0a20 2020 2020 2020 2041 7267  .....        Arg
+000174c0: 733a 0d0a 2020 2020 2020 2020 2020 2020  s:..            
+000174d0: 6c65 6674 5f6c 6179 6572 2028 7374 722c  left_layer (str,
+000174e0: 206f 7074 696f 6e61 6c29 3a20 5468 6520   optional): The 
+000174f0: 6c61 7965 7220 7469 6c65 206c 6179 6572  layer tile layer
+00017500: 2e20 4465 6661 756c 7473 2074 6f20 2748  . Defaults to 'H
+00017510: 5942 5249 4427 2e0d 0a20 2020 2020 2020  YBRID'...       
+00017520: 2020 2020 2072 6967 6874 5f6c 6179 6572       right_layer
+00017530: 2028 7374 722c 206f 7074 696f 6e61 6c29   (str, optional)
+00017540: 3a20 5468 6520 7269 6768 7420 7469 6c65  : The right tile
+00017550: 206c 6179 6572 2e20 4465 6661 756c 7473   layer. Defaults
+00017560: 2074 6f20 2745 5352 4927 2e0d 0a20 2020   to 'ESRI'...   
+00017570: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
+00017580: 2020 7472 793a 0d0a 2020 2020 2020 2020    try:..        
+00017590: 2020 2020 636f 6e74 726f 6c73 203d 2073      controls = s
+000175a0: 656c 662e 636f 6e74 726f 6c73 0d0a 2020  elf.controls..  
+000175b0: 2020 2020 2020 2020 2020 6c61 7965 7273            layers
+000175c0: 203d 2073 656c 662e 6c61 7965 7273 0d0a   = self.layers..
+000175d0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+000175e0: 2e63 6c65 6172 5f63 6f6e 7472 6f6c 7328  .clear_controls(
+000175f0: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+00017600: 2073 656c 662e 6164 645f 636f 6e74 726f   self.add_contro
+00017610: 6c28 6970 796c 6561 666c 6574 2e5a 6f6f  l(ipyleaflet.Zoo
+00017620: 6d43 6f6e 7472 6f6c 2829 290d 0a20 2020  mControl())..   
+00017630: 2020 2020 2020 2020 2073 656c 662e 6164           self.ad
+00017640: 645f 636f 6e74 726f 6c28 6970 796c 6561  d_control(ipylea
+00017650: 666c 6574 2e46 756c 6c53 6372 6565 6e43  flet.FullScreenC
+00017660: 6f6e 7472 6f6c 2829 290d 0a20 2020 2020  ontrol())..     
+00017670: 2020 2020 2020 2069 6620 6c65 6674 5f6c         if left_l
+00017680: 6179 6572 2069 6e20 6261 7365 6d61 705f  ayer in basemap_
+00017690: 7469 6c65 732e 6b65 7973 2829 3a0d 0a20  tiles.keys():.. 
+000176a0: 2020 2020 2020 2020 2020 2020 2020 206c                 l
+000176b0: 6566 745f 6c61 7965 7220 3d20 6261 7365  eft_layer = base
+000176c0: 6d61 705f 7469 6c65 735b 6c65 6674 5f6c  map_tiles[left_l
+000176d0: 6179 6572 5d0d 0a0d 0a20 2020 2020 2020  ayer]....       
+000176e0: 2020 2020 2069 6620 7269 6768 745f 6c61       if right_la
+000176f0: 7965 7220 696e 2062 6173 656d 6170 5f74  yer in basemap_t
+00017700: 696c 6573 2e6b 6579 7328 293a 0d0a 2020  iles.keys():..  
+00017710: 2020 2020 2020 2020 2020 2020 2020 7269                ri
+00017720: 6768 745f 6c61 7965 7220 3d20 6261 7365  ght_layer = base
+00017730: 6d61 705f 7469 6c65 735b 7269 6768 745f  map_tiles[right_
+00017740: 6c61 7965 725d 0d0a 0d0a 2020 2020 2020  layer]....      
+00017750: 2020 2020 2020 636f 6e74 726f 6c20 3d20        control = 
+00017760: 6970 796c 6561 666c 6574 2e53 706c 6974  ipyleaflet.Split
+00017770: 4d61 7043 6f6e 7472 6f6c 280d 0a20 2020  MapControl(..   
+00017780: 2020 2020 2020 2020 2020 2020 206c 6566               lef
+00017790: 745f 6c61 7965 723d 6c65 6674 5f6c 6179  t_layer=left_lay
+000177a0: 6572 2c20 7269 6768 745f 6c61 7965 723d  er, right_layer=
+000177b0: 7269 6768 745f 6c61 7965 720d 0a20 2020  right_layer..   
+000177c0: 2020 2020 2020 2020 2029 0d0a 0d0a 2020           )....  
+000177d0: 2020 2020 2020 2020 2020 636c 6f73 655f            close_
+000177e0: 6275 7474 6f6e 203d 2077 6964 6765 7473  button = widgets
+000177f0: 2e54 6f67 676c 6542 7574 746f 6e28 0d0a  .ToggleButton(..
+00017800: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017810: 7661 6c75 653d 4661 6c73 652c 0d0a 2020  value=False,..  
+00017820: 2020 2020 2020 2020 2020 2020 2020 746f                to
+00017830: 6f6c 7469 703d 2243 6c6f 7365 2073 706c  oltip="Close spl
+00017840: 6974 2d70 616e 656c 206d 6170 222c 0d0a  it-panel map",..
+00017850: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017860: 6963 6f6e 3d22 7469 6d65 7322 2c0d 0a20  icon="times",.. 
+00017870: 2020 2020 2020 2020 2020 2020 2020 206c                 l
+00017880: 6179 6f75 743d 7769 6467 6574 732e 4c61  ayout=widgets.La
+00017890: 796f 7574 280d 0a20 2020 2020 2020 2020  yout(..         
+000178a0: 2020 2020 2020 2020 2020 2068 6569 6768             heigh
+000178b0: 743d 2232 3870 7822 2c20 7769 6474 683d  t="28px", width=
+000178c0: 2232 3870 7822 2c20 7061 6464 696e 673d  "28px", padding=
+000178d0: 2230 7078 2030 7078 2030 7078 2034 7078  "0px 0px 0px 4px
+000178e0: 220d 0a20 2020 2020 2020 2020 2020 2020  "..             
+000178f0: 2020 2029 2c0d 0a20 2020 2020 2020 2020     ),..         
+00017900: 2020 2029 0d0a 0d0a 2020 2020 2020 2020     )....        
+00017910: 2020 2020 6465 6620 636c 6f73 655f 6274      def close_bt
+00017920: 6e5f 636c 6963 6b28 6368 616e 6765 293a  n_click(change):
+00017930: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00017940: 2020 6966 2063 6861 6e67 655b 226e 6577    if change["new
+00017950: 225d 3a0d 0a20 2020 2020 2020 2020 2020  "]:..           
+00017960: 2020 2020 2020 2020 2073 656c 662e 636f           self.co
+00017970: 6e74 726f 6c73 203d 2063 6f6e 7472 6f6c  ntrols = control
+00017980: 730d 0a20 2020 2020 2020 2020 2020 2020  s..             
+00017990: 2020 2020 2020 2073 656c 662e 6c61 7965         self.laye
+000179a0: 7273 203d 206c 6179 6572 735b 3a2d 315d  rs = layers[:-1]
+000179b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000179c0: 2020 2020 2020 7365 6c66 2e61 6464 5f6c        self.add_l
+000179d0: 6179 6572 286c 6179 6572 735b 2d31 5d29  ayer(layers[-1])
+000179e0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+000179f0: 636c 6f73 655f 6275 7474 6f6e 2e6f 6273  close_button.obs
+00017a00: 6572 7665 2863 6c6f 7365 5f62 746e 5f63  erve(close_btn_c
+00017a10: 6c69 636b 2c20 2276 616c 7565 2229 0d0a  lick, "value")..
+00017a20: 2020 2020 2020 2020 2020 2020 636c 6f73              clos
+00017a30: 655f 636f 6e74 726f 6c20 3d20 6970 796c  e_control = ipyl
+00017a40: 6561 666c 6574 2e57 6964 6765 7443 6f6e  eaflet.WidgetCon
+00017a50: 7472 6f6c 280d 0a20 2020 2020 2020 2020  trol(..         
+00017a60: 2020 2020 2020 2077 6964 6765 743d 636c         widget=cl
+00017a70: 6f73 655f 6275 7474 6f6e 2c20 706f 7369  ose_button, posi
+00017a80: 7469 6f6e 3d22 626f 7474 6f6d 7269 6768  tion="bottomrigh
+00017a90: 7422 0d0a 2020 2020 2020 2020 2020 2020  t"..            
+00017aa0: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+00017ab0: 2073 656c 662e 6164 645f 636f 6e74 726f   self.add_contro
+00017ac0: 6c28 636f 6e74 726f 6c29 0d0a 2020 2020  l(control)..    
+00017ad0: 2020 2020 2020 2020 7365 6c66 2e61 6464          self.add
+00017ae0: 5f63 6f6e 7472 6f6c 2863 6c6f 7365 5f63  _control(close_c
+00017af0: 6f6e 7472 6f6c 290d 0a0d 0a20 2020 2020  ontrol)....     
+00017b00: 2020 2065 7863 6570 7420 4578 6365 7074     except Except
+00017b10: 696f 6e20 6173 2065 3a0d 0a20 2020 2020  ion as e:..     
+00017b20: 2020 2020 2020 2070 7269 6e74 2822 5468         print("Th
+00017b30: 6520 7072 6f76 6964 6564 206c 6179 6572  e provided layer
+00017b40: 7320 6172 6520 696e 7661 6c69 6421 2229  s are invalid!")
+00017b50: 0d0a 2020 2020 2020 2020 2020 2020 7261  ..            ra
+00017b60: 6973 6520 5661 6c75 6545 7272 6f72 2865  ise ValueError(e
+00017b70: 290d 0a0d 0a20 2020 2064 6566 2074 735f  )....    def ts_
+00017b80: 696e 7370 6563 746f 7228 0d0a 2020 2020  inspector(..    
+00017b90: 2020 2020 7365 6c66 2c0d 0a20 2020 2020      self,..     
+00017ba0: 2020 206c 6566 745f 7473 2c0d 0a20 2020     left_ts,..   
+00017bb0: 2020 2020 2072 6967 6874 5f74 732c 0d0a       right_ts,..
+00017bc0: 2020 2020 2020 2020 6c65 6674 5f6e 616d          left_nam
+00017bd0: 6573 2c0d 0a20 2020 2020 2020 2072 6967  es,..        rig
+00017be0: 6874 5f6e 616d 6573 2c0d 0a20 2020 2020  ht_names,..     
+00017bf0: 2020 206c 6566 745f 7669 733d 7b7d 2c0d     left_vis={},.
+00017c00: 0a20 2020 2020 2020 2072 6967 6874 5f76  .        right_v
+00017c10: 6973 3d7b 7d2c 0d0a 2020 2020 2020 2020  is={},..        
+00017c20: 7769 6474 683d 2231 3330 7078 222c 0d0a  width="130px",..
+00017c30: 2020 2020 2020 2020 2a2a 6b77 6172 6773          **kwargs
+00017c40: 2c0d 0a20 2020 2029 3a0d 0a20 2020 2020  ,..    ):..     
+00017c50: 2020 2022 2222 4372 6561 7465 7320 6120     """Creates a 
+00017c60: 7370 6c69 742d 7061 6e65 6c20 6d61 7020  split-panel map 
+00017c70: 666f 7220 696e 7370 6563 7469 6e67 2074  for inspecting t
+00017c80: 696d 6573 6572 6965 7320 696d 6167 6573  imeseries images
+00017c90: 2e0d 0a0d 0a20 2020 2020 2020 2041 7267  .....        Arg
+00017ca0: 733a 0d0a 2020 2020 2020 2020 2020 2020  s:..            
+00017cb0: 6c65 6674 5f74 7320 286f 626a 6563 7429  left_ts (object)
+00017cc0: 3a20 416e 2065 652e 496d 6167 6543 6f6c  : An ee.ImageCol
+00017cd0: 6c65 6374 696f 6e20 746f 2073 686f 7720  lection to show 
+00017ce0: 6f6e 2074 6865 206c 6566 7420 7061 6e65  on the left pane
+00017cf0: 6c2e 0d0a 2020 2020 2020 2020 2020 2020  l...            
+00017d00: 7269 6768 745f 7473 2028 6f62 6a65 6374  right_ts (object
+00017d10: 293a 2041 6e20 6565 2e49 6d61 6765 436f  ): An ee.ImageCo
+00017d20: 6c6c 6563 7469 6f6e 2074 6f20 7368 6f77  llection to show
+00017d30: 206f 6e20 7468 6520 7269 6768 7420 7061   on the right pa
+00017d40: 6e65 6c2e 0d0a 2020 2020 2020 2020 2020  nel...          
+00017d50: 2020 6c65 6674 5f6e 616d 6573 2028 6c69    left_names (li
+00017d60: 7374 293a 2041 206c 6973 7420 6f66 206e  st): A list of n
+00017d70: 616d 6573 2074 6f20 7368 6f77 2075 6e64  ames to show und
+00017d80: 6572 2074 6865 206c 6566 7420 6472 6f70  er the left drop
+00017d90: 646f 776e 2e0d 0a20 2020 2020 2020 2020  down...         
+00017da0: 2020 2072 6967 6874 5f6e 616d 6573 2028     right_names (
+00017db0: 6c69 7374 293a 2041 206c 6973 7420 6f66  list): A list of
+00017dc0: 206e 616d 6573 2074 6f20 7368 6f77 2075   names to show u
+00017dd0: 6e64 6572 2074 6865 2072 6967 6874 2064  nder the right d
+00017de0: 726f 7064 6f77 6e2e 0d0a 2020 2020 2020  ropdown...      
+00017df0: 2020 2020 2020 6c65 6674 5f76 6973 2028        left_vis (
+00017e00: 6469 6374 2c20 6f70 7469 6f6e 616c 293a  dict, optional):
+00017e10: 2056 6973 7561 6c69 7a61 7469 6f6e 2070   Visualization p
+00017e20: 6172 616d 6574 6572 7320 666f 7220 7468  arameters for th
+00017e30: 6520 6c65 6674 206c 6179 6572 2e20 4465  e left layer. De
+00017e40: 6661 756c 7473 2074 6f20 7b7d 2e0d 0a20  faults to {}... 
+00017e50: 2020 2020 2020 2020 2020 2072 6967 6874             right
+00017e60: 5f76 6973 2028 6469 6374 2c20 6f70 7469  _vis (dict, opti
+00017e70: 6f6e 616c 293a 2056 6973 7561 6c69 7a61  onal): Visualiza
+00017e80: 7469 6f6e 2070 6172 616d 6574 6572 7320  tion parameters 
+00017e90: 666f 7220 7468 6520 7269 6768 7420 6c61  for the right la
+00017ea0: 7965 722e 2044 6566 6175 6c74 7320 746f  yer. Defaults to
+00017eb0: 207b 7d2e 0d0a 2020 2020 2020 2020 2020   {}...          
+00017ec0: 2020 7769 6474 6820 2873 7472 2c20 6f70    width (str, op
+00017ed0: 7469 6f6e 616c 293a 2054 6865 2077 6964  tional): The wid
+00017ee0: 7468 206f 6620 7468 6520 6472 6f70 646f  th of the dropdo
+00017ef0: 776e 206c 6973 742e 2044 6566 6175 6c74  wn list. Default
+00017f00: 7320 746f 2027 3133 3070 7827 2e0d 0a20  s to '130px'... 
+00017f10: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
+00017f20: 2020 2020 636f 6e74 726f 6c73 203d 2073      controls = s
+00017f30: 656c 662e 636f 6e74 726f 6c73 0d0a 2020  elf.controls..  
+00017f40: 2020 2020 2020 6c61 7965 7273 203d 2073        layers = s
+00017f50: 656c 662e 6c61 7965 7273 0d0a 0d0a 2020  elf.layers....  
+00017f60: 2020 2020 2020 6c65 6674 5f63 6f75 6e74        left_count
+00017f70: 203d 2069 6e74 286c 6566 745f 7473 2e73   = int(left_ts.s
+00017f80: 697a 6528 292e 6765 7449 6e66 6f28 2929  ize().getInfo())
+00017f90: 0d0a 2020 2020 2020 2020 7269 6768 745f  ..        right_
+00017fa0: 636f 756e 7420 3d20 696e 7428 7269 6768  count = int(righ
+00017fb0: 745f 7473 2e73 697a 6528 292e 6765 7449  t_ts.size().getI
+00017fc0: 6e66 6f28 2929 0d0a 0d0a 2020 2020 2020  nfo())....      
+00017fd0: 2020 6966 206c 6566 745f 636f 756e 7420    if left_count 
+00017fe0: 213d 206c 656e 286c 6566 745f 6e61 6d65  != len(left_name
+00017ff0: 7329 3a0d 0a20 2020 2020 2020 2020 2020  s):..           
+00018000: 2070 7269 6e74 280d 0a20 2020 2020 2020   print(..       
+00018010: 2020 2020 2020 2020 2022 5468 6520 6e75           "The nu
+00018020: 6d62 6572 206f 6620 696d 6167 6573 2069  mber of images i
+00018030: 6e20 6c65 6674 5f74 7320 6d75 7374 206d  n left_ts must m
+00018040: 6174 6368 2074 6865 206e 756d 6265 7220  atch the number 
+00018050: 6f66 206c 6179 6572 206e 616d 6573 2069  of layer names i
+00018060: 6e20 6c65 6674 5f6e 616d 6573 2e22 0d0a  n left_names."..
+00018070: 2020 2020 2020 2020 2020 2020 290d 0a20              ).. 
+00018080: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00018090: 6e0d 0a20 2020 2020 2020 2069 6620 7269  n..        if ri
+000180a0: 6768 745f 636f 756e 7420 213d 206c 656e  ght_count != len
+000180b0: 2872 6967 6874 5f6e 616d 6573 293a 0d0a  (right_names):..
+000180c0: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+000180d0: 7428 0d0a 2020 2020 2020 2020 2020 2020  t(..            
+000180e0: 2020 2020 2254 6865 206e 756d 6265 7220      "The number 
+000180f0: 6f66 2069 6d61 6765 7320 696e 2072 6967  of images in rig
+00018100: 6874 5f74 7320 6d75 7374 206d 6174 6368  ht_ts must match
+00018110: 2074 6865 206e 756d 6265 7220 6f66 206c   the number of l
+00018120: 6179 6572 206e 616d 6573 2069 6e20 7269  ayer names in ri
+00018130: 6768 745f 6e61 6d65 732e 220d 0a20 2020  ght_names."..   
+00018140: 2020 2020 2020 2020 2029 0d0a 2020 2020           )..    
+00018150: 2020 2020 2020 2020 7265 7475 726e 0d0a          return..
+00018160: 0d0a 2020 2020 2020 2020 6c65 6674 5f6c  ..        left_l
+00018170: 6179 6572 203d 2069 7079 6c65 6166 6c65  ayer = ipyleafle
+00018180: 742e 5469 6c65 4c61 7965 7228 0d0a 2020  t.TileLayer(..  
+00018190: 2020 2020 2020 2020 2020 7572 6c3d 2268            url="h
+000181a0: 7474 7073 3a2f 2f6d 7431 2e67 6f6f 676c  ttps://mt1.googl
+000181b0: 652e 636f 6d2f 7674 2f6c 7972 733d 6d26  e.com/vt/lyrs=m&
+000181c0: 783d 7b78 7d26 793d 7b79 7d26 7a3d 7b7a  x={x}&y={y}&z={z
+000181d0: 7d22 2c0d 0a20 2020 2020 2020 2020 2020  }",..           
+000181e0: 2061 7474 7269 6275 7469 6f6e 3d22 476f   attribution="Go
+000181f0: 6f67 6c65 222c 0d0a 2020 2020 2020 2020  ogle",..        
+00018200: 2020 2020 6e61 6d65 3d22 476f 6f67 6c65      name="Google
+00018210: 204d 6170 7322 2c0d 0a20 2020 2020 2020   Maps",..       
+00018220: 2029 0d0a 2020 2020 2020 2020 7269 6768   )..        righ
+00018230: 745f 6c61 7965 7220 3d20 6970 796c 6561  t_layer = ipylea
+00018240: 666c 6574 2e54 696c 654c 6179 6572 280d  flet.TileLayer(.
+00018250: 0a20 2020 2020 2020 2020 2020 2075 726c  .            url
+00018260: 3d22 6874 7470 733a 2f2f 6d74 312e 676f  ="https://mt1.go
+00018270: 6f67 6c65 2e63 6f6d 2f76 742f 6c79 7273  ogle.com/vt/lyrs
+00018280: 3d6d 2678 3d7b 787d 2679 3d7b 797d 267a  =m&x={x}&y={y}&z
+00018290: 3d7b 7a7d 222c 0d0a 2020 2020 2020 2020  ={z}",..        
+000182a0: 2020 2020 6174 7472 6962 7574 696f 6e3d      attribution=
+000182b0: 2247 6f6f 676c 6522 2c0d 0a20 2020 2020  "Google",..     
+000182c0: 2020 2020 2020 206e 616d 653d 2247 6f6f         name="Goo
+000182d0: 676c 6520 4d61 7073 222c 0d0a 2020 2020  gle Maps",..    
+000182e0: 2020 2020 290d 0a0d 0a20 2020 2020 2020      )....       
+000182f0: 2073 656c 662e 636c 6561 725f 636f 6e74   self.clear_cont
+00018300: 726f 6c73 2829 0d0a 2020 2020 2020 2020  rols()..        
+00018310: 6c65 6674 5f64 726f 7064 6f77 6e20 3d20  left_dropdown = 
+00018320: 7769 6467 6574 732e 4472 6f70 646f 776e  widgets.Dropdown
+00018330: 286f 7074 696f 6e73 3d6c 6566 745f 6e61  (options=left_na
+00018340: 6d65 732c 2076 616c 7565 3d4e 6f6e 6529  mes, value=None)
+00018350: 0d0a 2020 2020 2020 2020 7269 6768 745f  ..        right_
+00018360: 6472 6f70 646f 776e 203d 2077 6964 6765  dropdown = widge
+00018370: 7473 2e44 726f 7064 6f77 6e28 6f70 7469  ts.Dropdown(opti
+00018380: 6f6e 733d 7269 6768 745f 6e61 6d65 732c  ons=right_names,
+00018390: 2076 616c 7565 3d4e 6f6e 6529 0d0a 2020   value=None)..  
+000183a0: 2020 2020 2020 6c65 6674 5f64 726f 7064        left_dropd
+000183b0: 6f77 6e2e 6c61 796f 7574 2e6d 6178 5f77  own.layout.max_w
+000183c0: 6964 7468 203d 2077 6964 7468 0d0a 2020  idth = width..  
+000183d0: 2020 2020 2020 7269 6768 745f 6472 6f70        right_drop
+000183e0: 646f 776e 2e6c 6179 6f75 742e 6d61 785f  down.layout.max_
+000183f0: 7769 6474 6820 3d20 7769 6474 680d 0a0d  width = width...
+00018400: 0a20 2020 2020 2020 206c 6566 745f 636f  .        left_co
+00018410: 6e74 726f 6c20 3d20 6970 796c 6561 666c  ntrol = ipyleafl
+00018420: 6574 2e57 6964 6765 7443 6f6e 7472 6f6c  et.WidgetControl
+00018430: 280d 0a20 2020 2020 2020 2020 2020 2077  (..            w
+00018440: 6964 6765 743d 6c65 6674 5f64 726f 7064  idget=left_dropd
+00018450: 6f77 6e2c 2070 6f73 6974 696f 6e3d 2274  own, position="t
+00018460: 6f70 6c65 6674 220d 0a20 2020 2020 2020  opleft"..       
+00018470: 2029 0d0a 2020 2020 2020 2020 7269 6768   )..        righ
+00018480: 745f 636f 6e74 726f 6c20 3d20 6970 796c  t_control = ipyl
+00018490: 6561 666c 6574 2e57 6964 6765 7443 6f6e  eaflet.WidgetCon
+000184a0: 7472 6f6c 280d 0a20 2020 2020 2020 2020  trol(..         
+000184b0: 2020 2077 6964 6765 743d 7269 6768 745f     widget=right_
+000184c0: 6472 6f70 646f 776e 2c20 706f 7369 7469  dropdown, positi
+000184d0: 6f6e 3d22 746f 7072 6967 6874 220d 0a20  on="topright".. 
+000184e0: 2020 2020 2020 2029 0d0a 0d0a 2020 2020         )....    
+000184f0: 2020 2020 7365 6c66 2e61 6464 5f63 6f6e      self.add_con
+00018500: 7472 6f6c 2863 6f6e 7472 6f6c 3d6c 6566  trol(control=lef
+00018510: 745f 636f 6e74 726f 6c29 0d0a 2020 2020  t_control)..    
+00018520: 2020 2020 7365 6c66 2e61 6464 5f63 6f6e      self.add_con
+00018530: 7472 6f6c 2863 6f6e 7472 6f6c 3d72 6967  trol(control=rig
+00018540: 6874 5f63 6f6e 7472 6f6c 290d 0a0d 0a20  ht_control).... 
+00018550: 2020 2020 2020 2073 656c 662e 6164 645f         self.add_
+00018560: 636f 6e74 726f 6c28 6970 796c 6561 666c  control(ipyleafl
+00018570: 6574 2e5a 6f6f 6d43 6f6e 7472 6f6c 2870  et.ZoomControl(p
+00018580: 6f73 6974 696f 6e3d 2274 6f70 6c65 6674  osition="topleft
+00018590: 2229 290d 0a20 2020 2020 2020 2073 656c  "))..        sel
+000185a0: 662e 6164 645f 636f 6e74 726f 6c28 6970  f.add_control(ip
+000185b0: 796c 6561 666c 6574 2e53 6361 6c65 436f  yleaflet.ScaleCo
+000185c0: 6e74 726f 6c28 706f 7369 7469 6f6e 3d22  ntrol(position="
+000185d0: 626f 7474 6f6d 6c65 6674 2229 290d 0a20  bottomleft")).. 
+000185e0: 2020 2020 2020 2073 656c 662e 6164 645f         self.add_
+000185f0: 636f 6e74 726f 6c28 6970 796c 6561 666c  control(ipyleafl
+00018600: 6574 2e46 756c 6c53 6372 6565 6e43 6f6e  et.FullScreenCon
+00018610: 7472 6f6c 2829 290d 0a0d 0a20 2020 2020  trol())....     
+00018620: 2020 2064 6566 206c 6566 745f 6472 6f70     def left_drop
+00018630: 646f 776e 5f63 6861 6e67 6528 6368 616e  down_change(chan
+00018640: 6765 293a 0d0a 2020 2020 2020 2020 2020  ge):..          
+00018650: 2020 6c65 6674 5f64 726f 7064 6f77 6e5f    left_dropdown_
+00018660: 696e 6465 7820 3d20 6c65 6674 5f64 726f  index = left_dro
+00018670: 7064 6f77 6e2e 696e 6465 780d 0a20 2020  pdown.index..   
+00018680: 2020 2020 2020 2020 2069 6620 6c65 6674           if left
+00018690: 5f64 726f 7064 6f77 6e5f 696e 6465 7820  _dropdown_index 
+000186a0: 6973 206e 6f74 204e 6f6e 6520 616e 6420  is not None and 
+000186b0: 6c65 6674 5f64 726f 7064 6f77 6e5f 696e  left_dropdown_in
+000186c0: 6465 7820 3e3d 2030 3a0d 0a20 2020 2020  dex >= 0:..     
+000186d0: 2020 2020 2020 2020 2020 2074 7279 3a0d             try:.
+000186e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000186f0: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
+00018700: 6365 286c 6566 745f 7473 2c20 6565 2e49  ce(left_ts, ee.I
+00018710: 6d61 6765 436f 6c6c 6563 7469 6f6e 293a  mageCollection):
+00018720: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00018730: 2020 2020 2020 2020 2020 6c65 6674 5f69            left_i
+00018740: 6d61 6765 203d 206c 6566 745f 7473 2e74  mage = left_ts.t
+00018750: 6f4c 6973 7428 6c65 6674 5f74 732e 7369  oList(left_ts.si
+00018760: 7a65 2829 292e 6765 7428 0d0a 2020 2020  ze()).get(..    
+00018770: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018780: 2020 2020 2020 2020 6c65 6674 5f64 726f          left_dro
+00018790: 7064 6f77 6e5f 696e 6465 780d 0a20 2020  pdown_index..   
+000187a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000187b0: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
+000187c0: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+000187d0: 2069 7369 6e73 7461 6e63 6528 6c65 6674   isinstance(left
+000187e0: 5f74 732c 2065 652e 4c69 7374 293a 0d0a  _ts, ee.List):..
+000187f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018800: 2020 2020 2020 2020 6c65 6674 5f69 6d61          left_ima
+00018810: 6765 203d 206c 6566 745f 7473 2e67 6574  ge = left_ts.get
+00018820: 286c 6566 745f 6472 6f70 646f 776e 5f69  (left_dropdown_i
+00018830: 6e64 6578 290d 0a20 2020 2020 2020 2020  ndex)..         
+00018840: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00018850: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00018860: 2020 2020 2020 2020 2020 7072 696e 7428            print(
+00018870: 2254 6865 206c 6566 745f 7473 2061 7267  "The left_ts arg
+00018880: 756d 656e 7420 6d75 7374 2062 6520 616e  ument must be an
+00018890: 2049 6d61 6765 436f 6c6c 6563 7469 6f6e   ImageCollection
+000188a0: 2e22 290d 0a20 2020 2020 2020 2020 2020  .")..           
+000188b0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+000188c0: 7572 6e0d 0a0d 0a20 2020 2020 2020 2020  urn....         
+000188d0: 2020 2020 2020 2020 2020 2069 6620 6973             if is
+000188e0: 696e 7374 616e 6365 286c 6566 745f 696d  instance(left_im
+000188f0: 6167 652c 2065 652e 496d 6167 6543 6f6c  age, ee.ImageCol
+00018900: 6c65 6374 696f 6e29 3a0d 0a20 2020 2020  lection):..     
+00018910: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018920: 2020 206c 6566 745f 696d 6167 6520 3d20     left_image = 
+00018930: 6565 2e49 6d61 6765 286c 6566 745f 696d  ee.Image(left_im
+00018940: 6167 652e 6d6f 7361 6963 2829 290d 0a20  age.mosaic()).. 
+00018950: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018960: 2020 2065 6c69 6620 6973 696e 7374 616e     elif isinstan
+00018970: 6365 286c 6566 745f 696d 6167 652c 2065  ce(left_image, e
+00018980: 652e 496d 6167 6529 3a0d 0a20 2020 2020  e.Image):..     
+00018990: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000189a0: 2020 2070 6173 730d 0a20 2020 2020 2020     pass..       
+000189b0: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+000189c0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+000189d0: 2020 2020 2020 2020 2020 2020 6c65 6674              left
+000189e0: 5f69 6d61 6765 203d 2065 652e 496d 6167  _image = ee.Imag
+000189f0: 6528 6c65 6674 5f69 6d61 6765 290d 0a0d  e(left_image)...
+00018a00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00018a10: 2020 2020 206c 6566 745f 696d 6167 6520       left_image 
+00018a20: 3d20 6565 5f74 696c 655f 6c61 7965 7228  = ee_tile_layer(
+00018a30: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00018a40: 2020 2020 2020 2020 2020 6c65 6674 5f69            left_i
+00018a50: 6d61 6765 2c20 6c65 6674 5f76 6973 2c20  mage, left_vis, 
+00018a60: 6c65 6674 5f6e 616d 6573 5b6c 6566 745f  left_names[left_
+00018a70: 6472 6f70 646f 776e 5f69 6e64 6578 5d0d  dropdown_index].
+00018a80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00018a90: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
+00018aa0: 2020 2020 2020 2020 2020 2020 6c65 6674              left
+00018ab0: 5f6c 6179 6572 2e75 726c 203d 206c 6566  _layer.url = lef
+00018ac0: 745f 696d 6167 652e 7572 6c0d 0a20 2020  t_image.url..   
+00018ad0: 2020 2020 2020 2020 2020 2020 2065 7863               exc
+00018ae0: 6570 7420 4578 6365 7074 696f 6e20 6173  ept Exception as
+00018af0: 2065 3a0d 0a20 2020 2020 2020 2020 2020   e:..           
+00018b00: 2020 2020 2020 2020 2070 7269 6e74 2865           print(e
+00018b10: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00018b20: 2020 2020 2020 2072 6574 7572 6e0d 0a0d         return...
+00018b30: 0a20 2020 2020 2020 206c 6566 745f 6472  .        left_dr
+00018b40: 6f70 646f 776e 2e6f 6273 6572 7665 286c  opdown.observe(l
+00018b50: 6566 745f 6472 6f70 646f 776e 5f63 6861  eft_dropdown_cha
+00018b60: 6e67 652c 206e 616d 6573 3d22 7661 6c75  nge, names="valu
+00018b70: 6522 290d 0a0d 0a20 2020 2020 2020 2064  e")....        d
+00018b80: 6566 2072 6967 6874 5f64 726f 7064 6f77  ef right_dropdow
+00018b90: 6e5f 6368 616e 6765 2863 6861 6e67 6529  n_change(change)
+00018ba0: 3a0d 0a20 2020 2020 2020 2020 2020 2072  :..            r
+00018bb0: 6967 6874 5f64 726f 7064 6f77 6e5f 696e  ight_dropdown_in
+00018bc0: 6465 7820 3d20 7269 6768 745f 6472 6f70  dex = right_drop
+00018bd0: 646f 776e 2e69 6e64 6578 0d0a 2020 2020  down.index..    
+00018be0: 2020 2020 2020 2020 6966 2072 6967 6874          if right
+00018bf0: 5f64 726f 7064 6f77 6e5f 696e 6465 7820  _dropdown_index 
+00018c00: 6973 206e 6f74 204e 6f6e 6520 616e 6420  is not None and 
+00018c10: 7269 6768 745f 6472 6f70 646f 776e 5f69  right_dropdown_i
+00018c20: 6e64 6578 203e 3d20 303a 0d0a 2020 2020  ndex >= 0:..    
+00018c30: 2020 2020 2020 2020 2020 2020 7472 793a              try:
+00018c40: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00018c50: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
+00018c60: 6e63 6528 7269 6768 745f 7473 2c20 6565  nce(right_ts, ee
+00018c70: 2e49 6d61 6765 436f 6c6c 6563 7469 6f6e  .ImageCollection
+00018c80: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+00018c90: 2020 2020 2020 2020 2020 2020 7269 6768              righ
+00018ca0: 745f 696d 6167 6520 3d20 7269 6768 745f  t_image = right_
+00018cb0: 7473 2e74 6f4c 6973 7428 6c65 6674 5f74  ts.toList(left_t
+00018cc0: 732e 7369 7a65 2829 292e 6765 7428 0d0a  s.size()).get(..
 00018cd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018ce0: 2072 6967 6874 5f69 6d61 6765 203d 2072   right_image = r
-00018cf0: 6967 6874 5f74 732e 6765 7428 7269 6768  ight_ts.get(righ
-00018d00: 745f 6472 6f70 646f 776e 5f69 6e64 6578  t_dropdown_index
-00018d10: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-00018d20: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
-00018d30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018d40: 2020 2020 2020 7072 696e 7428 2254 6865        print("The
-00018d50: 206c 6566 745f 7473 2061 7267 756d 656e   left_ts argumen
-00018d60: 7420 6d75 7374 2062 6520 616e 2049 6d61  t must be an Ima
-00018d70: 6765 436f 6c6c 6563 7469 6f6e 2e22 290d  geCollection.").
-00018d80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00018d90: 2020 2020 2020 2020 2072 6574 7572 6e0d           return.
-00018da0: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-00018db0: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-00018dc0: 616e 6365 2872 6967 6874 5f69 6d61 6765  ance(right_image
-00018dd0: 2c20 6565 2e49 6d61 6765 436f 6c6c 6563  , ee.ImageCollec
-00018de0: 7469 6f6e 293a 0d0a 2020 2020 2020 2020  tion):..        
-00018df0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018e00: 7269 6768 745f 696d 6167 6520 3d20 6565  right_image = ee
-00018e10: 2e49 6d61 6765 2872 6967 6874 5f69 6d61  .Image(right_ima
-00018e20: 6765 2e6d 6f73 6169 6328 2929 0d0a 2020  ge.mosaic())..  
+00018ce0: 2020 2020 2020 2020 2020 2020 7269 6768              righ
+00018cf0: 745f 6472 6f70 646f 776e 5f69 6e64 6578  t_dropdown_index
+00018d00: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00018d10: 2020 2020 2020 2020 2020 290d 0a20 2020            )..   
+00018d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018d30: 2065 6c69 6620 6973 696e 7374 616e 6365   elif isinstance
+00018d40: 2872 6967 6874 5f74 732c 2065 652e 4c69  (right_ts, ee.Li
+00018d50: 7374 293a 0d0a 2020 2020 2020 2020 2020  st):..          
+00018d60: 2020 2020 2020 2020 2020 2020 2020 7269                ri
+00018d70: 6768 745f 696d 6167 6520 3d20 7269 6768  ght_image = righ
+00018d80: 745f 7473 2e67 6574 2872 6967 6874 5f64  t_ts.get(right_d
+00018d90: 726f 7064 6f77 6e5f 696e 6465 7829 0d0a  ropdown_index)..
+00018da0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018db0: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
+00018dc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018dd0: 2020 2070 7269 6e74 2822 5468 6520 6c65     print("The le
+00018de0: 6674 5f74 7320 6172 6775 6d65 6e74 206d  ft_ts argument m
+00018df0: 7573 7420 6265 2061 6e20 496d 6167 6543  ust be an ImageC
+00018e00: 6f6c 6c65 6374 696f 6e2e 2229 0d0a 2020  ollection.")..  
+00018e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018e20: 2020 2020 2020 7265 7475 726e 0d0a 0d0a        return....
 00018e30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018e40: 2020 656c 6966 2069 7369 6e73 7461 6e63    elif isinstanc
+00018e40: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
 00018e50: 6528 7269 6768 745f 696d 6167 652c 2065  e(right_image, e
-00018e60: 652e 496d 6167 6529 3a0d 0a20 2020 2020  e.Image):..     
-00018e70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018e80: 2020 2070 6173 730d 0a20 2020 2020 2020     pass..       
-00018e90: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-00018ea0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-00018eb0: 2020 2020 2020 2020 2020 2020 7269 6768              righ
-00018ec0: 745f 696d 6167 6520 3d20 6565 2e49 6d61  t_image = ee.Ima
-00018ed0: 6765 2872 6967 6874 5f69 6d61 6765 290d  ge(right_image).
-00018ee0: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-00018ef0: 2020 2020 2020 2072 6967 6874 5f69 6d61         right_ima
-00018f00: 6765 203d 2065 655f 7469 6c65 5f6c 6179  ge = ee_tile_lay
-00018f10: 6572 280d 0a20 2020 2020 2020 2020 2020  er(..           
-00018f20: 2020 2020 2020 2020 2020 2020 2072 6967               rig
-00018f30: 6874 5f69 6d61 6765 2c0d 0a20 2020 2020  ht_image,..     
-00018f40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018f50: 2020 2072 6967 6874 5f76 6973 2c0d 0a20     right_vis,.. 
-00018f60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018f70: 2020 2020 2020 2072 6967 6874 5f6e 616d         right_nam
-00018f80: 6573 5b72 6967 6874 5f64 726f 7064 6f77  es[right_dropdow
-00018f90: 6e5f 696e 6465 785d 2c0d 0a20 2020 2020  n_index],..     
-00018fa0: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-00018fb0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00018fc0: 2020 2020 2020 7269 6768 745f 6c61 7965        right_laye
-00018fd0: 722e 7572 6c20 3d20 7269 6768 745f 696d  r.url = right_im
-00018fe0: 6167 652e 7572 6c0d 0a20 2020 2020 2020  age.url..       
-00018ff0: 2020 2020 2020 2020 2065 7863 6570 7420           except 
-00019000: 4578 6365 7074 696f 6e20 6173 2065 3a0d  Exception as e:.
-00019010: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00019020: 2020 2020 2070 7269 6e74 2865 290d 0a20       print(e).. 
-00019030: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019040: 2020 2072 6574 7572 6e0d 0a0d 0a20 2020     return....   
-00019050: 2020 2020 2072 6967 6874 5f64 726f 7064       right_dropd
-00019060: 6f77 6e2e 6f62 7365 7276 6528 7269 6768  own.observe(righ
-00019070: 745f 6472 6f70 646f 776e 5f63 6861 6e67  t_dropdown_chang
-00019080: 652c 206e 616d 6573 3d22 7661 6c75 6522  e, names="value"
-00019090: 290d 0a0d 0a20 2020 2020 2020 2063 6c6f  )....        clo
-000190a0: 7365 5f62 7574 746f 6e20 3d20 7769 6467  se_button = widg
-000190b0: 6574 732e 546f 6767 6c65 4275 7474 6f6e  ets.ToggleButton
-000190c0: 280d 0a20 2020 2020 2020 2020 2020 2076  (..            v
-000190d0: 616c 7565 3d46 616c 7365 2c0d 0a20 2020  alue=False,..   
-000190e0: 2020 2020 2020 2020 2074 6f6f 6c74 6970           tooltip
-000190f0: 3d22 436c 6f73 6520 7468 6520 746f 6f6c  ="Close the tool
-00019100: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
-00019110: 6963 6f6e 3d22 7469 6d65 7322 2c0d 0a20  icon="times",.. 
-00019120: 2020 2020 2020 2020 2020 2023 2062 7574             # but
-00019130: 746f 6e5f 7374 796c 653d 2270 7269 6d61  ton_style="prima
-00019140: 7279 222c 0d0a 2020 2020 2020 2020 2020  ry",..          
-00019150: 2020 6c61 796f 7574 3d77 6964 6765 7473    layout=widgets
-00019160: 2e4c 6179 6f75 7428 0d0a 2020 2020 2020  .Layout(..      
-00019170: 2020 2020 2020 2020 2020 6865 6967 6874            height
-00019180: 3d22 3238 7078 222c 2077 6964 7468 3d22  ="28px", width="
-00019190: 3238 7078 222c 2070 6164 6469 6e67 3d22  28px", padding="
-000191a0: 3070 7820 3070 7820 3070 7820 3470 7822  0px 0px 0px 4px"
-000191b0: 0d0a 2020 2020 2020 2020 2020 2020 292c  ..            ),
-000191c0: 0d0a 2020 2020 2020 2020 290d 0a0d 0a20  ..        ).... 
-000191d0: 2020 2020 2020 2064 6566 2063 6c6f 7365         def close
-000191e0: 5f62 746e 5f63 6c69 636b 2863 6861 6e67  _btn_click(chang
-000191f0: 6529 3a0d 0a20 2020 2020 2020 2020 2020  e):..           
-00019200: 2069 6620 6368 616e 6765 5b22 6e65 7722   if change["new"
-00019210: 5d3a 0d0a 2020 2020 2020 2020 2020 2020  ]:..            
-00019220: 2020 2020 7365 6c66 2e63 6f6e 7472 6f6c      self.control
-00019230: 7320 3d20 636f 6e74 726f 6c73 0d0a 2020  s = controls..  
-00019240: 2020 2020 2020 2020 2020 2020 2020 7365                se
-00019250: 6c66 2e63 6c65 6172 5f6c 6179 6572 7328  lf.clear_layers(
-00019260: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-00019270: 2020 2073 656c 662e 6c61 7965 7273 203d     self.layers =
-00019280: 206c 6179 6572 730d 0a0d 0a20 2020 2020   layers....     
-00019290: 2020 2063 6c6f 7365 5f62 7574 746f 6e2e     close_button.
-000192a0: 6f62 7365 7276 6528 636c 6f73 655f 6274  observe(close_bt
-000192b0: 6e5f 636c 6963 6b2c 2022 7661 6c75 6522  n_click, "value"
-000192c0: 290d 0a20 2020 2020 2020 2063 6c6f 7365  )..        close
-000192d0: 5f63 6f6e 7472 6f6c 203d 2069 7079 6c65  _control = ipyle
-000192e0: 6166 6c65 742e 5769 6467 6574 436f 6e74  aflet.WidgetCont
-000192f0: 726f 6c28 0d0a 2020 2020 2020 2020 2020  rol(..          
-00019300: 2020 7769 6467 6574 3d63 6c6f 7365 5f62    widget=close_b
-00019310: 7574 746f 6e2c 2070 6f73 6974 696f 6e3d  utton, position=
-00019320: 2262 6f74 746f 6d72 6967 6874 220d 0a20  "bottomright".. 
-00019330: 2020 2020 2020 2029 0d0a 0d0a 2020 2020         )....    
-00019340: 2020 2020 7472 793a 0d0a 0d0a 2020 2020      try:....    
-00019350: 2020 2020 2020 2020 7370 6c69 745f 636f          split_co
+00018e60: 652e 496d 6167 6543 6f6c 6c65 6374 696f  e.ImageCollectio
+00018e70: 6e29 3a0d 0a20 2020 2020 2020 2020 2020  n):..           
+00018e80: 2020 2020 2020 2020 2020 2020 2072 6967               rig
+00018e90: 6874 5f69 6d61 6765 203d 2065 652e 496d  ht_image = ee.Im
+00018ea0: 6167 6528 7269 6768 745f 696d 6167 652e  age(right_image.
+00018eb0: 6d6f 7361 6963 2829 290d 0a20 2020 2020  mosaic())..     
+00018ec0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+00018ed0: 6c69 6620 6973 696e 7374 616e 6365 2872  lif isinstance(r
+00018ee0: 6967 6874 5f69 6d61 6765 2c20 6565 2e49  ight_image, ee.I
+00018ef0: 6d61 6765 293a 0d0a 2020 2020 2020 2020  mage):..        
+00018f00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018f10: 7061 7373 0d0a 2020 2020 2020 2020 2020  pass..          
+00018f20: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
+00018f30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00018f40: 2020 2020 2020 2020 2072 6967 6874 5f69           right_i
+00018f50: 6d61 6765 203d 2065 652e 496d 6167 6528  mage = ee.Image(
+00018f60: 7269 6768 745f 696d 6167 6529 0d0a 0d0a  right_image)....
+00018f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018f80: 2020 2020 7269 6768 745f 696d 6167 6520      right_image 
+00018f90: 3d20 6565 5f74 696c 655f 6c61 7965 7228  = ee_tile_layer(
+00018fa0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00018fb0: 2020 2020 2020 2020 2020 7269 6768 745f            right_
+00018fc0: 696d 6167 652c 0d0a 2020 2020 2020 2020  image,..        
+00018fd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018fe0: 7269 6768 745f 7669 732c 0d0a 2020 2020  right_vis,..    
+00018ff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019000: 2020 2020 7269 6768 745f 6e61 6d65 735b      right_names[
+00019010: 7269 6768 745f 6472 6f70 646f 776e 5f69  right_dropdown_i
+00019020: 6e64 6578 5d2c 0d0a 2020 2020 2020 2020  ndex],..        
+00019030: 2020 2020 2020 2020 2020 2020 290d 0a20              ).. 
+00019040: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019050: 2020 2072 6967 6874 5f6c 6179 6572 2e75     right_layer.u
+00019060: 726c 203d 2072 6967 6874 5f69 6d61 6765  rl = right_image
+00019070: 2e75 726c 0d0a 2020 2020 2020 2020 2020  .url..          
+00019080: 2020 2020 2020 6578 6365 7074 2045 7863        except Exc
+00019090: 6570 7469 6f6e 2061 7320 653a 0d0a 2020  eption as e:..  
+000190a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000190b0: 2020 7072 696e 7428 6529 0d0a 2020 2020    print(e)..    
+000190c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000190d0: 7265 7475 726e 0d0a 0d0a 2020 2020 2020  return....      
+000190e0: 2020 7269 6768 745f 6472 6f70 646f 776e    right_dropdown
+000190f0: 2e6f 6273 6572 7665 2872 6967 6874 5f64  .observe(right_d
+00019100: 726f 7064 6f77 6e5f 6368 616e 6765 2c20  ropdown_change, 
+00019110: 6e61 6d65 733d 2276 616c 7565 2229 0d0a  names="value")..
+00019120: 0d0a 2020 2020 2020 2020 636c 6f73 655f  ..        close_
+00019130: 6275 7474 6f6e 203d 2077 6964 6765 7473  button = widgets
+00019140: 2e54 6f67 676c 6542 7574 746f 6e28 0d0a  .ToggleButton(..
+00019150: 2020 2020 2020 2020 2020 2020 7661 6c75              valu
+00019160: 653d 4661 6c73 652c 0d0a 2020 2020 2020  e=False,..      
+00019170: 2020 2020 2020 746f 6f6c 7469 703d 2243        tooltip="C
+00019180: 6c6f 7365 2074 6865 2074 6f6f 6c22 2c0d  lose the tool",.
+00019190: 0a20 2020 2020 2020 2020 2020 2069 636f  .            ico
+000191a0: 6e3d 2274 696d 6573 222c 0d0a 2020 2020  n="times",..    
+000191b0: 2020 2020 2020 2020 2320 6275 7474 6f6e          # button
+000191c0: 5f73 7479 6c65 3d22 7072 696d 6172 7922  _style="primary"
+000191d0: 2c0d 0a20 2020 2020 2020 2020 2020 206c  ,..            l
+000191e0: 6179 6f75 743d 7769 6467 6574 732e 4c61  ayout=widgets.La
+000191f0: 796f 7574 280d 0a20 2020 2020 2020 2020  yout(..         
+00019200: 2020 2020 2020 2068 6569 6768 743d 2232         height="2
+00019210: 3870 7822 2c20 7769 6474 683d 2232 3870  8px", width="28p
+00019220: 7822 2c20 7061 6464 696e 673d 2230 7078  x", padding="0px
+00019230: 2030 7078 2030 7078 2034 7078 220d 0a20   0px 0px 4px".. 
+00019240: 2020 2020 2020 2020 2020 2029 2c0d 0a20             ),.. 
+00019250: 2020 2020 2020 2029 0d0a 0d0a 2020 2020         )....    
+00019260: 2020 2020 6465 6620 636c 6f73 655f 6274      def close_bt
+00019270: 6e5f 636c 6963 6b28 6368 616e 6765 293a  n_click(change):
+00019280: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
+00019290: 2063 6861 6e67 655b 226e 6577 225d 3a0d   change["new"]:.
+000192a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000192b0: 2073 656c 662e 636f 6e74 726f 6c73 203d   self.controls =
+000192c0: 2063 6f6e 7472 6f6c 730d 0a20 2020 2020   controls..     
+000192d0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+000192e0: 636c 6561 725f 6c61 7965 7273 2829 0d0a  clear_layers()..
+000192f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019300: 7365 6c66 2e6c 6179 6572 7320 3d20 6c61  self.layers = la
+00019310: 7965 7273 0d0a 0d0a 2020 2020 2020 2020  yers....        
+00019320: 636c 6f73 655f 6275 7474 6f6e 2e6f 6273  close_button.obs
+00019330: 6572 7665 2863 6c6f 7365 5f62 746e 5f63  erve(close_btn_c
+00019340: 6c69 636b 2c20 2276 616c 7565 2229 0d0a  lick, "value")..
+00019350: 2020 2020 2020 2020 636c 6f73 655f 636f          close_co
 00019360: 6e74 726f 6c20 3d20 6970 796c 6561 666c  ntrol = ipyleafl
-00019370: 6574 2e53 706c 6974 4d61 7043 6f6e 7472  et.SplitMapContr
-00019380: 6f6c 280d 0a20 2020 2020 2020 2020 2020  ol(..           
-00019390: 2020 2020 206c 6566 745f 6c61 7965 723d       left_layer=
-000193a0: 6c65 6674 5f6c 6179 6572 2c20 7269 6768  left_layer, righ
-000193b0: 745f 6c61 7965 723d 7269 6768 745f 6c61  t_layer=right_la
-000193c0: 7965 720d 0a20 2020 2020 2020 2020 2020  yer..           
-000193d0: 2029 0d0a 2020 2020 2020 2020 2020 2020   )..            
-000193e0: 7365 6c66 2e61 6464 5f63 6f6e 7472 6f6c  self.add_control
-000193f0: 2873 706c 6974 5f63 6f6e 7472 6f6c 290d  (split_control).
-00019400: 0a0d 0a20 2020 2020 2020 2020 2020 2073  ...            s
-00019410: 656c 662e 6164 645f 636f 6e74 726f 6c28  elf.add_control(
-00019420: 636c 6f73 655f 636f 6e74 726f 6c29 0d0a  close_control)..
-00019430: 0d0a 2020 2020 2020 2020 6578 6365 7074  ..        except
-00019440: 2045 7863 6570 7469 6f6e 2061 7320 653a   Exception as e:
-00019450: 0d0a 2020 2020 2020 2020 2020 2020 7261  ..            ra
-00019460: 6973 6520 4578 6365 7074 696f 6e28 6529  ise Exception(e)
-00019470: 0d0a 0d0a 2020 2020 6465 6620 6261 7365  ....    def base
-00019480: 6d61 705f 6465 6d6f 2873 656c 6629 3a0d  map_demo(self):.
-00019490: 0a20 2020 2020 2020 2022 2222 4120 6465  .        """A de
-000194a0: 6d6f 2066 6f72 2075 7369 6e67 2067 6565  mo for using gee
-000194b0: 6d61 7020 6261 7365 6d61 7073 2e22 2222  map basemaps."""
-000194c0: 0d0a 2020 2020 2020 2020 6472 6f70 646f  ..        dropdo
-000194d0: 776e 203d 2077 6964 6765 7473 2e44 726f  wn = widgets.Dro
-000194e0: 7064 6f77 6e28 0d0a 2020 2020 2020 2020  pdown(..        
-000194f0: 2020 2020 6f70 7469 6f6e 733d 6c69 7374      options=list
-00019500: 2862 6173 656d 6170 5f74 696c 6573 2e6b  (basemap_tiles.k
-00019510: 6579 7328 2929 2c0d 0a20 2020 2020 2020  eys()),..       
-00019520: 2020 2020 2076 616c 7565 3d22 4859 4252       value="HYBR
-00019530: 4944 222c 0d0a 2020 2020 2020 2020 2020  ID",..          
-00019540: 2020 6465 7363 7269 7074 696f 6e3d 2242    description="B
-00019550: 6173 656d 6170 7322 2c0d 0a20 2020 2020  asemaps",..     
-00019560: 2020 2029 0d0a 0d0a 2020 2020 2020 2020     )....        
-00019570: 6465 6620 6f6e 5f63 6c69 636b 2863 6861  def on_click(cha
-00019580: 6e67 6529 3a0d 0a20 2020 2020 2020 2020  nge):..         
-00019590: 2020 2062 6173 656d 6170 5f6e 616d 6520     basemap_name 
-000195a0: 3d20 6368 616e 6765 5b22 6e65 7722 5d0d  = change["new"].
-000195b0: 0a20 2020 2020 2020 2020 2020 206f 6c64  .            old
-000195c0: 5f62 6173 656d 6170 203d 2073 656c 662e  _basemap = self.
-000195d0: 6c61 7965 7273 5b2d 315d 0d0a 2020 2020  layers[-1]..    
-000195e0: 2020 2020 2020 2020 7365 6c66 2e73 7562          self.sub
-000195f0: 7374 6974 7574 655f 6c61 7965 7228 6f6c  stitute_layer(ol
-00019600: 645f 6261 7365 6d61 702c 2062 6173 656d  d_basemap, basem
-00019610: 6170 5f74 696c 6573 5b62 6173 656d 6170  ap_tiles[basemap
-00019620: 5f6e 616d 655d 290d 0a0d 0a20 2020 2020  _name])....     
-00019630: 2020 2064 726f 7064 6f77 6e2e 6f62 7365     dropdown.obse
-00019640: 7276 6528 6f6e 5f63 6c69 636b 2c20 2276  rve(on_click, "v
-00019650: 616c 7565 2229 0d0a 2020 2020 2020 2020  alue")..        
-00019660: 6261 7365 6d61 705f 636f 6e74 726f 6c20  basemap_control 
-00019670: 3d20 6970 796c 6561 666c 6574 2e57 6964  = ipyleaflet.Wid
-00019680: 6765 7443 6f6e 7472 6f6c 2877 6964 6765  getControl(widge
-00019690: 743d 6472 6f70 646f 776e 2c20 706f 7369  t=dropdown, posi
-000196a0: 7469 6f6e 3d22 746f 7072 6967 6874 2229  tion="topright")
-000196b0: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
-000196c0: 6464 5f63 6f6e 7472 6f6c 2862 6173 656d  dd_control(basem
-000196d0: 6170 5f63 6f6e 7472 6f6c 290d 0a0d 0a20  ap_control).... 
-000196e0: 2020 2064 6566 2061 6464 5f6c 6567 656e     def add_legen
-000196f0: 6428 0d0a 2020 2020 2020 2020 7365 6c66  d(..        self
-00019700: 2c0d 0a20 2020 2020 2020 206c 6567 656e  ,..        legen
-00019710: 645f 7469 746c 653d 224c 6567 656e 6422  d_title="Legend"
-00019720: 2c0d 0a20 2020 2020 2020 206c 6567 656e  ,..        legen
-00019730: 645f 6469 6374 3d4e 6f6e 652c 0d0a 2020  d_dict=None,..  
-00019740: 2020 2020 2020 6c65 6765 6e64 5f6b 6579        legend_key
-00019750: 733d 4e6f 6e65 2c0d 0a20 2020 2020 2020  s=None,..       
-00019760: 206c 6567 656e 645f 636f 6c6f 7273 3d4e   legend_colors=N
-00019770: 6f6e 652c 0d0a 2020 2020 2020 2020 706f  one,..        po
-00019780: 7369 7469 6f6e 3d22 626f 7474 6f6d 7269  sition="bottomri
-00019790: 6768 7422 2c0d 0a20 2020 2020 2020 2062  ght",..        b
-000197a0: 7569 6c74 696e 5f6c 6567 656e 643d 4e6f  uiltin_legend=No
-000197b0: 6e65 2c0d 0a20 2020 2020 2020 206c 6179  ne,..        lay
-000197c0: 6572 5f6e 616d 653d 4e6f 6e65 2c0d 0a20  er_name=None,.. 
-000197d0: 2020 2020 2020 202a 2a6b 7761 7267 732c         **kwargs,
-000197e0: 0d0a 2020 2020 293a 0d0a 2020 2020 2020  ..    ):..      
-000197f0: 2020 2222 2241 6464 7320 6120 6375 7374    """Adds a cust
-00019800: 6f6d 697a 6564 2062 6173 656d 6170 2074  omized basemap t
-00019810: 6f20 7468 6520 6d61 702e 0d0a 0d0a 2020  o the map.....  
-00019820: 2020 2020 2020 4172 6773 3a0d 0a20 2020        Args:..   
-00019830: 2020 2020 2020 2020 206c 6567 656e 645f           legend_
-00019840: 7469 746c 6520 2873 7472 2c20 6f70 7469  title (str, opti
-00019850: 6f6e 616c 293a 2054 6974 6c65 206f 6620  onal): Title of 
-00019860: 7468 6520 6c65 6765 6e64 2e20 4465 6661  the legend. Defa
-00019870: 756c 7473 2074 6f20 274c 6567 656e 6427  ults to 'Legend'
-00019880: 2e0d 0a20 2020 2020 2020 2020 2020 206c  ...            l
-00019890: 6567 656e 645f 6469 6374 2028 6469 6374  egend_dict (dict
-000198a0: 2c20 6f70 7469 6f6e 616c 293a 2041 2064  , optional): A d
-000198b0: 6963 7469 6f6e 6172 7920 636f 6e74 6169  ictionary contai
-000198c0: 6e69 6e67 206c 6567 656e 6420 6974 656d  ning legend item
-000198d0: 7320 6173 206b 6579 7320 616e 6420 636f  s as keys and co
-000198e0: 6c6f 7220 6173 2076 616c 7565 732e 2049  lor as values. I
-000198f0: 6620 7072 6f76 6964 6564 2c20 6c65 6765  f provided, lege
-00019900: 6e64 5f6b 6579 7320 616e 6420 6c65 6765  nd_keys and lege
-00019910: 6e64 5f63 6f6c 6f72 7320 7769 6c6c 2062  nd_colors will b
-00019920: 6520 6967 6e6f 7265 642e 2044 6566 6175  e ignored. Defau
-00019930: 6c74 7320 746f 204e 6f6e 652e 0d0a 2020  lts to None...  
-00019940: 2020 2020 2020 2020 2020 6c65 6765 6e64            legend
-00019950: 5f6b 6579 7320 286c 6973 742c 206f 7074  _keys (list, opt
-00019960: 696f 6e61 6c29 3a20 4120 6c69 7374 206f  ional): A list o
-00019970: 6620 6c65 6765 6e64 206b 6579 732e 2044  f legend keys. D
-00019980: 6566 6175 6c74 7320 746f 204e 6f6e 652e  efaults to None.
-00019990: 0d0a 2020 2020 2020 2020 2020 2020 6c65  ..            le
-000199a0: 6765 6e64 5f63 6f6c 6f72 7320 286c 6973  gend_colors (lis
-000199b0: 742c 206f 7074 696f 6e61 6c29 3a20 4120  t, optional): A 
-000199c0: 6c69 7374 206f 6620 6c65 6765 6e64 2063  list of legend c
-000199d0: 6f6c 6f72 732e 2044 6566 6175 6c74 7320  olors. Defaults 
-000199e0: 746f 204e 6f6e 652e 0d0a 2020 2020 2020  to None...      
-000199f0: 2020 2020 2020 706f 7369 7469 6f6e 2028        position (
-00019a00: 7374 722c 206f 7074 696f 6e61 6c29 3a20  str, optional): 
-00019a10: 506f 7369 7469 6f6e 206f 6620 7468 6520  Position of the 
-00019a20: 6c65 6765 6e64 2e20 4465 6661 756c 7473  legend. Defaults
-00019a30: 2074 6f20 2762 6f74 746f 6d72 6967 6874   to 'bottomright
-00019a40: 272e 0d0a 2020 2020 2020 2020 2020 2020  '...            
-00019a50: 6275 696c 7469 6e5f 6c65 6765 6e64 2028  builtin_legend (
-00019a60: 7374 722c 206f 7074 696f 6e61 6c29 3a20  str, optional): 
-00019a70: 4e61 6d65 206f 6620 7468 6520 6275 696c  Name of the buil
-00019a80: 7469 6e20 6c65 6765 6e64 2074 6f20 6164  tin legend to ad
-00019a90: 6420 746f 2074 6865 206d 6170 2e20 4465  d to the map. De
-00019aa0: 6661 756c 7473 2074 6f20 4e6f 6e65 2e0d  faults to None..
-00019ab0: 0a20 2020 2020 2020 2020 2020 206c 6179  .            lay
-00019ac0: 6572 5f6e 616d 6520 2873 7472 2c20 6f70  er_name (str, op
-00019ad0: 7469 6f6e 616c 293a 204c 6179 6572 206e  tional): Layer n
-00019ae0: 616d 6520 6f66 2074 6865 206c 6567 656e  ame of the legen
-00019af0: 6420 746f 2062 6520 6173 736f 6369 6174  d to be associat
-00019b00: 6564 2077 6974 682e 2044 6566 6175 6c74  ed with. Default
-00019b10: 7320 746f 204e 6f6e 652e 0d0a 0d0a 2020  s to None.....  
-00019b20: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
-00019b30: 2020 2069 6d70 6f72 7420 706b 675f 7265     import pkg_re
-00019b40: 736f 7572 6365 730d 0a20 2020 2020 2020  sources..       
-00019b50: 2066 726f 6d20 4950 7974 686f 6e2e 6469   from IPython.di
-00019b60: 7370 6c61 7920 696d 706f 7274 2064 6973  splay import dis
-00019b70: 706c 6179 0d0a 0d0a 2020 2020 2020 2020  play....        
-00019b80: 706b 675f 6469 7220 3d20 6f73 2e70 6174  pkg_dir = os.pat
-00019b90: 682e 6469 726e 616d 6528 0d0a 2020 2020  h.dirname(..    
-00019ba0: 2020 2020 2020 2020 706b 675f 7265 736f          pkg_reso
-00019bb0: 7572 6365 732e 7265 736f 7572 6365 5f66  urces.resource_f
-00019bc0: 696c 656e 616d 6528 2267 6565 6d61 7022  ilename("geemap"
-00019bd0: 2c20 2267 6565 6d61 702e 7079 2229 0d0a  , "geemap.py")..
-00019be0: 2020 2020 2020 2020 290d 0a20 2020 2020          )..     
-00019bf0: 2020 206c 6567 656e 645f 7465 6d70 6c61     legend_templa
-00019c00: 7465 203d 206f 732e 7061 7468 2e6a 6f69  te = os.path.joi
-00019c10: 6e28 706b 675f 6469 722c 2022 6461 7461  n(pkg_dir, "data
-00019c20: 2f74 656d 706c 6174 652f 6c65 6765 6e64  /template/legend
-00019c30: 2e68 746d 6c22 290d 0a0d 0a20 2020 2020  .html")....     
-00019c40: 2020 2069 6620 226d 696e 5f77 6964 7468     if "min_width
-00019c50: 2220 6e6f 7420 696e 206b 7761 7267 732e  " not in kwargs.
-00019c60: 6b65 7973 2829 3a0d 0a20 2020 2020 2020  keys():..       
-00019c70: 2020 2020 206d 696e 5f77 6964 7468 203d       min_width =
-00019c80: 204e 6f6e 650d 0a20 2020 2020 2020 2069   None..        i
-00019c90: 6620 226d 6178 5f77 6964 7468 2220 6e6f  f "max_width" no
-00019ca0: 7420 696e 206b 7761 7267 732e 6b65 7973  t in kwargs.keys
-00019cb0: 2829 3a0d 0a20 2020 2020 2020 2020 2020  ():..           
-00019cc0: 206d 6178 5f77 6964 7468 203d 204e 6f6e   max_width = Non
-00019cd0: 650d 0a20 2020 2020 2020 2065 6c73 653a  e..        else:
-00019ce0: 0d0a 2020 2020 2020 2020 2020 2020 6d61  ..            ma
-00019cf0: 785f 7769 6474 6820 3d20 6b77 6172 6773  x_width = kwargs
-00019d00: 5b22 6d61 785f 7769 6474 6822 5d0d 0a20  ["max_width"].. 
-00019d10: 2020 2020 2020 2069 6620 226d 696e 5f68         if "min_h
-00019d20: 6569 6768 7422 206e 6f74 2069 6e20 6b77  eight" not in kw
-00019d30: 6172 6773 2e6b 6579 7328 293a 0d0a 2020  args.keys():..  
-00019d40: 2020 2020 2020 2020 2020 6d69 6e5f 6865            min_he
-00019d50: 6967 6874 203d 204e 6f6e 650d 0a20 2020  ight = None..   
-00019d60: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
-00019d70: 2020 2020 2020 2020 6d69 6e5f 6865 6967          min_heig
-00019d80: 6874 203d 206b 7761 7267 735b 226d 696e  ht = kwargs["min
-00019d90: 5f68 6569 6768 7422 5d0d 0a20 2020 2020  _height"]..     
-00019da0: 2020 2069 6620 226d 6178 5f68 6569 6768     if "max_heigh
-00019db0: 7422 206e 6f74 2069 6e20 6b77 6172 6773  t" not in kwargs
-00019dc0: 2e6b 6579 7328 293a 0d0a 2020 2020 2020  .keys():..      
-00019dd0: 2020 2020 2020 6d61 785f 6865 6967 6874        max_height
-00019de0: 203d 204e 6f6e 650d 0a20 2020 2020 2020   = None..       
-00019df0: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
-00019e00: 2020 2020 6d61 785f 6865 6967 6874 203d      max_height =
-00019e10: 206b 7761 7267 735b 226d 6178 5f68 6569   kwargs["max_hei
-00019e20: 6768 7422 5d0d 0a20 2020 2020 2020 2069  ght"]..        i
-00019e30: 6620 2268 6569 6768 7422 206e 6f74 2069  f "height" not i
-00019e40: 6e20 6b77 6172 6773 2e6b 6579 7328 293a  n kwargs.keys():
-00019e50: 0d0a 2020 2020 2020 2020 2020 2020 6865  ..            he
-00019e60: 6967 6874 203d 204e 6f6e 650d 0a20 2020  ight = None..   
-00019e70: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
-00019e80: 2020 2020 2020 2020 6865 6967 6874 203d          height =
-00019e90: 206b 7761 7267 735b 2268 6569 6768 7422   kwargs["height"
-00019ea0: 5d0d 0a20 2020 2020 2020 2069 6620 2277  ]..        if "w
-00019eb0: 6964 7468 2220 6e6f 7420 696e 206b 7761  idth" not in kwa
-00019ec0: 7267 732e 6b65 7973 2829 3a0d 0a20 2020  rgs.keys():..   
-00019ed0: 2020 2020 2020 2020 2077 6964 7468 203d           width =
-00019ee0: 204e 6f6e 650d 0a20 2020 2020 2020 2065   None..        e
-00019ef0: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
-00019f00: 2020 7769 6474 6820 3d20 6b77 6172 6773    width = kwargs
-00019f10: 5b22 7769 6474 6822 5d0d 0a0d 0a20 2020  ["width"]....   
-00019f20: 2020 2020 2069 6620 7769 6474 6820 6973       if width is
-00019f30: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
-00019f40: 2020 2020 6d61 785f 7769 6474 6820 3d20      max_width = 
-00019f50: 2233 3030 7078 220d 0a20 2020 2020 2020  "300px"..       
-00019f60: 2069 6620 6865 6967 6874 2069 7320 4e6f   if height is No
-00019f70: 6e65 3a0d 0a20 2020 2020 2020 2020 2020  ne:..           
-00019f80: 206d 6178 5f68 6569 6768 7420 3d20 2234   max_height = "4
-00019f90: 3030 7078 220d 0a0d 0a20 2020 2020 2020  00px"....       
-00019fa0: 2069 6620 6e6f 7420 6f73 2e70 6174 682e   if not os.path.
-00019fb0: 6578 6973 7473 286c 6567 656e 645f 7465  exists(legend_te
-00019fc0: 6d70 6c61 7465 293a 0d0a 2020 2020 2020  mplate):..      
-00019fd0: 2020 2020 2020 7072 696e 7428 2254 6865        print("The
-00019fe0: 206c 6567 656e 6420 7465 6d70 6c61 7465   legend template
-00019ff0: 2064 6f65 7320 6e6f 7420 6578 6973 742e   does not exist.
-0001a000: 2229 0d0a 2020 2020 2020 2020 2020 2020  ")..            
-0001a010: 7265 7475 726e 0d0a 0d0a 2020 2020 2020  return....      
-0001a020: 2020 6966 206c 6567 656e 645f 6b65 7973    if legend_keys
-0001a030: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
-0001a040: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
-0001a050: 7420 6973 696e 7374 616e 6365 286c 6567  t isinstance(leg
-0001a060: 656e 645f 6b65 7973 2c20 6c69 7374 293a  end_keys, list):
-0001a070: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001a080: 2020 7072 696e 7428 2254 6865 206c 6567    print("The leg
-0001a090: 656e 6420 6b65 7973 206d 7573 7420 6265  end keys must be
-0001a0a0: 2061 206c 6973 742e 2229 0d0a 2020 2020   a list.")..    
-0001a0b0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-0001a0c0: 726e 0d0a 2020 2020 2020 2020 656c 7365  rn..        else
-0001a0d0: 3a0d 0a20 2020 2020 2020 2020 2020 206c  :..            l
-0001a0e0: 6567 656e 645f 6b65 7973 203d 205b 224f  egend_keys = ["O
-0001a0f0: 6e65 222c 2022 5477 6f22 2c20 2254 6872  ne", "Two", "Thr
-0001a100: 6565 222c 2022 466f 7572 222c 2022 6574  ee", "Four", "et
-0001a110: 6322 5d0d 0a0d 0a20 2020 2020 2020 2069  c"]....        i
-0001a120: 6620 6c65 6765 6e64 5f63 6f6c 6f72 7320  f legend_colors 
-0001a130: 6973 206e 6f74 204e 6f6e 653a 0d0a 2020  is not None:..  
-0001a140: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
-0001a150: 2069 7369 6e73 7461 6e63 6528 6c65 6765   isinstance(lege
-0001a160: 6e64 5f63 6f6c 6f72 732c 206c 6973 7429  nd_colors, list)
-0001a170: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-0001a180: 2020 2070 7269 6e74 2822 5468 6520 6c65     print("The le
-0001a190: 6765 6e64 2063 6f6c 6f72 7320 6d75 7374  gend colors must
-0001a1a0: 2062 6520 6120 6c69 7374 2e22 290d 0a20   be a list.").. 
-0001a1b0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0001a1c0: 6574 7572 6e0d 0a20 2020 2020 2020 2020  eturn..         
-0001a1d0: 2020 2065 6c69 6620 616c 6c28 6973 696e     elif all(isin
-0001a1e0: 7374 616e 6365 2869 7465 6d2c 2074 7570  stance(item, tup
-0001a1f0: 6c65 2920 666f 7220 6974 656d 2069 6e20  le) for item in 
-0001a200: 6c65 6765 6e64 5f63 6f6c 6f72 7329 3a0d  legend_colors):.
-0001a210: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001a220: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
-0001a230: 2020 2020 2020 2020 2020 206c 6567 656e             legen
-0001a240: 645f 636f 6c6f 7273 203d 205b 7267 625f  d_colors = [rgb_
-0001a250: 746f 5f68 6578 2878 2920 666f 7220 7820  to_hex(x) for x 
-0001a260: 696e 206c 6567 656e 645f 636f 6c6f 7273  in legend_colors
-0001a270: 5d0d 0a20 2020 2020 2020 2020 2020 2020  ]..             
-0001a280: 2020 2065 7863 6570 7420 4578 6365 7074     except Except
-0001a290: 696f 6e20 6173 2065 3a0d 0a20 2020 2020  ion as e:..     
-0001a2a0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-0001a2b0: 7269 6e74 2865 290d 0a20 2020 2020 2020  rint(e)..       
-0001a2c0: 2020 2020 2065 6c69 6620 616c 6c28 0d0a       elif all(..
-0001a2d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a2e0: 2869 7465 6d2e 7374 6172 7473 7769 7468  (item.startswith
-0001a2f0: 2822 2322 2920 616e 6420 6c65 6e28 6974  ("#") and len(it
-0001a300: 656d 2920 3d3d 2037 2920 666f 7220 6974  em) == 7) for it
-0001a310: 656d 2069 6e20 6c65 6765 6e64 5f63 6f6c  em in legend_col
-0001a320: 6f72 730d 0a20 2020 2020 2020 2020 2020  ors..           
-0001a330: 2029 3a0d 0a20 2020 2020 2020 2020 2020   ):..           
-0001a340: 2020 2020 2070 6173 730d 0a20 2020 2020       pass..     
-0001a350: 2020 2020 2020 2065 6c69 6620 616c 6c28         elif all(
-0001a360: 286c 656e 2869 7465 6d29 203d 3d20 3629  (len(item) == 6)
-0001a370: 2066 6f72 2069 7465 6d20 696e 206c 6567   for item in leg
-0001a380: 656e 645f 636f 6c6f 7273 293a 0d0a 2020  end_colors):..  
-0001a390: 2020 2020 2020 2020 2020 2020 2020 7061                pa
-0001a3a0: 7373 0d0a 2020 2020 2020 2020 2020 2020  ss..            
-0001a3b0: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
-0001a3c0: 2020 2020 2020 2070 7269 6e74 2822 5468         print("Th
-0001a3d0: 6520 6c65 6765 6e64 2063 6f6c 6f72 7320  e legend colors 
-0001a3e0: 6d75 7374 2062 6520 6120 6c69 7374 206f  must be a list o
-0001a3f0: 6620 7475 706c 6573 2e22 290d 0a20 2020  f tuples.")..   
-0001a400: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-0001a410: 7572 6e0d 0a20 2020 2020 2020 2065 6c73  urn..        els
-0001a420: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-0001a430: 6c65 6765 6e64 5f63 6f6c 6f72 7320 3d20  legend_colors = 
-0001a440: 5b0d 0a20 2020 2020 2020 2020 2020 2020  [..             
-0001a450: 2020 2022 2338 4444 3343 3722 2c0d 0a20     "#8DD3C7",.. 
-0001a460: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0001a470: 2346 4646 4642 3322 2c0d 0a20 2020 2020  #FFFFB3",..     
-0001a480: 2020 2020 2020 2020 2020 2022 2342 4542             "#BEB
-0001a490: 4144 4122 2c0d 0a20 2020 2020 2020 2020  ADA",..         
-0001a4a0: 2020 2020 2020 2022 2346 4238 3037 3222         "#FB8072"
-0001a4b0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-0001a4c0: 2020 2022 2338 3042 3144 3322 2c0d 0a20     "#80B1D3",.. 
-0001a4d0: 2020 2020 2020 2020 2020 205d 0d0a 0d0a             ]....
-0001a4e0: 2020 2020 2020 2020 6966 206c 656e 286c          if len(l
-0001a4f0: 6567 656e 645f 6b65 7973 2920 213d 206c  egend_keys) != l
-0001a500: 656e 286c 6567 656e 645f 636f 6c6f 7273  en(legend_colors
-0001a510: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-0001a520: 7072 696e 7428 2254 6865 206c 6567 656e  print("The legen
-0001a530: 6420 6b65 7973 2061 6e64 2076 616c 7565  d keys and value
-0001a540: 7320 6d75 7374 2062 6520 7468 6520 7361  s must be the sa
-0001a550: 6d65 206c 656e 6774 682e 2229 0d0a 2020  me length.")..  
-0001a560: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0001a570: 0d0a 0d0a 2020 2020 2020 2020 616c 6c6f  ....        allo
-0001a580: 7765 645f 6275 696c 7469 6e5f 6c65 6765  wed_builtin_lege
-0001a590: 6e64 7320 3d20 6275 696c 7469 6e5f 6c65  nds = builtin_le
-0001a5a0: 6765 6e64 732e 6b65 7973 2829 0d0a 2020  gends.keys()..  
-0001a5b0: 2020 2020 2020 6966 2062 7569 6c74 696e        if builtin
-0001a5c0: 5f6c 6567 656e 6420 6973 206e 6f74 204e  _legend is not N
-0001a5d0: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
-0001a5e0: 2020 6966 2062 7569 6c74 696e 5f6c 6567    if builtin_leg
-0001a5f0: 656e 6420 6e6f 7420 696e 2061 6c6c 6f77  end not in allow
-0001a600: 6564 5f62 7569 6c74 696e 5f6c 6567 656e  ed_builtin_legen
-0001a610: 6473 3a0d 0a20 2020 2020 2020 2020 2020  ds:..           
-0001a620: 2020 2020 2070 7269 6e74 280d 0a20 2020       print(..   
-0001a630: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a640: 2022 5468 6520 6275 696c 7469 6e20 6c65   "The builtin le
-0001a650: 6765 6e64 206d 7573 7420 6265 206f 6e65  gend must be one
-0001a660: 206f 6620 7468 6520 666f 6c6c 6f77 696e   of the followin
-0001a670: 673a 207b 7d22 2e66 6f72 6d61 7428 0d0a  g: {}".format(..
-0001a680: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a690: 2020 2020 2020 2020 222c 2022 2e6a 6f69          ", ".joi
-0001a6a0: 6e28 616c 6c6f 7765 645f 6275 696c 7469  n(allowed_builti
-0001a6b0: 6e5f 6c65 6765 6e64 7329 0d0a 2020 2020  n_legends)..    
-0001a6c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a6d0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-0001a6e0: 2020 2029 0d0a 2020 2020 2020 2020 2020     )..          
-0001a6f0: 2020 2020 2020 7265 7475 726e 0d0a 2020        return..  
-0001a700: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
-0001a710: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001a720: 206c 6567 656e 645f 6469 6374 203d 2062   legend_dict = b
-0001a730: 7569 6c74 696e 5f6c 6567 656e 6473 5b62  uiltin_legends[b
-0001a740: 7569 6c74 696e 5f6c 6567 656e 645d 0d0a  uiltin_legend]..
-0001a750: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a760: 6c65 6765 6e64 5f6b 6579 7320 3d20 6c69  legend_keys = li
-0001a770: 7374 286c 6567 656e 645f 6469 6374 2e6b  st(legend_dict.k
-0001a780: 6579 7328 2929 0d0a 2020 2020 2020 2020  eys())..        
-0001a790: 2020 2020 2020 2020 6c65 6765 6e64 5f63          legend_c
-0001a7a0: 6f6c 6f72 7320 3d20 6c69 7374 286c 6567  olors = list(leg
-0001a7b0: 656e 645f 6469 6374 2e76 616c 7565 7328  end_dict.values(
-0001a7c0: 2929 0d0a 0d0a 2020 2020 2020 2020 6966  ))....        if
-0001a7d0: 206c 6567 656e 645f 6469 6374 2069 7320   legend_dict is 
-0001a7e0: 6e6f 7420 4e6f 6e65 3a0d 0a20 2020 2020  not None:..     
-0001a7f0: 2020 2020 2020 2069 6620 6e6f 7420 6973         if not is
-0001a800: 696e 7374 616e 6365 286c 6567 656e 645f  instance(legend_
-0001a810: 6469 6374 2c20 6469 6374 293a 0d0a 2020  dict, dict):..  
-0001a820: 2020 2020 2020 2020 2020 2020 2020 7072                pr
-0001a830: 696e 7428 2254 6865 206c 6567 656e 6420  int("The legend 
-0001a840: 6469 6374 206d 7573 7420 6265 2061 2064  dict must be a d
-0001a850: 6963 7469 6f6e 6172 792e 2229 0d0a 2020  ictionary.")..  
-0001a860: 2020 2020 2020 2020 2020 2020 2020 7265                re
-0001a870: 7475 726e 0d0a 2020 2020 2020 2020 2020  turn..          
-0001a880: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
-0001a890: 2020 2020 2020 2020 206c 6567 656e 645f           legend_
-0001a8a0: 6b65 7973 203d 206c 6973 7428 6c65 6765  keys = list(lege
-0001a8b0: 6e64 5f64 6963 742e 6b65 7973 2829 290d  nd_dict.keys()).
-0001a8c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001a8d0: 206c 6567 656e 645f 636f 6c6f 7273 203d   legend_colors =
-0001a8e0: 206c 6973 7428 6c65 6765 6e64 5f64 6963   list(legend_dic
-0001a8f0: 742e 7661 6c75 6573 2829 290d 0a20 2020  t.values())..   
-0001a900: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0001a910: 616c 6c28 6973 696e 7374 616e 6365 2869  all(isinstance(i
-0001a920: 7465 6d2c 2074 7570 6c65 2920 666f 7220  tem, tuple) for 
-0001a930: 6974 656d 2069 6e20 6c65 6765 6e64 5f63  item in legend_c
-0001a940: 6f6c 6f72 7329 3a0d 0a20 2020 2020 2020  olors):..       
-0001a950: 2020 2020 2020 2020 2020 2020 2074 7279               try
-0001a960: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-0001a970: 2020 2020 2020 2020 2020 206c 6567 656e             legen
-0001a980: 645f 636f 6c6f 7273 203d 205b 7267 625f  d_colors = [rgb_
-0001a990: 746f 5f68 6578 2878 2920 666f 7220 7820  to_hex(x) for x 
-0001a9a0: 696e 206c 6567 656e 645f 636f 6c6f 7273  in legend_colors
-0001a9b0: 5d0d 0a20 2020 2020 2020 2020 2020 2020  ]..             
-0001a9c0: 2020 2020 2020 2065 7863 6570 7420 4578         except Ex
-0001a9d0: 6365 7074 696f 6e20 6173 2065 3a0d 0a20  ception as e:.. 
-0001a9e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a9f0: 2020 2020 2020 2070 7269 6e74 2865 290d         print(e).
-0001aa00: 0a0d 0a20 2020 2020 2020 2061 6c6c 6f77  ...        allow
-0001aa10: 6564 5f70 6f73 6974 696f 6e73 203d 205b  ed_positions = [
-0001aa20: 0d0a 2020 2020 2020 2020 2020 2020 2274  ..            "t
-0001aa30: 6f70 6c65 6674 222c 0d0a 2020 2020 2020  opleft",..      
-0001aa40: 2020 2020 2020 2274 6f70 7269 6768 7422        "topright"
-0001aa50: 2c0d 0a20 2020 2020 2020 2020 2020 2022  ,..            "
-0001aa60: 626f 7474 6f6d 6c65 6674 222c 0d0a 2020  bottomleft",..  
-0001aa70: 2020 2020 2020 2020 2020 2262 6f74 746f            "botto
-0001aa80: 6d72 6967 6874 222c 0d0a 2020 2020 2020  mright",..      
-0001aa90: 2020 5d0d 0a20 2020 2020 2020 2069 6620    ]..        if 
-0001aaa0: 706f 7369 7469 6f6e 206e 6f74 2069 6e20  position not in 
-0001aab0: 616c 6c6f 7765 645f 706f 7369 7469 6f6e  allowed_position
-0001aac0: 733a 0d0a 2020 2020 2020 2020 2020 2020  s:..            
-0001aad0: 7072 696e 7428 0d0a 2020 2020 2020 2020  print(..        
-0001aae0: 2020 2020 2020 2020 2254 6865 2070 6f73          "The pos
-0001aaf0: 6974 696f 6e20 6d75 7374 2062 6520 6f6e  ition must be on
-0001ab00: 6520 6f66 2074 6865 2066 6f6c 6c6f 7769  e of the followi
-0001ab10: 6e67 3a20 7b7d 222e 666f 726d 6174 280d  ng: {}".format(.
-0001ab20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001ab30: 2020 2020 2022 2c20 222e 6a6f 696e 2861       ", ".join(a
-0001ab40: 6c6c 6f77 6564 5f70 6f73 6974 696f 6e73  llowed_positions
-0001ab50: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-0001ab60: 2020 2029 0d0a 2020 2020 2020 2020 2020     )..          
-0001ab70: 2020 290d 0a20 2020 2020 2020 2020 2020    )..           
-0001ab80: 2072 6574 7572 6e0d 0a0d 0a20 2020 2020   return....     
-0001ab90: 2020 2068 6561 6465 7220 3d20 5b5d 0d0a     header = []..
-0001aba0: 2020 2020 2020 2020 636f 6e74 656e 7420          content 
-0001abb0: 3d20 5b5d 0d0a 2020 2020 2020 2020 666f  = []..        fo
-0001abc0: 6f74 6572 203d 205b 5d0d 0a0d 0a20 2020  oter = []....   
-0001abd0: 2020 2020 2077 6974 6820 6f70 656e 286c       with open(l
-0001abe0: 6567 656e 645f 7465 6d70 6c61 7465 2920  egend_template) 
-0001abf0: 6173 2066 3a0d 0a20 2020 2020 2020 2020  as f:..         
-0001ac00: 2020 206c 696e 6573 203d 2066 2e72 6561     lines = f.rea
-0001ac10: 646c 696e 6573 2829 0d0a 2020 2020 2020  dlines()..      
-0001ac20: 2020 2020 2020 6c69 6e65 735b 335d 203d        lines[3] =
-0001ac30: 206c 696e 6573 5b33 5d2e 7265 706c 6163   lines[3].replac
-0001ac40: 6528 224c 6567 656e 6422 2c20 6c65 6765  e("Legend", lege
-0001ac50: 6e64 5f74 6974 6c65 290d 0a20 2020 2020  nd_title)..     
-0001ac60: 2020 2020 2020 2068 6561 6465 7220 3d20         header = 
-0001ac70: 6c69 6e65 735b 3a36 5d0d 0a20 2020 2020  lines[:6]..     
-0001ac80: 2020 2020 2020 2066 6f6f 7465 7220 3d20         footer = 
-0001ac90: 6c69 6e65 735b 3131 3a5d 0d0a 0d0a 2020  lines[11:]....  
-0001aca0: 2020 2020 2020 666f 7220 696e 6465 782c        for index,
-0001acb0: 206b 6579 2069 6e20 656e 756d 6572 6174   key in enumerat
-0001acc0: 6528 6c65 6765 6e64 5f6b 6579 7329 3a0d  e(legend_keys):.
-0001acd0: 0a20 2020 2020 2020 2020 2020 2063 6f6c  .            col
-0001ace0: 6f72 203d 206c 6567 656e 645f 636f 6c6f  or = legend_colo
-0001acf0: 7273 5b69 6e64 6578 5d0d 0a20 2020 2020  rs[index]..     
-0001ad00: 2020 2020 2020 2069 6620 6e6f 7420 636f         if not co
-0001ad10: 6c6f 722e 7374 6172 7473 7769 7468 2822  lor.startswith("
-0001ad20: 2322 293a 0d0a 2020 2020 2020 2020 2020  #"):..          
-0001ad30: 2020 2020 2020 636f 6c6f 7220 3d20 2223        color = "#
-0001ad40: 2220 2b20 636f 6c6f 720d 0a20 2020 2020  " + color..     
-0001ad50: 2020 2020 2020 2069 7465 6d20 3d20 2220         item = " 
-0001ad60: 2020 2020 203c 6c69 3e3c 7370 616e 2073       <li><span s
-0001ad70: 7479 6c65 3d27 6261 636b 6772 6f75 6e64  tyle='background
-0001ad80: 3a7b 7d3b 273e 3c2f 7370 616e 3e7b 7d3c  :{};'></span>{}<
-0001ad90: 2f6c 693e 5c6e 222e 666f 726d 6174 280d  /li>\n".format(.
-0001ada0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001adb0: 2063 6f6c 6f72 2c20 6b65 790d 0a20 2020   color, key..   
-0001adc0: 2020 2020 2020 2020 2029 0d0a 2020 2020           )..    
-0001add0: 2020 2020 2020 2020 636f 6e74 656e 742e          content.
-0001ade0: 6170 7065 6e64 2869 7465 6d29 0d0a 0d0a  append(item)....
-0001adf0: 2020 2020 2020 2020 6c65 6765 6e64 5f68          legend_h
-0001ae00: 746d 6c20 3d20 6865 6164 6572 202b 2063  tml = header + c
-0001ae10: 6f6e 7465 6e74 202b 2066 6f6f 7465 720d  ontent + footer.
-0001ae20: 0a20 2020 2020 2020 206c 6567 656e 645f  .        legend_
-0001ae30: 7465 7874 203d 2022 222e 6a6f 696e 286c  text = "".join(l
-0001ae40: 6567 656e 645f 6874 6d6c 290d 0a0d 0a20  egend_html).... 
-0001ae50: 2020 2020 2020 2074 7279 3a0d 0a0d 0a20         try:.... 
-0001ae60: 2020 2020 2020 2020 2020 206c 6567 656e             legen
-0001ae70: 645f 6f75 7470 7574 5f77 6964 6765 7420  d_output_widget 
-0001ae80: 3d20 7769 6467 6574 732e 4f75 7470 7574  = widgets.Output
-0001ae90: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
-0001aea0: 2020 206c 6179 6f75 743d 7b0d 0a20 2020     layout={..   
-0001aeb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001aec0: 2023 2022 626f 7264 6572 223a 2022 3170   # "border": "1p
-0001aed0: 7820 736f 6c69 6420 626c 6163 6b22 2c0d  x solid black",.
-0001aee0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001aef0: 2020 2020 2022 6d61 785f 7769 6474 6822       "max_width"
-0001af00: 3a20 6d61 785f 7769 6474 682c 0d0a 2020  : max_width,..  
-0001af10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001af20: 2020 226d 696e 5f77 6964 7468 223a 206d    "min_width": m
-0001af30: 696e 5f77 6964 7468 2c0d 0a20 2020 2020  in_width,..     
-0001af40: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0001af50: 6d61 785f 6865 6967 6874 223a 206d 6178  max_height": max
-0001af60: 5f68 6569 6768 742c 0d0a 2020 2020 2020  _height,..      
-0001af70: 2020 2020 2020 2020 2020 2020 2020 226d                "m
-0001af80: 696e 5f68 6569 6768 7422 3a20 6d69 6e5f  in_height": min_
-0001af90: 6865 6967 6874 2c0d 0a20 2020 2020 2020  height,..       
-0001afa0: 2020 2020 2020 2020 2020 2020 2022 6865               "he
-0001afb0: 6967 6874 223a 2068 6569 6768 742c 0d0a  ight": height,..
-0001afc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001afd0: 2020 2020 2277 6964 7468 223a 2077 6964      "width": wid
-0001afe0: 7468 2c0d 0a20 2020 2020 2020 2020 2020  th,..           
-0001aff0: 2020 2020 2020 2020 2022 6f76 6572 666c           "overfl
-0001b000: 6f77 223a 2022 7363 726f 6c6c 222c 0d0a  ow": "scroll",..
-0001b010: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b020: 7d0d 0a20 2020 2020 2020 2020 2020 2029  }..            )
-0001b030: 0d0a 2020 2020 2020 2020 2020 2020 6c65  ..            le
-0001b040: 6765 6e64 5f63 6f6e 7472 6f6c 203d 2069  gend_control = i
-0001b050: 7079 6c65 6166 6c65 742e 5769 6467 6574  pyleaflet.Widget
-0001b060: 436f 6e74 726f 6c28 0d0a 2020 2020 2020  Control(..      
-0001b070: 2020 2020 2020 2020 2020 7769 6467 6574            widget
-0001b080: 3d6c 6567 656e 645f 6f75 7470 7574 5f77  =legend_output_w
-0001b090: 6964 6765 742c 2070 6f73 6974 696f 6e3d  idget, position=
-0001b0a0: 706f 7369 7469 6f6e 0d0a 2020 2020 2020  position..      
-0001b0b0: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
-0001b0c0: 2020 2020 206c 6567 656e 645f 7769 6467       legend_widg
-0001b0d0: 6574 203d 2077 6964 6765 7473 2e48 544d  et = widgets.HTM
-0001b0e0: 4c28 7661 6c75 653d 6c65 6765 6e64 5f74  L(value=legend_t
-0001b0f0: 6578 7429 0d0a 2020 2020 2020 2020 2020  ext)..          
-0001b100: 2020 7769 7468 206c 6567 656e 645f 6f75    with legend_ou
-0001b110: 7470 7574 5f77 6964 6765 743a 0d0a 2020  tput_widget:..  
-0001b120: 2020 2020 2020 2020 2020 2020 2020 6469                di
-0001b130: 7370 6c61 7928 6c65 6765 6e64 5f77 6964  splay(legend_wid
-0001b140: 6765 7429 0d0a 0d0a 2020 2020 2020 2020  get)....        
-0001b150: 2020 2020 7365 6c66 2e6c 6567 656e 645f      self.legend_
-0001b160: 7769 6467 6574 203d 206c 6567 656e 645f  widget = legend_
-0001b170: 6f75 7470 7574 5f77 6964 6765 740d 0a20  output_widget.. 
-0001b180: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0001b190: 6c65 6765 6e64 5f63 6f6e 7472 6f6c 203d  legend_control =
-0001b1a0: 206c 6567 656e 645f 636f 6e74 726f 6c0d   legend_control.
-0001b1b0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-0001b1c0: 662e 6164 645f 636f 6e74 726f 6c28 6c65  f.add_control(le
-0001b1d0: 6765 6e64 5f63 6f6e 7472 6f6c 290d 0a0d  gend_control)...
-0001b1e0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0001b1f0: 6c61 7965 725f 6e61 6d65 2069 6e20 7365  layer_name in se
-0001b200: 6c66 2e65 655f 6c61 7965 725f 6e61 6d65  lf.ee_layer_name
-0001b210: 733a 0d0a 2020 2020 2020 2020 2020 2020  s:..            
-0001b220: 2020 2020 7365 6c66 2e65 655f 6c61 7965      self.ee_laye
-0001b230: 725f 6469 6374 5b6c 6179 6572 5f6e 616d  r_dict[layer_nam
-0001b240: 655d 5b22 6c65 6765 6e64 225d 203d 206c  e]["legend"] = l
-0001b250: 6567 656e 645f 636f 6e74 726f 6c0d 0a0d  egend_control...
-0001b260: 0a20 2020 2020 2020 2065 7863 6570 7420  .        except 
-0001b270: 4578 6365 7074 696f 6e20 6173 2065 3a0d  Exception as e:.
-0001b280: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
-0001b290: 7365 2045 7863 6570 7469 6f6e 2865 290d  se Exception(e).
-0001b2a0: 0a0d 0a20 2020 2064 6566 2061 6464 5f63  ...    def add_c
-0001b2b0: 6f6c 6f72 6261 7228 0d0a 2020 2020 2020  olorbar(..      
-0001b2c0: 2020 7365 6c66 2c0d 0a20 2020 2020 2020    self,..       
-0001b2d0: 2076 6973 5f70 6172 616d 733d 4e6f 6e65   vis_params=None
-0001b2e0: 2c0d 0a20 2020 2020 2020 2063 6d61 703d  ,..        cmap=
-0001b2f0: 2267 7261 7922 2c0d 0a20 2020 2020 2020  "gray",..       
-0001b300: 2064 6973 6372 6574 653d 4661 6c73 652c   discrete=False,
-0001b310: 0d0a 2020 2020 2020 2020 6c61 6265 6c3d  ..        label=
-0001b320: 4e6f 6e65 2c0d 0a20 2020 2020 2020 206f  None,..        o
-0001b330: 7269 656e 7461 7469 6f6e 3d22 686f 7269  rientation="hori
-0001b340: 7a6f 6e74 616c 222c 0d0a 2020 2020 2020  zontal",..      
-0001b350: 2020 706f 7369 7469 6f6e 3d22 626f 7474    position="bott
-0001b360: 6f6d 7269 6768 7422 2c0d 0a20 2020 2020  omright",..     
-0001b370: 2020 2074 7261 6e73 7061 7265 6e74 5f62     transparent_b
-0001b380: 673d 4661 6c73 652c 0d0a 2020 2020 2020  g=False,..      
-0001b390: 2020 6c61 7965 725f 6e61 6d65 3d4e 6f6e    layer_name=Non
-0001b3a0: 652c 0d0a 2020 2020 2020 2020 2a2a 6b77  e,..        **kw
-0001b3b0: 6172 6773 2c0d 0a20 2020 2029 3a0d 0a20  args,..    ):.. 
-0001b3c0: 2020 2020 2020 2022 2222 4164 6420 6120         """Add a 
-0001b3d0: 6d61 7470 6c6f 746c 6962 2063 6f6c 6f72  matplotlib color
-0001b3e0: 6261 7220 746f 2074 6865 206d 6170 0d0a  bar to the map..
-0001b3f0: 0d0a 2020 2020 2020 2020 4172 6773 3a0d  ..        Args:.
-0001b400: 0a20 2020 2020 2020 2020 2020 2076 6973  .            vis
-0001b410: 5f70 6172 616d 7320 2864 6963 7429 3a20  _params (dict): 
-0001b420: 5669 7375 616c 697a 6174 696f 6e20 7061  Visualization pa
-0001b430: 7261 6d65 7465 7273 2061 7320 6120 6469  rameters as a di
-0001b440: 6374 696f 6e61 7279 2e20 5365 6520 6874  ctionary. See ht
-0001b450: 7470 733a 2f2f 6465 7665 6c6f 7065 7273  tps://developers
-0001b460: 2e67 6f6f 676c 652e 636f 6d2f 6561 7274  .google.com/eart
-0001b470: 682d 656e 6769 6e65 2f67 7569 6465 732f  h-engine/guides/
-0001b480: 696d 6167 655f 7669 7375 616c 697a 6174  image_visualizat
-0001b490: 696f 6e20 666f 7220 6f70 7469 6f6e 732e  ion for options.
-0001b4a0: 0d0a 2020 2020 2020 2020 2020 2020 636d  ..            cm
-0001b4b0: 6170 2028 7374 722c 206f 7074 696f 6e61  ap (str, optiona
-0001b4c0: 6c29 3a20 4d61 7470 6c6f 746c 6962 2063  l): Matplotlib c
-0001b4d0: 6f6c 6f72 6d61 702e 2044 6566 6175 6c74  olormap. Default
-0001b4e0: 7320 746f 2022 6772 6179 222e 2053 6565  s to "gray". See
-0001b4f0: 2068 7474 7073 3a2f 2f6d 6174 706c 6f74   https://matplot
-0001b500: 6c69 622e 6f72 672f 332e 332e 342f 7475  lib.org/3.3.4/tu
-0001b510: 746f 7269 616c 732f 636f 6c6f 7273 2f63  torials/colors/c
-0001b520: 6f6c 6f72 6d61 7073 2e68 746d 6c23 7370  olormaps.html#sp
-0001b530: 6878 2d67 6c72 2d74 7574 6f72 6961 6c73  hx-glr-tutorials
-0001b540: 2d63 6f6c 6f72 732d 636f 6c6f 726d 6170  -colors-colormap
-0001b550: 732d 7079 2066 6f72 206f 7074 696f 6e73  s-py for options
-0001b560: 2e0d 0a20 2020 2020 2020 2020 2020 2064  ...            d
-0001b570: 6973 6372 6574 6520 2862 6f6f 6c2c 206f  iscrete (bool, o
-0001b580: 7074 696f 6e61 6c29 3a20 5768 6574 6865  ptional): Whethe
-0001b590: 7220 746f 2063 7265 6174 6520 6120 6469  r to create a di
-0001b5a0: 7363 7265 7465 2063 6f6c 6f72 6261 722e  screte colorbar.
-0001b5b0: 2044 6566 6175 6c74 7320 746f 2046 616c   Defaults to Fal
-0001b5c0: 7365 2e0d 0a20 2020 2020 2020 2020 2020  se...           
-0001b5d0: 206c 6162 656c 2028 7374 722c 206f 7074   label (str, opt
-0001b5e0: 696f 6e61 6c29 3a20 4c61 6265 6c20 666f  ional): Label fo
-0001b5f0: 7220 7468 6520 636f 6c6f 7262 6172 2e20  r the colorbar. 
-0001b600: 4465 6661 756c 7473 2074 6f20 4e6f 6e65  Defaults to None
-0001b610: 2e0d 0a20 2020 2020 2020 2020 2020 206f  ...            o
-0001b620: 7269 656e 7461 7469 6f6e 2028 7374 722c  rientation (str,
-0001b630: 206f 7074 696f 6e61 6c29 3a20 4f72 6965   optional): Orie
-0001b640: 6e74 6174 696f 6e20 6f66 2074 6865 2063  ntation of the c
-0001b650: 6f6c 6f72 6261 722c 2073 7563 6820 6173  olorbar, such as
-0001b660: 2022 7665 7274 6963 616c 2220 616e 6420   "vertical" and 
-0001b670: 2268 6f72 697a 6f6e 7461 6c22 2e20 4465  "horizontal". De
-0001b680: 6661 756c 7473 2074 6f20 2268 6f72 697a  faults to "horiz
-0001b690: 6f6e 7461 6c22 2e0d 0a20 2020 2020 2020  ontal"...       
-0001b6a0: 2020 2020 2070 6f73 6974 696f 6e20 2873       position (s
-0001b6b0: 7472 2c20 6f70 7469 6f6e 616c 293a 2050  tr, optional): P
-0001b6c0: 6f73 6974 696f 6e20 6f66 2074 6865 2063  osition of the c
-0001b6d0: 6f6c 6f72 6261 7220 6f6e 2074 6865 206d  olorbar on the m
-0001b6e0: 6170 2e20 4974 2063 616e 2062 6520 6f6e  ap. It can be on
-0001b6f0: 6520 6f66 3a20 746f 706c 6566 742c 2074  e of: topleft, t
-0001b700: 6f70 7269 6768 742c 2062 6f74 746f 6d6c  opright, bottoml
-0001b710: 6566 742c 2061 6e64 2062 6f74 746f 6d72  eft, and bottomr
-0001b720: 6967 6874 2e20 4465 6661 756c 7473 2074  ight. Defaults t
-0001b730: 6f20 2262 6f74 746f 6d72 6967 6874 222e  o "bottomright".
-0001b740: 0d0a 2020 2020 2020 2020 2020 2020 7472  ..            tr
-0001b750: 616e 7370 6172 656e 745f 6267 2028 626f  ansparent_bg (bo
-0001b760: 6f6c 2c20 6f70 7469 6f6e 616c 293a 2057  ol, optional): W
-0001b770: 6865 7468 6572 2074 6f20 7573 6520 7472  hether to use tr
-0001b780: 616e 7370 6172 656e 7420 6261 636b 6772  ansparent backgr
-0001b790: 6f75 6e64 2e20 4465 6661 756c 7473 2074  ound. Defaults t
-0001b7a0: 6f20 4661 6c73 652e 0d0a 2020 2020 2020  o False...      
-0001b7b0: 2020 2020 2020 6c61 7965 725f 6e61 6d65        layer_name
-0001b7c0: 2028 7374 722c 206f 7074 696f 6e61 6c29   (str, optional)
-0001b7d0: 3a20 5468 6520 6c61 7965 7220 6e61 6d65  : The layer name
-0001b7e0: 2061 7373 6f63 6961 7465 6420 7769 7468   associated with
-0001b7f0: 2074 6865 2063 6f6c 6f72 6261 722e 2044   the colorbar. D
-0001b800: 6566 6175 6c74 7320 746f 204e 6f6e 652e  efaults to None.
-0001b810: 0d0a 0d0a 2020 2020 2020 2020 5261 6973  ....        Rais
-0001b820: 6573 3a0d 0a20 2020 2020 2020 2020 2020  es:..           
-0001b830: 2054 7970 6545 7272 6f72 3a20 4966 2074   TypeError: If t
-0001b840: 6865 2076 6973 5f70 6172 616d 7320 6973  he vis_params is
-0001b850: 206e 6f74 2061 2064 6963 7469 6f6e 6172   not a dictionar
-0001b860: 792e 0d0a 2020 2020 2020 2020 2020 2020  y...            
-0001b870: 5661 6c75 6545 7272 6f72 3a20 4966 2074  ValueError: If t
-0001b880: 6865 206f 7269 656e 7461 7469 6f6e 2069  he orientation i
-0001b890: 7320 6e6f 7420 6569 7468 6572 2068 6f72  s not either hor
-0001b8a0: 697a 6f6e 7461 6c20 6f72 2076 6572 7469  izontal or verti
-0001b8b0: 6361 6c2e 0d0a 2020 2020 2020 2020 2020  cal...          
-0001b8c0: 2020 5661 6c75 6545 7272 6f72 3a20 4966    ValueError: If
-0001b8d0: 2074 6865 2070 726f 7669 6465 6420 6d69   the provided mi
-0001b8e0: 6e20 7661 6c75 6520 6973 206e 6f74 2073  n value is not s
-0001b8f0: 6361 6c61 7220 7479 7065 2e0d 0a20 2020  calar type...   
-0001b900: 2020 2020 2020 2020 2056 616c 7565 4572           ValueEr
-0001b910: 726f 723a 2049 6620 7468 6520 7072 6f76  ror: If the prov
-0001b920: 6964 6564 206d 6178 2076 616c 7565 2069  ided max value i
-0001b930: 7320 6e6f 7420 7363 616c 6172 2074 7970  s not scalar typ
-0001b940: 652e 0d0a 2020 2020 2020 2020 2020 2020  e...            
-0001b950: 5661 6c75 6545 7272 6f72 3a20 4966 2074  ValueError: If t
-0001b960: 6865 2070 726f 7669 6465 6420 6f70 6163  he provided opac
-0001b970: 6974 7920 7661 6c75 6520 6973 206e 6f74  ity value is not
-0001b980: 2073 6361 6c61 7220 7479 7065 2e0d 0a20   scalar type... 
-0001b990: 2020 2020 2020 2020 2020 2056 616c 7565             Value
-0001b9a0: 4572 726f 723a 2049 6620 636d 6170 206f  Error: If cmap o
-0001b9b0: 7220 7061 6c65 7474 6520 6973 206e 6f74  r palette is not
-0001b9c0: 2070 726f 7669 6465 642e 0d0a 2020 2020   provided...    
-0001b9d0: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
-0001b9e0: 2069 6d70 6f72 7420 6d61 7470 6c6f 746c   import matplotl
-0001b9f0: 6962 2061 7320 6d70 6c0d 0a20 2020 2020  ib as mpl..     
-0001ba00: 2020 2069 6d70 6f72 7420 6d61 7470 6c6f     import matplo
-0001ba10: 746c 6962 2e70 7970 6c6f 7420 6173 2070  tlib.pyplot as p
-0001ba20: 6c74 0d0a 2020 2020 2020 2020 696d 706f  lt..        impo
-0001ba30: 7274 206e 756d 7079 2061 7320 6e70 0d0a  rt numpy as np..
-0001ba40: 0d0a 2020 2020 2020 2020 6966 2069 7369  ..        if isi
-0001ba50: 6e73 7461 6e63 6528 7669 735f 7061 7261  nstance(vis_para
-0001ba60: 6d73 2c20 6c69 7374 293a 0d0a 2020 2020  ms, list):..    
-0001ba70: 2020 2020 2020 2020 7669 735f 7061 7261          vis_para
-0001ba80: 6d73 203d 207b 2270 616c 6574 7465 223a  ms = {"palette":
-0001ba90: 2076 6973 5f70 6172 616d 737d 0d0a 2020   vis_params}..  
-0001baa0: 2020 2020 2020 656c 6966 2069 7369 6e73        elif isins
-0001bab0: 7461 6e63 6528 7669 735f 7061 7261 6d73  tance(vis_params
-0001bac0: 2c20 7475 706c 6529 3a0d 0a20 2020 2020  , tuple):..     
-0001bad0: 2020 2020 2020 2076 6973 5f70 6172 616d         vis_param
-0001bae0: 7320 3d20 7b22 7061 6c65 7474 6522 3a20  s = {"palette": 
-0001baf0: 6c69 7374 2876 6973 5f70 6172 616d 7329  list(vis_params)
-0001bb00: 7d0d 0a20 2020 2020 2020 2065 6c69 6620  }..        elif 
-0001bb10: 7669 735f 7061 7261 6d73 2069 7320 4e6f  vis_params is No
-0001bb20: 6e65 3a0d 0a20 2020 2020 2020 2020 2020  ne:..           
-0001bb30: 2076 6973 5f70 6172 616d 7320 3d20 7b7d   vis_params = {}
-0001bb40: 0d0a 0d0a 2020 2020 2020 2020 6966 2022  ....        if "
-0001bb50: 636f 6c6f 7273 2220 696e 206b 7761 7267  colors" in kwarg
-0001bb60: 7320 616e 6420 6973 696e 7374 616e 6365  s and isinstance
-0001bb70: 286b 7761 7267 735b 2263 6f6c 6f72 7322  (kwargs["colors"
-0001bb80: 5d2c 206c 6973 7429 3a0d 0a20 2020 2020  ], list):..     
-0001bb90: 2020 2020 2020 2076 6973 5f70 6172 616d         vis_param
-0001bba0: 735b 2270 616c 6574 7465 225d 203d 206b  s["palette"] = k
-0001bbb0: 7761 7267 735b 2263 6f6c 6f72 7322 5d0d  wargs["colors"].
-0001bbc0: 0a0d 0a20 2020 2020 2020 2069 6620 2263  ...        if "c
-0001bbd0: 6f6c 6f72 7322 2069 6e20 6b77 6172 6773  olors" in kwargs
-0001bbe0: 2061 6e64 2069 7369 6e73 7461 6e63 6528   and isinstance(
-0001bbf0: 6b77 6172 6773 5b22 636f 6c6f 7273 225d  kwargs["colors"]
-0001bc00: 2c20 7475 706c 6529 3a0d 0a20 2020 2020  , tuple):..     
-0001bc10: 2020 2020 2020 2076 6973 5f70 6172 616d         vis_param
-0001bc20: 735b 2270 616c 6574 7465 225d 203d 206c  s["palette"] = l
-0001bc30: 6973 7428 6b77 6172 6773 5b22 636f 6c6f  ist(kwargs["colo
-0001bc40: 7273 225d 290d 0a0d 0a20 2020 2020 2020  rs"])....       
-0001bc50: 2069 6620 2276 6d69 6e22 2069 6e20 6b77   if "vmin" in kw
-0001bc60: 6172 6773 3a0d 0a20 2020 2020 2020 2020  args:..         
-0001bc70: 2020 2076 6973 5f70 6172 616d 735b 226d     vis_params["m
-0001bc80: 696e 225d 203d 206b 7761 7267 735b 2276  in"] = kwargs["v
-0001bc90: 6d69 6e22 5d0d 0a20 2020 2020 2020 2020  min"]..         
-0001bca0: 2020 2064 656c 206b 7761 7267 735b 2276     del kwargs["v
-0001bcb0: 6d69 6e22 5d0d 0a0d 0a20 2020 2020 2020  min"]....       
-0001bcc0: 2069 6620 2276 6d61 7822 2069 6e20 6b77   if "vmax" in kw
-0001bcd0: 6172 6773 3a0d 0a20 2020 2020 2020 2020  args:..         
-0001bce0: 2020 2076 6973 5f70 6172 616d 735b 226d     vis_params["m
-0001bcf0: 6178 225d 203d 206b 7761 7267 735b 2276  ax"] = kwargs["v
-0001bd00: 6d61 7822 5d0d 0a20 2020 2020 2020 2020  max"]..         
-0001bd10: 2020 2064 656c 206b 7761 7267 735b 2276     del kwargs["v
-0001bd20: 6d61 7822 5d0d 0a0d 0a20 2020 2020 2020  max"]....       
-0001bd30: 2069 6620 2263 6170 7469 6f6e 2220 696e   if "caption" in
-0001bd40: 206b 7761 7267 733a 0d0a 2020 2020 2020   kwargs:..      
-0001bd50: 2020 2020 2020 6c61 6265 6c20 3d20 6b77        label = kw
-0001bd60: 6172 6773 5b22 6361 7074 696f 6e22 5d0d  args["caption"].
-0001bd70: 0a20 2020 2020 2020 2020 2020 2064 656c  .            del
-0001bd80: 206b 7761 7267 735b 2263 6170 7469 6f6e   kwargs["caption
-0001bd90: 225d 0d0a 0d0a 2020 2020 2020 2020 6966  "]....        if
-0001bda0: 206e 6f74 2069 7369 6e73 7461 6e63 6528   not isinstance(
-0001bdb0: 7669 735f 7061 7261 6d73 2c20 6469 6374  vis_params, dict
-0001bdc0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-0001bdd0: 7261 6973 6520 5479 7065 4572 726f 7228  raise TypeError(
-0001bde0: 2254 6865 2076 6973 5f70 6172 616d 7320  "The vis_params 
-0001bdf0: 6d75 7374 2062 6520 6120 6469 6374 696f  must be a dictio
-0001be00: 6e61 7279 2e22 290d 0a0d 0a20 2020 2020  nary.")....     
-0001be10: 2020 2069 6620 6f72 6965 6e74 6174 696f     if orientatio
-0001be20: 6e20 6e6f 7420 696e 205b 2268 6f72 697a  n not in ["horiz
-0001be30: 6f6e 7461 6c22 2c20 2276 6572 7469 6361  ontal", "vertica
-0001be40: 6c22 5d3a 0d0a 2020 2020 2020 2020 2020  l"]:..          
-0001be50: 2020 7261 6973 6520 5661 6c75 6545 7272    raise ValueErr
-0001be60: 6f72 2822 5468 6520 6f72 6965 6e74 6174  or("The orientat
-0001be70: 696f 6e20 6d75 7374 2062 6520 6569 7468  ion must be eith
-0001be80: 6572 2068 6f72 697a 6f6e 7461 6c20 6f72  er horizontal or
-0001be90: 2076 6572 7469 6361 6c2e 2229 0d0a 0d0a   vertical.")....
-0001bea0: 2020 2020 2020 2020 6966 206f 7269 656e          if orien
-0001beb0: 7461 7469 6f6e 203d 3d20 2268 6f72 697a  tation == "horiz
-0001bec0: 6f6e 7461 6c22 3a0d 0a20 2020 2020 2020  ontal":..       
-0001bed0: 2020 2020 2077 6964 7468 2c20 6865 6967       width, heig
-0001bee0: 6874 203d 2036 2e30 2c20 302e 340d 0a20  ht = 6.0, 0.4.. 
-0001bef0: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
-0001bf00: 2020 2020 2020 2020 2020 7769 6474 682c            width,
-0001bf10: 2068 6569 6768 7420 3d20 302e 342c 2034   height = 0.4, 4
-0001bf20: 2e30 0d0a 0d0a 2020 2020 2020 2020 6966  .0....        if
-0001bf30: 2022 7769 6474 6822 2069 6e20 6b77 6172   "width" in kwar
-0001bf40: 6773 3a0d 0a20 2020 2020 2020 2020 2020  gs:..           
-0001bf50: 2077 6964 7468 203d 206b 7761 7267 735b   width = kwargs[
-0001bf60: 2277 6964 7468 225d 0d0a 2020 2020 2020  "width"]..      
-0001bf70: 2020 2020 2020 6b77 6172 6773 2e70 6f70        kwargs.pop
-0001bf80: 2822 7769 6474 6822 290d 0a0d 0a20 2020  ("width")....   
-0001bf90: 2020 2020 2069 6620 2268 6569 6768 7422       if "height"
-0001bfa0: 2069 6e20 6b77 6172 6773 3a0d 0a20 2020   in kwargs:..   
-0001bfb0: 2020 2020 2020 2020 2068 6569 6768 7420           height 
-0001bfc0: 3d20 6b77 6172 6773 5b22 6865 6967 6874  = kwargs["height
-0001bfd0: 225d 0d0a 2020 2020 2020 2020 2020 2020  "]..            
-0001bfe0: 6b77 6172 6773 2e70 6f70 2822 6865 6967  kwargs.pop("heig
-0001bff0: 6874 2229 0d0a 0d0a 2020 2020 2020 2020  ht")....        
-0001c000: 7669 735f 6b65 7973 203d 206c 6973 7428  vis_keys = list(
-0001c010: 7669 735f 7061 7261 6d73 2e6b 6579 7328  vis_params.keys(
-0001c020: 2929 0d0a 0d0a 2020 2020 2020 2020 6966  ))....        if
-0001c030: 2022 6d69 6e22 2069 6e20 7669 735f 7061   "min" in vis_pa
-0001c040: 7261 6d73 3a0d 0a20 2020 2020 2020 2020  rams:..         
-0001c050: 2020 2076 6d69 6e20 3d20 7669 735f 7061     vmin = vis_pa
-0001c060: 7261 6d73 5b22 6d69 6e22 5d0d 0a20 2020  rams["min"]..   
-0001c070: 2020 2020 2020 2020 2069 6620 7479 7065           if type
-0001c080: 2876 6d69 6e29 206e 6f74 2069 6e20 2869  (vmin) not in (i
-0001c090: 6e74 2c20 666c 6f61 7429 3a0d 0a20 2020  nt, float):..   
-0001c0a0: 2020 2020 2020 2020 2020 2020 2072 6169               rai
-0001c0b0: 7365 2056 616c 7565 4572 726f 7228 2254  se ValueError("T
-0001c0c0: 6865 2070 726f 7669 6465 6420 6d69 6e20  he provided min 
-0001c0d0: 7661 6c75 6520 6d75 7374 2062 6520 7363  value must be sc
-0001c0e0: 616c 6172 2074 7970 652e 2229 0d0a 2020  alar type.")..  
-0001c0f0: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
-0001c100: 2020 2020 2020 2020 2076 6d69 6e20 3d20           vmin = 
-0001c110: 300d 0a0d 0a20 2020 2020 2020 2069 6620  0....        if 
-0001c120: 226d 6178 2220 696e 2076 6973 5f70 6172  "max" in vis_par
-0001c130: 616d 733a 0d0a 2020 2020 2020 2020 2020  ams:..          
-0001c140: 2020 766d 6178 203d 2076 6973 5f70 6172    vmax = vis_par
-0001c150: 616d 735b 226d 6178 225d 0d0a 2020 2020  ams["max"]..    
-0001c160: 2020 2020 2020 2020 6966 2074 7970 6528          if type(
-0001c170: 766d 6178 2920 6e6f 7420 696e 2028 696e  vmax) not in (in
-0001c180: 742c 2066 6c6f 6174 293a 0d0a 2020 2020  t, float):..    
-0001c190: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-0001c1a0: 6520 5661 6c75 6545 7272 6f72 2822 5468  e ValueError("Th
-0001c1b0: 6520 7072 6f76 6964 6564 206d 6178 2076  e provided max v
-0001c1c0: 616c 7565 206d 7573 7420 6265 2073 6361  alue must be sca
-0001c1d0: 6c61 7220 7479 7065 2e22 290d 0a20 2020  lar type.")..   
-0001c1e0: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
-0001c1f0: 2020 2020 2020 2020 766d 6178 203d 2031          vmax = 1
-0001c200: 0d0a 0d0a 2020 2020 2020 2020 6966 2022  ....        if "
-0001c210: 6f70 6163 6974 7922 2069 6e20 7669 735f  opacity" in vis_
-0001c220: 7061 7261 6d73 3a0d 0a20 2020 2020 2020  params:..       
-0001c230: 2020 2020 2061 6c70 6861 203d 2076 6973       alpha = vis
-0001c240: 5f70 6172 616d 735b 226f 7061 6369 7479  _params["opacity
-0001c250: 225d 0d0a 2020 2020 2020 2020 2020 2020  "]..            
-0001c260: 6966 2074 7970 6528 616c 7068 6129 206e  if type(alpha) n
-0001c270: 6f74 2069 6e20 2869 6e74 2c20 666c 6f61  ot in (int, floa
-0001c280: 7429 3a0d 0a20 2020 2020 2020 2020 2020  t):..           
-0001c290: 2020 2020 2072 6169 7365 2056 616c 7565       raise Value
-0001c2a0: 4572 726f 7228 2254 6865 2070 726f 7669  Error("The provi
-0001c2b0: 6465 6420 6f70 6163 6974 7920 7661 6c75  ded opacity valu
-0001c2c0: 6520 6d75 7374 2062 6520 7479 7065 2073  e must be type s
-0001c2d0: 6361 6c61 722e 2229 0d0a 2020 2020 2020  calar.")..      
-0001c2e0: 2020 656c 6966 2022 616c 7068 6122 2069    elif "alpha" i
-0001c2f0: 6e20 6b77 6172 6773 3a0d 0a20 2020 2020  n kwargs:..     
-0001c300: 2020 2020 2020 2061 6c70 6861 203d 206b         alpha = k
-0001c310: 7761 7267 735b 2261 6c70 6861 225d 0d0a  wargs["alpha"]..
-0001c320: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
-0001c330: 2020 2020 2020 2020 2020 2061 6c70 6861             alpha
-0001c340: 203d 2031 0d0a 0d0a 2020 2020 2020 2020   = 1....        
-0001c350: 6966 2063 6d61 7020 6973 206e 6f74 204e  if cmap is not N
-0001c360: 6f6e 653a 0d0a 0d0a 2020 2020 2020 2020  one:....        
-0001c370: 2020 2020 636d 6170 203d 206d 706c 2e70      cmap = mpl.p
-0001c380: 7970 6c6f 742e 6765 745f 636d 6170 2863  yplot.get_cmap(c
-0001c390: 6d61 7029 0d0a 2020 2020 2020 2020 2020  map)..          
-0001c3a0: 2020 6e6f 726d 203d 206d 706c 2e63 6f6c    norm = mpl.col
-0001c3b0: 6f72 732e 4e6f 726d 616c 697a 6528 766d  ors.Normalize(vm
-0001c3c0: 696e 3d76 6d69 6e2c 2076 6d61 783d 766d  in=vmin, vmax=vm
-0001c3d0: 6178 290d 0a0d 0a20 2020 2020 2020 2069  ax)....        i
-0001c3e0: 6620 2270 616c 6574 7465 2220 696e 2076  f "palette" in v
-0001c3f0: 6973 5f6b 6579 733a 0d0a 2020 2020 2020  is_keys:..      
-0001c400: 2020 2020 2020 6865 7863 6f64 6573 203d        hexcodes =
-0001c410: 2074 6f5f 6865 785f 636f 6c6f 7273 2876   to_hex_colors(v
-0001c420: 6973 5f70 6172 616d 735b 2270 616c 6574  is_params["palet
-0001c430: 7465 225d 290d 0a20 2020 2020 2020 2020  te"])..         
-0001c440: 2020 2069 6620 6469 7363 7265 7465 3a0d     if discrete:.
-0001c450: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001c460: 2063 6d61 7020 3d20 6d70 6c2e 636f 6c6f   cmap = mpl.colo
-0001c470: 7273 2e4c 6973 7465 6443 6f6c 6f72 6d61  rs.ListedColorma
-0001c480: 7028 6865 7863 6f64 6573 290d 0a20 2020  p(hexcodes)..   
-0001c490: 2020 2020 2020 2020 2020 2020 2076 616c               val
-0001c4a0: 7320 3d20 6e70 2e6c 696e 7370 6163 6528  s = np.linspace(
-0001c4b0: 766d 696e 2c20 766d 6178 2c20 636d 6170  vmin, vmax, cmap
-0001c4c0: 2e4e 202b 2031 290d 0a20 2020 2020 2020  .N + 1)..       
-0001c4d0: 2020 2020 2020 2020 206e 6f72 6d20 3d20           norm = 
-0001c4e0: 6d70 6c2e 636f 6c6f 7273 2e42 6f75 6e64  mpl.colors.Bound
-0001c4f0: 6172 794e 6f72 6d28 7661 6c73 2c20 636d  aryNorm(vals, cm
-0001c500: 6170 2e4e 290d 0a0d 0a20 2020 2020 2020  ap.N)....       
-0001c510: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
-0001c520: 2020 2020 2020 2020 2020 2020 636d 6170              cmap
-0001c530: 203d 206d 706c 2e63 6f6c 6f72 732e 4c69   = mpl.colors.Li
-0001c540: 6e65 6172 5365 676d 656e 7465 6443 6f6c  nearSegmentedCol
-0001c550: 6f72 6d61 702e 6672 6f6d 5f6c 6973 7428  ormap.from_list(
-0001c560: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001c570: 2020 2020 2020 2263 7573 746f 6d22 2c20        "custom", 
-0001c580: 6865 7863 6f64 6573 2c20 4e3d 3235 360d  hexcodes, N=256.
-0001c590: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001c5a0: 2029 0d0a 2020 2020 2020 2020 2020 2020   )..            
-0001c5b0: 2020 2020 6e6f 726d 203d 206d 706c 2e63      norm = mpl.c
-0001c5c0: 6f6c 6f72 732e 4e6f 726d 616c 697a 6528  olors.Normalize(
-0001c5d0: 766d 696e 3d76 6d69 6e2c 2076 6d61 783d  vmin=vmin, vmax=
-0001c5e0: 766d 6178 290d 0a0d 0a20 2020 2020 2020  vmax)....       
-0001c5f0: 2065 6c69 6620 636d 6170 2069 7320 6e6f   elif cmap is no
-0001c600: 7420 4e6f 6e65 3a0d 0a0d 0a20 2020 2020  t None:....     
-0001c610: 2020 2020 2020 2063 6d61 7020 3d20 6d70         cmap = mp
-0001c620: 6c2e 7079 706c 6f74 2e67 6574 5f63 6d61  l.pyplot.get_cma
-0001c630: 7028 636d 6170 290d 0a20 2020 2020 2020  p(cmap)..       
-0001c640: 2020 2020 206e 6f72 6d20 3d20 6d70 6c2e       norm = mpl.
-0001c650: 636f 6c6f 7273 2e4e 6f72 6d61 6c69 7a65  colors.Normalize
-0001c660: 2876 6d69 6e3d 766d 696e 2c20 766d 6178  (vmin=vmin, vmax
-0001c670: 3d76 6d61 7829 0d0a 0d0a 2020 2020 2020  =vmax)....      
-0001c680: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
-0001c690: 2020 2020 2072 6169 7365 2056 616c 7565       raise Value
-0001c6a0: 4572 726f 7228 0d0a 2020 2020 2020 2020  Error(..        
-0001c6b0: 2020 2020 2020 2020 2763 6d61 7020 6b65          'cmap ke
-0001c6c0: 7977 6f72 6420 6f72 2022 7061 6c65 7474  yword or "palett
-0001c6d0: 6522 206b 6579 2069 6e20 7669 735f 7061  e" key in vis_pa
-0001c6e0: 7261 6d73 206d 7573 7420 6265 2070 726f  rams must be pro
-0001c6f0: 7669 6465 642e 270d 0a20 2020 2020 2020  vided.'..       
-0001c700: 2020 2020 2029 0d0a 0d0a 2020 2020 2020       )....      
-0001c710: 2020 5f2c 2061 7820 3d20 706c 742e 7375    _, ax = plt.su
-0001c720: 6270 6c6f 7473 2866 6967 7369 7a65 3d28  bplots(figsize=(
-0001c730: 7769 6474 682c 2068 6569 6768 7429 290d  width, height)).
-0001c740: 0a20 2020 2020 2020 2063 6220 3d20 6d70  .        cb = mp
-0001c750: 6c2e 636f 6c6f 7262 6172 2e43 6f6c 6f72  l.colorbar.Color
-0001c760: 6261 7242 6173 6528 0d0a 2020 2020 2020  barBase(..      
-0001c770: 2020 2020 2020 6178 2c20 6e6f 726d 3d6e        ax, norm=n
-0001c780: 6f72 6d2c 2061 6c70 6861 3d61 6c70 6861  orm, alpha=alpha
-0001c790: 2c20 636d 6170 3d63 6d61 702c 206f 7269  , cmap=cmap, ori
-0001c7a0: 656e 7461 7469 6f6e 3d6f 7269 656e 7461  entation=orienta
-0001c7b0: 7469 6f6e 2c20 2a2a 6b77 6172 6773 0d0a  tion, **kwargs..
-0001c7c0: 2020 2020 2020 2020 290d 0a0d 0a20 2020          )....   
-0001c7d0: 2020 2020 2069 6620 2262 616e 6473 2220       if "bands" 
-0001c7e0: 696e 2076 6973 5f6b 6579 733a 0d0a 2020  in vis_keys:..  
-0001c7f0: 2020 2020 2020 2020 2020 6362 2e73 6574            cb.set
-0001c800: 5f6c 6162 656c 2876 6973 5f70 6172 616d  _label(vis_param
-0001c810: 735b 2262 616e 6473 225d 290d 0a20 2020  s["bands"])..   
-0001c820: 2020 2020 2065 6c69 6620 6c61 6265 6c20       elif label 
-0001c830: 6973 206e 6f74 204e 6f6e 653a 0d0a 2020  is not None:..  
-0001c840: 2020 2020 2020 2020 2020 6362 2e73 6574            cb.set
-0001c850: 5f6c 6162 656c 286c 6162 656c 290d 0a0d  _label(label)...
-0001c860: 0a20 2020 2020 2020 206f 7574 7075 7420  .        output 
-0001c870: 3d20 7769 6467 6574 732e 4f75 7470 7574  = widgets.Output
-0001c880: 2829 0d0a 2020 2020 2020 2020 636f 6c6f  ()..        colo
-0001c890: 726d 6170 5f63 7472 6c20 3d20 6970 796c  rmap_ctrl = ipyl
-0001c8a0: 6561 666c 6574 2e57 6964 6765 7443 6f6e  eaflet.WidgetCon
-0001c8b0: 7472 6f6c 280d 0a20 2020 2020 2020 2020  trol(..         
-0001c8c0: 2020 2077 6964 6765 743d 6f75 7470 7574     widget=output
-0001c8d0: 2c0d 0a20 2020 2020 2020 2020 2020 2070  ,..            p
-0001c8e0: 6f73 6974 696f 6e3d 706f 7369 7469 6f6e  osition=position
-0001c8f0: 2c0d 0a20 2020 2020 2020 2020 2020 2074  ,..            t
-0001c900: 7261 6e73 7061 7265 6e74 5f62 673d 7472  ransparent_bg=tr
-0001c910: 616e 7370 6172 656e 745f 6267 2c0d 0a20  ansparent_bg,.. 
-0001c920: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
-0001c930: 2020 7769 7468 206f 7574 7075 743a 0d0a    with output:..
-0001c940: 2020 2020 2020 2020 2020 2020 6f75 7470              outp
-0001c950: 7574 2e63 6c65 6172 5f6f 7574 7075 7428  ut.clear_output(
-0001c960: 290d 0a20 2020 2020 2020 2020 2020 2070  )..            p
-0001c970: 6c74 2e73 686f 7728 290d 0a0d 0a20 2020  lt.show()....   
-0001c980: 2020 2020 2073 656c 662e 636f 6c6f 7262       self.colorb
-0001c990: 6172 203d 2063 6f6c 6f72 6d61 705f 6374  ar = colormap_ct
-0001c9a0: 726c 0d0a 2020 2020 2020 2020 6966 206c  rl..        if l
-0001c9b0: 6179 6572 5f6e 616d 6520 696e 2073 656c  ayer_name in sel
-0001c9c0: 662e 6565 5f6c 6179 6572 5f6e 616d 6573  f.ee_layer_names
-0001c9d0: 3a0d 0a20 2020 2020 2020 2020 2020 2069  :..            i
-0001c9e0: 6620 2263 6f6c 6f72 6261 7222 2069 6e20  f "colorbar" in 
-0001c9f0: 7365 6c66 2e65 655f 6c61 7965 725f 6469  self.ee_layer_di
-0001ca00: 6374 5b6c 6179 6572 5f6e 616d 655d 3a0d  ct[layer_name]:.
-0001ca10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001ca20: 2073 656c 662e 7265 6d6f 7665 5f63 6f6e   self.remove_con
-0001ca30: 7472 6f6c 2873 656c 662e 6565 5f6c 6179  trol(self.ee_lay
-0001ca40: 6572 5f64 6963 745b 6c61 7965 725f 6e61  er_dict[layer_na
-0001ca50: 6d65 5d5b 2263 6f6c 6f72 6261 7222 5d29  me]["colorbar"])
-0001ca60: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-0001ca70: 6c66 2e65 655f 6c61 7965 725f 6469 6374  lf.ee_layer_dict
-0001ca80: 5b6c 6179 6572 5f6e 616d 655d 5b22 636f  [layer_name]["co
-0001ca90: 6c6f 7262 6172 225d 203d 2063 6f6c 6f72  lorbar"] = color
-0001caa0: 6d61 705f 6374 726c 0d0a 0d0a 2020 2020  map_ctrl....    
-0001cab0: 2020 2020 7365 6c66 2e61 6464 5f63 6f6e      self.add_con
-0001cac0: 7472 6f6c 2863 6f6c 6f72 6d61 705f 6374  trol(colormap_ct
-0001cad0: 726c 290d 0a0d 0a20 2020 2064 6566 2061  rl)....    def a
-0001cae0: 6464 5f63 6f6c 6f72 6261 725f 6272 616e  dd_colorbar_bran
-0001caf0: 6361 280d 0a20 2020 2020 2020 2073 656c  ca(..        sel
-0001cb00: 662c 0d0a 2020 2020 2020 2020 636f 6c6f  f,..        colo
-0001cb10: 7273 2c0d 0a20 2020 2020 2020 2076 6d69  rs,..        vmi
-0001cb20: 6e3d 302c 0d0a 2020 2020 2020 2020 766d  n=0,..        vm
-0001cb30: 6178 3d31 2e30 2c0d 0a20 2020 2020 2020  ax=1.0,..       
-0001cb40: 2069 6e64 6578 3d4e 6f6e 652c 0d0a 2020   index=None,..  
-0001cb50: 2020 2020 2020 6361 7074 696f 6e3d 2222        caption=""
-0001cb60: 2c0d 0a20 2020 2020 2020 2063 6174 6567  ,..        categ
-0001cb70: 6f72 6963 616c 3d46 616c 7365 2c0d 0a20  orical=False,.. 
-0001cb80: 2020 2020 2020 2073 7465 703d 4e6f 6e65         step=None
-0001cb90: 2c0d 0a20 2020 2020 2020 2068 6569 6768  ,..        heigh
-0001cba0: 743d 2234 3570 7822 2c0d 0a20 2020 2020  t="45px",..     
-0001cbb0: 2020 2074 7261 6e73 7061 7265 6e74 5f62     transparent_b
-0001cbc0: 673d 4661 6c73 652c 0d0a 2020 2020 2020  g=False,..      
-0001cbd0: 2020 706f 7369 7469 6f6e 3d22 626f 7474    position="bott
-0001cbe0: 6f6d 7269 6768 7422 2c0d 0a20 2020 2020  omright",..     
-0001cbf0: 2020 206c 6179 6572 5f6e 616d 653d 4e6f     layer_name=No
-0001cc00: 6e65 2c0d 0a20 2020 2020 2020 202a 2a6b  ne,..        **k
-0001cc10: 7761 7267 732c 0d0a 2020 2020 293a 0d0a  wargs,..    ):..
-0001cc20: 2020 2020 2020 2020 2222 2241 6464 2061          """Add a
-0001cc30: 2062 7261 6e63 6120 636f 6c6f 7262 6172   branca colorbar
-0001cc40: 2074 6f20 7468 6520 6d61 702e 0d0a 0d0a   to the map.....
-0001cc50: 2020 2020 2020 2020 4172 6773 3a0d 0a20          Args:.. 
-0001cc60: 2020 2020 2020 2020 2020 2063 6f6c 6f72             color
-0001cc70: 7320 286c 6973 7429 3a20 5468 6520 7365  s (list): The se
-0001cc80: 7420 6f66 2063 6f6c 6f72 7320 746f 2062  t of colors to b
-0001cc90: 6520 7573 6564 2066 6f72 2069 6e74 6572  e used for inter
-0001cca0: 706f 6c61 7469 6f6e 2e20 436f 6c6f 7273  polation. Colors
-0001ccb0: 2063 616e 2062 6520 7072 6f76 6964 6564   can be provided
-0001ccc0: 2069 6e20 7468 6520 666f 726d 3a20 2a20   in the form: * 
-0001ccd0: 7475 706c 6573 206f 6620 5247 4241 2069  tuples of RGBA i
-0001cce0: 6e74 7320 6265 7477 6565 6e20 3020 616e  nts between 0 an
-0001ccf0: 6420 3235 3520 2865 2e67 3a20 2832 3535  d 255 (e.g: (255
-0001cd00: 2c20 3235 352c 2030 2920 6f72 2028 3235  , 255, 0) or (25
-0001cd10: 352c 2032 3535 2c20 302c 2032 3535 2929  5, 255, 0, 255))
-0001cd20: 202a 2074 7570 6c65 7320 6f66 2052 4742   * tuples of RGB
-0001cd30: 4120 666c 6f61 7473 2062 6574 7765 656e  A floats between
-0001cd40: 2030 2e20 616e 6420 312e 2028 652e 673a   0. and 1. (e.g:
-0001cd50: 2028 312e 2c31 2e2c 302e 2920 6f72 2028   (1.,1.,0.) or (
-0001cd60: 312e 2c20 312e 2c20 302e 2c20 312e 2929  1., 1., 0., 1.))
-0001cd70: 202a 2048 544d 4c2d 6c69 6b65 2073 7472   * HTML-like str
-0001cd80: 696e 6720 2865 2e67 3a20 e280 9c23 6666  ing (e.g: ...#ff
-0001cd90: 6666 3030 2920 2a20 6120 636f 6c6f 7220  ff00) * a color 
-0001cda0: 6e61 6d65 206f 7220 7368 6f72 7463 7574  name or shortcut
-0001cdb0: 2028 652e 673a 20e2 809c 79e2 809d 206f   (e.g: ...y... o
-0001cdc0: 7220 e280 9c79 656c 6c6f 77e2 809d 290d  r ...yellow...).
-0001cdd0: 0a20 2020 2020 2020 2020 2020 2076 6d69  .            vmi
-0001cde0: 6e20 2869 6e74 2c20 6f70 7469 6f6e 616c  n (int, optional
-0001cdf0: 293a 2054 6865 206d 696e 696d 616c 2076  ): The minimal v
-0001ce00: 616c 7565 2066 6f72 2074 6865 2063 6f6c  alue for the col
-0001ce10: 6f72 6d61 702e 2056 616c 7565 7320 6c6f  ormap. Values lo
-0001ce20: 7765 7220 7468 616e 2076 6d69 6e20 7769  wer than vmin wi
-0001ce30: 6c6c 2062 6520 626f 756e 6420 6469 7265  ll be bound dire
-0001ce40: 6374 6c79 2074 6f20 636f 6c6f 7273 5b30  ctly to colors[0
-0001ce50: 5d2e 2e20 4465 6661 756c 7473 2074 6f20  ].. Defaults to 
-0001ce60: 302e 0d0a 2020 2020 2020 2020 2020 2020  0...            
-0001ce70: 766d 6178 2028 666c 6f61 742c 206f 7074  vmax (float, opt
-0001ce80: 696f 6e61 6c29 3a20 5468 6520 6d61 7869  ional): The maxi
-0001ce90: 6d61 6c20 7661 6c75 6520 666f 7220 7468  mal value for th
-0001cea0: 6520 636f 6c6f 726d 6170 2e20 5661 6c75  e colormap. Valu
-0001ceb0: 6573 2068 6967 6865 7220 7468 616e 2076  es higher than v
-0001cec0: 6d61 7820 7769 6c6c 2062 6520 626f 756e  max will be boun
-0001ced0: 6420 6469 7265 6374 6c79 2074 6f20 636f  d directly to co
-0001cee0: 6c6f 7273 5b2d 315d 2e20 4465 6661 756c  lors[-1]. Defaul
-0001cef0: 7473 2074 6f20 312e 302e 0d0a 2020 2020  ts to 1.0...    
-0001cf00: 2020 2020 2020 2020 696e 6465 7820 286c          index (l
-0001cf10: 6973 742c 206f 7074 696f 6e61 6c29 3a54  ist, optional):T
-0001cf20: 6865 2076 616c 7565 7320 636f 7272 6573  he values corres
-0001cf30: 706f 6e64 696e 6720 746f 2065 6163 6820  ponding to each 
-0001cf40: 636f 6c6f 722e 2049 7420 6861 7320 746f  color. It has to
-0001cf50: 2062 6520 736f 7274 6564 2c20 616e 6420   be sorted, and 
-0001cf60: 6861 7665 2074 6865 2073 616d 6520 6c65  have the same le
-0001cf70: 6e67 7468 2061 7320 636f 6c6f 7273 2e20  ngth as colors. 
-0001cf80: 4966 204e 6f6e 652c 2061 2072 6567 756c  If None, a regul
-0001cf90: 6172 2067 7269 6420 6265 7477 6565 6e20  ar grid between 
-0001cfa0: 766d 696e 2061 6e64 2076 6d61 7820 6973  vmin and vmax is
-0001cfb0: 2063 7265 6174 6564 2e2e 2044 6566 6175   created.. Defau
-0001cfc0: 6c74 7320 746f 204e 6f6e 652e 0d0a 2020  lts to None...  
-0001cfd0: 2020 2020 2020 2020 2020 6361 7074 696f            captio
-0001cfe0: 6e20 2873 7472 2c20 6f70 7469 6f6e 616c  n (str, optional
-0001cff0: 293a 2054 6865 2063 6170 7469 6f6e 2066  ): The caption f
-0001d000: 6f72 2074 6865 2063 6f6c 6f72 6d61 702e  or the colormap.
-0001d010: 2044 6566 6175 6c74 7320 746f 2022 222e   Defaults to "".
-0001d020: 0d0a 2020 2020 2020 2020 2020 2020 6361  ..            ca
-0001d030: 7465 676f 7269 6361 6c20 2862 6f6f 6c2c  tegorical (bool,
-0001d040: 206f 7074 696f 6e61 6c29 3a20 5768 6574   optional): Whet
-0001d050: 6865 7220 6f72 206e 6f74 2074 6f20 6372  her or not to cr
-0001d060: 6561 7465 2061 2063 6174 6567 6f72 6963  eate a categoric
-0001d070: 616c 2063 6f6c 6f72 6d61 702e 2044 6566  al colormap. Def
-0001d080: 6175 6c74 7320 746f 2046 616c 7365 2e0d  aults to False..
-0001d090: 0a20 2020 2020 2020 2020 2020 2073 7465  .            ste
-0001d0a0: 7020 2869 6e74 2c20 6f70 7469 6f6e 616c  p (int, optional
-0001d0b0: 293a 2054 6865 2073 7465 7020 746f 2073  ): The step to s
-0001d0c0: 706c 6974 2074 6865 204c 696e 6561 7243  plit the LinearC
-0001d0d0: 6f6c 6f72 6d61 7020 696e 746f 2061 2053  olormap into a S
-0001d0e0: 7465 7043 6f6c 6f72 6d61 702e 2044 6566  tepColormap. Def
-0001d0f0: 6175 6c74 7320 746f 204e 6f6e 652e 0d0a  aults to None...
-0001d100: 2020 2020 2020 2020 2020 2020 6865 6967              heig
-0001d110: 6874 2028 7374 722c 206f 7074 696f 6e61  ht (str, optiona
-0001d120: 6c29 3a20 5468 6520 6865 6967 6874 206f  l): The height o
-0001d130: 6620 7468 6520 636f 6c6f 726d 6170 2077  f the colormap w
-0001d140: 6964 6765 742e 2044 6566 6175 6c74 7320  idget. Defaults 
-0001d150: 746f 2022 3435 7078 222e 0d0a 2020 2020  to "45px"...    
-0001d160: 2020 2020 2020 2020 7472 616e 7370 6172          transpar
-0001d170: 656e 745f 6267 2028 626f 6f6c 2c20 6f70  ent_bg (bool, op
-0001d180: 7469 6f6e 616c 293a 2057 6865 7468 6572  tional): Whether
-0001d190: 2074 6f20 7573 6520 7472 616e 7370 6172   to use transpar
-0001d1a0: 656e 7420 6261 636b 6772 6f75 6e64 2066  ent background f
-0001d1b0: 6f72 2074 6865 2063 6f6c 6f72 6d61 7020  or the colormap 
-0001d1c0: 7769 6467 6574 2e20 4465 6661 756c 7473  widget. Defaults
-0001d1d0: 2074 6f20 5472 7565 2e0d 0a20 2020 2020   to True...     
-0001d1e0: 2020 2020 2020 2070 6f73 6974 696f 6e20         position 
-0001d1f0: 2873 7472 2c20 6f70 7469 6f6e 616c 293a  (str, optional):
-0001d200: 2054 6865 2070 6f73 6974 696f 6e20 666f   The position fo
-0001d210: 7220 7468 6520 636f 6c6f 726d 6170 2077  r the colormap w
-0001d220: 6964 6765 742e 2044 6566 6175 6c74 7320  idget. Defaults 
-0001d230: 746f 2022 626f 7474 6f6d 7269 6768 7422  to "bottomright"
-0001d240: 2e0d 0a20 2020 2020 2020 2020 2020 206c  ...            l
-0001d250: 6179 6572 5f6e 616d 6520 2873 7472 2c20  ayer_name (str, 
-0001d260: 6f70 7469 6f6e 616c 293a 204c 6179 6572  optional): Layer
-0001d270: 206e 616d 6520 6f66 2074 6865 2063 6f6c   name of the col
-0001d280: 6f72 6261 7220 746f 2062 6520 6173 736f  orbar to be asso
-0001d290: 6369 6174 6564 2077 6974 682e 2044 6566  ciated with. Def
-0001d2a0: 6175 6c74 7320 746f 204e 6f6e 652e 0d0a  aults to None...
-0001d2b0: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-0001d2c0: 2020 2020 2020 2066 726f 6d20 626f 7820         from box 
-0001d2d0: 696d 706f 7274 2042 6f78 0d0a 2020 2020  import Box..    
-0001d2e0: 2020 2020 6672 6f6d 2062 7261 6e63 612e      from branca.
-0001d2f0: 636f 6c6f 726d 6170 2069 6d70 6f72 7420  colormap import 
-0001d300: 4c69 6e65 6172 436f 6c6f 726d 6170 0d0a  LinearColormap..
-0001d310: 0d0a 2020 2020 2020 2020 6f75 7470 7574  ..        output
-0001d320: 203d 2077 6964 6765 7473 2e4f 7574 7075   = widgets.Outpu
-0001d330: 7428 290d 0a20 2020 2020 2020 206f 7574  t()..        out
-0001d340: 7075 742e 6c61 796f 7574 2e68 6569 6768  put.layout.heigh
-0001d350: 7420 3d20 6865 6967 6874 0d0a 0d0a 2020  t = height....  
-0001d360: 2020 2020 2020 6966 2022 7769 6474 6822        if "width"
-0001d370: 2069 6e20 6b77 6172 6773 2e6b 6579 7328   in kwargs.keys(
-0001d380: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-0001d390: 6f75 7470 7574 2e6c 6179 6f75 742e 7769  output.layout.wi
-0001d3a0: 6474 6820 3d20 6b77 6172 6773 5b22 7769  dth = kwargs["wi
-0001d3b0: 6474 6822 5d0d 0a0d 0a20 2020 2020 2020  dth"]....       
-0001d3c0: 2069 6620 6973 696e 7374 616e 6365 2863   if isinstance(c
-0001d3d0: 6f6c 6f72 732c 2042 6f78 293a 0d0a 2020  olors, Box):..  
-0001d3e0: 2020 2020 2020 2020 2020 7472 793a 0d0a            try:..
-0001d3f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d400: 636f 6c6f 7273 203d 206c 6973 7428 636f  colors = list(co
-0001d410: 6c6f 7273 5b22 6465 6661 756c 7422 5d29  lors["default"])
-0001d420: 0d0a 2020 2020 2020 2020 2020 2020 6578  ..            ex
-0001d430: 6365 7074 2045 7863 6570 7469 6f6e 2061  cept Exception a
-0001d440: 7320 653a 0d0a 2020 2020 2020 2020 2020  s e:..          
-0001d450: 2020 2020 2020 7072 696e 7428 2254 6865        print("The
-0001d460: 2070 726f 7669 6465 6420 636f 6c6f 7220   provided color 
-0001d470: 6c69 7374 2069 7320 696e 7661 6c69 642e  list is invalid.
-0001d480: 2229 0d0a 2020 2020 2020 2020 2020 2020  ")..            
-0001d490: 2020 2020 7261 6973 6520 4578 6365 7074      raise Except
-0001d4a0: 696f 6e28 6529 0d0a 0d0a 2020 2020 2020  ion(e)....      
-0001d4b0: 2020 6966 2061 6c6c 286c 656e 2863 6f6c    if all(len(col
-0001d4c0: 6f72 2920 3d3d 2036 2066 6f72 2063 6f6c  or) == 6 for col
-0001d4d0: 6f72 2069 6e20 636f 6c6f 7273 293a 0d0a  or in colors):..
-0001d4e0: 2020 2020 2020 2020 2020 2020 636f 6c6f              colo
-0001d4f0: 7273 203d 205b 2223 2220 2b20 636f 6c6f  rs = ["#" + colo
-0001d500: 7220 666f 7220 636f 6c6f 7220 696e 2063  r for color in c
-0001d510: 6f6c 6f72 735d 0d0a 0d0a 2020 2020 2020  olors]....      
-0001d520: 2020 636f 6c6f 726d 6170 203d 204c 696e    colormap = Lin
-0001d530: 6561 7243 6f6c 6f72 6d61 7028 0d0a 2020  earColormap(..  
-0001d540: 2020 2020 2020 2020 2020 636f 6c6f 7273            colors
-0001d550: 3d63 6f6c 6f72 732c 2069 6e64 6578 3d69  =colors, index=i
-0001d560: 6e64 6578 2c20 766d 696e 3d76 6d69 6e2c  ndex, vmin=vmin,
-0001d570: 2076 6d61 783d 766d 6178 2c20 6361 7074   vmax=vmax, capt
-0001d580: 696f 6e3d 6361 7074 696f 6e0d 0a20 2020  ion=caption..   
-0001d590: 2020 2020 2029 0d0a 0d0a 2020 2020 2020       )....      
-0001d5a0: 2020 6966 2063 6174 6567 6f72 6963 616c    if categorical
-0001d5b0: 3a0d 0a20 2020 2020 2020 2020 2020 2069  :..            i
-0001d5c0: 6620 7374 6570 2069 7320 6e6f 7420 4e6f  f step is not No
-0001d5d0: 6e65 3a0d 0a20 2020 2020 2020 2020 2020  ne:..           
-0001d5e0: 2020 2020 2063 6f6c 6f72 6d61 7020 3d20       colormap = 
-0001d5f0: 636f 6c6f 726d 6170 2e74 6f5f 7374 6570  colormap.to_step
-0001d600: 2873 7465 7029 0d0a 2020 2020 2020 2020  (step)..        
-0001d610: 2020 2020 656c 6966 2069 6e64 6578 2069      elif index i
-0001d620: 7320 6e6f 7420 4e6f 6e65 3a0d 0a20 2020  s not None:..   
-0001d630: 2020 2020 2020 2020 2020 2020 2063 6f6c               col
-0001d640: 6f72 6d61 7020 3d20 636f 6c6f 726d 6170  ormap = colormap
-0001d650: 2e74 6f5f 7374 6570 286c 656e 2869 6e64  .to_step(len(ind
-0001d660: 6578 2920 2d20 3129 0d0a 2020 2020 2020  ex) - 1)..      
-0001d670: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
-0001d680: 2020 2020 2020 2020 2020 2020 2063 6f6c               col
-0001d690: 6f72 6d61 7020 3d20 636f 6c6f 726d 6170  ormap = colormap
-0001d6a0: 2e74 6f5f 7374 6570 2833 290d 0a0d 0a20  .to_step(3).... 
-0001d6b0: 2020 2020 2020 2063 6f6c 6f72 6d61 705f         colormap_
-0001d6c0: 6374 726c 203d 2069 7079 6c65 6166 6c65  ctrl = ipyleafle
-0001d6d0: 742e 5769 6467 6574 436f 6e74 726f 6c28  t.WidgetControl(
-0001d6e0: 0d0a 2020 2020 2020 2020 2020 2020 7769  ..            wi
-0001d6f0: 6467 6574 3d6f 7574 7075 742c 0d0a 2020  dget=output,..  
-0001d700: 2020 2020 2020 2020 2020 706f 7369 7469            positi
-0001d710: 6f6e 3d70 6f73 6974 696f 6e2c 0d0a 2020  on=position,..  
-0001d720: 2020 2020 2020 2020 2020 7472 616e 7370            transp
-0001d730: 6172 656e 745f 6267 3d74 7261 6e73 7061  arent_bg=transpa
-0001d740: 7265 6e74 5f62 672c 0d0a 2020 2020 2020  rent_bg,..      
-0001d750: 2020 2020 2020 2a2a 6b77 6172 6773 2c0d        **kwargs,.
-0001d760: 0a20 2020 2020 2020 2029 0d0a 2020 2020  .        )..    
-0001d770: 2020 2020 7769 7468 206f 7574 7075 743a      with output:
-0001d780: 0d0a 2020 2020 2020 2020 2020 2020 6f75  ..            ou
-0001d790: 7470 7574 2e63 6c65 6172 5f6f 7574 7075  tput.clear_outpu
-0001d7a0: 7428 290d 0a20 2020 2020 2020 2020 2020  t()..           
-0001d7b0: 2064 6973 706c 6179 2863 6f6c 6f72 6d61   display(colorma
-0001d7c0: 7029 0d0a 0d0a 2020 2020 2020 2020 7365  p)....        se
-0001d7d0: 6c66 2e63 6f6c 6f72 6261 7220 3d20 636f  lf.colorbar = co
-0001d7e0: 6c6f 726d 6170 5f63 7472 6c0d 0a20 2020  lormap_ctrl..   
-0001d7f0: 2020 2020 2073 656c 662e 6164 645f 636f       self.add_co
-0001d800: 6e74 726f 6c28 636f 6c6f 726d 6170 5f63  ntrol(colormap_c
-0001d810: 7472 6c29 0d0a 0d0a 2020 2020 2020 2020  trl)....        
-0001d820: 6966 206c 6179 6572 5f6e 616d 6520 696e  if layer_name in
-0001d830: 2073 656c 662e 6565 5f6c 6179 6572 5f6e   self.ee_layer_n
-0001d840: 616d 6573 3a0d 0a20 2020 2020 2020 2020  ames:..         
-0001d850: 2020 2073 656c 662e 6565 5f6c 6179 6572     self.ee_layer
-0001d860: 5f64 6963 745b 6c61 7965 725f 6e61 6d65  _dict[layer_name
-0001d870: 5d5b 2263 6f6c 6f72 6261 7222 5d20 3d20  ]["colorbar"] = 
-0001d880: 636f 6c6f 726d 6170 5f63 7472 6c0d 0a0d  colormap_ctrl...
-0001d890: 0a20 2020 2064 6566 2072 656d 6f76 655f  .    def remove_
-0001d8a0: 636f 6c6f 7262 6172 2873 656c 6629 3a0d  colorbar(self):.
-0001d8b0: 0a20 2020 2020 2020 2022 2222 5265 6d6f  .        """Remo
-0001d8c0: 7665 2063 6f6c 6f72 6261 7220 6672 6f6d  ve colorbar from
-0001d8d0: 2074 6865 206d 6170 2e22 2222 0d0a 2020   the map."""..  
-0001d8e0: 2020 2020 2020 6966 2073 656c 662e 636f        if self.co
-0001d8f0: 6c6f 7262 6172 2069 7320 6e6f 7420 4e6f  lorbar is not No
-0001d900: 6e65 3a0d 0a20 2020 2020 2020 2020 2020  ne:..           
-0001d910: 2073 656c 662e 7265 6d6f 7665 5f63 6f6e   self.remove_con
-0001d920: 7472 6f6c 2873 656c 662e 636f 6c6f 7262  trol(self.colorb
-0001d930: 6172 290d 0a0d 0a20 2020 2064 6566 2069  ar)....    def i
-0001d940: 6d61 6765 5f6f 7665 726c 6179 2873 656c  mage_overlay(sel
-0001d950: 662c 2075 726c 2c20 626f 756e 6473 2c20  f, url, bounds, 
-0001d960: 6e61 6d65 293a 0d0a 2020 2020 2020 2020  name):..        
-0001d970: 2222 224f 7665 726c 6179 7320 616e 2069  """Overlays an i
-0001d980: 6d61 6765 2066 726f 6d20 7468 6520 496e  mage from the In
-0001d990: 7465 726e 6574 206f 7220 6c6f 6361 6c6c  ternet or locall
-0001d9a0: 7920 6f6e 2074 6865 206d 6170 2e0d 0a0d  y on the map....
-0001d9b0: 0a20 2020 2020 2020 2041 7267 733a 0d0a  .        Args:..
-0001d9c0: 2020 2020 2020 2020 2020 2020 7572 6c20              url 
-0001d9d0: 2873 7472 293a 2068 7474 7020 5552 4c20  (str): http URL 
-0001d9e0: 6f72 206c 6f63 616c 2066 696c 6520 7061  or local file pa
-0001d9f0: 7468 2074 6f20 7468 6520 696d 6167 652e  th to the image.
-0001da00: 0d0a 2020 2020 2020 2020 2020 2020 626f  ..            bo
-0001da10: 756e 6473 2028 7475 706c 6529 3a20 626f  unds (tuple): bo
-0001da20: 756e 6469 6e67 2062 6f78 206f 6620 7468  unding box of th
-0001da30: 6520 696d 6167 6520 696e 2074 6865 2066  e image in the f
-0001da40: 6f72 6d61 7420 6f66 2028 6c6f 7765 725f  ormat of (lower_
-0001da50: 6c65 6674 286c 6174 2c20 6c6f 6e29 2c20  left(lat, lon), 
-0001da60: 7570 7065 725f 7269 6768 7428 6c61 742c  upper_right(lat,
-0001da70: 206c 6f6e 2929 2c20 7375 6368 2061 7320   lon)), such as 
-0001da80: 2828 3133 2c20 2d31 3330 292c 2028 3332  ((13, -130), (32
-0001da90: 2c20 2d31 3030 2929 2e0d 0a20 2020 2020  , -100))...     
-0001daa0: 2020 2020 2020 206e 616d 6520 2873 7472         name (str
-0001dab0: 293a 206e 616d 6520 6f66 2074 6865 206c  ): name of the l
-0001dac0: 6179 6572 2074 6f20 7368 6f77 206f 6e20  ayer to show on 
-0001dad0: 7468 6520 6c61 7965 7220 636f 6e74 726f  the layer contro
-0001dae0: 6c2e 0d0a 2020 2020 2020 2020 2222 220d  l...        """.
-0001daf0: 0a20 2020 2020 2020 2066 726f 6d20 6261  .        from ba
-0001db00: 7365 3634 2069 6d70 6f72 7420 6236 3465  se64 import b64e
-0001db10: 6e63 6f64 650d 0a20 2020 2020 2020 2066  ncode..        f
-0001db20: 726f 6d20 696f 2069 6d70 6f72 7420 4279  rom io import By
-0001db30: 7465 7349 4f0d 0a0d 0a20 2020 2020 2020  tesIO....       
-0001db40: 2066 726f 6d20 5049 4c20 696d 706f 7274   from PIL import
-0001db50: 2049 6d61 6765 2c20 496d 6167 6553 6571   Image, ImageSeq
-0001db60: 7565 6e63 650d 0a0d 0a20 2020 2020 2020  uence....       
-0001db70: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
-0001db80: 2020 2069 6620 6e6f 7420 7572 6c2e 7374     if not url.st
-0001db90: 6172 7473 7769 7468 2822 6874 7470 2229  artswith("http")
-0001dba0: 3a0d 0a0d 0a20 2020 2020 2020 2020 2020  :....           
-0001dbb0: 2020 2020 2069 6620 6e6f 7420 6f73 2e70       if not os.p
-0001dbc0: 6174 682e 6578 6973 7473 2875 726c 293a  ath.exists(url):
-0001dbd0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001dbe0: 2020 2020 2020 7072 696e 7428 2254 6865        print("The
-0001dbf0: 2070 726f 7669 6465 6420 6669 6c65 2064   provided file d
-0001dc00: 6f65 7320 6e6f 7420 6578 6973 742e 2229  oes not exist.")
-0001dc10: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001dc20: 2020 2020 2020 7265 7475 726e 0d0a 0d0a        return....
-0001dc30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001dc40: 6578 7420 3d20 6f73 2e70 6174 682e 7370  ext = os.path.sp
-0001dc50: 6c69 7465 7874 2875 726c 295b 315d 5b31  litext(url)[1][1
-0001dc60: 3a5d 2020 2320 6669 6c65 2065 7874 656e  :]  # file exten
-0001dc70: 7369 6f6e 0d0a 2020 2020 2020 2020 2020  sion..          
-0001dc80: 2020 2020 2020 696d 6167 6520 3d20 496d        image = Im
-0001dc90: 6167 652e 6f70 656e 2875 726c 290d 0a0d  age.open(url)...
-0001dca0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001dcb0: 2066 203d 2042 7974 6573 494f 2829 0d0a   f = BytesIO()..
-0001dcc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001dcd0: 6966 2065 7874 2e6c 6f77 6572 2829 203d  if ext.lower() =
-0001dce0: 3d20 2267 6966 223a 0d0a 2020 2020 2020  = "gif":..      
-0001dcf0: 2020 2020 2020 2020 2020 2020 2020 6672                fr
-0001dd00: 616d 6573 203d 205b 5d0d 0a20 2020 2020  ames = []..     
-0001dd10: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-0001dd20: 204c 6f6f 7020 6f76 6572 2065 6163 6820   Loop over each 
-0001dd30: 6672 616d 6520 696e 2074 6865 2061 6e69  frame in the ani
-0001dd40: 6d61 7465 6420 696d 6167 650d 0a20 2020  mated image..   
-0001dd50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001dd60: 2066 6f72 2066 7261 6d65 2069 6e20 496d   for frame in Im
-0001dd70: 6167 6553 6571 7565 6e63 652e 4974 6572  ageSequence.Iter
-0001dd80: 6174 6f72 2869 6d61 6765 293a 0d0a 2020  ator(image):..  
-0001dd90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001dda0: 2020 2020 2020 6672 616d 6520 3d20 6672        frame = fr
-0001ddb0: 616d 652e 636f 6e76 6572 7428 2252 4742  ame.convert("RGB
-0001ddc0: 4122 290d 0a20 2020 2020 2020 2020 2020  A")..           
-0001ddd0: 2020 2020 2020 2020 2020 2020 2062 203d               b =
-0001dde0: 2042 7974 6573 494f 2829 0d0a 2020 2020   BytesIO()..    
-0001ddf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001de00: 2020 2020 6672 616d 652e 7361 7665 2862      frame.save(b
-0001de10: 2c20 666f 726d 6174 3d22 6769 6622 290d  , format="gif").
-0001de20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001de30: 2020 2020 2020 2020 2066 7261 6d65 203d           frame =
-0001de40: 2049 6d61 6765 2e6f 7065 6e28 6229 0d0a   Image.open(b)..
-0001de50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001de60: 2020 2020 2020 2020 6672 616d 6573 2e61          frames.a
-0001de70: 7070 656e 6428 6672 616d 6529 0d0a 2020  ppend(frame)..  
+00019370: 6574 2e57 6964 6765 7443 6f6e 7472 6f6c  et.WidgetControl
+00019380: 280d 0a20 2020 2020 2020 2020 2020 2077  (..            w
+00019390: 6964 6765 743d 636c 6f73 655f 6275 7474  idget=close_butt
+000193a0: 6f6e 2c20 706f 7369 7469 6f6e 3d22 626f  on, position="bo
+000193b0: 7474 6f6d 7269 6768 7422 0d0a 2020 2020  ttomright"..    
+000193c0: 2020 2020 290d 0a0d 0a20 2020 2020 2020      )....       
+000193d0: 2074 7279 3a0d 0a0d 0a20 2020 2020 2020   try:....       
+000193e0: 2020 2020 2073 706c 6974 5f63 6f6e 7472       split_contr
+000193f0: 6f6c 203d 2069 7079 6c65 6166 6c65 742e  ol = ipyleaflet.
+00019400: 5370 6c69 744d 6170 436f 6e74 726f 6c28  SplitMapControl(
+00019410: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00019420: 2020 6c65 6674 5f6c 6179 6572 3d6c 6566    left_layer=lef
+00019430: 745f 6c61 7965 722c 2072 6967 6874 5f6c  t_layer, right_l
+00019440: 6179 6572 3d72 6967 6874 5f6c 6179 6572  ayer=right_layer
+00019450: 0d0a 2020 2020 2020 2020 2020 2020 290d  ..            ).
+00019460: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00019470: 662e 6164 645f 636f 6e74 726f 6c28 7370  f.add_control(sp
+00019480: 6c69 745f 636f 6e74 726f 6c29 0d0a 0d0a  lit_control)....
+00019490: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+000194a0: 2e61 6464 5f63 6f6e 7472 6f6c 2863 6c6f  .add_control(clo
+000194b0: 7365 5f63 6f6e 7472 6f6c 290d 0a0d 0a20  se_control).... 
+000194c0: 2020 2020 2020 2065 7863 6570 7420 4578         except Ex
+000194d0: 6365 7074 696f 6e20 6173 2065 3a0d 0a20  ception as e:.. 
+000194e0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+000194f0: 2045 7863 6570 7469 6f6e 2865 290d 0a0d   Exception(e)...
+00019500: 0a20 2020 2064 6566 2062 6173 656d 6170  .    def basemap
+00019510: 5f64 656d 6f28 7365 6c66 293a 0d0a 2020  _demo(self):..  
+00019520: 2020 2020 2020 2222 2241 2064 656d 6f20        """A demo 
+00019530: 666f 7220 7573 696e 6720 6765 656d 6170  for using geemap
+00019540: 2062 6173 656d 6170 732e 2222 220d 0a20   basemaps.""".. 
+00019550: 2020 2020 2020 2064 726f 7064 6f77 6e20         dropdown 
+00019560: 3d20 7769 6467 6574 732e 4472 6f70 646f  = widgets.Dropdo
+00019570: 776e 280d 0a20 2020 2020 2020 2020 2020  wn(..           
+00019580: 206f 7074 696f 6e73 3d6c 6973 7428 6261   options=list(ba
+00019590: 7365 6d61 705f 7469 6c65 732e 6b65 7973  semap_tiles.keys
+000195a0: 2829 292c 0d0a 2020 2020 2020 2020 2020  ()),..          
+000195b0: 2020 7661 6c75 653d 2248 5942 5249 4422    value="HYBRID"
+000195c0: 2c0d 0a20 2020 2020 2020 2020 2020 2064  ,..            d
+000195d0: 6573 6372 6970 7469 6f6e 3d22 4261 7365  escription="Base
+000195e0: 6d61 7073 222c 0d0a 2020 2020 2020 2020  maps",..        
+000195f0: 290d 0a0d 0a20 2020 2020 2020 2064 6566  )....        def
+00019600: 206f 6e5f 636c 6963 6b28 6368 616e 6765   on_click(change
+00019610: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+00019620: 6261 7365 6d61 705f 6e61 6d65 203d 2063  basemap_name = c
+00019630: 6861 6e67 655b 226e 6577 225d 0d0a 2020  hange["new"]..  
+00019640: 2020 2020 2020 2020 2020 6f6c 645f 6261            old_ba
+00019650: 7365 6d61 7020 3d20 7365 6c66 2e6c 6179  semap = self.lay
+00019660: 6572 735b 2d31 5d0d 0a20 2020 2020 2020  ers[-1]..       
+00019670: 2020 2020 2073 656c 662e 7375 6273 7469       self.substi
+00019680: 7475 7465 5f6c 6179 6572 286f 6c64 5f62  tute_layer(old_b
+00019690: 6173 656d 6170 2c20 6261 7365 6d61 705f  asemap, basemap_
+000196a0: 7469 6c65 735b 6261 7365 6d61 705f 6e61  tiles[basemap_na
+000196b0: 6d65 5d29 0d0a 0d0a 2020 2020 2020 2020  me])....        
+000196c0: 6472 6f70 646f 776e 2e6f 6273 6572 7665  dropdown.observe
+000196d0: 286f 6e5f 636c 6963 6b2c 2022 7661 6c75  (on_click, "valu
+000196e0: 6522 290d 0a20 2020 2020 2020 2062 6173  e")..        bas
+000196f0: 656d 6170 5f63 6f6e 7472 6f6c 203d 2069  emap_control = i
+00019700: 7079 6c65 6166 6c65 742e 5769 6467 6574  pyleaflet.Widget
+00019710: 436f 6e74 726f 6c28 7769 6467 6574 3d64  Control(widget=d
+00019720: 726f 7064 6f77 6e2c 2070 6f73 6974 696f  ropdown, positio
+00019730: 6e3d 2274 6f70 7269 6768 7422 290d 0a20  n="topright").. 
+00019740: 2020 2020 2020 2073 656c 662e 6164 645f         self.add_
+00019750: 636f 6e74 726f 6c28 6261 7365 6d61 705f  control(basemap_
+00019760: 636f 6e74 726f 6c29 0d0a 0d0a 2020 2020  control)....    
+00019770: 6465 6620 6164 645f 6c65 6765 6e64 280d  def add_legend(.
+00019780: 0a20 2020 2020 2020 2073 656c 662c 0d0a  .        self,..
+00019790: 2020 2020 2020 2020 6c65 6765 6e64 5f74          legend_t
+000197a0: 6974 6c65 3d22 4c65 6765 6e64 222c 0d0a  itle="Legend",..
+000197b0: 2020 2020 2020 2020 6c65 6765 6e64 5f64          legend_d
+000197c0: 6963 743d 4e6f 6e65 2c0d 0a20 2020 2020  ict=None,..     
+000197d0: 2020 206c 6567 656e 645f 6b65 7973 3d4e     legend_keys=N
+000197e0: 6f6e 652c 0d0a 2020 2020 2020 2020 6c65  one,..        le
+000197f0: 6765 6e64 5f63 6f6c 6f72 733d 4e6f 6e65  gend_colors=None
+00019800: 2c0d 0a20 2020 2020 2020 2070 6f73 6974  ,..        posit
+00019810: 696f 6e3d 2262 6f74 746f 6d72 6967 6874  ion="bottomright
+00019820: 222c 0d0a 2020 2020 2020 2020 6275 696c  ",..        buil
+00019830: 7469 6e5f 6c65 6765 6e64 3d4e 6f6e 652c  tin_legend=None,
+00019840: 0d0a 2020 2020 2020 2020 6c61 7965 725f  ..        layer_
+00019850: 6e61 6d65 3d4e 6f6e 652c 0d0a 2020 2020  name=None,..    
+00019860: 2020 2020 2a2a 6b77 6172 6773 2c0d 0a20      **kwargs,.. 
+00019870: 2020 2029 3a0d 0a20 2020 2020 2020 2022     ):..        "
+00019880: 2222 4164 6473 2061 2063 7573 746f 6d69  ""Adds a customi
+00019890: 7a65 6420 6261 7365 6d61 7020 746f 2074  zed basemap to t
+000198a0: 6865 206d 6170 2e0d 0a0d 0a20 2020 2020  he map.....     
+000198b0: 2020 2041 7267 733a 0d0a 2020 2020 2020     Args:..      
+000198c0: 2020 2020 2020 6c65 6765 6e64 5f74 6974        legend_tit
+000198d0: 6c65 2028 7374 722c 206f 7074 696f 6e61  le (str, optiona
+000198e0: 6c29 3a20 5469 746c 6520 6f66 2074 6865  l): Title of the
+000198f0: 206c 6567 656e 642e 2044 6566 6175 6c74   legend. Default
+00019900: 7320 746f 2027 4c65 6765 6e64 272e 0d0a  s to 'Legend'...
+00019910: 2020 2020 2020 2020 2020 2020 6c65 6765              lege
+00019920: 6e64 5f64 6963 7420 2864 6963 742c 206f  nd_dict (dict, o
+00019930: 7074 696f 6e61 6c29 3a20 4120 6469 6374  ptional): A dict
+00019940: 696f 6e61 7279 2063 6f6e 7461 696e 696e  ionary containin
+00019950: 6720 6c65 6765 6e64 2069 7465 6d73 2061  g legend items a
+00019960: 7320 6b65 7973 2061 6e64 2063 6f6c 6f72  s keys and color
+00019970: 2061 7320 7661 6c75 6573 2e20 4966 2070   as values. If p
+00019980: 726f 7669 6465 642c 206c 6567 656e 645f  rovided, legend_
+00019990: 6b65 7973 2061 6e64 206c 6567 656e 645f  keys and legend_
+000199a0: 636f 6c6f 7273 2077 696c 6c20 6265 2069  colors will be i
+000199b0: 676e 6f72 6564 2e20 4465 6661 756c 7473  gnored. Defaults
+000199c0: 2074 6f20 4e6f 6e65 2e0d 0a20 2020 2020   to None...     
+000199d0: 2020 2020 2020 206c 6567 656e 645f 6b65         legend_ke
+000199e0: 7973 2028 6c69 7374 2c20 6f70 7469 6f6e  ys (list, option
+000199f0: 616c 293a 2041 206c 6973 7420 6f66 206c  al): A list of l
+00019a00: 6567 656e 6420 6b65 7973 2e20 4465 6661  egend keys. Defa
+00019a10: 756c 7473 2074 6f20 4e6f 6e65 2e0d 0a20  ults to None... 
+00019a20: 2020 2020 2020 2020 2020 206c 6567 656e             legen
+00019a30: 645f 636f 6c6f 7273 2028 6c69 7374 2c20  d_colors (list, 
+00019a40: 6f70 7469 6f6e 616c 293a 2041 206c 6973  optional): A lis
+00019a50: 7420 6f66 206c 6567 656e 6420 636f 6c6f  t of legend colo
+00019a60: 7273 2e20 4465 6661 756c 7473 2074 6f20  rs. Defaults to 
+00019a70: 4e6f 6e65 2e0d 0a20 2020 2020 2020 2020  None...         
+00019a80: 2020 2070 6f73 6974 696f 6e20 2873 7472     position (str
+00019a90: 2c20 6f70 7469 6f6e 616c 293a 2050 6f73  , optional): Pos
+00019aa0: 6974 696f 6e20 6f66 2074 6865 206c 6567  ition of the leg
+00019ab0: 656e 642e 2044 6566 6175 6c74 7320 746f  end. Defaults to
+00019ac0: 2027 626f 7474 6f6d 7269 6768 7427 2e0d   'bottomright'..
+00019ad0: 0a20 2020 2020 2020 2020 2020 2062 7569  .            bui
+00019ae0: 6c74 696e 5f6c 6567 656e 6420 2873 7472  ltin_legend (str
+00019af0: 2c20 6f70 7469 6f6e 616c 293a 204e 616d  , optional): Nam
+00019b00: 6520 6f66 2074 6865 2062 7569 6c74 696e  e of the builtin
+00019b10: 206c 6567 656e 6420 746f 2061 6464 2074   legend to add t
+00019b20: 6f20 7468 6520 6d61 702e 2044 6566 6175  o the map. Defau
+00019b30: 6c74 7320 746f 204e 6f6e 652e 0d0a 2020  lts to None...  
+00019b40: 2020 2020 2020 2020 2020 6c61 7965 725f            layer_
+00019b50: 6e61 6d65 2028 7374 722c 206f 7074 696f  name (str, optio
+00019b60: 6e61 6c29 3a20 4c61 7965 7220 6e61 6d65  nal): Layer name
+00019b70: 206f 6620 7468 6520 6c65 6765 6e64 2074   of the legend t
+00019b80: 6f20 6265 2061 7373 6f63 6961 7465 6420  o be associated 
+00019b90: 7769 7468 2e20 4465 6661 756c 7473 2074  with. Defaults t
+00019ba0: 6f20 4e6f 6e65 2e0d 0a0d 0a20 2020 2020  o None.....     
+00019bb0: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
+00019bc0: 696d 706f 7274 2070 6b67 5f72 6573 6f75  import pkg_resou
+00019bd0: 7263 6573 0d0a 2020 2020 2020 2020 6672  rces..        fr
+00019be0: 6f6d 2049 5079 7468 6f6e 2e64 6973 706c  om IPython.displ
+00019bf0: 6179 2069 6d70 6f72 7420 6469 7370 6c61  ay import displa
+00019c00: 790d 0a0d 0a20 2020 2020 2020 2070 6b67  y....        pkg
+00019c10: 5f64 6972 203d 206f 732e 7061 7468 2e64  _dir = os.path.d
+00019c20: 6972 6e61 6d65 280d 0a20 2020 2020 2020  irname(..       
+00019c30: 2020 2020 2070 6b67 5f72 6573 6f75 7263       pkg_resourc
+00019c40: 6573 2e72 6573 6f75 7263 655f 6669 6c65  es.resource_file
+00019c50: 6e61 6d65 2822 6765 656d 6170 222c 2022  name("geemap", "
+00019c60: 6765 656d 6170 2e70 7922 290d 0a20 2020  geemap.py")..   
+00019c70: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
+00019c80: 6c65 6765 6e64 5f74 656d 706c 6174 6520  legend_template 
+00019c90: 3d20 6f73 2e70 6174 682e 6a6f 696e 2870  = os.path.join(p
+00019ca0: 6b67 5f64 6972 2c20 2264 6174 612f 7465  kg_dir, "data/te
+00019cb0: 6d70 6c61 7465 2f6c 6567 656e 642e 6874  mplate/legend.ht
+00019cc0: 6d6c 2229 0d0a 0d0a 2020 2020 2020 2020  ml")....        
+00019cd0: 6966 2022 6d69 6e5f 7769 6474 6822 206e  if "min_width" n
+00019ce0: 6f74 2069 6e20 6b77 6172 6773 2e6b 6579  ot in kwargs.key
+00019cf0: 7328 293a 0d0a 2020 2020 2020 2020 2020  s():..          
+00019d00: 2020 6d69 6e5f 7769 6474 6820 3d20 4e6f    min_width = No
+00019d10: 6e65 0d0a 2020 2020 2020 2020 6966 2022  ne..        if "
+00019d20: 6d61 785f 7769 6474 6822 206e 6f74 2069  max_width" not i
+00019d30: 6e20 6b77 6172 6773 2e6b 6579 7328 293a  n kwargs.keys():
+00019d40: 0d0a 2020 2020 2020 2020 2020 2020 6d61  ..            ma
+00019d50: 785f 7769 6474 6820 3d20 4e6f 6e65 0d0a  x_width = None..
+00019d60: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
+00019d70: 2020 2020 2020 2020 2020 206d 6178 5f77             max_w
+00019d80: 6964 7468 203d 206b 7761 7267 735b 226d  idth = kwargs["m
+00019d90: 6178 5f77 6964 7468 225d 0d0a 2020 2020  ax_width"]..    
+00019da0: 2020 2020 6966 2022 6d69 6e5f 6865 6967      if "min_heig
+00019db0: 6874 2220 6e6f 7420 696e 206b 7761 7267  ht" not in kwarg
+00019dc0: 732e 6b65 7973 2829 3a0d 0a20 2020 2020  s.keys():..     
+00019dd0: 2020 2020 2020 206d 696e 5f68 6569 6768         min_heigh
+00019de0: 7420 3d20 4e6f 6e65 0d0a 2020 2020 2020  t = None..      
+00019df0: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
+00019e00: 2020 2020 206d 696e 5f68 6569 6768 7420       min_height 
+00019e10: 3d20 6b77 6172 6773 5b22 6d69 6e5f 6865  = kwargs["min_he
+00019e20: 6967 6874 225d 0d0a 2020 2020 2020 2020  ight"]..        
+00019e30: 6966 2022 6d61 785f 6865 6967 6874 2220  if "max_height" 
+00019e40: 6e6f 7420 696e 206b 7761 7267 732e 6b65  not in kwargs.ke
+00019e50: 7973 2829 3a0d 0a20 2020 2020 2020 2020  ys():..         
+00019e60: 2020 206d 6178 5f68 6569 6768 7420 3d20     max_height = 
+00019e70: 4e6f 6e65 0d0a 2020 2020 2020 2020 656c  None..        el
+00019e80: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
+00019e90: 206d 6178 5f68 6569 6768 7420 3d20 6b77   max_height = kw
+00019ea0: 6172 6773 5b22 6d61 785f 6865 6967 6874  args["max_height
+00019eb0: 225d 0d0a 2020 2020 2020 2020 6966 2022  "]..        if "
+00019ec0: 6865 6967 6874 2220 6e6f 7420 696e 206b  height" not in k
+00019ed0: 7761 7267 732e 6b65 7973 2829 3a0d 0a20  wargs.keys():.. 
+00019ee0: 2020 2020 2020 2020 2020 2068 6569 6768             heigh
+00019ef0: 7420 3d20 4e6f 6e65 0d0a 2020 2020 2020  t = None..      
+00019f00: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
+00019f10: 2020 2020 2068 6569 6768 7420 3d20 6b77       height = kw
+00019f20: 6172 6773 5b22 6865 6967 6874 225d 0d0a  args["height"]..
+00019f30: 2020 2020 2020 2020 6966 2022 7769 6474          if "widt
+00019f40: 6822 206e 6f74 2069 6e20 6b77 6172 6773  h" not in kwargs
+00019f50: 2e6b 6579 7328 293a 0d0a 2020 2020 2020  .keys():..      
+00019f60: 2020 2020 2020 7769 6474 6820 3d20 4e6f        width = No
+00019f70: 6e65 0d0a 2020 2020 2020 2020 656c 7365  ne..        else
+00019f80: 3a0d 0a20 2020 2020 2020 2020 2020 2077  :..            w
+00019f90: 6964 7468 203d 206b 7761 7267 735b 2277  idth = kwargs["w
+00019fa0: 6964 7468 225d 0d0a 0d0a 2020 2020 2020  idth"]....      
+00019fb0: 2020 6966 2077 6964 7468 2069 7320 4e6f    if width is No
+00019fc0: 6e65 3a0d 0a20 2020 2020 2020 2020 2020  ne:..           
+00019fd0: 206d 6178 5f77 6964 7468 203d 2022 3330   max_width = "30
+00019fe0: 3070 7822 0d0a 2020 2020 2020 2020 6966  0px"..        if
+00019ff0: 2068 6569 6768 7420 6973 204e 6f6e 653a   height is None:
+0001a000: 0d0a 2020 2020 2020 2020 2020 2020 6d61  ..            ma
+0001a010: 785f 6865 6967 6874 203d 2022 3430 3070  x_height = "400p
+0001a020: 7822 0d0a 0d0a 2020 2020 2020 2020 6966  x"....        if
+0001a030: 206e 6f74 206f 732e 7061 7468 2e65 7869   not os.path.exi
+0001a040: 7374 7328 6c65 6765 6e64 5f74 656d 706c  sts(legend_templ
+0001a050: 6174 6529 3a0d 0a20 2020 2020 2020 2020  ate):..         
+0001a060: 2020 2070 7269 6e74 2822 5468 6520 6c65     print("The le
+0001a070: 6765 6e64 2074 656d 706c 6174 6520 646f  gend template do
+0001a080: 6573 206e 6f74 2065 7869 7374 2e22 290d  es not exist.").
+0001a090: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+0001a0a0: 7572 6e0d 0a0d 0a20 2020 2020 2020 2069  urn....        i
+0001a0b0: 6620 6c65 6765 6e64 5f6b 6579 7320 6973  f legend_keys is
+0001a0c0: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
+0001a0d0: 2020 2020 2020 2020 6966 206e 6f74 2069          if not i
+0001a0e0: 7369 6e73 7461 6e63 6528 6c65 6765 6e64  sinstance(legend
+0001a0f0: 5f6b 6579 732c 206c 6973 7429 3a0d 0a20  _keys, list):.. 
+0001a100: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+0001a110: 7269 6e74 2822 5468 6520 6c65 6765 6e64  rint("The legend
+0001a120: 206b 6579 7320 6d75 7374 2062 6520 6120   keys must be a 
+0001a130: 6c69 7374 2e22 290d 0a20 2020 2020 2020  list.")..       
+0001a140: 2020 2020 2020 2020 2072 6574 7572 6e0d           return.
+0001a150: 0a20 2020 2020 2020 2065 6c73 653a 0d0a  .        else:..
+0001a160: 2020 2020 2020 2020 2020 2020 6c65 6765              lege
+0001a170: 6e64 5f6b 6579 7320 3d20 5b22 4f6e 6522  nd_keys = ["One"
+0001a180: 2c20 2254 776f 222c 2022 5468 7265 6522  , "Two", "Three"
+0001a190: 2c20 2246 6f75 7222 2c20 2265 7463 225d  , "Four", "etc"]
+0001a1a0: 0d0a 0d0a 2020 2020 2020 2020 6966 206c  ....        if l
+0001a1b0: 6567 656e 645f 636f 6c6f 7273 2069 7320  egend_colors is 
+0001a1c0: 6e6f 7420 4e6f 6e65 3a0d 0a20 2020 2020  not None:..     
+0001a1d0: 2020 2020 2020 2069 6620 6e6f 7420 6973         if not is
+0001a1e0: 696e 7374 616e 6365 286c 6567 656e 645f  instance(legend_
+0001a1f0: 636f 6c6f 7273 2c20 6c69 7374 293a 0d0a  colors, list):..
+0001a200: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a210: 7072 696e 7428 2254 6865 206c 6567 656e  print("The legen
+0001a220: 6420 636f 6c6f 7273 206d 7573 7420 6265  d colors must be
+0001a230: 2061 206c 6973 742e 2229 0d0a 2020 2020   a list.")..    
+0001a240: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0001a250: 726e 0d0a 2020 2020 2020 2020 2020 2020  rn..            
+0001a260: 656c 6966 2061 6c6c 2869 7369 6e73 7461  elif all(isinsta
+0001a270: 6e63 6528 6974 656d 2c20 7475 706c 6529  nce(item, tuple)
+0001a280: 2066 6f72 2069 7465 6d20 696e 206c 6567   for item in leg
+0001a290: 656e 645f 636f 6c6f 7273 293a 0d0a 2020  end_colors):..  
+0001a2a0: 2020 2020 2020 2020 2020 2020 2020 7472                tr
+0001a2b0: 793a 0d0a 2020 2020 2020 2020 2020 2020  y:..            
+0001a2c0: 2020 2020 2020 2020 6c65 6765 6e64 5f63          legend_c
+0001a2d0: 6f6c 6f72 7320 3d20 5b72 6762 5f74 6f5f  olors = [rgb_to_
+0001a2e0: 6865 7828 7829 2066 6f72 2078 2069 6e20  hex(x) for x in 
+0001a2f0: 6c65 6765 6e64 5f63 6f6c 6f72 735d 0d0a  legend_colors]..
+0001a300: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a310: 6578 6365 7074 2045 7863 6570 7469 6f6e  except Exception
+0001a320: 2061 7320 653a 0d0a 2020 2020 2020 2020   as e:..        
+0001a330: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+0001a340: 7428 6529 0d0a 2020 2020 2020 2020 2020  t(e)..          
+0001a350: 2020 656c 6966 2061 6c6c 280d 0a20 2020    elif all(..   
+0001a360: 2020 2020 2020 2020 2020 2020 2028 6974               (it
+0001a370: 656d 2e73 7461 7274 7377 6974 6828 2223  em.startswith("#
+0001a380: 2229 2061 6e64 206c 656e 2869 7465 6d29  ") and len(item)
+0001a390: 203d 3d20 3729 2066 6f72 2069 7465 6d20   == 7) for item 
+0001a3a0: 696e 206c 6567 656e 645f 636f 6c6f 7273  in legend_colors
+0001a3b0: 0d0a 2020 2020 2020 2020 2020 2020 293a  ..            ):
+0001a3c0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001a3d0: 2020 7061 7373 0d0a 2020 2020 2020 2020    pass..        
+0001a3e0: 2020 2020 656c 6966 2061 6c6c 2828 6c65      elif all((le
+0001a3f0: 6e28 6974 656d 2920 3d3d 2036 2920 666f  n(item) == 6) fo
+0001a400: 7220 6974 656d 2069 6e20 6c65 6765 6e64  r item in legend
+0001a410: 5f63 6f6c 6f72 7329 3a0d 0a20 2020 2020  _colors):..     
+0001a420: 2020 2020 2020 2020 2020 2070 6173 730d             pass.
+0001a430: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
+0001a440: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+0001a450: 2020 2020 7072 696e 7428 2254 6865 206c      print("The l
+0001a460: 6567 656e 6420 636f 6c6f 7273 206d 7573  egend colors mus
+0001a470: 7420 6265 2061 206c 6973 7420 6f66 2074  t be a list of t
+0001a480: 7570 6c65 732e 2229 0d0a 2020 2020 2020  uples.")..      
+0001a490: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0001a4a0: 0d0a 2020 2020 2020 2020 656c 7365 3a0d  ..        else:.
+0001a4b0: 0a20 2020 2020 2020 2020 2020 206c 6567  .            leg
+0001a4c0: 656e 645f 636f 6c6f 7273 203d 205b 0d0a  end_colors = [..
+0001a4d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a4e0: 2223 3844 4433 4337 222c 0d0a 2020 2020  "#8DD3C7",..    
+0001a4f0: 2020 2020 2020 2020 2020 2020 2223 4646              "#FF
+0001a500: 4646 4233 222c 0d0a 2020 2020 2020 2020  FFB3",..        
+0001a510: 2020 2020 2020 2020 2223 4245 4241 4441          "#BEBADA
+0001a520: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
+0001a530: 2020 2020 2223 4642 3830 3732 222c 0d0a      "#FB8072",..
+0001a540: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a550: 2223 3830 4231 4433 222c 0d0a 2020 2020  "#80B1D3",..    
+0001a560: 2020 2020 2020 2020 5d0d 0a0d 0a20 2020          ]....   
+0001a570: 2020 2020 2069 6620 6c65 6e28 6c65 6765       if len(lege
+0001a580: 6e64 5f6b 6579 7329 2021 3d20 6c65 6e28  nd_keys) != len(
+0001a590: 6c65 6765 6e64 5f63 6f6c 6f72 7329 3a0d  legend_colors):.
+0001a5a0: 0a20 2020 2020 2020 2020 2020 2070 7269  .            pri
+0001a5b0: 6e74 2822 5468 6520 6c65 6765 6e64 206b  nt("The legend k
+0001a5c0: 6579 7320 616e 6420 7661 6c75 6573 206d  eys and values m
+0001a5d0: 7573 7420 6265 2074 6865 2073 616d 6520  ust be the same 
+0001a5e0: 6c65 6e67 7468 2e22 290d 0a20 2020 2020  length.")..     
+0001a5f0: 2020 2020 2020 2072 6574 7572 6e0d 0a0d         return...
+0001a600: 0a20 2020 2020 2020 2061 6c6c 6f77 6564  .        allowed
+0001a610: 5f62 7569 6c74 696e 5f6c 6567 656e 6473  _builtin_legends
+0001a620: 203d 2062 7569 6c74 696e 5f6c 6567 656e   = builtin_legen
+0001a630: 6473 2e6b 6579 7328 290d 0a20 2020 2020  ds.keys()..     
+0001a640: 2020 2069 6620 6275 696c 7469 6e5f 6c65     if builtin_le
+0001a650: 6765 6e64 2069 7320 6e6f 7420 4e6f 6e65  gend is not None
+0001a660: 3a0d 0a20 2020 2020 2020 2020 2020 2069  :..            i
+0001a670: 6620 6275 696c 7469 6e5f 6c65 6765 6e64  f builtin_legend
+0001a680: 206e 6f74 2069 6e20 616c 6c6f 7765 645f   not in allowed_
+0001a690: 6275 696c 7469 6e5f 6c65 6765 6e64 733a  builtin_legends:
+0001a6a0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001a6b0: 2020 7072 696e 7428 0d0a 2020 2020 2020    print(..      
+0001a6c0: 2020 2020 2020 2020 2020 2020 2020 2254                "T
+0001a6d0: 6865 2062 7569 6c74 696e 206c 6567 656e  he builtin legen
+0001a6e0: 6420 6d75 7374 2062 6520 6f6e 6520 6f66  d must be one of
+0001a6f0: 2074 6865 2066 6f6c 6c6f 7769 6e67 3a20   the following: 
+0001a700: 7b7d 222e 666f 726d 6174 280d 0a20 2020  {}".format(..   
+0001a710: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a720: 2020 2020 2022 2c20 222e 6a6f 696e 2861       ", ".join(a
+0001a730: 6c6c 6f77 6564 5f62 7569 6c74 696e 5f6c  llowed_builtin_l
+0001a740: 6567 656e 6473 290d 0a20 2020 2020 2020  egends)..       
+0001a750: 2020 2020 2020 2020 2020 2020 2029 0d0a               )..
+0001a760: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a770: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+0001a780: 2020 2072 6574 7572 6e0d 0a20 2020 2020     return..     
+0001a790: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
+0001a7a0: 2020 2020 2020 2020 2020 2020 2020 6c65                le
+0001a7b0: 6765 6e64 5f64 6963 7420 3d20 6275 696c  gend_dict = buil
+0001a7c0: 7469 6e5f 6c65 6765 6e64 735b 6275 696c  tin_legends[buil
+0001a7d0: 7469 6e5f 6c65 6765 6e64 5d0d 0a20 2020  tin_legend]..   
+0001a7e0: 2020 2020 2020 2020 2020 2020 206c 6567               leg
+0001a7f0: 656e 645f 6b65 7973 203d 206c 6973 7428  end_keys = list(
+0001a800: 6c65 6765 6e64 5f64 6963 742e 6b65 7973  legend_dict.keys
+0001a810: 2829 290d 0a20 2020 2020 2020 2020 2020  ())..           
+0001a820: 2020 2020 206c 6567 656e 645f 636f 6c6f       legend_colo
+0001a830: 7273 203d 206c 6973 7428 6c65 6765 6e64  rs = list(legend
+0001a840: 5f64 6963 742e 7661 6c75 6573 2829 290d  _dict.values()).
+0001a850: 0a0d 0a20 2020 2020 2020 2069 6620 6c65  ...        if le
+0001a860: 6765 6e64 5f64 6963 7420 6973 206e 6f74  gend_dict is not
+0001a870: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+0001a880: 2020 2020 6966 206e 6f74 2069 7369 6e73      if not isins
+0001a890: 7461 6e63 6528 6c65 6765 6e64 5f64 6963  tance(legend_dic
+0001a8a0: 742c 2064 6963 7429 3a0d 0a20 2020 2020  t, dict):..     
+0001a8b0: 2020 2020 2020 2020 2020 2070 7269 6e74             print
+0001a8c0: 2822 5468 6520 6c65 6765 6e64 2064 6963  ("The legend dic
+0001a8d0: 7420 6d75 7374 2062 6520 6120 6469 6374  t must be a dict
+0001a8e0: 696f 6e61 7279 2e22 290d 0a20 2020 2020  ionary.")..     
+0001a8f0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0001a900: 6e0d 0a20 2020 2020 2020 2020 2020 2065  n..            e
+0001a910: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
+0001a920: 2020 2020 2020 6c65 6765 6e64 5f6b 6579        legend_key
+0001a930: 7320 3d20 6c69 7374 286c 6567 656e 645f  s = list(legend_
+0001a940: 6469 6374 2e6b 6579 7328 2929 0d0a 2020  dict.keys())..  
+0001a950: 2020 2020 2020 2020 2020 2020 2020 6c65                le
+0001a960: 6765 6e64 5f63 6f6c 6f72 7320 3d20 6c69  gend_colors = li
+0001a970: 7374 286c 6567 656e 645f 6469 6374 2e76  st(legend_dict.v
+0001a980: 616c 7565 7328 2929 0d0a 2020 2020 2020  alues())..      
+0001a990: 2020 2020 2020 2020 2020 6966 2061 6c6c            if all
+0001a9a0: 2869 7369 6e73 7461 6e63 6528 6974 656d  (isinstance(item
+0001a9b0: 2c20 7475 706c 6529 2066 6f72 2069 7465  , tuple) for ite
+0001a9c0: 6d20 696e 206c 6567 656e 645f 636f 6c6f  m in legend_colo
+0001a9d0: 7273 293a 0d0a 2020 2020 2020 2020 2020  rs):..          
+0001a9e0: 2020 2020 2020 2020 2020 7472 793a 0d0a            try:..
+0001a9f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001aa00: 2020 2020 2020 2020 6c65 6765 6e64 5f63          legend_c
+0001aa10: 6f6c 6f72 7320 3d20 5b72 6762 5f74 6f5f  olors = [rgb_to_
+0001aa20: 6865 7828 7829 2066 6f72 2078 2069 6e20  hex(x) for x in 
+0001aa30: 6c65 6765 6e64 5f63 6f6c 6f72 735d 0d0a  legend_colors]..
+0001aa40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001aa50: 2020 2020 6578 6365 7074 2045 7863 6570      except Excep
+0001aa60: 7469 6f6e 2061 7320 653a 0d0a 2020 2020  tion as e:..    
+0001aa70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001aa80: 2020 2020 7072 696e 7428 6529 0d0a 0d0a      print(e)....
+0001aa90: 2020 2020 2020 2020 616c 6c6f 7765 645f          allowed_
+0001aaa0: 706f 7369 7469 6f6e 7320 3d20 5b0d 0a20  positions = [.. 
+0001aab0: 2020 2020 2020 2020 2020 2022 746f 706c             "topl
+0001aac0: 6566 7422 2c0d 0a20 2020 2020 2020 2020  eft",..         
+0001aad0: 2020 2022 746f 7072 6967 6874 222c 0d0a     "topright",..
+0001aae0: 2020 2020 2020 2020 2020 2020 2262 6f74              "bot
+0001aaf0: 746f 6d6c 6566 7422 2c0d 0a20 2020 2020  tomleft",..     
+0001ab00: 2020 2020 2020 2022 626f 7474 6f6d 7269         "bottomri
+0001ab10: 6768 7422 2c0d 0a20 2020 2020 2020 205d  ght",..        ]
+0001ab20: 0d0a 2020 2020 2020 2020 6966 2070 6f73  ..        if pos
+0001ab30: 6974 696f 6e20 6e6f 7420 696e 2061 6c6c  ition not in all
+0001ab40: 6f77 6564 5f70 6f73 6974 696f 6e73 3a0d  owed_positions:.
+0001ab50: 0a20 2020 2020 2020 2020 2020 2070 7269  .            pri
+0001ab60: 6e74 280d 0a20 2020 2020 2020 2020 2020  nt(..           
+0001ab70: 2020 2020 2022 5468 6520 706f 7369 7469       "The positi
+0001ab80: 6f6e 206d 7573 7420 6265 206f 6e65 206f  on must be one o
+0001ab90: 6620 7468 6520 666f 6c6c 6f77 696e 673a  f the following:
+0001aba0: 207b 7d22 2e66 6f72 6d61 7428 0d0a 2020   {}".format(..  
+0001abb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001abc0: 2020 222c 2022 2e6a 6f69 6e28 616c 6c6f    ", ".join(allo
+0001abd0: 7765 645f 706f 7369 7469 6f6e 7329 0d0a  wed_positions)..
+0001abe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001abf0: 290d 0a20 2020 2020 2020 2020 2020 2029  )..            )
+0001ac00: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
+0001ac10: 7475 726e 0d0a 0d0a 2020 2020 2020 2020  turn....        
+0001ac20: 6865 6164 6572 203d 205b 5d0d 0a20 2020  header = []..   
+0001ac30: 2020 2020 2063 6f6e 7465 6e74 203d 205b       content = [
+0001ac40: 5d0d 0a20 2020 2020 2020 2066 6f6f 7465  ]..        foote
+0001ac50: 7220 3d20 5b5d 0d0a 0d0a 2020 2020 2020  r = []....      
+0001ac60: 2020 7769 7468 206f 7065 6e28 6c65 6765    with open(lege
+0001ac70: 6e64 5f74 656d 706c 6174 6529 2061 7320  nd_template) as 
+0001ac80: 663a 0d0a 2020 2020 2020 2020 2020 2020  f:..            
+0001ac90: 6c69 6e65 7320 3d20 662e 7265 6164 6c69  lines = f.readli
+0001aca0: 6e65 7328 290d 0a20 2020 2020 2020 2020  nes()..         
+0001acb0: 2020 206c 696e 6573 5b33 5d20 3d20 6c69     lines[3] = li
+0001acc0: 6e65 735b 335d 2e72 6570 6c61 6365 2822  nes[3].replace("
+0001acd0: 4c65 6765 6e64 222c 206c 6567 656e 645f  Legend", legend_
+0001ace0: 7469 746c 6529 0d0a 2020 2020 2020 2020  title)..        
+0001acf0: 2020 2020 6865 6164 6572 203d 206c 696e      header = lin
+0001ad00: 6573 5b3a 365d 0d0a 2020 2020 2020 2020  es[:6]..        
+0001ad10: 2020 2020 666f 6f74 6572 203d 206c 696e      footer = lin
+0001ad20: 6573 5b31 313a 5d0d 0a0d 0a20 2020 2020  es[11:]....     
+0001ad30: 2020 2066 6f72 2069 6e64 6578 2c20 6b65     for index, ke
+0001ad40: 7920 696e 2065 6e75 6d65 7261 7465 286c  y in enumerate(l
+0001ad50: 6567 656e 645f 6b65 7973 293a 0d0a 2020  egend_keys):..  
+0001ad60: 2020 2020 2020 2020 2020 636f 6c6f 7220            color 
+0001ad70: 3d20 6c65 6765 6e64 5f63 6f6c 6f72 735b  = legend_colors[
+0001ad80: 696e 6465 785d 0d0a 2020 2020 2020 2020  index]..        
+0001ad90: 2020 2020 6966 206e 6f74 2063 6f6c 6f72      if not color
+0001ada0: 2e73 7461 7274 7377 6974 6828 2223 2229  .startswith("#")
+0001adb0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0001adc0: 2020 2063 6f6c 6f72 203d 2022 2322 202b     color = "#" +
+0001add0: 2063 6f6c 6f72 0d0a 2020 2020 2020 2020   color..        
+0001ade0: 2020 2020 6974 656d 203d 2022 2020 2020      item = "    
+0001adf0: 2020 3c6c 693e 3c73 7061 6e20 7374 796c    <li><span styl
+0001ae00: 653d 2762 6163 6b67 726f 756e 643a 7b7d  e='background:{}
+0001ae10: 3b27 3e3c 2f73 7061 6e3e 7b7d 3c2f 6c69  ;'></span>{}</li
+0001ae20: 3e5c 6e22 2e66 6f72 6d61 7428 0d0a 2020  >\n".format(..  
+0001ae30: 2020 2020 2020 2020 2020 2020 2020 636f                co
+0001ae40: 6c6f 722c 206b 6579 0d0a 2020 2020 2020  lor, key..      
+0001ae50: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
+0001ae60: 2020 2020 2063 6f6e 7465 6e74 2e61 7070       content.app
+0001ae70: 656e 6428 6974 656d 290d 0a0d 0a20 2020  end(item)....   
+0001ae80: 2020 2020 206c 6567 656e 645f 6874 6d6c       legend_html
+0001ae90: 203d 2068 6561 6465 7220 2b20 636f 6e74   = header + cont
+0001aea0: 656e 7420 2b20 666f 6f74 6572 0d0a 2020  ent + footer..  
+0001aeb0: 2020 2020 2020 6c65 6765 6e64 5f74 6578        legend_tex
+0001aec0: 7420 3d20 2222 2e6a 6f69 6e28 6c65 6765  t = "".join(lege
+0001aed0: 6e64 5f68 746d 6c29 0d0a 0d0a 2020 2020  nd_html)....    
+0001aee0: 2020 2020 7472 793a 0d0a 0d0a 2020 2020      try:....    
+0001aef0: 2020 2020 2020 2020 6c65 6765 6e64 5f6f          legend_o
+0001af00: 7574 7075 745f 7769 6467 6574 203d 2077  utput_widget = w
+0001af10: 6964 6765 7473 2e4f 7574 7075 7428 0d0a  idgets.Output(..
+0001af20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001af30: 6c61 796f 7574 3d7b 0d0a 2020 2020 2020  layout={..      
+0001af40: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+0001af50: 2262 6f72 6465 7222 3a20 2231 7078 2073  "border": "1px s
+0001af60: 6f6c 6964 2062 6c61 636b 222c 0d0a 2020  olid black",..  
+0001af70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001af80: 2020 226d 6178 5f77 6964 7468 223a 206d    "max_width": m
+0001af90: 6178 5f77 6964 7468 2c0d 0a20 2020 2020  ax_width,..     
+0001afa0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0001afb0: 6d69 6e5f 7769 6474 6822 3a20 6d69 6e5f  min_width": min_
+0001afc0: 7769 6474 682c 0d0a 2020 2020 2020 2020  width,..        
+0001afd0: 2020 2020 2020 2020 2020 2020 226d 6178              "max
+0001afe0: 5f68 6569 6768 7422 3a20 6d61 785f 6865  _height": max_he
+0001aff0: 6967 6874 2c0d 0a20 2020 2020 2020 2020  ight,..         
+0001b000: 2020 2020 2020 2020 2020 2022 6d69 6e5f             "min_
+0001b010: 6865 6967 6874 223a 206d 696e 5f68 6569  height": min_hei
+0001b020: 6768 742c 0d0a 2020 2020 2020 2020 2020  ght,..          
+0001b030: 2020 2020 2020 2020 2020 2268 6569 6768            "heigh
+0001b040: 7422 3a20 6865 6967 6874 2c0d 0a20 2020  t": height,..   
+0001b050: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b060: 2022 7769 6474 6822 3a20 7769 6474 682c   "width": width,
+0001b070: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001b080: 2020 2020 2020 226f 7665 7266 6c6f 7722        "overflow"
+0001b090: 3a20 2273 6372 6f6c 6c22 2c0d 0a20 2020  : "scroll",..   
+0001b0a0: 2020 2020 2020 2020 2020 2020 207d 0d0a               }..
+0001b0b0: 2020 2020 2020 2020 2020 2020 290d 0a20              ).. 
+0001b0c0: 2020 2020 2020 2020 2020 206c 6567 656e             legen
+0001b0d0: 645f 636f 6e74 726f 6c20 3d20 6970 796c  d_control = ipyl
+0001b0e0: 6561 666c 6574 2e57 6964 6765 7443 6f6e  eaflet.WidgetCon
+0001b0f0: 7472 6f6c 280d 0a20 2020 2020 2020 2020  trol(..         
+0001b100: 2020 2020 2020 2077 6964 6765 743d 6c65         widget=le
+0001b110: 6765 6e64 5f6f 7574 7075 745f 7769 6467  gend_output_widg
+0001b120: 6574 2c20 706f 7369 7469 6f6e 3d70 6f73  et, position=pos
+0001b130: 6974 696f 6e0d 0a20 2020 2020 2020 2020  ition..         
+0001b140: 2020 2029 0d0a 2020 2020 2020 2020 2020     )..          
+0001b150: 2020 6c65 6765 6e64 5f77 6964 6765 7420    legend_widget 
+0001b160: 3d20 7769 6467 6574 732e 4854 4d4c 2876  = widgets.HTML(v
+0001b170: 616c 7565 3d6c 6567 656e 645f 7465 7874  alue=legend_text
+0001b180: 290d 0a20 2020 2020 2020 2020 2020 2077  )..            w
+0001b190: 6974 6820 6c65 6765 6e64 5f6f 7574 7075  ith legend_outpu
+0001b1a0: 745f 7769 6467 6574 3a0d 0a20 2020 2020  t_widget:..     
+0001b1b0: 2020 2020 2020 2020 2020 2064 6973 706c             displ
+0001b1c0: 6179 286c 6567 656e 645f 7769 6467 6574  ay(legend_widget
+0001b1d0: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+0001b1e0: 2073 656c 662e 6c65 6765 6e64 5f77 6964   self.legend_wid
+0001b1f0: 6765 7420 3d20 6c65 6765 6e64 5f6f 7574  get = legend_out
+0001b200: 7075 745f 7769 6467 6574 0d0a 2020 2020  put_widget..    
+0001b210: 2020 2020 2020 2020 7365 6c66 2e6c 6567          self.leg
+0001b220: 656e 645f 636f 6e74 726f 6c20 3d20 6c65  end_control = le
+0001b230: 6765 6e64 5f63 6f6e 7472 6f6c 0d0a 2020  gend_control..  
+0001b240: 2020 2020 2020 2020 2020 7365 6c66 2e61            self.a
+0001b250: 6464 5f63 6f6e 7472 6f6c 286c 6567 656e  dd_control(legen
+0001b260: 645f 636f 6e74 726f 6c29 0d0a 0d0a 2020  d_control)....  
+0001b270: 2020 2020 2020 2020 2020 6966 206c 6179            if lay
+0001b280: 6572 5f6e 616d 6520 696e 2073 656c 662e  er_name in self.
+0001b290: 6565 5f6c 6179 6572 5f6e 616d 6573 3a0d  ee_layer_names:.
+0001b2a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001b2b0: 2073 656c 662e 6565 5f6c 6179 6572 5f64   self.ee_layer_d
+0001b2c0: 6963 745b 6c61 7965 725f 6e61 6d65 5d5b  ict[layer_name][
+0001b2d0: 226c 6567 656e 6422 5d20 3d20 6c65 6765  "legend"] = lege
+0001b2e0: 6e64 5f63 6f6e 7472 6f6c 0d0a 0d0a 2020  nd_control....  
+0001b2f0: 2020 2020 2020 6578 6365 7074 2045 7863        except Exc
+0001b300: 6570 7469 6f6e 2061 7320 653a 0d0a 2020  eption as e:..  
+0001b310: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+0001b320: 4578 6365 7074 696f 6e28 6529 0d0a 0d0a  Exception(e)....
+0001b330: 2020 2020 6465 6620 6164 645f 636f 6c6f      def add_colo
+0001b340: 7262 6172 280d 0a20 2020 2020 2020 2073  rbar(..        s
+0001b350: 656c 662c 0d0a 2020 2020 2020 2020 7669  elf,..        vi
+0001b360: 735f 7061 7261 6d73 3d4e 6f6e 652c 0d0a  s_params=None,..
+0001b370: 2020 2020 2020 2020 636d 6170 3d22 6772          cmap="gr
+0001b380: 6179 222c 0d0a 2020 2020 2020 2020 6469  ay",..        di
+0001b390: 7363 7265 7465 3d46 616c 7365 2c0d 0a20  screte=False,.. 
+0001b3a0: 2020 2020 2020 206c 6162 656c 3d4e 6f6e         label=Non
+0001b3b0: 652c 0d0a 2020 2020 2020 2020 6f72 6965  e,..        orie
+0001b3c0: 6e74 6174 696f 6e3d 2268 6f72 697a 6f6e  ntation="horizon
+0001b3d0: 7461 6c22 2c0d 0a20 2020 2020 2020 2070  tal",..        p
+0001b3e0: 6f73 6974 696f 6e3d 2262 6f74 746f 6d72  osition="bottomr
+0001b3f0: 6967 6874 222c 0d0a 2020 2020 2020 2020  ight",..        
+0001b400: 7472 616e 7370 6172 656e 745f 6267 3d46  transparent_bg=F
+0001b410: 616c 7365 2c0d 0a20 2020 2020 2020 206c  alse,..        l
+0001b420: 6179 6572 5f6e 616d 653d 4e6f 6e65 2c0d  ayer_name=None,.
+0001b430: 0a20 2020 2020 2020 202a 2a6b 7761 7267  .        **kwarg
+0001b440: 732c 0d0a 2020 2020 293a 0d0a 2020 2020  s,..    ):..    
+0001b450: 2020 2020 2222 2241 6464 2061 206d 6174      """Add a mat
+0001b460: 706c 6f74 6c69 6220 636f 6c6f 7262 6172  plotlib colorbar
+0001b470: 2074 6f20 7468 6520 6d61 700d 0a0d 0a20   to the map.... 
+0001b480: 2020 2020 2020 2041 7267 733a 0d0a 2020         Args:..  
+0001b490: 2020 2020 2020 2020 2020 7669 735f 7061            vis_pa
+0001b4a0: 7261 6d73 2028 6469 6374 293a 2056 6973  rams (dict): Vis
+0001b4b0: 7561 6c69 7a61 7469 6f6e 2070 6172 616d  ualization param
+0001b4c0: 6574 6572 7320 6173 2061 2064 6963 7469  eters as a dicti
+0001b4d0: 6f6e 6172 792e 2053 6565 2068 7474 7073  onary. See https
+0001b4e0: 3a2f 2f64 6576 656c 6f70 6572 732e 676f  ://developers.go
+0001b4f0: 6f67 6c65 2e63 6f6d 2f65 6172 7468 2d65  ogle.com/earth-e
+0001b500: 6e67 696e 652f 6775 6964 6573 2f69 6d61  ngine/guides/ima
+0001b510: 6765 5f76 6973 7561 6c69 7a61 7469 6f6e  ge_visualization
+0001b520: 2066 6f72 206f 7074 696f 6e73 2e0d 0a20   for options... 
+0001b530: 2020 2020 2020 2020 2020 2063 6d61 7020             cmap 
+0001b540: 2873 7472 2c20 6f70 7469 6f6e 616c 293a  (str, optional):
+0001b550: 204d 6174 706c 6f74 6c69 6220 636f 6c6f   Matplotlib colo
+0001b560: 726d 6170 2e20 4465 6661 756c 7473 2074  rmap. Defaults t
+0001b570: 6f20 2267 7261 7922 2e20 5365 6520 6874  o "gray". See ht
+0001b580: 7470 733a 2f2f 6d61 7470 6c6f 746c 6962  tps://matplotlib
+0001b590: 2e6f 7267 2f33 2e33 2e34 2f74 7574 6f72  .org/3.3.4/tutor
+0001b5a0: 6961 6c73 2f63 6f6c 6f72 732f 636f 6c6f  ials/colors/colo
+0001b5b0: 726d 6170 732e 6874 6d6c 2373 7068 782d  rmaps.html#sphx-
+0001b5c0: 676c 722d 7475 746f 7269 616c 732d 636f  glr-tutorials-co
+0001b5d0: 6c6f 7273 2d63 6f6c 6f72 6d61 7073 2d70  lors-colormaps-p
+0001b5e0: 7920 666f 7220 6f70 7469 6f6e 732e 0d0a  y for options...
+0001b5f0: 2020 2020 2020 2020 2020 2020 6469 7363              disc
+0001b600: 7265 7465 2028 626f 6f6c 2c20 6f70 7469  rete (bool, opti
+0001b610: 6f6e 616c 293a 2057 6865 7468 6572 2074  onal): Whether t
+0001b620: 6f20 6372 6561 7465 2061 2064 6973 6372  o create a discr
+0001b630: 6574 6520 636f 6c6f 7262 6172 2e20 4465  ete colorbar. De
+0001b640: 6661 756c 7473 2074 6f20 4661 6c73 652e  faults to False.
+0001b650: 0d0a 2020 2020 2020 2020 2020 2020 6c61  ..            la
+0001b660: 6265 6c20 2873 7472 2c20 6f70 7469 6f6e  bel (str, option
+0001b670: 616c 293a 204c 6162 656c 2066 6f72 2074  al): Label for t
+0001b680: 6865 2063 6f6c 6f72 6261 722e 2044 6566  he colorbar. Def
+0001b690: 6175 6c74 7320 746f 204e 6f6e 652e 0d0a  aults to None...
+0001b6a0: 2020 2020 2020 2020 2020 2020 6f72 6965              orie
+0001b6b0: 6e74 6174 696f 6e20 2873 7472 2c20 6f70  ntation (str, op
+0001b6c0: 7469 6f6e 616c 293a 204f 7269 656e 7461  tional): Orienta
+0001b6d0: 7469 6f6e 206f 6620 7468 6520 636f 6c6f  tion of the colo
+0001b6e0: 7262 6172 2c20 7375 6368 2061 7320 2276  rbar, such as "v
+0001b6f0: 6572 7469 6361 6c22 2061 6e64 2022 686f  ertical" and "ho
+0001b700: 7269 7a6f 6e74 616c 222e 2044 6566 6175  rizontal". Defau
+0001b710: 6c74 7320 746f 2022 686f 7269 7a6f 6e74  lts to "horizont
+0001b720: 616c 222e 0d0a 2020 2020 2020 2020 2020  al"...          
+0001b730: 2020 706f 7369 7469 6f6e 2028 7374 722c    position (str,
+0001b740: 206f 7074 696f 6e61 6c29 3a20 506f 7369   optional): Posi
+0001b750: 7469 6f6e 206f 6620 7468 6520 636f 6c6f  tion of the colo
+0001b760: 7262 6172 206f 6e20 7468 6520 6d61 702e  rbar on the map.
+0001b770: 2049 7420 6361 6e20 6265 206f 6e65 206f   It can be one o
+0001b780: 663a 2074 6f70 6c65 6674 2c20 746f 7072  f: topleft, topr
+0001b790: 6967 6874 2c20 626f 7474 6f6d 6c65 6674  ight, bottomleft
+0001b7a0: 2c20 616e 6420 626f 7474 6f6d 7269 6768  , and bottomrigh
+0001b7b0: 742e 2044 6566 6175 6c74 7320 746f 2022  t. Defaults to "
+0001b7c0: 626f 7474 6f6d 7269 6768 7422 2e0d 0a20  bottomright"... 
+0001b7d0: 2020 2020 2020 2020 2020 2074 7261 6e73             trans
+0001b7e0: 7061 7265 6e74 5f62 6720 2862 6f6f 6c2c  parent_bg (bool,
+0001b7f0: 206f 7074 696f 6e61 6c29 3a20 5768 6574   optional): Whet
+0001b800: 6865 7220 746f 2075 7365 2074 7261 6e73  her to use trans
+0001b810: 7061 7265 6e74 2062 6163 6b67 726f 756e  parent backgroun
+0001b820: 642e 2044 6566 6175 6c74 7320 746f 2046  d. Defaults to F
+0001b830: 616c 7365 2e0d 0a20 2020 2020 2020 2020  alse...         
+0001b840: 2020 206c 6179 6572 5f6e 616d 6520 2873     layer_name (s
+0001b850: 7472 2c20 6f70 7469 6f6e 616c 293a 2054  tr, optional): T
+0001b860: 6865 206c 6179 6572 206e 616d 6520 6173  he layer name as
+0001b870: 736f 6369 6174 6564 2077 6974 6820 7468  sociated with th
+0001b880: 6520 636f 6c6f 7262 6172 2e20 4465 6661  e colorbar. Defa
+0001b890: 756c 7473 2074 6f20 4e6f 6e65 2e0d 0a0d  ults to None....
+0001b8a0: 0a20 2020 2020 2020 2052 6169 7365 733a  .        Raises:
+0001b8b0: 0d0a 2020 2020 2020 2020 2020 2020 5479  ..            Ty
+0001b8c0: 7065 4572 726f 723a 2049 6620 7468 6520  peError: If the 
+0001b8d0: 7669 735f 7061 7261 6d73 2069 7320 6e6f  vis_params is no
+0001b8e0: 7420 6120 6469 6374 696f 6e61 7279 2e0d  t a dictionary..
+0001b8f0: 0a20 2020 2020 2020 2020 2020 2056 616c  .            Val
+0001b900: 7565 4572 726f 723a 2049 6620 7468 6520  ueError: If the 
+0001b910: 6f72 6965 6e74 6174 696f 6e20 6973 206e  orientation is n
+0001b920: 6f74 2065 6974 6865 7220 686f 7269 7a6f  ot either horizo
+0001b930: 6e74 616c 206f 7220 7665 7274 6963 616c  ntal or vertical
+0001b940: 2e0d 0a20 2020 2020 2020 2020 2020 2056  ...            V
+0001b950: 616c 7565 4572 726f 723a 2049 6620 7468  alueError: If th
+0001b960: 6520 7072 6f76 6964 6564 206d 696e 2076  e provided min v
+0001b970: 616c 7565 2069 7320 6e6f 7420 7363 616c  alue is not scal
+0001b980: 6172 2074 7970 652e 0d0a 2020 2020 2020  ar type...      
+0001b990: 2020 2020 2020 5661 6c75 6545 7272 6f72        ValueError
+0001b9a0: 3a20 4966 2074 6865 2070 726f 7669 6465  : If the provide
+0001b9b0: 6420 6d61 7820 7661 6c75 6520 6973 206e  d max value is n
+0001b9c0: 6f74 2073 6361 6c61 7220 7479 7065 2e0d  ot scalar type..
+0001b9d0: 0a20 2020 2020 2020 2020 2020 2056 616c  .            Val
+0001b9e0: 7565 4572 726f 723a 2049 6620 7468 6520  ueError: If the 
+0001b9f0: 7072 6f76 6964 6564 206f 7061 6369 7479  provided opacity
+0001ba00: 2076 616c 7565 2069 7320 6e6f 7420 7363   value is not sc
+0001ba10: 616c 6172 2074 7970 652e 0d0a 2020 2020  alar type...    
+0001ba20: 2020 2020 2020 2020 5661 6c75 6545 7272          ValueErr
+0001ba30: 6f72 3a20 4966 2063 6d61 7020 6f72 2070  or: If cmap or p
+0001ba40: 616c 6574 7465 2069 7320 6e6f 7420 7072  alette is not pr
+0001ba50: 6f76 6964 6564 2e0d 0a20 2020 2020 2020  ovided...       
+0001ba60: 2022 2222 0d0a 2020 2020 2020 2020 696d   """..        im
+0001ba70: 706f 7274 206d 6174 706c 6f74 6c69 6220  port matplotlib 
+0001ba80: 6173 206d 706c 0d0a 2020 2020 2020 2020  as mpl..        
+0001ba90: 696d 706f 7274 206d 6174 706c 6f74 6c69  import matplotli
+0001baa0: 622e 7079 706c 6f74 2061 7320 706c 740d  b.pyplot as plt.
+0001bab0: 0a20 2020 2020 2020 2069 6d70 6f72 7420  .        import 
+0001bac0: 6e75 6d70 7920 6173 206e 700d 0a0d 0a20  numpy as np.... 
+0001bad0: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
+0001bae0: 616e 6365 2876 6973 5f70 6172 616d 732c  ance(vis_params,
+0001baf0: 206c 6973 7429 3a0d 0a20 2020 2020 2020   list):..       
+0001bb00: 2020 2020 2076 6973 5f70 6172 616d 7320       vis_params 
+0001bb10: 3d20 7b22 7061 6c65 7474 6522 3a20 7669  = {"palette": vi
+0001bb20: 735f 7061 7261 6d73 7d0d 0a20 2020 2020  s_params}..     
+0001bb30: 2020 2065 6c69 6620 6973 696e 7374 616e     elif isinstan
+0001bb40: 6365 2876 6973 5f70 6172 616d 732c 2074  ce(vis_params, t
+0001bb50: 7570 6c65 293a 0d0a 2020 2020 2020 2020  uple):..        
+0001bb60: 2020 2020 7669 735f 7061 7261 6d73 203d      vis_params =
+0001bb70: 207b 2270 616c 6574 7465 223a 206c 6973   {"palette": lis
+0001bb80: 7428 7669 735f 7061 7261 6d73 297d 0d0a  t(vis_params)}..
+0001bb90: 2020 2020 2020 2020 656c 6966 2076 6973          elif vis
+0001bba0: 5f70 6172 616d 7320 6973 204e 6f6e 653a  _params is None:
+0001bbb0: 0d0a 2020 2020 2020 2020 2020 2020 7669  ..            vi
+0001bbc0: 735f 7061 7261 6d73 203d 207b 7d0d 0a0d  s_params = {}...
+0001bbd0: 0a20 2020 2020 2020 2069 6620 2263 6f6c  .        if "col
+0001bbe0: 6f72 7322 2069 6e20 6b77 6172 6773 2061  ors" in kwargs a
+0001bbf0: 6e64 2069 7369 6e73 7461 6e63 6528 6b77  nd isinstance(kw
+0001bc00: 6172 6773 5b22 636f 6c6f 7273 225d 2c20  args["colors"], 
+0001bc10: 6c69 7374 293a 0d0a 2020 2020 2020 2020  list):..        
+0001bc20: 2020 2020 7669 735f 7061 7261 6d73 5b22      vis_params["
+0001bc30: 7061 6c65 7474 6522 5d20 3d20 6b77 6172  palette"] = kwar
+0001bc40: 6773 5b22 636f 6c6f 7273 225d 0d0a 0d0a  gs["colors"]....
+0001bc50: 2020 2020 2020 2020 6966 2022 636f 6c6f          if "colo
+0001bc60: 7273 2220 696e 206b 7761 7267 7320 616e  rs" in kwargs an
+0001bc70: 6420 6973 696e 7374 616e 6365 286b 7761  d isinstance(kwa
+0001bc80: 7267 735b 2263 6f6c 6f72 7322 5d2c 2074  rgs["colors"], t
+0001bc90: 7570 6c65 293a 0d0a 2020 2020 2020 2020  uple):..        
+0001bca0: 2020 2020 7669 735f 7061 7261 6d73 5b22      vis_params["
+0001bcb0: 7061 6c65 7474 6522 5d20 3d20 6c69 7374  palette"] = list
+0001bcc0: 286b 7761 7267 735b 2263 6f6c 6f72 7322  (kwargs["colors"
+0001bcd0: 5d29 0d0a 0d0a 2020 2020 2020 2020 6966  ])....        if
+0001bce0: 2022 766d 696e 2220 696e 206b 7761 7267   "vmin" in kwarg
+0001bcf0: 733a 0d0a 2020 2020 2020 2020 2020 2020  s:..            
+0001bd00: 7669 735f 7061 7261 6d73 5b22 6d69 6e22  vis_params["min"
+0001bd10: 5d20 3d20 6b77 6172 6773 5b22 766d 696e  ] = kwargs["vmin
+0001bd20: 225d 0d0a 2020 2020 2020 2020 2020 2020  "]..            
+0001bd30: 6465 6c20 6b77 6172 6773 5b22 766d 696e  del kwargs["vmin
+0001bd40: 225d 0d0a 0d0a 2020 2020 2020 2020 6966  "]....        if
+0001bd50: 2022 766d 6178 2220 696e 206b 7761 7267   "vmax" in kwarg
+0001bd60: 733a 0d0a 2020 2020 2020 2020 2020 2020  s:..            
+0001bd70: 7669 735f 7061 7261 6d73 5b22 6d61 7822  vis_params["max"
+0001bd80: 5d20 3d20 6b77 6172 6773 5b22 766d 6178  ] = kwargs["vmax
+0001bd90: 225d 0d0a 2020 2020 2020 2020 2020 2020  "]..            
+0001bda0: 6465 6c20 6b77 6172 6773 5b22 766d 6178  del kwargs["vmax
+0001bdb0: 225d 0d0a 0d0a 2020 2020 2020 2020 6966  "]....        if
+0001bdc0: 2022 6361 7074 696f 6e22 2069 6e20 6b77   "caption" in kw
+0001bdd0: 6172 6773 3a0d 0a20 2020 2020 2020 2020  args:..         
+0001bde0: 2020 206c 6162 656c 203d 206b 7761 7267     label = kwarg
+0001bdf0: 735b 2263 6170 7469 6f6e 225d 0d0a 2020  s["caption"]..  
+0001be00: 2020 2020 2020 2020 2020 6465 6c20 6b77            del kw
+0001be10: 6172 6773 5b22 6361 7074 696f 6e22 5d0d  args["caption"].
+0001be20: 0a0d 0a20 2020 2020 2020 2069 6620 6e6f  ...        if no
+0001be30: 7420 6973 696e 7374 616e 6365 2876 6973  t isinstance(vis
+0001be40: 5f70 6172 616d 732c 2064 6963 7429 3a0d  _params, dict):.
+0001be50: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
+0001be60: 7365 2054 7970 6545 7272 6f72 2822 5468  se TypeError("Th
+0001be70: 6520 7669 735f 7061 7261 6d73 206d 7573  e vis_params mus
+0001be80: 7420 6265 2061 2064 6963 7469 6f6e 6172  t be a dictionar
+0001be90: 792e 2229 0d0a 0d0a 2020 2020 2020 2020  y.")....        
+0001bea0: 6966 206f 7269 656e 7461 7469 6f6e 206e  if orientation n
+0001beb0: 6f74 2069 6e20 5b22 686f 7269 7a6f 6e74  ot in ["horizont
+0001bec0: 616c 222c 2022 7665 7274 6963 616c 225d  al", "vertical"]
+0001bed0: 3a0d 0a20 2020 2020 2020 2020 2020 2072  :..            r
+0001bee0: 6169 7365 2056 616c 7565 4572 726f 7228  aise ValueError(
+0001bef0: 2254 6865 206f 7269 656e 7461 7469 6f6e  "The orientation
+0001bf00: 206d 7573 7420 6265 2065 6974 6865 7220   must be either 
+0001bf10: 686f 7269 7a6f 6e74 616c 206f 7220 7665  horizontal or ve
+0001bf20: 7274 6963 616c 2e22 290d 0a0d 0a20 2020  rtical.")....   
+0001bf30: 2020 2020 2069 6620 6f72 6965 6e74 6174       if orientat
+0001bf40: 696f 6e20 3d3d 2022 686f 7269 7a6f 6e74  ion == "horizont
+0001bf50: 616c 223a 0d0a 2020 2020 2020 2020 2020  al":..          
+0001bf60: 2020 7769 6474 682c 2068 6569 6768 7420    width, height 
+0001bf70: 3d20 362e 302c 2030 2e34 0d0a 2020 2020  = 6.0, 0.4..    
+0001bf80: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
+0001bf90: 2020 2020 2020 2077 6964 7468 2c20 6865         width, he
+0001bfa0: 6967 6874 203d 2030 2e34 2c20 342e 300d  ight = 0.4, 4.0.
+0001bfb0: 0a0d 0a20 2020 2020 2020 2069 6620 2277  ...        if "w
+0001bfc0: 6964 7468 2220 696e 206b 7761 7267 733a  idth" in kwargs:
+0001bfd0: 0d0a 2020 2020 2020 2020 2020 2020 7769  ..            wi
+0001bfe0: 6474 6820 3d20 6b77 6172 6773 5b22 7769  dth = kwargs["wi
+0001bff0: 6474 6822 5d0d 0a20 2020 2020 2020 2020  dth"]..         
+0001c000: 2020 206b 7761 7267 732e 706f 7028 2277     kwargs.pop("w
+0001c010: 6964 7468 2229 0d0a 0d0a 2020 2020 2020  idth")....      
+0001c020: 2020 6966 2022 6865 6967 6874 2220 696e    if "height" in
+0001c030: 206b 7761 7267 733a 0d0a 2020 2020 2020   kwargs:..      
+0001c040: 2020 2020 2020 6865 6967 6874 203d 206b        height = k
+0001c050: 7761 7267 735b 2268 6569 6768 7422 5d0d  wargs["height"].
+0001c060: 0a20 2020 2020 2020 2020 2020 206b 7761  .            kwa
+0001c070: 7267 732e 706f 7028 2268 6569 6768 7422  rgs.pop("height"
+0001c080: 290d 0a0d 0a20 2020 2020 2020 2076 6973  )....        vis
+0001c090: 5f6b 6579 7320 3d20 6c69 7374 2876 6973  _keys = list(vis
+0001c0a0: 5f70 6172 616d 732e 6b65 7973 2829 290d  _params.keys()).
+0001c0b0: 0a0d 0a20 2020 2020 2020 2069 6620 226d  ...        if "m
+0001c0c0: 696e 2220 696e 2076 6973 5f70 6172 616d  in" in vis_param
+0001c0d0: 733a 0d0a 2020 2020 2020 2020 2020 2020  s:..            
+0001c0e0: 766d 696e 203d 2076 6973 5f70 6172 616d  vmin = vis_param
+0001c0f0: 735b 226d 696e 225d 0d0a 2020 2020 2020  s["min"]..      
+0001c100: 2020 2020 2020 6966 2074 7970 6528 766d        if type(vm
+0001c110: 696e 2920 6e6f 7420 696e 2028 696e 742c  in) not in (int,
+0001c120: 2066 6c6f 6174 293a 0d0a 2020 2020 2020   float):..      
+0001c130: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+0001c140: 5661 6c75 6545 7272 6f72 2822 5468 6520  ValueError("The 
+0001c150: 7072 6f76 6964 6564 206d 696e 2076 616c  provided min val
+0001c160: 7565 206d 7573 7420 6265 2073 6361 6c61  ue must be scala
+0001c170: 7220 7479 7065 2e22 290d 0a20 2020 2020  r type.")..     
+0001c180: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
+0001c190: 2020 2020 2020 766d 696e 203d 2030 0d0a        vmin = 0..
+0001c1a0: 0d0a 2020 2020 2020 2020 6966 2022 6d61  ..        if "ma
+0001c1b0: 7822 2069 6e20 7669 735f 7061 7261 6d73  x" in vis_params
+0001c1c0: 3a0d 0a20 2020 2020 2020 2020 2020 2076  :..            v
+0001c1d0: 6d61 7820 3d20 7669 735f 7061 7261 6d73  max = vis_params
+0001c1e0: 5b22 6d61 7822 5d0d 0a20 2020 2020 2020  ["max"]..       
+0001c1f0: 2020 2020 2069 6620 7479 7065 2876 6d61       if type(vma
+0001c200: 7829 206e 6f74 2069 6e20 2869 6e74 2c20  x) not in (int, 
+0001c210: 666c 6f61 7429 3a0d 0a20 2020 2020 2020  float):..       
+0001c220: 2020 2020 2020 2020 2072 6169 7365 2056           raise V
+0001c230: 616c 7565 4572 726f 7228 2254 6865 2070  alueError("The p
+0001c240: 726f 7669 6465 6420 6d61 7820 7661 6c75  rovided max valu
+0001c250: 6520 6d75 7374 2062 6520 7363 616c 6172  e must be scalar
+0001c260: 2074 7970 652e 2229 0d0a 2020 2020 2020   type.")..      
+0001c270: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
+0001c280: 2020 2020 2076 6d61 7820 3d20 310d 0a0d       vmax = 1...
+0001c290: 0a20 2020 2020 2020 2069 6620 226f 7061  .        if "opa
+0001c2a0: 6369 7479 2220 696e 2076 6973 5f70 6172  city" in vis_par
+0001c2b0: 616d 733a 0d0a 2020 2020 2020 2020 2020  ams:..          
+0001c2c0: 2020 616c 7068 6120 3d20 7669 735f 7061    alpha = vis_pa
+0001c2d0: 7261 6d73 5b22 6f70 6163 6974 7922 5d0d  rams["opacity"].
+0001c2e0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0001c2f0: 7479 7065 2861 6c70 6861 2920 6e6f 7420  type(alpha) not 
+0001c300: 696e 2028 696e 742c 2066 6c6f 6174 293a  in (int, float):
+0001c310: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001c320: 2020 7261 6973 6520 5661 6c75 6545 7272    raise ValueErr
+0001c330: 6f72 2822 5468 6520 7072 6f76 6964 6564  or("The provided
+0001c340: 206f 7061 6369 7479 2076 616c 7565 206d   opacity value m
+0001c350: 7573 7420 6265 2074 7970 6520 7363 616c  ust be type scal
+0001c360: 6172 2e22 290d 0a20 2020 2020 2020 2065  ar.")..        e
+0001c370: 6c69 6620 2261 6c70 6861 2220 696e 206b  lif "alpha" in k
+0001c380: 7761 7267 733a 0d0a 2020 2020 2020 2020  wargs:..        
+0001c390: 2020 2020 616c 7068 6120 3d20 6b77 6172      alpha = kwar
+0001c3a0: 6773 5b22 616c 7068 6122 5d0d 0a20 2020  gs["alpha"]..   
+0001c3b0: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
+0001c3c0: 2020 2020 2020 2020 616c 7068 6120 3d20          alpha = 
+0001c3d0: 310d 0a0d 0a20 2020 2020 2020 2069 6620  1....        if 
+0001c3e0: 636d 6170 2069 7320 6e6f 7420 4e6f 6e65  cmap is not None
+0001c3f0: 3a0d 0a0d 0a20 2020 2020 2020 2020 2020  :....           
+0001c400: 2063 6d61 7020 3d20 6d70 6c2e 7079 706c   cmap = mpl.pypl
+0001c410: 6f74 2e67 6574 5f63 6d61 7028 636d 6170  ot.get_cmap(cmap
+0001c420: 290d 0a20 2020 2020 2020 2020 2020 206e  )..            n
+0001c430: 6f72 6d20 3d20 6d70 6c2e 636f 6c6f 7273  orm = mpl.colors
+0001c440: 2e4e 6f72 6d61 6c69 7a65 2876 6d69 6e3d  .Normalize(vmin=
+0001c450: 766d 696e 2c20 766d 6178 3d76 6d61 7829  vmin, vmax=vmax)
+0001c460: 0d0a 0d0a 2020 2020 2020 2020 6966 2022  ....        if "
+0001c470: 7061 6c65 7474 6522 2069 6e20 7669 735f  palette" in vis_
+0001c480: 6b65 7973 3a0d 0a20 2020 2020 2020 2020  keys:..         
+0001c490: 2020 2068 6578 636f 6465 7320 3d20 746f     hexcodes = to
+0001c4a0: 5f68 6578 5f63 6f6c 6f72 7328 7669 735f  _hex_colors(vis_
+0001c4b0: 7061 7261 6d73 5b22 7061 6c65 7474 6522  params["palette"
+0001c4c0: 5d29 0d0a 2020 2020 2020 2020 2020 2020  ])..            
+0001c4d0: 6966 2064 6973 6372 6574 653a 0d0a 2020  if discrete:..  
+0001c4e0: 2020 2020 2020 2020 2020 2020 2020 636d                cm
+0001c4f0: 6170 203d 206d 706c 2e63 6f6c 6f72 732e  ap = mpl.colors.
+0001c500: 4c69 7374 6564 436f 6c6f 726d 6170 2868  ListedColormap(h
+0001c510: 6578 636f 6465 7329 0d0a 2020 2020 2020  excodes)..      
+0001c520: 2020 2020 2020 2020 2020 7661 6c73 203d            vals =
+0001c530: 206e 702e 6c69 6e73 7061 6365 2876 6d69   np.linspace(vmi
+0001c540: 6e2c 2076 6d61 782c 2063 6d61 702e 4e20  n, vmax, cmap.N 
+0001c550: 2b20 3129 0d0a 2020 2020 2020 2020 2020  + 1)..          
+0001c560: 2020 2020 2020 6e6f 726d 203d 206d 706c        norm = mpl
+0001c570: 2e63 6f6c 6f72 732e 426f 756e 6461 7279  .colors.Boundary
+0001c580: 4e6f 726d 2876 616c 732c 2063 6d61 702e  Norm(vals, cmap.
+0001c590: 4e29 0d0a 0d0a 2020 2020 2020 2020 2020  N)....          
+0001c5a0: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
+0001c5b0: 2020 2020 2020 2020 2063 6d61 7020 3d20           cmap = 
+0001c5c0: 6d70 6c2e 636f 6c6f 7273 2e4c 696e 6561  mpl.colors.Linea
+0001c5d0: 7253 6567 6d65 6e74 6564 436f 6c6f 726d  rSegmentedColorm
+0001c5e0: 6170 2e66 726f 6d5f 6c69 7374 280d 0a20  ap.from_list(.. 
+0001c5f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c600: 2020 2022 6375 7374 6f6d 222c 2068 6578     "custom", hex
+0001c610: 636f 6465 732c 204e 3d32 3536 0d0a 2020  codes, N=256..  
+0001c620: 2020 2020 2020 2020 2020 2020 2020 290d                ).
+0001c630: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001c640: 206e 6f72 6d20 3d20 6d70 6c2e 636f 6c6f   norm = mpl.colo
+0001c650: 7273 2e4e 6f72 6d61 6c69 7a65 2876 6d69  rs.Normalize(vmi
+0001c660: 6e3d 766d 696e 2c20 766d 6178 3d76 6d61  n=vmin, vmax=vma
+0001c670: 7829 0d0a 0d0a 2020 2020 2020 2020 656c  x)....        el
+0001c680: 6966 2063 6d61 7020 6973 206e 6f74 204e  if cmap is not N
+0001c690: 6f6e 653a 0d0a 0d0a 2020 2020 2020 2020  one:....        
+0001c6a0: 2020 2020 636d 6170 203d 206d 706c 2e70      cmap = mpl.p
+0001c6b0: 7970 6c6f 742e 6765 745f 636d 6170 2863  yplot.get_cmap(c
+0001c6c0: 6d61 7029 0d0a 2020 2020 2020 2020 2020  map)..          
+0001c6d0: 2020 6e6f 726d 203d 206d 706c 2e63 6f6c    norm = mpl.col
+0001c6e0: 6f72 732e 4e6f 726d 616c 697a 6528 766d  ors.Normalize(vm
+0001c6f0: 696e 3d76 6d69 6e2c 2076 6d61 783d 766d  in=vmin, vmax=vm
+0001c700: 6178 290d 0a0d 0a20 2020 2020 2020 2065  ax)....        e
+0001c710: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
+0001c720: 2020 7261 6973 6520 5661 6c75 6545 7272    raise ValueErr
+0001c730: 6f72 280d 0a20 2020 2020 2020 2020 2020  or(..           
+0001c740: 2020 2020 2027 636d 6170 206b 6579 776f       'cmap keywo
+0001c750: 7264 206f 7220 2270 616c 6574 7465 2220  rd or "palette" 
+0001c760: 6b65 7920 696e 2076 6973 5f70 6172 616d  key in vis_param
+0001c770: 7320 6d75 7374 2062 6520 7072 6f76 6964  s must be provid
+0001c780: 6564 2e27 0d0a 2020 2020 2020 2020 2020  ed.'..          
+0001c790: 2020 290d 0a0d 0a20 2020 2020 2020 205f    )....        _
+0001c7a0: 2c20 6178 203d 2070 6c74 2e73 7562 706c  , ax = plt.subpl
+0001c7b0: 6f74 7328 6669 6773 697a 653d 2877 6964  ots(figsize=(wid
+0001c7c0: 7468 2c20 6865 6967 6874 2929 0d0a 2020  th, height))..  
+0001c7d0: 2020 2020 2020 6362 203d 206d 706c 2e63        cb = mpl.c
+0001c7e0: 6f6c 6f72 6261 722e 436f 6c6f 7262 6172  olorbar.Colorbar
+0001c7f0: 4261 7365 280d 0a20 2020 2020 2020 2020  Base(..         
+0001c800: 2020 2061 782c 206e 6f72 6d3d 6e6f 726d     ax, norm=norm
+0001c810: 2c20 616c 7068 613d 616c 7068 612c 2063  , alpha=alpha, c
+0001c820: 6d61 703d 636d 6170 2c20 6f72 6965 6e74  map=cmap, orient
+0001c830: 6174 696f 6e3d 6f72 6965 6e74 6174 696f  ation=orientatio
+0001c840: 6e2c 202a 2a6b 7761 7267 730d 0a20 2020  n, **kwargs..   
+0001c850: 2020 2020 2029 0d0a 0d0a 2020 2020 2020       )....      
+0001c860: 2020 6966 2022 6261 6e64 7322 2069 6e20    if "bands" in 
+0001c870: 7669 735f 6b65 7973 3a0d 0a20 2020 2020  vis_keys:..     
+0001c880: 2020 2020 2020 2063 622e 7365 745f 6c61         cb.set_la
+0001c890: 6265 6c28 7669 735f 7061 7261 6d73 5b22  bel(vis_params["
+0001c8a0: 6261 6e64 7322 5d29 0d0a 2020 2020 2020  bands"])..      
+0001c8b0: 2020 656c 6966 206c 6162 656c 2069 7320    elif label is 
+0001c8c0: 6e6f 7420 4e6f 6e65 3a0d 0a20 2020 2020  not None:..     
+0001c8d0: 2020 2020 2020 2063 622e 7365 745f 6c61         cb.set_la
+0001c8e0: 6265 6c28 6c61 6265 6c29 0d0a 0d0a 2020  bel(label)....  
+0001c8f0: 2020 2020 2020 6f75 7470 7574 203d 2077        output = w
+0001c900: 6964 6765 7473 2e4f 7574 7075 7428 290d  idgets.Output().
+0001c910: 0a20 2020 2020 2020 2063 6f6c 6f72 6d61  .        colorma
+0001c920: 705f 6374 726c 203d 2069 7079 6c65 6166  p_ctrl = ipyleaf
+0001c930: 6c65 742e 5769 6467 6574 436f 6e74 726f  let.WidgetContro
+0001c940: 6c28 0d0a 2020 2020 2020 2020 2020 2020  l(..            
+0001c950: 7769 6467 6574 3d6f 7574 7075 742c 0d0a  widget=output,..
+0001c960: 2020 2020 2020 2020 2020 2020 706f 7369              posi
+0001c970: 7469 6f6e 3d70 6f73 6974 696f 6e2c 0d0a  tion=position,..
+0001c980: 2020 2020 2020 2020 2020 2020 7472 616e              tran
+0001c990: 7370 6172 656e 745f 6267 3d74 7261 6e73  sparent_bg=trans
+0001c9a0: 7061 7265 6e74 5f62 672c 0d0a 2020 2020  parent_bg,..    
+0001c9b0: 2020 2020 290d 0a20 2020 2020 2020 2077      )..        w
+0001c9c0: 6974 6820 6f75 7470 7574 3a0d 0a20 2020  ith output:..   
+0001c9d0: 2020 2020 2020 2020 206f 7574 7075 742e           output.
+0001c9e0: 636c 6561 725f 6f75 7470 7574 2829 0d0a  clear_output()..
+0001c9f0: 2020 2020 2020 2020 2020 2020 706c 742e              plt.
+0001ca00: 7368 6f77 2829 0d0a 0d0a 2020 2020 2020  show()....      
+0001ca10: 2020 7365 6c66 2e63 6f6c 6f72 6261 7220    self.colorbar 
+0001ca20: 3d20 636f 6c6f 726d 6170 5f63 7472 6c0d  = colormap_ctrl.
+0001ca30: 0a20 2020 2020 2020 2069 6620 6c61 7965  .        if laye
+0001ca40: 725f 6e61 6d65 2069 6e20 7365 6c66 2e65  r_name in self.e
+0001ca50: 655f 6c61 7965 725f 6e61 6d65 733a 0d0a  e_layer_names:..
+0001ca60: 2020 2020 2020 2020 2020 2020 6966 2022              if "
+0001ca70: 636f 6c6f 7262 6172 2220 696e 2073 656c  colorbar" in sel
+0001ca80: 662e 6565 5f6c 6179 6572 5f64 6963 745b  f.ee_layer_dict[
+0001ca90: 6c61 7965 725f 6e61 6d65 5d3a 0d0a 2020  layer_name]:..  
+0001caa0: 2020 2020 2020 2020 2020 2020 2020 7365                se
+0001cab0: 6c66 2e72 656d 6f76 655f 636f 6e74 726f  lf.remove_contro
+0001cac0: 6c28 7365 6c66 2e65 655f 6c61 7965 725f  l(self.ee_layer_
+0001cad0: 6469 6374 5b6c 6179 6572 5f6e 616d 655d  dict[layer_name]
+0001cae0: 5b22 636f 6c6f 7262 6172 225d 290d 0a20  ["colorbar"]).. 
+0001caf0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0001cb00: 6565 5f6c 6179 6572 5f64 6963 745b 6c61  ee_layer_dict[la
+0001cb10: 7965 725f 6e61 6d65 5d5b 2263 6f6c 6f72  yer_name]["color
+0001cb20: 6261 7222 5d20 3d20 636f 6c6f 726d 6170  bar"] = colormap
+0001cb30: 5f63 7472 6c0d 0a0d 0a20 2020 2020 2020  _ctrl....       
+0001cb40: 2073 656c 662e 6164 645f 636f 6e74 726f   self.add_contro
+0001cb50: 6c28 636f 6c6f 726d 6170 5f63 7472 6c29  l(colormap_ctrl)
+0001cb60: 0d0a 0d0a 2020 2020 6465 6620 6164 645f  ....    def add_
+0001cb70: 636f 6c6f 7262 6172 5f62 7261 6e63 6128  colorbar_branca(
+0001cb80: 0d0a 2020 2020 2020 2020 7365 6c66 2c0d  ..        self,.
+0001cb90: 0a20 2020 2020 2020 2063 6f6c 6f72 732c  .        colors,
+0001cba0: 0d0a 2020 2020 2020 2020 766d 696e 3d30  ..        vmin=0
+0001cbb0: 2c0d 0a20 2020 2020 2020 2076 6d61 783d  ,..        vmax=
+0001cbc0: 312e 302c 0d0a 2020 2020 2020 2020 696e  1.0,..        in
+0001cbd0: 6465 783d 4e6f 6e65 2c0d 0a20 2020 2020  dex=None,..     
+0001cbe0: 2020 2063 6170 7469 6f6e 3d22 222c 0d0a     caption="",..
+0001cbf0: 2020 2020 2020 2020 6361 7465 676f 7269          categori
+0001cc00: 6361 6c3d 4661 6c73 652c 0d0a 2020 2020  cal=False,..    
+0001cc10: 2020 2020 7374 6570 3d4e 6f6e 652c 0d0a      step=None,..
+0001cc20: 2020 2020 2020 2020 6865 6967 6874 3d22          height="
+0001cc30: 3435 7078 222c 0d0a 2020 2020 2020 2020  45px",..        
+0001cc40: 7472 616e 7370 6172 656e 745f 6267 3d46  transparent_bg=F
+0001cc50: 616c 7365 2c0d 0a20 2020 2020 2020 2070  alse,..        p
+0001cc60: 6f73 6974 696f 6e3d 2262 6f74 746f 6d72  osition="bottomr
+0001cc70: 6967 6874 222c 0d0a 2020 2020 2020 2020  ight",..        
+0001cc80: 6c61 7965 725f 6e61 6d65 3d4e 6f6e 652c  layer_name=None,
+0001cc90: 0d0a 2020 2020 2020 2020 2a2a 6b77 6172  ..        **kwar
+0001cca0: 6773 2c0d 0a20 2020 2029 3a0d 0a20 2020  gs,..    ):..   
+0001ccb0: 2020 2020 2022 2222 4164 6420 6120 6272       """Add a br
+0001ccc0: 616e 6361 2063 6f6c 6f72 6261 7220 746f  anca colorbar to
+0001ccd0: 2074 6865 206d 6170 2e0d 0a0d 0a20 2020   the map.....   
+0001cce0: 2020 2020 2041 7267 733a 0d0a 2020 2020       Args:..    
+0001ccf0: 2020 2020 2020 2020 636f 6c6f 7273 2028          colors (
+0001cd00: 6c69 7374 293a 2054 6865 2073 6574 206f  list): The set o
+0001cd10: 6620 636f 6c6f 7273 2074 6f20 6265 2075  f colors to be u
+0001cd20: 7365 6420 666f 7220 696e 7465 7270 6f6c  sed for interpol
+0001cd30: 6174 696f 6e2e 2043 6f6c 6f72 7320 6361  ation. Colors ca
+0001cd40: 6e20 6265 2070 726f 7669 6465 6420 696e  n be provided in
+0001cd50: 2074 6865 2066 6f72 6d3a 202a 2074 7570   the form: * tup
+0001cd60: 6c65 7320 6f66 2052 4742 4120 696e 7473  les of RGBA ints
+0001cd70: 2062 6574 7765 656e 2030 2061 6e64 2032   between 0 and 2
+0001cd80: 3535 2028 652e 673a 2028 3235 352c 2032  55 (e.g: (255, 2
+0001cd90: 3535 2c20 3029 206f 7220 2832 3535 2c20  55, 0) or (255, 
+0001cda0: 3235 352c 2030 2c20 3235 3529 2920 2a20  255, 0, 255)) * 
+0001cdb0: 7475 706c 6573 206f 6620 5247 4241 2066  tuples of RGBA f
+0001cdc0: 6c6f 6174 7320 6265 7477 6565 6e20 302e  loats between 0.
+0001cdd0: 2061 6e64 2031 2e20 2865 2e67 3a20 2831   and 1. (e.g: (1
+0001cde0: 2e2c 312e 2c30 2e29 206f 7220 2831 2e2c  .,1.,0.) or (1.,
+0001cdf0: 2031 2e2c 2030 2e2c 2031 2e29 2920 2a20   1., 0., 1.)) * 
+0001ce00: 4854 4d4c 2d6c 696b 6520 7374 7269 6e67  HTML-like string
+0001ce10: 2028 652e 673a 20e2 809c 2366 6666 6630   (e.g: ...#ffff0
+0001ce20: 3029 202a 2061 2063 6f6c 6f72 206e 616d  0) * a color nam
+0001ce30: 6520 6f72 2073 686f 7274 6375 7420 2865  e or shortcut (e
+0001ce40: 2e67 3a20 e280 9c79 e280 9d20 6f72 20e2  .g: ...y... or .
+0001ce50: 809c 7965 6c6c 6f77 e280 9d29 0d0a 2020  ..yellow...)..  
+0001ce60: 2020 2020 2020 2020 2020 766d 696e 2028            vmin (
+0001ce70: 696e 742c 206f 7074 696f 6e61 6c29 3a20  int, optional): 
+0001ce80: 5468 6520 6d69 6e69 6d61 6c20 7661 6c75  The minimal valu
+0001ce90: 6520 666f 7220 7468 6520 636f 6c6f 726d  e for the colorm
+0001cea0: 6170 2e20 5661 6c75 6573 206c 6f77 6572  ap. Values lower
+0001ceb0: 2074 6861 6e20 766d 696e 2077 696c 6c20   than vmin will 
+0001cec0: 6265 2062 6f75 6e64 2064 6972 6563 746c  be bound directl
+0001ced0: 7920 746f 2063 6f6c 6f72 735b 305d 2e2e  y to colors[0]..
+0001cee0: 2044 6566 6175 6c74 7320 746f 2030 2e0d   Defaults to 0..
+0001cef0: 0a20 2020 2020 2020 2020 2020 2076 6d61  .            vma
+0001cf00: 7820 2866 6c6f 6174 2c20 6f70 7469 6f6e  x (float, option
+0001cf10: 616c 293a 2054 6865 206d 6178 696d 616c  al): The maximal
+0001cf20: 2076 616c 7565 2066 6f72 2074 6865 2063   value for the c
+0001cf30: 6f6c 6f72 6d61 702e 2056 616c 7565 7320  olormap. Values 
+0001cf40: 6869 6768 6572 2074 6861 6e20 766d 6178  higher than vmax
+0001cf50: 2077 696c 6c20 6265 2062 6f75 6e64 2064   will be bound d
+0001cf60: 6972 6563 746c 7920 746f 2063 6f6c 6f72  irectly to color
+0001cf70: 735b 2d31 5d2e 2044 6566 6175 6c74 7320  s[-1]. Defaults 
+0001cf80: 746f 2031 2e30 2e0d 0a20 2020 2020 2020  to 1.0...       
+0001cf90: 2020 2020 2069 6e64 6578 2028 6c69 7374       index (list
+0001cfa0: 2c20 6f70 7469 6f6e 616c 293a 5468 6520  , optional):The 
+0001cfb0: 7661 6c75 6573 2063 6f72 7265 7370 6f6e  values correspon
+0001cfc0: 6469 6e67 2074 6f20 6561 6368 2063 6f6c  ding to each col
+0001cfd0: 6f72 2e20 4974 2068 6173 2074 6f20 6265  or. It has to be
+0001cfe0: 2073 6f72 7465 642c 2061 6e64 2068 6176   sorted, and hav
+0001cff0: 6520 7468 6520 7361 6d65 206c 656e 6774  e the same lengt
+0001d000: 6820 6173 2063 6f6c 6f72 732e 2049 6620  h as colors. If 
+0001d010: 4e6f 6e65 2c20 6120 7265 6775 6c61 7220  None, a regular 
+0001d020: 6772 6964 2062 6574 7765 656e 2076 6d69  grid between vmi
+0001d030: 6e20 616e 6420 766d 6178 2069 7320 6372  n and vmax is cr
+0001d040: 6561 7465 642e 2e20 4465 6661 756c 7473  eated.. Defaults
+0001d050: 2074 6f20 4e6f 6e65 2e0d 0a20 2020 2020   to None...     
+0001d060: 2020 2020 2020 2063 6170 7469 6f6e 2028         caption (
+0001d070: 7374 722c 206f 7074 696f 6e61 6c29 3a20  str, optional): 
+0001d080: 5468 6520 6361 7074 696f 6e20 666f 7220  The caption for 
+0001d090: 7468 6520 636f 6c6f 726d 6170 2e20 4465  the colormap. De
+0001d0a0: 6661 756c 7473 2074 6f20 2222 2e0d 0a20  faults to ""... 
+0001d0b0: 2020 2020 2020 2020 2020 2063 6174 6567             categ
+0001d0c0: 6f72 6963 616c 2028 626f 6f6c 2c20 6f70  orical (bool, op
+0001d0d0: 7469 6f6e 616c 293a 2057 6865 7468 6572  tional): Whether
+0001d0e0: 206f 7220 6e6f 7420 746f 2063 7265 6174   or not to creat
+0001d0f0: 6520 6120 6361 7465 676f 7269 6361 6c20  e a categorical 
+0001d100: 636f 6c6f 726d 6170 2e20 4465 6661 756c  colormap. Defaul
+0001d110: 7473 2074 6f20 4661 6c73 652e 0d0a 2020  ts to False...  
+0001d120: 2020 2020 2020 2020 2020 7374 6570 2028            step (
+0001d130: 696e 742c 206f 7074 696f 6e61 6c29 3a20  int, optional): 
+0001d140: 5468 6520 7374 6570 2074 6f20 7370 6c69  The step to spli
+0001d150: 7420 7468 6520 4c69 6e65 6172 436f 6c6f  t the LinearColo
+0001d160: 726d 6170 2069 6e74 6f20 6120 5374 6570  rmap into a Step
+0001d170: 436f 6c6f 726d 6170 2e20 4465 6661 756c  Colormap. Defaul
+0001d180: 7473 2074 6f20 4e6f 6e65 2e0d 0a20 2020  ts to None...   
+0001d190: 2020 2020 2020 2020 2068 6569 6768 7420           height 
+0001d1a0: 2873 7472 2c20 6f70 7469 6f6e 616c 293a  (str, optional):
+0001d1b0: 2054 6865 2068 6569 6768 7420 6f66 2074   The height of t
+0001d1c0: 6865 2063 6f6c 6f72 6d61 7020 7769 6467  he colormap widg
+0001d1d0: 6574 2e20 4465 6661 756c 7473 2074 6f20  et. Defaults to 
+0001d1e0: 2234 3570 7822 2e0d 0a20 2020 2020 2020  "45px"...       
+0001d1f0: 2020 2020 2074 7261 6e73 7061 7265 6e74       transparent
+0001d200: 5f62 6720 2862 6f6f 6c2c 206f 7074 696f  _bg (bool, optio
+0001d210: 6e61 6c29 3a20 5768 6574 6865 7220 746f  nal): Whether to
+0001d220: 2075 7365 2074 7261 6e73 7061 7265 6e74   use transparent
+0001d230: 2062 6163 6b67 726f 756e 6420 666f 7220   background for 
+0001d240: 7468 6520 636f 6c6f 726d 6170 2077 6964  the colormap wid
+0001d250: 6765 742e 2044 6566 6175 6c74 7320 746f  get. Defaults to
+0001d260: 2054 7275 652e 0d0a 2020 2020 2020 2020   True...        
+0001d270: 2020 2020 706f 7369 7469 6f6e 2028 7374      position (st
+0001d280: 722c 206f 7074 696f 6e61 6c29 3a20 5468  r, optional): Th
+0001d290: 6520 706f 7369 7469 6f6e 2066 6f72 2074  e position for t
+0001d2a0: 6865 2063 6f6c 6f72 6d61 7020 7769 6467  he colormap widg
+0001d2b0: 6574 2e20 4465 6661 756c 7473 2074 6f20  et. Defaults to 
+0001d2c0: 2262 6f74 746f 6d72 6967 6874 222e 0d0a  "bottomright"...
+0001d2d0: 2020 2020 2020 2020 2020 2020 6c61 7965              laye
+0001d2e0: 725f 6e61 6d65 2028 7374 722c 206f 7074  r_name (str, opt
+0001d2f0: 696f 6e61 6c29 3a20 4c61 7965 7220 6e61  ional): Layer na
+0001d300: 6d65 206f 6620 7468 6520 636f 6c6f 7262  me of the colorb
+0001d310: 6172 2074 6f20 6265 2061 7373 6f63 6961  ar to be associa
+0001d320: 7465 6420 7769 7468 2e20 4465 6661 756c  ted with. Defaul
+0001d330: 7473 2074 6f20 4e6f 6e65 2e0d 0a0d 0a20  ts to None..... 
+0001d340: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
+0001d350: 2020 2020 6672 6f6d 2062 6f78 2069 6d70      from box imp
+0001d360: 6f72 7420 426f 780d 0a20 2020 2020 2020  ort Box..       
+0001d370: 2066 726f 6d20 6272 616e 6361 2e63 6f6c   from branca.col
+0001d380: 6f72 6d61 7020 696d 706f 7274 204c 696e  ormap import Lin
+0001d390: 6561 7243 6f6c 6f72 6d61 700d 0a0d 0a20  earColormap.... 
+0001d3a0: 2020 2020 2020 206f 7574 7075 7420 3d20         output = 
+0001d3b0: 7769 6467 6574 732e 4f75 7470 7574 2829  widgets.Output()
+0001d3c0: 0d0a 2020 2020 2020 2020 6f75 7470 7574  ..        output
+0001d3d0: 2e6c 6179 6f75 742e 6865 6967 6874 203d  .layout.height =
+0001d3e0: 2068 6569 6768 740d 0a0d 0a20 2020 2020   height....     
+0001d3f0: 2020 2069 6620 2277 6964 7468 2220 696e     if "width" in
+0001d400: 206b 7761 7267 732e 6b65 7973 2829 3a0d   kwargs.keys():.
+0001d410: 0a20 2020 2020 2020 2020 2020 206f 7574  .            out
+0001d420: 7075 742e 6c61 796f 7574 2e77 6964 7468  put.layout.width
+0001d430: 203d 206b 7761 7267 735b 2277 6964 7468   = kwargs["width
+0001d440: 225d 0d0a 0d0a 2020 2020 2020 2020 6966  "]....        if
+0001d450: 2069 7369 6e73 7461 6e63 6528 636f 6c6f   isinstance(colo
+0001d460: 7273 2c20 426f 7829 3a0d 0a20 2020 2020  rs, Box):..     
+0001d470: 2020 2020 2020 2074 7279 3a0d 0a20 2020         try:..   
+0001d480: 2020 2020 2020 2020 2020 2020 2063 6f6c               col
+0001d490: 6f72 7320 3d20 6c69 7374 2863 6f6c 6f72  ors = list(color
+0001d4a0: 735b 2264 6566 6175 6c74 225d 290d 0a20  s["default"]).. 
+0001d4b0: 2020 2020 2020 2020 2020 2065 7863 6570             excep
+0001d4c0: 7420 4578 6365 7074 696f 6e20 6173 2065  t Exception as e
+0001d4d0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0001d4e0: 2020 2070 7269 6e74 2822 5468 6520 7072     print("The pr
+0001d4f0: 6f76 6964 6564 2063 6f6c 6f72 206c 6973  ovided color lis
+0001d500: 7420 6973 2069 6e76 616c 6964 2e22 290d  t is invalid.").
+0001d510: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001d520: 2072 6169 7365 2045 7863 6570 7469 6f6e   raise Exception
+0001d530: 2865 290d 0a0d 0a20 2020 2020 2020 2069  (e)....        i
+0001d540: 6620 616c 6c28 6c65 6e28 636f 6c6f 7229  f all(len(color)
+0001d550: 203d 3d20 3620 666f 7220 636f 6c6f 7220   == 6 for color 
+0001d560: 696e 2063 6f6c 6f72 7329 3a0d 0a20 2020  in colors):..   
+0001d570: 2020 2020 2020 2020 2063 6f6c 6f72 7320           colors 
+0001d580: 3d20 5b22 2322 202b 2063 6f6c 6f72 2066  = ["#" + color f
+0001d590: 6f72 2063 6f6c 6f72 2069 6e20 636f 6c6f  or color in colo
+0001d5a0: 7273 5d0d 0a0d 0a20 2020 2020 2020 2063  rs]....        c
+0001d5b0: 6f6c 6f72 6d61 7020 3d20 4c69 6e65 6172  olormap = Linear
+0001d5c0: 436f 6c6f 726d 6170 280d 0a20 2020 2020  Colormap(..     
+0001d5d0: 2020 2020 2020 2063 6f6c 6f72 733d 636f         colors=co
+0001d5e0: 6c6f 7273 2c20 696e 6465 783d 696e 6465  lors, index=inde
+0001d5f0: 782c 2076 6d69 6e3d 766d 696e 2c20 766d  x, vmin=vmin, vm
+0001d600: 6178 3d76 6d61 782c 2063 6170 7469 6f6e  ax=vmax, caption
+0001d610: 3d63 6170 7469 6f6e 0d0a 2020 2020 2020  =caption..      
+0001d620: 2020 290d 0a0d 0a20 2020 2020 2020 2069    )....        i
+0001d630: 6620 6361 7465 676f 7269 6361 6c3a 0d0a  f categorical:..
+0001d640: 2020 2020 2020 2020 2020 2020 6966 2073              if s
+0001d650: 7465 7020 6973 206e 6f74 204e 6f6e 653a  tep is not None:
+0001d660: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001d670: 2020 636f 6c6f 726d 6170 203d 2063 6f6c    colormap = col
+0001d680: 6f72 6d61 702e 746f 5f73 7465 7028 7374  ormap.to_step(st
+0001d690: 6570 290d 0a20 2020 2020 2020 2020 2020  ep)..           
+0001d6a0: 2065 6c69 6620 696e 6465 7820 6973 206e   elif index is n
+0001d6b0: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
+0001d6c0: 2020 2020 2020 2020 2020 636f 6c6f 726d            colorm
+0001d6d0: 6170 203d 2063 6f6c 6f72 6d61 702e 746f  ap = colormap.to
+0001d6e0: 5f73 7465 7028 6c65 6e28 696e 6465 7829  _step(len(index)
+0001d6f0: 202d 2031 290d 0a20 2020 2020 2020 2020   - 1)..         
+0001d700: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
+0001d710: 2020 2020 2020 2020 2020 636f 6c6f 726d            colorm
+0001d720: 6170 203d 2063 6f6c 6f72 6d61 702e 746f  ap = colormap.to
+0001d730: 5f73 7465 7028 3329 0d0a 0d0a 2020 2020  _step(3)....    
+0001d740: 2020 2020 636f 6c6f 726d 6170 5f63 7472      colormap_ctr
+0001d750: 6c20 3d20 6970 796c 6561 666c 6574 2e57  l = ipyleaflet.W
+0001d760: 6964 6765 7443 6f6e 7472 6f6c 280d 0a20  idgetControl(.. 
+0001d770: 2020 2020 2020 2020 2020 2077 6964 6765             widge
+0001d780: 743d 6f75 7470 7574 2c0d 0a20 2020 2020  t=output,..     
+0001d790: 2020 2020 2020 2070 6f73 6974 696f 6e3d         position=
+0001d7a0: 706f 7369 7469 6f6e 2c0d 0a20 2020 2020  position,..     
+0001d7b0: 2020 2020 2020 2074 7261 6e73 7061 7265         transpare
+0001d7c0: 6e74 5f62 673d 7472 616e 7370 6172 656e  nt_bg=transparen
+0001d7d0: 745f 6267 2c0d 0a20 2020 2020 2020 2020  t_bg,..         
+0001d7e0: 2020 202a 2a6b 7761 7267 732c 0d0a 2020     **kwargs,..  
+0001d7f0: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
+0001d800: 2077 6974 6820 6f75 7470 7574 3a0d 0a20   with output:.. 
+0001d810: 2020 2020 2020 2020 2020 206f 7574 7075             outpu
+0001d820: 742e 636c 6561 725f 6f75 7470 7574 2829  t.clear_output()
+0001d830: 0d0a 2020 2020 2020 2020 2020 2020 6469  ..            di
+0001d840: 7370 6c61 7928 636f 6c6f 726d 6170 290d  splay(colormap).
+0001d850: 0a0d 0a20 2020 2020 2020 2073 656c 662e  ...        self.
+0001d860: 636f 6c6f 7262 6172 203d 2063 6f6c 6f72  colorbar = color
+0001d870: 6d61 705f 6374 726c 0d0a 2020 2020 2020  map_ctrl..      
+0001d880: 2020 7365 6c66 2e61 6464 5f63 6f6e 7472    self.add_contr
+0001d890: 6f6c 2863 6f6c 6f72 6d61 705f 6374 726c  ol(colormap_ctrl
+0001d8a0: 290d 0a0d 0a20 2020 2020 2020 2069 6620  )....        if 
+0001d8b0: 6c61 7965 725f 6e61 6d65 2069 6e20 7365  layer_name in se
+0001d8c0: 6c66 2e65 655f 6c61 7965 725f 6e61 6d65  lf.ee_layer_name
+0001d8d0: 733a 0d0a 2020 2020 2020 2020 2020 2020  s:..            
+0001d8e0: 7365 6c66 2e65 655f 6c61 7965 725f 6469  self.ee_layer_di
+0001d8f0: 6374 5b6c 6179 6572 5f6e 616d 655d 5b22  ct[layer_name]["
+0001d900: 636f 6c6f 7262 6172 225d 203d 2063 6f6c  colorbar"] = col
+0001d910: 6f72 6d61 705f 6374 726c 0d0a 0d0a 2020  ormap_ctrl....  
+0001d920: 2020 6465 6620 7265 6d6f 7665 5f63 6f6c    def remove_col
+0001d930: 6f72 6261 7228 7365 6c66 293a 0d0a 2020  orbar(self):..  
+0001d940: 2020 2020 2020 2222 2252 656d 6f76 6520        """Remove 
+0001d950: 636f 6c6f 7262 6172 2066 726f 6d20 7468  colorbar from th
+0001d960: 6520 6d61 702e 2222 220d 0a20 2020 2020  e map."""..     
+0001d970: 2020 2069 6620 7365 6c66 2e63 6f6c 6f72     if self.color
+0001d980: 6261 7220 6973 206e 6f74 204e 6f6e 653a  bar is not None:
+0001d990: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
+0001d9a0: 6c66 2e72 656d 6f76 655f 636f 6e74 726f  lf.remove_contro
+0001d9b0: 6c28 7365 6c66 2e63 6f6c 6f72 6261 7229  l(self.colorbar)
+0001d9c0: 0d0a 0d0a 2020 2020 6465 6620 696d 6167  ....    def imag
+0001d9d0: 655f 6f76 6572 6c61 7928 7365 6c66 2c20  e_overlay(self, 
+0001d9e0: 7572 6c2c 2062 6f75 6e64 732c 206e 616d  url, bounds, nam
+0001d9f0: 6529 3a0d 0a20 2020 2020 2020 2022 2222  e):..        """
+0001da00: 4f76 6572 6c61 7973 2061 6e20 696d 6167  Overlays an imag
+0001da10: 6520 6672 6f6d 2074 6865 2049 6e74 6572  e from the Inter
+0001da20: 6e65 7420 6f72 206c 6f63 616c 6c79 206f  net or locally o
+0001da30: 6e20 7468 6520 6d61 702e 0d0a 0d0a 2020  n the map.....  
+0001da40: 2020 2020 2020 4172 6773 3a0d 0a20 2020        Args:..   
+0001da50: 2020 2020 2020 2020 2075 726c 2028 7374           url (st
+0001da60: 7229 3a20 6874 7470 2055 524c 206f 7220  r): http URL or 
+0001da70: 6c6f 6361 6c20 6669 6c65 2070 6174 6820  local file path 
+0001da80: 746f 2074 6865 2069 6d61 6765 2e0d 0a20  to the image... 
+0001da90: 2020 2020 2020 2020 2020 2062 6f75 6e64             bound
+0001daa0: 7320 2874 7570 6c65 293a 2062 6f75 6e64  s (tuple): bound
+0001dab0: 696e 6720 626f 7820 6f66 2074 6865 2069  ing box of the i
+0001dac0: 6d61 6765 2069 6e20 7468 6520 666f 726d  mage in the form
+0001dad0: 6174 206f 6620 286c 6f77 6572 5f6c 6566  at of (lower_lef
+0001dae0: 7428 6c61 742c 206c 6f6e 292c 2075 7070  t(lat, lon), upp
+0001daf0: 6572 5f72 6967 6874 286c 6174 2c20 6c6f  er_right(lat, lo
+0001db00: 6e29 292c 2073 7563 6820 6173 2028 2831  n)), such as ((1
+0001db10: 332c 202d 3133 3029 2c20 2833 322c 202d  3, -130), (32, -
+0001db20: 3130 3029 292e 0d0a 2020 2020 2020 2020  100))...        
+0001db30: 2020 2020 6e61 6d65 2028 7374 7229 3a20      name (str): 
+0001db40: 6e61 6d65 206f 6620 7468 6520 6c61 7965  name of the laye
+0001db50: 7220 746f 2073 686f 7720 6f6e 2074 6865  r to show on the
+0001db60: 206c 6179 6572 2063 6f6e 7472 6f6c 2e0d   layer control..
+0001db70: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
+0001db80: 2020 2020 2020 6672 6f6d 2062 6173 6536        from base6
+0001db90: 3420 696d 706f 7274 2062 3634 656e 636f  4 import b64enco
+0001dba0: 6465 0d0a 2020 2020 2020 2020 6672 6f6d  de..        from
+0001dbb0: 2069 6f20 696d 706f 7274 2042 7974 6573   io import Bytes
+0001dbc0: 494f 0d0a 0d0a 2020 2020 2020 2020 6672  IO....        fr
+0001dbd0: 6f6d 2050 494c 2069 6d70 6f72 7420 496d  om PIL import Im
+0001dbe0: 6167 652c 2049 6d61 6765 5365 7175 656e  age, ImageSequen
+0001dbf0: 6365 0d0a 0d0a 2020 2020 2020 2020 7472  ce....        tr
+0001dc00: 793a 0d0a 2020 2020 2020 2020 2020 2020  y:..            
+0001dc10: 6966 206e 6f74 2075 726c 2e73 7461 7274  if not url.start
+0001dc20: 7377 6974 6828 2268 7474 7022 293a 0d0a  swith("http"):..
+0001dc30: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001dc40: 2020 6966 206e 6f74 206f 732e 7061 7468    if not os.path
+0001dc50: 2e65 7869 7374 7328 7572 6c29 3a0d 0a20  .exists(url):.. 
+0001dc60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001dc70: 2020 2070 7269 6e74 2822 5468 6520 7072     print("The pr
+0001dc80: 6f76 6964 6564 2066 696c 6520 646f 6573  ovided file does
+0001dc90: 206e 6f74 2065 7869 7374 2e22 290d 0a20   not exist.").. 
+0001dca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001dcb0: 2020 2072 6574 7572 6e0d 0a0d 0a20 2020     return....   
+0001dcc0: 2020 2020 2020 2020 2020 2020 2065 7874               ext
+0001dcd0: 203d 206f 732e 7061 7468 2e73 706c 6974   = os.path.split
+0001dce0: 6578 7428 7572 6c29 5b31 5d5b 313a 5d20  ext(url)[1][1:] 
+0001dcf0: 2023 2066 696c 6520 6578 7465 6e73 696f   # file extensio
+0001dd00: 6e0d 0a20 2020 2020 2020 2020 2020 2020  n..             
+0001dd10: 2020 2069 6d61 6765 203d 2049 6d61 6765     image = Image
+0001dd20: 2e6f 7065 6e28 7572 6c29 0d0a 0d0a 2020  .open(url)....  
+0001dd30: 2020 2020 2020 2020 2020 2020 2020 6620                f 
+0001dd40: 3d20 4279 7465 7349 4f28 290d 0a20 2020  = BytesIO()..   
+0001dd50: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0001dd60: 6578 742e 6c6f 7765 7228 2920 3d3d 2022  ext.lower() == "
+0001dd70: 6769 6622 3a0d 0a20 2020 2020 2020 2020  gif":..         
+0001dd80: 2020 2020 2020 2020 2020 2066 7261 6d65             frame
+0001dd90: 7320 3d20 5b5d 0d0a 2020 2020 2020 2020  s = []..        
+0001dda0: 2020 2020 2020 2020 2020 2020 2320 4c6f              # Lo
+0001ddb0: 6f70 206f 7665 7220 6561 6368 2066 7261  op over each fra
+0001ddc0: 6d65 2069 6e20 7468 6520 616e 696d 6174  me in the animat
+0001ddd0: 6564 2069 6d61 6765 0d0a 2020 2020 2020  ed image..      
+0001dde0: 2020 2020 2020 2020 2020 2020 2020 666f                fo
+0001ddf0: 7220 6672 616d 6520 696e 2049 6d61 6765  r frame in Image
+0001de00: 5365 7175 656e 6365 2e49 7465 7261 746f  Sequence.Iterato
+0001de10: 7228 696d 6167 6529 3a0d 0a20 2020 2020  r(image):..     
+0001de20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001de30: 2020 2066 7261 6d65 203d 2066 7261 6d65     frame = frame
+0001de40: 2e63 6f6e 7665 7274 2822 5247 4241 2229  .convert("RGBA")
+0001de50: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001de60: 2020 2020 2020 2020 2020 6220 3d20 4279            b = By
+0001de70: 7465 7349 4f28 290d 0a20 2020 2020 2020  tesIO()..       
 0001de80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001de90: 2020 6672 616d 6573 5b30 5d2e 7361 7665    frames[0].save
-0001dea0: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
-0001deb0: 2020 2020 2020 2020 2020 2066 2c0d 0a20             f,.. 
-0001dec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ded0: 2020 2020 2020 2066 6f72 6d61 743d 2247         format="G
-0001dee0: 4946 222c 0d0a 2020 2020 2020 2020 2020  IF",..          
-0001def0: 2020 2020 2020 2020 2020 2020 2020 7361                sa
-0001df00: 7665 5f61 6c6c 3d54 7275 652c 0d0a 2020  ve_all=True,..  
-0001df10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001df20: 2020 2020 2020 6170 7065 6e64 5f69 6d61        append_ima
-0001df30: 6765 733d 6672 616d 6573 5b31 3a5d 2c0d  ges=frames[1:],.
-0001df40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001df50: 2020 2020 2020 2020 206c 6f6f 703d 302c           loop=0,
-0001df60: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001df70: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
-0001df80: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
-0001df90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001dfa0: 2020 2020 696d 6167 652e 7361 7665 2866      image.save(f
-0001dfb0: 2c20 6578 7429 0d0a 0d0a 2020 2020 2020  , ext)....      
-0001dfc0: 2020 2020 2020 2020 2020 6461 7461 203d            data =
-0001dfd0: 2062 3634 656e 636f 6465 2866 2e67 6574   b64encode(f.get
-0001dfe0: 7661 6c75 6528 2929 0d0a 2020 2020 2020  value())..      
-0001dff0: 2020 2020 2020 2020 2020 6461 7461 203d            data =
-0001e000: 2064 6174 612e 6465 636f 6465 2822 6173   data.decode("as
-0001e010: 6369 6922 290d 0a20 2020 2020 2020 2020  cii")..         
-0001e020: 2020 2020 2020 2075 726c 203d 2022 6461         url = "da
-0001e030: 7461 3a69 6d61 6765 2f7b 7d3b 6261 7365  ta:image/{};base
-0001e040: 3634 2c22 2e66 6f72 6d61 7428 6578 7429  64,".format(ext)
-0001e050: 202b 2064 6174 610d 0a20 2020 2020 2020   + data..       
-0001e060: 2020 2020 2069 6d67 203d 2069 7079 6c65       img = ipyle
-0001e070: 6166 6c65 742e 496d 6167 654f 7665 726c  aflet.ImageOverl
-0001e080: 6179 2875 726c 3d75 726c 2c20 626f 756e  ay(url=url, boun
-0001e090: 6473 3d62 6f75 6e64 732c 206e 616d 653d  ds=bounds, name=
-0001e0a0: 6e61 6d65 290d 0a20 2020 2020 2020 2020  name)..         
-0001e0b0: 2020 2073 656c 662e 6164 645f 6c61 7965     self.add_laye
-0001e0c0: 7228 696d 6729 0d0a 2020 2020 2020 2020  r(img)..        
-0001e0d0: 6578 6365 7074 2045 7863 6570 7469 6f6e  except Exception
-0001e0e0: 2061 7320 653a 0d0a 2020 2020 2020 2020   as e:..        
-0001e0f0: 2020 2020 7072 696e 7428 6529 0d0a 0d0a      print(e)....
-0001e100: 2020 2020 6465 6620 7669 6465 6f5f 6f76      def video_ov
-0001e110: 6572 6c61 7928 7365 6c66 2c20 7572 6c2c  erlay(self, url,
-0001e120: 2062 6f75 6e64 732c 206e 616d 6529 3a0d   bounds, name):.
-0001e130: 0a20 2020 2020 2020 2022 2222 4f76 6572  .        """Over
-0001e140: 6c61 7973 2061 2076 6964 656f 2066 726f  lays a video fro
-0001e150: 6d20 7468 6520 496e 7465 726e 6574 206f  m the Internet o
-0001e160: 6e20 7468 6520 6d61 702e 0d0a 0d0a 2020  n the map.....  
-0001e170: 2020 2020 2020 4172 6773 3a0d 0a20 2020        Args:..   
-0001e180: 2020 2020 2020 2020 2075 726c 2028 7374           url (st
-0001e190: 7229 3a20 6874 7470 2055 524c 206f 6620  r): http URL of 
-0001e1a0: 7468 6520 7669 6465 6f2c 2073 7563 6820  the video, such 
-0001e1b0: 6173 2022 6874 7470 733a 2f2f 7777 772e  as "https://www.
-0001e1c0: 6d61 7062 6f78 2e63 6f6d 2f62 6974 6573  mapbox.com/bites
-0001e1d0: 2f30 3031 3838 2f70 6174 7269 6369 615f  /00188/patricia_
-0001e1e0: 6e61 7361 2e77 6562 6d22 0d0a 2020 2020  nasa.webm"..    
-0001e1f0: 2020 2020 2020 2020 626f 756e 6473 2028          bounds (
-0001e200: 7475 706c 6529 3a20 626f 756e 6469 6e67  tuple): bounding
-0001e210: 2062 6f78 206f 6620 7468 6520 7669 6465   box of the vide
-0001e220: 6f20 696e 2074 6865 2066 6f72 6d61 7420  o in the format 
-0001e230: 6f66 2028 6c6f 7765 725f 6c65 6674 286c  of (lower_left(l
-0001e240: 6174 2c20 6c6f 6e29 2c20 7570 7065 725f  at, lon), upper_
-0001e250: 7269 6768 7428 6c61 742c 206c 6f6e 2929  right(lat, lon))
-0001e260: 2c20 7375 6368 2061 7320 2828 3133 2c20  , such as ((13, 
-0001e270: 2d31 3330 292c 2028 3332 2c20 2d31 3030  -130), (32, -100
-0001e280: 2929 2e0d 0a20 2020 2020 2020 2020 2020  ))...           
-0001e290: 206e 616d 6520 2873 7472 293a 206e 616d   name (str): nam
-0001e2a0: 6520 6f66 2074 6865 206c 6179 6572 2074  e of the layer t
-0001e2b0: 6f20 7368 6f77 206f 6e20 7468 6520 6c61  o show on the la
-0001e2c0: 7965 7220 636f 6e74 726f 6c2e 0d0a 2020  yer control...  
-0001e2d0: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
-0001e2e0: 2020 2074 7279 3a0d 0a20 2020 2020 2020     try:..       
-0001e2f0: 2020 2020 2076 6964 656f 203d 2069 7079       video = ipy
-0001e300: 6c65 6166 6c65 742e 5669 6465 6f4f 7665  leaflet.VideoOve
-0001e310: 726c 6179 2875 726c 3d75 726c 2c20 626f  rlay(url=url, bo
-0001e320: 756e 6473 3d62 6f75 6e64 732c 206e 616d  unds=bounds, nam
-0001e330: 653d 6e61 6d65 290d 0a20 2020 2020 2020  e=name)..       
-0001e340: 2020 2020 2073 656c 662e 6164 645f 6c61       self.add_la
-0001e350: 7965 7228 7669 6465 6f29 0d0a 2020 2020  yer(video)..    
-0001e360: 2020 2020 6578 6365 7074 2045 7863 6570      except Excep
-0001e370: 7469 6f6e 2061 7320 653a 0d0a 2020 2020  tion as e:..    
-0001e380: 2020 2020 2020 2020 7072 696e 7428 6529          print(e)
-0001e390: 0d0a 0d0a 2020 2020 6465 6620 6164 645f  ....    def add_
-0001e3a0: 6c61 6e64 7361 745f 7473 5f67 6966 280d  landsat_ts_gif(.
-0001e3b0: 0a20 2020 2020 2020 2073 656c 662c 0d0a  .        self,..
-0001e3c0: 2020 2020 2020 2020 6c61 7965 725f 6e61          layer_na
-0001e3d0: 6d65 3d22 5469 6d65 6c61 7073 6522 2c0d  me="Timelapse",.
-0001e3e0: 0a20 2020 2020 2020 2072 6f69 3d4e 6f6e  .        roi=Non
-0001e3f0: 652c 0d0a 2020 2020 2020 2020 6c61 6265  e,..        labe
-0001e400: 6c3d 4e6f 6e65 2c0d 0a20 2020 2020 2020  l=None,..       
-0001e410: 2073 7461 7274 5f79 6561 723d 3139 3834   start_year=1984
-0001e420: 2c0d 0a20 2020 2020 2020 2065 6e64 5f79  ,..        end_y
-0001e430: 6561 723d 3230 3139 2c0d 0a20 2020 2020  ear=2019,..     
-0001e440: 2020 2073 7461 7274 5f64 6174 653d 2230     start_date="0
-0001e450: 362d 3130 222c 0d0a 2020 2020 2020 2020  6-10",..        
-0001e460: 656e 645f 6461 7465 3d22 3039 2d32 3022  end_date="09-20"
-0001e470: 2c0d 0a20 2020 2020 2020 2062 616e 6473  ,..        bands
-0001e480: 3d5b 224e 4952 222c 2022 5265 6422 2c20  =["NIR", "Red", 
-0001e490: 2247 7265 656e 225d 2c0d 0a20 2020 2020  "Green"],..     
-0001e4a0: 2020 2076 6973 5f70 6172 616d 733d 4e6f     vis_params=No
-0001e4b0: 6e65 2c0d 0a20 2020 2020 2020 2064 696d  ne,..        dim
-0001e4c0: 656e 7369 6f6e 733d 3736 382c 0d0a 2020  ensions=768,..  
-0001e4d0: 2020 2020 2020 6672 616d 6573 5f70 6572        frames_per
-0001e4e0: 5f73 6563 6f6e 643d 3130 2c0d 0a20 2020  _second=10,..   
-0001e4f0: 2020 2020 2066 6f6e 745f 7369 7a65 3d33       font_size=3
-0001e500: 302c 0d0a 2020 2020 2020 2020 666f 6e74  0,..        font
-0001e510: 5f63 6f6c 6f72 3d22 7768 6974 6522 2c0d  _color="white",.
-0001e520: 0a20 2020 2020 2020 2061 6464 5f70 726f  .        add_pro
-0001e530: 6772 6573 735f 6261 723d 5472 7565 2c0d  gress_bar=True,.
-0001e540: 0a20 2020 2020 2020 2070 726f 6772 6573  .        progres
-0001e550: 735f 6261 725f 636f 6c6f 723d 2277 6869  s_bar_color="whi
-0001e560: 7465 222c 0d0a 2020 2020 2020 2020 7072  te",..        pr
-0001e570: 6f67 7265 7373 5f62 6172 5f68 6569 6768  ogress_bar_heigh
-0001e580: 743d 352c 0d0a 2020 2020 2020 2020 6f75  t=5,..        ou
-0001e590: 745f 6769 663d 4e6f 6e65 2c0d 0a20 2020  t_gif=None,..   
-0001e5a0: 2020 2020 2064 6f77 6e6c 6f61 643d 4661       download=Fa
-0001e5b0: 6c73 652c 0d0a 2020 2020 2020 2020 6170  lse,..        ap
-0001e5c0: 706c 795f 666d 6173 6b3d 5472 7565 2c0d  ply_fmask=True,.
-0001e5d0: 0a20 2020 2020 2020 206e 645f 6261 6e64  .        nd_band
-0001e5e0: 733d 4e6f 6e65 2c0d 0a20 2020 2020 2020  s=None,..       
-0001e5f0: 206e 645f 7468 7265 7368 6f6c 643d 302c   nd_threshold=0,
-0001e600: 0d0a 2020 2020 2020 2020 6e64 5f70 616c  ..        nd_pal
-0001e610: 6574 7465 3d5b 2262 6c61 636b 222c 2022  ette=["black", "
-0001e620: 626c 7565 225d 2c0d 0a20 2020 2029 3a0d  blue"],..    ):.
-0001e630: 0a20 2020 2020 2020 2022 2222 4164 6473  .        """Adds
-0001e640: 2061 204c 616e 6473 6174 2074 696d 656c   a Landsat timel
-0001e650: 6170 7365 2074 6f20 7468 6520 6d61 702e  apse to the map.
-0001e660: 0d0a 0d0a 2020 2020 2020 2020 4172 6773  ....        Args
-0001e670: 3a0d 0a20 2020 2020 2020 2020 2020 206c  :..            l
-0001e680: 6179 6572 5f6e 616d 6520 2873 7472 2c20  ayer_name (str, 
-0001e690: 6f70 7469 6f6e 616c 293a 204c 6179 6572  optional): Layer
-0001e6a0: 206e 616d 6520 746f 2073 686f 7720 756e   name to show un
-0001e6b0: 6465 7220 7468 6520 6c61 7965 7220 636f  der the layer co
-0001e6c0: 6e74 726f 6c2e 2044 6566 6175 6c74 7320  ntrol. Defaults 
-0001e6d0: 746f 2027 5469 6d65 6c61 7073 6527 2e0d  to 'Timelapse'..
-0001e6e0: 0a20 2020 2020 2020 2020 2020 2072 6f69  .            roi
-0001e6f0: 2028 6f62 6a65 6374 2c20 6f70 7469 6f6e   (object, option
-0001e700: 616c 293a 2052 6567 696f 6e20 6f66 2069  al): Region of i
-0001e710: 6e74 6572 6573 7420 746f 2063 7265 6174  nterest to creat
-0001e720: 6520 7468 6520 7469 6d65 6c61 7073 652e  e the timelapse.
-0001e730: 2044 6566 6175 6c74 7320 746f 204e 6f6e   Defaults to Non
-0001e740: 652e 0d0a 2020 2020 2020 2020 2020 2020  e...            
-0001e750: 6c61 6265 6c20 2873 7472 2c20 6f70 7469  label (str, opti
-0001e760: 6f6e 616c 293a 2041 206c 6162 656c 2074  onal): A label t
-0001e770: 6f20 7368 6f77 6e20 6f6e 2074 6865 2047  o shown on the G
-0001e780: 4946 2c20 7375 6368 2061 7320 706c 6163  IF, such as plac
-0001e790: 6520 6e61 6d65 2e20 4465 6661 756c 7473  e name. Defaults
-0001e7a0: 2074 6f20 4e6f 6e65 2e0d 0a20 2020 2020   to None...     
-0001e7b0: 2020 2020 2020 2073 7461 7274 5f79 6561         start_yea
-0001e7c0: 7220 2869 6e74 2c20 6f70 7469 6f6e 616c  r (int, optional
-0001e7d0: 293a 2053 7461 7274 696e 6720 7965 6172  ): Starting year
-0001e7e0: 2066 6f72 2074 6865 2074 696d 656c 6170   for the timelap
-0001e7f0: 7365 2e20 4465 6661 756c 7473 2074 6f20  se. Defaults to 
-0001e800: 3139 3834 2e0d 0a20 2020 2020 2020 2020  1984...         
-0001e810: 2020 2065 6e64 5f79 6561 7220 2869 6e74     end_year (int
-0001e820: 2c20 6f70 7469 6f6e 616c 293a 2045 6e64  , optional): End
-0001e830: 696e 6720 7965 6172 2066 6f72 2074 6865  ing year for the
-0001e840: 2074 696d 656c 6170 7365 2e20 4465 6661   timelapse. Defa
-0001e850: 756c 7473 2074 6f20 3230 3139 2e0d 0a20  ults to 2019... 
-0001e860: 2020 2020 2020 2020 2020 2073 7461 7274             start
-0001e870: 5f64 6174 6520 2873 7472 2c20 6f70 7469  _date (str, opti
-0001e880: 6f6e 616c 293a 2053 7461 7274 696e 6720  onal): Starting 
-0001e890: 6461 7465 2028 6d6f 6e74 682d 6461 7929  date (month-day)
-0001e8a0: 2065 6163 6820 7965 6172 2066 6f72 2066   each year for f
-0001e8b0: 696c 7465 7269 6e67 2049 6d61 6765 436f  iltering ImageCo
-0001e8c0: 6c6c 6563 7469 6f6e 2e20 4465 6661 756c  llection. Defaul
-0001e8d0: 7473 2074 6f20 2730 362d 3130 272e 0d0a  ts to '06-10'...
-0001e8e0: 2020 2020 2020 2020 2020 2020 656e 645f              end_
-0001e8f0: 6461 7465 2028 7374 722c 206f 7074 696f  date (str, optio
-0001e900: 6e61 6c29 3a20 456e 6469 6e67 2064 6174  nal): Ending dat
-0001e910: 6520 286d 6f6e 7468 2d64 6179 2920 6561  e (month-day) ea
-0001e920: 6368 2079 6561 7220 666f 7220 6669 6c74  ch year for filt
-0001e930: 6572 696e 6720 496d 6167 6543 6f6c 6c65  ering ImageColle
-0001e940: 6374 696f 6e2e 2044 6566 6175 6c74 7320  ction. Defaults 
-0001e950: 746f 2027 3039 2d32 3027 2e0d 0a20 2020  to '09-20'...   
-0001e960: 2020 2020 2020 2020 2062 616e 6473 2028           bands (
-0001e970: 6c69 7374 2c20 6f70 7469 6f6e 616c 293a  list, optional):
-0001e980: 2054 6872 6565 2062 616e 6473 2073 656c   Three bands sel
-0001e990: 6563 7465 6420 6672 6f6d 205b 2742 6c75  ected from ['Blu
-0001e9a0: 6527 2c20 2747 7265 656e 272c 2027 5265  e', 'Green', 'Re
-0001e9b0: 6427 2c20 274e 4952 272c 2027 5357 4952  d', 'NIR', 'SWIR
-0001e9c0: 3127 2c20 2753 5749 5232 272c 2027 7069  1', 'SWIR2', 'pi
-0001e9d0: 7865 6c5f 7161 275d 2e20 4465 6661 756c  xel_qa']. Defaul
-0001e9e0: 7473 2074 6f20 5b27 4e49 5227 2c20 2752  ts to ['NIR', 'R
-0001e9f0: 6564 272c 2027 4772 6565 6e27 5d2e 0d0a  ed', 'Green']...
-0001ea00: 2020 2020 2020 2020 2020 2020 7669 735f              vis_
-0001ea10: 7061 7261 6d73 2028 6469 6374 2c20 6f70  params (dict, op
-0001ea20: 7469 6f6e 616c 293a 2056 6973 7561 6c69  tional): Visuali
-0001ea30: 7a61 7469 6f6e 2070 6172 616d 6574 6572  zation parameter
-0001ea40: 732e 2044 6566 6175 6c74 7320 746f 204e  s. Defaults to N
-0001ea50: 6f6e 652e 0d0a 2020 2020 2020 2020 2020  one...          
-0001ea60: 2020 6469 6d65 6e73 696f 6e73 2028 696e    dimensions (in
-0001ea70: 742c 206f 7074 696f 6e61 6c29 3a20 6120  t, optional): a 
-0001ea80: 6e75 6d62 6572 206f 7220 7061 6972 206f  number or pair o
-0001ea90: 6620 6e75 6d62 6572 7320 696e 2066 6f72  f numbers in for
-0001eaa0: 6d61 7420 5749 4454 4878 4845 4947 4854  mat WIDTHxHEIGHT
-0001eab0: 2920 4d61 7869 6d75 6d20 6469 6d65 6e73  ) Maximum dimens
-0001eac0: 696f 6e73 206f 6620 7468 6520 7468 756d  ions of the thum
-0001ead0: 626e 6169 6c20 746f 2072 656e 6465 722c  bnail to render,
-0001eae0: 2069 6e20 7069 7865 6c73 2e20 4966 206f   in pixels. If o
-0001eaf0: 6e6c 7920 6f6e 6520 6e75 6d62 6572 2069  nly one number i
-0001eb00: 7320 7061 7373 6564 2c20 6974 2069 7320  s passed, it is 
-0001eb10: 7573 6564 2061 7320 7468 6520 6d61 7869  used as the maxi
-0001eb20: 6d75 6d2c 2061 6e64 2074 6865 206f 7468  mum, and the oth
-0001eb30: 6572 2064 696d 656e 7369 6f6e 2069 7320  er dimension is 
-0001eb40: 636f 6d70 7574 6564 2062 7920 7072 6f70  computed by prop
-0001eb50: 6f72 7469 6f6e 616c 2073 6361 6c69 6e67  ortional scaling
-0001eb60: 2e20 4465 6661 756c 7473 2074 6f20 3736  . Defaults to 76
-0001eb70: 382e 0d0a 2020 2020 2020 2020 2020 2020  8...            
-0001eb80: 6672 616d 6573 5f70 6572 5f73 6563 6f6e  frames_per_secon
-0001eb90: 6420 2869 6e74 2c20 6f70 7469 6f6e 616c  d (int, optional
-0001eba0: 293a 2041 6e69 6d61 7469 6f6e 2073 7065  ): Animation spe
-0001ebb0: 6564 2e20 4465 6661 756c 7473 2074 6f20  ed. Defaults to 
-0001ebc0: 3130 2e0d 0a20 2020 2020 2020 2020 2020  10...           
-0001ebd0: 2066 6f6e 745f 7369 7a65 2028 696e 742c   font_size (int,
-0001ebe0: 206f 7074 696f 6e61 6c29 3a20 466f 6e74   optional): Font
-0001ebf0: 2073 697a 6520 6f66 2074 6865 2061 6e69   size of the ani
-0001ec00: 6d61 7465 6420 7465 7874 2061 6e64 206c  mated text and l
-0001ec10: 6162 656c 2e20 4465 6661 756c 7473 2074  abel. Defaults t
-0001ec20: 6f20 3330 2e0d 0a20 2020 2020 2020 2020  o 30...         
-0001ec30: 2020 2066 6f6e 745f 636f 6c6f 7220 2873     font_color (s
-0001ec40: 7472 2c20 6f70 7469 6f6e 616c 293a 2046  tr, optional): F
-0001ec50: 6f6e 7420 636f 6c6f 7220 6f66 2074 6865  ont color of the
-0001ec60: 2061 6e69 6d61 7465 6420 7465 7874 2061   animated text a
-0001ec70: 6e64 206c 6162 656c 2e20 4465 6661 756c  nd label. Defaul
-0001ec80: 7473 2074 6f20 2762 6c61 636b 272e 0d0a  ts to 'black'...
-0001ec90: 2020 2020 2020 2020 2020 2020 6164 645f              add_
-0001eca0: 7072 6f67 7265 7373 5f62 6172 2028 626f  progress_bar (bo
-0001ecb0: 6f6c 2c20 6f70 7469 6f6e 616c 293a 2057  ol, optional): W
-0001ecc0: 6865 7468 6572 2074 6f20 6164 6420 6120  hether to add a 
-0001ecd0: 7072 6f67 7265 7373 2062 6172 2061 7420  progress bar at 
-0001ece0: 7468 6520 626f 7474 6f6d 206f 6620 7468  the bottom of th
-0001ecf0: 6520 4749 462e 2044 6566 6175 6c74 7320  e GIF. Defaults 
-0001ed00: 746f 2054 7275 652e 0d0a 2020 2020 2020  to True...      
-0001ed10: 2020 2020 2020 7072 6f67 7265 7373 5f62        progress_b
-0001ed20: 6172 5f63 6f6c 6f72 2028 7374 722c 206f  ar_color (str, o
-0001ed30: 7074 696f 6e61 6c29 3a20 436f 6c6f 7220  ptional): Color 
-0001ed40: 666f 7220 7468 6520 7072 6f67 7265 7373  for the progress
-0001ed50: 2062 6172 2e20 4465 6661 756c 7473 2074   bar. Defaults t
-0001ed60: 6f20 2777 6869 7465 272e 0d0a 2020 2020  o 'white'...    
-0001ed70: 2020 2020 2020 2020 7072 6f67 7265 7373          progress
-0001ed80: 5f62 6172 5f68 6569 6768 7420 2869 6e74  _bar_height (int
-0001ed90: 2c20 6f70 7469 6f6e 616c 293a 2048 6569  , optional): Hei
-0001eda0: 6768 7420 6f66 2074 6865 2070 726f 6772  ght of the progr
-0001edb0: 6573 7320 6261 722e 2044 6566 6175 6c74  ess bar. Default
-0001edc0: 7320 746f 2035 2e0d 0a20 2020 2020 2020  s to 5...       
-0001edd0: 2020 2020 206f 7574 5f67 6966 2028 7374       out_gif (st
-0001ede0: 722c 206f 7074 696f 6e61 6c29 3a20 4669  r, optional): Fi
-0001edf0: 6c65 2070 6174 6820 746f 2074 6865 206f  le path to the o
-0001ee00: 7574 7075 7420 616e 696d 6174 6564 2047  utput animated G
-0001ee10: 4946 2e20 4465 6661 756c 7473 2074 6f20  IF. Defaults to 
-0001ee20: 4e6f 6e65 2e0d 0a20 2020 2020 2020 2020  None...         
-0001ee30: 2020 2064 6f77 6e6c 6f61 6420 2862 6f6f     download (boo
-0001ee40: 6c2c 206f 7074 696f 6e61 6c29 3a20 5768  l, optional): Wh
-0001ee50: 6574 6865 7220 746f 2064 6f77 6e6c 6f61  ether to downloa
-0001ee60: 6420 7468 6520 6769 662e 2044 6566 6175  d the gif. Defau
-0001ee70: 6c74 7320 746f 2046 616c 7365 2e0d 0a20  lts to False... 
-0001ee80: 2020 2020 2020 2020 2020 2061 7070 6c79             apply
-0001ee90: 5f66 6d61 736b 2028 626f 6f6c 2c20 6f70  _fmask (bool, op
-0001eea0: 7469 6f6e 616c 293a 2057 6865 7468 6572  tional): Whether
-0001eeb0: 2074 6f20 6170 706c 7920 466d 6173 6b20   to apply Fmask 
-0001eec0: 2846 756e 6374 696f 6e20 6f66 206d 6173  (Function of mas
-0001eed0: 6b29 2066 6f72 2061 7574 6f6d 6174 6564  k) for automated
-0001eee0: 2063 6c6f 7564 732c 2063 6c6f 7564 2073   clouds, cloud s
-0001eef0: 6861 646f 7773 2c20 736e 6f77 2c20 616e  hadows, snow, an
-0001ef00: 6420 7761 7465 7220 6d61 736b 696e 672e  d water masking.
-0001ef10: 0d0a 2020 2020 2020 2020 2020 2020 6e64  ..            nd
-0001ef20: 5f62 616e 6473 2028 6c69 7374 2c20 6f70  _bands (list, op
-0001ef30: 7469 6f6e 616c 293a 2041 206c 6973 7420  tional): A list 
-0001ef40: 6f66 206e 616d 6573 2073 7065 6369 6679  of names specify
-0001ef50: 696e 6720 7468 6520 6261 6e64 7320 746f  ing the bands to
-0001ef60: 2075 7365 2c20 652e 672e 2c20 5b27 4772   use, e.g., ['Gr
-0001ef70: 6565 6e27 2c20 2753 5749 5231 275d 2e20  een', 'SWIR1']. 
-0001ef80: 5468 6520 6e6f 726d 616c 697a 6564 2064  The normalized d
-0001ef90: 6966 6665 7265 6e63 6520 6973 2063 6f6d  ifference is com
-0001efa0: 7075 7465 6420 6173 2028 6669 7273 7420  puted as (first 
-0001efb0: e288 9220 7365 636f 6e64 2920 2f20 2866  ... second) / (f
-0001efc0: 6972 7374 202b 2073 6563 6f6e 6429 2e20  irst + second). 
-0001efd0: 4e6f 7465 2074 6861 7420 6e65 6761 7469  Note that negati
-0001efe0: 7665 2069 6e70 7574 2076 616c 7565 7320  ve input values 
-0001eff0: 6172 6520 666f 7263 6564 2074 6f20 3020  are forced to 0 
-0001f000: 736f 2074 6861 7420 7468 6520 7265 7375  so that the resu
-0001f010: 6c74 2069 7320 636f 6e66 696e 6564 2074  lt is confined t
-0001f020: 6f20 7468 6520 7261 6e67 6520 282d 312c  o the range (-1,
-0001f030: 2031 292e 0d0a 2020 2020 2020 2020 2020   1)...          
-0001f040: 2020 6e64 5f74 6872 6573 686f 6c64 2028    nd_threshold (
-0001f050: 666c 6f61 742c 206f 7074 696f 6e61 6c29  float, optional)
-0001f060: 3a20 5468 6520 7468 7265 7368 6f6c 6420  : The threshold 
-0001f070: 666f 7220 6578 7461 6374 696e 6720 7069  for extacting pi
-0001f080: 7865 6c73 2066 726f 6d20 7468 6520 6e6f  xels from the no
-0001f090: 726d 616c 697a 6564 2064 6966 6665 7265  rmalized differe
-0001f0a0: 6e63 6520 6261 6e64 2e0d 0a20 2020 2020  nce band...     
-0001f0b0: 2020 2020 2020 206e 645f 7061 6c65 7474         nd_palett
-0001f0c0: 6520 2873 7472 2c20 6f70 7469 6f6e 616c  e (str, optional
-0001f0d0: 293a 2054 6865 2063 6f6c 6f72 2070 616c  ): The color pal
-0001f0e0: 6574 7465 2074 6f20 7573 6520 666f 7220  ette to use for 
-0001f0f0: 6469 7370 6c61 7969 6e67 2074 6865 206e  displaying the n
-0001f100: 6f72 6d61 6c69 7a65 6420 6469 6666 6572  ormalized differ
-0001f110: 656e 6365 2062 616e 642e 0d0a 0d0a 2020  ence band.....  
-0001f120: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
-0001f130: 2020 2074 7279 3a0d 0a0d 0a20 2020 2020     try:....     
-0001f140: 2020 2020 2020 2069 6620 726f 6920 6973         if roi is
-0001f150: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
-0001f160: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
-0001f170: 6472 6177 5f6c 6173 745f 6665 6174 7572  draw_last_featur
-0001f180: 6520 6973 206e 6f74 204e 6f6e 653a 0d0a  e is not None:..
-0001f190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f1a0: 2020 2020 6665 6174 7572 6520 3d20 7365      feature = se
-0001f1b0: 6c66 2e64 7261 775f 6c61 7374 5f66 6561  lf.draw_last_fea
-0001f1c0: 7475 7265 0d0a 2020 2020 2020 2020 2020  ture..          
-0001f1d0: 2020 2020 2020 2020 2020 726f 6920 3d20            roi = 
-0001f1e0: 6665 6174 7572 652e 6765 6f6d 6574 7279  feature.geometry
-0001f1f0: 2829 0d0a 2020 2020 2020 2020 2020 2020  ()..            
-0001f200: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
-0001f210: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0001f220: 6f69 203d 2065 652e 4765 6f6d 6574 7279  oi = ee.Geometry
-0001f230: 2e50 6f6c 7967 6f6e 280d 0a20 2020 2020  .Polygon(..     
-0001f240: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f250: 2020 205b 0d0a 2020 2020 2020 2020 2020     [..          
-0001f260: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f270: 2020 5b0d 0a20 2020 2020 2020 2020 2020    [..           
+0001de90: 2066 7261 6d65 2e73 6176 6528 622c 2066   frame.save(b, f
+0001dea0: 6f72 6d61 743d 2267 6966 2229 0d0a 2020  ormat="gif")..  
+0001deb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001dec0: 2020 2020 2020 6672 616d 6520 3d20 496d        frame = Im
+0001ded0: 6167 652e 6f70 656e 2862 290d 0a20 2020  age.open(b)..   
+0001dee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001def0: 2020 2020 2066 7261 6d65 732e 6170 7065       frames.appe
+0001df00: 6e64 2866 7261 6d65 290d 0a20 2020 2020  nd(frame)..     
+0001df10: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+0001df20: 7261 6d65 735b 305d 2e73 6176 6528 0d0a  rames[0].save(..
+0001df30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001df40: 2020 2020 2020 2020 662c 0d0a 2020 2020          f,..    
+0001df50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001df60: 2020 2020 666f 726d 6174 3d22 4749 4622      format="GIF"
+0001df70: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+0001df80: 2020 2020 2020 2020 2020 2073 6176 655f             save_
+0001df90: 616c 6c3d 5472 7565 2c0d 0a20 2020 2020  all=True,..     
+0001dfa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001dfb0: 2020 2061 7070 656e 645f 696d 6167 6573     append_images
+0001dfc0: 3d66 7261 6d65 735b 313a 5d2c 0d0a 2020  =frames[1:],..  
+0001dfd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001dfe0: 2020 2020 2020 6c6f 6f70 3d30 2c0d 0a20        loop=0,.. 
+0001dff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e000: 2020 2029 0d0a 2020 2020 2020 2020 2020     )..          
+0001e010: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
+0001e020: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e030: 2069 6d61 6765 2e73 6176 6528 662c 2065   image.save(f, e
+0001e040: 7874 290d 0a0d 0a20 2020 2020 2020 2020  xt)....         
+0001e050: 2020 2020 2020 2064 6174 6120 3d20 6236         data = b6
+0001e060: 3465 6e63 6f64 6528 662e 6765 7476 616c  4encode(f.getval
+0001e070: 7565 2829 290d 0a20 2020 2020 2020 2020  ue())..         
+0001e080: 2020 2020 2020 2064 6174 6120 3d20 6461         data = da
+0001e090: 7461 2e64 6563 6f64 6528 2261 7363 6969  ta.decode("ascii
+0001e0a0: 2229 0d0a 2020 2020 2020 2020 2020 2020  ")..            
+0001e0b0: 2020 2020 7572 6c20 3d20 2264 6174 613a      url = "data:
+0001e0c0: 696d 6167 652f 7b7d 3b62 6173 6536 342c  image/{};base64,
+0001e0d0: 222e 666f 726d 6174 2865 7874 2920 2b20  ".format(ext) + 
+0001e0e0: 6461 7461 0d0a 2020 2020 2020 2020 2020  data..          
+0001e0f0: 2020 696d 6720 3d20 6970 796c 6561 666c    img = ipyleafl
+0001e100: 6574 2e49 6d61 6765 4f76 6572 6c61 7928  et.ImageOverlay(
+0001e110: 7572 6c3d 7572 6c2c 2062 6f75 6e64 733d  url=url, bounds=
+0001e120: 626f 756e 6473 2c20 6e61 6d65 3d6e 616d  bounds, name=nam
+0001e130: 6529 0d0a 2020 2020 2020 2020 2020 2020  e)..            
+0001e140: 7365 6c66 2e61 6464 5f6c 6179 6572 2869  self.add_layer(i
+0001e150: 6d67 290d 0a20 2020 2020 2020 2065 7863  mg)..        exc
+0001e160: 6570 7420 4578 6365 7074 696f 6e20 6173  ept Exception as
+0001e170: 2065 3a0d 0a20 2020 2020 2020 2020 2020   e:..           
+0001e180: 2070 7269 6e74 2865 290d 0a0d 0a20 2020   print(e)....   
+0001e190: 2064 6566 2076 6964 656f 5f6f 7665 726c   def video_overl
+0001e1a0: 6179 2873 656c 662c 2075 726c 2c20 626f  ay(self, url, bo
+0001e1b0: 756e 6473 2c20 6e61 6d65 293a 0d0a 2020  unds, name):..  
+0001e1c0: 2020 2020 2020 2222 224f 7665 726c 6179        """Overlay
+0001e1d0: 7320 6120 7669 6465 6f20 6672 6f6d 2074  s a video from t
+0001e1e0: 6865 2049 6e74 6572 6e65 7420 6f6e 2074  he Internet on t
+0001e1f0: 6865 206d 6170 2e0d 0a0d 0a20 2020 2020  he map.....     
+0001e200: 2020 2041 7267 733a 0d0a 2020 2020 2020     Args:..      
+0001e210: 2020 2020 2020 7572 6c20 2873 7472 293a        url (str):
+0001e220: 2068 7474 7020 5552 4c20 6f66 2074 6865   http URL of the
+0001e230: 2076 6964 656f 2c20 7375 6368 2061 7320   video, such as 
+0001e240: 2268 7474 7073 3a2f 2f77 7777 2e6d 6170  "https://www.map
+0001e250: 626f 782e 636f 6d2f 6269 7465 732f 3030  box.com/bites/00
+0001e260: 3138 382f 7061 7472 6963 6961 5f6e 6173  188/patricia_nas
+0001e270: 612e 7765 626d 220d 0a20 2020 2020 2020  a.webm"..       
+0001e280: 2020 2020 2062 6f75 6e64 7320 2874 7570       bounds (tup
+0001e290: 6c65 293a 2062 6f75 6e64 696e 6720 626f  le): bounding bo
+0001e2a0: 7820 6f66 2074 6865 2076 6964 656f 2069  x of the video i
+0001e2b0: 6e20 7468 6520 666f 726d 6174 206f 6620  n the format of 
+0001e2c0: 286c 6f77 6572 5f6c 6566 7428 6c61 742c  (lower_left(lat,
+0001e2d0: 206c 6f6e 292c 2075 7070 6572 5f72 6967   lon), upper_rig
+0001e2e0: 6874 286c 6174 2c20 6c6f 6e29 292c 2073  ht(lat, lon)), s
+0001e2f0: 7563 6820 6173 2028 2831 332c 202d 3133  uch as ((13, -13
+0001e300: 3029 2c20 2833 322c 202d 3130 3029 292e  0), (32, -100)).
+0001e310: 0d0a 2020 2020 2020 2020 2020 2020 6e61  ..            na
+0001e320: 6d65 2028 7374 7229 3a20 6e61 6d65 206f  me (str): name o
+0001e330: 6620 7468 6520 6c61 7965 7220 746f 2073  f the layer to s
+0001e340: 686f 7720 6f6e 2074 6865 206c 6179 6572  how on the layer
+0001e350: 2063 6f6e 7472 6f6c 2e0d 0a20 2020 2020   control...     
+0001e360: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
+0001e370: 7472 793a 0d0a 2020 2020 2020 2020 2020  try:..          
+0001e380: 2020 7669 6465 6f20 3d20 6970 796c 6561    video = ipylea
+0001e390: 666c 6574 2e56 6964 656f 4f76 6572 6c61  flet.VideoOverla
+0001e3a0: 7928 7572 6c3d 7572 6c2c 2062 6f75 6e64  y(url=url, bound
+0001e3b0: 733d 626f 756e 6473 2c20 6e61 6d65 3d6e  s=bounds, name=n
+0001e3c0: 616d 6529 0d0a 2020 2020 2020 2020 2020  ame)..          
+0001e3d0: 2020 7365 6c66 2e61 6464 5f6c 6179 6572    self.add_layer
+0001e3e0: 2876 6964 656f 290d 0a20 2020 2020 2020  (video)..       
+0001e3f0: 2065 7863 6570 7420 4578 6365 7074 696f   except Exceptio
+0001e400: 6e20 6173 2065 3a0d 0a20 2020 2020 2020  n as e:..       
+0001e410: 2020 2020 2070 7269 6e74 2865 290d 0a0d       print(e)...
+0001e420: 0a20 2020 2064 6566 2061 6464 5f6c 616e  .    def add_lan
+0001e430: 6473 6174 5f74 735f 6769 6628 0d0a 2020  dsat_ts_gif(..  
+0001e440: 2020 2020 2020 7365 6c66 2c0d 0a20 2020        self,..   
+0001e450: 2020 2020 206c 6179 6572 5f6e 616d 653d       layer_name=
+0001e460: 2254 696d 656c 6170 7365 222c 0d0a 2020  "Timelapse",..  
+0001e470: 2020 2020 2020 726f 693d 4e6f 6e65 2c0d        roi=None,.
+0001e480: 0a20 2020 2020 2020 206c 6162 656c 3d4e  .        label=N
+0001e490: 6f6e 652c 0d0a 2020 2020 2020 2020 7374  one,..        st
+0001e4a0: 6172 745f 7965 6172 3d31 3938 342c 0d0a  art_year=1984,..
+0001e4b0: 2020 2020 2020 2020 656e 645f 7965 6172          end_year
+0001e4c0: 3d32 3031 392c 0d0a 2020 2020 2020 2020  =2019,..        
+0001e4d0: 7374 6172 745f 6461 7465 3d22 3036 2d31  start_date="06-1
+0001e4e0: 3022 2c0d 0a20 2020 2020 2020 2065 6e64  0",..        end
+0001e4f0: 5f64 6174 653d 2230 392d 3230 222c 0d0a  _date="09-20",..
+0001e500: 2020 2020 2020 2020 6261 6e64 733d 5b22          bands=["
+0001e510: 4e49 5222 2c20 2252 6564 222c 2022 4772  NIR", "Red", "Gr
+0001e520: 6565 6e22 5d2c 0d0a 2020 2020 2020 2020  een"],..        
+0001e530: 7669 735f 7061 7261 6d73 3d4e 6f6e 652c  vis_params=None,
+0001e540: 0d0a 2020 2020 2020 2020 6469 6d65 6e73  ..        dimens
+0001e550: 696f 6e73 3d37 3638 2c0d 0a20 2020 2020  ions=768,..     
+0001e560: 2020 2066 7261 6d65 735f 7065 725f 7365     frames_per_se
+0001e570: 636f 6e64 3d31 302c 0d0a 2020 2020 2020  cond=10,..      
+0001e580: 2020 666f 6e74 5f73 697a 653d 3330 2c0d    font_size=30,.
+0001e590: 0a20 2020 2020 2020 2066 6f6e 745f 636f  .        font_co
+0001e5a0: 6c6f 723d 2277 6869 7465 222c 0d0a 2020  lor="white",..  
+0001e5b0: 2020 2020 2020 6164 645f 7072 6f67 7265        add_progre
+0001e5c0: 7373 5f62 6172 3d54 7275 652c 0d0a 2020  ss_bar=True,..  
+0001e5d0: 2020 2020 2020 7072 6f67 7265 7373 5f62        progress_b
+0001e5e0: 6172 5f63 6f6c 6f72 3d22 7768 6974 6522  ar_color="white"
+0001e5f0: 2c0d 0a20 2020 2020 2020 2070 726f 6772  ,..        progr
+0001e600: 6573 735f 6261 725f 6865 6967 6874 3d35  ess_bar_height=5
+0001e610: 2c0d 0a20 2020 2020 2020 206f 7574 5f67  ,..        out_g
+0001e620: 6966 3d4e 6f6e 652c 0d0a 2020 2020 2020  if=None,..      
+0001e630: 2020 646f 776e 6c6f 6164 3d46 616c 7365    download=False
+0001e640: 2c0d 0a20 2020 2020 2020 2061 7070 6c79  ,..        apply
+0001e650: 5f66 6d61 736b 3d54 7275 652c 0d0a 2020  _fmask=True,..  
+0001e660: 2020 2020 2020 6e64 5f62 616e 6473 3d4e        nd_bands=N
+0001e670: 6f6e 652c 0d0a 2020 2020 2020 2020 6e64  one,..        nd
+0001e680: 5f74 6872 6573 686f 6c64 3d30 2c0d 0a20  _threshold=0,.. 
+0001e690: 2020 2020 2020 206e 645f 7061 6c65 7474         nd_palett
+0001e6a0: 653d 5b22 626c 6163 6b22 2c20 2262 6c75  e=["black", "blu
+0001e6b0: 6522 5d2c 0d0a 2020 2020 293a 0d0a 2020  e"],..    ):..  
+0001e6c0: 2020 2020 2020 2222 2241 6464 7320 6120        """Adds a 
+0001e6d0: 4c61 6e64 7361 7420 7469 6d65 6c61 7073  Landsat timelaps
+0001e6e0: 6520 746f 2074 6865 206d 6170 2e0d 0a0d  e to the map....
+0001e6f0: 0a20 2020 2020 2020 2041 7267 733a 0d0a  .        Args:..
+0001e700: 2020 2020 2020 2020 2020 2020 6c61 7965              laye
+0001e710: 725f 6e61 6d65 2028 7374 722c 206f 7074  r_name (str, opt
+0001e720: 696f 6e61 6c29 3a20 4c61 7965 7220 6e61  ional): Layer na
+0001e730: 6d65 2074 6f20 7368 6f77 2075 6e64 6572  me to show under
+0001e740: 2074 6865 206c 6179 6572 2063 6f6e 7472   the layer contr
+0001e750: 6f6c 2e20 4465 6661 756c 7473 2074 6f20  ol. Defaults to 
+0001e760: 2754 696d 656c 6170 7365 272e 0d0a 2020  'Timelapse'...  
+0001e770: 2020 2020 2020 2020 2020 726f 6920 286f            roi (o
+0001e780: 626a 6563 742c 206f 7074 696f 6e61 6c29  bject, optional)
+0001e790: 3a20 5265 6769 6f6e 206f 6620 696e 7465  : Region of inte
+0001e7a0: 7265 7374 2074 6f20 6372 6561 7465 2074  rest to create t
+0001e7b0: 6865 2074 696d 656c 6170 7365 2e20 4465  he timelapse. De
+0001e7c0: 6661 756c 7473 2074 6f20 4e6f 6e65 2e0d  faults to None..
+0001e7d0: 0a20 2020 2020 2020 2020 2020 206c 6162  .            lab
+0001e7e0: 656c 2028 7374 722c 206f 7074 696f 6e61  el (str, optiona
+0001e7f0: 6c29 3a20 4120 6c61 6265 6c20 746f 2073  l): A label to s
+0001e800: 686f 7720 6f6e 2074 6865 2047 4946 2c20  how on the GIF, 
+0001e810: 7375 6368 2061 7320 706c 6163 6520 6e61  such as place na
+0001e820: 6d65 2e20 4465 6661 756c 7473 2074 6f20  me. Defaults to 
+0001e830: 4e6f 6e65 2e0d 0a20 2020 2020 2020 2020  None...         
+0001e840: 2020 2073 7461 7274 5f79 6561 7220 2869     start_year (i
+0001e850: 6e74 2c20 6f70 7469 6f6e 616c 293a 2053  nt, optional): S
+0001e860: 7461 7274 696e 6720 7965 6172 2066 6f72  tarting year for
+0001e870: 2074 6865 2074 696d 656c 6170 7365 2e20   the timelapse. 
+0001e880: 4465 6661 756c 7473 2074 6f20 3139 3834  Defaults to 1984
+0001e890: 2e0d 0a20 2020 2020 2020 2020 2020 2065  ...            e
+0001e8a0: 6e64 5f79 6561 7220 2869 6e74 2c20 6f70  nd_year (int, op
+0001e8b0: 7469 6f6e 616c 293a 2045 6e64 696e 6720  tional): Ending 
+0001e8c0: 7965 6172 2066 6f72 2074 6865 2074 696d  year for the tim
+0001e8d0: 656c 6170 7365 2e20 4465 6661 756c 7473  elapse. Defaults
+0001e8e0: 2074 6f20 3230 3139 2e0d 0a20 2020 2020   to 2019...     
+0001e8f0: 2020 2020 2020 2073 7461 7274 5f64 6174         start_dat
+0001e900: 6520 2873 7472 2c20 6f70 7469 6f6e 616c  e (str, optional
+0001e910: 293a 2053 7461 7274 696e 6720 6461 7465  ): Starting date
+0001e920: 2028 6d6f 6e74 682d 6461 7929 2065 6163   (month-day) eac
+0001e930: 6820 7965 6172 2066 6f72 2066 696c 7465  h year for filte
+0001e940: 7269 6e67 2049 6d61 6765 436f 6c6c 6563  ring ImageCollec
+0001e950: 7469 6f6e 2e20 4465 6661 756c 7473 2074  tion. Defaults t
+0001e960: 6f20 2730 362d 3130 272e 0d0a 2020 2020  o '06-10'...    
+0001e970: 2020 2020 2020 2020 656e 645f 6461 7465          end_date
+0001e980: 2028 7374 722c 206f 7074 696f 6e61 6c29   (str, optional)
+0001e990: 3a20 456e 6469 6e67 2064 6174 6520 286d  : Ending date (m
+0001e9a0: 6f6e 7468 2d64 6179 2920 6561 6368 2079  onth-day) each y
+0001e9b0: 6561 7220 666f 7220 6669 6c74 6572 696e  ear for filterin
+0001e9c0: 6720 496d 6167 6543 6f6c 6c65 6374 696f  g ImageCollectio
+0001e9d0: 6e2e 2044 6566 6175 6c74 7320 746f 2027  n. Defaults to '
+0001e9e0: 3039 2d32 3027 2e0d 0a20 2020 2020 2020  09-20'...       
+0001e9f0: 2020 2020 2062 616e 6473 2028 6c69 7374       bands (list
+0001ea00: 2c20 6f70 7469 6f6e 616c 293a 2054 6872  , optional): Thr
+0001ea10: 6565 2062 616e 6473 2073 656c 6563 7465  ee bands selecte
+0001ea20: 6420 6672 6f6d 205b 2742 6c75 6527 2c20  d from ['Blue', 
+0001ea30: 2747 7265 656e 272c 2027 5265 6427 2c20  'Green', 'Red', 
+0001ea40: 274e 4952 272c 2027 5357 4952 3127 2c20  'NIR', 'SWIR1', 
+0001ea50: 2753 5749 5232 272c 2027 7069 7865 6c5f  'SWIR2', 'pixel_
+0001ea60: 7161 275d 2e20 4465 6661 756c 7473 2074  qa']. Defaults t
+0001ea70: 6f20 5b27 4e49 5227 2c20 2752 6564 272c  o ['NIR', 'Red',
+0001ea80: 2027 4772 6565 6e27 5d2e 0d0a 2020 2020   'Green']...    
+0001ea90: 2020 2020 2020 2020 7669 735f 7061 7261          vis_para
+0001eaa0: 6d73 2028 6469 6374 2c20 6f70 7469 6f6e  ms (dict, option
+0001eab0: 616c 293a 2056 6973 7561 6c69 7a61 7469  al): Visualizati
+0001eac0: 6f6e 2070 6172 616d 6574 6572 732e 2044  on parameters. D
+0001ead0: 6566 6175 6c74 7320 746f 204e 6f6e 652e  efaults to None.
+0001eae0: 0d0a 2020 2020 2020 2020 2020 2020 6469  ..            di
+0001eaf0: 6d65 6e73 696f 6e73 2028 696e 742c 206f  mensions (int, o
+0001eb00: 7074 696f 6e61 6c29 3a20 6120 6e75 6d62  ptional): a numb
+0001eb10: 6572 206f 7220 7061 6972 206f 6620 6e75  er or pair of nu
+0001eb20: 6d62 6572 7320 696e 2066 6f72 6d61 7420  mbers in format 
+0001eb30: 5749 4454 4878 4845 4947 4854 2920 4d61  WIDTHxHEIGHT) Ma
+0001eb40: 7869 6d75 6d20 6469 6d65 6e73 696f 6e73  ximum dimensions
+0001eb50: 206f 6620 7468 6520 7468 756d 626e 6169   of the thumbnai
+0001eb60: 6c20 746f 2072 656e 6465 722c 2069 6e20  l to render, in 
+0001eb70: 7069 7865 6c73 2e20 4966 206f 6e6c 7920  pixels. If only 
+0001eb80: 6f6e 6520 6e75 6d62 6572 2069 7320 7061  one number is pa
+0001eb90: 7373 6564 2c20 6974 2069 7320 7573 6564  ssed, it is used
+0001eba0: 2061 7320 7468 6520 6d61 7869 6d75 6d2c   as the maximum,
+0001ebb0: 2061 6e64 2074 6865 206f 7468 6572 2064   and the other d
+0001ebc0: 696d 656e 7369 6f6e 2069 7320 636f 6d70  imension is comp
+0001ebd0: 7574 6564 2062 7920 7072 6f70 6f72 7469  uted by proporti
+0001ebe0: 6f6e 616c 2073 6361 6c69 6e67 2e20 4465  onal scaling. De
+0001ebf0: 6661 756c 7473 2074 6f20 3736 382e 0d0a  faults to 768...
+0001ec00: 2020 2020 2020 2020 2020 2020 6672 616d              fram
+0001ec10: 6573 5f70 6572 5f73 6563 6f6e 6420 2869  es_per_second (i
+0001ec20: 6e74 2c20 6f70 7469 6f6e 616c 293a 2041  nt, optional): A
+0001ec30: 6e69 6d61 7469 6f6e 2073 7065 6564 2e20  nimation speed. 
+0001ec40: 4465 6661 756c 7473 2074 6f20 3130 2e0d  Defaults to 10..
+0001ec50: 0a20 2020 2020 2020 2020 2020 2066 6f6e  .            fon
+0001ec60: 745f 7369 7a65 2028 696e 742c 206f 7074  t_size (int, opt
+0001ec70: 696f 6e61 6c29 3a20 466f 6e74 2073 697a  ional): Font siz
+0001ec80: 6520 6f66 2074 6865 2061 6e69 6d61 7465  e of the animate
+0001ec90: 6420 7465 7874 2061 6e64 206c 6162 656c  d text and label
+0001eca0: 2e20 4465 6661 756c 7473 2074 6f20 3330  . Defaults to 30
+0001ecb0: 2e0d 0a20 2020 2020 2020 2020 2020 2066  ...            f
+0001ecc0: 6f6e 745f 636f 6c6f 7220 2873 7472 2c20  ont_color (str, 
+0001ecd0: 6f70 7469 6f6e 616c 293a 2046 6f6e 7420  optional): Font 
+0001ece0: 636f 6c6f 7220 6f66 2074 6865 2061 6e69  color of the ani
+0001ecf0: 6d61 7465 6420 7465 7874 2061 6e64 206c  mated text and l
+0001ed00: 6162 656c 2e20 4465 6661 756c 7473 2074  abel. Defaults t
+0001ed10: 6f20 2762 6c61 636b 272e 0d0a 2020 2020  o 'black'...    
+0001ed20: 2020 2020 2020 2020 6164 645f 7072 6f67          add_prog
+0001ed30: 7265 7373 5f62 6172 2028 626f 6f6c 2c20  ress_bar (bool, 
+0001ed40: 6f70 7469 6f6e 616c 293a 2057 6865 7468  optional): Wheth
+0001ed50: 6572 2074 6f20 6164 6420 6120 7072 6f67  er to add a prog
+0001ed60: 7265 7373 2062 6172 2061 7420 7468 6520  ress bar at the 
+0001ed70: 626f 7474 6f6d 206f 6620 7468 6520 4749  bottom of the GI
+0001ed80: 462e 2044 6566 6175 6c74 7320 746f 2054  F. Defaults to T
+0001ed90: 7275 652e 0d0a 2020 2020 2020 2020 2020  rue...          
+0001eda0: 2020 7072 6f67 7265 7373 5f62 6172 5f63    progress_bar_c
+0001edb0: 6f6c 6f72 2028 7374 722c 206f 7074 696f  olor (str, optio
+0001edc0: 6e61 6c29 3a20 436f 6c6f 7220 666f 7220  nal): Color for 
+0001edd0: 7468 6520 7072 6f67 7265 7373 2062 6172  the progress bar
+0001ede0: 2e20 4465 6661 756c 7473 2074 6f20 2777  . Defaults to 'w
+0001edf0: 6869 7465 272e 0d0a 2020 2020 2020 2020  hite'...        
+0001ee00: 2020 2020 7072 6f67 7265 7373 5f62 6172      progress_bar
+0001ee10: 5f68 6569 6768 7420 2869 6e74 2c20 6f70  _height (int, op
+0001ee20: 7469 6f6e 616c 293a 2048 6569 6768 7420  tional): Height 
+0001ee30: 6f66 2074 6865 2070 726f 6772 6573 7320  of the progress 
+0001ee40: 6261 722e 2044 6566 6175 6c74 7320 746f  bar. Defaults to
+0001ee50: 2035 2e0d 0a20 2020 2020 2020 2020 2020   5...           
+0001ee60: 206f 7574 5f67 6966 2028 7374 722c 206f   out_gif (str, o
+0001ee70: 7074 696f 6e61 6c29 3a20 4669 6c65 2070  ptional): File p
+0001ee80: 6174 6820 746f 2074 6865 206f 7574 7075  ath to the outpu
+0001ee90: 7420 616e 696d 6174 6564 2047 4946 2e20  t animated GIF. 
+0001eea0: 4465 6661 756c 7473 2074 6f20 4e6f 6e65  Defaults to None
+0001eeb0: 2e0d 0a20 2020 2020 2020 2020 2020 2064  ...            d
+0001eec0: 6f77 6e6c 6f61 6420 2862 6f6f 6c2c 206f  ownload (bool, o
+0001eed0: 7074 696f 6e61 6c29 3a20 5768 6574 6865  ptional): Whethe
+0001eee0: 7220 746f 2064 6f77 6e6c 6f61 6420 7468  r to download th
+0001eef0: 6520 6769 662e 2044 6566 6175 6c74 7320  e gif. Defaults 
+0001ef00: 746f 2046 616c 7365 2e0d 0a20 2020 2020  to False...     
+0001ef10: 2020 2020 2020 2061 7070 6c79 5f66 6d61         apply_fma
+0001ef20: 736b 2028 626f 6f6c 2c20 6f70 7469 6f6e  sk (bool, option
+0001ef30: 616c 293a 2057 6865 7468 6572 2074 6f20  al): Whether to 
+0001ef40: 6170 706c 7920 466d 6173 6b20 2846 756e  apply Fmask (Fun
+0001ef50: 6374 696f 6e20 6f66 206d 6173 6b29 2066  ction of mask) f
+0001ef60: 6f72 2061 7574 6f6d 6174 6564 2063 6c6f  or automated clo
+0001ef70: 7564 732c 2063 6c6f 7564 2073 6861 646f  uds, cloud shado
+0001ef80: 7773 2c20 736e 6f77 2c20 616e 6420 7761  ws, snow, and wa
+0001ef90: 7465 7220 6d61 736b 696e 672e 0d0a 2020  ter masking...  
+0001efa0: 2020 2020 2020 2020 2020 6e64 5f62 616e            nd_ban
+0001efb0: 6473 2028 6c69 7374 2c20 6f70 7469 6f6e  ds (list, option
+0001efc0: 616c 293a 2041 206c 6973 7420 6f66 206e  al): A list of n
+0001efd0: 616d 6573 2073 7065 6369 6679 696e 6720  ames specifying 
+0001efe0: 7468 6520 6261 6e64 7320 746f 2075 7365  the bands to use
+0001eff0: 2c20 652e 672e 2c20 5b27 4772 6565 6e27  , e.g., ['Green'
+0001f000: 2c20 2753 5749 5231 275d 2e20 5468 6520  , 'SWIR1']. The 
+0001f010: 6e6f 726d 616c 697a 6564 2064 6966 6665  normalized diffe
+0001f020: 7265 6e63 6520 6973 2063 6f6d 7075 7465  rence is compute
+0001f030: 6420 6173 2028 6669 7273 7420 e288 9220  d as (first ... 
+0001f040: 7365 636f 6e64 2920 2f20 2866 6972 7374  second) / (first
+0001f050: 202b 2073 6563 6f6e 6429 2e20 4e6f 7465   + second). Note
+0001f060: 2074 6861 7420 6e65 6761 7469 7665 2069   that negative i
+0001f070: 6e70 7574 2076 616c 7565 7320 6172 6520  nput values are 
+0001f080: 666f 7263 6564 2074 6f20 3020 736f 2074  forced to 0 so t
+0001f090: 6861 7420 7468 6520 7265 7375 6c74 2069  hat the result i
+0001f0a0: 7320 636f 6e66 696e 6564 2074 6f20 7468  s confined to th
+0001f0b0: 6520 7261 6e67 6520 282d 312c 2031 292e  e range (-1, 1).
+0001f0c0: 0d0a 2020 2020 2020 2020 2020 2020 6e64  ..            nd
+0001f0d0: 5f74 6872 6573 686f 6c64 2028 666c 6f61  _threshold (floa
+0001f0e0: 742c 206f 7074 696f 6e61 6c29 3a20 5468  t, optional): Th
+0001f0f0: 6520 7468 7265 7368 6f6c 6420 666f 7220  e threshold for 
+0001f100: 6578 7461 6374 696e 6720 7069 7865 6c73  extacting pixels
+0001f110: 2066 726f 6d20 7468 6520 6e6f 726d 616c   from the normal
+0001f120: 697a 6564 2064 6966 6665 7265 6e63 6520  ized difference 
+0001f130: 6261 6e64 2e0d 0a20 2020 2020 2020 2020  band...         
+0001f140: 2020 206e 645f 7061 6c65 7474 6520 2873     nd_palette (s
+0001f150: 7472 2c20 6f70 7469 6f6e 616c 293a 2054  tr, optional): T
+0001f160: 6865 2063 6f6c 6f72 2070 616c 6574 7465  he color palette
+0001f170: 2074 6f20 7573 6520 666f 7220 6469 7370   to use for disp
+0001f180: 6c61 7969 6e67 2074 6865 206e 6f72 6d61  laying the norma
+0001f190: 6c69 7a65 6420 6469 6666 6572 656e 6365  lized difference
+0001f1a0: 2062 616e 642e 0d0a 0d0a 2020 2020 2020   band.....      
+0001f1b0: 2020 2222 220d 0a20 2020 2020 2020 2074    """..        t
+0001f1c0: 7279 3a0d 0a0d 0a20 2020 2020 2020 2020  ry:....         
+0001f1d0: 2020 2069 6620 726f 6920 6973 204e 6f6e     if roi is Non
+0001f1e0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+0001f1f0: 2020 2020 6966 2073 656c 662e 6472 6177      if self.draw
+0001f200: 5f6c 6173 745f 6665 6174 7572 6520 6973  _last_feature is
+0001f210: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
+0001f220: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001f230: 6665 6174 7572 6520 3d20 7365 6c66 2e64  feature = self.d
+0001f240: 7261 775f 6c61 7374 5f66 6561 7475 7265  raw_last_feature
+0001f250: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001f260: 2020 2020 2020 726f 6920 3d20 6665 6174        roi = feat
+0001f270: 7572 652e 6765 6f6d 6574 7279 2829 0d0a  ure.geometry()..
 0001f280: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f290: 2020 2020 205b 2d31 3135 2e34 3731 3737       [-115.47177
-0001f2a0: 332c 2033 352e 3839 3237 3138 5d2c 0d0a  3, 35.892718],..
-0001f2b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f2c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f2d0: 5b2d 3131 352e 3437 3137 3733 2c20 3336  [-115.471773, 36
-0001f2e0: 2e34 3039 3435 345d 2c0d 0a20 2020 2020  .409454],..     
-0001f2f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f300: 2020 2020 2020 2020 2020 205b 2d31 3134             [-114
-0001f310: 2e32 3731 3238 332c 2033 362e 3430 3934  .271283, 36.4094
-0001f320: 3534 5d2c 0d0a 2020 2020 2020 2020 2020  54],..          
-0001f330: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f340: 2020 2020 2020 5b2d 3131 342e 3237 3132        [-114.2712
-0001f350: 3833 2c20 3335 2e38 3932 3731 385d 2c0d  83, 35.892718],.
-0001f360: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001f370: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f380: 205b 2d31 3135 2e34 3731 3737 332c 2033   [-115.471773, 3
-0001f390: 352e 3839 3237 3138 5d2c 0d0a 2020 2020  5.892718],..    
-0001f3a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f3b0: 2020 2020 2020 2020 5d0d 0a20 2020 2020          ]..     
+0001f290: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
+0001f2a0: 2020 2020 2020 2020 2020 2072 6f69 203d             roi =
+0001f2b0: 2065 652e 4765 6f6d 6574 7279 2e50 6f6c   ee.Geometry.Pol
+0001f2c0: 7967 6f6e 280d 0a20 2020 2020 2020 2020  ygon(..         
+0001f2d0: 2020 2020 2020 2020 2020 2020 2020 205b                 [
+0001f2e0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001f2f0: 2020 2020 2020 2020 2020 2020 2020 5b0d                [.
+0001f300: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001f310: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001f320: 205b 2d31 3135 2e34 3731 3737 332c 2033   [-115.471773, 3
+0001f330: 352e 3839 3237 3138 5d2c 0d0a 2020 2020  5.892718],..    
+0001f340: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001f350: 2020 2020 2020 2020 2020 2020 5b2d 3131              [-11
+0001f360: 352e 3437 3137 3733 2c20 3336 2e34 3039  5.471773, 36.409
+0001f370: 3435 345d 2c0d 0a20 2020 2020 2020 2020  454],..         
+0001f380: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001f390: 2020 2020 2020 205b 2d31 3134 2e32 3731         [-114.271
+0001f3a0: 3238 332c 2033 362e 3430 3934 3534 5d2c  283, 36.409454],
+0001f3b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
 0001f3c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f3d0: 2020 205d 2c0d 0a20 2020 2020 2020 2020     ],..         
-0001f3e0: 2020 2020 2020 2020 2020 2020 2020 204e                 N
-0001f3f0: 6f6e 652c 0d0a 2020 2020 2020 2020 2020  one,..          
-0001f400: 2020 2020 2020 2020 2020 2020 2020 4661                Fa
-0001f410: 6c73 652c 0d0a 2020 2020 2020 2020 2020  lse,..          
-0001f420: 2020 2020 2020 2020 2020 290d 0a20 2020            )..   
-0001f430: 2020 2020 2020 2020 2065 6c69 6620 6973           elif is
-0001f440: 696e 7374 616e 6365 2872 6f69 2c20 6565  instance(roi, ee
-0001f450: 2e46 6561 7475 7265 2920 6f72 2069 7369  .Feature) or isi
-0001f460: 6e73 7461 6e63 6528 726f 692c 2065 652e  nstance(roi, ee.
-0001f470: 4665 6174 7572 6543 6f6c 6c65 6374 696f  FeatureCollectio
-0001f480: 6e29 3a0d 0a20 2020 2020 2020 2020 2020  n):..           
-0001f490: 2020 2020 2072 6f69 203d 2072 6f69 2e67       roi = roi.g
-0001f4a0: 656f 6d65 7472 7928 290d 0a20 2020 2020  eometry()..     
-0001f4b0: 2020 2020 2020 2065 6c69 6620 6973 696e         elif isin
-0001f4c0: 7374 616e 6365 2872 6f69 2c20 6565 2e47  stance(roi, ee.G
-0001f4d0: 656f 6d65 7472 7929 3a0d 0a20 2020 2020  eometry):..     
-0001f4e0: 2020 2020 2020 2020 2020 2070 6173 730d             pass.
-0001f4f0: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
-0001f500: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-0001f510: 2020 2020 7072 696e 7428 2254 6865 2070      print("The p
-0001f520: 726f 7669 6465 6420 726f 6920 6973 2069  rovided roi is i
-0001f530: 6e76 616c 6964 2e20 4974 206d 7573 7420  nvalid. It must 
-0001f540: 6265 2061 6e20 6565 2e47 656f 6d65 7472  be an ee.Geometr
-0001f550: 7922 290d 0a20 2020 2020 2020 2020 2020  y")..           
-0001f560: 2020 2020 2072 6574 7572 6e0d 0a0d 0a20       return.... 
-0001f570: 2020 2020 2020 2020 2020 2067 656f 6a73             geojs
-0001f580: 6f6e 203d 2065 655f 746f 5f67 656f 6a73  on = ee_to_geojs
-0001f590: 6f6e 2872 6f69 290d 0a20 2020 2020 2020  on(roi)..       
-0001f5a0: 2020 2020 2062 6f75 6e64 7320 3d20 6d69       bounds = mi
-0001f5b0: 6e69 6d75 6d5f 626f 756e 6469 6e67 5f62  nimum_bounding_b
-0001f5c0: 6f78 2867 656f 6a73 6f6e 290d 0a20 2020  ox(geojson)..   
-0001f5d0: 2020 2020 2020 2020 2067 656f 6a73 6f6e           geojson
-0001f5e0: 203d 2061 646a 7573 745f 6c6f 6e67 6974   = adjust_longit
-0001f5f0: 7564 6528 6765 6f6a 736f 6e29 0d0a 2020  ude(geojson)..  
-0001f600: 2020 2020 2020 2020 2020 726f 6920 3d20            roi = 
-0001f610: 6565 2e47 656f 6d65 7472 7928 6765 6f6a  ee.Geometry(geoj
-0001f620: 736f 6e29 0d0a 0d0a 2020 2020 2020 2020  son)....        
-0001f630: 2020 2020 696e 5f67 6966 203d 206c 616e      in_gif = lan
-0001f640: 6473 6174 5f74 735f 6769 6628 0d0a 2020  dsat_ts_gif(..  
-0001f650: 2020 2020 2020 2020 2020 2020 2020 726f                ro
-0001f660: 693d 726f 692c 0d0a 2020 2020 2020 2020  i=roi,..        
-0001f670: 2020 2020 2020 2020 6f75 745f 6769 663d          out_gif=
-0001f680: 6f75 745f 6769 662c 0d0a 2020 2020 2020  out_gif,..      
-0001f690: 2020 2020 2020 2020 2020 7374 6172 745f            start_
-0001f6a0: 7965 6172 3d73 7461 7274 5f79 6561 722c  year=start_year,
-0001f6b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001f6c0: 2020 656e 645f 7965 6172 3d65 6e64 5f79    end_year=end_y
-0001f6d0: 6561 722c 0d0a 2020 2020 2020 2020 2020  ear,..          
-0001f6e0: 2020 2020 2020 7374 6172 745f 6461 7465        start_date
-0001f6f0: 3d73 7461 7274 5f64 6174 652c 0d0a 2020  =start_date,..  
-0001f700: 2020 2020 2020 2020 2020 2020 2020 656e                en
-0001f710: 645f 6461 7465 3d65 6e64 5f64 6174 652c  d_date=end_date,
-0001f720: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001f730: 2020 6261 6e64 733d 6261 6e64 732c 0d0a    bands=bands,..
-0001f740: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f750: 7669 735f 7061 7261 6d73 3d76 6973 5f70  vis_params=vis_p
-0001f760: 6172 616d 732c 0d0a 2020 2020 2020 2020  arams,..        
-0001f770: 2020 2020 2020 2020 6469 6d65 6e73 696f          dimensio
-0001f780: 6e73 3d64 696d 656e 7369 6f6e 732c 0d0a  ns=dimensions,..
-0001f790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f7a0: 6672 616d 6573 5f70 6572 5f73 6563 6f6e  frames_per_secon
-0001f7b0: 643d 6672 616d 6573 5f70 6572 5f73 6563  d=frames_per_sec
-0001f7c0: 6f6e 642c 0d0a 2020 2020 2020 2020 2020  ond,..          
-0001f7d0: 2020 2020 2020 6170 706c 795f 666d 6173        apply_fmas
-0001f7e0: 6b3d 6170 706c 795f 666d 6173 6b2c 0d0a  k=apply_fmask,..
-0001f7f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f800: 6e64 5f62 616e 6473 3d6e 645f 6261 6e64  nd_bands=nd_band
-0001f810: 732c 0d0a 2020 2020 2020 2020 2020 2020  s,..            
-0001f820: 2020 2020 6e64 5f74 6872 6573 686f 6c64      nd_threshold
-0001f830: 3d6e 645f 7468 7265 7368 6f6c 642c 0d0a  =nd_threshold,..
-0001f840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f850: 6e64 5f70 616c 6574 7465 3d6e 645f 7061  nd_palette=nd_pa
-0001f860: 6c65 7474 652c 0d0a 2020 2020 2020 2020  lette,..        
-0001f870: 2020 2020 290d 0a20 2020 2020 2020 2020      )..         
-0001f880: 2020 2069 6e5f 6e64 5f67 6966 203d 2069     in_nd_gif = i
-0001f890: 6e5f 6769 662e 7265 706c 6163 6528 222e  n_gif.replace(".
-0001f8a0: 6769 6622 2c20 225f 6e64 2e67 6966 2229  gif", "_nd.gif")
-0001f8b0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0001f8c0: 7072 696e 7428 2241 6464 696e 6720 616e  print("Adding an
-0001f8d0: 696d 6174 6564 2074 6578 7420 746f 2047  imated text to G
-0001f8e0: 4946 202e 2e2e 2229 0d0a 2020 2020 2020  IF ...")..      
-0001f8f0: 2020 2020 2020 6164 645f 7465 7874 5f74        add_text_t
-0001f900: 6f5f 6769 6628 0d0a 2020 2020 2020 2020  o_gif(..        
-0001f910: 2020 2020 2020 2020 696e 5f67 6966 2c0d          in_gif,.
-0001f920: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001f930: 2069 6e5f 6769 662c 0d0a 2020 2020 2020   in_gif,..      
-0001f940: 2020 2020 2020 2020 2020 7879 3d28 2232            xy=("2
-0001f950: 2522 2c20 2232 2522 292c 0d0a 2020 2020  %", "2%"),..    
-0001f960: 2020 2020 2020 2020 2020 2020 7465 7874              text
-0001f970: 5f73 6571 7565 6e63 653d 7374 6172 745f  _sequence=start_
-0001f980: 7965 6172 2c0d 0a20 2020 2020 2020 2020  year,..         
-0001f990: 2020 2020 2020 2066 6f6e 745f 7369 7a65         font_size
-0001f9a0: 3d66 6f6e 745f 7369 7a65 2c0d 0a20 2020  =font_size,..   
-0001f9b0: 2020 2020 2020 2020 2020 2020 2066 6f6e               fon
-0001f9c0: 745f 636f 6c6f 723d 666f 6e74 5f63 6f6c  t_color=font_col
-0001f9d0: 6f72 2c0d 0a20 2020 2020 2020 2020 2020  or,..           
-0001f9e0: 2020 2020 2064 7572 6174 696f 6e3d 696e       duration=in
-0001f9f0: 7428 3130 3030 202f 2066 7261 6d65 735f  t(1000 / frames_
-0001fa00: 7065 725f 7365 636f 6e64 292c 0d0a 2020  per_second),..  
-0001fa10: 2020 2020 2020 2020 2020 2020 2020 6164                ad
-0001fa20: 645f 7072 6f67 7265 7373 5f62 6172 3d61  d_progress_bar=a
-0001fa30: 6464 5f70 726f 6772 6573 735f 6261 722c  dd_progress_bar,
-0001fa40: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001fa50: 2020 7072 6f67 7265 7373 5f62 6172 5f63    progress_bar_c
-0001fa60: 6f6c 6f72 3d70 726f 6772 6573 735f 6261  olor=progress_ba
-0001fa70: 725f 636f 6c6f 722c 0d0a 2020 2020 2020  r_color,..      
-0001fa80: 2020 2020 2020 2020 2020 7072 6f67 7265            progre
-0001fa90: 7373 5f62 6172 5f68 6569 6768 743d 7072  ss_bar_height=pr
-0001faa0: 6f67 7265 7373 5f62 6172 5f68 6569 6768  ogress_bar_heigh
-0001fab0: 742c 0d0a 2020 2020 2020 2020 2020 2020  t,..            
-0001fac0: 290d 0a20 2020 2020 2020 2020 2020 2069  )..            i
-0001fad0: 6620 6e64 5f62 616e 6473 2069 7320 6e6f  f nd_bands is no
-0001fae0: 7420 4e6f 6e65 3a0d 0a20 2020 2020 2020  t None:..       
-0001faf0: 2020 2020 2020 2020 2061 6464 5f74 6578           add_tex
-0001fb00: 745f 746f 5f67 6966 280d 0a20 2020 2020  t_to_gif(..     
-0001fb10: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0001fb20: 6e5f 6e64 5f67 6966 2c0d 0a20 2020 2020  n_nd_gif,..     
-0001fb30: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0001fb40: 6e5f 6e64 5f67 6966 2c0d 0a20 2020 2020  n_nd_gif,..     
-0001fb50: 2020 2020 2020 2020 2020 2020 2020 2078                 x
-0001fb60: 793d 2822 3225 222c 2022 3225 2229 2c0d  y=("2%", "2%"),.
-0001fb70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001fb80: 2020 2020 2074 6578 745f 7365 7175 656e       text_sequen
-0001fb90: 6365 3d73 7461 7274 5f79 6561 722c 0d0a  ce=start_year,..
-0001fba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fbb0: 2020 2020 666f 6e74 5f73 697a 653d 666f      font_size=fo
-0001fbc0: 6e74 5f73 697a 652c 0d0a 2020 2020 2020  nt_size,..      
-0001fbd0: 2020 2020 2020 2020 2020 2020 2020 666f                fo
-0001fbe0: 6e74 5f63 6f6c 6f72 3d66 6f6e 745f 636f  nt_color=font_co
-0001fbf0: 6c6f 722c 0d0a 2020 2020 2020 2020 2020  lor,..          
-0001fc00: 2020 2020 2020 2020 2020 6475 7261 7469            durati
-0001fc10: 6f6e 3d69 6e74 2831 3030 3020 2f20 6672  on=int(1000 / fr
-0001fc20: 616d 6573 5f70 6572 5f73 6563 6f6e 6429  ames_per_second)
-0001fc30: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-0001fc40: 2020 2020 2020 2061 6464 5f70 726f 6772         add_progr
-0001fc50: 6573 735f 6261 723d 6164 645f 7072 6f67  ess_bar=add_prog
-0001fc60: 7265 7373 5f62 6172 2c0d 0a20 2020 2020  ress_bar,..     
-0001fc70: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-0001fc80: 726f 6772 6573 735f 6261 725f 636f 6c6f  rogress_bar_colo
-0001fc90: 723d 7072 6f67 7265 7373 5f62 6172 5f63  r=progress_bar_c
-0001fca0: 6f6c 6f72 2c0d 0a20 2020 2020 2020 2020  olor,..         
-0001fcb0: 2020 2020 2020 2020 2020 2070 726f 6772             progr
-0001fcc0: 6573 735f 6261 725f 6865 6967 6874 3d70  ess_bar_height=p
-0001fcd0: 726f 6772 6573 735f 6261 725f 6865 6967  rogress_bar_heig
-0001fce0: 6874 2c0d 0a20 2020 2020 2020 2020 2020  ht,..           
-0001fcf0: 2020 2020 2029 0d0a 0d0a 2020 2020 2020       )....      
-0001fd00: 2020 2020 2020 6966 206c 6162 656c 2069        if label i
-0001fd10: 7320 6e6f 7420 4e6f 6e65 3a0d 0a20 2020  s not None:..   
-0001fd20: 2020 2020 2020 2020 2020 2020 2061 6464               add
-0001fd30: 5f74 6578 745f 746f 5f67 6966 280d 0a20  _text_to_gif(.. 
-0001fd40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fd50: 2020 2069 6e5f 6769 662c 0d0a 2020 2020     in_gif,..    
-0001fd60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fd70: 696e 5f67 6966 2c0d 0a20 2020 2020 2020  in_gif,..       
-0001fd80: 2020 2020 2020 2020 2020 2020 2078 793d               xy=
-0001fd90: 2822 3225 222c 2022 3930 2522 292c 0d0a  ("2%", "90%"),..
-0001fda0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fdb0: 2020 2020 7465 7874 5f73 6571 7565 6e63      text_sequenc
-0001fdc0: 653d 6c61 6265 6c2c 0d0a 2020 2020 2020  e=label,..      
-0001fdd0: 2020 2020 2020 2020 2020 2020 2020 666f                fo
-0001fde0: 6e74 5f73 697a 653d 666f 6e74 5f73 697a  nt_size=font_siz
-0001fdf0: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
-0001fe00: 2020 2020 2020 2020 666f 6e74 5f63 6f6c          font_col
-0001fe10: 6f72 3d66 6f6e 745f 636f 6c6f 722c 0d0a  or=font_color,..
-0001fe20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fe30: 2020 2020 6475 7261 7469 6f6e 3d69 6e74      duration=int
-0001fe40: 2831 3030 3020 2f20 6672 616d 6573 5f70  (1000 / frames_p
-0001fe50: 6572 5f73 6563 6f6e 6429 2c0d 0a20 2020  er_second),..   
-0001fe60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fe70: 2061 6464 5f70 726f 6772 6573 735f 6261   add_progress_ba
-0001fe80: 723d 6164 645f 7072 6f67 7265 7373 5f62  r=add_progress_b
-0001fe90: 6172 2c0d 0a20 2020 2020 2020 2020 2020  ar,..           
-0001fea0: 2020 2020 2020 2020 2070 726f 6772 6573           progres
-0001feb0: 735f 6261 725f 636f 6c6f 723d 7072 6f67  s_bar_color=prog
-0001fec0: 7265 7373 5f62 6172 5f63 6f6c 6f72 2c0d  ress_bar_color,.
-0001fed0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001fee0: 2020 2020 2070 726f 6772 6573 735f 6261       progress_ba
-0001fef0: 725f 6865 6967 6874 3d70 726f 6772 6573  r_height=progres
-0001ff00: 735f 6261 725f 6865 6967 6874 2c0d 0a20  s_bar_height,.. 
-0001ff10: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-0001ff20: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001ff30: 2020 2320 6966 206e 645f 6261 6e64 7320    # if nd_bands 
-0001ff40: 6973 206e 6f74 204e 6f6e 653a 0d0a 2020  is not None:..  
-0001ff50: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-0001ff60: 2020 2020 6164 645f 7465 7874 5f74 6f5f      add_text_to_
-0001ff70: 6769 6628 696e 5f6e 645f 6769 662c 2069  gif(in_nd_gif, i
-0001ff80: 6e5f 6e64 5f67 6966 2c20 7879 3d28 2732  n_nd_gif, xy=('2
-0001ff90: 2527 2c20 2739 3025 2729 2c20 7465 7874  %', '90%'), text
-0001ffa0: 5f73 6571 7565 6e63 653d 6c61 6265 6c2c  _sequence=label,
-0001ffb0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001ffc0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0001ffd0: 2020 2020 2020 2020 666f 6e74 5f73 697a          font_siz
-0001ffe0: 653d 666f 6e74 5f73 697a 652c 2066 6f6e  e=font_size, fon
-0001fff0: 745f 636f 6c6f 723d 666f 6e74 5f63 6f6c  t_color=font_col
-00020000: 6f72 2c20 6475 7261 7469 6f6e 3d69 6e74  or, duration=int
-00020010: 2831 3030 3020 2f20 6672 616d 6573 5f70  (1000 / frames_p
-00020020: 6572 5f73 6563 6f6e 6429 2c20 6164 645f  er_second), add_
-00020030: 7072 6f67 7265 7373 5f62 6172 3d61 6464  progress_bar=add
-00020040: 5f70 726f 6772 6573 735f 6261 722c 2070  _progress_bar, p
-00020050: 726f 6772 6573 735f 6261 725f 636f 6c6f  rogress_bar_colo
-00020060: 723d 7072 6f67 7265 7373 5f62 6172 5f63  r=progress_bar_c
-00020070: 6f6c 6f72 2c20 7072 6f67 7265 7373 5f62  olor, progress_b
-00020080: 6172 5f68 6569 6768 743d 7072 6f67 7265  ar_height=progre
-00020090: 7373 5f62 6172 5f68 6569 6768 7429 0d0a  ss_bar_height)..
-000200a0: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
-000200b0: 2069 735f 746f 6f6c 2822 6666 6d70 6567   is_tool("ffmpeg
-000200c0: 2229 3a0d 0a20 2020 2020 2020 2020 2020  "):..           
-000200d0: 2020 2020 2072 6564 7563 655f 6769 665f       reduce_gif_
-000200e0: 7369 7a65 2869 6e5f 6769 6629 0d0a 2020  size(in_gif)..  
-000200f0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00020100: 206e 645f 6261 6e64 7320 6973 206e 6f74   nd_bands is not
-00020110: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
-00020120: 2020 2020 2020 2020 2020 2020 7265 6475              redu
-00020130: 6365 5f67 6966 5f73 697a 6528 696e 5f6e  ce_gif_size(in_n
-00020140: 645f 6769 6629 0d0a 0d0a 2020 2020 2020  d_gif)....      
-00020150: 2020 2020 2020 7072 696e 7428 2241 6464        print("Add
-00020160: 696e 6720 4749 4620 746f 2074 6865 206d  ing GIF to the m
-00020170: 6170 202e 2e2e 2229 0d0a 2020 2020 2020  ap ...")..      
-00020180: 2020 2020 2020 7365 6c66 2e69 6d61 6765        self.image
-00020190: 5f6f 7665 726c 6179 2875 726c 3d69 6e5f  _overlay(url=in_
-000201a0: 6769 662c 2062 6f75 6e64 733d 626f 756e  gif, bounds=boun
-000201b0: 6473 2c20 6e61 6d65 3d6c 6179 6572 5f6e  ds, name=layer_n
-000201c0: 616d 6529 0d0a 2020 2020 2020 2020 2020  ame)..          
-000201d0: 2020 6966 206e 645f 6261 6e64 7320 6973    if nd_bands is
-000201e0: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
-000201f0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00020200: 2e69 6d61 6765 5f6f 7665 726c 6179 280d  .image_overlay(.
-00020210: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00020220: 2020 2020 2075 726c 3d69 6e5f 6e64 5f67       url=in_nd_g
+0001f3d0: 2020 5b2d 3131 342e 3237 3132 3833 2c20    [-114.271283, 
+0001f3e0: 3335 2e38 3932 3731 385d 2c0d 0a20 2020  35.892718],..   
+0001f3f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001f400: 2020 2020 2020 2020 2020 2020 205b 2d31               [-1
+0001f410: 3135 2e34 3731 3737 332c 2033 352e 3839  15.471773, 35.89
+0001f420: 3237 3138 5d2c 0d0a 2020 2020 2020 2020  2718],..        
+0001f430: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001f440: 2020 2020 5d0d 0a20 2020 2020 2020 2020      ]..         
+0001f450: 2020 2020 2020 2020 2020 2020 2020 205d                 ]
+0001f460: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+0001f470: 2020 2020 2020 2020 2020 204e 6f6e 652c             None,
+0001f480: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001f490: 2020 2020 2020 2020 2020 4661 6c73 652c            False,
+0001f4a0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001f4b0: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
+0001f4c0: 2020 2020 2065 6c69 6620 6973 696e 7374       elif isinst
+0001f4d0: 616e 6365 2872 6f69 2c20 6565 2e46 6561  ance(roi, ee.Fea
+0001f4e0: 7475 7265 2920 6f72 2069 7369 6e73 7461  ture) or isinsta
+0001f4f0: 6e63 6528 726f 692c 2065 652e 4665 6174  nce(roi, ee.Feat
+0001f500: 7572 6543 6f6c 6c65 6374 696f 6e29 3a0d  ureCollection):.
+0001f510: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001f520: 2072 6f69 203d 2072 6f69 2e67 656f 6d65   roi = roi.geome
+0001f530: 7472 7928 290d 0a20 2020 2020 2020 2020  try()..         
+0001f540: 2020 2065 6c69 6620 6973 696e 7374 616e     elif isinstan
+0001f550: 6365 2872 6f69 2c20 6565 2e47 656f 6d65  ce(roi, ee.Geome
+0001f560: 7472 7929 3a0d 0a20 2020 2020 2020 2020  try):..         
+0001f570: 2020 2020 2020 2070 6173 730d 0a20 2020         pass..   
+0001f580: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
+0001f590: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001f5a0: 7072 696e 7428 2254 6865 2070 726f 7669  print("The provi
+0001f5b0: 6465 6420 726f 6920 6973 2069 6e76 616c  ded roi is inval
+0001f5c0: 6964 2e20 4974 206d 7573 7420 6265 2061  id. It must be a
+0001f5d0: 6e20 6565 2e47 656f 6d65 7472 7922 290d  n ee.Geometry").
+0001f5e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001f5f0: 2072 6574 7572 6e0d 0a0d 0a20 2020 2020   return....     
+0001f600: 2020 2020 2020 2067 656f 6a73 6f6e 203d         geojson =
+0001f610: 2065 655f 746f 5f67 656f 6a73 6f6e 2872   ee_to_geojson(r
+0001f620: 6f69 290d 0a20 2020 2020 2020 2020 2020  oi)..           
+0001f630: 2062 6f75 6e64 7320 3d20 6d69 6e69 6d75   bounds = minimu
+0001f640: 6d5f 626f 756e 6469 6e67 5f62 6f78 2867  m_bounding_box(g
+0001f650: 656f 6a73 6f6e 290d 0a20 2020 2020 2020  eojson)..       
+0001f660: 2020 2020 2067 656f 6a73 6f6e 203d 2061       geojson = a
+0001f670: 646a 7573 745f 6c6f 6e67 6974 7564 6528  djust_longitude(
+0001f680: 6765 6f6a 736f 6e29 0d0a 2020 2020 2020  geojson)..      
+0001f690: 2020 2020 2020 726f 6920 3d20 6565 2e47        roi = ee.G
+0001f6a0: 656f 6d65 7472 7928 6765 6f6a 736f 6e29  eometry(geojson)
+0001f6b0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+0001f6c0: 696e 5f67 6966 203d 206c 616e 6473 6174  in_gif = landsat
+0001f6d0: 5f74 696d 656c 6170 7365 280d 0a20 2020  _timelapse(..   
+0001f6e0: 2020 2020 2020 2020 2020 2020 2072 6f69               roi
+0001f6f0: 3d72 6f69 2c0d 0a20 2020 2020 2020 2020  =roi,..         
+0001f700: 2020 2020 2020 206f 7574 5f67 6966 3d6f         out_gif=o
+0001f710: 7574 5f67 6966 2c0d 0a20 2020 2020 2020  ut_gif,..       
+0001f720: 2020 2020 2020 2020 2073 7461 7274 5f79           start_y
+0001f730: 6561 723d 7374 6172 745f 7965 6172 2c0d  ear=start_year,.
+0001f740: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001f750: 2065 6e64 5f79 6561 723d 656e 645f 7965   end_year=end_ye
+0001f760: 6172 2c0d 0a20 2020 2020 2020 2020 2020  ar,..           
+0001f770: 2020 2020 2073 7461 7274 5f64 6174 653d       start_date=
+0001f780: 7374 6172 745f 6461 7465 2c0d 0a20 2020  start_date,..   
+0001f790: 2020 2020 2020 2020 2020 2020 2065 6e64               end
+0001f7a0: 5f64 6174 653d 656e 645f 6461 7465 2c0d  _date=end_date,.
+0001f7b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001f7c0: 2062 616e 6473 3d62 616e 6473 2c0d 0a20   bands=bands,.. 
+0001f7d0: 2020 2020 2020 2020 2020 2020 2020 2076                 v
+0001f7e0: 6973 5f70 6172 616d 733d 7669 735f 7061  is_params=vis_pa
+0001f7f0: 7261 6d73 2c0d 0a20 2020 2020 2020 2020  rams,..         
+0001f800: 2020 2020 2020 2064 696d 656e 7369 6f6e         dimension
+0001f810: 733d 6469 6d65 6e73 696f 6e73 2c0d 0a20  s=dimensions,.. 
+0001f820: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+0001f830: 7261 6d65 735f 7065 725f 7365 636f 6e64  rames_per_second
+0001f840: 3d66 7261 6d65 735f 7065 725f 7365 636f  =frames_per_seco
+0001f850: 6e64 2c0d 0a20 2020 2020 2020 2020 2020  nd,..           
+0001f860: 2020 2020 2061 7070 6c79 5f66 6d61 736b       apply_fmask
+0001f870: 3d61 7070 6c79 5f66 6d61 736b 2c0d 0a20  =apply_fmask,.. 
+0001f880: 2020 2020 2020 2020 2020 2020 2020 206e                 n
+0001f890: 645f 6261 6e64 733d 6e64 5f62 616e 6473  d_bands=nd_bands
+0001f8a0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+0001f8b0: 2020 206e 645f 7468 7265 7368 6f6c 643d     nd_threshold=
+0001f8c0: 6e64 5f74 6872 6573 686f 6c64 2c0d 0a20  nd_threshold,.. 
+0001f8d0: 2020 2020 2020 2020 2020 2020 2020 206e                 n
+0001f8e0: 645f 7061 6c65 7474 653d 6e64 5f70 616c  d_palette=nd_pal
+0001f8f0: 6574 7465 2c0d 0a20 2020 2020 2020 2020  ette,..         
+0001f900: 2020 2029 0d0a 2020 2020 2020 2020 2020     )..          
+0001f910: 2020 696e 5f6e 645f 6769 6620 3d20 696e    in_nd_gif = in
+0001f920: 5f67 6966 2e72 6570 6c61 6365 2822 2e67  _gif.replace(".g
+0001f930: 6966 222c 2022 5f6e 642e 6769 6622 290d  if", "_nd.gif").
+0001f940: 0a0d 0a20 2020 2020 2020 2020 2020 2070  ...            p
+0001f950: 7269 6e74 2822 4164 6469 6e67 2061 6e69  rint("Adding ani
+0001f960: 6d61 7465 6420 7465 7874 2074 6f20 4749  mated text to GI
+0001f970: 4620 2e2e 2e22 290d 0a20 2020 2020 2020  F ...")..       
+0001f980: 2020 2020 2061 6464 5f74 6578 745f 746f       add_text_to
+0001f990: 5f67 6966 280d 0a20 2020 2020 2020 2020  _gif(..         
+0001f9a0: 2020 2020 2020 2069 6e5f 6769 662c 0d0a         in_gif,..
+0001f9b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001f9c0: 696e 5f67 6966 2c0d 0a20 2020 2020 2020  in_gif,..       
+0001f9d0: 2020 2020 2020 2020 2078 793d 2822 3225           xy=("2%
+0001f9e0: 222c 2022 3225 2229 2c0d 0a20 2020 2020  ", "2%"),..     
+0001f9f0: 2020 2020 2020 2020 2020 2074 6578 745f             text_
+0001fa00: 7365 7175 656e 6365 3d73 7461 7274 5f79  sequence=start_y
+0001fa10: 6561 722c 0d0a 2020 2020 2020 2020 2020  ear,..          
+0001fa20: 2020 2020 2020 666f 6e74 5f73 697a 653d        font_size=
+0001fa30: 666f 6e74 5f73 697a 652c 0d0a 2020 2020  font_size,..    
+0001fa40: 2020 2020 2020 2020 2020 2020 666f 6e74              font
+0001fa50: 5f63 6f6c 6f72 3d66 6f6e 745f 636f 6c6f  _color=font_colo
+0001fa60: 722c 0d0a 2020 2020 2020 2020 2020 2020  r,..            
+0001fa70: 2020 2020 6475 7261 7469 6f6e 3d69 6e74      duration=int
+0001fa80: 2831 3030 3020 2f20 6672 616d 6573 5f70  (1000 / frames_p
+0001fa90: 6572 5f73 6563 6f6e 6429 2c0d 0a20 2020  er_second),..   
+0001faa0: 2020 2020 2020 2020 2020 2020 2061 6464               add
+0001fab0: 5f70 726f 6772 6573 735f 6261 723d 6164  _progress_bar=ad
+0001fac0: 645f 7072 6f67 7265 7373 5f62 6172 2c0d  d_progress_bar,.
+0001fad0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001fae0: 2070 726f 6772 6573 735f 6261 725f 636f   progress_bar_co
+0001faf0: 6c6f 723d 7072 6f67 7265 7373 5f62 6172  lor=progress_bar
+0001fb00: 5f63 6f6c 6f72 2c0d 0a20 2020 2020 2020  _color,..       
+0001fb10: 2020 2020 2020 2020 2070 726f 6772 6573           progres
+0001fb20: 735f 6261 725f 6865 6967 6874 3d70 726f  s_bar_height=pro
+0001fb30: 6772 6573 735f 6261 725f 6865 6967 6874  gress_bar_height
+0001fb40: 2c0d 0a20 2020 2020 2020 2020 2020 2029  ,..            )
+0001fb50: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
+0001fb60: 206e 645f 6261 6e64 7320 6973 206e 6f74   nd_bands is not
+0001fb70: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+0001fb80: 2020 2020 2020 2020 6164 645f 7465 7874          add_text
+0001fb90: 5f74 6f5f 6769 6628 0d0a 2020 2020 2020  _to_gif(..      
+0001fba0: 2020 2020 2020 2020 2020 2020 2020 696e                in
+0001fbb0: 5f6e 645f 6769 662c 0d0a 2020 2020 2020  _nd_gif,..      
+0001fbc0: 2020 2020 2020 2020 2020 2020 2020 696e                in
+0001fbd0: 5f6e 645f 6769 662c 0d0a 2020 2020 2020  _nd_gif,..      
+0001fbe0: 2020 2020 2020 2020 2020 2020 2020 7879                xy
+0001fbf0: 3d28 2232 2522 2c20 2232 2522 292c 0d0a  =("2%", "2%"),..
+0001fc00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fc10: 2020 2020 7465 7874 5f73 6571 7565 6e63      text_sequenc
+0001fc20: 653d 7374 6172 745f 7965 6172 2c0d 0a20  e=start_year,.. 
+0001fc30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fc40: 2020 2066 6f6e 745f 7369 7a65 3d66 6f6e     font_size=fon
+0001fc50: 745f 7369 7a65 2c0d 0a20 2020 2020 2020  t_size,..       
+0001fc60: 2020 2020 2020 2020 2020 2020 2066 6f6e               fon
+0001fc70: 745f 636f 6c6f 723d 666f 6e74 5f63 6f6c  t_color=font_col
+0001fc80: 6f72 2c0d 0a20 2020 2020 2020 2020 2020  or,..           
+0001fc90: 2020 2020 2020 2020 2064 7572 6174 696f           duratio
+0001fca0: 6e3d 696e 7428 3130 3030 202f 2066 7261  n=int(1000 / fra
+0001fcb0: 6d65 735f 7065 725f 7365 636f 6e64 292c  mes_per_second),
+0001fcc0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001fcd0: 2020 2020 2020 6164 645f 7072 6f67 7265        add_progre
+0001fce0: 7373 5f62 6172 3d61 6464 5f70 726f 6772  ss_bar=add_progr
+0001fcf0: 6573 735f 6261 722c 0d0a 2020 2020 2020  ess_bar,..      
+0001fd00: 2020 2020 2020 2020 2020 2020 2020 7072                pr
+0001fd10: 6f67 7265 7373 5f62 6172 5f63 6f6c 6f72  ogress_bar_color
+0001fd20: 3d70 726f 6772 6573 735f 6261 725f 636f  =progress_bar_co
+0001fd30: 6c6f 722c 0d0a 2020 2020 2020 2020 2020  lor,..          
+0001fd40: 2020 2020 2020 2020 2020 7072 6f67 7265            progre
+0001fd50: 7373 5f62 6172 5f68 6569 6768 743d 7072  ss_bar_height=pr
+0001fd60: 6f67 7265 7373 5f62 6172 5f68 6569 6768  ogress_bar_heigh
+0001fd70: 742c 0d0a 2020 2020 2020 2020 2020 2020  t,..            
+0001fd80: 2020 2020 290d 0a0d 0a20 2020 2020 2020      )....       
+0001fd90: 2020 2020 2069 6620 6c61 6265 6c20 6973       if label is
+0001fda0: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
+0001fdb0: 2020 2020 2020 2020 2020 2020 6164 645f              add_
+0001fdc0: 7465 7874 5f74 6f5f 6769 6628 0d0a 2020  text_to_gif(..  
+0001fdd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fde0: 2020 696e 5f67 6966 2c0d 0a20 2020 2020    in_gif,..     
+0001fdf0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0001fe00: 6e5f 6769 662c 0d0a 2020 2020 2020 2020  n_gif,..        
+0001fe10: 2020 2020 2020 2020 2020 2020 7879 3d28              xy=(
+0001fe20: 2232 2522 2c20 2239 3025 2229 2c0d 0a20  "2%", "90%"),.. 
+0001fe30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fe40: 2020 2074 6578 745f 7365 7175 656e 6365     text_sequence
+0001fe50: 3d6c 6162 656c 2c0d 0a20 2020 2020 2020  =label,..       
+0001fe60: 2020 2020 2020 2020 2020 2020 2066 6f6e               fon
+0001fe70: 745f 7369 7a65 3d66 6f6e 745f 7369 7a65  t_size=font_size
+0001fe80: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+0001fe90: 2020 2020 2020 2066 6f6e 745f 636f 6c6f         font_colo
+0001fea0: 723d 666f 6e74 5f63 6f6c 6f72 2c0d 0a20  r=font_color,.. 
+0001feb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fec0: 2020 2064 7572 6174 696f 6e3d 696e 7428     duration=int(
+0001fed0: 3130 3030 202f 2066 7261 6d65 735f 7065  1000 / frames_pe
+0001fee0: 725f 7365 636f 6e64 292c 0d0a 2020 2020  r_second),..    
+0001fef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ff00: 6164 645f 7072 6f67 7265 7373 5f62 6172  add_progress_bar
+0001ff10: 3d61 6464 5f70 726f 6772 6573 735f 6261  =add_progress_ba
+0001ff20: 722c 0d0a 2020 2020 2020 2020 2020 2020  r,..            
+0001ff30: 2020 2020 2020 2020 7072 6f67 7265 7373          progress
+0001ff40: 5f62 6172 5f63 6f6c 6f72 3d70 726f 6772  _bar_color=progr
+0001ff50: 6573 735f 6261 725f 636f 6c6f 722c 0d0a  ess_bar_color,..
+0001ff60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ff70: 2020 2020 7072 6f67 7265 7373 5f62 6172      progress_bar
+0001ff80: 5f68 6569 6768 743d 7072 6f67 7265 7373  _height=progress
+0001ff90: 5f62 6172 5f68 6569 6768 742c 0d0a 2020  _bar_height,..  
+0001ffa0: 2020 2020 2020 2020 2020 2020 2020 290d                ).
+0001ffb0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001ffc0: 2023 2069 6620 6e64 5f62 616e 6473 2069   # if nd_bands i
+0001ffd0: 7320 6e6f 7420 4e6f 6e65 3a0d 0a20 2020  s not None:..   
+0001ffe0: 2020 2020 2020 2020 2020 2020 2023 2020               #  
+0001fff0: 2020 2061 6464 5f74 6578 745f 746f 5f67     add_text_to_g
+00020000: 6966 2869 6e5f 6e64 5f67 6966 2c20 696e  if(in_nd_gif, in
+00020010: 5f6e 645f 6769 662c 2078 793d 2827 3225  _nd_gif, xy=('2%
+00020020: 272c 2027 3930 2527 292c 2074 6578 745f  ', '90%'), text_
+00020030: 7365 7175 656e 6365 3d6c 6162 656c 2c0d  sequence=label,.
+00020040: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00020050: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+00020060: 2020 2020 2020 2066 6f6e 745f 7369 7a65         font_size
+00020070: 3d66 6f6e 745f 7369 7a65 2c20 666f 6e74  =font_size, font
+00020080: 5f63 6f6c 6f72 3d66 6f6e 745f 636f 6c6f  _color=font_colo
+00020090: 722c 2064 7572 6174 696f 6e3d 696e 7428  r, duration=int(
+000200a0: 3130 3030 202f 2066 7261 6d65 735f 7065  1000 / frames_pe
+000200b0: 725f 7365 636f 6e64 292c 2061 6464 5f70  r_second), add_p
+000200c0: 726f 6772 6573 735f 6261 723d 6164 645f  rogress_bar=add_
+000200d0: 7072 6f67 7265 7373 5f62 6172 2c20 7072  progress_bar, pr
+000200e0: 6f67 7265 7373 5f62 6172 5f63 6f6c 6f72  ogress_bar_color
+000200f0: 3d70 726f 6772 6573 735f 6261 725f 636f  =progress_bar_co
+00020100: 6c6f 722c 2070 726f 6772 6573 735f 6261  lor, progress_ba
+00020110: 725f 6865 6967 6874 3d70 726f 6772 6573  r_height=progres
+00020120: 735f 6261 725f 6865 6967 6874 290d 0a0d  s_bar_height)...
+00020130: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00020140: 6973 5f74 6f6f 6c28 2266 666d 7065 6722  is_tool("ffmpeg"
+00020150: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+00020160: 2020 2020 7265 6475 6365 5f67 6966 5f73      reduce_gif_s
+00020170: 697a 6528 696e 5f67 6966 290d 0a20 2020  ize(in_gif)..   
+00020180: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00020190: 6e64 5f62 616e 6473 2069 7320 6e6f 7420  nd_bands is not 
+000201a0: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
+000201b0: 2020 2020 2020 2020 2020 2072 6564 7563             reduc
+000201c0: 655f 6769 665f 7369 7a65 2869 6e5f 6e64  e_gif_size(in_nd
+000201d0: 5f67 6966 290d 0a0d 0a20 2020 2020 2020  _gif)....       
+000201e0: 2020 2020 2070 7269 6e74 2822 4164 6469       print("Addi
+000201f0: 6e67 2047 4946 2074 6f20 7468 6520 6d61  ng GIF to the ma
+00020200: 7020 2e2e 2e22 290d 0a20 2020 2020 2020  p ...")..       
+00020210: 2020 2020 2073 656c 662e 696d 6167 655f       self.image_
+00020220: 6f76 6572 6c61 7928 7572 6c3d 696e 5f67  overlay(url=in_g
 00020230: 6966 2c20 626f 756e 6473 3d62 6f75 6e64  if, bounds=bound
 00020240: 732c 206e 616d 653d 6c61 7965 725f 6e61  s, name=layer_na
-00020250: 6d65 202b 2022 204e 4422 0d0a 2020 2020  me + " ND"..    
-00020260: 2020 2020 2020 2020 2020 2020 290d 0a20              ).. 
-00020270: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-00020280: 2822 5468 6520 7469 6d65 6c61 7073 6520  ("The timelapse 
-00020290: 6861 7320 6265 656e 2061 6464 6564 2074  has been added t
-000202a0: 6f20 7468 6520 6d61 702e 2229 0d0a 0d0a  o the map.")....
-000202b0: 2020 2020 2020 2020 2020 2020 6966 2064              if d
-000202c0: 6f77 6e6c 6f61 643a 0d0a 2020 2020 2020  ownload:..      
-000202d0: 2020 2020 2020 2020 2020 6c69 6e6b 203d            link =
-000202e0: 2063 7265 6174 655f 646f 776e 6c6f 6164   create_download
-000202f0: 5f6c 696e 6b28 0d0a 2020 2020 2020 2020  _link(..        
-00020300: 2020 2020 2020 2020 2020 2020 696e 5f67              in_g
-00020310: 6966 2c0d 0a20 2020 2020 2020 2020 2020  if,..           
-00020320: 2020 2020 2020 2020 2074 6974 6c65 3d22           title="
-00020330: 436c 6963 6b20 6865 7265 2074 6f20 646f  Click here to do
-00020340: 776e 6c6f 6164 2074 6865 204c 616e 6473  wnload the Lands
-00020350: 6174 2074 696d 656c 6170 7365 3a20 222c  at timelapse: ",
-00020360: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00020370: 2020 290d 0a20 2020 2020 2020 2020 2020    )..           
-00020380: 2020 2020 2064 6973 706c 6179 286c 696e       display(lin
-00020390: 6b29 0d0a 2020 2020 2020 2020 2020 2020  k)..            
-000203a0: 2020 2020 6966 206e 645f 6261 6e64 7320      if nd_bands 
-000203b0: 6973 206e 6f74 204e 6f6e 653a 0d0a 2020  is not None:..  
-000203c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000203d0: 2020 6c69 6e6b 3220 3d20 6372 6561 7465    link2 = create
-000203e0: 5f64 6f77 6e6c 6f61 645f 6c69 6e6b 280d  _download_link(.
+00020250: 6d65 290d 0a20 2020 2020 2020 2020 2020  me)..           
+00020260: 2069 6620 6e64 5f62 616e 6473 2069 7320   if nd_bands is 
+00020270: 6e6f 7420 4e6f 6e65 3a0d 0a20 2020 2020  not None:..     
+00020280: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00020290: 696d 6167 655f 6f76 6572 6c61 7928 0d0a  image_overlay(..
+000202a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000202b0: 2020 2020 7572 6c3d 696e 5f6e 645f 6769      url=in_nd_gi
+000202c0: 662c 2062 6f75 6e64 733d 626f 756e 6473  f, bounds=bounds
+000202d0: 2c20 6e61 6d65 3d6c 6179 6572 5f6e 616d  , name=layer_nam
+000202e0: 6520 2b20 2220 4e44 220d 0a20 2020 2020  e + " ND"..     
+000202f0: 2020 2020 2020 2020 2020 2029 0d0a 2020             )..  
+00020300: 2020 2020 2020 2020 2020 7072 696e 7428            print(
+00020310: 2254 6865 2074 696d 656c 6170 7365 2068  "The timelapse h
+00020320: 6173 2062 6565 6e20 6164 6465 6420 746f  as been added to
+00020330: 2074 6865 206d 6170 2e22 290d 0a0d 0a20   the map.").... 
+00020340: 2020 2020 2020 2020 2020 2069 6620 646f             if do
+00020350: 776e 6c6f 6164 3a0d 0a20 2020 2020 2020  wnload:..       
+00020360: 2020 2020 2020 2020 206c 696e 6b20 3d20           link = 
+00020370: 6372 6561 7465 5f64 6f77 6e6c 6f61 645f  create_download_
+00020380: 6c69 6e6b 280d 0a20 2020 2020 2020 2020  link(..         
+00020390: 2020 2020 2020 2020 2020 2069 6e5f 6769             in_gi
+000203a0: 662c 0d0a 2020 2020 2020 2020 2020 2020  f,..            
+000203b0: 2020 2020 2020 2020 7469 746c 653d 2243          title="C
+000203c0: 6c69 636b 2068 6572 6520 746f 2064 6f77  lick here to dow
+000203d0: 6e6c 6f61 6420 7468 6520 4c61 6e64 7361  nload the Landsa
+000203e0: 7420 7469 6d65 6c61 7073 653a 2022 2c0d  t timelapse: ",.
 000203f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00020400: 2020 2020 2020 2020 2069 6e5f 6e64 5f67           in_nd_g
-00020410: 6966 2c0d 0a20 2020 2020 2020 2020 2020  if,..           
-00020420: 2020 2020 2020 2020 2020 2020 2074 6974               tit
-00020430: 6c65 3d22 436c 6963 6b20 6865 7265 2074  le="Click here t
-00020440: 6f20 646f 776e 6c6f 6164 2074 6865 204e  o download the N
-00020450: 6f72 6d61 6c69 7a65 6420 4469 6666 6572  ormalized Differ
-00020460: 656e 6365 2049 6e64 6578 2074 696d 656c  ence Index timel
-00020470: 6170 7365 3a20 222c 0d0a 2020 2020 2020  apse: ",..      
-00020480: 2020 2020 2020 2020 2020 2020 2020 290d                ).
-00020490: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000204a0: 2020 2020 2064 6973 706c 6179 286c 696e       display(lin
-000204b0: 6b32 290d 0a0d 0a20 2020 2020 2020 2065  k2)....        e
-000204c0: 7863 6570 7420 4578 6365 7074 696f 6e20  xcept Exception 
-000204d0: 6173 2065 3a0d 0a20 2020 2020 2020 2020  as e:..         
-000204e0: 2020 2072 6169 7365 2045 7863 6570 7469     raise Excepti
-000204f0: 6f6e 2865 290d 0a0d 0a20 2020 2064 6566  on(e)....    def
-00020500: 2074 6f5f 6874 6d6c 280d 0a20 2020 2020   to_html(..     
-00020510: 2020 2073 656c 662c 0d0a 2020 2020 2020     self,..      
-00020520: 2020 6f75 7466 696c 653d 4e6f 6e65 2c0d    outfile=None,.
-00020530: 0a20 2020 2020 2020 2074 6974 6c65 3d22  .        title="
-00020540: 4d79 204d 6170 222c 0d0a 2020 2020 2020  My Map",..      
-00020550: 2020 7769 6474 683d 2231 3030 2522 2c0d    width="100%",.
-00020560: 0a20 2020 2020 2020 2068 6569 6768 743d  .        height=
-00020570: 2238 3830 7078 222c 0d0a 2020 2020 2020  "880px",..      
-00020580: 2020 6164 645f 6c61 7965 725f 636f 6e74    add_layer_cont
-00020590: 726f 6c3d 5472 7565 2c0d 0a20 2020 2020  rol=True,..     
-000205a0: 2020 202a 2a6b 7761 7267 732c 0d0a 2020     **kwargs,..  
-000205b0: 2020 293a 0d0a 2020 2020 2020 2020 2222    ):..        ""
-000205c0: 2253 6176 6573 2074 6865 206d 6170 2061  "Saves the map a
-000205d0: 7320 616e 2048 544d 4c20 6669 6c65 2e0d  s an HTML file..
-000205e0: 0a0d 0a20 2020 2020 2020 2041 7267 733a  ...        Args:
-000205f0: 0d0a 2020 2020 2020 2020 2020 2020 6f75  ..            ou
-00020600: 7466 696c 6520 2873 7472 2c20 6f70 7469  tfile (str, opti
-00020610: 6f6e 616c 293a 2054 6865 206f 7574 7075  onal): The outpu
-00020620: 7420 6669 6c65 2070 6174 6820 746f 2074  t file path to t
-00020630: 6865 2048 544d 4c20 6669 6c65 2e0d 0a20  he HTML file... 
-00020640: 2020 2020 2020 2020 2020 2074 6974 6c65             title
-00020650: 2028 7374 722c 206f 7074 696f 6e61 6c29   (str, optional)
-00020660: 3a20 5468 6520 7469 746c 6520 6f66 2074  : The title of t
-00020670: 6865 2048 544d 4c20 6669 6c65 2e20 4465  he HTML file. De
-00020680: 6661 756c 7473 2074 6f20 274d 7920 4d61  faults to 'My Ma
-00020690: 7027 2e0d 0a20 2020 2020 2020 2020 2020  p'...           
-000206a0: 2077 6964 7468 2028 7374 722c 206f 7074   width (str, opt
-000206b0: 696f 6e61 6c29 3a20 5468 6520 7769 6474  ional): The widt
-000206c0: 6820 6f66 2074 6865 206d 6170 2069 6e20  h of the map in 
-000206d0: 7069 7865 6c73 206f 7220 7065 7263 656e  pixels or percen
-000206e0: 7461 6765 2e20 4465 6661 756c 7473 2074  tage. Defaults t
-000206f0: 6f20 2731 3030 2527 2e0d 0a20 2020 2020  o '100%'...     
-00020700: 2020 2020 2020 2068 6569 6768 7420 2873         height (s
-00020710: 7472 2c20 6f70 7469 6f6e 616c 293a 2054  tr, optional): T
-00020720: 6865 2068 6569 6768 7420 6f66 2074 6865  he height of the
-00020730: 206d 6170 2069 6e20 7069 7865 6c73 2e20   map in pixels. 
-00020740: 4465 6661 756c 7473 2074 6f20 2738 3830  Defaults to '880
-00020750: 7078 272e 0d0a 2020 2020 2020 2020 2020  px'...          
-00020760: 2020 6164 645f 6c61 7965 725f 636f 6e74    add_layer_cont
-00020770: 726f 6c20 2862 6f6f 6c2c 206f 7074 696f  rol (bool, optio
-00020780: 6e61 6c29 3a20 5768 6574 6865 7220 746f  nal): Whether to
-00020790: 2061 6464 2074 6865 204c 6179 6572 7343   add the LayersC
-000207a0: 6f6e 7472 6f6c 2e20 4465 6661 756c 7473  ontrol. Defaults
-000207b0: 2074 6f20 5472 7565 2e0d 0a0d 0a20 2020   to True.....   
-000207c0: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
-000207d0: 2020 7472 793a 0d0a 0d0a 2020 2020 2020    try:....      
-000207e0: 2020 2020 2020 7361 7665 203d 2054 7275        save = Tru
-000207f0: 650d 0a20 2020 2020 2020 2020 2020 2069  e..            i
-00020800: 6620 6f75 7466 696c 6520 6973 206e 6f74  f outfile is not
-00020810: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
-00020820: 2020 2020 2020 2020 6966 206e 6f74 206f          if not o
-00020830: 7574 6669 6c65 2e65 6e64 7377 6974 6828  utfile.endswith(
-00020840: 222e 6874 6d6c 2229 3a0d 0a20 2020 2020  ".html"):..     
-00020850: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00020860: 6169 7365 2056 616c 7565 4572 726f 7228  aise ValueError(
-00020870: 2254 6865 206f 7574 7075 7420 6669 6c65  "The output file
-00020880: 2065 7874 656e 7369 6f6e 206d 7573 7420   extension must 
-00020890: 6265 2068 746d 6c2e 2229 0d0a 2020 2020  be html.")..    
-000208a0: 2020 2020 2020 2020 2020 2020 6f75 7466              outf
-000208b0: 696c 6520 3d20 6f73 2e70 6174 682e 6162  ile = os.path.ab
-000208c0: 7370 6174 6828 6f75 7466 696c 6529 0d0a  spath(outfile)..
-000208d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000208e0: 6f75 745f 6469 7220 3d20 6f73 2e70 6174  out_dir = os.pat
-000208f0: 682e 6469 726e 616d 6528 6f75 7466 696c  h.dirname(outfil
-00020900: 6529 0d0a 2020 2020 2020 2020 2020 2020  e)..            
-00020910: 2020 2020 6966 206e 6f74 206f 732e 7061      if not os.pa
-00020920: 7468 2e65 7869 7374 7328 6f75 745f 6469  th.exists(out_di
-00020930: 7229 3a0d 0a20 2020 2020 2020 2020 2020  r):..           
-00020940: 2020 2020 2020 2020 206f 732e 6d61 6b65           os.make
-00020950: 6469 7273 286f 7574 5f64 6972 290d 0a20  dirs(out_dir).. 
-00020960: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-00020970: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00020980: 2020 6f75 7466 696c 6520 3d20 6f73 2e70    outfile = os.p
-00020990: 6174 682e 6162 7370 6174 6828 7261 6e64  ath.abspath(rand
-000209a0: 6f6d 5f73 7472 696e 6728 2920 2b20 222e  om_string() + ".
-000209b0: 6874 6d6c 2229 0d0a 2020 2020 2020 2020  html")..        
-000209c0: 2020 2020 2020 2020 7361 7665 203d 2046          save = F
-000209d0: 616c 7365 0d0a 0d0a 2020 2020 2020 2020  alse....        
-000209e0: 2020 2020 6966 2061 6464 5f6c 6179 6572      if add_layer
-000209f0: 5f63 6f6e 7472 6f6c 2061 6e64 2073 656c  _control and sel
-00020a00: 662e 6c61 7965 725f 636f 6e74 726f 6c20  f.layer_control 
-00020a10: 6973 204e 6f6e 653a 0d0a 2020 2020 2020  is None:..      
-00020a20: 2020 2020 2020 2020 2020 6c61 7965 725f            layer_
-00020a30: 636f 6e74 726f 6c20 3d20 6970 796c 6561  control = ipylea
-00020a40: 666c 6574 2e4c 6179 6572 7343 6f6e 7472  flet.LayersContr
-00020a50: 6f6c 2870 6f73 6974 696f 6e3d 2274 6f70  ol(position="top
-00020a60: 7269 6768 7422 290d 0a20 2020 2020 2020  right")..       
-00020a70: 2020 2020 2020 2020 2073 656c 662e 6c61           self.la
-00020a80: 7965 725f 636f 6e74 726f 6c20 3d20 6c61  yer_control = la
-00020a90: 7965 725f 636f 6e74 726f 6c0d 0a20 2020  yer_control..   
-00020aa0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-00020ab0: 662e 6164 645f 636f 6e74 726f 6c28 6c61  f.add_control(la
-00020ac0: 7965 725f 636f 6e74 726f 6c29 0d0a 0d0a  yer_control)....
-00020ad0: 2020 2020 2020 2020 2020 2020 6265 666f              befo
-00020ae0: 7265 5f77 6964 7468 203d 2073 656c 662e  re_width = self.
-00020af0: 6c61 796f 7574 2e77 6964 7468 0d0a 2020  layout.width..  
-00020b00: 2020 2020 2020 2020 2020 6265 666f 7265            before
-00020b10: 5f68 6569 6768 7420 3d20 7365 6c66 2e6c  _height = self.l
-00020b20: 6179 6f75 742e 6865 6967 6874 0d0a 0d0a  ayout.height....
-00020b30: 2020 2020 2020 2020 2020 2020 6966 206e              if n
-00020b40: 6f74 2069 7369 6e73 7461 6e63 6528 7769  ot isinstance(wi
-00020b50: 6474 682c 2073 7472 293a 0d0a 2020 2020  dth, str):..    
-00020b60: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-00020b70: 7428 2277 6964 7468 206d 7573 7420 6265  t("width must be
-00020b80: 2061 2073 7472 696e 672e 2229 0d0a 2020   a string.")..  
-00020b90: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00020ba0: 7475 726e 0d0a 2020 2020 2020 2020 2020  turn..          
-00020bb0: 2020 656c 6966 2077 6964 7468 2e65 6e64    elif width.end
-00020bc0: 7377 6974 6828 2270 7822 2920 6f72 2077  swith("px") or w
-00020bd0: 6964 7468 2e65 6e64 7377 6974 6828 2225  idth.endswith("%
-00020be0: 2229 3a0d 0a20 2020 2020 2020 2020 2020  "):..           
-00020bf0: 2020 2020 2070 6173 730d 0a20 2020 2020       pass..     
-00020c00: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
-00020c10: 2020 2020 2020 2020 2020 2020 2020 7072                pr
-00020c20: 696e 7428 2277 6964 7468 206d 7573 7420  int("width must 
-00020c30: 656e 6420 7769 7468 2070 7820 6f72 2025  end with px or %
-00020c40: 2229 0d0a 2020 2020 2020 2020 2020 2020  ")..            
-00020c50: 2020 2020 7265 7475 726e 0d0a 0d0a 2020      return....  
-00020c60: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
-00020c70: 2069 7369 6e73 7461 6e63 6528 6865 6967   isinstance(heig
-00020c80: 6874 2c20 7374 7229 3a0d 0a20 2020 2020  ht, str):..     
-00020c90: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-00020ca0: 2822 6865 6967 6874 206d 7573 7420 6265  ("height must be
-00020cb0: 2061 2073 7472 696e 672e 2229 0d0a 2020   a string.")..  
-00020cc0: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00020cd0: 7475 726e 0d0a 2020 2020 2020 2020 2020  turn..          
-00020ce0: 2020 656c 6966 206e 6f74 2068 6569 6768    elif not heigh
-00020cf0: 742e 656e 6473 7769 7468 2822 7078 2229  t.endswith("px")
-00020d00: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00020d10: 2020 2070 7269 6e74 2822 6865 6967 6874     print("height
-00020d20: 206d 7573 7420 656e 6420 7769 7468 2070   must end with p
-00020d30: 7822 290d 0a20 2020 2020 2020 2020 2020  x")..           
-00020d40: 2020 2020 2072 6574 7572 6e0d 0a0d 0a20       return.... 
-00020d50: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00020d60: 6c61 796f 7574 2e77 6964 7468 203d 2077  layout.width = w
-00020d70: 6964 7468 0d0a 2020 2020 2020 2020 2020  idth..          
-00020d80: 2020 7365 6c66 2e6c 6179 6f75 742e 6865    self.layout.he
-00020d90: 6967 6874 203d 2068 6569 6768 740d 0a0d  ight = height...
-00020da0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00020db0: 662e 7361 7665 286f 7574 6669 6c65 2c20  f.save(outfile, 
-00020dc0: 7469 746c 653d 7469 746c 652c 202a 2a6b  title=title, **k
-00020dd0: 7761 7267 7329 0d0a 0d0a 2020 2020 2020  wargs)....      
-00020de0: 2020 2020 2020 7365 6c66 2e6c 6179 6f75        self.layou
-00020df0: 742e 7769 6474 6820 3d20 6265 666f 7265  t.width = before
-00020e00: 5f77 6964 7468 0d0a 2020 2020 2020 2020  _width..        
-00020e10: 2020 2020 7365 6c66 2e6c 6179 6f75 742e      self.layout.
-00020e20: 6865 6967 6874 203d 2062 6566 6f72 655f  height = before_
-00020e30: 6865 6967 6874 0d0a 0d0a 2020 2020 2020  height....      
-00020e40: 2020 2020 2020 6966 206e 6f74 2073 6176        if not sav
-00020e50: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-00020e60: 2020 2020 6f75 745f 6874 6d6c 203d 2022      out_html = "
-00020e70: 220d 0a20 2020 2020 2020 2020 2020 2020  "..             
-00020e80: 2020 2077 6974 6820 6f70 656e 286f 7574     with open(out
-00020e90: 6669 6c65 2920 6173 2066 3a0d 0a20 2020  file) as f:..   
-00020ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020eb0: 206c 696e 6573 203d 2066 2e72 6561 646c   lines = f.readl
-00020ec0: 696e 6573 2829 0d0a 2020 2020 2020 2020  ines()..        
-00020ed0: 2020 2020 2020 2020 2020 2020 6f75 745f              out_
-00020ee0: 6874 6d6c 203d 2022 222e 6a6f 696e 286c  html = "".join(l
-00020ef0: 696e 6573 290d 0a20 2020 2020 2020 2020  ines)..         
-00020f00: 2020 2020 2020 206f 732e 7265 6d6f 7665         os.remove
-00020f10: 286f 7574 6669 6c65 290d 0a20 2020 2020  (outfile)..     
-00020f20: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00020f30: 6e20 6f75 745f 6874 6d6c 0d0a 0d0a 2020  n out_html....  
-00020f40: 2020 2020 2020 6578 6365 7074 2045 7863        except Exc
-00020f50: 6570 7469 6f6e 2061 7320 653a 0d0a 2020  eption as e:..  
-00020f60: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-00020f70: 4578 6365 7074 696f 6e28 6529 0d0a 0d0a  Exception(e)....
-00020f80: 2020 2020 6465 6620 746f 5f69 6d61 6765      def to_image
-00020f90: 2873 656c 662c 206f 7574 6669 6c65 3d4e  (self, outfile=N
-00020fa0: 6f6e 652c 206d 6f6e 6974 6f72 3d31 293a  one, monitor=1):
-00020fb0: 0d0a 2020 2020 2020 2020 2222 2253 6176  ..        """Sav
-00020fc0: 6573 2074 6865 206d 6170 2061 7320 6120  es the map as a 
-00020fd0: 504e 4720 6f72 204a 5047 2069 6d61 6765  PNG or JPG image
-00020fe0: 2e0d 0a0d 0a20 2020 2020 2020 2041 7267  .....        Arg
-00020ff0: 733a 0d0a 2020 2020 2020 2020 2020 2020  s:..            
-00021000: 6f75 7466 696c 6520 2873 7472 2c20 6f70  outfile (str, op
-00021010: 7469 6f6e 616c 293a 2054 6865 206f 7574  tional): The out
-00021020: 7075 7420 6669 6c65 2070 6174 6820 746f  put file path to
-00021030: 2074 6865 2069 6d61 6765 2e20 4465 6661   the image. Defa
-00021040: 756c 7473 2074 6f20 4e6f 6e65 2e0d 0a20  ults to None... 
-00021050: 2020 2020 2020 2020 2020 206d 6f6e 6974             monit
-00021060: 6f72 2028 696e 742c 206f 7074 696f 6e61  or (int, optiona
-00021070: 6c29 3a20 5468 6520 6d6f 6e69 746f 7220  l): The monitor 
-00021080: 746f 2074 616b 6520 7468 6520 7363 7265  to take the scre
-00021090: 656e 7368 6f74 2e20 4465 6661 756c 7473  enshot. Defaults
-000210a0: 2074 6f20 312e 0d0a 2020 2020 2020 2020   to 1...        
-000210b0: 2222 220d 0a20 2020 2020 2020 2069 6620  """..        if 
-000210c0: 6f75 7466 696c 6520 6973 204e 6f6e 653a  outfile is None:
-000210d0: 0d0a 2020 2020 2020 2020 2020 2020 6f75  ..            ou
-000210e0: 7466 696c 6520 3d20 6f73 2e70 6174 682e  tfile = os.path.
-000210f0: 6a6f 696e 286f 732e 6765 7463 7764 2829  join(os.getcwd()
-00021100: 2c20 226d 795f 6d61 702e 706e 6722 290d  , "my_map.png").
-00021110: 0a0d 0a20 2020 2020 2020 2069 6620 6f75  ...        if ou
-00021120: 7466 696c 652e 656e 6473 7769 7468 2822  tfile.endswith("
-00021130: 2e70 6e67 2229 206f 7220 6f75 7466 696c  .png") or outfil
-00021140: 652e 656e 6473 7769 7468 2822 2e6a 7067  e.endswith(".jpg
-00021150: 2229 3a0d 0a20 2020 2020 2020 2020 2020  "):..           
-00021160: 2070 6173 730d 0a20 2020 2020 2020 2065   pass..        e
-00021170: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
-00021180: 2020 7072 696e 7428 2254 6865 206f 7574    print("The out
-00021190: 7075 7420 6669 6c65 206d 7573 7420 6265  put file must be
-000211a0: 2061 2050 4e47 206f 7220 4a50 4720 696d   a PNG or JPG im
-000211b0: 6167 652e 2229 0d0a 2020 2020 2020 2020  age.")..        
-000211c0: 2020 2020 7265 7475 726e 0d0a 0d0a 2020      return....  
-000211d0: 2020 2020 2020 776f 726b 5f64 6972 203d        work_dir =
-000211e0: 206f 732e 7061 7468 2e64 6972 6e61 6d65   os.path.dirname
-000211f0: 286f 7574 6669 6c65 290d 0a20 2020 2020  (outfile)..     
-00021200: 2020 2069 6620 6e6f 7420 6f73 2e70 6174     if not os.pat
-00021210: 682e 6578 6973 7473 2877 6f72 6b5f 6469  h.exists(work_di
-00021220: 7229 3a0d 0a20 2020 2020 2020 2020 2020  r):..           
-00021230: 206f 732e 6d61 6b65 6469 7273 2877 6f72   os.makedirs(wor
-00021240: 6b5f 6469 7229 0d0a 0d0a 2020 2020 2020  k_dir)....      
-00021250: 2020 7363 7265 656e 7368 6f74 203d 2073    screenshot = s
-00021260: 6372 6565 6e5f 6361 7074 7572 6528 6f75  creen_capture(ou
-00021270: 7466 696c 652c 206d 6f6e 6974 6f72 290d  tfile, monitor).
-00021280: 0a20 2020 2020 2020 2073 656c 662e 7363  .        self.sc
-00021290: 7265 656e 7368 6f74 203d 2073 6372 6565  reenshot = scree
-000212a0: 6e73 686f 740d 0a0d 0a20 2020 2064 6566  nshot....    def
-000212b0: 2074 6f6f 6c62 6172 5f72 6573 6574 2873   toolbar_reset(s
-000212c0: 656c 6629 3a0d 0a20 2020 2020 2020 2022  elf):..        "
-000212d0: 2222 5265 7365 7420 7468 6520 746f 6f6c  ""Reset the tool
-000212e0: 6261 7220 736f 2074 6861 7420 6e6f 2074  bar so that no t
-000212f0: 6f6f 6c20 6973 2073 656c 6563 7465 642e  ool is selected.
-00021300: 2222 220d 0a20 2020 2020 2020 2074 6f6f  """..        too
-00021310: 6c62 6172 5f67 7269 6420 3d20 7365 6c66  lbar_grid = self
-00021320: 2e74 6f6f 6c62 6172 0d0a 2020 2020 2020  .toolbar..      
-00021330: 2020 666f 7220 746f 6f6c 2069 6e20 746f    for tool in to
-00021340: 6f6c 6261 725f 6772 6964 2e63 6869 6c64  olbar_grid.child
-00021350: 7265 6e3a 0d0a 2020 2020 2020 2020 2020  ren:..          
-00021360: 2020 746f 6f6c 2e76 616c 7565 203d 2046    tool.value = F
-00021370: 616c 7365 0d0a 0d0a 2020 2020 6465 6620  alse....    def 
-00021380: 6164 645f 7261 7374 6572 280d 0a20 2020  add_raster(..   
-00021390: 2020 2020 2073 656c 662c 0d0a 2020 2020       self,..    
-000213a0: 2020 2020 696d 6167 652c 0d0a 2020 2020      image,..    
-000213b0: 2020 2020 6261 6e64 733d 4e6f 6e65 2c0d      bands=None,.
-000213c0: 0a20 2020 2020 2020 206c 6179 6572 5f6e  .        layer_n
-000213d0: 616d 653d 4e6f 6e65 2c0d 0a20 2020 2020  ame=None,..     
-000213e0: 2020 2063 6f6c 6f72 6d61 703d 4e6f 6e65     colormap=None
-000213f0: 2c0d 0a20 2020 2020 2020 2078 5f64 696d  ,..        x_dim
-00021400: 3d22 7822 2c0d 0a20 2020 2020 2020 2079  ="x",..        y
-00021410: 5f64 696d 3d22 7922 2c0d 0a20 2020 2029  _dim="y",..    )
-00021420: 3a0d 0a20 2020 2020 2020 2022 2222 4164  :..        """Ad
-00021430: 6473 2061 206c 6f63 616c 2072 6173 7465  ds a local raste
-00021440: 7220 6461 7461 7365 7420 746f 2074 6865  r dataset to the
-00021450: 206d 6170 2e0d 0a0d 0a20 2020 2020 2020   map.....       
-00021460: 2041 7267 733a 0d0a 2020 2020 2020 2020   Args:..        
-00021470: 2020 2020 696d 6167 6520 2873 7472 293a      image (str):
-00021480: 2054 6865 2069 6d61 6765 2066 696c 6520   The image file 
-00021490: 7061 7468 2e0d 0a20 2020 2020 2020 2020  path...         
-000214a0: 2020 2062 616e 6473 2028 696e 7420 6f72     bands (int or
-000214b0: 206c 6973 742c 206f 7074 696f 6e61 6c29   list, optional)
-000214c0: 3a20 5468 6520 696d 6167 6520 6261 6e64  : The image band
-000214d0: 7320 746f 2075 7365 2e20 4974 2063 616e  s to use. It can
-000214e0: 2062 6520 6569 7468 6572 2061 206e 756d   be either a num
-000214f0: 6265 7220 2865 2e67 2e2c 2031 2920 6f72  ber (e.g., 1) or
-00021500: 2061 206c 6973 7420 2865 2e67 2e2c 205b   a list (e.g., [
-00021510: 332c 2032 2c20 315d 292e 2044 6566 6175  3, 2, 1]). Defau
-00021520: 6c74 7320 746f 204e 6f6e 652e 0d0a 2020  lts to None...  
-00021530: 2020 2020 2020 2020 2020 6c61 7965 725f            layer_
-00021540: 6e61 6d65 2028 7374 722c 206f 7074 696f  name (str, optio
-00021550: 6e61 6c29 3a20 5468 6520 6c61 7965 7220  nal): The layer 
-00021560: 6e61 6d65 2074 6f20 7573 6520 666f 7220  name to use for 
-00021570: 7468 6520 7261 7374 6572 2e20 4465 6661  the raster. Defa
-00021580: 756c 7473 2074 6f20 4e6f 6e65 2e0d 0a20  ults to None... 
-00021590: 2020 2020 2020 2020 2020 2063 6f6c 6f72             color
-000215a0: 6d61 7020 2873 7472 2c20 6f70 7469 6f6e  map (str, option
-000215b0: 616c 293a 2054 6865 206e 616d 6520 6f66  al): The name of
-000215c0: 2074 6865 2063 6f6c 6f72 6d61 7020 746f   the colormap to
-000215d0: 2075 7365 2066 6f72 2074 6865 2072 6173   use for the ras
-000215e0: 7465 722c 2073 7563 6820 6173 2027 6772  ter, such as 'gr
-000215f0: 6179 2720 616e 6420 2774 6572 7261 696e  ay' and 'terrain
-00021600: 272e 204d 6f72 6520 6361 6e20 6265 2066  '. More can be f
-00021610: 6f75 6e64 2061 7420 6874 7470 733a 2f2f  ound at https://
-00021620: 6d61 7470 6c6f 746c 6962 2e6f 7267 2f33  matplotlib.org/3
-00021630: 2e31 2e30 2f74 7574 6f72 6961 6c73 2f63  .1.0/tutorials/c
-00021640: 6f6c 6f72 732f 636f 6c6f 726d 6170 732e  olors/colormaps.
-00021650: 6874 6d6c 2e20 4465 6661 756c 7473 2074  html. Defaults t
-00021660: 6f20 4e6f 6e65 2e0d 0a20 2020 2020 2020  o None...       
-00021670: 2020 2020 2078 5f64 696d 2028 7374 722c       x_dim (str,
-00021680: 206f 7074 696f 6e61 6c29 3a20 5468 6520   optional): The 
-00021690: 7820 6469 6d65 6e73 696f 6e2e 2044 6566  x dimension. Def
-000216a0: 6175 6c74 7320 746f 2027 7827 2e0d 0a20  aults to 'x'... 
-000216b0: 2020 2020 2020 2020 2020 2079 5f64 696d             y_dim
-000216c0: 2028 7374 722c 206f 7074 696f 6e61 6c29   (str, optional)
-000216d0: 3a20 5468 6520 7920 6469 6d65 6e73 696f  : The y dimensio
-000216e0: 6e2e 2044 6566 6175 6c74 7320 746f 2027  n. Defaults to '
-000216f0: 7927 2e0d 0a20 2020 2020 2020 2022 2222  y'...        """
-00021700: 0d0a 2020 2020 2020 2020 7472 793a 0d0a  ..        try:..
-00021710: 2020 2020 2020 2020 2020 2020 696d 706f              impo
-00021720: 7274 2078 6172 7261 795f 6c65 6166 6c65  rt xarray_leafle
-00021730: 740d 0a0d 0a20 2020 2020 2020 2065 7863  t....        exc
-00021740: 6570 7420 4578 6365 7074 696f 6e3a 0d0a  ept Exception:..
-00021750: 2020 2020 2020 2020 2020 2020 2320 696d              # im
-00021760: 706f 7274 2070 6c61 7466 6f72 6d0d 0a20  port platform.. 
-00021770: 2020 2020 2020 2020 2020 2023 2069 6620             # if 
-00021780: 706c 6174 666f 726d 2e73 7973 7465 6d28  platform.system(
-00021790: 2920 213d 2022 5769 6e64 6f77 7322 3a0d  ) != "Windows":.
-000217a0: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
-000217b0: 2020 2023 2069 6e73 7461 6c6c 5f66 726f     # install_fro
-000217c0: 6d5f 6769 7468 7562 280d 0a20 2020 2020  m_github(..     
-000217d0: 2020 2020 2020 2023 2020 2020 2023 2020         #     #  
-000217e0: 2020 2075 726c 3d27 6874 7470 733a 2f2f     url='https://
-000217f0: 6769 7468 7562 2e63 6f6d 2f64 6176 6964  github.com/david
-00021800: 6272 6f63 6861 7274 2f78 6172 7261 795f  brochart/xarray_
-00021810: 6c65 6166 6c65 7427 290d 0a20 2020 2020  leaflet')..     
-00021820: 2020 2020 2020 2023 2020 2020 2063 6865         #     che
-00021830: 636b 5f69 6e73 7461 6c6c 2827 7861 7272  ck_install('xarr
-00021840: 6179 5f6c 6561 666c 6574 2729 0d0a 2020  ay_leaflet')..  
-00021850: 2020 2020 2020 2020 2020 2320 2020 2020            #     
-00021860: 696d 706f 7274 2078 6172 7261 795f 6c65  import xarray_le
-00021870: 6166 6c65 740d 0a20 2020 2020 2020 2020  aflet..         
-00021880: 2020 2023 2065 6c73 653a 0d0a 2020 2020     # else:..    
-00021890: 2020 2020 2020 2020 7261 6973 6520 496d          raise Im
-000218a0: 706f 7274 4572 726f 7228 0d0a 2020 2020  portError(..    
-000218b0: 2020 2020 2020 2020 2020 2020 2259 6f75              "You
-000218c0: 206e 6565 6420 746f 2069 6e73 7461 6c6c   need to install
-000218d0: 2078 6172 7261 795f 6c65 6166 6c65 7420   xarray_leaflet 
-000218e0: 6669 7273 742e 2053 6565 2068 7474 7073  first. See https
-000218f0: 3a2f 2f67 6974 6875 622e 636f 6d2f 6461  ://github.com/da
-00021900: 7669 6462 726f 6368 6172 742f 7861 7272  vidbrochart/xarr
-00021910: 6179 5f6c 6561 666c 6574 220d 0a20 2020  ay_leaflet"..   
-00021920: 2020 2020 2020 2020 2029 0d0a 0d0a 2020           )....  
-00021930: 2020 2020 2020 696d 706f 7274 2077 6172        import war
-00021940: 6e69 6e67 730d 0a0d 0a20 2020 2020 2020  nings....       
-00021950: 2023 2069 6d70 6f72 7420 7861 7272 6179   # import xarray
-00021960: 2061 7320 7872 0d0a 2020 2020 2020 2020   as xr..        
-00021970: 696d 706f 7274 206d 6174 706c 6f74 6c69  import matplotli
-00021980: 622e 7079 706c 6f74 2061 7320 706c 740d  b.pyplot as plt.
-00021990: 0a20 2020 2020 2020 2069 6d70 6f72 7420  .        import 
-000219a0: 6e75 6d70 7920 6173 206e 700d 0a20 2020  numpy as np..   
-000219b0: 2020 2020 2069 6d70 6f72 7420 7269 6f78       import riox
-000219c0: 6172 7261 790d 0a0d 0a20 2020 2020 2020  array....       
-000219d0: 2077 6172 6e69 6e67 732e 7369 6d70 6c65   warnings.simple
-000219e0: 6669 6c74 6572 2822 6967 6e6f 7265 2229  filter("ignore")
-000219f0: 0d0a 0d0a 2020 2020 2020 2020 6966 206e  ....        if n
-00021a00: 6f74 206f 732e 7061 7468 2e65 7869 7374  ot os.path.exist
-00021a10: 7328 696d 6167 6529 3a0d 0a20 2020 2020  s(image):..     
-00021a20: 2020 2020 2020 2070 7269 6e74 2822 5468         print("Th
-00021a30: 6520 696d 6167 6520 6669 6c65 2064 6f65  e image file doe
-00021a40: 7320 6e6f 7420 6578 6973 742e 2229 0d0a  s not exist.")..
-00021a50: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00021a60: 726e 0d0a 0d0a 2020 2020 2020 2020 6966  rn....        if
-00021a70: 2063 6f6c 6f72 6d61 7020 6973 204e 6f6e   colormap is Non
-00021a80: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-00021a90: 636f 6c6f 726d 6170 203d 2070 6c74 2e63  colormap = plt.c
-00021aa0: 6d2e 696e 6665 726e 6f0d 0a0d 0a20 2020  m.inferno....   
-00021ab0: 2020 2020 2069 6620 6c61 7965 725f 6e61       if layer_na
-00021ac0: 6d65 2069 7320 4e6f 6e65 3a0d 0a20 2020  me is None:..   
-00021ad0: 2020 2020 2020 2020 206c 6179 6572 5f6e           layer_n
-00021ae0: 616d 6520 3d20 224c 6179 6572 5f22 202b  ame = "Layer_" +
-00021af0: 2072 616e 646f 6d5f 7374 7269 6e67 2829   random_string()
-00021b00: 0d0a 0d0a 2020 2020 2020 2020 6966 2069  ....        if i
-00021b10: 7369 6e73 7461 6e63 6528 636f 6c6f 726d  sinstance(colorm
-00021b20: 6170 2c20 7374 7229 3a0d 0a20 2020 2020  ap, str):..     
-00021b30: 2020 2020 2020 2063 6f6c 6f72 6d61 7020         colormap 
-00021b40: 3d20 706c 742e 636d 2e67 6574 5f63 6d61  = plt.cm.get_cma
-00021b50: 7028 6e61 6d65 3d63 6f6c 6f72 6d61 7029  p(name=colormap)
-00021b60: 0d0a 0d0a 2020 2020 2020 2020 6461 203d  ....        da =
-00021b70: 2072 696f 7861 7272 6179 2e6f 7065 6e5f   rioxarray.open_
-00021b80: 7261 7374 6572 696f 2869 6d61 6765 2c20  rasterio(image, 
-00021b90: 6d61 736b 6564 3d54 7275 6529 0d0a 0d0a  masked=True)....
-00021ba0: 2020 2020 2020 2020 2320 7072 696e 7428          # print(
-00021bb0: 6461 2e72 696f 2e6e 6f64 6174 6129 0d0a  da.rio.nodata)..
-00021bc0: 0d0a 2020 2020 2020 2020 6d75 6c74 695f  ..        multi_
-00021bd0: 6261 6e64 203d 2046 616c 7365 0d0a 2020  band = False..  
-00021be0: 2020 2020 2020 6966 206c 656e 2864 612e        if len(da.
-00021bf0: 6261 6e64 2920 3e20 313a 0d0a 2020 2020  band) > 1:..    
-00021c00: 2020 2020 2020 2020 6d75 6c74 695f 6261          multi_ba
-00021c10: 6e64 203d 2054 7275 650d 0a20 2020 2020  nd = True..     
-00021c20: 2020 2020 2020 2069 6620 6261 6e64 7320         if bands 
-00021c30: 6973 204e 6f6e 653a 0d0a 2020 2020 2020  is None:..      
-00021c40: 2020 2020 2020 2020 2020 6261 6e64 7320            bands 
-00021c50: 3d20 5b33 2c20 322c 2031 5d0d 0a20 2020  = [3, 2, 1]..   
-00021c60: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
-00021c70: 2020 2020 2020 2020 6261 6e64 7320 3d20          bands = 
-00021c80: 310d 0a0d 0a20 2020 2020 2020 2069 6620  1....        if 
-00021c90: 6d75 6c74 695f 6261 6e64 3a0d 0a20 2020  multi_band:..   
-00021ca0: 2020 2020 2020 2020 2064 6120 3d20 6461           da = da
-00021cb0: 2e72 696f 2e77 7269 7465 5f6e 6f64 6174  .rio.write_nodat
-00021cc0: 6128 3029 0d0a 2020 2020 2020 2020 656c  a(0)..        el
-00021cd0: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
-00021ce0: 2064 6120 3d20 6461 2e72 696f 2e77 7269   da = da.rio.wri
-00021cf0: 7465 5f6e 6f64 6174 6128 6e70 2e6e 616e  te_nodata(np.nan
-00021d00: 290d 0a20 2020 2020 2020 2064 6120 3d20  )..        da = 
-00021d10: 6461 2e73 656c 2862 616e 643d 6261 6e64  da.sel(band=band
-00021d20: 7329 0d0a 0d0a 2020 2020 2020 2020 2320  s)....        # 
-00021d30: 6372 7320 3d20 6461 2e72 696f 2e63 7273  crs = da.rio.crs
-00021d40: 0d0a 2020 2020 2020 2020 2320 6e61 6e20  ..        # nan 
-00021d50: 3d20 6461 2e61 7474 7273 5b27 6e6f 6461  = da.attrs['noda
-00021d60: 7461 7661 6c73 275d 5b30 5d0d 0a20 2020  tavals'][0]..   
-00021d70: 2020 2020 2023 2064 6120 3d20 6461 202f       # da = da /
-00021d80: 2064 612e 6d61 7828 290d 0a20 2020 2020   da.max()..     
-00021d90: 2020 2023 2023 2069 6620 6d75 6c74 695f     # # if multi_
-00021da0: 6261 6e64 3a0d 0a20 2020 2020 2020 2023  band:..        #
-00021db0: 2064 6120 3d20 7872 2e77 6865 7265 2864   da = xr.where(d
-00021dc0: 6120 3d3d 206e 616e 2c20 6e70 2e6e 616e  a == nan, np.nan
-00021dd0: 2c20 6461 290d 0a20 2020 2020 2020 2023  , da)..        #
-00021de0: 2064 6120 3d20 6461 2e72 696f 2e77 7269   da = da.rio.wri
-00021df0: 7465 5f6e 6f64 6174 6128 3029 0d0a 2020  te_nodata(0)..  
-00021e00: 2020 2020 2020 2320 6461 203d 2064 612e        # da = da.
-00021e10: 7269 6f2e 7772 6974 655f 6372 7328 6372  rio.write_crs(cr
-00021e20: 7329 0d0a 0d0a 2020 2020 2020 2020 6966  s)....        if
-00021e30: 206d 756c 7469 5f62 616e 6420 616e 6420   multi_band and 
-00021e40: 7479 7065 2862 616e 6473 2920 3d3d 206c  type(bands) == l
-00021e50: 6973 743a 0d0a 2020 2020 2020 2020 2020  ist:..          
-00021e60: 2020 6c61 7965 7220 3d20 6461 2e6c 6561    layer = da.lea
-00021e70: 666c 6574 2e70 6c6f 7428 7365 6c66 2c20  flet.plot(self, 
-00021e80: 785f 6469 6d3d 785f 6469 6d2c 2079 5f64  x_dim=x_dim, y_d
-00021e90: 696d 3d79 5f64 696d 2c20 7267 625f 6469  im=y_dim, rgb_di
-00021ea0: 6d3d 2262 616e 6422 290d 0a20 2020 2020  m="band")..     
-00021eb0: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
-00021ec0: 2020 2020 2020 6c61 7965 7220 3d20 6461        layer = da
-00021ed0: 2e6c 6561 666c 6574 2e70 6c6f 7428 7365  .leaflet.plot(se
-00021ee0: 6c66 2c20 785f 6469 6d3d 785f 6469 6d2c  lf, x_dim=x_dim,
-00021ef0: 2079 5f64 696d 3d79 5f64 696d 2c20 636f   y_dim=y_dim, co
-00021f00: 6c6f 726d 6170 3d63 6f6c 6f72 6d61 7029  lormap=colormap)
-00021f10: 0d0a 0d0a 2020 2020 2020 2020 6c61 7965  ....        laye
-00021f20: 722e 6e61 6d65 203d 206c 6179 6572 5f6e  r.name = layer_n
-00021f30: 616d 650d 0a0d 0a20 2020 2064 6566 2072  ame....    def r
-00021f40: 656d 6f76 655f 6472 6177 6e5f 6665 6174  emove_drawn_feat
-00021f50: 7572 6573 2873 656c 6629 3a0d 0a20 2020  ures(self):..   
-00021f60: 2020 2020 2022 2222 5265 6d6f 7665 7320       """Removes 
-00021f70: 7573 6572 2d64 7261 776e 2067 656f 6d65  user-drawn geome
-00021f80: 7472 6965 7320 6672 6f6d 2074 6865 206d  tries from the m
-00021f90: 6170 2222 220d 0a20 2020 2020 2020 2069  ap"""..        i
-00021fa0: 6620 7365 6c66 2e64 7261 775f 6c61 7965  f self.draw_laye
-00021fb0: 7220 6973 206e 6f74 204e 6f6e 653a 0d0a  r is not None:..
-00021fc0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00021fd0: 2e72 656d 6f76 655f 6c61 7965 7228 7365  .remove_layer(se
-00021fe0: 6c66 2e64 7261 775f 6c61 7965 7229 0d0a  lf.draw_layer)..
-00021ff0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00022000: 2e64 7261 775f 636f 756e 7420 3d20 300d  .draw_count = 0.
-00022010: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00022020: 662e 6472 6177 5f66 6561 7475 7265 7320  f.draw_features 
-00022030: 3d20 5b5d 0d0a 2020 2020 2020 2020 2020  = []..          
-00022040: 2020 7365 6c66 2e64 7261 775f 6c61 7374    self.draw_last
-00022050: 5f66 6561 7475 7265 203d 204e 6f6e 650d  _feature = None.
-00022060: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00022070: 662e 6472 6177 5f6c 6179 6572 203d 204e  f.draw_layer = N
-00022080: 6f6e 650d 0a20 2020 2020 2020 2020 2020  one..           
-00022090: 2073 656c 662e 6472 6177 5f6c 6173 745f   self.draw_last_
-000220a0: 6a73 6f6e 203d 204e 6f6e 650d 0a20 2020  json = None..   
-000220b0: 2020 2020 2020 2020 2073 656c 662e 6472           self.dr
-000220c0: 6177 5f6c 6173 745f 626f 756e 6473 203d  aw_last_bounds =
-000220d0: 204e 6f6e 650d 0a20 2020 2020 2020 2020   None..         
-000220e0: 2020 2073 656c 662e 7573 6572 5f72 6f69     self.user_roi
-000220f0: 203d 204e 6f6e 650d 0a20 2020 2020 2020   = None..       
-00022100: 2020 2020 2073 656c 662e 7573 6572 5f72       self.user_r
-00022110: 6f69 7320 3d20 4e6f 6e65 0d0a 2020 2020  ois = None..    
-00022120: 2020 2020 2020 2020 7365 6c66 2e63 6861          self.cha
-00022130: 7274 5f76 616c 7565 7320 3d20 5b5d 0d0a  rt_values = []..
-00022140: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00022150: 2e63 6861 7274 5f70 6f69 6e74 7320 3d20  .chart_points = 
-00022160: 5b5d 0d0a 2020 2020 2020 2020 2020 2020  []..            
-00022170: 7365 6c66 2e63 6861 7274 5f6c 6162 656c  self.chart_label
-00022180: 7320 3d20 4e6f 6e65 0d0a 2020 2020 2020  s = None..      
-00022190: 2020 6966 2073 656c 662e 6472 6177 5f63    if self.draw_c
-000221a0: 6f6e 7472 6f6c 2069 7320 6e6f 7420 4e6f  ontrol is not No
-000221b0: 6e65 3a0d 0a20 2020 2020 2020 2020 2020  ne:..           
-000221c0: 2073 656c 662e 6472 6177 5f63 6f6e 7472   self.draw_contr
-000221d0: 6f6c 2e63 6c65 6172 2829 0d0a 0d0a 2020  ol.clear()....  
-000221e0: 2020 6465 6620 7265 6d6f 7665 5f6c 6173    def remove_las
-000221f0: 745f 6472 6177 6e28 7365 6c66 293a 0d0a  t_drawn(self):..
-00022200: 2020 2020 2020 2020 2222 2252 656d 6f76          """Remov
-00022210: 6573 2075 7365 722d 6472 6177 6e20 6765  es user-drawn ge
-00022220: 6f6d 6574 7269 6573 2066 726f 6d20 7468  ometries from th
-00022230: 6520 6d61 7022 2222 0d0a 2020 2020 2020  e map"""..      
-00022240: 2020 6966 2073 656c 662e 6472 6177 5f6c    if self.draw_l
-00022250: 6179 6572 2069 7320 6e6f 7420 4e6f 6e65  ayer is not None
-00022260: 3a0d 0a20 2020 2020 2020 2020 2020 2063  :..            c
-00022270: 6f6c 6c65 6374 696f 6e20 3d20 6565 2e46  ollection = ee.F
-00022280: 6561 7475 7265 436f 6c6c 6563 7469 6f6e  eatureCollection
-00022290: 2873 656c 662e 6472 6177 5f66 6561 7475  (self.draw_featu
-000222a0: 7265 735b 3a2d 315d 290d 0a20 2020 2020  res[:-1])..     
-000222b0: 2020 2020 2020 2065 655f 6472 6177 5f6c         ee_draw_l
-000222c0: 6179 6572 203d 2065 655f 7469 6c65 5f6c  ayer = ee_tile_l
-000222d0: 6179 6572 280d 0a20 2020 2020 2020 2020  ayer(..         
-000222e0: 2020 2020 2020 2063 6f6c 6c65 6374 696f         collectio
-000222f0: 6e2c 207b 2263 6f6c 6f72 223a 2022 626c  n, {"color": "bl
-00022300: 7565 227d 2c20 2244 7261 776e 2046 6561  ue"}, "Drawn Fea
-00022310: 7475 7265 7322 2c20 5472 7565 2c20 302e  tures", True, 0.
-00022320: 350d 0a20 2020 2020 2020 2020 2020 2029  5..            )
-00022330: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
-00022340: 2073 656c 662e 6472 6177 5f63 6f75 6e74   self.draw_count
-00022350: 203d 3d20 313a 0d0a 2020 2020 2020 2020   == 1:..        
-00022360: 2020 2020 2020 2020 7365 6c66 2e72 656d          self.rem
-00022370: 6f76 655f 6472 6177 6e5f 6665 6174 7572  ove_drawn_featur
-00022380: 6573 2829 0d0a 2020 2020 2020 2020 2020  es()..          
-00022390: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
-000223a0: 2020 2020 2020 2020 2073 656c 662e 7375           self.su
-000223b0: 6273 7469 7475 7465 5f6c 6179 6572 2873  bstitute_layer(s
-000223c0: 656c 662e 6472 6177 5f6c 6179 6572 2c20  elf.draw_layer, 
-000223d0: 6565 5f64 7261 775f 6c61 7965 7229 0d0a  ee_draw_layer)..
-000223e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000223f0: 7365 6c66 2e64 7261 775f 6c61 7965 7220  self.draw_layer 
-00022400: 3d20 6565 5f64 7261 775f 6c61 7965 720d  = ee_draw_layer.
-00022410: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00022420: 2073 656c 662e 6472 6177 5f63 6f75 6e74   self.draw_count
-00022430: 202d 3d20 310d 0a20 2020 2020 2020 2020   -= 1..         
-00022440: 2020 2020 2020 2073 656c 662e 6472 6177         self.draw
-00022450: 5f66 6561 7475 7265 7320 3d20 7365 6c66  _features = self
-00022460: 2e64 7261 775f 6665 6174 7572 6573 5b3a  .draw_features[:
-00022470: 2d31 5d0d 0a20 2020 2020 2020 2020 2020  -1]..           
-00022480: 2020 2020 2073 656c 662e 6472 6177 5f6c       self.draw_l
-00022490: 6173 745f 6665 6174 7572 6520 3d20 7365  ast_feature = se
-000224a0: 6c66 2e64 7261 775f 6665 6174 7572 6573  lf.draw_features
-000224b0: 5b2d 315d 0d0a 2020 2020 2020 2020 2020  [-1]..          
-000224c0: 2020 2020 2020 7365 6c66 2e64 7261 775f        self.draw_
-000224d0: 6c61 7965 7220 3d20 6565 5f64 7261 775f  layer = ee_draw_
-000224e0: 6c61 7965 720d 0a20 2020 2020 2020 2020  layer..         
-000224f0: 2020 2020 2020 2073 656c 662e 6472 6177         self.draw
-00022500: 5f6c 6173 745f 6a73 6f6e 203d 204e 6f6e  _last_json = Non
-00022510: 650d 0a20 2020 2020 2020 2020 2020 2020  e..             
-00022520: 2020 2073 656c 662e 6472 6177 5f6c 6173     self.draw_las
-00022530: 745f 626f 756e 6473 203d 204e 6f6e 650d  t_bounds = None.
-00022540: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00022550: 2073 656c 662e 7573 6572 5f72 6f69 203d   self.user_roi =
-00022560: 2065 652e 4665 6174 7572 6528 0d0a 2020   ee.Feature(..  
-00022570: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00022580: 2020 636f 6c6c 6563 7469 6f6e 2e74 6f4c    collection.toL
-00022590: 6973 7428 636f 6c6c 6563 7469 6f6e 2e73  ist(collection.s
-000225a0: 697a 6528 2929 2e67 6574 280d 0a20 2020  ize()).get(..   
-000225b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000225c0: 2020 2020 2063 6f6c 6c65 6374 696f 6e2e       collection.
-000225d0: 7369 7a65 2829 2e73 7562 7472 6163 7428  size().subtract(
-000225e0: 3129 0d0a 2020 2020 2020 2020 2020 2020  1)..            
-000225f0: 2020 2020 2020 2020 290d 0a20 2020 2020          )..     
-00022600: 2020 2020 2020 2020 2020 2029 2e67 656f             ).geo
-00022610: 6d65 7472 7928 290d 0a20 2020 2020 2020  metry()..       
-00022620: 2020 2020 2020 2020 2073 656c 662e 7573           self.us
-00022630: 6572 5f72 6f69 7320 3d20 636f 6c6c 6563  er_rois = collec
-00022640: 7469 6f6e 0d0a 2020 2020 2020 2020 2020  tion..          
-00022650: 2020 2020 2020 7365 6c66 2e63 6861 7274        self.chart
-00022660: 5f76 616c 7565 7320 3d20 7365 6c66 2e63  _values = self.c
-00022670: 6861 7274 5f76 616c 7565 735b 3a2d 315d  hart_values[:-1]
-00022680: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00022690: 2020 7365 6c66 2e63 6861 7274 5f70 6f69    self.chart_poi
-000226a0: 6e74 7320 3d20 7365 6c66 2e63 6861 7274  nts = self.chart
-000226b0: 5f70 6f69 6e74 735b 3a2d 315d 0d0a 2020  _points[:-1]..  
-000226c0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-000226d0: 7365 6c66 2e63 6861 7274 5f6c 6162 656c  self.chart_label
-000226e0: 7320 3d20 4e6f 6e65 0d0a 0d0a 2020 2020  s = None....    
-000226f0: 6465 6620 6578 7472 6163 745f 7661 6c75  def extract_valu
-00022700: 6573 5f74 6f5f 706f 696e 7473 2873 656c  es_to_points(sel
-00022710: 662c 2066 696c 656e 616d 6529 3a0d 0a20  f, filename):.. 
-00022720: 2020 2020 2020 2022 2222 4578 706f 7274         """Export
-00022730: 7320 7069 7865 6c20 7661 6c75 6573 2074  s pixel values t
-00022740: 6f20 6120 6373 7620 6669 6c65 2062 6173  o a csv file bas
-00022750: 6564 206f 6e20 7573 6572 2d64 7261 776e  ed on user-drawn
-00022760: 2067 656f 6d65 7472 6965 732e 0d0a 0d0a   geometries.....
-00022770: 2020 2020 2020 2020 4172 6773 3a0d 0a20          Args:.. 
-00022780: 2020 2020 2020 2020 2020 2066 696c 656e             filen
-00022790: 616d 6520 2873 7472 293a 2054 6865 206f  ame (str): The o
-000227a0: 7574 7075 7420 6669 6c65 2070 6174 6820  utput file path 
-000227b0: 746f 2074 6865 2063 7376 2066 696c 6520  to the csv file 
-000227c0: 6f72 2073 6861 7065 6669 6c65 2e0d 0a20  or shapefile... 
-000227d0: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
-000227e0: 2020 2020 696d 706f 7274 2063 7376 0d0a      import csv..
-000227f0: 0d0a 2020 2020 2020 2020 6669 6c65 6e61  ..        filena
-00022800: 6d65 203d 206f 732e 7061 7468 2e61 6273  me = os.path.abs
-00022810: 7061 7468 2866 696c 656e 616d 6529 0d0a  path(filename)..
-00022820: 2020 2020 2020 2020 616c 6c6f 7765 645f          allowed_
-00022830: 666f 726d 6174 7320 3d20 5b22 6373 7622  formats = ["csv"
-00022840: 2c20 2273 6870 225d 0d0a 2020 2020 2020  , "shp"]..      
-00022850: 2020 6578 7420 3d20 6669 6c65 6e61 6d65    ext = filename
-00022860: 5b2d 333a 5d0d 0a0d 0a20 2020 2020 2020  [-3:]....       
-00022870: 2069 6620 6578 7420 6e6f 7420 696e 2061   if ext not in a
-00022880: 6c6c 6f77 6564 5f66 6f72 6d61 7473 3a0d  llowed_formats:.
-00022890: 0a20 2020 2020 2020 2020 2020 2070 7269  .            pri
-000228a0: 6e74 280d 0a20 2020 2020 2020 2020 2020  nt(..           
-000228b0: 2020 2020 2022 5468 6520 6f75 7470 7574       "The output
-000228c0: 2066 696c 6520 6d75 7374 2062 6520 6f6e   file must be on
-000228d0: 6520 6f66 2074 6865 2066 6f6c 6c6f 7769  e of the followi
-000228e0: 6e67 3a20 7b7d 222e 666f 726d 6174 280d  ng: {}".format(.
-000228f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00022900: 2020 2020 2022 2c20 222e 6a6f 696e 2861       ", ".join(a
-00022910: 6c6c 6f77 6564 5f66 6f72 6d61 7473 290d  llowed_formats).
-00022920: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00022930: 2029 0d0a 2020 2020 2020 2020 2020 2020   )..            
-00022940: 290d 0a20 2020 2020 2020 2020 2020 2072  )..            r
-00022950: 6574 7572 6e0d 0a0d 0a20 2020 2020 2020  eturn....       
-00022960: 206f 7574 5f64 6972 203d 206f 732e 7061   out_dir = os.pa
-00022970: 7468 2e64 6972 6e61 6d65 2866 696c 656e  th.dirname(filen
-00022980: 616d 6529 0d0a 2020 2020 2020 2020 6f75  ame)..        ou
-00022990: 745f 6373 7620 3d20 6669 6c65 6e61 6d65  t_csv = filename
-000229a0: 5b3a 2d33 5d20 2b20 2263 7376 220d 0a20  [:-3] + "csv".. 
-000229b0: 2020 2020 2020 206f 7574 5f73 6870 203d         out_shp =
-000229c0: 2066 696c 656e 616d 655b 3a2d 335d 202b   filename[:-3] +
-000229d0: 2022 7368 7022 0d0a 2020 2020 2020 2020   "shp"..        
-000229e0: 6966 206e 6f74 206f 732e 7061 7468 2e65  if not os.path.e
-000229f0: 7869 7374 7328 6f75 745f 6469 7229 3a0d  xists(out_dir):.
-00022a00: 0a20 2020 2020 2020 2020 2020 206f 732e  .            os.
-00022a10: 6d61 6b65 6469 7273 286f 7574 5f64 6972  makedirs(out_dir
-00022a20: 290d 0a0d 0a20 2020 2020 2020 2063 6f75  )....        cou
-00022a30: 6e74 203d 206c 656e 2873 656c 662e 6368  nt = len(self.ch
-00022a40: 6172 745f 706f 696e 7473 290d 0a20 2020  art_points)..   
-00022a50: 2020 2020 206f 7574 5f6c 6973 7420 3d20       out_list = 
-00022a60: 5b5d 0d0a 2020 2020 2020 2020 6966 2063  []..        if c
-00022a70: 6f75 6e74 203e 2030 3a0d 0a20 2020 2020  ount > 0:..     
-00022a80: 2020 2020 2020 2068 6561 6465 7220 3d20         header = 
-00022a90: 5b22 6964 222c 2022 6c6f 6e67 6974 7564  ["id", "longitud
-00022aa0: 6522 2c20 226c 6174 6974 7564 6522 5d20  e", "latitude"] 
-00022ab0: 2b20 7365 6c66 2e63 6861 7274 5f6c 6162  + self.chart_lab
-00022ac0: 656c 730d 0a20 2020 2020 2020 2020 2020  els..           
-00022ad0: 206f 7574 5f6c 6973 742e 6170 7065 6e64   out_list.append
-00022ae0: 2868 6561 6465 7229 0d0a 0d0a 2020 2020  (header)....    
-00022af0: 2020 2020 2020 2020 666f 7220 6920 696e          for i in
-00022b00: 2072 616e 6765 2830 2c20 636f 756e 7429   range(0, count)
-00022b10: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00022b20: 2020 2069 6420 3d20 6920 2b20 310d 0a20     id = i + 1.. 
-00022b30: 2020 2020 2020 2020 2020 2020 2020 206c                 l
-00022b40: 696e 6520 3d20 5b69 645d 202b 2073 656c  ine = [id] + sel
-00022b50: 662e 6368 6172 745f 706f 696e 7473 5b69  f.chart_points[i
-00022b60: 5d20 2b20 7365 6c66 2e63 6861 7274 5f76  ] + self.chart_v
-00022b70: 616c 7565 735b 695d 0d0a 2020 2020 2020  alues[i]..      
-00022b80: 2020 2020 2020 2020 2020 6f75 745f 6c69            out_li
-00022b90: 7374 2e61 7070 656e 6428 6c69 6e65 290d  st.append(line).
-00022ba0: 0a0d 0a20 2020 2020 2020 2020 2020 2077  ...            w
-00022bb0: 6974 6820 6f70 656e 286f 7574 5f63 7376  ith open(out_csv
-00022bc0: 2c20 2277 222c 206e 6577 6c69 6e65 3d22  , "w", newline="
-00022bd0: 2229 2061 7320 663a 0d0a 2020 2020 2020  ") as f:..      
-00022be0: 2020 2020 2020 2020 2020 7772 6974 6572            writer
-00022bf0: 203d 2063 7376 2e77 7269 7465 7228 6629   = csv.writer(f)
-00022c00: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00022c10: 2020 7772 6974 6572 2e77 7269 7465 726f    writer.writero
-00022c20: 7773 286f 7574 5f6c 6973 7429 0d0a 0d0a  ws(out_list)....
-00022c30: 2020 2020 2020 2020 2020 2020 6966 2065              if e
-00022c40: 7874 203d 3d20 2263 7376 223a 0d0a 2020  xt == "csv":..  
-00022c50: 2020 2020 2020 2020 2020 2020 2020 7072                pr
-00022c60: 696e 7428 6622 5468 6520 6373 7620 6669  int(f"The csv fi
-00022c70: 6c65 2068 6173 2062 6565 6e20 7361 7665  le has been save
-00022c80: 6420 746f 3a20 7b6f 7574 5f63 7376 7d22  d to: {out_csv}"
-00022c90: 290d 0a20 2020 2020 2020 2020 2020 2065  )..            e
-00022ca0: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
-00022cb0: 2020 2020 2020 6373 765f 746f 5f73 6870        csv_to_shp
-00022cc0: 286f 7574 5f63 7376 2c20 6f75 745f 7368  (out_csv, out_sh
-00022cd0: 7029 0d0a 2020 2020 2020 2020 2020 2020  p)..            
-00022ce0: 2020 2020 7072 696e 7428 6622 5468 6520      print(f"The 
-00022cf0: 7368 6170 6566 696c 6520 6861 7320 6265  shapefile has be
-00022d00: 656e 2073 6176 6564 2074 6f3a 207b 6f75  en saved to: {ou
-00022d10: 745f 7368 707d 2229 0d0a 0d0a 2020 2020  t_shp}")....    
-00022d20: 6465 6620 6372 6561 7465 5f76 6973 5f77  def create_vis_w
-00022d30: 6964 6765 7428 7365 6c66 2c20 6c61 7965  idget(self, laye
-00022d40: 725f 6469 6374 293a 0d0a 2020 2020 2020  r_dict):..      
-00022d50: 2020 2222 2243 7265 6174 6520 6120 4755    """Create a GU
-00022d60: 4920 666f 7220 6368 616e 6769 6e67 206c  I for changing l
-00022d70: 6179 6572 2076 6973 7561 6c69 7a61 7469  ayer visualizati
-00022d80: 6f6e 2070 6172 616d 6574 6572 7320 696e  on parameters in
-00022d90: 7465 7261 6374 6976 656c 792e 0d0a 0d0a  teractively.....
-00022da0: 2020 2020 2020 2020 4172 6773 3a0d 0a20          Args:.. 
-00022db0: 2020 2020 2020 2020 2020 206c 6179 6572             layer
-00022dc0: 5f64 6963 7420 2864 6963 7429 3a20 4120  _dict (dict): A 
-00022dd0: 6469 6374 2063 6f6e 7461 696e 6e69 6e67  dict containning
-00022de0: 2069 6e66 6f72 6d61 7469 6f6e 2061 626f   information abo
-00022df0: 7574 2074 6865 206c 6179 6572 2e20 4974  ut the layer. It
-00022e00: 2069 7320 616e 2065 6c65 6d65 6e74 2066   is an element f
-00022e10: 726f 6d20 4d61 702e 6565 5f6c 6179 6572  rom Map.ee_layer
-00022e20: 5f64 6963 742e 0d0a 0d0a 2020 2020 2020  _dict.....      
-00022e30: 2020 5265 7475 726e 733a 0d0a 2020 2020    Returns:..    
-00022e40: 2020 2020 2020 2020 6f62 6a65 6374 3a20          object: 
-00022e50: 416e 2069 7079 7769 6467 6574 2e0d 0a20  An ipywidget... 
-00022e60: 2020 2020 2020 2022 2222 0d0a 0d0a 2020         """....  
-00022e70: 2020 2020 2020 696d 706f 7274 206d 6174        import mat
-00022e80: 706c 6f74 6c69 6220 6173 206d 706c 0d0a  plotlib as mpl..
-00022e90: 2020 2020 2020 2020 696d 706f 7274 206d          import m
-00022ea0: 6174 706c 6f74 6c69 622e 7079 706c 6f74  atplotlib.pyplot
-00022eb0: 2061 7320 706c 740d 0a0d 0a20 2020 2020   as plt....     
-00022ec0: 2020 2065 655f 6f62 6a65 6374 203d 206c     ee_object = l
-00022ed0: 6179 6572 5f64 6963 745b 2265 655f 6f62  ayer_dict["ee_ob
-00022ee0: 6a65 6374 225d 0d0a 2020 2020 2020 2020  ject"]..        
-00022ef0: 6565 5f6c 6179 6572 203d 206c 6179 6572  ee_layer = layer
-00022f00: 5f64 6963 745b 2265 655f 6c61 7965 7222  _dict["ee_layer"
-00022f10: 5d0d 0a20 2020 2020 2020 2076 6973 5f70  ]..        vis_p
-00022f20: 6172 616d 7320 3d20 6c61 7965 725f 6469  arams = layer_di
-00022f30: 6374 5b22 7669 735f 7061 7261 6d73 225d  ct["vis_params"]
-00022f40: 0d0a 0d0a 2020 2020 2020 2020 6c61 7965  ....        laye
-00022f50: 725f 6e61 6d65 203d 2065 655f 6c61 7965  r_name = ee_laye
-00022f60: 722e 6e61 6d65 0d0a 2020 2020 2020 2020  r.name..        
-00022f70: 6c61 7965 725f 6f70 6163 6974 7920 3d20  layer_opacity = 
-00022f80: 6565 5f6c 6179 6572 2e6f 7061 6369 7479  ee_layer.opacity
-00022f90: 0d0a 0d0a 2020 2020 2020 2020 6261 6e64  ....        band
-00022fa0: 5f6e 616d 6573 203d 204e 6f6e 650d 0a20  _names = None.. 
-00022fb0: 2020 2020 2020 206d 696e 5f76 616c 7565         min_value
-00022fc0: 203d 2030 0d0a 2020 2020 2020 2020 6d61   = 0..        ma
-00022fd0: 785f 7661 6c75 6520 3d20 3130 300d 0a20  x_value = 100.. 
-00022fe0: 2020 2020 2020 2073 656c 5f62 616e 6473         sel_bands
-00022ff0: 203d 204e 6f6e 650d 0a20 2020 2020 2020   = None..       
-00023000: 206c 6179 6572 5f70 616c 6574 7465 203d   layer_palette =
-00023010: 205b 5d0d 0a20 2020 2020 2020 206c 6179   []..        lay
-00023020: 6572 5f67 616d 6d61 203d 2031 0d0a 2020  er_gamma = 1..  
-00023030: 2020 2020 2020 6c65 6674 5f76 616c 7565        left_value
-00023040: 203d 2030 0d0a 2020 2020 2020 2020 7269   = 0..        ri
-00023050: 6768 745f 7661 6c75 6520 3d20 3130 3030  ght_value = 1000
-00023060: 300d 0a0d 0a20 2020 2020 2020 2073 656c  0....        sel
-00023070: 662e 636f 6c6f 7262 6172 5f77 6964 6765  f.colorbar_widge
-00023080: 7420 3d20 7769 6467 6574 732e 4f75 7470  t = widgets.Outp
-00023090: 7574 286c 6179 6f75 743d 7769 6467 6574  ut(layout=widget
-000230a0: 732e 4c61 796f 7574 2868 6569 6768 743d  s.Layout(height=
-000230b0: 2236 3070 7822 2929 0d0a 2020 2020 2020  "60px"))..      
-000230c0: 2020 7365 6c66 2e63 6f6c 6f72 6261 725f    self.colorbar_
-000230d0: 6374 726c 203d 2069 7079 6c65 6166 6c65  ctrl = ipyleafle
-000230e0: 742e 5769 6467 6574 436f 6e74 726f 6c28  t.WidgetControl(
-000230f0: 0d0a 2020 2020 2020 2020 2020 2020 7769  ..            wi
-00023100: 6467 6574 3d73 656c 662e 636f 6c6f 7262  dget=self.colorb
-00023110: 6172 5f77 6964 6765 742c 2070 6f73 6974  ar_widget, posit
-00023120: 696f 6e3d 2262 6f74 746f 6d72 6967 6874  ion="bottomright
-00023130: 220d 0a20 2020 2020 2020 2029 0d0a 2020  "..        )..  
-00023140: 2020 2020 2020 7365 6c66 2e61 6464 5f63        self.add_c
-00023150: 6f6e 7472 6f6c 2873 656c 662e 636f 6c6f  ontrol(self.colo
-00023160: 7262 6172 5f63 7472 6c29 0d0a 0d0a 2020  rbar_ctrl)....  
-00023170: 2020 2020 2020 2320 6465 6620 7664 6972        # def vdir
-00023180: 286f 626a 293a 2020 2320 4765 7420 6272  (obj):  # Get br
-00023190: 616e 6361 2063 6f6c 6f72 6d61 7020 6c69  anca colormap li
-000231a0: 7374 0d0a 2020 2020 2020 2020 2320 2020  st..        #   
-000231b0: 2020 7265 7475 726e 205b 7820 666f 7220    return [x for 
-000231c0: 7820 696e 2064 6972 286f 626a 2920 6966  x in dir(obj) if
-000231d0: 206e 6f74 2078 2e73 7461 7274 7377 6974   not x.startswit
-000231e0: 6828 225f 2229 5d0d 0a0d 0a20 2020 2020  h("_")]....     
-000231f0: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-00023200: 2865 655f 6f62 6a65 6374 2c20 6565 2e49  (ee_object, ee.I
-00023210: 6d61 6765 293a 0d0a 2020 2020 2020 2020  mage):..        
-00023220: 2020 2020 6261 6e64 5f6e 616d 6573 203d      band_names =
-00023230: 2065 655f 6f62 6a65 6374 2e62 616e 644e   ee_object.bandN
-00023240: 616d 6573 2829 2e67 6574 496e 666f 2829  ames().getInfo()
-00023250: 0d0a 2020 2020 2020 2020 2020 2020 6261  ..            ba
-00023260: 6e64 5f63 6f75 6e74 203d 206c 656e 2862  nd_count = len(b
-00023270: 616e 645f 6e61 6d65 7329 0d0a 0d0a 2020  and_names)....  
-00023280: 2020 2020 2020 2020 2020 6966 2022 6d69            if "mi
-00023290: 6e22 2069 6e20 7669 735f 7061 7261 6d73  n" in vis_params
-000232a0: 2e6b 6579 7328 293a 0d0a 2020 2020 2020  .keys():..      
-000232b0: 2020 2020 2020 2020 2020 6d69 6e5f 7661            min_va
-000232c0: 6c75 6520 3d20 7669 735f 7061 7261 6d73  lue = vis_params
-000232d0: 5b22 6d69 6e22 5d0d 0a20 2020 2020 2020  ["min"]..       
-000232e0: 2020 2020 2020 2020 2069 6620 6d69 6e5f           if min_
-000232f0: 7661 6c75 6520 3c20 6c65 6674 5f76 616c  value < left_val
-00023300: 7565 3a0d 0a20 2020 2020 2020 2020 2020  ue:..           
-00023310: 2020 2020 2020 2020 206c 6566 745f 7661           left_va
-00023320: 6c75 6520 3d20 6d69 6e5f 7661 6c75 6520  lue = min_value 
-00023330: 2d20 6d61 785f 7661 6c75 650d 0a20 2020  - max_value..   
-00023340: 2020 2020 2020 2020 2069 6620 226d 6178           if "max
-00023350: 2220 696e 2076 6973 5f70 6172 616d 732e  " in vis_params.
-00023360: 6b65 7973 2829 3a0d 0a20 2020 2020 2020  keys():..       
-00023370: 2020 2020 2020 2020 206d 6178 5f76 616c           max_val
-00023380: 7565 203d 2076 6973 5f70 6172 616d 735b  ue = vis_params[
-00023390: 226d 6178 225d 0d0a 2020 2020 2020 2020  "max"]..        
-000233a0: 2020 2020 2020 2020 7269 6768 745f 7661          right_va
-000233b0: 6c75 6520 3d20 3220 2a20 6d61 785f 7661  lue = 2 * max_va
-000233c0: 6c75 650d 0a20 2020 2020 2020 2020 2020  lue..           
-000233d0: 2069 6620 2267 616d 6d61 2220 696e 2076   if "gamma" in v
-000233e0: 6973 5f70 6172 616d 732e 6b65 7973 2829  is_params.keys()
-000233f0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00023400: 2020 206c 6179 6572 5f67 616d 6d61 203d     layer_gamma =
-00023410: 2076 6973 5f70 6172 616d 735b 2267 616d   vis_params["gam
-00023420: 6d61 225d 0d0a 2020 2020 2020 2020 2020  ma"]..          
-00023430: 2020 6966 2022 6261 6e64 7322 2069 6e20    if "bands" in 
-00023440: 7669 735f 7061 7261 6d73 2e6b 6579 7328  vis_params.keys(
-00023450: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-00023460: 2020 2020 7365 6c5f 6261 6e64 7320 3d20      sel_bands = 
-00023470: 7669 735f 7061 7261 6d73 5b22 6261 6e64  vis_params["band
-00023480: 7322 5d0d 0a20 2020 2020 2020 2020 2020  s"]..           
-00023490: 2069 6620 2270 616c 6574 7465 2220 696e   if "palette" in
-000234a0: 2076 6973 5f70 6172 616d 732e 6b65 7973   vis_params.keys
-000234b0: 2829 3a0d 0a20 2020 2020 2020 2020 2020  ():..           
-000234c0: 2020 2020 206c 6179 6572 5f70 616c 6574       layer_palet
-000234d0: 7465 203d 205b 0d0a 2020 2020 2020 2020  te = [..        
-000234e0: 2020 2020 2020 2020 2020 2020 636f 6c6f              colo
-000234f0: 722e 7265 706c 6163 6528 2223 222c 2022  r.replace("#", "
-00023500: 2229 2066 6f72 2063 6f6c 6f72 2069 6e20  ") for color in 
-00023510: 6c69 7374 2876 6973 5f70 6172 616d 735b  list(vis_params[
-00023520: 2270 616c 6574 7465 225d 290d 0a20 2020  "palette"])..   
-00023530: 2020 2020 2020 2020 2020 2020 205d 0d0a               ]..
-00023540: 0d0a 2020 2020 2020 2020 2020 2020 7669  ..            vi
-00023550: 735f 7769 6467 6574 203d 2077 6964 6765  s_widget = widge
-00023560: 7473 2e56 426f 7828 0d0a 2020 2020 2020  ts.VBox(..      
-00023570: 2020 2020 2020 2020 2020 6c61 796f 7574            layout
-00023580: 3d77 6964 6765 7473 2e4c 6179 6f75 7428  =widgets.Layout(
-00023590: 7061 6464 696e 673d 2235 7078 2035 7078  padding="5px 5px
-000235a0: 2035 7078 2038 7078 222c 2077 6964 7468   5px 8px", width
-000235b0: 3d22 3333 3070 7822 290d 0a20 2020 2020  ="330px")..     
-000235c0: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
-000235d0: 2020 2020 2020 6c61 6265 6c20 3d20 7769        label = wi
-000235e0: 6467 6574 732e 4c61 6265 6c28 7661 6c75  dgets.Label(valu
-000235f0: 653d 6622 7b6c 6179 6572 5f6e 616d 657d  e=f"{layer_name}
-00023600: 2076 6973 7561 6c69 7a61 7469 6f6e 2070   visualization p
-00023610: 6172 616d 6574 6572 7322 290d 0a0d 0a20  arameters").... 
-00023620: 2020 2020 2020 2020 2020 2072 6164 696f             radio
-00023630: 3120 3d20 7769 6467 6574 732e 5261 6469  1 = widgets.Radi
-00023640: 6f42 7574 746f 6e73 280d 0a20 2020 2020  oButtons(..     
-00023650: 2020 2020 2020 2020 2020 206f 7074 696f             optio
-00023660: 6e73 3d5b 2231 2062 616e 6420 2847 7261  ns=["1 band (Gra
-00023670: 7973 6361 6c65 2922 5d2c 206c 6179 6f75  yscale)"], layou
-00023680: 743d 7b22 7769 6474 6822 3a20 226d 6178  t={"width": "max
-00023690: 2d63 6f6e 7465 6e74 227d 0d0a 2020 2020  -content"}..    
-000236a0: 2020 2020 2020 2020 290d 0a20 2020 2020          )..     
-000236b0: 2020 2020 2020 2072 6164 696f 3220 3d20         radio2 = 
-000236c0: 7769 6467 6574 732e 5261 6469 6f42 7574  widgets.RadioBut
-000236d0: 746f 6e73 280d 0a20 2020 2020 2020 2020  tons(..         
-000236e0: 2020 2020 2020 206f 7074 696f 6e73 3d5b         options=[
-000236f0: 2233 2062 616e 6473 2028 5247 4229 225d  "3 bands (RGB)"]
-00023700: 2c20 6c61 796f 7574 3d7b 2277 6964 7468  , layout={"width
-00023710: 223a 2022 6d61 782d 636f 6e74 656e 7422  ": "max-content"
-00023720: 7d0d 0a20 2020 2020 2020 2020 2020 2029  }..            )
-00023730: 0d0a 2020 2020 2020 2020 2020 2020 7261  ..            ra
-00023740: 6469 6f31 2e69 6e64 6578 203d 204e 6f6e  dio1.index = Non
-00023750: 650d 0a20 2020 2020 2020 2020 2020 2072  e..            r
-00023760: 6164 696f 322e 696e 6465 7820 3d20 4e6f  adio2.index = No
-00023770: 6e65 0d0a 0d0a 2020 2020 2020 2020 2020  ne....          
-00023780: 2020 6472 6f70 646f 776e 5f77 6964 7468    dropdown_width
-00023790: 203d 2022 3938 7078 220d 0a20 2020 2020   = "98px"..     
-000237a0: 2020 2020 2020 2062 616e 6431 5f64 726f         band1_dro
-000237b0: 7064 6f77 6e20 3d20 7769 6467 6574 732e  pdown = widgets.
-000237c0: 4472 6f70 646f 776e 280d 0a20 2020 2020  Dropdown(..     
-000237d0: 2020 2020 2020 2020 2020 206f 7074 696f             optio
-000237e0: 6e73 3d62 616e 645f 6e61 6d65 732c 0d0a  ns=band_names,..
-000237f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023800: 7661 6c75 653d 6261 6e64 5f6e 616d 6573  value=band_names
-00023810: 5b30 5d2c 0d0a 2020 2020 2020 2020 2020  [0],..          
-00023820: 2020 2020 2020 6c61 796f 7574 3d77 6964        layout=wid
-00023830: 6765 7473 2e4c 6179 6f75 7428 7769 6474  gets.Layout(widt
-00023840: 683d 6472 6f70 646f 776e 5f77 6964 7468  h=dropdown_width
-00023850: 292c 0d0a 2020 2020 2020 2020 2020 2020  ),..            
-00023860: 290d 0a20 2020 2020 2020 2020 2020 2062  )..            b
-00023870: 616e 6432 5f64 726f 7064 6f77 6e20 3d20  and2_dropdown = 
-00023880: 7769 6467 6574 732e 4472 6f70 646f 776e  widgets.Dropdown
-00023890: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
-000238a0: 2020 206f 7074 696f 6e73 3d62 616e 645f     options=band_
-000238b0: 6e61 6d65 732c 0d0a 2020 2020 2020 2020  names,..        
-000238c0: 2020 2020 2020 2020 7661 6c75 653d 6261          value=ba
-000238d0: 6e64 5f6e 616d 6573 5b30 5d2c 0d0a 2020  nd_names[0],..  
-000238e0: 2020 2020 2020 2020 2020 2020 2020 6c61                la
-000238f0: 796f 7574 3d77 6964 6765 7473 2e4c 6179  yout=widgets.Lay
-00023900: 6f75 7428 7769 6474 683d 6472 6f70 646f  out(width=dropdo
-00023910: 776e 5f77 6964 7468 292c 0d0a 2020 2020  wn_width),..    
-00023920: 2020 2020 2020 2020 290d 0a20 2020 2020          )..     
-00023930: 2020 2020 2020 2062 616e 6433 5f64 726f         band3_dro
-00023940: 7064 6f77 6e20 3d20 7769 6467 6574 732e  pdown = widgets.
-00023950: 4472 6f70 646f 776e 280d 0a20 2020 2020  Dropdown(..     
-00023960: 2020 2020 2020 2020 2020 206f 7074 696f             optio
-00023970: 6e73 3d62 616e 645f 6e61 6d65 732c 0d0a  ns=band_names,..
-00023980: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023990: 7661 6c75 653d 6261 6e64 5f6e 616d 6573  value=band_names
-000239a0: 5b30 5d2c 0d0a 2020 2020 2020 2020 2020  [0],..          
-000239b0: 2020 2020 2020 6c61 796f 7574 3d77 6964        layout=wid
-000239c0: 6765 7473 2e4c 6179 6f75 7428 7769 6474  gets.Layout(widt
-000239d0: 683d 6472 6f70 646f 776e 5f77 6964 7468  h=dropdown_width
-000239e0: 292c 0d0a 2020 2020 2020 2020 2020 2020  ),..            
-000239f0: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
-00023a00: 2062 616e 6473 5f68 626f 7820 3d20 7769   bands_hbox = wi
-00023a10: 6467 6574 732e 4842 6f78 2829 0d0a 0d0a  dgets.HBox()....
-00023a20: 2020 2020 2020 2020 2020 2020 6c65 6765              lege
-00023a30: 6e64 5f63 686b 203d 2077 6964 6765 7473  nd_chk = widgets
-00023a40: 2e43 6865 636b 626f 7828 0d0a 2020 2020  .Checkbox(..    
-00023a50: 2020 2020 2020 2020 2020 2020 7661 6c75              valu
-00023a60: 653d 4661 6c73 652c 0d0a 2020 2020 2020  e=False,..      
-00023a70: 2020 2020 2020 2020 2020 6465 7363 7269            descri
-00023a80: 7074 696f 6e3d 224c 6567 656e 6422 2c0d  ption="Legend",.
-00023a90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00023aa0: 2069 6e64 656e 743d 4661 6c73 652c 0d0a   indent=False,..
-00023ab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023ac0: 6c61 796f 7574 3d77 6964 6765 7473 2e4c  layout=widgets.L
-00023ad0: 6179 6f75 7428 7769 6474 683d 2237 3070  ayout(width="70p
-00023ae0: 7822 292c 0d0a 2020 2020 2020 2020 2020  x"),..          
-00023af0: 2020 290d 0a0d 0a20 2020 2020 2020 2020    )....         
-00023b00: 2020 2063 6f6c 6f72 5f70 6963 6b65 7220     color_picker 
-00023b10: 3d20 7769 6467 6574 732e 436f 6c6f 7250  = widgets.ColorP
-00023b20: 6963 6b65 7228 0d0a 2020 2020 2020 2020  icker(..        
-00023b30: 2020 2020 2020 2020 636f 6e63 6973 653d          concise=
-00023b40: 4661 6c73 652c 0d0a 2020 2020 2020 2020  False,..        
-00023b50: 2020 2020 2020 2020 7661 6c75 653d 2223          value="#
-00023b60: 3030 3030 3030 222c 0d0a 2020 2020 2020  000000",..      
-00023b70: 2020 2020 2020 2020 2020 6c61 796f 7574            layout
-00023b80: 3d77 6964 6765 7473 2e4c 6179 6f75 7428  =widgets.Layout(
-00023b90: 7769 6474 683d 2231 3136 7078 2229 2c0d  width="116px"),.
-00023ba0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00023bb0: 2073 7479 6c65 3d7b 2264 6573 6372 6970   style={"descrip
-00023bc0: 7469 6f6e 5f77 6964 7468 223a 2022 696e  tion_width": "in
-00023bd0: 6974 6961 6c22 7d2c 0d0a 2020 2020 2020  itial"},..      
-00023be0: 2020 2020 2020 290d 0a0d 0a20 2020 2020        )....     
-00023bf0: 2020 2020 2020 2061 6464 5f63 6f6c 6f72         add_color
-00023c00: 203d 2077 6964 6765 7473 2e42 7574 746f   = widgets.Butto
-00023c10: 6e28 0d0a 2020 2020 2020 2020 2020 2020  n(..            
-00023c20: 2020 2020 6963 6f6e 3d22 706c 7573 222c      icon="plus",
-00023c30: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00023c40: 2020 746f 6f6c 7469 703d 2241 6464 2061    tooltip="Add a
-00023c50: 2068 6578 2063 6f6c 6f72 2073 7472 696e   hex color strin
-00023c60: 6720 746f 2074 6865 2070 616c 6574 7465  g to the palette
-00023c70: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
-00023c80: 2020 2020 6c61 796f 7574 3d77 6964 6765      layout=widge
-00023c90: 7473 2e4c 6179 6f75 7428 7769 6474 683d  ts.Layout(width=
-00023ca0: 2233 3270 7822 292c 0d0a 2020 2020 2020  "32px"),..      
-00023cb0: 2020 2020 2020 290d 0a0d 0a20 2020 2020        )....     
-00023cc0: 2020 2020 2020 2064 656c 5f63 6f6c 6f72         del_color
-00023cd0: 203d 2077 6964 6765 7473 2e42 7574 746f   = widgets.Butto
-00023ce0: 6e28 0d0a 2020 2020 2020 2020 2020 2020  n(..            
-00023cf0: 2020 2020 6963 6f6e 3d22 6d69 6e75 7322      icon="minus"
+00020400: 2029 0d0a 2020 2020 2020 2020 2020 2020   )..            
+00020410: 2020 2020 6469 7370 6c61 7928 6c69 6e6b      display(link
+00020420: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00020430: 2020 2069 6620 6e64 5f62 616e 6473 2069     if nd_bands i
+00020440: 7320 6e6f 7420 4e6f 6e65 3a0d 0a20 2020  s not None:..   
+00020450: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020460: 206c 696e 6b32 203d 2063 7265 6174 655f   link2 = create_
+00020470: 646f 776e 6c6f 6164 5f6c 696e 6b28 0d0a  download_link(..
+00020480: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020490: 2020 2020 2020 2020 696e 5f6e 645f 6769          in_nd_gi
+000204a0: 662c 0d0a 2020 2020 2020 2020 2020 2020  f,..            
+000204b0: 2020 2020 2020 2020 2020 2020 7469 746c              titl
+000204c0: 653d 2243 6c69 636b 2068 6572 6520 746f  e="Click here to
+000204d0: 2064 6f77 6e6c 6f61 6420 7468 6520 4e6f   download the No
+000204e0: 726d 616c 697a 6564 2044 6966 6665 7265  rmalized Differe
+000204f0: 6e63 6520 496e 6465 7820 7469 6d65 6c61  nce Index timela
+00020500: 7073 653a 2022 2c0d 0a20 2020 2020 2020  pse: ",..       
+00020510: 2020 2020 2020 2020 2020 2020 2029 0d0a               )..
+00020520: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020530: 2020 2020 6469 7370 6c61 7928 6c69 6e6b      display(link
+00020540: 3229 0d0a 0d0a 2020 2020 2020 2020 6578  2)....        ex
+00020550: 6365 7074 2045 7863 6570 7469 6f6e 2061  cept Exception a
+00020560: 7320 653a 0d0a 2020 2020 2020 2020 2020  s e:..          
+00020570: 2020 7261 6973 6520 4578 6365 7074 696f    raise Exceptio
+00020580: 6e28 6529 0d0a 0d0a 2020 2020 6465 6620  n(e)....    def 
+00020590: 746f 5f68 746d 6c28 0d0a 2020 2020 2020  to_html(..      
+000205a0: 2020 7365 6c66 2c0d 0a20 2020 2020 2020    self,..       
+000205b0: 206f 7574 6669 6c65 3d4e 6f6e 652c 0d0a   outfile=None,..
+000205c0: 2020 2020 2020 2020 7469 746c 653d 224d          title="M
+000205d0: 7920 4d61 7022 2c0d 0a20 2020 2020 2020  y Map",..       
+000205e0: 2077 6964 7468 3d22 3130 3025 222c 0d0a   width="100%",..
+000205f0: 2020 2020 2020 2020 6865 6967 6874 3d22          height="
+00020600: 3838 3070 7822 2c0d 0a20 2020 2020 2020  880px",..       
+00020610: 2061 6464 5f6c 6179 6572 5f63 6f6e 7472   add_layer_contr
+00020620: 6f6c 3d54 7275 652c 0d0a 2020 2020 2020  ol=True,..      
+00020630: 2020 2a2a 6b77 6172 6773 2c0d 0a20 2020    **kwargs,..   
+00020640: 2029 3a0d 0a20 2020 2020 2020 2022 2222   ):..        """
+00020650: 5361 7665 7320 7468 6520 6d61 7020 6173  Saves the map as
+00020660: 2061 6e20 4854 4d4c 2066 696c 652e 0d0a   an HTML file...
+00020670: 0d0a 2020 2020 2020 2020 4172 6773 3a0d  ..        Args:.
+00020680: 0a20 2020 2020 2020 2020 2020 206f 7574  .            out
+00020690: 6669 6c65 2028 7374 722c 206f 7074 696f  file (str, optio
+000206a0: 6e61 6c29 3a20 5468 6520 6f75 7470 7574  nal): The output
+000206b0: 2066 696c 6520 7061 7468 2074 6f20 7468   file path to th
+000206c0: 6520 4854 4d4c 2066 696c 652e 0d0a 2020  e HTML file...  
+000206d0: 2020 2020 2020 2020 2020 7469 746c 6520            title 
+000206e0: 2873 7472 2c20 6f70 7469 6f6e 616c 293a  (str, optional):
+000206f0: 2054 6865 2074 6974 6c65 206f 6620 7468   The title of th
+00020700: 6520 4854 4d4c 2066 696c 652e 2044 6566  e HTML file. Def
+00020710: 6175 6c74 7320 746f 2027 4d79 204d 6170  aults to 'My Map
+00020720: 272e 0d0a 2020 2020 2020 2020 2020 2020  '...            
+00020730: 7769 6474 6820 2873 7472 2c20 6f70 7469  width (str, opti
+00020740: 6f6e 616c 293a 2054 6865 2077 6964 7468  onal): The width
+00020750: 206f 6620 7468 6520 6d61 7020 696e 2070   of the map in p
+00020760: 6978 656c 7320 6f72 2070 6572 6365 6e74  ixels or percent
+00020770: 6167 652e 2044 6566 6175 6c74 7320 746f  age. Defaults to
+00020780: 2027 3130 3025 272e 0d0a 2020 2020 2020   '100%'...      
+00020790: 2020 2020 2020 6865 6967 6874 2028 7374        height (st
+000207a0: 722c 206f 7074 696f 6e61 6c29 3a20 5468  r, optional): Th
+000207b0: 6520 6865 6967 6874 206f 6620 7468 6520  e height of the 
+000207c0: 6d61 7020 696e 2070 6978 656c 732e 2044  map in pixels. D
+000207d0: 6566 6175 6c74 7320 746f 2027 3838 3070  efaults to '880p
+000207e0: 7827 2e0d 0a20 2020 2020 2020 2020 2020  x'...           
+000207f0: 2061 6464 5f6c 6179 6572 5f63 6f6e 7472   add_layer_contr
+00020800: 6f6c 2028 626f 6f6c 2c20 6f70 7469 6f6e  ol (bool, option
+00020810: 616c 293a 2057 6865 7468 6572 2074 6f20  al): Whether to 
+00020820: 6164 6420 7468 6520 4c61 7965 7273 436f  add the LayersCo
+00020830: 6e74 726f 6c2e 2044 6566 6175 6c74 7320  ntrol. Defaults 
+00020840: 746f 2054 7275 652e 0d0a 0d0a 2020 2020  to True.....    
+00020850: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+00020860: 2074 7279 3a0d 0a0d 0a20 2020 2020 2020   try:....       
+00020870: 2020 2020 2073 6176 6520 3d20 5472 7565       save = True
+00020880: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
+00020890: 206f 7574 6669 6c65 2069 7320 6e6f 7420   outfile is not 
+000208a0: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
+000208b0: 2020 2020 2020 2069 6620 6e6f 7420 6f75         if not ou
+000208c0: 7466 696c 652e 656e 6473 7769 7468 2822  tfile.endswith("
+000208d0: 2e68 746d 6c22 293a 0d0a 2020 2020 2020  .html"):..      
+000208e0: 2020 2020 2020 2020 2020 2020 2020 7261                ra
+000208f0: 6973 6520 5661 6c75 6545 7272 6f72 2822  ise ValueError("
+00020900: 5468 6520 6f75 7470 7574 2066 696c 6520  The output file 
+00020910: 6578 7465 6e73 696f 6e20 6d75 7374 2062  extension must b
+00020920: 6520 6874 6d6c 2e22 290d 0a20 2020 2020  e html.")..     
+00020930: 2020 2020 2020 2020 2020 206f 7574 6669             outfi
+00020940: 6c65 203d 206f 732e 7061 7468 2e61 6273  le = os.path.abs
+00020950: 7061 7468 286f 7574 6669 6c65 290d 0a20  path(outfile).. 
+00020960: 2020 2020 2020 2020 2020 2020 2020 206f                 o
+00020970: 7574 5f64 6972 203d 206f 732e 7061 7468  ut_dir = os.path
+00020980: 2e64 6972 6e61 6d65 286f 7574 6669 6c65  .dirname(outfile
+00020990: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+000209a0: 2020 2069 6620 6e6f 7420 6f73 2e70 6174     if not os.pat
+000209b0: 682e 6578 6973 7473 286f 7574 5f64 6972  h.exists(out_dir
+000209c0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+000209d0: 2020 2020 2020 2020 6f73 2e6d 616b 6564          os.maked
+000209e0: 6972 7328 6f75 745f 6469 7229 0d0a 2020  irs(out_dir)..  
+000209f0: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
+00020a00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00020a10: 206f 7574 6669 6c65 203d 206f 732e 7061   outfile = os.pa
+00020a20: 7468 2e61 6273 7061 7468 2872 616e 646f  th.abspath(rando
+00020a30: 6d5f 7374 7269 6e67 2829 202b 2022 2e68  m_string() + ".h
+00020a40: 746d 6c22 290d 0a20 2020 2020 2020 2020  tml")..         
+00020a50: 2020 2020 2020 2073 6176 6520 3d20 4661         save = Fa
+00020a60: 6c73 650d 0a0d 0a20 2020 2020 2020 2020  lse....         
+00020a70: 2020 2069 6620 6164 645f 6c61 7965 725f     if add_layer_
+00020a80: 636f 6e74 726f 6c20 616e 6420 7365 6c66  control and self
+00020a90: 2e6c 6179 6572 5f63 6f6e 7472 6f6c 2069  .layer_control i
+00020aa0: 7320 4e6f 6e65 3a0d 0a20 2020 2020 2020  s None:..       
+00020ab0: 2020 2020 2020 2020 206c 6179 6572 5f63           layer_c
+00020ac0: 6f6e 7472 6f6c 203d 2069 7079 6c65 6166  ontrol = ipyleaf
+00020ad0: 6c65 742e 4c61 7965 7273 436f 6e74 726f  let.LayersContro
+00020ae0: 6c28 706f 7369 7469 6f6e 3d22 746f 7072  l(position="topr
+00020af0: 6967 6874 2229 0d0a 2020 2020 2020 2020  ight")..        
+00020b00: 2020 2020 2020 2020 7365 6c66 2e6c 6179          self.lay
+00020b10: 6572 5f63 6f6e 7472 6f6c 203d 206c 6179  er_control = lay
+00020b20: 6572 5f63 6f6e 7472 6f6c 0d0a 2020 2020  er_control..    
+00020b30: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00020b40: 2e61 6464 5f63 6f6e 7472 6f6c 286c 6179  .add_control(lay
+00020b50: 6572 5f63 6f6e 7472 6f6c 290d 0a0d 0a20  er_control).... 
+00020b60: 2020 2020 2020 2020 2020 2062 6566 6f72             befor
+00020b70: 655f 7769 6474 6820 3d20 7365 6c66 2e6c  e_width = self.l
+00020b80: 6179 6f75 742e 7769 6474 680d 0a20 2020  ayout.width..   
+00020b90: 2020 2020 2020 2020 2062 6566 6f72 655f           before_
+00020ba0: 6865 6967 6874 203d 2073 656c 662e 6c61  height = self.la
+00020bb0: 796f 7574 2e68 6569 6768 740d 0a0d 0a20  yout.height.... 
+00020bc0: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
+00020bd0: 7420 6973 696e 7374 616e 6365 2877 6964  t isinstance(wid
+00020be0: 7468 2c20 7374 7229 3a0d 0a20 2020 2020  th, str):..     
+00020bf0: 2020 2020 2020 2020 2020 2070 7269 6e74             print
+00020c00: 2822 7769 6474 6820 6d75 7374 2062 6520  ("width must be 
+00020c10: 6120 7374 7269 6e67 2e22 290d 0a20 2020  a string.")..   
+00020c20: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+00020c30: 7572 6e0d 0a20 2020 2020 2020 2020 2020  urn..           
+00020c40: 2065 6c69 6620 7769 6474 682e 656e 6473   elif width.ends
+00020c50: 7769 7468 2822 7078 2229 206f 7220 7769  with("px") or wi
+00020c60: 6474 682e 656e 6473 7769 7468 2822 2522  dth.endswith("%"
+00020c70: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+00020c80: 2020 2020 7061 7373 0d0a 2020 2020 2020      pass..      
+00020c90: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
+00020ca0: 2020 2020 2020 2020 2020 2020 2070 7269               pri
+00020cb0: 6e74 2822 7769 6474 6820 6d75 7374 2065  nt("width must e
+00020cc0: 6e64 2077 6974 6820 7078 206f 7220 2522  nd with px or %"
+00020cd0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00020ce0: 2020 2072 6574 7572 6e0d 0a0d 0a20 2020     return....   
+00020cf0: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
+00020d00: 6973 696e 7374 616e 6365 2868 6569 6768  isinstance(heigh
+00020d10: 742c 2073 7472 293a 0d0a 2020 2020 2020  t, str):..      
+00020d20: 2020 2020 2020 2020 2020 7072 696e 7428            print(
+00020d30: 2268 6569 6768 7420 6d75 7374 2062 6520  "height must be 
+00020d40: 6120 7374 7269 6e67 2e22 290d 0a20 2020  a string.")..   
+00020d50: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+00020d60: 7572 6e0d 0a20 2020 2020 2020 2020 2020  urn..           
+00020d70: 2065 6c69 6620 6e6f 7420 6865 6967 6874   elif not height
+00020d80: 2e65 6e64 7377 6974 6828 2270 7822 293a  .endswith("px"):
+00020d90: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00020da0: 2020 7072 696e 7428 2268 6569 6768 7420    print("height 
+00020db0: 6d75 7374 2065 6e64 2077 6974 6820 7078  must end with px
+00020dc0: 2229 0d0a 2020 2020 2020 2020 2020 2020  ")..            
+00020dd0: 2020 2020 7265 7475 726e 0d0a 0d0a 2020      return....  
+00020de0: 2020 2020 2020 2020 2020 7365 6c66 2e6c            self.l
+00020df0: 6179 6f75 742e 7769 6474 6820 3d20 7769  ayout.width = wi
+00020e00: 6474 680d 0a20 2020 2020 2020 2020 2020  dth..           
+00020e10: 2073 656c 662e 6c61 796f 7574 2e68 6569   self.layout.hei
+00020e20: 6768 7420 3d20 6865 6967 6874 0d0a 0d0a  ght = height....
+00020e30: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00020e40: 2e73 6176 6528 6f75 7466 696c 652c 2074  .save(outfile, t
+00020e50: 6974 6c65 3d74 6974 6c65 2c20 2a2a 6b77  itle=title, **kw
+00020e60: 6172 6773 290d 0a0d 0a20 2020 2020 2020  args)....       
+00020e70: 2020 2020 2073 656c 662e 6c61 796f 7574       self.layout
+00020e80: 2e77 6964 7468 203d 2062 6566 6f72 655f  .width = before_
+00020e90: 7769 6474 680d 0a20 2020 2020 2020 2020  width..         
+00020ea0: 2020 2073 656c 662e 6c61 796f 7574 2e68     self.layout.h
+00020eb0: 6569 6768 7420 3d20 6265 666f 7265 5f68  eight = before_h
+00020ec0: 6569 6768 740d 0a0d 0a20 2020 2020 2020  eight....       
+00020ed0: 2020 2020 2069 6620 6e6f 7420 7361 7665       if not save
+00020ee0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00020ef0: 2020 206f 7574 5f68 746d 6c20 3d20 2222     out_html = ""
+00020f00: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00020f10: 2020 7769 7468 206f 7065 6e28 6f75 7466    with open(outf
+00020f20: 696c 6529 2061 7320 663a 0d0a 2020 2020  ile) as f:..    
+00020f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020f40: 6c69 6e65 7320 3d20 662e 7265 6164 6c69  lines = f.readli
+00020f50: 6e65 7328 290d 0a20 2020 2020 2020 2020  nes()..         
+00020f60: 2020 2020 2020 2020 2020 206f 7574 5f68             out_h
+00020f70: 746d 6c20 3d20 2222 2e6a 6f69 6e28 6c69  tml = "".join(li
+00020f80: 6e65 7329 0d0a 2020 2020 2020 2020 2020  nes)..          
+00020f90: 2020 2020 2020 6f73 2e72 656d 6f76 6528        os.remove(
+00020fa0: 6f75 7466 696c 6529 0d0a 2020 2020 2020  outfile)..      
+00020fb0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00020fc0: 206f 7574 5f68 746d 6c0d 0a0d 0a20 2020   out_html....   
+00020fd0: 2020 2020 2065 7863 6570 7420 4578 6365       except Exce
+00020fe0: 7074 696f 6e20 6173 2065 3a0d 0a20 2020  ption as e:..   
+00020ff0: 2020 2020 2020 2020 2072 6169 7365 2045           raise E
+00021000: 7863 6570 7469 6f6e 2865 290d 0a0d 0a20  xception(e).... 
+00021010: 2020 2064 6566 2074 6f5f 696d 6167 6528     def to_image(
+00021020: 7365 6c66 2c20 6f75 7466 696c 653d 4e6f  self, outfile=No
+00021030: 6e65 2c20 6d6f 6e69 746f 723d 3129 3a0d  ne, monitor=1):.
+00021040: 0a20 2020 2020 2020 2022 2222 5361 7665  .        """Save
+00021050: 7320 7468 6520 6d61 7020 6173 2061 2050  s the map as a P
+00021060: 4e47 206f 7220 4a50 4720 696d 6167 652e  NG or JPG image.
+00021070: 0d0a 0d0a 2020 2020 2020 2020 4172 6773  ....        Args
+00021080: 3a0d 0a20 2020 2020 2020 2020 2020 206f  :..            o
+00021090: 7574 6669 6c65 2028 7374 722c 206f 7074  utfile (str, opt
+000210a0: 696f 6e61 6c29 3a20 5468 6520 6f75 7470  ional): The outp
+000210b0: 7574 2066 696c 6520 7061 7468 2074 6f20  ut file path to 
+000210c0: 7468 6520 696d 6167 652e 2044 6566 6175  the image. Defau
+000210d0: 6c74 7320 746f 204e 6f6e 652e 0d0a 2020  lts to None...  
+000210e0: 2020 2020 2020 2020 2020 6d6f 6e69 746f            monito
+000210f0: 7220 2869 6e74 2c20 6f70 7469 6f6e 616c  r (int, optional
+00021100: 293a 2054 6865 206d 6f6e 6974 6f72 2074  ): The monitor t
+00021110: 6f20 7461 6b65 2074 6865 2073 6372 6565  o take the scree
+00021120: 6e73 686f 742e 2044 6566 6175 6c74 7320  nshot. Defaults 
+00021130: 746f 2031 2e0d 0a20 2020 2020 2020 2022  to 1...        "
+00021140: 2222 0d0a 2020 2020 2020 2020 6966 206f  ""..        if o
+00021150: 7574 6669 6c65 2069 7320 4e6f 6e65 3a0d  utfile is None:.
+00021160: 0a20 2020 2020 2020 2020 2020 206f 7574  .            out
+00021170: 6669 6c65 203d 206f 732e 7061 7468 2e6a  file = os.path.j
+00021180: 6f69 6e28 6f73 2e67 6574 6377 6428 292c  oin(os.getcwd(),
+00021190: 2022 6d79 5f6d 6170 2e70 6e67 2229 0d0a   "my_map.png")..
+000211a0: 0d0a 2020 2020 2020 2020 6966 206f 7574  ..        if out
+000211b0: 6669 6c65 2e65 6e64 7377 6974 6828 222e  file.endswith(".
+000211c0: 706e 6722 2920 6f72 206f 7574 6669 6c65  png") or outfile
+000211d0: 2e65 6e64 7377 6974 6828 222e 6a70 6722  .endswith(".jpg"
+000211e0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+000211f0: 7061 7373 0d0a 2020 2020 2020 2020 656c  pass..        el
+00021200: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
+00021210: 2070 7269 6e74 2822 5468 6520 6f75 7470   print("The outp
+00021220: 7574 2066 696c 6520 6d75 7374 2062 6520  ut file must be 
+00021230: 6120 504e 4720 6f72 204a 5047 2069 6d61  a PNG or JPG ima
+00021240: 6765 2e22 290d 0a20 2020 2020 2020 2020  ge.")..         
+00021250: 2020 2072 6574 7572 6e0d 0a0d 0a20 2020     return....   
+00021260: 2020 2020 2077 6f72 6b5f 6469 7220 3d20       work_dir = 
+00021270: 6f73 2e70 6174 682e 6469 726e 616d 6528  os.path.dirname(
+00021280: 6f75 7466 696c 6529 0d0a 2020 2020 2020  outfile)..      
+00021290: 2020 6966 206e 6f74 206f 732e 7061 7468    if not os.path
+000212a0: 2e65 7869 7374 7328 776f 726b 5f64 6972  .exists(work_dir
+000212b0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+000212c0: 6f73 2e6d 616b 6564 6972 7328 776f 726b  os.makedirs(work
+000212d0: 5f64 6972 290d 0a0d 0a20 2020 2020 2020  _dir)....       
+000212e0: 2073 6372 6565 6e73 686f 7420 3d20 7363   screenshot = sc
+000212f0: 7265 656e 5f63 6170 7475 7265 286f 7574  reen_capture(out
+00021300: 6669 6c65 2c20 6d6f 6e69 746f 7229 0d0a  file, monitor)..
+00021310: 2020 2020 2020 2020 7365 6c66 2e73 6372          self.scr
+00021320: 6565 6e73 686f 7420 3d20 7363 7265 656e  eenshot = screen
+00021330: 7368 6f74 0d0a 0d0a 2020 2020 6465 6620  shot....    def 
+00021340: 746f 6f6c 6261 725f 7265 7365 7428 7365  toolbar_reset(se
+00021350: 6c66 293a 0d0a 2020 2020 2020 2020 2222  lf):..        ""
+00021360: 2252 6573 6574 2074 6865 2074 6f6f 6c62  "Reset the toolb
+00021370: 6172 2073 6f20 7468 6174 206e 6f20 746f  ar so that no to
+00021380: 6f6c 2069 7320 7365 6c65 6374 6564 2e22  ol is selected."
+00021390: 2222 0d0a 2020 2020 2020 2020 746f 6f6c  ""..        tool
+000213a0: 6261 725f 6772 6964 203d 2073 656c 662e  bar_grid = self.
+000213b0: 746f 6f6c 6261 720d 0a20 2020 2020 2020  toolbar..       
+000213c0: 2066 6f72 2074 6f6f 6c20 696e 2074 6f6f   for tool in too
+000213d0: 6c62 6172 5f67 7269 642e 6368 696c 6472  lbar_grid.childr
+000213e0: 656e 3a0d 0a20 2020 2020 2020 2020 2020  en:..           
+000213f0: 2074 6f6f 6c2e 7661 6c75 6520 3d20 4661   tool.value = Fa
+00021400: 6c73 650d 0a0d 0a20 2020 2064 6566 2061  lse....    def a
+00021410: 6464 5f72 6173 7465 7228 0d0a 2020 2020  dd_raster(..    
+00021420: 2020 2020 7365 6c66 2c0d 0a20 2020 2020      self,..     
+00021430: 2020 2069 6d61 6765 2c0d 0a20 2020 2020     image,..     
+00021440: 2020 2062 616e 6473 3d4e 6f6e 652c 0d0a     bands=None,..
+00021450: 2020 2020 2020 2020 6c61 7965 725f 6e61          layer_na
+00021460: 6d65 3d4e 6f6e 652c 0d0a 2020 2020 2020  me=None,..      
+00021470: 2020 636f 6c6f 726d 6170 3d4e 6f6e 652c    colormap=None,
+00021480: 0d0a 2020 2020 2020 2020 785f 6469 6d3d  ..        x_dim=
+00021490: 2278 222c 0d0a 2020 2020 2020 2020 795f  "x",..        y_
+000214a0: 6469 6d3d 2279 222c 0d0a 2020 2020 293a  dim="y",..    ):
+000214b0: 0d0a 2020 2020 2020 2020 2222 2241 6464  ..        """Add
+000214c0: 7320 6120 6c6f 6361 6c20 7261 7374 6572  s a local raster
+000214d0: 2064 6174 6173 6574 2074 6f20 7468 6520   dataset to the 
+000214e0: 6d61 702e 0d0a 0d0a 2020 2020 2020 2020  map.....        
+000214f0: 4172 6773 3a0d 0a20 2020 2020 2020 2020  Args:..         
+00021500: 2020 2069 6d61 6765 2028 7374 7229 3a20     image (str): 
+00021510: 5468 6520 696d 6167 6520 6669 6c65 2070  The image file p
+00021520: 6174 682e 0d0a 2020 2020 2020 2020 2020  ath...          
+00021530: 2020 6261 6e64 7320 2869 6e74 206f 7220    bands (int or 
+00021540: 6c69 7374 2c20 6f70 7469 6f6e 616c 293a  list, optional):
+00021550: 2054 6865 2069 6d61 6765 2062 616e 6473   The image bands
+00021560: 2074 6f20 7573 652e 2049 7420 6361 6e20   to use. It can 
+00021570: 6265 2065 6974 6865 7220 6120 6e75 6d62  be either a numb
+00021580: 6572 2028 652e 672e 2c20 3129 206f 7220  er (e.g., 1) or 
+00021590: 6120 6c69 7374 2028 652e 672e 2c20 5b33  a list (e.g., [3
+000215a0: 2c20 322c 2031 5d29 2e20 4465 6661 756c  , 2, 1]). Defaul
+000215b0: 7473 2074 6f20 4e6f 6e65 2e0d 0a20 2020  ts to None...   
+000215c0: 2020 2020 2020 2020 206c 6179 6572 5f6e           layer_n
+000215d0: 616d 6520 2873 7472 2c20 6f70 7469 6f6e  ame (str, option
+000215e0: 616c 293a 2054 6865 206c 6179 6572 206e  al): The layer n
+000215f0: 616d 6520 746f 2075 7365 2066 6f72 2074  ame to use for t
+00021600: 6865 2072 6173 7465 722e 2044 6566 6175  he raster. Defau
+00021610: 6c74 7320 746f 204e 6f6e 652e 0d0a 2020  lts to None...  
+00021620: 2020 2020 2020 2020 2020 636f 6c6f 726d            colorm
+00021630: 6170 2028 7374 722c 206f 7074 696f 6e61  ap (str, optiona
+00021640: 6c29 3a20 5468 6520 6e61 6d65 206f 6620  l): The name of 
+00021650: 7468 6520 636f 6c6f 726d 6170 2074 6f20  the colormap to 
+00021660: 7573 6520 666f 7220 7468 6520 7261 7374  use for the rast
+00021670: 6572 2c20 7375 6368 2061 7320 2767 7261  er, such as 'gra
+00021680: 7927 2061 6e64 2027 7465 7272 6169 6e27  y' and 'terrain'
+00021690: 2e20 4d6f 7265 2063 616e 2062 6520 666f  . More can be fo
+000216a0: 756e 6420 6174 2068 7474 7073 3a2f 2f6d  und at https://m
+000216b0: 6174 706c 6f74 6c69 622e 6f72 672f 332e  atplotlib.org/3.
+000216c0: 312e 302f 7475 746f 7269 616c 732f 636f  1.0/tutorials/co
+000216d0: 6c6f 7273 2f63 6f6c 6f72 6d61 7073 2e68  lors/colormaps.h
+000216e0: 746d 6c2e 2044 6566 6175 6c74 7320 746f  tml. Defaults to
+000216f0: 204e 6f6e 652e 0d0a 2020 2020 2020 2020   None...        
+00021700: 2020 2020 785f 6469 6d20 2873 7472 2c20      x_dim (str, 
+00021710: 6f70 7469 6f6e 616c 293a 2054 6865 2078  optional): The x
+00021720: 2064 696d 656e 7369 6f6e 2e20 4465 6661   dimension. Defa
+00021730: 756c 7473 2074 6f20 2778 272e 0d0a 2020  ults to 'x'...  
+00021740: 2020 2020 2020 2020 2020 795f 6469 6d20            y_dim 
+00021750: 2873 7472 2c20 6f70 7469 6f6e 616c 293a  (str, optional):
+00021760: 2054 6865 2079 2064 696d 656e 7369 6f6e   The y dimension
+00021770: 2e20 4465 6661 756c 7473 2074 6f20 2779  . Defaults to 'y
+00021780: 272e 0d0a 2020 2020 2020 2020 2222 220d  '...        """.
+00021790: 0a20 2020 2020 2020 2074 7279 3a0d 0a20  .        try:.. 
+000217a0: 2020 2020 2020 2020 2020 2069 6d70 6f72             impor
+000217b0: 7420 7861 7272 6179 5f6c 6561 666c 6574  t xarray_leaflet
+000217c0: 0d0a 0d0a 2020 2020 2020 2020 6578 6365  ....        exce
+000217d0: 7074 2045 7863 6570 7469 6f6e 3a0d 0a20  pt Exception:.. 
+000217e0: 2020 2020 2020 2020 2020 2023 2069 6d70             # imp
+000217f0: 6f72 7420 706c 6174 666f 726d 0d0a 2020  ort platform..  
+00021800: 2020 2020 2020 2020 2020 2320 6966 2070            # if p
+00021810: 6c61 7466 6f72 6d2e 7379 7374 656d 2829  latform.system()
+00021820: 2021 3d20 2257 696e 646f 7773 223a 0d0a   != "Windows":..
+00021830: 2020 2020 2020 2020 2020 2020 2320 2020              #   
+00021840: 2020 2320 696e 7374 616c 6c5f 6672 6f6d    # install_from
+00021850: 5f67 6974 6875 6228 0d0a 2020 2020 2020  _github(..      
+00021860: 2020 2020 2020 2320 2020 2020 2320 2020        #     #   
+00021870: 2020 7572 6c3d 2768 7474 7073 3a2f 2f67    url='https://g
+00021880: 6974 6875 622e 636f 6d2f 6461 7669 6462  ithub.com/davidb
+00021890: 726f 6368 6172 742f 7861 7272 6179 5f6c  rochart/xarray_l
+000218a0: 6561 666c 6574 2729 0d0a 2020 2020 2020  eaflet')..      
+000218b0: 2020 2020 2020 2320 2020 2020 6368 6563        #     chec
+000218c0: 6b5f 696e 7374 616c 6c28 2778 6172 7261  k_install('xarra
+000218d0: 795f 6c65 6166 6c65 7427 290d 0a20 2020  y_leaflet')..   
+000218e0: 2020 2020 2020 2020 2023 2020 2020 2069           #     i
+000218f0: 6d70 6f72 7420 7861 7272 6179 5f6c 6561  mport xarray_lea
+00021900: 666c 6574 0d0a 2020 2020 2020 2020 2020  flet..          
+00021910: 2020 2320 656c 7365 3a0d 0a20 2020 2020    # else:..     
+00021920: 2020 2020 2020 2072 6169 7365 2049 6d70         raise Imp
+00021930: 6f72 7445 7272 6f72 280d 0a20 2020 2020  ortError(..     
+00021940: 2020 2020 2020 2020 2020 2022 596f 7520             "You 
+00021950: 6e65 6564 2074 6f20 696e 7374 616c 6c20  need to install 
+00021960: 7861 7272 6179 5f6c 6561 666c 6574 2066  xarray_leaflet f
+00021970: 6972 7374 2e20 5365 6520 6874 7470 733a  irst. See https:
+00021980: 2f2f 6769 7468 7562 2e63 6f6d 2f64 6176  //github.com/dav
+00021990: 6964 6272 6f63 6861 7274 2f78 6172 7261  idbrochart/xarra
+000219a0: 795f 6c65 6166 6c65 7422 0d0a 2020 2020  y_leaflet"..    
+000219b0: 2020 2020 2020 2020 290d 0a0d 0a20 2020          )....   
+000219c0: 2020 2020 2069 6d70 6f72 7420 7761 726e       import warn
+000219d0: 696e 6773 0d0a 0d0a 2020 2020 2020 2020  ings....        
+000219e0: 2320 696d 706f 7274 2078 6172 7261 7920  # import xarray 
+000219f0: 6173 2078 720d 0a20 2020 2020 2020 2069  as xr..        i
+00021a00: 6d70 6f72 7420 6d61 7470 6c6f 746c 6962  mport matplotlib
+00021a10: 2e70 7970 6c6f 7420 6173 2070 6c74 0d0a  .pyplot as plt..
+00021a20: 2020 2020 2020 2020 696d 706f 7274 206e          import n
+00021a30: 756d 7079 2061 7320 6e70 0d0a 2020 2020  umpy as np..    
+00021a40: 2020 2020 696d 706f 7274 2072 696f 7861      import rioxa
+00021a50: 7272 6179 0d0a 0d0a 2020 2020 2020 2020  rray....        
+00021a60: 7761 726e 696e 6773 2e73 696d 706c 6566  warnings.simplef
+00021a70: 696c 7465 7228 2269 676e 6f72 6522 290d  ilter("ignore").
+00021a80: 0a0d 0a20 2020 2020 2020 2069 6620 6e6f  ...        if no
+00021a90: 7420 6f73 2e70 6174 682e 6578 6973 7473  t os.path.exists
+00021aa0: 2869 6d61 6765 293a 0d0a 2020 2020 2020  (image):..      
+00021ab0: 2020 2020 2020 7072 696e 7428 2254 6865        print("The
+00021ac0: 2069 6d61 6765 2066 696c 6520 646f 6573   image file does
+00021ad0: 206e 6f74 2065 7869 7374 2e22 290d 0a20   not exist.").. 
+00021ae0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00021af0: 6e0d 0a0d 0a20 2020 2020 2020 2069 6620  n....        if 
+00021b00: 636f 6c6f 726d 6170 2069 7320 4e6f 6e65  colormap is None
+00021b10: 3a0d 0a20 2020 2020 2020 2020 2020 2063  :..            c
+00021b20: 6f6c 6f72 6d61 7020 3d20 706c 742e 636d  olormap = plt.cm
+00021b30: 2e69 6e66 6572 6e6f 0d0a 0d0a 2020 2020  .inferno....    
+00021b40: 2020 2020 6966 206c 6179 6572 5f6e 616d      if layer_nam
+00021b50: 6520 6973 204e 6f6e 653a 0d0a 2020 2020  e is None:..    
+00021b60: 2020 2020 2020 2020 6c61 7965 725f 6e61          layer_na
+00021b70: 6d65 203d 2022 4c61 7965 725f 2220 2b20  me = "Layer_" + 
+00021b80: 7261 6e64 6f6d 5f73 7472 696e 6728 290d  random_string().
+00021b90: 0a0d 0a20 2020 2020 2020 2069 6620 6973  ...        if is
+00021ba0: 696e 7374 616e 6365 2863 6f6c 6f72 6d61  instance(colorma
+00021bb0: 702c 2073 7472 293a 0d0a 2020 2020 2020  p, str):..      
+00021bc0: 2020 2020 2020 636f 6c6f 726d 6170 203d        colormap =
+00021bd0: 2070 6c74 2e63 6d2e 6765 745f 636d 6170   plt.cm.get_cmap
+00021be0: 286e 616d 653d 636f 6c6f 726d 6170 290d  (name=colormap).
+00021bf0: 0a0d 0a20 2020 2020 2020 2064 6120 3d20  ...        da = 
+00021c00: 7269 6f78 6172 7261 792e 6f70 656e 5f72  rioxarray.open_r
+00021c10: 6173 7465 7269 6f28 696d 6167 652c 206d  asterio(image, m
+00021c20: 6173 6b65 643d 5472 7565 290d 0a0d 0a20  asked=True).... 
+00021c30: 2020 2020 2020 2023 2070 7269 6e74 2864         # print(d
+00021c40: 612e 7269 6f2e 6e6f 6461 7461 290d 0a0d  a.rio.nodata)...
+00021c50: 0a20 2020 2020 2020 206d 756c 7469 5f62  .        multi_b
+00021c60: 616e 6420 3d20 4661 6c73 650d 0a20 2020  and = False..   
+00021c70: 2020 2020 2069 6620 6c65 6e28 6461 2e62       if len(da.b
+00021c80: 616e 6429 203e 2031 3a0d 0a20 2020 2020  and) > 1:..     
+00021c90: 2020 2020 2020 206d 756c 7469 5f62 616e         multi_ban
+00021ca0: 6420 3d20 5472 7565 0d0a 2020 2020 2020  d = True..      
+00021cb0: 2020 2020 2020 6966 2062 616e 6473 2069        if bands i
+00021cc0: 7320 4e6f 6e65 3a0d 0a20 2020 2020 2020  s None:..       
+00021cd0: 2020 2020 2020 2020 2062 616e 6473 203d           bands =
+00021ce0: 205b 332c 2032 2c20 315d 0d0a 2020 2020   [3, 2, 1]..    
+00021cf0: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
+00021d00: 2020 2020 2020 2062 616e 6473 203d 2031         bands = 1
+00021d10: 0d0a 0d0a 2020 2020 2020 2020 6966 206d  ....        if m
+00021d20: 756c 7469 5f62 616e 643a 0d0a 2020 2020  ulti_band:..    
+00021d30: 2020 2020 2020 2020 6461 203d 2064 612e          da = da.
+00021d40: 7269 6f2e 7772 6974 655f 6e6f 6461 7461  rio.write_nodata
+00021d50: 2830 290d 0a20 2020 2020 2020 2065 6c73  (0)..        els
+00021d60: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+00021d70: 6461 203d 2064 612e 7269 6f2e 7772 6974  da = da.rio.writ
+00021d80: 655f 6e6f 6461 7461 286e 702e 6e61 6e29  e_nodata(np.nan)
+00021d90: 0d0a 2020 2020 2020 2020 6461 203d 2064  ..        da = d
+00021da0: 612e 7365 6c28 6261 6e64 3d62 616e 6473  a.sel(band=bands
+00021db0: 290d 0a0d 0a20 2020 2020 2020 2023 2063  )....        # c
+00021dc0: 7273 203d 2064 612e 7269 6f2e 6372 730d  rs = da.rio.crs.
+00021dd0: 0a20 2020 2020 2020 2023 206e 616e 203d  .        # nan =
+00021de0: 2064 612e 6174 7472 735b 276e 6f64 6174   da.attrs['nodat
+00021df0: 6176 616c 7327 5d5b 305d 0d0a 2020 2020  avals'][0]..    
+00021e00: 2020 2020 2320 6461 203d 2064 6120 2f20      # da = da / 
+00021e10: 6461 2e6d 6178 2829 0d0a 2020 2020 2020  da.max()..      
+00021e20: 2020 2320 2320 6966 206d 756c 7469 5f62    # # if multi_b
+00021e30: 616e 643a 0d0a 2020 2020 2020 2020 2320  and:..        # 
+00021e40: 6461 203d 2078 722e 7768 6572 6528 6461  da = xr.where(da
+00021e50: 203d 3d20 6e61 6e2c 206e 702e 6e61 6e2c   == nan, np.nan,
+00021e60: 2064 6129 0d0a 2020 2020 2020 2020 2320   da)..        # 
+00021e70: 6461 203d 2064 612e 7269 6f2e 7772 6974  da = da.rio.writ
+00021e80: 655f 6e6f 6461 7461 2830 290d 0a20 2020  e_nodata(0)..   
+00021e90: 2020 2020 2023 2064 6120 3d20 6461 2e72       # da = da.r
+00021ea0: 696f 2e77 7269 7465 5f63 7273 2863 7273  io.write_crs(crs
+00021eb0: 290d 0a0d 0a20 2020 2020 2020 2069 6620  )....        if 
+00021ec0: 6d75 6c74 695f 6261 6e64 2061 6e64 2074  multi_band and t
+00021ed0: 7970 6528 6261 6e64 7329 203d 3d20 6c69  ype(bands) == li
+00021ee0: 7374 3a0d 0a20 2020 2020 2020 2020 2020  st:..           
+00021ef0: 206c 6179 6572 203d 2064 612e 6c65 6166   layer = da.leaf
+00021f00: 6c65 742e 706c 6f74 2873 656c 662c 2078  let.plot(self, x
+00021f10: 5f64 696d 3d78 5f64 696d 2c20 795f 6469  _dim=x_dim, y_di
+00021f20: 6d3d 795f 6469 6d2c 2072 6762 5f64 696d  m=y_dim, rgb_dim
+00021f30: 3d22 6261 6e64 2229 0d0a 2020 2020 2020  ="band")..      
+00021f40: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
+00021f50: 2020 2020 206c 6179 6572 203d 2064 612e       layer = da.
+00021f60: 6c65 6166 6c65 742e 706c 6f74 2873 656c  leaflet.plot(sel
+00021f70: 662c 2078 5f64 696d 3d78 5f64 696d 2c20  f, x_dim=x_dim, 
+00021f80: 795f 6469 6d3d 795f 6469 6d2c 2063 6f6c  y_dim=y_dim, col
+00021f90: 6f72 6d61 703d 636f 6c6f 726d 6170 290d  ormap=colormap).
+00021fa0: 0a0d 0a20 2020 2020 2020 206c 6179 6572  ...        layer
+00021fb0: 2e6e 616d 6520 3d20 6c61 7965 725f 6e61  .name = layer_na
+00021fc0: 6d65 0d0a 0d0a 2020 2020 6465 6620 7265  me....    def re
+00021fd0: 6d6f 7665 5f64 7261 776e 5f66 6561 7475  move_drawn_featu
+00021fe0: 7265 7328 7365 6c66 293a 0d0a 2020 2020  res(self):..    
+00021ff0: 2020 2020 2222 2252 656d 6f76 6573 2075      """Removes u
+00022000: 7365 722d 6472 6177 6e20 6765 6f6d 6574  ser-drawn geomet
+00022010: 7269 6573 2066 726f 6d20 7468 6520 6d61  ries from the ma
+00022020: 7022 2222 0d0a 2020 2020 2020 2020 6966  p"""..        if
+00022030: 2073 656c 662e 6472 6177 5f6c 6179 6572   self.draw_layer
+00022040: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
+00022050: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00022060: 7265 6d6f 7665 5f6c 6179 6572 2873 656c  remove_layer(sel
+00022070: 662e 6472 6177 5f6c 6179 6572 290d 0a20  f.draw_layer).. 
+00022080: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00022090: 6472 6177 5f63 6f75 6e74 203d 2030 0d0a  draw_count = 0..
+000220a0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+000220b0: 2e64 7261 775f 6665 6174 7572 6573 203d  .draw_features =
+000220c0: 205b 5d0d 0a20 2020 2020 2020 2020 2020   []..           
+000220d0: 2073 656c 662e 6472 6177 5f6c 6173 745f   self.draw_last_
+000220e0: 6665 6174 7572 6520 3d20 4e6f 6e65 0d0a  feature = None..
+000220f0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00022100: 2e64 7261 775f 6c61 7965 7220 3d20 4e6f  .draw_layer = No
+00022110: 6e65 0d0a 2020 2020 2020 2020 2020 2020  ne..            
+00022120: 7365 6c66 2e64 7261 775f 6c61 7374 5f6a  self.draw_last_j
+00022130: 736f 6e20 3d20 4e6f 6e65 0d0a 2020 2020  son = None..    
+00022140: 2020 2020 2020 2020 7365 6c66 2e64 7261          self.dra
+00022150: 775f 6c61 7374 5f62 6f75 6e64 7320 3d20  w_last_bounds = 
+00022160: 4e6f 6e65 0d0a 2020 2020 2020 2020 2020  None..          
+00022170: 2020 7365 6c66 2e75 7365 725f 726f 6920    self.user_roi 
+00022180: 3d20 4e6f 6e65 0d0a 2020 2020 2020 2020  = None..        
+00022190: 2020 2020 7365 6c66 2e75 7365 725f 726f      self.user_ro
+000221a0: 6973 203d 204e 6f6e 650d 0a20 2020 2020  is = None..     
+000221b0: 2020 2020 2020 2073 656c 662e 6368 6172         self.char
+000221c0: 745f 7661 6c75 6573 203d 205b 5d0d 0a20  t_values = [].. 
+000221d0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+000221e0: 6368 6172 745f 706f 696e 7473 203d 205b  chart_points = [
+000221f0: 5d0d 0a20 2020 2020 2020 2020 2020 2073  ]..            s
+00022200: 656c 662e 6368 6172 745f 6c61 6265 6c73  elf.chart_labels
+00022210: 203d 204e 6f6e 650d 0a20 2020 2020 2020   = None..       
+00022220: 2069 6620 7365 6c66 2e64 7261 775f 636f   if self.draw_co
+00022230: 6e74 726f 6c20 6973 206e 6f74 204e 6f6e  ntrol is not Non
+00022240: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+00022250: 7365 6c66 2e64 7261 775f 636f 6e74 726f  self.draw_contro
+00022260: 6c2e 636c 6561 7228 290d 0a0d 0a20 2020  l.clear()....   
+00022270: 2064 6566 2072 656d 6f76 655f 6c61 7374   def remove_last
+00022280: 5f64 7261 776e 2873 656c 6629 3a0d 0a20  _drawn(self):.. 
+00022290: 2020 2020 2020 2022 2222 5265 6d6f 7665         """Remove
+000222a0: 7320 7573 6572 2d64 7261 776e 2067 656f  s user-drawn geo
+000222b0: 6d65 7472 6965 7320 6672 6f6d 2074 6865  metries from the
+000222c0: 206d 6170 2222 220d 0a20 2020 2020 2020   map"""..       
+000222d0: 2069 6620 7365 6c66 2e64 7261 775f 6c61   if self.draw_la
+000222e0: 7965 7220 6973 206e 6f74 204e 6f6e 653a  yer is not None:
+000222f0: 0d0a 2020 2020 2020 2020 2020 2020 636f  ..            co
+00022300: 6c6c 6563 7469 6f6e 203d 2065 652e 4665  llection = ee.Fe
+00022310: 6174 7572 6543 6f6c 6c65 6374 696f 6e28  atureCollection(
+00022320: 7365 6c66 2e64 7261 775f 6665 6174 7572  self.draw_featur
+00022330: 6573 5b3a 2d31 5d29 0d0a 2020 2020 2020  es[:-1])..      
+00022340: 2020 2020 2020 6565 5f64 7261 775f 6c61        ee_draw_la
+00022350: 7965 7220 3d20 6565 5f74 696c 655f 6c61  yer = ee_tile_la
+00022360: 7965 7228 0d0a 2020 2020 2020 2020 2020  yer(..          
+00022370: 2020 2020 2020 636f 6c6c 6563 7469 6f6e        collection
+00022380: 2c20 7b22 636f 6c6f 7222 3a20 2262 6c75  , {"color": "blu
+00022390: 6522 7d2c 2022 4472 6177 6e20 4665 6174  e"}, "Drawn Feat
+000223a0: 7572 6573 222c 2054 7275 652c 2030 2e35  ures", True, 0.5
+000223b0: 0d0a 2020 2020 2020 2020 2020 2020 290d  ..            ).
+000223c0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+000223d0: 7365 6c66 2e64 7261 775f 636f 756e 7420  self.draw_count 
+000223e0: 3d3d 2031 3a0d 0a20 2020 2020 2020 2020  == 1:..         
+000223f0: 2020 2020 2020 2073 656c 662e 7265 6d6f         self.remo
+00022400: 7665 5f64 7261 776e 5f66 6561 7475 7265  ve_drawn_feature
+00022410: 7328 290d 0a20 2020 2020 2020 2020 2020  s()..           
+00022420: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
+00022430: 2020 2020 2020 2020 7365 6c66 2e73 7562          self.sub
+00022440: 7374 6974 7574 655f 6c61 7965 7228 7365  stitute_layer(se
+00022450: 6c66 2e64 7261 775f 6c61 7965 722c 2065  lf.draw_layer, e
+00022460: 655f 6472 6177 5f6c 6179 6572 290d 0a20  e_draw_layer).. 
+00022470: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00022480: 656c 662e 6472 6177 5f6c 6179 6572 203d  elf.draw_layer =
+00022490: 2065 655f 6472 6177 5f6c 6179 6572 0d0a   ee_draw_layer..
+000224a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000224b0: 7365 6c66 2e64 7261 775f 636f 756e 7420  self.draw_count 
+000224c0: 2d3d 2031 0d0a 2020 2020 2020 2020 2020  -= 1..          
+000224d0: 2020 2020 2020 7365 6c66 2e64 7261 775f        self.draw_
+000224e0: 6665 6174 7572 6573 203d 2073 656c 662e  features = self.
+000224f0: 6472 6177 5f66 6561 7475 7265 735b 3a2d  draw_features[:-
+00022500: 315d 0d0a 2020 2020 2020 2020 2020 2020  1]..            
+00022510: 2020 2020 7365 6c66 2e64 7261 775f 6c61      self.draw_la
+00022520: 7374 5f66 6561 7475 7265 203d 2073 656c  st_feature = sel
+00022530: 662e 6472 6177 5f66 6561 7475 7265 735b  f.draw_features[
+00022540: 2d31 5d0d 0a20 2020 2020 2020 2020 2020  -1]..           
+00022550: 2020 2020 2073 656c 662e 6472 6177 5f6c       self.draw_l
+00022560: 6179 6572 203d 2065 655f 6472 6177 5f6c  ayer = ee_draw_l
+00022570: 6179 6572 0d0a 2020 2020 2020 2020 2020  ayer..          
+00022580: 2020 2020 2020 7365 6c66 2e64 7261 775f        self.draw_
+00022590: 6c61 7374 5f6a 736f 6e20 3d20 4e6f 6e65  last_json = None
+000225a0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000225b0: 2020 7365 6c66 2e64 7261 775f 6c61 7374    self.draw_last
+000225c0: 5f62 6f75 6e64 7320 3d20 4e6f 6e65 0d0a  _bounds = None..
+000225d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000225e0: 7365 6c66 2e75 7365 725f 726f 6920 3d20  self.user_roi = 
+000225f0: 6565 2e46 6561 7475 7265 280d 0a20 2020  ee.Feature(..   
+00022600: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022610: 2063 6f6c 6c65 6374 696f 6e2e 746f 4c69   collection.toLi
+00022620: 7374 2863 6f6c 6c65 6374 696f 6e2e 7369  st(collection.si
+00022630: 7a65 2829 292e 6765 7428 0d0a 2020 2020  ze()).get(..    
+00022640: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022650: 2020 2020 636f 6c6c 6563 7469 6f6e 2e73      collection.s
+00022660: 697a 6528 292e 7375 6274 7261 6374 2831  ize().subtract(1
+00022670: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00022680: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
+00022690: 2020 2020 2020 2020 2020 292e 6765 6f6d            ).geom
+000226a0: 6574 7279 2829 0d0a 2020 2020 2020 2020  etry()..        
+000226b0: 2020 2020 2020 2020 7365 6c66 2e75 7365          self.use
+000226c0: 725f 726f 6973 203d 2063 6f6c 6c65 6374  r_rois = collect
+000226d0: 696f 6e0d 0a20 2020 2020 2020 2020 2020  ion..           
+000226e0: 2020 2020 2073 656c 662e 6368 6172 745f       self.chart_
+000226f0: 7661 6c75 6573 203d 2073 656c 662e 6368  values = self.ch
+00022700: 6172 745f 7661 6c75 6573 5b3a 2d31 5d0d  art_values[:-1].
+00022710: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00022720: 2073 656c 662e 6368 6172 745f 706f 696e   self.chart_poin
+00022730: 7473 203d 2073 656c 662e 6368 6172 745f  ts = self.chart_
+00022740: 706f 696e 7473 5b3a 2d31 5d0d 0a20 2020  points[:-1]..   
+00022750: 2020 2020 2020 2020 2020 2020 2023 2073               # s
+00022760: 656c 662e 6368 6172 745f 6c61 6265 6c73  elf.chart_labels
+00022770: 203d 204e 6f6e 650d 0a0d 0a20 2020 2064   = None....    d
+00022780: 6566 2065 7874 7261 6374 5f76 616c 7565  ef extract_value
+00022790: 735f 746f 5f70 6f69 6e74 7328 7365 6c66  s_to_points(self
+000227a0: 2c20 6669 6c65 6e61 6d65 293a 0d0a 2020  , filename):..  
+000227b0: 2020 2020 2020 2222 2245 7870 6f72 7473        """Exports
+000227c0: 2070 6978 656c 2076 616c 7565 7320 746f   pixel values to
+000227d0: 2061 2063 7376 2066 696c 6520 6261 7365   a csv file base
+000227e0: 6420 6f6e 2075 7365 722d 6472 6177 6e20  d on user-drawn 
+000227f0: 6765 6f6d 6574 7269 6573 2e0d 0a0d 0a20  geometries..... 
+00022800: 2020 2020 2020 2041 7267 733a 0d0a 2020         Args:..  
+00022810: 2020 2020 2020 2020 2020 6669 6c65 6e61            filena
+00022820: 6d65 2028 7374 7229 3a20 5468 6520 6f75  me (str): The ou
+00022830: 7470 7574 2066 696c 6520 7061 7468 2074  tput file path t
+00022840: 6f20 7468 6520 6373 7620 6669 6c65 206f  o the csv file o
+00022850: 7220 7368 6170 6566 696c 652e 0d0a 2020  r shapefile...  
+00022860: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
+00022870: 2020 2069 6d70 6f72 7420 6373 760d 0a0d     import csv...
+00022880: 0a20 2020 2020 2020 2066 696c 656e 616d  .        filenam
+00022890: 6520 3d20 6f73 2e70 6174 682e 6162 7370  e = os.path.absp
+000228a0: 6174 6828 6669 6c65 6e61 6d65 290d 0a20  ath(filename).. 
+000228b0: 2020 2020 2020 2061 6c6c 6f77 6564 5f66         allowed_f
+000228c0: 6f72 6d61 7473 203d 205b 2263 7376 222c  ormats = ["csv",
+000228d0: 2022 7368 7022 5d0d 0a20 2020 2020 2020   "shp"]..       
+000228e0: 2065 7874 203d 2066 696c 656e 616d 655b   ext = filename[
+000228f0: 2d33 3a5d 0d0a 0d0a 2020 2020 2020 2020  -3:]....        
+00022900: 6966 2065 7874 206e 6f74 2069 6e20 616c  if ext not in al
+00022910: 6c6f 7765 645f 666f 726d 6174 733a 0d0a  lowed_formats:..
+00022920: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+00022930: 7428 0d0a 2020 2020 2020 2020 2020 2020  t(..            
+00022940: 2020 2020 2254 6865 206f 7574 7075 7420      "The output 
+00022950: 6669 6c65 206d 7573 7420 6265 206f 6e65  file must be one
+00022960: 206f 6620 7468 6520 666f 6c6c 6f77 696e   of the followin
+00022970: 673a 207b 7d22 2e66 6f72 6d61 7428 0d0a  g: {}".format(..
+00022980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022990: 2020 2020 222c 2022 2e6a 6f69 6e28 616c      ", ".join(al
+000229a0: 6c6f 7765 645f 666f 726d 6174 7329 0d0a  lowed_formats)..
+000229b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000229c0: 290d 0a20 2020 2020 2020 2020 2020 2029  )..            )
+000229d0: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
+000229e0: 7475 726e 0d0a 0d0a 2020 2020 2020 2020  turn....        
+000229f0: 6f75 745f 6469 7220 3d20 6f73 2e70 6174  out_dir = os.pat
+00022a00: 682e 6469 726e 616d 6528 6669 6c65 6e61  h.dirname(filena
+00022a10: 6d65 290d 0a20 2020 2020 2020 206f 7574  me)..        out
+00022a20: 5f63 7376 203d 2066 696c 656e 616d 655b  _csv = filename[
+00022a30: 3a2d 335d 202b 2022 6373 7622 0d0a 2020  :-3] + "csv"..  
+00022a40: 2020 2020 2020 6f75 745f 7368 7020 3d20        out_shp = 
+00022a50: 6669 6c65 6e61 6d65 5b3a 2d33 5d20 2b20  filename[:-3] + 
+00022a60: 2273 6870 220d 0a20 2020 2020 2020 2069  "shp"..        i
+00022a70: 6620 6e6f 7420 6f73 2e70 6174 682e 6578  f not os.path.ex
+00022a80: 6973 7473 286f 7574 5f64 6972 293a 0d0a  ists(out_dir):..
+00022a90: 2020 2020 2020 2020 2020 2020 6f73 2e6d              os.m
+00022aa0: 616b 6564 6972 7328 6f75 745f 6469 7229  akedirs(out_dir)
+00022ab0: 0d0a 0d0a 2020 2020 2020 2020 636f 756e  ....        coun
+00022ac0: 7420 3d20 6c65 6e28 7365 6c66 2e63 6861  t = len(self.cha
+00022ad0: 7274 5f70 6f69 6e74 7329 0d0a 2020 2020  rt_points)..    
+00022ae0: 2020 2020 6f75 745f 6c69 7374 203d 205b      out_list = [
+00022af0: 5d0d 0a20 2020 2020 2020 2069 6620 636f  ]..        if co
+00022b00: 756e 7420 3e20 303a 0d0a 2020 2020 2020  unt > 0:..      
+00022b10: 2020 2020 2020 6865 6164 6572 203d 205b        header = [
+00022b20: 2269 6422 2c20 226c 6f6e 6769 7475 6465  "id", "longitude
+00022b30: 222c 2022 6c61 7469 7475 6465 225d 202b  ", "latitude"] +
+00022b40: 2073 656c 662e 6368 6172 745f 6c61 6265   self.chart_labe
+00022b50: 6c73 0d0a 2020 2020 2020 2020 2020 2020  ls..            
+00022b60: 6f75 745f 6c69 7374 2e61 7070 656e 6428  out_list.append(
+00022b70: 6865 6164 6572 290d 0a0d 0a20 2020 2020  header)....     
+00022b80: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
+00022b90: 7261 6e67 6528 302c 2063 6f75 6e74 293a  range(0, count):
+00022ba0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00022bb0: 2020 6964 203d 2069 202b 2031 0d0a 2020    id = i + 1..  
+00022bc0: 2020 2020 2020 2020 2020 2020 2020 6c69                li
+00022bd0: 6e65 203d 205b 6964 5d20 2b20 7365 6c66  ne = [id] + self
+00022be0: 2e63 6861 7274 5f70 6f69 6e74 735b 695d  .chart_points[i]
+00022bf0: 202b 2073 656c 662e 6368 6172 745f 7661   + self.chart_va
+00022c00: 6c75 6573 5b69 5d0d 0a20 2020 2020 2020  lues[i]..       
+00022c10: 2020 2020 2020 2020 206f 7574 5f6c 6973           out_lis
+00022c20: 742e 6170 7065 6e64 286c 696e 6529 0d0a  t.append(line)..
+00022c30: 0d0a 2020 2020 2020 2020 2020 2020 7769  ..            wi
+00022c40: 7468 206f 7065 6e28 6f75 745f 6373 762c  th open(out_csv,
+00022c50: 2022 7722 2c20 6e65 776c 696e 653d 2222   "w", newline=""
+00022c60: 2920 6173 2066 3a0d 0a20 2020 2020 2020  ) as f:..       
+00022c70: 2020 2020 2020 2020 2077 7269 7465 7220           writer 
+00022c80: 3d20 6373 762e 7772 6974 6572 2866 290d  = csv.writer(f).
+00022c90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00022ca0: 2077 7269 7465 722e 7772 6974 6572 6f77   writer.writerow
+00022cb0: 7328 6f75 745f 6c69 7374 290d 0a0d 0a20  s(out_list).... 
+00022cc0: 2020 2020 2020 2020 2020 2069 6620 6578             if ex
+00022cd0: 7420 3d3d 2022 6373 7622 3a0d 0a20 2020  t == "csv":..   
+00022ce0: 2020 2020 2020 2020 2020 2020 2070 7269               pri
+00022cf0: 6e74 2866 2254 6865 2063 7376 2066 696c  nt(f"The csv fil
+00022d00: 6520 6861 7320 6265 656e 2073 6176 6564  e has been saved
+00022d10: 2074 6f3a 207b 6f75 745f 6373 767d 2229   to: {out_csv}")
+00022d20: 0d0a 2020 2020 2020 2020 2020 2020 656c  ..            el
+00022d30: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
+00022d40: 2020 2020 2063 7376 5f74 6f5f 7368 7028       csv_to_shp(
+00022d50: 6f75 745f 6373 762c 206f 7574 5f73 6870  out_csv, out_shp
+00022d60: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00022d70: 2020 2070 7269 6e74 2866 2254 6865 2073     print(f"The s
+00022d80: 6861 7065 6669 6c65 2068 6173 2062 6565  hapefile has bee
+00022d90: 6e20 7361 7665 6420 746f 3a20 7b6f 7574  n saved to: {out
+00022da0: 5f73 6870 7d22 290d 0a0d 0a20 2020 2064  _shp}")....    d
+00022db0: 6566 2063 7265 6174 655f 7669 735f 7769  ef create_vis_wi
+00022dc0: 6467 6574 2873 656c 662c 206c 6179 6572  dget(self, layer
+00022dd0: 5f64 6963 7429 3a0d 0a20 2020 2020 2020  _dict):..       
+00022de0: 2022 2222 4372 6561 7465 2061 2047 5549   """Create a GUI
+00022df0: 2066 6f72 2063 6861 6e67 696e 6720 6c61   for changing la
+00022e00: 7965 7220 7669 7375 616c 697a 6174 696f  yer visualizatio
+00022e10: 6e20 7061 7261 6d65 7465 7273 2069 6e74  n parameters int
+00022e20: 6572 6163 7469 7665 6c79 2e0d 0a0d 0a20  eractively..... 
+00022e30: 2020 2020 2020 2041 7267 733a 0d0a 2020         Args:..  
+00022e40: 2020 2020 2020 2020 2020 6c61 7965 725f            layer_
+00022e50: 6469 6374 2028 6469 6374 293a 2041 2064  dict (dict): A d
+00022e60: 6963 7420 636f 6e74 6169 6e6e 696e 6720  ict containning 
+00022e70: 696e 666f 726d 6174 696f 6e20 6162 6f75  information abou
+00022e80: 7420 7468 6520 6c61 7965 722e 2049 7420  t the layer. It 
+00022e90: 6973 2061 6e20 656c 656d 656e 7420 6672  is an element fr
+00022ea0: 6f6d 204d 6170 2e65 655f 6c61 7965 725f  om Map.ee_layer_
+00022eb0: 6469 6374 2e0d 0a0d 0a20 2020 2020 2020  dict.....       
+00022ec0: 2052 6574 7572 6e73 3a0d 0a20 2020 2020   Returns:..     
+00022ed0: 2020 2020 2020 206f 626a 6563 743a 2041         object: A
+00022ee0: 6e20 6970 7977 6964 6765 742e 0d0a 2020  n ipywidget...  
+00022ef0: 2020 2020 2020 2222 220d 0a0d 0a20 2020        """....   
+00022f00: 2020 2020 2069 6d70 6f72 7420 6d61 7470       import matp
+00022f10: 6c6f 746c 6962 2061 7320 6d70 6c0d 0a20  lotlib as mpl.. 
+00022f20: 2020 2020 2020 2069 6d70 6f72 7420 6d61         import ma
+00022f30: 7470 6c6f 746c 6962 2e70 7970 6c6f 7420  tplotlib.pyplot 
+00022f40: 6173 2070 6c74 0d0a 0d0a 2020 2020 2020  as plt....      
+00022f50: 2020 6565 5f6f 626a 6563 7420 3d20 6c61    ee_object = la
+00022f60: 7965 725f 6469 6374 5b22 6565 5f6f 626a  yer_dict["ee_obj
+00022f70: 6563 7422 5d0d 0a20 2020 2020 2020 2065  ect"]..        e
+00022f80: 655f 6c61 7965 7220 3d20 6c61 7965 725f  e_layer = layer_
+00022f90: 6469 6374 5b22 6565 5f6c 6179 6572 225d  dict["ee_layer"]
+00022fa0: 0d0a 2020 2020 2020 2020 7669 735f 7061  ..        vis_pa
+00022fb0: 7261 6d73 203d 206c 6179 6572 5f64 6963  rams = layer_dic
+00022fc0: 745b 2276 6973 5f70 6172 616d 7322 5d0d  t["vis_params"].
+00022fd0: 0a0d 0a20 2020 2020 2020 206c 6179 6572  ...        layer
+00022fe0: 5f6e 616d 6520 3d20 6565 5f6c 6179 6572  _name = ee_layer
+00022ff0: 2e6e 616d 650d 0a20 2020 2020 2020 206c  .name..        l
+00023000: 6179 6572 5f6f 7061 6369 7479 203d 2065  ayer_opacity = e
+00023010: 655f 6c61 7965 722e 6f70 6163 6974 790d  e_layer.opacity.
+00023020: 0a0d 0a20 2020 2020 2020 2062 616e 645f  ...        band_
+00023030: 6e61 6d65 7320 3d20 4e6f 6e65 0d0a 2020  names = None..  
+00023040: 2020 2020 2020 6d69 6e5f 7661 6c75 6520        min_value 
+00023050: 3d20 300d 0a20 2020 2020 2020 206d 6178  = 0..        max
+00023060: 5f76 616c 7565 203d 2031 3030 0d0a 2020  _value = 100..  
+00023070: 2020 2020 2020 7365 6c5f 6261 6e64 7320        sel_bands 
+00023080: 3d20 4e6f 6e65 0d0a 2020 2020 2020 2020  = None..        
+00023090: 6c61 7965 725f 7061 6c65 7474 6520 3d20  layer_palette = 
+000230a0: 5b5d 0d0a 2020 2020 2020 2020 6c61 7965  []..        laye
+000230b0: 725f 6761 6d6d 6120 3d20 310d 0a20 2020  r_gamma = 1..   
+000230c0: 2020 2020 206c 6566 745f 7661 6c75 6520       left_value 
+000230d0: 3d20 300d 0a20 2020 2020 2020 2072 6967  = 0..        rig
+000230e0: 6874 5f76 616c 7565 203d 2031 3030 3030  ht_value = 10000
+000230f0: 0d0a 0d0a 2020 2020 2020 2020 7365 6c66  ....        self
+00023100: 2e63 6f6c 6f72 6261 725f 7769 6467 6574  .colorbar_widget
+00023110: 203d 2077 6964 6765 7473 2e4f 7574 7075   = widgets.Outpu
+00023120: 7428 6c61 796f 7574 3d77 6964 6765 7473  t(layout=widgets
+00023130: 2e4c 6179 6f75 7428 6865 6967 6874 3d22  .Layout(height="
+00023140: 3630 7078 2229 290d 0a20 2020 2020 2020  60px"))..       
+00023150: 2073 656c 662e 636f 6c6f 7262 6172 5f63   self.colorbar_c
+00023160: 7472 6c20 3d20 6970 796c 6561 666c 6574  trl = ipyleaflet
+00023170: 2e57 6964 6765 7443 6f6e 7472 6f6c 280d  .WidgetControl(.
+00023180: 0a20 2020 2020 2020 2020 2020 2077 6964  .            wid
+00023190: 6765 743d 7365 6c66 2e63 6f6c 6f72 6261  get=self.colorba
+000231a0: 725f 7769 6467 6574 2c20 706f 7369 7469  r_widget, positi
+000231b0: 6f6e 3d22 626f 7474 6f6d 7269 6768 7422  on="bottomright"
+000231c0: 0d0a 2020 2020 2020 2020 290d 0a20 2020  ..        )..   
+000231d0: 2020 2020 2073 656c 662e 6164 645f 636f       self.add_co
+000231e0: 6e74 726f 6c28 7365 6c66 2e63 6f6c 6f72  ntrol(self.color
+000231f0: 6261 725f 6374 726c 290d 0a0d 0a20 2020  bar_ctrl)....   
+00023200: 2020 2020 2023 2064 6566 2076 6469 7228       # def vdir(
+00023210: 6f62 6a29 3a20 2023 2047 6574 2062 7261  obj):  # Get bra
+00023220: 6e63 6120 636f 6c6f 726d 6170 206c 6973  nca colormap lis
+00023230: 740d 0a20 2020 2020 2020 2023 2020 2020  t..        #    
+00023240: 2072 6574 7572 6e20 5b78 2066 6f72 2078   return [x for x
+00023250: 2069 6e20 6469 7228 6f62 6a29 2069 6620   in dir(obj) if 
+00023260: 6e6f 7420 782e 7374 6172 7473 7769 7468  not x.startswith
+00023270: 2822 5f22 295d 0d0a 0d0a 2020 2020 2020  ("_")]....      
+00023280: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+00023290: 6565 5f6f 626a 6563 742c 2065 652e 496d  ee_object, ee.Im
+000232a0: 6167 6529 3a0d 0a20 2020 2020 2020 2020  age):..         
+000232b0: 2020 2062 616e 645f 6e61 6d65 7320 3d20     band_names = 
+000232c0: 6565 5f6f 626a 6563 742e 6261 6e64 4e61  ee_object.bandNa
+000232d0: 6d65 7328 292e 6765 7449 6e66 6f28 290d  mes().getInfo().
+000232e0: 0a20 2020 2020 2020 2020 2020 2062 616e  .            ban
+000232f0: 645f 636f 756e 7420 3d20 6c65 6e28 6261  d_count = len(ba
+00023300: 6e64 5f6e 616d 6573 290d 0a0d 0a20 2020  nd_names)....   
+00023310: 2020 2020 2020 2020 2069 6620 226d 696e           if "min
+00023320: 2220 696e 2076 6973 5f70 6172 616d 732e  " in vis_params.
+00023330: 6b65 7973 2829 3a0d 0a20 2020 2020 2020  keys():..       
+00023340: 2020 2020 2020 2020 206d 696e 5f76 616c           min_val
+00023350: 7565 203d 2076 6973 5f70 6172 616d 735b  ue = vis_params[
+00023360: 226d 696e 225d 0d0a 2020 2020 2020 2020  "min"]..        
+00023370: 2020 2020 2020 2020 6966 206d 696e 5f76          if min_v
+00023380: 616c 7565 203c 206c 6566 745f 7661 6c75  alue < left_valu
+00023390: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+000233a0: 2020 2020 2020 2020 6c65 6674 5f76 616c          left_val
+000233b0: 7565 203d 206d 696e 5f76 616c 7565 202d  ue = min_value -
+000233c0: 206d 6178 5f76 616c 7565 0d0a 2020 2020   max_value..    
+000233d0: 2020 2020 2020 2020 6966 2022 6d61 7822          if "max"
+000233e0: 2069 6e20 7669 735f 7061 7261 6d73 2e6b   in vis_params.k
+000233f0: 6579 7328 293a 0d0a 2020 2020 2020 2020  eys():..        
+00023400: 2020 2020 2020 2020 6d61 785f 7661 6c75          max_valu
+00023410: 6520 3d20 7669 735f 7061 7261 6d73 5b22  e = vis_params["
+00023420: 6d61 7822 5d0d 0a20 2020 2020 2020 2020  max"]..         
+00023430: 2020 2020 2020 2072 6967 6874 5f76 616c         right_val
+00023440: 7565 203d 2032 202a 206d 6178 5f76 616c  ue = 2 * max_val
+00023450: 7565 0d0a 2020 2020 2020 2020 2020 2020  ue..            
+00023460: 6966 2022 6761 6d6d 6122 2069 6e20 7669  if "gamma" in vi
+00023470: 735f 7061 7261 6d73 2e6b 6579 7328 293a  s_params.keys():
+00023480: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00023490: 2020 6c61 7965 725f 6761 6d6d 6120 3d20    layer_gamma = 
+000234a0: 7669 735f 7061 7261 6d73 5b22 6761 6d6d  vis_params["gamm
+000234b0: 6122 5d0d 0a20 2020 2020 2020 2020 2020  a"]..           
+000234c0: 2069 6620 2262 616e 6473 2220 696e 2076   if "bands" in v
+000234d0: 6973 5f70 6172 616d 732e 6b65 7973 2829  is_params.keys()
+000234e0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+000234f0: 2020 2073 656c 5f62 616e 6473 203d 2076     sel_bands = v
+00023500: 6973 5f70 6172 616d 735b 2262 616e 6473  is_params["bands
+00023510: 225d 0d0a 2020 2020 2020 2020 2020 2020  "]..            
+00023520: 6966 2022 7061 6c65 7474 6522 2069 6e20  if "palette" in 
+00023530: 7669 735f 7061 7261 6d73 2e6b 6579 7328  vis_params.keys(
+00023540: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+00023550: 2020 2020 6c61 7965 725f 7061 6c65 7474      layer_palett
+00023560: 6520 3d20 5b0d 0a20 2020 2020 2020 2020  e = [..         
+00023570: 2020 2020 2020 2020 2020 2063 6f6c 6f72             color
+00023580: 2e72 6570 6c61 6365 2822 2322 2c20 2222  .replace("#", ""
+00023590: 2920 666f 7220 636f 6c6f 7220 696e 206c  ) for color in l
+000235a0: 6973 7428 7669 735f 7061 7261 6d73 5b22  ist(vis_params["
+000235b0: 7061 6c65 7474 6522 5d29 0d0a 2020 2020  palette"])..    
+000235c0: 2020 2020 2020 2020 2020 2020 5d0d 0a0d              ]...
+000235d0: 0a20 2020 2020 2020 2020 2020 2076 6973  .            vis
+000235e0: 5f77 6964 6765 7420 3d20 7769 6467 6574  _widget = widget
+000235f0: 732e 5642 6f78 280d 0a20 2020 2020 2020  s.VBox(..       
+00023600: 2020 2020 2020 2020 206c 6179 6f75 743d           layout=
+00023610: 7769 6467 6574 732e 4c61 796f 7574 2870  widgets.Layout(p
+00023620: 6164 6469 6e67 3d22 3570 7820 3570 7820  adding="5px 5px 
+00023630: 3570 7820 3870 7822 2c20 7769 6474 683d  5px 8px", width=
+00023640: 2233 3330 7078 2229 0d0a 2020 2020 2020  "330px")..      
+00023650: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
+00023660: 2020 2020 206c 6162 656c 203d 2077 6964       label = wid
+00023670: 6765 7473 2e4c 6162 656c 2876 616c 7565  gets.Label(value
+00023680: 3d66 227b 6c61 7965 725f 6e61 6d65 7d20  =f"{layer_name} 
+00023690: 7669 7375 616c 697a 6174 696f 6e20 7061  visualization pa
+000236a0: 7261 6d65 7465 7273 2229 0d0a 0d0a 2020  rameters")....  
+000236b0: 2020 2020 2020 2020 2020 7261 6469 6f31            radio1
+000236c0: 203d 2077 6964 6765 7473 2e52 6164 696f   = widgets.Radio
+000236d0: 4275 7474 6f6e 7328 0d0a 2020 2020 2020  Buttons(..      
+000236e0: 2020 2020 2020 2020 2020 6f70 7469 6f6e            option
+000236f0: 733d 5b22 3120 6261 6e64 2028 4772 6179  s=["1 band (Gray
+00023700: 7363 616c 6529 225d 2c20 6c61 796f 7574  scale)"], layout
+00023710: 3d7b 2277 6964 7468 223a 2022 6d61 782d  ={"width": "max-
+00023720: 636f 6e74 656e 7422 7d0d 0a20 2020 2020  content"}..     
+00023730: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
+00023740: 2020 2020 2020 7261 6469 6f32 203d 2077        radio2 = w
+00023750: 6964 6765 7473 2e52 6164 696f 4275 7474  idgets.RadioButt
+00023760: 6f6e 7328 0d0a 2020 2020 2020 2020 2020  ons(..          
+00023770: 2020 2020 2020 6f70 7469 6f6e 733d 5b22        options=["
+00023780: 3320 6261 6e64 7320 2852 4742 2922 5d2c  3 bands (RGB)"],
+00023790: 206c 6179 6f75 743d 7b22 7769 6474 6822   layout={"width"
+000237a0: 3a20 226d 6178 2d63 6f6e 7465 6e74 227d  : "max-content"}
+000237b0: 0d0a 2020 2020 2020 2020 2020 2020 290d  ..            ).
+000237c0: 0a20 2020 2020 2020 2020 2020 2072 6164  .            rad
+000237d0: 696f 312e 696e 6465 7820 3d20 4e6f 6e65  io1.index = None
+000237e0: 0d0a 2020 2020 2020 2020 2020 2020 7261  ..            ra
+000237f0: 6469 6f32 2e69 6e64 6578 203d 204e 6f6e  dio2.index = Non
+00023800: 650d 0a0d 0a20 2020 2020 2020 2020 2020  e....           
+00023810: 2064 726f 7064 6f77 6e5f 7769 6474 6820   dropdown_width 
+00023820: 3d20 2239 3870 7822 0d0a 2020 2020 2020  = "98px"..      
+00023830: 2020 2020 2020 6261 6e64 315f 6472 6f70        band1_drop
+00023840: 646f 776e 203d 2077 6964 6765 7473 2e44  down = widgets.D
+00023850: 726f 7064 6f77 6e28 0d0a 2020 2020 2020  ropdown(..      
+00023860: 2020 2020 2020 2020 2020 6f70 7469 6f6e            option
+00023870: 733d 6261 6e64 5f6e 616d 6573 2c0d 0a20  s=band_names,.. 
+00023880: 2020 2020 2020 2020 2020 2020 2020 2076                 v
+00023890: 616c 7565 3d62 616e 645f 6e61 6d65 735b  alue=band_names[
+000238a0: 305d 2c0d 0a20 2020 2020 2020 2020 2020  0],..           
+000238b0: 2020 2020 206c 6179 6f75 743d 7769 6467       layout=widg
+000238c0: 6574 732e 4c61 796f 7574 2877 6964 7468  ets.Layout(width
+000238d0: 3d64 726f 7064 6f77 6e5f 7769 6474 6829  =dropdown_width)
+000238e0: 2c0d 0a20 2020 2020 2020 2020 2020 2029  ,..            )
+000238f0: 0d0a 2020 2020 2020 2020 2020 2020 6261  ..            ba
+00023900: 6e64 325f 6472 6f70 646f 776e 203d 2077  nd2_dropdown = w
+00023910: 6964 6765 7473 2e44 726f 7064 6f77 6e28  idgets.Dropdown(
+00023920: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00023930: 2020 6f70 7469 6f6e 733d 6261 6e64 5f6e    options=band_n
+00023940: 616d 6573 2c0d 0a20 2020 2020 2020 2020  ames,..         
+00023950: 2020 2020 2020 2076 616c 7565 3d62 616e         value=ban
+00023960: 645f 6e61 6d65 735b 305d 2c0d 0a20 2020  d_names[0],..   
+00023970: 2020 2020 2020 2020 2020 2020 206c 6179               lay
+00023980: 6f75 743d 7769 6467 6574 732e 4c61 796f  out=widgets.Layo
+00023990: 7574 2877 6964 7468 3d64 726f 7064 6f77  ut(width=dropdow
+000239a0: 6e5f 7769 6474 6829 2c0d 0a20 2020 2020  n_width),..     
+000239b0: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
+000239c0: 2020 2020 2020 6261 6e64 335f 6472 6f70        band3_drop
+000239d0: 646f 776e 203d 2077 6964 6765 7473 2e44  down = widgets.D
+000239e0: 726f 7064 6f77 6e28 0d0a 2020 2020 2020  ropdown(..      
+000239f0: 2020 2020 2020 2020 2020 6f70 7469 6f6e            option
+00023a00: 733d 6261 6e64 5f6e 616d 6573 2c0d 0a20  s=band_names,.. 
+00023a10: 2020 2020 2020 2020 2020 2020 2020 2076                 v
+00023a20: 616c 7565 3d62 616e 645f 6e61 6d65 735b  alue=band_names[
+00023a30: 305d 2c0d 0a20 2020 2020 2020 2020 2020  0],..           
+00023a40: 2020 2020 206c 6179 6f75 743d 7769 6467       layout=widg
+00023a50: 6574 732e 4c61 796f 7574 2877 6964 7468  ets.Layout(width
+00023a60: 3d64 726f 7064 6f77 6e5f 7769 6474 6829  =dropdown_width)
+00023a70: 2c0d 0a20 2020 2020 2020 2020 2020 2029  ,..            )
+00023a80: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00023a90: 6261 6e64 735f 6862 6f78 203d 2077 6964  bands_hbox = wid
+00023aa0: 6765 7473 2e48 426f 7828 290d 0a0d 0a20  gets.HBox().... 
+00023ab0: 2020 2020 2020 2020 2020 206c 6567 656e             legen
+00023ac0: 645f 6368 6b20 3d20 7769 6467 6574 732e  d_chk = widgets.
+00023ad0: 4368 6563 6b62 6f78 280d 0a20 2020 2020  Checkbox(..     
+00023ae0: 2020 2020 2020 2020 2020 2076 616c 7565             value
+00023af0: 3d46 616c 7365 2c0d 0a20 2020 2020 2020  =False,..       
+00023b00: 2020 2020 2020 2020 2064 6573 6372 6970           descrip
+00023b10: 7469 6f6e 3d22 4c65 6765 6e64 222c 0d0a  tion="Legend",..
+00023b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023b30: 696e 6465 6e74 3d46 616c 7365 2c0d 0a20  indent=False,.. 
+00023b40: 2020 2020 2020 2020 2020 2020 2020 206c                 l
+00023b50: 6179 6f75 743d 7769 6467 6574 732e 4c61  ayout=widgets.La
+00023b60: 796f 7574 2877 6964 7468 3d22 3730 7078  yout(width="70px
+00023b70: 2229 2c0d 0a20 2020 2020 2020 2020 2020  "),..           
+00023b80: 2029 0d0a 0d0a 2020 2020 2020 2020 2020   )....          
+00023b90: 2020 636f 6c6f 725f 7069 636b 6572 203d    color_picker =
+00023ba0: 2077 6964 6765 7473 2e43 6f6c 6f72 5069   widgets.ColorPi
+00023bb0: 636b 6572 280d 0a20 2020 2020 2020 2020  cker(..         
+00023bc0: 2020 2020 2020 2063 6f6e 6369 7365 3d46         concise=F
+00023bd0: 616c 7365 2c0d 0a20 2020 2020 2020 2020  alse,..         
+00023be0: 2020 2020 2020 2076 616c 7565 3d22 2330         value="#0
+00023bf0: 3030 3030 3022 2c0d 0a20 2020 2020 2020  00000",..       
+00023c00: 2020 2020 2020 2020 206c 6179 6f75 743d           layout=
+00023c10: 7769 6467 6574 732e 4c61 796f 7574 2877  widgets.Layout(w
+00023c20: 6964 7468 3d22 3131 3670 7822 292c 0d0a  idth="116px"),..
+00023c30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023c40: 7374 796c 653d 7b22 6465 7363 7269 7074  style={"descript
+00023c50: 696f 6e5f 7769 6474 6822 3a20 2269 6e69  ion_width": "ini
+00023c60: 7469 616c 227d 2c0d 0a20 2020 2020 2020  tial"},..       
+00023c70: 2020 2020 2029 0d0a 0d0a 2020 2020 2020       )....      
+00023c80: 2020 2020 2020 6164 645f 636f 6c6f 7220        add_color 
+00023c90: 3d20 7769 6467 6574 732e 4275 7474 6f6e  = widgets.Button
+00023ca0: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
+00023cb0: 2020 2069 636f 6e3d 2270 6c75 7322 2c0d     icon="plus",.
+00023cc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00023cd0: 2074 6f6f 6c74 6970 3d22 4164 6420 6120   tooltip="Add a 
+00023ce0: 6865 7820 636f 6c6f 7220 7374 7269 6e67  hex color string
+00023cf0: 2074 6f20 7468 6520 7061 6c65 7474 6522   to the palette"
 00023d00: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00023d10: 2020 2074 6f6f 6c74 6970 3d22 5265 6d6f     tooltip="Remo
-00023d20: 7665 2061 2068 6578 2063 6f6c 6f72 2073  ve a hex color s
-00023d30: 7472 696e 6720 6672 6f6d 2074 6865 2070  tring from the p
-00023d40: 616c 6574 7465 222c 0d0a 2020 2020 2020  alette",..      
-00023d50: 2020 2020 2020 2020 2020 6c61 796f 7574            layout
-00023d60: 3d77 6964 6765 7473 2e4c 6179 6f75 7428  =widgets.Layout(
-00023d70: 7769 6474 683d 2233 3270 7822 292c 0d0a  width="32px"),..
-00023d80: 2020 2020 2020 2020 2020 2020 290d 0a0d              )...
-00023d90: 0a20 2020 2020 2020 2020 2020 2072 6573  .            res
-00023da0: 6574 5f63 6f6c 6f72 203d 2077 6964 6765  et_color = widge
-00023db0: 7473 2e42 7574 746f 6e28 0d0a 2020 2020  ts.Button(..    
-00023dc0: 2020 2020 2020 2020 2020 2020 6963 6f6e              icon
-00023dd0: 3d22 6572 6173 6572 222c 0d0a 2020 2020  ="eraser",..    
-00023de0: 2020 2020 2020 2020 2020 2020 746f 6f6c              tool
-00023df0: 7469 703d 2252 656d 6f76 6520 616c 6c20  tip="Remove all 
-00023e00: 636f 6c6f 7220 7374 7269 6e67 7320 6672  color strings fr
-00023e10: 6f6d 2074 6865 2070 616c 6574 7465 222c  om the palette",
-00023e20: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00023e30: 2020 6c61 796f 7574 3d77 6964 6765 7473    layout=widgets
-00023e40: 2e4c 6179 6f75 7428 7769 6474 683d 2233  .Layout(width="3
-00023e50: 3470 7822 292c 0d0a 2020 2020 2020 2020  4px"),..        
-00023e60: 2020 2020 290d 0a0d 0a20 2020 2020 2020      )....       
-00023e70: 2020 2020 2063 6c61 7373 6573 203d 2077       classes = w
-00023e80: 6964 6765 7473 2e44 726f 7064 6f77 6e28  idgets.Dropdown(
-00023e90: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00023ea0: 2020 6f70 7469 6f6e 733d 5b22 416e 7922    options=["Any"
-00023eb0: 5d20 2b20 5b73 7472 2869 2920 666f 7220  ] + [str(i) for 
-00023ec0: 6920 696e 2072 616e 6765 2833 2c20 3133  i in range(3, 13
-00023ed0: 295d 2c0d 0a20 2020 2020 2020 2020 2020  )],..           
-00023ee0: 2020 2020 2064 6573 6372 6970 7469 6f6e       description
-00023ef0: 3d22 436c 6173 7365 733a 222c 0d0a 2020  ="Classes:",..  
-00023f00: 2020 2020 2020 2020 2020 2020 2020 6c61                la
-00023f10: 796f 7574 3d77 6964 6765 7473 2e4c 6179  yout=widgets.Lay
-00023f20: 6f75 7428 7769 6474 683d 2231 3135 7078  out(width="115px
-00023f30: 2229 2c0d 0a20 2020 2020 2020 2020 2020  "),..           
-00023f40: 2020 2020 2073 7479 6c65 3d7b 2264 6573       style={"des
-00023f50: 6372 6970 7469 6f6e 5f77 6964 7468 223a  cription_width":
-00023f60: 2022 696e 6974 6961 6c22 7d2c 0d0a 2020   "initial"},..  
-00023f70: 2020 2020 2020 2020 2020 290d 0a0d 0a20            ).... 
-00023f80: 2020 2020 2020 2020 2020 2063 6f6c 6f72             color
-00023f90: 6d61 7020 3d20 7769 6467 6574 732e 4472  map = widgets.Dr
-00023fa0: 6f70 646f 776e 280d 0a20 2020 2020 2020  opdown(..       
-00023fb0: 2020 2020 2020 2020 206f 7074 696f 6e73           options
-00023fc0: 3d70 6c74 2e63 6f6c 6f72 6d61 7073 2829  =plt.colormaps()
-00023fd0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00023fe0: 2020 2076 616c 7565 3d4e 6f6e 652c 0d0a     value=None,..
-00023ff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024000: 6465 7363 7269 7074 696f 6e3d 2243 6f6c  description="Col
-00024010: 6f72 6d61 703a 222c 0d0a 2020 2020 2020  ormap:",..      
-00024020: 2020 2020 2020 2020 2020 6c61 796f 7574            layout
-00024030: 3d77 6964 6765 7473 2e4c 6179 6f75 7428  =widgets.Layout(
-00024040: 7769 6474 683d 2231 3831 7078 2229 2c0d  width="181px"),.
-00024050: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00024060: 2073 7479 6c65 3d7b 2264 6573 6372 6970   style={"descrip
-00024070: 7469 6f6e 5f77 6964 7468 223a 2022 696e  tion_width": "in
-00024080: 6974 6961 6c22 7d2c 0d0a 2020 2020 2020  itial"},..      
-00024090: 2020 2020 2020 290d 0a0d 0a20 2020 2020        )....     
-000240a0: 2020 2020 2020 2064 6566 2063 6c61 7373         def class
-000240b0: 6573 5f63 6861 6e67 6564 2863 6861 6e67  es_changed(chang
-000240c0: 6529 3a0d 0a20 2020 2020 2020 2020 2020  e):..           
-000240d0: 2020 2020 2069 6620 6368 616e 6765 5b22       if change["
-000240e0: 6e65 7722 5d3a 0d0a 2020 2020 2020 2020  new"]:..        
-000240f0: 2020 2020 2020 2020 2020 2020 7365 6c65              sele
-00024100: 6374 6564 203d 2063 6861 6e67 655b 226f  cted = change["o
-00024110: 776e 6572 225d 2e76 616c 7565 0d0a 2020  wner"].value..  
-00024120: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024130: 2020 6966 2063 6f6c 6f72 6d61 702e 7661    if colormap.va
-00024140: 6c75 6520 6973 206e 6f74 204e 6f6e 653a  lue is not None:
-00024150: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00024160: 2020 2020 2020 2020 2020 2020 6e5f 636c              n_cl
-00024170: 6173 7320 3d20 4e6f 6e65 0d0a 2020 2020  ass = None..    
-00024180: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024190: 2020 2020 6966 2073 656c 6563 7465 6420      if selected 
-000241a0: 213d 2022 416e 7922 3a0d 0a20 2020 2020  != "Any":..     
+00023d10: 2020 206c 6179 6f75 743d 7769 6467 6574     layout=widget
+00023d20: 732e 4c61 796f 7574 2877 6964 7468 3d22  s.Layout(width="
+00023d30: 3332 7078 2229 2c0d 0a20 2020 2020 2020  32px"),..       
+00023d40: 2020 2020 2029 0d0a 0d0a 2020 2020 2020       )....      
+00023d50: 2020 2020 2020 6465 6c5f 636f 6c6f 7220        del_color 
+00023d60: 3d20 7769 6467 6574 732e 4275 7474 6f6e  = widgets.Button
+00023d70: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
+00023d80: 2020 2069 636f 6e3d 226d 696e 7573 222c     icon="minus",
+00023d90: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00023da0: 2020 746f 6f6c 7469 703d 2252 656d 6f76    tooltip="Remov
+00023db0: 6520 6120 6865 7820 636f 6c6f 7220 7374  e a hex color st
+00023dc0: 7269 6e67 2066 726f 6d20 7468 6520 7061  ring from the pa
+00023dd0: 6c65 7474 6522 2c0d 0a20 2020 2020 2020  lette",..       
+00023de0: 2020 2020 2020 2020 206c 6179 6f75 743d           layout=
+00023df0: 7769 6467 6574 732e 4c61 796f 7574 2877  widgets.Layout(w
+00023e00: 6964 7468 3d22 3332 7078 2229 2c0d 0a20  idth="32px"),.. 
+00023e10: 2020 2020 2020 2020 2020 2029 0d0a 0d0a             )....
+00023e20: 2020 2020 2020 2020 2020 2020 7265 7365              rese
+00023e30: 745f 636f 6c6f 7220 3d20 7769 6467 6574  t_color = widget
+00023e40: 732e 4275 7474 6f6e 280d 0a20 2020 2020  s.Button(..     
+00023e50: 2020 2020 2020 2020 2020 2069 636f 6e3d             icon=
+00023e60: 2265 7261 7365 7222 2c0d 0a20 2020 2020  "eraser",..     
+00023e70: 2020 2020 2020 2020 2020 2074 6f6f 6c74             toolt
+00023e80: 6970 3d22 5265 6d6f 7665 2061 6c6c 2063  ip="Remove all c
+00023e90: 6f6c 6f72 2073 7472 696e 6773 2066 726f  olor strings fro
+00023ea0: 6d20 7468 6520 7061 6c65 7474 6522 2c0d  m the palette",.
+00023eb0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00023ec0: 206c 6179 6f75 743d 7769 6467 6574 732e   layout=widgets.
+00023ed0: 4c61 796f 7574 2877 6964 7468 3d22 3334  Layout(width="34
+00023ee0: 7078 2229 2c0d 0a20 2020 2020 2020 2020  px"),..         
+00023ef0: 2020 2029 0d0a 0d0a 2020 2020 2020 2020     )....        
+00023f00: 2020 2020 636c 6173 7365 7320 3d20 7769      classes = wi
+00023f10: 6467 6574 732e 4472 6f70 646f 776e 280d  dgets.Dropdown(.
+00023f20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00023f30: 206f 7074 696f 6e73 3d5b 2241 6e79 225d   options=["Any"]
+00023f40: 202b 205b 7374 7228 6929 2066 6f72 2069   + [str(i) for i
+00023f50: 2069 6e20 7261 6e67 6528 332c 2031 3329   in range(3, 13)
+00023f60: 5d2c 0d0a 2020 2020 2020 2020 2020 2020  ],..            
+00023f70: 2020 2020 6465 7363 7269 7074 696f 6e3d      description=
+00023f80: 2243 6c61 7373 6573 3a22 2c0d 0a20 2020  "Classes:",..   
+00023f90: 2020 2020 2020 2020 2020 2020 206c 6179               lay
+00023fa0: 6f75 743d 7769 6467 6574 732e 4c61 796f  out=widgets.Layo
+00023fb0: 7574 2877 6964 7468 3d22 3131 3570 7822  ut(width="115px"
+00023fc0: 292c 0d0a 2020 2020 2020 2020 2020 2020  ),..            
+00023fd0: 2020 2020 7374 796c 653d 7b22 6465 7363      style={"desc
+00023fe0: 7269 7074 696f 6e5f 7769 6474 6822 3a20  ription_width": 
+00023ff0: 2269 6e69 7469 616c 227d 2c0d 0a20 2020  "initial"},..   
+00024000: 2020 2020 2020 2020 2029 0d0a 0d0a 2020           )....  
+00024010: 2020 2020 2020 2020 2020 636f 6c6f 726d            colorm
+00024020: 6170 203d 2077 6964 6765 7473 2e44 726f  ap = widgets.Dro
+00024030: 7064 6f77 6e28 0d0a 2020 2020 2020 2020  pdown(..        
+00024040: 2020 2020 2020 2020 6f70 7469 6f6e 733d          options=
+00024050: 706c 742e 636f 6c6f 726d 6170 7328 292c  plt.colormaps(),
+00024060: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00024070: 2020 7661 6c75 653d 4e6f 6e65 2c0d 0a20    value=None,.. 
+00024080: 2020 2020 2020 2020 2020 2020 2020 2064                 d
+00024090: 6573 6372 6970 7469 6f6e 3d22 436f 6c6f  escription="Colo
+000240a0: 726d 6170 3a22 2c0d 0a20 2020 2020 2020  rmap:",..       
+000240b0: 2020 2020 2020 2020 206c 6179 6f75 743d           layout=
+000240c0: 7769 6467 6574 732e 4c61 796f 7574 2877  widgets.Layout(w
+000240d0: 6964 7468 3d22 3138 3170 7822 292c 0d0a  idth="181px"),..
+000240e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000240f0: 7374 796c 653d 7b22 6465 7363 7269 7074  style={"descript
+00024100: 696f 6e5f 7769 6474 6822 3a20 2269 6e69  ion_width": "ini
+00024110: 7469 616c 227d 2c0d 0a20 2020 2020 2020  tial"},..       
+00024120: 2020 2020 2029 0d0a 0d0a 2020 2020 2020       )....      
+00024130: 2020 2020 2020 6465 6620 636c 6173 7365        def classe
+00024140: 735f 6368 616e 6765 6428 6368 616e 6765  s_changed(change
+00024150: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+00024160: 2020 2020 6966 2063 6861 6e67 655b 226e      if change["n
+00024170: 6577 225d 3a0d 0a20 2020 2020 2020 2020  ew"]:..         
+00024180: 2020 2020 2020 2020 2020 2073 656c 6563             selec
+00024190: 7465 6420 3d20 6368 616e 6765 5b22 6f77  ted = change["ow
+000241a0: 6e65 7222 5d2e 7661 6c75 650d 0a20 2020  ner"].value..   
 000241b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000241c0: 2020 2020 2020 206e 5f63 6c61 7373 203d         n_class =
-000241d0: 2069 6e74 2863 6c61 7373 6573 2e76 616c   int(classes.val
-000241e0: 7565 290d 0a0d 0a20 2020 2020 2020 2020  ue)....         
-000241f0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-00024200: 6f6c 6f72 7320 3d20 706c 742e 636d 2e67  olors = plt.cm.g
-00024210: 6574 5f63 6d61 7028 636f 6c6f 726d 6170  et_cmap(colormap
-00024220: 2e76 616c 7565 2c20 6e5f 636c 6173 7329  .value, n_class)
-00024230: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00024240: 2020 2020 2020 2020 2020 636d 6170 5f63            cmap_c
-00024250: 6f6c 6f72 7320 3d20 5b0d 0a20 2020 2020  olors = [..     
-00024260: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024270: 2020 2020 2020 206d 706c 2e63 6f6c 6f72         mpl.color
-00024280: 732e 7267 6232 6865 7828 636f 6c6f 7273  s.rgb2hex(colors
-00024290: 2869 2929 5b31 3a5d 2066 6f72 2069 2069  (i))[1:] for i i
-000242a0: 6e20 7261 6e67 6528 636f 6c6f 7273 2e4e  n range(colors.N
-000242b0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-000242c0: 2020 2020 2020 2020 2020 205d 0d0a 0d0a             ]....
-000242d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000242e0: 2020 2020 2020 2020 5f2c 2061 7820 3d20          _, ax = 
-000242f0: 706c 742e 7375 6270 6c6f 7473 2866 6967  plt.subplots(fig
-00024300: 7369 7a65 3d28 362c 2030 2e34 2929 0d0a  size=(6, 0.4))..
-00024310: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024320: 2020 2020 2020 2020 636d 6170 203d 206d          cmap = m
-00024330: 706c 2e63 6f6c 6f72 732e 4c69 6e65 6172  pl.colors.Linear
-00024340: 5365 676d 656e 7465 6443 6f6c 6f72 6d61  SegmentedColorma
-00024350: 702e 6672 6f6d 5f6c 6973 7428 0d0a 2020  p.from_list(..  
+000241c0: 2069 6620 636f 6c6f 726d 6170 2e76 616c   if colormap.val
+000241d0: 7565 2069 7320 6e6f 7420 4e6f 6e65 3a0d  ue is not None:.
+000241e0: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+000241f0: 2020 2020 2020 2020 2020 206e 5f63 6c61             n_cla
+00024200: 7373 203d 204e 6f6e 650d 0a20 2020 2020  ss = None..     
+00024210: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024220: 2020 2069 6620 7365 6c65 6374 6564 2021     if selected !
+00024230: 3d20 2241 6e79 223a 0d0a 2020 2020 2020  = "Any":..      
+00024240: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024250: 2020 2020 2020 6e5f 636c 6173 7320 3d20        n_class = 
+00024260: 696e 7428 636c 6173 7365 732e 7661 6c75  int(classes.valu
+00024270: 6529 0d0a 0d0a 2020 2020 2020 2020 2020  e)....          
+00024280: 2020 2020 2020 2020 2020 2020 2020 636f                co
+00024290: 6c6f 7273 203d 2070 6c74 2e63 6d2e 6765  lors = plt.cm.ge
+000242a0: 745f 636d 6170 2863 6f6c 6f72 6d61 702e  t_cmap(colormap.
+000242b0: 7661 6c75 652c 206e 5f63 6c61 7373 290d  value, n_class).
+000242c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000242d0: 2020 2020 2020 2020 2063 6d61 705f 636f           cmap_co
+000242e0: 6c6f 7273 203d 205b 0d0a 2020 2020 2020  lors = [..      
+000242f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024300: 2020 2020 2020 6d70 6c2e 636f 6c6f 7273        mpl.colors
+00024310: 2e72 6762 3268 6578 2863 6f6c 6f72 7328  .rgb2hex(colors(
+00024320: 6929 295b 313a 5d20 666f 7220 6920 696e  i))[1:] for i in
+00024330: 2072 616e 6765 2863 6f6c 6f72 732e 4e29   range(colors.N)
+00024340: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00024350: 2020 2020 2020 2020 2020 5d0d 0a0d 0a20            ].... 
 00024360: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024370: 2020 2020 2020 2020 2020 2263 7573 746f            "custo
-00024380: 6d22 2c20 746f 5f68 6578 5f63 6f6c 6f72  m", to_hex_color
-00024390: 7328 636d 6170 5f63 6f6c 6f72 7329 2c20  s(cmap_colors), 
-000243a0: 4e3d 3235 360d 0a20 2020 2020 2020 2020  N=256..         
-000243b0: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-000243c0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000243d0: 2020 2020 2020 2020 2020 6e6f 726d 203d            norm =
-000243e0: 206d 706c 2e63 6f6c 6f72 732e 4e6f 726d   mpl.colors.Norm
-000243f0: 616c 697a 6528 0d0a 2020 2020 2020 2020  alize(..        
-00024400: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024410: 2020 2020 766d 696e 3d76 616c 7565 5f72      vmin=value_r
-00024420: 616e 6765 2e76 616c 7565 5b30 5d2c 2076  ange.value[0], v
-00024430: 6d61 783d 7661 6c75 655f 7261 6e67 652e  max=value_range.
-00024440: 7661 6c75 655b 315d 0d0a 2020 2020 2020  value[1]..      
-00024450: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024460: 2020 290d 0a20 2020 2020 2020 2020 2020    )..           
-00024470: 2020 2020 2020 2020 2020 2020 206d 706c               mpl
-00024480: 2e63 6f6c 6f72 6261 722e 436f 6c6f 7262  .colorbar.Colorb
-00024490: 6172 4261 7365 280d 0a20 2020 2020 2020  arBase(..       
-000244a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000244b0: 2020 2020 2061 782c 206e 6f72 6d3d 6e6f       ax, norm=no
-000244c0: 726d 2c20 636d 6170 3d63 6d61 702c 206f  rm, cmap=cmap, o
-000244d0: 7269 656e 7461 7469 6f6e 3d22 686f 7269  rientation="hori
-000244e0: 7a6f 6e74 616c 220d 0a20 2020 2020 2020  zontal"..       
-000244f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024500: 2029 0d0a 0d0a 2020 2020 2020 2020 2020   )....          
-00024510: 2020 2020 2020 2020 2020 2020 2020 7061                pa
-00024520: 6c65 7474 652e 7661 6c75 6520 3d20 222c  lette.value = ",
-00024530: 2022 2e6a 6f69 6e28 5b63 6f6c 6f72 2066   ".join([color f
-00024540: 6f72 2063 6f6c 6f72 2069 6e20 636d 6170  or color in cmap
-00024550: 5f63 6f6c 6f72 735d 290d 0a0d 0a20 2020  _colors])....   
-00024560: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024570: 2020 2020 2069 6620 7365 6c66 2e63 6f6c       if self.col
-00024580: 6f72 6261 725f 7769 6467 6574 2069 7320  orbar_widget is 
-00024590: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
-000245a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000245b0: 2020 2073 656c 662e 636f 6c6f 7262 6172     self.colorbar
-000245c0: 5f77 6964 6765 7420 3d20 7769 6467 6574  _widget = widget
-000245d0: 732e 4f75 7470 7574 280d 0a20 2020 2020  s.Output(..     
-000245e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000245f0: 2020 2020 2020 2020 2020 206c 6179 6f75             layou
-00024600: 743d 7769 6467 6574 732e 4c61 796f 7574  t=widgets.Layout
-00024610: 2868 6569 6768 743d 2236 3070 7822 290d  (height="60px").
-00024620: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00024630: 2020 2020 2020 2020 2020 2020 2029 0d0a               )..
-00024640: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00024650: 2020 2020 2020 2020 2020 6966 2073 656c            if sel
-00024660: 662e 636f 6c6f 7262 6172 5f63 7472 6c20  f.colorbar_ctrl 
-00024670: 6973 204e 6f6e 653a 0d0a 2020 2020 2020  is None:..      
-00024680: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024690: 2020 2020 2020 7365 6c66 2e63 6f6c 6f72        self.color
-000246a0: 6261 725f 6374 726c 203d 2069 7079 6c65  bar_ctrl = ipyle
-000246b0: 6166 6c65 742e 5769 6467 6574 436f 6e74  aflet.WidgetCont
-000246c0: 726f 6c28 0d0a 2020 2020 2020 2020 2020  rol(..          
-000246d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000246e0: 2020 2020 2020 7769 6467 6574 3d73 656c        widget=sel
-000246f0: 662e 636f 6c6f 7262 6172 5f77 6964 6765  f.colorbar_widge
-00024700: 742c 2070 6f73 6974 696f 6e3d 2262 6f74  t, position="bot
-00024710: 746f 6d72 6967 6874 220d 0a20 2020 2020  tomright"..     
-00024720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024730: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
-00024740: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024750: 2020 2020 2020 7365 6c66 2e61 6464 5f63        self.add_c
-00024760: 6f6e 7472 6f6c 2873 656c 662e 636f 6c6f  ontrol(self.colo
-00024770: 7262 6172 5f63 7472 6c29 0d0a 0d0a 2020  rbar_ctrl)....  
-00024780: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024790: 2020 2020 2020 636f 6c6f 7262 6172 5f6f        colorbar_o
-000247a0: 7574 7075 7420 3d20 7365 6c66 2e63 6f6c  utput = self.col
-000247b0: 6f72 6261 725f 7769 6467 6574 0d0a 2020  orbar_widget..  
-000247c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000247d0: 2020 2020 2020 7769 7468 2063 6f6c 6f72        with color
-000247e0: 6261 725f 6f75 7470 7574 3a0d 0a20 2020  bar_output:..   
-000247f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024800: 2020 2020 2020 2020 2063 6f6c 6f72 6261           colorba
-00024810: 725f 6f75 7470 7574 2e63 6c65 6172 5f6f  r_output.clear_o
-00024820: 7574 7075 7428 290d 0a20 2020 2020 2020  utput()..       
-00024830: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024840: 2020 2020 2070 6c74 2e73 686f 7728 290d       plt.show().
-00024850: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-00024860: 2020 2020 2020 2020 2020 2069 6620 6c65             if le
-00024870: 6e28 7061 6c65 7474 652e 7661 6c75 6529  n(palette.value)
-00024880: 203e 2030 2061 6e64 2022 2c22 2069 6e20   > 0 and "," in 
-00024890: 7061 6c65 7474 652e 7661 6c75 653a 0d0a  palette.value:..
-000248a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000248b0: 2020 2020 2020 2020 2020 2020 6c61 6265              labe
-000248c0: 6c73 203d 205b 0d0a 2020 2020 2020 2020  ls = [..        
-000248d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000248e0: 2020 2020 2020 2020 6622 436c 6173 7320          f"Class 
-000248f0: 7b69 2b31 7d22 0d0a 2020 2020 2020 2020  {i+1}"..        
-00024900: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024910: 2020 2020 2020 2020 666f 7220 6920 696e          for i in
-00024920: 2072 616e 6765 286c 656e 2870 616c 6574   range(len(palet
-00024930: 7465 2e76 616c 7565 2e73 706c 6974 2822  te.value.split("
-00024940: 2c22 2929 290d 0a20 2020 2020 2020 2020  ,")))..         
-00024950: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024960: 2020 205d 0d0a 2020 2020 2020 2020 2020     ]..          
-00024970: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024980: 2020 6c65 6765 6e64 5f6c 6162 656c 732e    legend_labels.
-00024990: 7661 6c75 6520 3d20 222c 2022 2e6a 6f69  value = ", ".joi
-000249a0: 6e28 6c61 6265 6c73 290d 0a0d 0a20 2020  n(labels)....   
-000249b0: 2020 2020 2020 2020 2063 6c61 7373 6573           classes
-000249c0: 2e6f 6273 6572 7665 2863 6c61 7373 6573  .observe(classes
-000249d0: 5f63 6861 6e67 6564 2c20 2276 616c 7565  _changed, "value
-000249e0: 2229 0d0a 0d0a 2020 2020 2020 2020 2020  ")....          
-000249f0: 2020 7061 6c65 7474 6520 3d20 7769 6467    palette = widg
-00024a00: 6574 732e 5465 7874 280d 0a20 2020 2020  ets.Text(..     
-00024a10: 2020 2020 2020 2020 2020 2076 616c 7565             value
-00024a20: 3d22 2c20 222e 6a6f 696e 286c 6179 6572  =", ".join(layer
-00024a30: 5f70 616c 6574 7465 292c 0d0a 2020 2020  _palette),..    
-00024a40: 2020 2020 2020 2020 2020 2020 706c 6163              plac
-00024a50: 6568 6f6c 6465 723d 224c 6973 7420 6f66  eholder="List of
-00024a60: 2068 6578 2063 6f6c 6f72 2063 6f64 6520   hex color code 
-00024a70: 2852 5247 4742 4229 222c 0d0a 2020 2020  (RRGGBB)",..    
-00024a80: 2020 2020 2020 2020 2020 2020 6465 7363              desc
-00024a90: 7269 7074 696f 6e3d 2250 616c 6574 7465  ription="Palette
-00024aa0: 3a22 2c0d 0a20 2020 2020 2020 2020 2020  :",..           
-00024ab0: 2020 2020 2074 6f6f 6c74 6970 3d22 456e       tooltip="En
-00024ac0: 7465 7220 6120 6c69 7374 206f 6620 6865  ter a list of he
-00024ad0: 7820 636f 6c6f 7220 636f 6465 2028 5252  x color code (RR
-00024ae0: 4747 4242 2922 2c0d 0a20 2020 2020 2020  GGBB)",..       
-00024af0: 2020 2020 2020 2020 206c 6179 6f75 743d           layout=
-00024b00: 7769 6467 6574 732e 4c61 796f 7574 2877  widgets.Layout(w
-00024b10: 6964 7468 3d22 3330 3070 7822 292c 0d0a  idth="300px"),..
-00024b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024b30: 7374 796c 653d 7b22 6465 7363 7269 7074  style={"descript
-00024b40: 696f 6e5f 7769 6474 6822 3a20 2269 6e69  ion_width": "ini
-00024b50: 7469 616c 227d 2c0d 0a20 2020 2020 2020  tial"},..       
-00024b60: 2020 2020 2029 0d0a 0d0a 2020 2020 2020       )....      
-00024b70: 2020 2020 2020 6465 6620 6164 645f 636f        def add_co
-00024b80: 6c6f 725f 636c 6963 6b65 6428 6229 3a0d  lor_clicked(b):.
-00024b90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00024ba0: 2069 6620 636f 6c6f 725f 7069 636b 6572   if color_picker
-00024bb0: 2e76 616c 7565 2069 7320 6e6f 7420 4e6f  .value is not No
-00024bc0: 6e65 3a0d 0a20 2020 2020 2020 2020 2020  ne:..           
-00024bd0: 2020 2020 2020 2020 2069 6620 6c65 6e28           if len(
-00024be0: 7061 6c65 7474 652e 7661 6c75 6529 203d  palette.value) =
-00024bf0: 3d20 303a 0d0a 2020 2020 2020 2020 2020  = 0:..          
-00024c00: 2020 2020 2020 2020 2020 2020 2020 7061                pa
-00024c10: 6c65 7474 652e 7661 6c75 6520 3d20 636f  lette.value = co
-00024c20: 6c6f 725f 7069 636b 6572 2e76 616c 7565  lor_picker.value
-00024c30: 5b31 3a5d 0d0a 2020 2020 2020 2020 2020  [1:]..          
-00024c40: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
-00024c50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00024c60: 2020 2020 2020 2020 2070 616c 6574 7465           palette
-00024c70: 2e76 616c 7565 202b 3d20 222c 2022 202b  .value += ", " +
-00024c80: 2063 6f6c 6f72 5f70 6963 6b65 722e 7661   color_picker.va
-00024c90: 6c75 655b 313a 5d0d 0a0d 0a20 2020 2020  lue[1:]....     
-00024ca0: 2020 2020 2020 2064 6566 2064 656c 5f63         def del_c
-00024cb0: 6f6c 6f72 5f63 6c69 636b 6564 2862 293a  olor_clicked(b):
-00024cc0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00024cd0: 2020 6966 2022 2c22 2069 6e20 7061 6c65    if "," in pale
-00024ce0: 7474 652e 7661 6c75 653a 0d0a 2020 2020  tte.value:..    
-00024cf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024d00: 6974 656d 7320 3d20 5b69 7465 6d2e 7374  items = [item.st
-00024d10: 7269 7028 2920 666f 7220 6974 656d 2069  rip() for item i
-00024d20: 6e20 7061 6c65 7474 652e 7661 6c75 652e  n palette.value.
-00024d30: 7370 6c69 7428 222c 2229 5d0d 0a20 2020  split(",")]..   
-00024d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024d50: 2070 616c 6574 7465 2e76 616c 7565 203d   palette.value =
-00024d60: 2022 2c20 222e 6a6f 696e 2869 7465 6d73   ", ".join(items
-00024d70: 5b3a 2d31 5d29 0d0a 2020 2020 2020 2020  [:-1])..        
-00024d80: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
-00024d90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024da0: 2020 2070 616c 6574 7465 2e76 616c 7565     palette.value
-00024db0: 203d 2022 220d 0a0d 0a20 2020 2020 2020   = ""....       
-00024dc0: 2020 2020 2064 6566 2072 6573 6574 5f63       def reset_c
-00024dd0: 6f6c 6f72 5f63 6c69 636b 6564 2862 293a  olor_clicked(b):
-00024de0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00024df0: 2020 7061 6c65 7474 652e 7661 6c75 6520    palette.value 
-00024e00: 3d20 2222 0d0a 0d0a 2020 2020 2020 2020  = ""....        
-00024e10: 2020 2020 6164 645f 636f 6c6f 722e 6f6e      add_color.on
-00024e20: 5f63 6c69 636b 2861 6464 5f63 6f6c 6f72  _click(add_color
-00024e30: 5f63 6c69 636b 6564 290d 0a20 2020 2020  _clicked)..     
-00024e40: 2020 2020 2020 2064 656c 5f63 6f6c 6f72         del_color
-00024e50: 2e6f 6e5f 636c 6963 6b28 6465 6c5f 636f  .on_click(del_co
-00024e60: 6c6f 725f 636c 6963 6b65 6429 0d0a 2020  lor_clicked)..  
-00024e70: 2020 2020 2020 2020 2020 7265 7365 745f            reset_
-00024e80: 636f 6c6f 722e 6f6e 5f63 6c69 636b 2872  color.on_click(r
-00024e90: 6573 6574 5f63 6f6c 6f72 5f63 6c69 636b  eset_color_click
-00024ea0: 6564 290d 0a0d 0a20 2020 2020 2020 2020  ed)....         
-00024eb0: 2020 2073 7061 6365 7220 3d20 7769 6467     spacer = widg
-00024ec0: 6574 732e 4c61 6265 6c28 6c61 796f 7574  ets.Label(layout
-00024ed0: 3d77 6964 6765 7473 2e4c 6179 6f75 7428  =widgets.Layout(
-00024ee0: 7769 6474 683d 2235 7078 2229 290d 0a20  width="5px")).. 
-00024ef0: 2020 2020 2020 2020 2020 2076 5f73 7061             v_spa
-00024f00: 6365 7220 3d20 7769 6467 6574 732e 4c61  cer = widgets.La
-00024f10: 6265 6c28 6c61 796f 7574 3d77 6964 6765  bel(layout=widge
-00024f20: 7473 2e4c 6179 6f75 7428 6865 6967 6874  ts.Layout(height
-00024f30: 3d22 3570 7822 2929 0d0a 2020 2020 2020  ="5px"))..      
-00024f40: 2020 2020 2020 7261 6469 6f5f 6274 6e20        radio_btn 
-00024f50: 3d20 7769 6467 6574 732e 4842 6f78 285b  = widgets.HBox([
-00024f60: 7261 6469 6f31 2c20 7370 6163 6572 2c20  radio1, spacer, 
-00024f70: 7370 6163 6572 2c20 7370 6163 6572 2c20  spacer, spacer, 
-00024f80: 7261 6469 6f32 5d29 0d0a 0d0a 2020 2020  radio2])....    
-00024f90: 2020 2020 2020 2020 7661 6c75 655f 7261          value_ra
-00024fa0: 6e67 6520 3d20 7769 6467 6574 732e 466c  nge = widgets.Fl
-00024fb0: 6f61 7452 616e 6765 536c 6964 6572 280d  oatRangeSlider(.
-00024fc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00024fd0: 2076 616c 7565 3d5b 6d69 6e5f 7661 6c75   value=[min_valu
-00024fe0: 652c 206d 6178 5f76 616c 7565 5d2c 0d0a  e, max_value],..
-00024ff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025000: 6d69 6e3d 6c65 6674 5f76 616c 7565 2c0d  min=left_value,.
-00025010: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00025020: 206d 6178 3d72 6967 6874 5f76 616c 7565   max=right_value
-00025030: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00025040: 2020 2073 7465 703d 302e 312c 0d0a 2020     step=0.1,..  
-00025050: 2020 2020 2020 2020 2020 2020 2020 6465                de
-00025060: 7363 7269 7074 696f 6e3d 2252 616e 6765  scription="Range
-00025070: 3a22 2c0d 0a20 2020 2020 2020 2020 2020  :",..           
-00025080: 2020 2020 2064 6973 6162 6c65 643d 4661       disabled=Fa
-00025090: 6c73 652c 0d0a 2020 2020 2020 2020 2020  lse,..          
-000250a0: 2020 2020 2020 636f 6e74 696e 756f 7573        continuous
-000250b0: 5f75 7064 6174 653d 4661 6c73 652c 0d0a  _update=False,..
-000250c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000250d0: 7265 6164 6f75 743d 5472 7565 2c0d 0a20  readout=True,.. 
-000250e0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-000250f0: 6561 646f 7574 5f66 6f72 6d61 743d 222e  eadout_format=".
-00025100: 3166 222c 0d0a 2020 2020 2020 2020 2020  1f",..          
-00025110: 2020 2020 2020 6c61 796f 7574 3d77 6964        layout=wid
-00025120: 6765 7473 2e4c 6179 6f75 7428 7769 6474  gets.Layout(widt
-00025130: 683d 2233 3030 7078 2229 2c0d 0a20 2020  h="300px"),..   
-00025140: 2020 2020 2020 2020 2020 2020 2073 7479               sty
-00025150: 6c65 3d7b 2264 6573 6372 6970 7469 6f6e  le={"description
-00025160: 5f77 6964 7468 223a 2022 3435 7078 227d  _width": "45px"}
-00025170: 2c0d 0a20 2020 2020 2020 2020 2020 2029  ,..            )
-00025180: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00025190: 7261 6e67 655f 6862 6f78 203d 2077 6964  range_hbox = wid
-000251a0: 6765 7473 2e48 426f 7828 5b76 616c 7565  gets.HBox([value
-000251b0: 5f72 616e 6765 2c20 7370 6163 6572 5d29  _range, spacer])
-000251c0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-000251d0: 6f70 6163 6974 7920 3d20 7769 6467 6574  opacity = widget
-000251e0: 732e 466c 6f61 7453 6c69 6465 7228 0d0a  s.FloatSlider(..
-000251f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025200: 7661 6c75 653d 6c61 7965 725f 6f70 6163  value=layer_opac
-00025210: 6974 792c 0d0a 2020 2020 2020 2020 2020  ity,..          
-00025220: 2020 2020 2020 6d69 6e3d 302c 0d0a 2020        min=0,..  
-00025230: 2020 2020 2020 2020 2020 2020 2020 6d61                ma
-00025240: 783d 312c 0d0a 2020 2020 2020 2020 2020  x=1,..          
-00025250: 2020 2020 2020 7374 6570 3d30 2e30 312c        step=0.01,
-00025260: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00025270: 2020 6465 7363 7269 7074 696f 6e3d 224f    description="O
-00025280: 7061 6369 7479 3a22 2c0d 0a20 2020 2020  pacity:",..     
-00025290: 2020 2020 2020 2020 2020 2063 6f6e 7469             conti
-000252a0: 6e75 6f75 735f 7570 6461 7465 3d46 616c  nuous_update=Fal
-000252b0: 7365 2c0d 0a20 2020 2020 2020 2020 2020  se,..           
-000252c0: 2020 2020 2072 6561 646f 7574 3d54 7275       readout=Tru
-000252d0: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
-000252e0: 2020 2020 7265 6164 6f75 745f 666f 726d      readout_form
-000252f0: 6174 3d22 2e32 6622 2c0d 0a20 2020 2020  at=".2f",..     
-00025300: 2020 2020 2020 2020 2020 206c 6179 6f75             layou
-00025310: 743d 7769 6467 6574 732e 4c61 796f 7574  t=widgets.Layout
-00025320: 2877 6964 7468 3d22 3332 3070 7822 292c  (width="320px"),
-00025330: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00025340: 2020 7374 796c 653d 7b22 6465 7363 7269    style={"descri
-00025350: 7074 696f 6e5f 7769 6474 6822 3a20 2235  ption_width": "5
-00025360: 3070 7822 7d2c 0d0a 2020 2020 2020 2020  0px"},..        
-00025370: 2020 2020 290d 0a0d 0a20 2020 2020 2020      )....       
-00025380: 2020 2020 2067 616d 6d61 203d 2077 6964       gamma = wid
-00025390: 6765 7473 2e46 6c6f 6174 536c 6964 6572  gets.FloatSlider
-000253a0: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
-000253b0: 2020 2076 616c 7565 3d6c 6179 6572 5f67     value=layer_g
-000253c0: 616d 6d61 2c0d 0a20 2020 2020 2020 2020  amma,..         
-000253d0: 2020 2020 2020 206d 696e 3d30 2e31 2c0d         min=0.1,.
-000253e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000253f0: 206d 6178 3d31 302c 0d0a 2020 2020 2020   max=10,..      
-00025400: 2020 2020 2020 2020 2020 7374 6570 3d30            step=0
-00025410: 2e30 312c 0d0a 2020 2020 2020 2020 2020  .01,..          
-00025420: 2020 2020 2020 6465 7363 7269 7074 696f        descriptio
-00025430: 6e3d 2247 616d 6d61 3a22 2c0d 0a20 2020  n="Gamma:",..   
-00025440: 2020 2020 2020 2020 2020 2020 2063 6f6e               con
-00025450: 7469 6e75 6f75 735f 7570 6461 7465 3d46  tinuous_update=F
-00025460: 616c 7365 2c0d 0a20 2020 2020 2020 2020  alse,..         
-00025470: 2020 2020 2020 2072 6561 646f 7574 3d54         readout=T
-00025480: 7275 652c 0d0a 2020 2020 2020 2020 2020  rue,..          
-00025490: 2020 2020 2020 7265 6164 6f75 745f 666f        readout_fo
-000254a0: 726d 6174 3d22 2e32 6622 2c0d 0a20 2020  rmat=".2f",..   
-000254b0: 2020 2020 2020 2020 2020 2020 206c 6179               lay
-000254c0: 6f75 743d 7769 6467 6574 732e 4c61 796f  out=widgets.Layo
-000254d0: 7574 2877 6964 7468 3d22 3332 3070 7822  ut(width="320px"
-000254e0: 292c 0d0a 2020 2020 2020 2020 2020 2020  ),..            
-000254f0: 2020 2020 7374 796c 653d 7b22 6465 7363      style={"desc
-00025500: 7269 7074 696f 6e5f 7769 6474 6822 3a20  ription_width": 
-00025510: 2235 3070 7822 7d2c 0d0a 2020 2020 2020  "50px"},..      
-00025520: 2020 2020 2020 290d 0a0d 0a20 2020 2020        )....     
-00025530: 2020 2020 2020 206c 6567 656e 645f 6368         legend_ch
-00025540: 6b20 3d20 7769 6467 6574 732e 4368 6563  k = widgets.Chec
-00025550: 6b62 6f78 280d 0a20 2020 2020 2020 2020  kbox(..         
-00025560: 2020 2020 2020 2076 616c 7565 3d46 616c         value=Fal
-00025570: 7365 2c0d 0a20 2020 2020 2020 2020 2020  se,..           
-00025580: 2020 2020 2064 6573 6372 6970 7469 6f6e       description
-00025590: 3d22 4c65 6765 6e64 222c 0d0a 2020 2020  ="Legend",..    
-000255a0: 2020 2020 2020 2020 2020 2020 696e 6465              inde
-000255b0: 6e74 3d46 616c 7365 2c0d 0a20 2020 2020  nt=False,..     
-000255c0: 2020 2020 2020 2020 2020 206c 6179 6f75             layou
-000255d0: 743d 7769 6467 6574 732e 4c61 796f 7574  t=widgets.Layout
-000255e0: 2877 6964 7468 3d22 3730 7078 2229 2c0d  (width="70px"),.
-000255f0: 0a20 2020 2020 2020 2020 2020 2029 0d0a  .            )..
-00025600: 0d0a 2020 2020 2020 2020 2020 2020 6c69  ..            li
-00025610: 6e65 6172 5f63 686b 203d 2077 6964 6765  near_chk = widge
-00025620: 7473 2e43 6865 636b 626f 7828 0d0a 2020  ts.Checkbox(..  
-00025630: 2020 2020 2020 2020 2020 2020 2020 7661                va
-00025640: 6c75 653d 5472 7565 2c0d 0a20 2020 2020  lue=True,..     
-00025650: 2020 2020 2020 2020 2020 2064 6573 6372             descr
-00025660: 6970 7469 6f6e 3d22 4c69 6e65 6172 2063  iption="Linear c
-00025670: 6f6c 6f72 6d61 7022 2c0d 0a20 2020 2020  olormap",..     
-00025680: 2020 2020 2020 2020 2020 2069 6e64 656e             inden
-00025690: 743d 4661 6c73 652c 0d0a 2020 2020 2020  t=False,..      
-000256a0: 2020 2020 2020 2020 2020 6c61 796f 7574            layout
-000256b0: 3d77 6964 6765 7473 2e4c 6179 6f75 7428  =widgets.Layout(
-000256c0: 7769 6474 683d 2231 3530 7078 2229 2c0d  width="150px"),.
-000256d0: 0a20 2020 2020 2020 2020 2020 2029 0d0a  .            )..
-000256e0: 0d0a 2020 2020 2020 2020 2020 2020 7374  ..            st
-000256f0: 6570 5f63 686b 203d 2077 6964 6765 7473  ep_chk = widgets
-00025700: 2e43 6865 636b 626f 7828 0d0a 2020 2020  .Checkbox(..    
-00025710: 2020 2020 2020 2020 2020 2020 7661 6c75              valu
-00025720: 653d 4661 6c73 652c 0d0a 2020 2020 2020  e=False,..      
-00025730: 2020 2020 2020 2020 2020 6465 7363 7269            descri
-00025740: 7074 696f 6e3d 2253 7465 7020 636f 6c6f  ption="Step colo
-00025750: 726d 6170 222c 0d0a 2020 2020 2020 2020  rmap",..        
-00025760: 2020 2020 2020 2020 696e 6465 6e74 3d46          indent=F
-00025770: 616c 7365 2c0d 0a20 2020 2020 2020 2020  alse,..         
-00025780: 2020 2020 2020 206c 6179 6f75 743d 7769         layout=wi
-00025790: 6467 6574 732e 4c61 796f 7574 2877 6964  dgets.Layout(wid
-000257a0: 7468 3d22 3134 3070 7822 292c 0d0a 2020  th="140px"),..  
-000257b0: 2020 2020 2020 2020 2020 290d 0a0d 0a20            ).... 
-000257c0: 2020 2020 2020 2020 2020 206c 6567 656e             legen
-000257d0: 645f 7469 746c 6520 3d20 7769 6467 6574  d_title = widget
-000257e0: 732e 5465 7874 280d 0a20 2020 2020 2020  s.Text(..       
-000257f0: 2020 2020 2020 2020 2076 616c 7565 3d22           value="
-00025800: 4c65 6765 6e64 222c 0d0a 2020 2020 2020  Legend",..      
-00025810: 2020 2020 2020 2020 2020 6465 7363 7269            descri
-00025820: 7074 696f 6e3d 224c 6567 656e 6420 7469  ption="Legend ti
-00025830: 746c 653a 222c 0d0a 2020 2020 2020 2020  tle:",..        
-00025840: 2020 2020 2020 2020 746f 6f6c 7469 703d          tooltip=
-00025850: 2245 6e74 6572 2061 2074 6974 6c65 2066  "Enter a title f
-00025860: 6f72 2074 6865 206c 6567 656e 6422 2c0d  or the legend",.
-00025870: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00025880: 206c 6179 6f75 743d 7769 6467 6574 732e   layout=widgets.
-00025890: 4c61 796f 7574 2877 6964 7468 3d22 3330  Layout(width="30
-000258a0: 3070 7822 292c 0d0a 2020 2020 2020 2020  0px"),..        
-000258b0: 2020 2020 2020 2020 7374 796c 653d 7b22          style={"
-000258c0: 6465 7363 7269 7074 696f 6e5f 7769 6474  description_widt
-000258d0: 6822 3a20 2269 6e69 7469 616c 227d 2c0d  h": "initial"},.
-000258e0: 0a20 2020 2020 2020 2020 2020 2029 0d0a  .            )..
-000258f0: 0d0a 2020 2020 2020 2020 2020 2020 6c65  ..            le
-00025900: 6765 6e64 5f6c 6162 656c 7320 3d20 7769  gend_labels = wi
-00025910: 6467 6574 732e 5465 7874 280d 0a20 2020  dgets.Text(..   
-00025920: 2020 2020 2020 2020 2020 2020 2076 616c               val
-00025930: 7565 3d22 436c 6173 7320 312c 2043 6c61  ue="Class 1, Cla
-00025940: 7373 2032 2c20 436c 6173 7320 3322 2c0d  ss 2, Class 3",.
-00025950: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00025960: 2064 6573 6372 6970 7469 6f6e 3d22 4c65   description="Le
-00025970: 6765 6e64 206c 6162 656c 733a 222c 0d0a  gend labels:",..
-00025980: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025990: 746f 6f6c 7469 703d 2245 6e74 6572 2061  tooltip="Enter a
-000259a0: 2061 206c 6973 7420 6f66 206c 6162 656c   a list of label
-000259b0: 7320 666f 7220 7468 6520 6c65 6765 6e64  s for the legend
-000259c0: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
-000259d0: 2020 2020 6c61 796f 7574 3d77 6964 6765      layout=widge
-000259e0: 7473 2e4c 6179 6f75 7428 7769 6474 683d  ts.Layout(width=
-000259f0: 2233 3030 7078 2229 2c0d 0a20 2020 2020  "300px"),..     
-00025a00: 2020 2020 2020 2020 2020 2073 7479 6c65             style
-00025a10: 3d7b 2264 6573 6372 6970 7469 6f6e 5f77  ={"description_w
-00025a20: 6964 7468 223a 2022 696e 6974 6961 6c22  idth": "initial"
-00025a30: 7d2c 0d0a 2020 2020 2020 2020 2020 2020  },..            
-00025a40: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
-00025a50: 2063 6f6c 6f72 6d61 705f 6862 6f78 203d   colormap_hbox =
-00025a60: 2077 6964 6765 7473 2e48 426f 7828 5b6c   widgets.HBox([l
-00025a70: 696e 6561 725f 6368 6b2c 2073 7465 705f  inear_chk, step_
-00025a80: 6368 6b5d 290d 0a20 2020 2020 2020 2020  chk])..         
-00025a90: 2020 206c 6567 656e 645f 7662 6f78 203d     legend_vbox =
-00025aa0: 2077 6964 6765 7473 2e56 426f 7828 290d   widgets.VBox().
-00025ab0: 0a0d 0a20 2020 2020 2020 2020 2020 2064  ...            d
-00025ac0: 6566 206c 696e 6561 725f 6368 6b5f 6368  ef linear_chk_ch
-00025ad0: 616e 6765 6428 6368 616e 6765 293a 0d0a  anged(change):..
-00025ae0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00025af0: 2020 6966 2063 6861 6e67 655b 226e 6577    if change["new
-00025b00: 225d 3a0d 0a20 2020 2020 2020 2020 2020  "]:..           
-00025b10: 2020 2020 2020 2020 2073 7465 705f 6368           step_ch
-00025b20: 6b2e 7661 6c75 6520 3d20 4661 6c73 650d  k.value = False.
-00025b30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00025b40: 2020 2020 206c 6567 656e 645f 7662 6f78       legend_vbox
-00025b50: 2e63 6869 6c64 7265 6e20 3d20 5b63 6f6c  .children = [col
-00025b60: 6f72 6d61 705f 6862 6f78 5d0d 0a20 2020  ormap_hbox]..   
-00025b70: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-00025b80: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-00025b90: 2020 2020 2020 2020 7374 6570 5f63 686b          step_chk
-00025ba0: 2e76 616c 7565 203d 2054 7275 650d 0a0d  .value = True...
-00025bb0: 0a20 2020 2020 2020 2020 2020 2064 6566  .            def
-00025bc0: 2073 7465 705f 6368 6b5f 6368 616e 6765   step_chk_change
-00025bd0: 6428 6368 616e 6765 293a 0d0a 0d0a 2020  d(change):....  
-00025be0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00025bf0: 2063 6861 6e67 655b 226e 6577 225d 3a0d   change["new"]:.
-00025c00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00025c10: 2020 2020 206c 696e 6561 725f 6368 6b2e       linear_chk.
-00025c20: 7661 6c75 6520 3d20 4661 6c73 650d 0a20  value = False.. 
-00025c30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025c40: 2020 2069 6620 6c65 6e28 6c61 7965 725f     if len(layer_
-00025c50: 7061 6c65 7474 6529 203e 2030 3a0d 0a20  palette) > 0:.. 
-00025c60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025c70: 2020 2020 2020 206c 6567 656e 645f 6c61         legend_la
-00025c80: 6265 6c73 2e76 616c 7565 203d 2022 2c22  bels.value = ","
-00025c90: 2e6a 6f69 6e28 0d0a 2020 2020 2020 2020  .join(..        
-00025ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025cb0: 2020 2020 5b0d 0a20 2020 2020 2020 2020      [..         
+00024370: 2020 2020 2020 205f 2c20 6178 203d 2070         _, ax = p
+00024380: 6c74 2e73 7562 706c 6f74 7328 6669 6773  lt.subplots(figs
+00024390: 697a 653d 2836 2c20 302e 3429 290d 0a20  ize=(6, 0.4)).. 
+000243a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000243b0: 2020 2020 2020 2063 6d61 7020 3d20 6d70         cmap = mp
+000243c0: 6c2e 636f 6c6f 7273 2e4c 696e 6561 7253  l.colors.LinearS
+000243d0: 6567 6d65 6e74 6564 436f 6c6f 726d 6170  egmentedColormap
+000243e0: 2e66 726f 6d5f 6c69 7374 280d 0a20 2020  .from_list(..   
+000243f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024400: 2020 2020 2020 2020 2022 6375 7374 6f6d           "custom
+00024410: 222c 2074 6f5f 6865 785f 636f 6c6f 7273  ", to_hex_colors
+00024420: 2863 6d61 705f 636f 6c6f 7273 292c 204e  (cmap_colors), N
+00024430: 3d32 3536 0d0a 2020 2020 2020 2020 2020  =256..          
+00024440: 2020 2020 2020 2020 2020 2020 2020 290d                ).
+00024450: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00024460: 2020 2020 2020 2020 206e 6f72 6d20 3d20           norm = 
+00024470: 6d70 6c2e 636f 6c6f 7273 2e4e 6f72 6d61  mpl.colors.Norma
+00024480: 6c69 7a65 280d 0a20 2020 2020 2020 2020  lize(..         
+00024490: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000244a0: 2020 2076 6d69 6e3d 7661 6c75 655f 7261     vmin=value_ra
+000244b0: 6e67 652e 7661 6c75 655b 305d 2c20 766d  nge.value[0], vm
+000244c0: 6178 3d76 616c 7565 5f72 616e 6765 2e76  ax=value_range.v
+000244d0: 616c 7565 5b31 5d0d 0a20 2020 2020 2020  alue[1]..       
+000244e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000244f0: 2029 0d0a 2020 2020 2020 2020 2020 2020   )..            
+00024500: 2020 2020 2020 2020 2020 2020 6d70 6c2e              mpl.
+00024510: 636f 6c6f 7262 6172 2e43 6f6c 6f72 6261  colorbar.Colorba
+00024520: 7242 6173 6528 0d0a 2020 2020 2020 2020  rBase(..        
+00024530: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024540: 2020 2020 6178 2c20 6e6f 726d 3d6e 6f72      ax, norm=nor
+00024550: 6d2c 2063 6d61 703d 636d 6170 2c20 6f72  m, cmap=cmap, or
+00024560: 6965 6e74 6174 696f 6e3d 2268 6f72 697a  ientation="horiz
+00024570: 6f6e 7461 6c22 0d0a 2020 2020 2020 2020  ontal"..        
+00024580: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024590: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+000245a0: 2020 2020 2020 2020 2020 2020 2070 616c               pal
+000245b0: 6574 7465 2e76 616c 7565 203d 2022 2c20  ette.value = ", 
+000245c0: 222e 6a6f 696e 285b 636f 6c6f 7220 666f  ".join([color fo
+000245d0: 7220 636f 6c6f 7220 696e 2063 6d61 705f  r color in cmap_
+000245e0: 636f 6c6f 7273 5d29 0d0a 0d0a 2020 2020  colors])....    
+000245f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024600: 2020 2020 6966 2073 656c 662e 636f 6c6f      if self.colo
+00024610: 7262 6172 5f77 6964 6765 7420 6973 204e  rbar_widget is N
+00024620: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
+00024630: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024640: 2020 7365 6c66 2e63 6f6c 6f72 6261 725f    self.colorbar_
+00024650: 7769 6467 6574 203d 2077 6964 6765 7473  widget = widgets
+00024660: 2e4f 7574 7075 7428 0d0a 2020 2020 2020  .Output(..      
+00024670: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024680: 2020 2020 2020 2020 2020 6c61 796f 7574            layout
+00024690: 3d77 6964 6765 7473 2e4c 6179 6f75 7428  =widgets.Layout(
+000246a0: 6865 6967 6874 3d22 3630 7078 2229 0d0a  height="60px")..
+000246b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000246c0: 2020 2020 2020 2020 2020 2020 290d 0a0d              )...
+000246d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000246e0: 2020 2020 2020 2020 2069 6620 7365 6c66           if self
+000246f0: 2e63 6f6c 6f72 6261 725f 6374 726c 2069  .colorbar_ctrl i
+00024700: 7320 4e6f 6e65 3a0d 0a20 2020 2020 2020  s None:..       
+00024710: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024720: 2020 2020 2073 656c 662e 636f 6c6f 7262       self.colorb
+00024730: 6172 5f63 7472 6c20 3d20 6970 796c 6561  ar_ctrl = ipylea
+00024740: 666c 6574 2e57 6964 6765 7443 6f6e 7472  flet.WidgetContr
+00024750: 6f6c 280d 0a20 2020 2020 2020 2020 2020  ol(..           
+00024760: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024770: 2020 2020 2077 6964 6765 743d 7365 6c66       widget=self
+00024780: 2e63 6f6c 6f72 6261 725f 7769 6467 6574  .colorbar_widget
+00024790: 2c20 706f 7369 7469 6f6e 3d22 626f 7474  , position="bott
+000247a0: 6f6d 7269 6768 7422 0d0a 2020 2020 2020  omright"..      
+000247b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000247c0: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
+000247d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000247e0: 2020 2020 2073 656c 662e 6164 645f 636f       self.add_co
+000247f0: 6e74 726f 6c28 7365 6c66 2e63 6f6c 6f72  ntrol(self.color
+00024800: 6261 725f 6374 726c 290d 0a0d 0a20 2020  bar_ctrl)....   
+00024810: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024820: 2020 2020 2063 6f6c 6f72 6261 725f 6f75       colorbar_ou
+00024830: 7470 7574 203d 2073 656c 662e 636f 6c6f  tput = self.colo
+00024840: 7262 6172 5f77 6964 6765 740d 0a20 2020  rbar_widget..   
+00024850: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024860: 2020 2020 2077 6974 6820 636f 6c6f 7262       with colorb
+00024870: 6172 5f6f 7574 7075 743a 0d0a 2020 2020  ar_output:..    
+00024880: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024890: 2020 2020 2020 2020 636f 6c6f 7262 6172          colorbar
+000248a0: 5f6f 7574 7075 742e 636c 6561 725f 6f75  _output.clear_ou
+000248b0: 7470 7574 2829 0d0a 2020 2020 2020 2020  tput()..        
+000248c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000248d0: 2020 2020 706c 742e 7368 6f77 2829 0d0a      plt.show()..
+000248e0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000248f0: 2020 2020 2020 2020 2020 6966 206c 656e            if len
+00024900: 2870 616c 6574 7465 2e76 616c 7565 2920  (palette.value) 
+00024910: 3e20 3020 616e 6420 222c 2220 696e 2070  > 0 and "," in p
+00024920: 616c 6574 7465 2e76 616c 7565 3a0d 0a20  alette.value:.. 
+00024930: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024940: 2020 2020 2020 2020 2020 206c 6162 656c             label
+00024950: 7320 3d20 5b0d 0a20 2020 2020 2020 2020  s = [..         
+00024960: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024970: 2020 2020 2020 2066 2243 6c61 7373 207b         f"Class {
+00024980: 692b 317d 220d 0a20 2020 2020 2020 2020  i+1}"..         
+00024990: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000249a0: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
+000249b0: 7261 6e67 6528 6c65 6e28 7061 6c65 7474  range(len(palett
+000249c0: 652e 7661 6c75 652e 7370 6c69 7428 222c  e.value.split(",
+000249d0: 2229 2929 0d0a 2020 2020 2020 2020 2020  ")))..          
+000249e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000249f0: 2020 5d0d 0a20 2020 2020 2020 2020 2020    ]..           
+00024a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024a10: 206c 6567 656e 645f 6c61 6265 6c73 2e76   legend_labels.v
+00024a20: 616c 7565 203d 2022 2c20 222e 6a6f 696e  alue = ", ".join
+00024a30: 286c 6162 656c 7329 0d0a 0d0a 2020 2020  (labels)....    
+00024a40: 2020 2020 2020 2020 636c 6173 7365 732e          classes.
+00024a50: 6f62 7365 7276 6528 636c 6173 7365 735f  observe(classes_
+00024a60: 6368 616e 6765 642c 2022 7661 6c75 6522  changed, "value"
+00024a70: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+00024a80: 2070 616c 6574 7465 203d 2077 6964 6765   palette = widge
+00024a90: 7473 2e54 6578 7428 0d0a 2020 2020 2020  ts.Text(..      
+00024aa0: 2020 2020 2020 2020 2020 7661 6c75 653d            value=
+00024ab0: 222c 2022 2e6a 6f69 6e28 6c61 7965 725f  ", ".join(layer_
+00024ac0: 7061 6c65 7474 6529 2c0d 0a20 2020 2020  palette),..     
+00024ad0: 2020 2020 2020 2020 2020 2070 6c61 6365             place
+00024ae0: 686f 6c64 6572 3d22 4c69 7374 206f 6620  holder="List of 
+00024af0: 6865 7820 636f 6c6f 7220 636f 6465 2028  hex color code (
+00024b00: 5252 4747 4242 2922 2c0d 0a20 2020 2020  RRGGBB)",..     
+00024b10: 2020 2020 2020 2020 2020 2064 6573 6372             descr
+00024b20: 6970 7469 6f6e 3d22 5061 6c65 7474 653a  iption="Palette:
+00024b30: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
+00024b40: 2020 2020 746f 6f6c 7469 703d 2245 6e74      tooltip="Ent
+00024b50: 6572 2061 206c 6973 7420 6f66 2068 6578  er a list of hex
+00024b60: 2063 6f6c 6f72 2063 6f64 6520 2852 5247   color code (RRG
+00024b70: 4742 4229 222c 0d0a 2020 2020 2020 2020  GBB)",..        
+00024b80: 2020 2020 2020 2020 6c61 796f 7574 3d77          layout=w
+00024b90: 6964 6765 7473 2e4c 6179 6f75 7428 7769  idgets.Layout(wi
+00024ba0: 6474 683d 2233 3030 7078 2229 2c0d 0a20  dth="300px"),.. 
+00024bb0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00024bc0: 7479 6c65 3d7b 2264 6573 6372 6970 7469  tyle={"descripti
+00024bd0: 6f6e 5f77 6964 7468 223a 2022 696e 6974  on_width": "init
+00024be0: 6961 6c22 7d2c 0d0a 2020 2020 2020 2020  ial"},..        
+00024bf0: 2020 2020 290d 0a0d 0a20 2020 2020 2020      )....       
+00024c00: 2020 2020 2064 6566 2061 6464 5f63 6f6c       def add_col
+00024c10: 6f72 5f63 6c69 636b 6564 2862 293a 0d0a  or_clicked(b):..
+00024c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024c30: 6966 2063 6f6c 6f72 5f70 6963 6b65 722e  if color_picker.
+00024c40: 7661 6c75 6520 6973 206e 6f74 204e 6f6e  value is not Non
+00024c50: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+00024c60: 2020 2020 2020 2020 6966 206c 656e 2870          if len(p
+00024c70: 616c 6574 7465 2e76 616c 7565 2920 3d3d  alette.value) ==
+00024c80: 2030 3a0d 0a20 2020 2020 2020 2020 2020   0:..           
+00024c90: 2020 2020 2020 2020 2020 2020 2070 616c               pal
+00024ca0: 6574 7465 2e76 616c 7565 203d 2063 6f6c  ette.value = col
+00024cb0: 6f72 5f70 6963 6b65 722e 7661 6c75 655b  or_picker.value[
+00024cc0: 313a 5d0d 0a20 2020 2020 2020 2020 2020  1:]..           
+00024cd0: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
+00024ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024cf0: 2020 2020 2020 2020 7061 6c65 7474 652e          palette.
+00024d00: 7661 6c75 6520 2b3d 2022 2c20 2220 2b20  value += ", " + 
+00024d10: 636f 6c6f 725f 7069 636b 6572 2e76 616c  color_picker.val
+00024d20: 7565 5b31 3a5d 0d0a 0d0a 2020 2020 2020  ue[1:]....      
+00024d30: 2020 2020 2020 6465 6620 6465 6c5f 636f        def del_co
+00024d40: 6c6f 725f 636c 6963 6b65 6428 6229 3a0d  lor_clicked(b):.
+00024d50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00024d60: 2069 6620 222c 2220 696e 2070 616c 6574   if "," in palet
+00024d70: 7465 2e76 616c 7565 3a0d 0a20 2020 2020  te.value:..     
+00024d80: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00024d90: 7465 6d73 203d 205b 6974 656d 2e73 7472  tems = [item.str
+00024da0: 6970 2829 2066 6f72 2069 7465 6d20 696e  ip() for item in
+00024db0: 2070 616c 6574 7465 2e76 616c 7565 2e73   palette.value.s
+00024dc0: 706c 6974 2822 2c22 295d 0d0a 2020 2020  plit(",")]..    
+00024dd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024de0: 7061 6c65 7474 652e 7661 6c75 6520 3d20  palette.value = 
+00024df0: 222c 2022 2e6a 6f69 6e28 6974 656d 735b  ", ".join(items[
+00024e00: 3a2d 315d 290d 0a20 2020 2020 2020 2020  :-1])..         
+00024e10: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
+00024e20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024e30: 2020 7061 6c65 7474 652e 7661 6c75 6520    palette.value 
+00024e40: 3d20 2222 0d0a 0d0a 2020 2020 2020 2020  = ""....        
+00024e50: 2020 2020 6465 6620 7265 7365 745f 636f      def reset_co
+00024e60: 6c6f 725f 636c 6963 6b65 6428 6229 3a0d  lor_clicked(b):.
+00024e70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00024e80: 2070 616c 6574 7465 2e76 616c 7565 203d   palette.value =
+00024e90: 2022 220d 0a0d 0a20 2020 2020 2020 2020   ""....         
+00024ea0: 2020 2061 6464 5f63 6f6c 6f72 2e6f 6e5f     add_color.on_
+00024eb0: 636c 6963 6b28 6164 645f 636f 6c6f 725f  click(add_color_
+00024ec0: 636c 6963 6b65 6429 0d0a 2020 2020 2020  clicked)..      
+00024ed0: 2020 2020 2020 6465 6c5f 636f 6c6f 722e        del_color.
+00024ee0: 6f6e 5f63 6c69 636b 2864 656c 5f63 6f6c  on_click(del_col
+00024ef0: 6f72 5f63 6c69 636b 6564 290d 0a20 2020  or_clicked)..   
+00024f00: 2020 2020 2020 2020 2072 6573 6574 5f63           reset_c
+00024f10: 6f6c 6f72 2e6f 6e5f 636c 6963 6b28 7265  olor.on_click(re
+00024f20: 7365 745f 636f 6c6f 725f 636c 6963 6b65  set_color_clicke
+00024f30: 6429 0d0a 0d0a 2020 2020 2020 2020 2020  d)....          
+00024f40: 2020 7370 6163 6572 203d 2077 6964 6765    spacer = widge
+00024f50: 7473 2e4c 6162 656c 286c 6179 6f75 743d  ts.Label(layout=
+00024f60: 7769 6467 6574 732e 4c61 796f 7574 2877  widgets.Layout(w
+00024f70: 6964 7468 3d22 3570 7822 2929 0d0a 2020  idth="5px"))..  
+00024f80: 2020 2020 2020 2020 2020 765f 7370 6163            v_spac
+00024f90: 6572 203d 2077 6964 6765 7473 2e4c 6162  er = widgets.Lab
+00024fa0: 656c 286c 6179 6f75 743d 7769 6467 6574  el(layout=widget
+00024fb0: 732e 4c61 796f 7574 2868 6569 6768 743d  s.Layout(height=
+00024fc0: 2235 7078 2229 290d 0a20 2020 2020 2020  "5px"))..       
+00024fd0: 2020 2020 2072 6164 696f 5f62 746e 203d       radio_btn =
+00024fe0: 2077 6964 6765 7473 2e48 426f 7828 5b72   widgets.HBox([r
+00024ff0: 6164 696f 312c 2073 7061 6365 722c 2073  adio1, spacer, s
+00025000: 7061 6365 722c 2073 7061 6365 722c 2072  pacer, spacer, r
+00025010: 6164 696f 325d 290d 0a0d 0a20 2020 2020  adio2])....     
+00025020: 2020 2020 2020 2076 616c 7565 5f72 616e         value_ran
+00025030: 6765 203d 2077 6964 6765 7473 2e46 6c6f  ge = widgets.Flo
+00025040: 6174 5261 6e67 6553 6c69 6465 7228 0d0a  atRangeSlider(..
+00025050: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025060: 7661 6c75 653d 5b6d 696e 5f76 616c 7565  value=[min_value
+00025070: 2c20 6d61 785f 7661 6c75 655d 2c0d 0a20  , max_value],.. 
+00025080: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+00025090: 696e 3d6c 6566 745f 7661 6c75 652c 0d0a  in=left_value,..
+000250a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000250b0: 6d61 783d 7269 6768 745f 7661 6c75 652c  max=right_value,
+000250c0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000250d0: 2020 7374 6570 3d30 2e31 2c0d 0a20 2020    step=0.1,..   
+000250e0: 2020 2020 2020 2020 2020 2020 2064 6573               des
+000250f0: 6372 6970 7469 6f6e 3d22 5261 6e67 653a  cription="Range:
+00025100: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
+00025110: 2020 2020 6469 7361 626c 6564 3d46 616c      disabled=Fal
+00025120: 7365 2c0d 0a20 2020 2020 2020 2020 2020  se,..           
+00025130: 2020 2020 2063 6f6e 7469 6e75 6f75 735f       continuous_
+00025140: 7570 6461 7465 3d46 616c 7365 2c0d 0a20  update=False,.. 
+00025150: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00025160: 6561 646f 7574 3d54 7275 652c 0d0a 2020  eadout=True,..  
+00025170: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00025180: 6164 6f75 745f 666f 726d 6174 3d22 2e31  adout_format=".1
+00025190: 6622 2c0d 0a20 2020 2020 2020 2020 2020  f",..           
+000251a0: 2020 2020 206c 6179 6f75 743d 7769 6467       layout=widg
+000251b0: 6574 732e 4c61 796f 7574 2877 6964 7468  ets.Layout(width
+000251c0: 3d22 3330 3070 7822 292c 0d0a 2020 2020  ="300px"),..    
+000251d0: 2020 2020 2020 2020 2020 2020 7374 796c              styl
+000251e0: 653d 7b22 6465 7363 7269 7074 696f 6e5f  e={"description_
+000251f0: 7769 6474 6822 3a20 2234 3570 7822 7d2c  width": "45px"},
+00025200: 0d0a 2020 2020 2020 2020 2020 2020 290d  ..            ).
+00025210: 0a0d 0a20 2020 2020 2020 2020 2020 2072  ...            r
+00025220: 616e 6765 5f68 626f 7820 3d20 7769 6467  ange_hbox = widg
+00025230: 6574 732e 4842 6f78 285b 7661 6c75 655f  ets.HBox([value_
+00025240: 7261 6e67 652c 2073 7061 6365 725d 290d  range, spacer]).
+00025250: 0a0d 0a20 2020 2020 2020 2020 2020 206f  ...            o
+00025260: 7061 6369 7479 203d 2077 6964 6765 7473  pacity = widgets
+00025270: 2e46 6c6f 6174 536c 6964 6572 280d 0a20  .FloatSlider(.. 
+00025280: 2020 2020 2020 2020 2020 2020 2020 2076                 v
+00025290: 616c 7565 3d6c 6179 6572 5f6f 7061 6369  alue=layer_opaci
+000252a0: 7479 2c0d 0a20 2020 2020 2020 2020 2020  ty,..           
+000252b0: 2020 2020 206d 696e 3d30 2c0d 0a20 2020       min=0,..   
+000252c0: 2020 2020 2020 2020 2020 2020 206d 6178               max
+000252d0: 3d31 2c0d 0a20 2020 2020 2020 2020 2020  =1,..           
+000252e0: 2020 2020 2073 7465 703d 302e 3031 2c0d       step=0.01,.
+000252f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00025300: 2064 6573 6372 6970 7469 6f6e 3d22 4f70   description="Op
+00025310: 6163 6974 793a 222c 0d0a 2020 2020 2020  acity:",..      
+00025320: 2020 2020 2020 2020 2020 636f 6e74 696e            contin
+00025330: 756f 7573 5f75 7064 6174 653d 4661 6c73  uous_update=Fals
+00025340: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
+00025350: 2020 2020 7265 6164 6f75 743d 5472 7565      readout=True
+00025360: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+00025370: 2020 2072 6561 646f 7574 5f66 6f72 6d61     readout_forma
+00025380: 743d 222e 3266 222c 0d0a 2020 2020 2020  t=".2f",..      
+00025390: 2020 2020 2020 2020 2020 6c61 796f 7574            layout
+000253a0: 3d77 6964 6765 7473 2e4c 6179 6f75 7428  =widgets.Layout(
+000253b0: 7769 6474 683d 2233 3230 7078 2229 2c0d  width="320px"),.
+000253c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000253d0: 2073 7479 6c65 3d7b 2264 6573 6372 6970   style={"descrip
+000253e0: 7469 6f6e 5f77 6964 7468 223a 2022 3530  tion_width": "50
+000253f0: 7078 227d 2c0d 0a20 2020 2020 2020 2020  px"},..         
+00025400: 2020 2029 0d0a 0d0a 2020 2020 2020 2020     )....        
+00025410: 2020 2020 6761 6d6d 6120 3d20 7769 6467      gamma = widg
+00025420: 6574 732e 466c 6f61 7453 6c69 6465 7228  ets.FloatSlider(
+00025430: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00025440: 2020 7661 6c75 653d 6c61 7965 725f 6761    value=layer_ga
+00025450: 6d6d 612c 0d0a 2020 2020 2020 2020 2020  mma,..          
+00025460: 2020 2020 2020 6d69 6e3d 302e 312c 0d0a        min=0.1,..
+00025470: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025480: 6d61 783d 3130 2c0d 0a20 2020 2020 2020  max=10,..       
+00025490: 2020 2020 2020 2020 2073 7465 703d 302e           step=0.
+000254a0: 3031 2c0d 0a20 2020 2020 2020 2020 2020  01,..           
+000254b0: 2020 2020 2064 6573 6372 6970 7469 6f6e       description
+000254c0: 3d22 4761 6d6d 613a 222c 0d0a 2020 2020  ="Gamma:",..    
+000254d0: 2020 2020 2020 2020 2020 2020 636f 6e74              cont
+000254e0: 696e 756f 7573 5f75 7064 6174 653d 4661  inuous_update=Fa
+000254f0: 6c73 652c 0d0a 2020 2020 2020 2020 2020  lse,..          
+00025500: 2020 2020 2020 7265 6164 6f75 743d 5472        readout=Tr
+00025510: 7565 2c0d 0a20 2020 2020 2020 2020 2020  ue,..           
+00025520: 2020 2020 2072 6561 646f 7574 5f66 6f72       readout_for
+00025530: 6d61 743d 222e 3266 222c 0d0a 2020 2020  mat=".2f",..    
+00025540: 2020 2020 2020 2020 2020 2020 6c61 796f              layo
+00025550: 7574 3d77 6964 6765 7473 2e4c 6179 6f75  ut=widgets.Layou
+00025560: 7428 7769 6474 683d 2233 3230 7078 2229  t(width="320px")
+00025570: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+00025580: 2020 2073 7479 6c65 3d7b 2264 6573 6372     style={"descr
+00025590: 6970 7469 6f6e 5f77 6964 7468 223a 2022  iption_width": "
+000255a0: 3530 7078 227d 2c0d 0a20 2020 2020 2020  50px"},..       
+000255b0: 2020 2020 2029 0d0a 0d0a 2020 2020 2020       )....      
+000255c0: 2020 2020 2020 6c65 6765 6e64 5f63 686b        legend_chk
+000255d0: 203d 2077 6964 6765 7473 2e43 6865 636b   = widgets.Check
+000255e0: 626f 7828 0d0a 2020 2020 2020 2020 2020  box(..          
+000255f0: 2020 2020 2020 7661 6c75 653d 4661 6c73        value=Fals
+00025600: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
+00025610: 2020 2020 6465 7363 7269 7074 696f 6e3d      description=
+00025620: 224c 6567 656e 6422 2c0d 0a20 2020 2020  "Legend",..     
+00025630: 2020 2020 2020 2020 2020 2069 6e64 656e             inden
+00025640: 743d 4661 6c73 652c 0d0a 2020 2020 2020  t=False,..      
+00025650: 2020 2020 2020 2020 2020 6c61 796f 7574            layout
+00025660: 3d77 6964 6765 7473 2e4c 6179 6f75 7428  =widgets.Layout(
+00025670: 7769 6474 683d 2237 3070 7822 292c 0d0a  width="70px"),..
+00025680: 2020 2020 2020 2020 2020 2020 290d 0a0d              )...
+00025690: 0a20 2020 2020 2020 2020 2020 206c 696e  .            lin
+000256a0: 6561 725f 6368 6b20 3d20 7769 6467 6574  ear_chk = widget
+000256b0: 732e 4368 6563 6b62 6f78 280d 0a20 2020  s.Checkbox(..   
+000256c0: 2020 2020 2020 2020 2020 2020 2076 616c               val
+000256d0: 7565 3d54 7275 652c 0d0a 2020 2020 2020  ue=True,..      
+000256e0: 2020 2020 2020 2020 2020 6465 7363 7269            descri
+000256f0: 7074 696f 6e3d 224c 696e 6561 7220 636f  ption="Linear co
+00025700: 6c6f 726d 6170 222c 0d0a 2020 2020 2020  lormap",..      
+00025710: 2020 2020 2020 2020 2020 696e 6465 6e74            indent
+00025720: 3d46 616c 7365 2c0d 0a20 2020 2020 2020  =False,..       
+00025730: 2020 2020 2020 2020 206c 6179 6f75 743d           layout=
+00025740: 7769 6467 6574 732e 4c61 796f 7574 2877  widgets.Layout(w
+00025750: 6964 7468 3d22 3135 3070 7822 292c 0d0a  idth="150px"),..
+00025760: 2020 2020 2020 2020 2020 2020 290d 0a0d              )...
+00025770: 0a20 2020 2020 2020 2020 2020 2073 7465  .            ste
+00025780: 705f 6368 6b20 3d20 7769 6467 6574 732e  p_chk = widgets.
+00025790: 4368 6563 6b62 6f78 280d 0a20 2020 2020  Checkbox(..     
+000257a0: 2020 2020 2020 2020 2020 2076 616c 7565             value
+000257b0: 3d46 616c 7365 2c0d 0a20 2020 2020 2020  =False,..       
+000257c0: 2020 2020 2020 2020 2064 6573 6372 6970           descrip
+000257d0: 7469 6f6e 3d22 5374 6570 2063 6f6c 6f72  tion="Step color
+000257e0: 6d61 7022 2c0d 0a20 2020 2020 2020 2020  map",..         
+000257f0: 2020 2020 2020 2069 6e64 656e 743d 4661         indent=Fa
+00025800: 6c73 652c 0d0a 2020 2020 2020 2020 2020  lse,..          
+00025810: 2020 2020 2020 6c61 796f 7574 3d77 6964        layout=wid
+00025820: 6765 7473 2e4c 6179 6f75 7428 7769 6474  gets.Layout(widt
+00025830: 683d 2231 3430 7078 2229 2c0d 0a20 2020  h="140px"),..   
+00025840: 2020 2020 2020 2020 2029 0d0a 0d0a 2020           )....  
+00025850: 2020 2020 2020 2020 2020 6c65 6765 6e64            legend
+00025860: 5f74 6974 6c65 203d 2077 6964 6765 7473  _title = widgets
+00025870: 2e54 6578 7428 0d0a 2020 2020 2020 2020  .Text(..        
+00025880: 2020 2020 2020 2020 7661 6c75 653d 224c          value="L
+00025890: 6567 656e 6422 2c0d 0a20 2020 2020 2020  egend",..       
+000258a0: 2020 2020 2020 2020 2064 6573 6372 6970           descrip
+000258b0: 7469 6f6e 3d22 4c65 6765 6e64 2074 6974  tion="Legend tit
+000258c0: 6c65 3a22 2c0d 0a20 2020 2020 2020 2020  le:",..         
+000258d0: 2020 2020 2020 2074 6f6f 6c74 6970 3d22         tooltip="
+000258e0: 456e 7465 7220 6120 7469 746c 6520 666f  Enter a title fo
+000258f0: 7220 7468 6520 6c65 6765 6e64 222c 0d0a  r the legend",..
+00025900: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025910: 6c61 796f 7574 3d77 6964 6765 7473 2e4c  layout=widgets.L
+00025920: 6179 6f75 7428 7769 6474 683d 2233 3030  ayout(width="300
+00025930: 7078 2229 2c0d 0a20 2020 2020 2020 2020  px"),..         
+00025940: 2020 2020 2020 2073 7479 6c65 3d7b 2264         style={"d
+00025950: 6573 6372 6970 7469 6f6e 5f77 6964 7468  escription_width
+00025960: 223a 2022 696e 6974 6961 6c22 7d2c 0d0a  ": "initial"},..
+00025970: 2020 2020 2020 2020 2020 2020 290d 0a0d              )...
+00025980: 0a20 2020 2020 2020 2020 2020 206c 6567  .            leg
+00025990: 656e 645f 6c61 6265 6c73 203d 2077 6964  end_labels = wid
+000259a0: 6765 7473 2e54 6578 7428 0d0a 2020 2020  gets.Text(..    
+000259b0: 2020 2020 2020 2020 2020 2020 7661 6c75              valu
+000259c0: 653d 2243 6c61 7373 2031 2c20 436c 6173  e="Class 1, Clas
+000259d0: 7320 322c 2043 6c61 7373 2033 222c 0d0a  s 2, Class 3",..
+000259e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000259f0: 6465 7363 7269 7074 696f 6e3d 224c 6567  description="Leg
+00025a00: 656e 6420 6c61 6265 6c73 3a22 2c0d 0a20  end labels:",.. 
+00025a10: 2020 2020 2020 2020 2020 2020 2020 2074                 t
+00025a20: 6f6f 6c74 6970 3d22 456e 7465 7220 6120  ooltip="Enter a 
+00025a30: 6120 6c69 7374 206f 6620 6c61 6265 6c73  a list of labels
+00025a40: 2066 6f72 2074 6865 206c 6567 656e 6422   for the legend"
+00025a50: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+00025a60: 2020 206c 6179 6f75 743d 7769 6467 6574     layout=widget
+00025a70: 732e 4c61 796f 7574 2877 6964 7468 3d22  s.Layout(width="
+00025a80: 3330 3070 7822 292c 0d0a 2020 2020 2020  300px"),..      
+00025a90: 2020 2020 2020 2020 2020 7374 796c 653d            style=
+00025aa0: 7b22 6465 7363 7269 7074 696f 6e5f 7769  {"description_wi
+00025ab0: 6474 6822 3a20 2269 6e69 7469 616c 227d  dth": "initial"}
+00025ac0: 2c0d 0a20 2020 2020 2020 2020 2020 2029  ,..            )
+00025ad0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00025ae0: 636f 6c6f 726d 6170 5f68 626f 7820 3d20  colormap_hbox = 
+00025af0: 7769 6467 6574 732e 4842 6f78 285b 6c69  widgets.HBox([li
+00025b00: 6e65 6172 5f63 686b 2c20 7374 6570 5f63  near_chk, step_c
+00025b10: 686b 5d29 0d0a 2020 2020 2020 2020 2020  hk])..          
+00025b20: 2020 6c65 6765 6e64 5f76 626f 7820 3d20    legend_vbox = 
+00025b30: 7769 6467 6574 732e 5642 6f78 2829 0d0a  widgets.VBox()..
+00025b40: 0d0a 2020 2020 2020 2020 2020 2020 6465  ..            de
+00025b50: 6620 6c69 6e65 6172 5f63 686b 5f63 6861  f linear_chk_cha
+00025b60: 6e67 6564 2863 6861 6e67 6529 3a0d 0a0d  nged(change):...
+00025b70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00025b80: 2069 6620 6368 616e 6765 5b22 6e65 7722   if change["new"
+00025b90: 5d3a 0d0a 2020 2020 2020 2020 2020 2020  ]:..            
+00025ba0: 2020 2020 2020 2020 7374 6570 5f63 686b          step_chk
+00025bb0: 2e76 616c 7565 203d 2046 616c 7365 0d0a  .value = False..
+00025bc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025bd0: 2020 2020 6c65 6765 6e64 5f76 626f 782e      legend_vbox.
+00025be0: 6368 696c 6472 656e 203d 205b 636f 6c6f  children = [colo
+00025bf0: 726d 6170 5f68 626f 785d 0d0a 2020 2020  rmap_hbox]..    
+00025c00: 2020 2020 2020 2020 2020 2020 656c 7365              else
+00025c10: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00025c20: 2020 2020 2020 2073 7465 705f 6368 6b2e         step_chk.
+00025c30: 7661 6c75 6520 3d20 5472 7565 0d0a 0d0a  value = True....
+00025c40: 2020 2020 2020 2020 2020 2020 6465 6620              def 
+00025c50: 7374 6570 5f63 686b 5f63 6861 6e67 6564  step_chk_changed
+00025c60: 2863 6861 6e67 6529 3a0d 0a0d 0a20 2020  (change):....   
+00025c70: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00025c80: 6368 616e 6765 5b22 6e65 7722 5d3a 0d0a  change["new"]:..
+00025c90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025ca0: 2020 2020 6c69 6e65 6172 5f63 686b 2e76      linear_chk.v
+00025cb0: 616c 7565 203d 2046 616c 7365 0d0a 2020  alue = False..  
 00025cc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025cd0: 2020 2020 2020 2022 436c 6173 7320 2220         "Class " 
-00025ce0: 2b20 7374 7228 6929 0d0a 2020 2020 2020  + str(i)..      
+00025cd0: 2020 6966 206c 656e 286c 6179 6572 5f70    if len(layer_p
+00025ce0: 616c 6574 7465 2920 3e20 303a 0d0a 2020  alette) > 0:..  
 00025cf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025d00: 2020 2020 2020 2020 2020 666f 7220 6920            for i 
-00025d10: 696e 2072 616e 6765 2831 2c20 6c65 6e28  in range(1, len(
-00025d20: 6c61 7965 725f 7061 6c65 7474 6529 202b  layer_palette) +
-00025d30: 2031 290d 0a20 2020 2020 2020 2020 2020   1)..           
-00025d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025d50: 205d 0d0a 2020 2020 2020 2020 2020 2020   ]..            
-00025d60: 2020 2020 2020 2020 2020 2020 290d 0a20              ).. 
-00025d70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025d80: 2020 206c 6567 656e 645f 7662 6f78 2e63     legend_vbox.c
-00025d90: 6869 6c64 7265 6e20 3d20 5b0d 0a20 2020  hildren = [..   
-00025da0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025db0: 2020 2020 2063 6f6c 6f72 6d61 705f 6862       colormap_hb
-00025dc0: 6f78 2c0d 0a20 2020 2020 2020 2020 2020  ox,..           
-00025dd0: 2020 2020 2020 2020 2020 2020 206c 6567               leg
-00025de0: 656e 645f 7469 746c 652c 0d0a 2020 2020  end_title,..    
-00025df0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025e00: 2020 2020 6c65 6765 6e64 5f6c 6162 656c      legend_label
-00025e10: 732c 0d0a 2020 2020 2020 2020 2020 2020  s,..            
-00025e20: 2020 2020 2020 2020 5d0d 0a20 2020 2020          ]..     
-00025e30: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-00025e40: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00025e50: 2020 2020 2020 6c69 6e65 6172 5f63 686b        linear_chk
-00025e60: 2e76 616c 7565 203d 2054 7275 650d 0a0d  .value = True...
-00025e70: 0a20 2020 2020 2020 2020 2020 206c 696e  .            lin
-00025e80: 6561 725f 6368 6b2e 6f62 7365 7276 6528  ear_chk.observe(
-00025e90: 6c69 6e65 6172 5f63 686b 5f63 6861 6e67  linear_chk_chang
-00025ea0: 6564 2c20 2276 616c 7565 2229 0d0a 2020  ed, "value")..  
-00025eb0: 2020 2020 2020 2020 2020 7374 6570 5f63            step_c
-00025ec0: 686b 2e6f 6273 6572 7665 2873 7465 705f  hk.observe(step_
-00025ed0: 6368 6b5f 6368 616e 6765 642c 2022 7661  chk_changed, "va
-00025ee0: 6c75 6522 290d 0a0d 0a20 2020 2020 2020  lue")....       
-00025ef0: 2020 2020 2064 6566 2063 6f6c 6f72 6d61       def colorma
-00025f00: 705f 6368 616e 6765 6428 6368 616e 6765  p_changed(change
-00025f10: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-00025f20: 2020 2020 6966 2063 6861 6e67 655b 226e      if change["n
-00025f30: 6577 225d 3a0d 0a0d 0a20 2020 2020 2020  ew"]:....       
-00025f40: 2020 2020 2020 2020 2020 2020 206e 5f63               n_c
-00025f50: 6c61 7373 203d 204e 6f6e 650d 0a20 2020  lass = None..   
-00025f60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025f70: 2069 6620 636c 6173 7365 732e 7661 6c75   if classes.valu
-00025f80: 6520 213d 2022 416e 7922 3a0d 0a20 2020  e != "Any":..   
-00025f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025fa0: 2020 2020 206e 5f63 6c61 7373 203d 2069       n_class = i
-00025fb0: 6e74 2863 6c61 7373 6573 2e76 616c 7565  nt(classes.value
-00025fc0: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
-00025fd0: 2020 2020 2020 2020 2063 6f6c 6f72 7320           colors 
-00025fe0: 3d20 706c 742e 636d 2e67 6574 5f63 6d61  = plt.cm.get_cma
-00025ff0: 7028 636f 6c6f 726d 6170 2e76 616c 7565  p(colormap.value
-00026000: 2c20 6e5f 636c 6173 7329 0d0a 2020 2020  , n_class)..    
-00026010: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026020: 636d 6170 5f63 6f6c 6f72 7320 3d20 5b0d  cmap_colors = [.
-00026030: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00026040: 2020 2020 2020 2020 206d 706c 2e63 6f6c           mpl.col
-00026050: 6f72 732e 7267 6232 6865 7828 636f 6c6f  ors.rgb2hex(colo
-00026060: 7273 2869 2929 5b31 3a5d 2066 6f72 2069  rs(i))[1:] for i
-00026070: 2069 6e20 7261 6e67 6528 636f 6c6f 7273   in range(colors
-00026080: 2e4e 290d 0a20 2020 2020 2020 2020 2020  .N)..           
-00026090: 2020 2020 2020 2020 205d 0d0a 0d0a 2020           ]....  
-000260a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000260b0: 2020 5f2c 2061 7820 3d20 706c 742e 7375    _, ax = plt.su
-000260c0: 6270 6c6f 7473 2866 6967 7369 7a65 3d28  bplots(figsize=(
-000260d0: 362c 2030 2e34 2929 0d0a 2020 2020 2020  6, 0.4))..      
-000260e0: 2020 2020 2020 2020 2020 2020 2020 636d                cm
-000260f0: 6170 203d 206d 706c 2e63 6f6c 6f72 732e  ap = mpl.colors.
-00026100: 4c69 6e65 6172 5365 676d 656e 7465 6443  LinearSegmentedC
-00026110: 6f6c 6f72 6d61 702e 6672 6f6d 5f6c 6973  olormap.from_lis
-00026120: 7428 0d0a 2020 2020 2020 2020 2020 2020  t(..            
-00026130: 2020 2020 2020 2020 2020 2020 2263 7573              "cus
-00026140: 746f 6d22 2c20 746f 5f68 6578 5f63 6f6c  tom", to_hex_col
-00026150: 6f72 7328 636d 6170 5f63 6f6c 6f72 7329  ors(cmap_colors)
-00026160: 2c20 4e3d 3235 360d 0a20 2020 2020 2020  , N=256..       
-00026170: 2020 2020 2020 2020 2020 2020 2029 0d0a               )..
-00026180: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026190: 2020 2020 6e6f 726d 203d 206d 706c 2e63      norm = mpl.c
-000261a0: 6f6c 6f72 732e 4e6f 726d 616c 697a 6528  olors.Normalize(
-000261b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000261c0: 2020 2020 2020 2020 2020 766d 696e 3d76            vmin=v
-000261d0: 616c 7565 5f72 616e 6765 2e76 616c 7565  alue_range.value
-000261e0: 5b30 5d2c 2076 6d61 783d 7661 6c75 655f  [0], vmax=value_
-000261f0: 7261 6e67 652e 7661 6c75 655b 315d 0d0a  range.value[1]..
-00026200: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026210: 2020 2020 290d 0a20 2020 2020 2020 2020      )..         
-00026220: 2020 2020 2020 2020 2020 206d 706c 2e63             mpl.c
-00026230: 6f6c 6f72 6261 722e 436f 6c6f 7262 6172  olorbar.Colorbar
-00026240: 4261 7365 280d 0a20 2020 2020 2020 2020  Base(..         
-00026250: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-00026260: 782c 206e 6f72 6d3d 6e6f 726d 2c20 636d  x, norm=norm, cm
-00026270: 6170 3d63 6d61 702c 206f 7269 656e 7461  ap=cmap, orienta
-00026280: 7469 6f6e 3d22 686f 7269 7a6f 6e74 616c  tion="horizontal
-00026290: 220d 0a20 2020 2020 2020 2020 2020 2020  "..             
-000262a0: 2020 2020 2020 2029 0d0a 0d0a 2020 2020         )....    
-000262b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000262c0: 7061 6c65 7474 652e 7661 6c75 6520 3d20  palette.value = 
-000262d0: 222c 2022 2e6a 6f69 6e28 636d 6170 5f63  ", ".join(cmap_c
-000262e0: 6f6c 6f72 7329 0d0a 0d0a 2020 2020 2020  olors)....      
-000262f0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00026300: 2073 656c 662e 636f 6c6f 7262 6172 5f77   self.colorbar_w
-00026310: 6964 6765 7420 6973 204e 6f6e 653a 0d0a  idget is None:..
-00026320: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026330: 2020 2020 2020 2020 7365 6c66 2e63 6f6c          self.col
-00026340: 6f72 6261 725f 7769 6467 6574 203d 2077  orbar_widget = w
-00026350: 6964 6765 7473 2e4f 7574 7075 7428 0d0a  idgets.Output(..
-00026360: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026370: 2020 2020 2020 2020 2020 2020 6c61 796f              layo
-00026380: 7574 3d77 6964 6765 7473 2e4c 6179 6f75  ut=widgets.Layou
-00026390: 7428 6865 6967 6874 3d22 3630 7078 2229  t(height="60px")
-000263a0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000263b0: 2020 2020 2020 2020 2020 290d 0a0d 0a20            ).... 
-000263c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000263d0: 2020 2069 6620 7365 6c66 2e63 6f6c 6f72     if self.color
-000263e0: 6261 725f 6374 726c 2069 7320 4e6f 6e65  bar_ctrl is None
-000263f0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00026400: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00026410: 636f 6c6f 7262 6172 5f63 7472 6c20 3d20  colorbar_ctrl = 
-00026420: 6970 796c 6561 666c 6574 2e57 6964 6765  ipyleaflet.Widge
-00026430: 7443 6f6e 7472 6f6c 280d 0a20 2020 2020  tControl(..     
-00026440: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026450: 2020 2020 2020 2077 6964 6765 743d 7365         widget=se
-00026460: 6c66 2e63 6f6c 6f72 6261 725f 7769 6467  lf.colorbar_widg
-00026470: 6574 2c20 706f 7369 7469 6f6e 3d22 626f  et, position="bo
-00026480: 7474 6f6d 7269 6768 7422 0d0a 2020 2020  ttomright"..    
-00026490: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000264a0: 2020 2020 290d 0a20 2020 2020 2020 2020      )..         
-000264b0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-000264c0: 656c 662e 6164 645f 636f 6e74 726f 6c28  elf.add_control(
-000264d0: 7365 6c66 2e63 6f6c 6f72 6261 725f 6374  self.colorbar_ct
-000264e0: 726c 290d 0a0d 0a20 2020 2020 2020 2020  rl)....         
-000264f0: 2020 2020 2020 2020 2020 2063 6f6c 6f72             color
-00026500: 6261 725f 6f75 7470 7574 203d 2073 656c  bar_output = sel
-00026510: 662e 636f 6c6f 7262 6172 5f77 6964 6765  f.colorbar_widge
-00026520: 740d 0a20 2020 2020 2020 2020 2020 2020  t..             
-00026530: 2020 2020 2020 2077 6974 6820 636f 6c6f         with colo
-00026540: 7262 6172 5f6f 7574 7075 743a 0d0a 2020  rbar_output:..  
-00026550: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026560: 2020 2020 2020 636f 6c6f 7262 6172 5f6f        colorbar_o
-00026570: 7574 7075 742e 636c 6561 725f 6f75 7470  utput.clear_outp
-00026580: 7574 2829 0d0a 2020 2020 2020 2020 2020  ut()..          
-00026590: 2020 2020 2020 2020 2020 2020 2020 706c                pl
-000265a0: 742e 7368 6f77 2829 0d0a 2020 2020 2020  t.show()..      
-000265b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000265c0: 2020 2320 6469 7370 6c61 7928 636f 6c6f    # display(colo
-000265d0: 7262 6172 290d 0a0d 0a20 2020 2020 2020  rbar)....       
-000265e0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-000265f0: 6c65 6e28 7061 6c65 7474 652e 7661 6c75  len(palette.valu
-00026600: 6529 203e 2030 2061 6e64 2022 2c22 2069  e) > 0 and "," i
-00026610: 6e20 7061 6c65 7474 652e 7661 6c75 653a  n palette.value:
-00026620: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00026630: 2020 2020 2020 2020 2020 6c61 6265 6c73            labels
-00026640: 203d 205b 0d0a 2020 2020 2020 2020 2020   = [..          
-00026650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026660: 2020 6622 436c 6173 7320 7b69 2b31 7d22    f"Class {i+1}"
-00026670: 2066 6f72 2069 2069 6e20 7261 6e67 6528   for i in range(
-00026680: 6c65 6e28 7061 6c65 7474 652e 7661 6c75  len(palette.valu
-00026690: 652e 7370 6c69 7428 222c 2229 2929 0d0a  e.split(",")))..
-000266a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000266b0: 2020 2020 2020 2020 5d0d 0a20 2020 2020          ]..     
-000266c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000266d0: 2020 206c 6567 656e 645f 6c61 6265 6c73     legend_labels
-000266e0: 2e76 616c 7565 203d 2022 2c20 222e 6a6f  .value = ", ".jo
-000266f0: 696e 286c 6162 656c 7329 0d0a 0d0a 2020  in(labels)....  
-00026700: 2020 2020 2020 2020 2020 636f 6c6f 726d            colorm
-00026710: 6170 2e6f 6273 6572 7665 2863 6f6c 6f72  ap.observe(color
-00026720: 6d61 705f 6368 616e 6765 642c 2022 7661  map_changed, "va
-00026730: 6c75 6522 290d 0a0d 0a20 2020 2020 2020  lue")....       
-00026740: 2020 2020 2062 746e 5f77 6964 7468 203d       btn_width =
-00026750: 2022 3937 2e35 7078 220d 0a20 2020 2020   "97.5px"..     
-00026760: 2020 2020 2020 2069 6d70 6f72 745f 6274         import_bt
-00026770: 6e20 3d20 7769 6467 6574 732e 4275 7474  n = widgets.Butt
-00026780: 6f6e 280d 0a20 2020 2020 2020 2020 2020  on(..           
-00026790: 2020 2020 2064 6573 6372 6970 7469 6f6e       description
-000267a0: 3d22 496d 706f 7274 222c 0d0a 2020 2020  ="Import",..    
-000267b0: 2020 2020 2020 2020 2020 2020 6275 7474              butt
-000267c0: 6f6e 5f73 7479 6c65 3d22 7072 696d 6172  on_style="primar
-000267d0: 7922 2c0d 0a20 2020 2020 2020 2020 2020  y",..           
-000267e0: 2020 2020 2074 6f6f 6c74 6970 3d22 496d       tooltip="Im
-000267f0: 706f 7274 2076 6973 2070 6172 616d 7320  port vis params 
-00026800: 746f 206e 6f74 6562 6f6f 6b22 2c0d 0a20  to notebook",.. 
-00026810: 2020 2020 2020 2020 2020 2020 2020 206c                 l
-00026820: 6179 6f75 743d 7769 6467 6574 732e 4c61  ayout=widgets.La
-00026830: 796f 7574 2877 6964 7468 3d62 746e 5f77  yout(width=btn_w
-00026840: 6964 7468 292c 0d0a 2020 2020 2020 2020  idth),..        
-00026850: 2020 2020 290d 0a0d 0a20 2020 2020 2020      )....       
-00026860: 2020 2020 2061 7070 6c79 5f62 746e 203d       apply_btn =
-00026870: 2077 6964 6765 7473 2e42 7574 746f 6e28   widgets.Button(
-00026880: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00026890: 2020 6465 7363 7269 7074 696f 6e3d 2241    description="A
-000268a0: 7070 6c79 222c 0d0a 2020 2020 2020 2020  pply",..        
-000268b0: 2020 2020 2020 2020 746f 6f6c 7469 703d          tooltip=
-000268c0: 2241 7070 6c79 2076 6973 2070 6172 616d  "Apply vis param
-000268d0: 7320 746f 2074 6865 206c 6179 6572 222c  s to the layer",
-000268e0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000268f0: 2020 6c61 796f 7574 3d77 6964 6765 7473    layout=widgets
-00026900: 2e4c 6179 6f75 7428 7769 6474 683d 6274  .Layout(width=bt
-00026910: 6e5f 7769 6474 6829 2c0d 0a20 2020 2020  n_width),..     
-00026920: 2020 2020 2020 2029 0d0a 0d0a 2020 2020         )....    
-00026930: 2020 2020 2020 2020 636c 6f73 655f 6274          close_bt
-00026940: 6e20 3d20 7769 6467 6574 732e 4275 7474  n = widgets.Butt
-00026950: 6f6e 280d 0a20 2020 2020 2020 2020 2020  on(..           
-00026960: 2020 2020 2064 6573 6372 6970 7469 6f6e       description
-00026970: 3d22 436c 6f73 6522 2c0d 0a20 2020 2020  ="Close",..     
-00026980: 2020 2020 2020 2020 2020 2074 6f6f 6c74             toolt
-00026990: 6970 3d22 436c 6f73 6520 7669 7320 7061  ip="Close vis pa
-000269a0: 7261 6d73 2064 6961 676c 6f67 222c 0d0a  rams diaglog",..
-000269b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000269c0: 6c61 796f 7574 3d77 6964 6765 7473 2e4c  layout=widgets.L
-000269d0: 6179 6f75 7428 7769 6474 683d 6274 6e5f  ayout(width=btn_
-000269e0: 7769 6474 6829 2c0d 0a20 2020 2020 2020  width),..       
-000269f0: 2020 2020 2029 0d0a 0d0a 2020 2020 2020       )....      
-00026a00: 2020 2020 2020 6465 6620 696d 706f 7274        def import
-00026a10: 5f62 746e 5f63 6c69 636b 6564 2862 293a  _btn_clicked(b):
-00026a20: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00026a30: 2020 2020 7669 7320 3d20 7b7d 0d0a 2020      vis = {}..  
-00026a40: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00026a50: 2072 6164 696f 312e 696e 6465 7820 3d3d   radio1.index ==
-00026a60: 2030 3a0d 0a20 2020 2020 2020 2020 2020   0:..           
-00026a70: 2020 2020 2020 2020 2076 6973 5b22 6261           vis["ba
-00026a80: 6e64 7322 5d20 3d20 5b62 616e 6431 5f64  nds"] = [band1_d
-00026a90: 726f 7064 6f77 6e2e 7661 6c75 655d 0d0a  ropdown.value]..
-00026aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026ab0: 2020 2020 6966 206c 656e 2870 616c 6574      if len(palet
-00026ac0: 7465 2e76 616c 7565 2920 3e20 303a 0d0a  te.value) > 0:..
-00026ad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026ae0: 2020 2020 2020 2020 7669 735b 2270 616c          vis["pal
-00026af0: 6574 7465 225d 203d 2070 616c 6574 7465  ette"] = palette
-00026b00: 2e76 616c 7565 2e73 706c 6974 2822 2c22  .value.split(","
-00026b10: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-00026b20: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
-00026b30: 2020 2020 2020 2020 2020 2020 2020 7669                vi
-00026b40: 735b 2262 616e 6473 225d 203d 205b 0d0a  s["bands"] = [..
-00026b50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026b60: 2020 2020 2020 2020 6261 6e64 315f 6472          band1_dr
-00026b70: 6f70 646f 776e 2e76 616c 7565 2c0d 0a20  opdown.value,.. 
-00026b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026b90: 2020 2020 2020 2062 616e 6432 5f64 726f         band2_dro
-00026ba0: 7064 6f77 6e2e 7661 6c75 652c 0d0a 2020  pdown.value,..  
-00026bb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026bc0: 2020 2020 2020 6261 6e64 335f 6472 6f70        band3_drop
-00026bd0: 646f 776e 2e76 616c 7565 2c0d 0a20 2020  down.value,..   
+00025d00: 2020 2020 2020 6c65 6765 6e64 5f6c 6162        legend_lab
+00025d10: 656c 732e 7661 6c75 6520 3d20 222c 222e  els.value = ",".
+00025d20: 6a6f 696e 280d 0a20 2020 2020 2020 2020  join(..         
+00025d30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025d40: 2020 205b 0d0a 2020 2020 2020 2020 2020     [..          
+00025d50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025d60: 2020 2020 2020 2243 6c61 7373 2022 202b        "Class " +
+00025d70: 2073 7472 2869 290d 0a20 2020 2020 2020   str(i)..       
+00025d80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025d90: 2020 2020 2020 2020 2066 6f72 2069 2069           for i i
+00025da0: 6e20 7261 6e67 6528 312c 206c 656e 286c  n range(1, len(l
+00025db0: 6179 6572 5f70 616c 6574 7465 2920 2b20  ayer_palette) + 
+00025dc0: 3129 0d0a 2020 2020 2020 2020 2020 2020  1)..            
+00025dd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025de0: 5d0d 0a20 2020 2020 2020 2020 2020 2020  ]..             
+00025df0: 2020 2020 2020 2020 2020 2029 0d0a 2020             )..  
+00025e00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025e10: 2020 6c65 6765 6e64 5f76 626f 782e 6368    legend_vbox.ch
+00025e20: 696c 6472 656e 203d 205b 0d0a 2020 2020  ildren = [..    
+00025e30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025e40: 2020 2020 636f 6c6f 726d 6170 5f68 626f      colormap_hbo
+00025e50: 782c 0d0a 2020 2020 2020 2020 2020 2020  x,..            
+00025e60: 2020 2020 2020 2020 2020 2020 6c65 6765              lege
+00025e70: 6e64 5f74 6974 6c65 2c0d 0a20 2020 2020  nd_title,..     
+00025e80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025e90: 2020 206c 6567 656e 645f 6c61 6265 6c73     legend_labels
+00025ea0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+00025eb0: 2020 2020 2020 205d 0d0a 2020 2020 2020         ]..      
+00025ec0: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
+00025ed0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00025ee0: 2020 2020 206c 696e 6561 725f 6368 6b2e       linear_chk.
+00025ef0: 7661 6c75 6520 3d20 5472 7565 0d0a 0d0a  value = True....
+00025f00: 2020 2020 2020 2020 2020 2020 6c69 6e65              line
+00025f10: 6172 5f63 686b 2e6f 6273 6572 7665 286c  ar_chk.observe(l
+00025f20: 696e 6561 725f 6368 6b5f 6368 616e 6765  inear_chk_change
+00025f30: 642c 2022 7661 6c75 6522 290d 0a20 2020  d, "value")..   
+00025f40: 2020 2020 2020 2020 2073 7465 705f 6368           step_ch
+00025f50: 6b2e 6f62 7365 7276 6528 7374 6570 5f63  k.observe(step_c
+00025f60: 686b 5f63 6861 6e67 6564 2c20 2276 616c  hk_changed, "val
+00025f70: 7565 2229 0d0a 0d0a 2020 2020 2020 2020  ue")....        
+00025f80: 2020 2020 6465 6620 636f 6c6f 726d 6170      def colormap
+00025f90: 5f63 6861 6e67 6564 2863 6861 6e67 6529  _changed(change)
+00025fa0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00025fb0: 2020 2069 6620 6368 616e 6765 5b22 6e65     if change["ne
+00025fc0: 7722 5d3a 0d0a 0d0a 2020 2020 2020 2020  w"]:....        
+00025fd0: 2020 2020 2020 2020 2020 2020 6e5f 636c              n_cl
+00025fe0: 6173 7320 3d20 4e6f 6e65 0d0a 2020 2020  ass = None..    
+00025ff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00026000: 6966 2063 6c61 7373 6573 2e76 616c 7565  if classes.value
+00026010: 2021 3d20 2241 6e79 223a 0d0a 2020 2020   != "Any":..    
+00026020: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00026030: 2020 2020 6e5f 636c 6173 7320 3d20 696e      n_class = in
+00026040: 7428 636c 6173 7365 732e 7661 6c75 6529  t(classes.value)
+00026050: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00026060: 2020 2020 2020 2020 636f 6c6f 7273 203d          colors =
+00026070: 2070 6c74 2e63 6d2e 6765 745f 636d 6170   plt.cm.get_cmap
+00026080: 2863 6f6c 6f72 6d61 702e 7661 6c75 652c  (colormap.value,
+00026090: 206e 5f63 6c61 7373 290d 0a20 2020 2020   n_class)..     
+000260a0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+000260b0: 6d61 705f 636f 6c6f 7273 203d 205b 0d0a  map_colors = [..
+000260c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000260d0: 2020 2020 2020 2020 6d70 6c2e 636f 6c6f          mpl.colo
+000260e0: 7273 2e72 6762 3268 6578 2863 6f6c 6f72  rs.rgb2hex(color
+000260f0: 7328 6929 295b 313a 5d20 666f 7220 6920  s(i))[1:] for i 
+00026100: 696e 2072 616e 6765 2863 6f6c 6f72 732e  in range(colors.
+00026110: 4e29 0d0a 2020 2020 2020 2020 2020 2020  N)..            
+00026120: 2020 2020 2020 2020 5d0d 0a0d 0a20 2020          ]....   
+00026130: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00026140: 205f 2c20 6178 203d 2070 6c74 2e73 7562   _, ax = plt.sub
+00026150: 706c 6f74 7328 6669 6773 697a 653d 2836  plots(figsize=(6
+00026160: 2c20 302e 3429 290d 0a20 2020 2020 2020  , 0.4))..       
+00026170: 2020 2020 2020 2020 2020 2020 2063 6d61               cma
+00026180: 7020 3d20 6d70 6c2e 636f 6c6f 7273 2e4c  p = mpl.colors.L
+00026190: 696e 6561 7253 6567 6d65 6e74 6564 436f  inearSegmentedCo
+000261a0: 6c6f 726d 6170 2e66 726f 6d5f 6c69 7374  lormap.from_list
+000261b0: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
+000261c0: 2020 2020 2020 2020 2020 2022 6375 7374             "cust
+000261d0: 6f6d 222c 2074 6f5f 6865 785f 636f 6c6f  om", to_hex_colo
+000261e0: 7273 2863 6d61 705f 636f 6c6f 7273 292c  rs(cmap_colors),
+000261f0: 204e 3d32 3536 0d0a 2020 2020 2020 2020   N=256..        
+00026200: 2020 2020 2020 2020 2020 2020 290d 0a20              ).. 
+00026210: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00026220: 2020 206e 6f72 6d20 3d20 6d70 6c2e 636f     norm = mpl.co
+00026230: 6c6f 7273 2e4e 6f72 6d61 6c69 7a65 280d  lors.Normalize(.
+00026240: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00026250: 2020 2020 2020 2020 2076 6d69 6e3d 7661           vmin=va
+00026260: 6c75 655f 7261 6e67 652e 7661 6c75 655b  lue_range.value[
+00026270: 305d 2c20 766d 6178 3d76 616c 7565 5f72  0], vmax=value_r
+00026280: 616e 6765 2e76 616c 7565 5b31 5d0d 0a20  ange.value[1].. 
+00026290: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000262a0: 2020 2029 0d0a 2020 2020 2020 2020 2020     )..          
+000262b0: 2020 2020 2020 2020 2020 6d70 6c2e 636f            mpl.co
+000262c0: 6c6f 7262 6172 2e43 6f6c 6f72 6261 7242  lorbar.ColorbarB
+000262d0: 6173 6528 0d0a 2020 2020 2020 2020 2020  ase(..          
+000262e0: 2020 2020 2020 2020 2020 2020 2020 6178                ax
+000262f0: 2c20 6e6f 726d 3d6e 6f72 6d2c 2063 6d61  , norm=norm, cma
+00026300: 703d 636d 6170 2c20 6f72 6965 6e74 6174  p=cmap, orientat
+00026310: 696f 6e3d 2268 6f72 697a 6f6e 7461 6c22  ion="horizontal"
+00026320: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00026330: 2020 2020 2020 290d 0a0d 0a20 2020 2020        )....     
+00026340: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+00026350: 616c 6574 7465 2e76 616c 7565 203d 2022  alette.value = "
+00026360: 2c20 222e 6a6f 696e 2863 6d61 705f 636f  , ".join(cmap_co
+00026370: 6c6f 7273 290d 0a0d 0a20 2020 2020 2020  lors)....       
+00026380: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00026390: 7365 6c66 2e63 6f6c 6f72 6261 725f 7769  self.colorbar_wi
+000263a0: 6467 6574 2069 7320 4e6f 6e65 3a0d 0a20  dget is None:.. 
+000263b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000263c0: 2020 2020 2020 2073 656c 662e 636f 6c6f         self.colo
+000263d0: 7262 6172 5f77 6964 6765 7420 3d20 7769  rbar_widget = wi
+000263e0: 6467 6574 732e 4f75 7470 7574 280d 0a20  dgets.Output(.. 
+000263f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00026400: 2020 2020 2020 2020 2020 206c 6179 6f75             layou
+00026410: 743d 7769 6467 6574 732e 4c61 796f 7574  t=widgets.Layout
+00026420: 2868 6569 6768 743d 2236 3070 7822 290d  (height="60px").
+00026430: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00026440: 2020 2020 2020 2020 2029 0d0a 0d0a 2020           )....  
+00026450: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00026460: 2020 6966 2073 656c 662e 636f 6c6f 7262    if self.colorb
+00026470: 6172 5f63 7472 6c20 6973 204e 6f6e 653a  ar_ctrl is None:
+00026480: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00026490: 2020 2020 2020 2020 2020 7365 6c66 2e63            self.c
+000264a0: 6f6c 6f72 6261 725f 6374 726c 203d 2069  olorbar_ctrl = i
+000264b0: 7079 6c65 6166 6c65 742e 5769 6467 6574  pyleaflet.Widget
+000264c0: 436f 6e74 726f 6c28 0d0a 2020 2020 2020  Control(..      
+000264d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000264e0: 2020 2020 2020 7769 6467 6574 3d73 656c        widget=sel
+000264f0: 662e 636f 6c6f 7262 6172 5f77 6964 6765  f.colorbar_widge
+00026500: 742c 2070 6f73 6974 696f 6e3d 2262 6f74  t, position="bot
+00026510: 746f 6d72 6967 6874 220d 0a20 2020 2020  tomright"..     
+00026520: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00026530: 2020 2029 0d0a 2020 2020 2020 2020 2020     )..          
+00026540: 2020 2020 2020 2020 2020 2020 2020 7365                se
+00026550: 6c66 2e61 6464 5f63 6f6e 7472 6f6c 2873  lf.add_control(s
+00026560: 656c 662e 636f 6c6f 7262 6172 5f63 7472  elf.colorbar_ctr
+00026570: 6c29 0d0a 0d0a 2020 2020 2020 2020 2020  l)....          
+00026580: 2020 2020 2020 2020 2020 636f 6c6f 7262            colorb
+00026590: 6172 5f6f 7574 7075 7420 3d20 7365 6c66  ar_output = self
+000265a0: 2e63 6f6c 6f72 6261 725f 7769 6467 6574  .colorbar_widget
+000265b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000265c0: 2020 2020 2020 7769 7468 2063 6f6c 6f72        with color
+000265d0: 6261 725f 6f75 7470 7574 3a0d 0a20 2020  bar_output:..   
+000265e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000265f0: 2020 2020 2063 6f6c 6f72 6261 725f 6f75       colorbar_ou
+00026600: 7470 7574 2e63 6c65 6172 5f6f 7574 7075  tput.clear_outpu
+00026610: 7428 290d 0a20 2020 2020 2020 2020 2020  t()..           
+00026620: 2020 2020 2020 2020 2020 2020 2070 6c74               plt
+00026630: 2e73 686f 7728 290d 0a20 2020 2020 2020  .show()..       
+00026640: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00026650: 2023 2064 6973 706c 6179 2863 6f6c 6f72   # display(color
+00026660: 6261 7229 0d0a 0d0a 2020 2020 2020 2020  bar)....        
+00026670: 2020 2020 2020 2020 2020 2020 6966 206c              if l
+00026680: 656e 2870 616c 6574 7465 2e76 616c 7565  en(palette.value
+00026690: 2920 3e20 3020 616e 6420 222c 2220 696e  ) > 0 and "," in
+000266a0: 2070 616c 6574 7465 2e76 616c 7565 3a0d   palette.value:.
+000266b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000266c0: 2020 2020 2020 2020 206c 6162 656c 7320           labels 
+000266d0: 3d20 5b0d 0a20 2020 2020 2020 2020 2020  = [..           
+000266e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000266f0: 2066 2243 6c61 7373 207b 692b 317d 2220   f"Class {i+1}" 
+00026700: 666f 7220 6920 696e 2072 616e 6765 286c  for i in range(l
+00026710: 656e 2870 616c 6574 7465 2e76 616c 7565  en(palette.value
+00026720: 2e73 706c 6974 2822 2c22 2929 290d 0a20  .split(","))).. 
+00026730: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00026740: 2020 2020 2020 205d 0d0a 2020 2020 2020         ]..      
+00026750: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00026760: 2020 6c65 6765 6e64 5f6c 6162 656c 732e    legend_labels.
+00026770: 7661 6c75 6520 3d20 222c 2022 2e6a 6f69  value = ", ".joi
+00026780: 6e28 6c61 6265 6c73 290d 0a0d 0a20 2020  n(labels)....   
+00026790: 2020 2020 2020 2020 2063 6f6c 6f72 6d61           colorma
+000267a0: 702e 6f62 7365 7276 6528 636f 6c6f 726d  p.observe(colorm
+000267b0: 6170 5f63 6861 6e67 6564 2c20 2276 616c  ap_changed, "val
+000267c0: 7565 2229 0d0a 0d0a 2020 2020 2020 2020  ue")....        
+000267d0: 2020 2020 6274 6e5f 7769 6474 6820 3d20      btn_width = 
+000267e0: 2239 372e 3570 7822 0d0a 2020 2020 2020  "97.5px"..      
+000267f0: 2020 2020 2020 696d 706f 7274 5f62 746e        import_btn
+00026800: 203d 2077 6964 6765 7473 2e42 7574 746f   = widgets.Butto
+00026810: 6e28 0d0a 2020 2020 2020 2020 2020 2020  n(..            
+00026820: 2020 2020 6465 7363 7269 7074 696f 6e3d      description=
+00026830: 2249 6d70 6f72 7422 2c0d 0a20 2020 2020  "Import",..     
+00026840: 2020 2020 2020 2020 2020 2062 7574 746f             butto
+00026850: 6e5f 7374 796c 653d 2270 7269 6d61 7279  n_style="primary
+00026860: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
+00026870: 2020 2020 746f 6f6c 7469 703d 2249 6d70      tooltip="Imp
+00026880: 6f72 7420 7669 7320 7061 7261 6d73 2074  ort vis params t
+00026890: 6f20 6e6f 7465 626f 6f6b 222c 0d0a 2020  o notebook",..  
+000268a0: 2020 2020 2020 2020 2020 2020 2020 6c61                la
+000268b0: 796f 7574 3d77 6964 6765 7473 2e4c 6179  yout=widgets.Lay
+000268c0: 6f75 7428 7769 6474 683d 6274 6e5f 7769  out(width=btn_wi
+000268d0: 6474 6829 2c0d 0a20 2020 2020 2020 2020  dth),..         
+000268e0: 2020 2029 0d0a 0d0a 2020 2020 2020 2020     )....        
+000268f0: 2020 2020 6170 706c 795f 6274 6e20 3d20      apply_btn = 
+00026900: 7769 6467 6574 732e 4275 7474 6f6e 280d  widgets.Button(.
+00026910: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00026920: 2064 6573 6372 6970 7469 6f6e 3d22 4170   description="Ap
+00026930: 706c 7922 2c0d 0a20 2020 2020 2020 2020  ply",..         
+00026940: 2020 2020 2020 2074 6f6f 6c74 6970 3d22         tooltip="
+00026950: 4170 706c 7920 7669 7320 7061 7261 6d73  Apply vis params
+00026960: 2074 6f20 7468 6520 6c61 7965 7222 2c0d   to the layer",.
+00026970: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00026980: 206c 6179 6f75 743d 7769 6467 6574 732e   layout=widgets.
+00026990: 4c61 796f 7574 2877 6964 7468 3d62 746e  Layout(width=btn
+000269a0: 5f77 6964 7468 292c 0d0a 2020 2020 2020  _width),..      
+000269b0: 2020 2020 2020 290d 0a0d 0a20 2020 2020        )....     
+000269c0: 2020 2020 2020 2063 6c6f 7365 5f62 746e         close_btn
+000269d0: 203d 2077 6964 6765 7473 2e42 7574 746f   = widgets.Butto
+000269e0: 6e28 0d0a 2020 2020 2020 2020 2020 2020  n(..            
+000269f0: 2020 2020 6465 7363 7269 7074 696f 6e3d      description=
+00026a00: 2243 6c6f 7365 222c 0d0a 2020 2020 2020  "Close",..      
+00026a10: 2020 2020 2020 2020 2020 746f 6f6c 7469            toolti
+00026a20: 703d 2243 6c6f 7365 2076 6973 2070 6172  p="Close vis par
+00026a30: 616d 7320 6469 6167 6c6f 6722 2c0d 0a20  ams diaglog",.. 
+00026a40: 2020 2020 2020 2020 2020 2020 2020 206c                 l
+00026a50: 6179 6f75 743d 7769 6467 6574 732e 4c61  ayout=widgets.La
+00026a60: 796f 7574 2877 6964 7468 3d62 746e 5f77  yout(width=btn_w
+00026a70: 6964 7468 292c 0d0a 2020 2020 2020 2020  idth),..        
+00026a80: 2020 2020 290d 0a0d 0a20 2020 2020 2020      )....       
+00026a90: 2020 2020 2064 6566 2069 6d70 6f72 745f       def import_
+00026aa0: 6274 6e5f 636c 6963 6b65 6428 6229 3a0d  btn_clicked(b):.
+00026ab0: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+00026ac0: 2020 2076 6973 203d 207b 7d0d 0a20 2020     vis = {}..   
+00026ad0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00026ae0: 7261 6469 6f31 2e69 6e64 6578 203d 3d20  radio1.index == 
+00026af0: 303a 0d0a 2020 2020 2020 2020 2020 2020  0:..            
+00026b00: 2020 2020 2020 2020 7669 735b 2262 616e          vis["ban
+00026b10: 6473 225d 203d 205b 6261 6e64 315f 6472  ds"] = [band1_dr
+00026b20: 6f70 646f 776e 2e76 616c 7565 5d0d 0a20  opdown.value].. 
+00026b30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00026b40: 2020 2069 6620 6c65 6e28 7061 6c65 7474     if len(palett
+00026b50: 652e 7661 6c75 6529 203e 2030 3a0d 0a20  e.value) > 0:.. 
+00026b60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00026b70: 2020 2020 2020 2076 6973 5b22 7061 6c65         vis["pale
+00026b80: 7474 6522 5d20 3d20 7061 6c65 7474 652e  tte"] = palette.
+00026b90: 7661 6c75 652e 7370 6c69 7428 222c 2229  value.split(",")
+00026ba0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00026bb0: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
+00026bc0: 2020 2020 2020 2020 2020 2020 2076 6973               vis
+00026bd0: 5b22 6261 6e64 7322 5d20 3d20 5b0d 0a20  ["bands"] = [.. 
 00026be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026bf0: 205d 0d0a 0d0a 2020 2020 2020 2020 2020   ]....          
-00026c00: 2020 2020 2020 7669 735b 226d 696e 225d        vis["min"]
-00026c10: 203d 2076 616c 7565 5f72 616e 6765 2e76   = value_range.v
-00026c20: 616c 7565 5b30 5d0d 0a20 2020 2020 2020  alue[0]..       
-00026c30: 2020 2020 2020 2020 2076 6973 5b22 6d61           vis["ma
-00026c40: 7822 5d20 3d20 7661 6c75 655f 7261 6e67  x"] = value_rang
-00026c50: 652e 7661 6c75 655b 315d 0d0a 2020 2020  e.value[1]..    
-00026c60: 2020 2020 2020 2020 2020 2020 7669 735b              vis[
-00026c70: 226f 7061 6369 7479 225d 203d 206f 7061  "opacity"] = opa
-00026c80: 6369 7479 2e76 616c 7565 0d0a 2020 2020  city.value..    
-00026c90: 2020 2020 2020 2020 2020 2020 7669 735b              vis[
-00026ca0: 2267 616d 6d61 225d 203d 2067 616d 6d61  "gamma"] = gamma
-00026cb0: 2e76 616c 7565 0d0a 0d0a 2020 2020 2020  .value....      
-00026cc0: 2020 2020 2020 2020 2020 6372 6561 7465            create
-00026cd0: 5f63 6f64 655f 6365 6c6c 2866 2276 6973  _code_cell(f"vis
-00026ce0: 5f70 6172 616d 7320 3d20 7b73 7472 2876  _params = {str(v
-00026cf0: 6973 297d 2229 0d0a 0d0a 2020 2020 2020  is)}")....      
-00026d00: 2020 2020 2020 6465 6620 6170 706c 795f        def apply_
-00026d10: 6274 6e5f 636c 6963 6b65 6428 6229 3a0d  btn_clicked(b):.
-00026d20: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-00026d30: 2020 2076 6973 203d 207b 7d0d 0a20 2020     vis = {}..   
-00026d40: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00026d50: 7261 6469 6f31 2e69 6e64 6578 203d 3d20  radio1.index == 
-00026d60: 303a 0d0a 2020 2020 2020 2020 2020 2020  0:..            
-00026d70: 2020 2020 2020 2020 7669 735b 2262 616e          vis["ban
-00026d80: 6473 225d 203d 205b 6261 6e64 315f 6472  ds"] = [band1_dr
-00026d90: 6f70 646f 776e 2e76 616c 7565 5d0d 0a20  opdown.value].. 
-00026da0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026db0: 2020 2069 6620 6c65 6e28 7061 6c65 7474     if len(palett
-00026dc0: 652e 7661 6c75 6529 203e 2030 3a0d 0a20  e.value) > 0:.. 
-00026dd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026de0: 2020 2020 2020 2076 6973 5b22 7061 6c65         vis["pale
-00026df0: 7474 6522 5d20 3d20 5b63 2e73 7472 6970  tte"] = [c.strip
-00026e00: 2829 2066 6f72 2063 2069 6e20 7061 6c65  () for c in pale
-00026e10: 7474 652e 7661 6c75 652e 7370 6c69 7428  tte.value.split(
-00026e20: 222c 2229 5d0d 0a20 2020 2020 2020 2020  ",")]..         
-00026e30: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
-00026e40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026e50: 2020 7669 735b 2262 616e 6473 225d 203d    vis["bands"] =
-00026e60: 205b 0d0a 2020 2020 2020 2020 2020 2020   [..            
-00026e70: 2020 2020 2020 2020 2020 2020 6261 6e64              band
-00026e80: 315f 6472 6f70 646f 776e 2e76 616c 7565  1_dropdown.value
-00026e90: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00026ea0: 2020 2020 2020 2020 2020 2062 616e 6432             band2
-00026eb0: 5f64 726f 7064 6f77 6e2e 7661 6c75 652c  _dropdown.value,
-00026ec0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00026ed0: 2020 2020 2020 2020 2020 6261 6e64 335f            band3_
-00026ee0: 6472 6f70 646f 776e 2e76 616c 7565 2c0d  dropdown.value,.
-00026ef0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00026f00: 2020 2020 205d 0d0a 2020 2020 2020 2020       ]..        
-00026f10: 2020 2020 2020 2020 2020 2020 7669 735b              vis[
-00026f20: 2267 616d 6d61 225d 203d 2067 616d 6d61  "gamma"] = gamma
-00026f30: 2e76 616c 7565 0d0a 0d0a 2020 2020 2020  .value....      
-00026f40: 2020 2020 2020 2020 2020 7669 735b 226d            vis["m
-00026f50: 696e 225d 203d 2076 616c 7565 5f72 616e  in"] = value_ran
-00026f60: 6765 2e76 616c 7565 5b30 5d0d 0a20 2020  ge.value[0]..   
-00026f70: 2020 2020 2020 2020 2020 2020 2076 6973               vis
-00026f80: 5b22 6d61 7822 5d20 3d20 7661 6c75 655f  ["max"] = value_
-00026f90: 7261 6e67 652e 7661 6c75 655b 315d 0d0a  range.value[1]..
-00026fa0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00026fb0: 2020 7365 6c66 2e61 6464 4c61 7965 7228    self.addLayer(
-00026fc0: 6565 5f6f 626a 6563 742c 2076 6973 2c20  ee_object, vis, 
-00026fd0: 6c61 7965 725f 6e61 6d65 2c20 5472 7565  layer_name, True
-00026fe0: 2c20 6f70 6163 6974 792e 7661 6c75 6529  , opacity.value)
-00026ff0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00027000: 2020 6565 5f6c 6179 6572 2e76 6973 6962    ee_layer.visib
-00027010: 6c65 203d 2046 616c 7365 0d0a 0d0a 2020  le = False....  
-00027020: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00027030: 206c 6567 656e 645f 6368 6b2e 7661 6c75   legend_chk.valu
-00027040: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-00027050: 2020 2020 2020 2020 6966 2028 0d0a 2020          if (..  
-00027060: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027070: 2020 2020 2020 7365 6c66 2e63 6f6c 6f72        self.color
-00027080: 6261 725f 6374 726c 2069 7320 6e6f 7420  bar_ctrl is not 
-00027090: 4e6f 6e65 0d0a 2020 2020 2020 2020 2020  None..          
-000270a0: 2020 2020 2020 2020 2020 2020 2020 616e                an
-000270b0: 6420 7365 6c66 2e63 6f6c 6f72 6261 725f  d self.colorbar_
-000270c0: 6374 726c 2069 6e20 7365 6c66 2e63 6f6e  ctrl in self.con
-000270d0: 7472 6f6c 730d 0a20 2020 2020 2020 2020  trols..         
-000270e0: 2020 2020 2020 2020 2020 2029 3a0d 0a20             ):.. 
+00026bf0: 2020 2020 2020 2062 616e 6431 5f64 726f         band1_dro
+00026c00: 7064 6f77 6e2e 7661 6c75 652c 0d0a 2020  pdown.value,..  
+00026c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00026c20: 2020 2020 2020 6261 6e64 325f 6472 6f70        band2_drop
+00026c30: 646f 776e 2e76 616c 7565 2c0d 0a20 2020  down.value,..   
+00026c40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00026c50: 2020 2020 2062 616e 6433 5f64 726f 7064       band3_dropd
+00026c60: 6f77 6e2e 7661 6c75 652c 0d0a 2020 2020  own.value,..    
+00026c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00026c80: 5d0d 0a0d 0a20 2020 2020 2020 2020 2020  ]....           
+00026c90: 2020 2020 2076 6973 5b22 6d69 6e22 5d20       vis["min"] 
+00026ca0: 3d20 7661 6c75 655f 7261 6e67 652e 7661  = value_range.va
+00026cb0: 6c75 655b 305d 0d0a 2020 2020 2020 2020  lue[0]..        
+00026cc0: 2020 2020 2020 2020 7669 735b 226d 6178          vis["max
+00026cd0: 225d 203d 2076 616c 7565 5f72 616e 6765  "] = value_range
+00026ce0: 2e76 616c 7565 5b31 5d0d 0a20 2020 2020  .value[1]..     
+00026cf0: 2020 2020 2020 2020 2020 2076 6973 5b22             vis["
+00026d00: 6f70 6163 6974 7922 5d20 3d20 6f70 6163  opacity"] = opac
+00026d10: 6974 792e 7661 6c75 650d 0a20 2020 2020  ity.value..     
+00026d20: 2020 2020 2020 2020 2020 2076 6973 5b22             vis["
+00026d30: 6761 6d6d 6122 5d20 3d20 6761 6d6d 612e  gamma"] = gamma.
+00026d40: 7661 6c75 650d 0a0d 0a20 2020 2020 2020  value....       
+00026d50: 2020 2020 2020 2020 2063 7265 6174 655f           create_
+00026d60: 636f 6465 5f63 656c 6c28 6622 7669 735f  code_cell(f"vis_
+00026d70: 7061 7261 6d73 203d 207b 7374 7228 7669  params = {str(vi
+00026d80: 7329 7d22 290d 0a0d 0a20 2020 2020 2020  s)}")....       
+00026d90: 2020 2020 2064 6566 2061 7070 6c79 5f62       def apply_b
+00026da0: 746e 5f63 6c69 636b 6564 2862 293a 0d0a  tn_clicked(b):..
+00026db0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00026dc0: 2020 7669 7320 3d20 7b7d 0d0a 2020 2020    vis = {}..    
+00026dd0: 2020 2020 2020 2020 2020 2020 6966 2072              if r
+00026de0: 6164 696f 312e 696e 6465 7820 3d3d 2030  adio1.index == 0
+00026df0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00026e00: 2020 2020 2020 2076 6973 5b22 6261 6e64         vis["band
+00026e10: 7322 5d20 3d20 5b62 616e 6431 5f64 726f  s"] = [band1_dro
+00026e20: 7064 6f77 6e2e 7661 6c75 655d 0d0a 2020  pdown.value]..  
+00026e30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00026e40: 2020 6966 206c 656e 2870 616c 6574 7465    if len(palette
+00026e50: 2e76 616c 7565 2920 3e20 303a 0d0a 2020  .value) > 0:..  
+00026e60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00026e70: 2020 2020 2020 7669 735b 2270 616c 6574        vis["palet
+00026e80: 7465 225d 203d 205b 632e 7374 7269 7028  te"] = [c.strip(
+00026e90: 2920 666f 7220 6320 696e 2070 616c 6574  ) for c in palet
+00026ea0: 7465 2e76 616c 7565 2e73 706c 6974 2822  te.value.split("
+00026eb0: 2c22 295d 0d0a 2020 2020 2020 2020 2020  ,")]..          
+00026ec0: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
+00026ed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00026ee0: 2076 6973 5b22 6261 6e64 7322 5d20 3d20   vis["bands"] = 
+00026ef0: 5b0d 0a20 2020 2020 2020 2020 2020 2020  [..             
+00026f00: 2020 2020 2020 2020 2020 2062 616e 6431             band1
+00026f10: 5f64 726f 7064 6f77 6e2e 7661 6c75 652c  _dropdown.value,
+00026f20: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00026f30: 2020 2020 2020 2020 2020 6261 6e64 325f            band2_
+00026f40: 6472 6f70 646f 776e 2e76 616c 7565 2c0d  dropdown.value,.
+00026f50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00026f60: 2020 2020 2020 2020 2062 616e 6433 5f64           band3_d
+00026f70: 726f 7064 6f77 6e2e 7661 6c75 652c 0d0a  ropdown.value,..
+00026f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00026f90: 2020 2020 5d0d 0a20 2020 2020 2020 2020      ]..         
+00026fa0: 2020 2020 2020 2020 2020 2076 6973 5b22             vis["
+00026fb0: 6761 6d6d 6122 5d20 3d20 6761 6d6d 612e  gamma"] = gamma.
+00026fc0: 7661 6c75 650d 0a0d 0a20 2020 2020 2020  value....       
+00026fd0: 2020 2020 2020 2020 2076 6973 5b22 6d69           vis["mi
+00026fe0: 6e22 5d20 3d20 7661 6c75 655f 7261 6e67  n"] = value_rang
+00026ff0: 652e 7661 6c75 655b 305d 0d0a 2020 2020  e.value[0]..    
+00027000: 2020 2020 2020 2020 2020 2020 7669 735b              vis[
+00027010: 226d 6178 225d 203d 2076 616c 7565 5f72  "max"] = value_r
+00027020: 616e 6765 2e76 616c 7565 5b31 5d0d 0a0d  ange.value[1]...
+00027030: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00027040: 2073 656c 662e 6164 644c 6179 6572 2865   self.addLayer(e
+00027050: 655f 6f62 6a65 6374 2c20 7669 732c 206c  e_object, vis, l
+00027060: 6179 6572 5f6e 616d 652c 2054 7275 652c  ayer_name, True,
+00027070: 206f 7061 6369 7479 2e76 616c 7565 290d   opacity.value).
+00027080: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00027090: 2065 655f 6c61 7965 722e 7669 7369 626c   ee_layer.visibl
+000270a0: 6520 3d20 4661 6c73 650d 0a0d 0a20 2020  e = False....   
+000270b0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+000270c0: 6c65 6765 6e64 5f63 686b 2e76 616c 7565  legend_chk.value
+000270d0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+000270e0: 2020 2020 2020 2069 6620 280d 0a20 2020         if (..   
 000270f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027100: 2020 2020 2020 2073 656c 662e 7265 6d6f         self.remo
-00027110: 7665 5f63 6f6e 7472 6f6c 2873 656c 662e  ve_control(self.
-00027120: 636f 6c6f 7262 6172 5f63 7472 6c29 0d0a  colorbar_ctrl)..
-00027130: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027140: 2020 2020 2020 2020 7365 6c66 2e63 6f6c          self.col
-00027150: 6f72 6261 725f 6374 726c 2e63 6c6f 7365  orbar_ctrl.close
-00027160: 2829 0d0a 2020 2020 2020 2020 2020 2020  ()..            
-00027170: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00027180: 2e63 6f6c 6f72 6261 725f 7769 6467 6574  .colorbar_widget
-00027190: 2e63 6c6f 7365 2829 0d0a 0d0a 2020 2020  .close()....    
-000271a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000271b0: 6966 2028 0d0a 2020 2020 2020 2020 2020  if (..          
-000271c0: 2020 2020 2020 2020 2020 2020 2020 2263                "c
-000271d0: 6f6c 6f72 6261 7222 2069 6e20 6c61 7965  olorbar" in laye
-000271e0: 725f 6469 6374 2e6b 6579 7328 290d 0a20  r_dict.keys().. 
-000271f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027200: 2020 2020 2020 2061 6e64 206c 6179 6572         and layer
-00027210: 5f64 6963 745b 2263 6f6c 6f72 6261 7222  _dict["colorbar"
-00027220: 5d20 696e 2073 656c 662e 636f 6e74 726f  ] in self.contro
-00027230: 6c73 0d0a 2020 2020 2020 2020 2020 2020  ls..            
-00027240: 2020 2020 2020 2020 293a 0d0a 2020 2020          ):..    
-00027250: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027260: 2020 2020 7365 6c66 2e72 656d 6f76 655f      self.remove_
-00027270: 636f 6e74 726f 6c28 6c61 7965 725f 6469  control(layer_di
-00027280: 6374 5b22 636f 6c6f 7262 6172 225d 290d  ct["colorbar"]).
-00027290: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000272a0: 2020 2020 2020 2020 206c 6179 6572 5f64           layer_d
-000272b0: 6963 745b 2263 6f6c 6f72 6261 7222 5d20  ict["colorbar"] 
-000272c0: 3d20 4e6f 6e65 0d0a 0d0a 2020 2020 2020  = None....      
-000272d0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-000272e0: 206c 696e 6561 725f 6368 6b2e 7661 6c75   linear_chk.valu
-000272f0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-00027300: 2020 2020 2020 2020 2020 2020 6966 2028              if (
-00027310: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00027320: 2020 2020 2020 2020 2020 2020 2020 226c                "l
-00027330: 6567 656e 6422 2069 6e20 6c61 7965 725f  egend" in layer_
-00027340: 6469 6374 2e6b 6579 7328 290d 0a20 2020  dict.keys()..   
-00027350: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027360: 2020 2020 2020 2020 2061 6e64 206c 6179           and lay
-00027370: 6572 5f64 6963 745b 226c 6567 656e 6422  er_dict["legend"
-00027380: 5d20 696e 2073 656c 662e 636f 6e74 726f  ] in self.contro
-00027390: 6c73 0d0a 2020 2020 2020 2020 2020 2020  ls..            
-000273a0: 2020 2020 2020 2020 2020 2020 293a 0d0a              ):..
-000273b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000273c0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-000273d0: 2e72 656d 6f76 655f 636f 6e74 726f 6c28  .remove_control(
-000273e0: 6c61 7965 725f 6469 6374 5b22 6c65 6765  layer_dict["lege
-000273f0: 6e64 225d 290d 0a20 2020 2020 2020 2020  nd"])..         
-00027400: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027410: 2020 206c 6179 6572 5f64 6963 745b 226c     layer_dict["l
-00027420: 6567 656e 6422 5d20 3d20 4e6f 6e65 0d0a  egend"] = None..
-00027430: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00027440: 2020 2020 2020 2020 2020 6966 206c 656e            if len
-00027450: 2870 616c 6574 7465 2e76 616c 7565 2920  (palette.value) 
-00027460: 3e20 3020 616e 6420 222c 2220 696e 2070  > 0 and "," in p
-00027470: 616c 6574 7465 2e76 616c 7565 3a0d 0a20  alette.value:.. 
-00027480: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027490: 2020 2020 2020 2020 2020 2063 6f6c 6f72             color
-000274a0: 7320 3d20 746f 5f68 6578 5f63 6f6c 6f72  s = to_hex_color
-000274b0: 7328 0d0a 2020 2020 2020 2020 2020 2020  s(..            
-000274c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000274d0: 2020 2020 5b63 6f6c 6f72 2e73 7472 6970      [color.strip
-000274e0: 2829 2066 6f72 2063 6f6c 6f72 2069 6e20  () for color in 
-000274f0: 7061 6c65 7474 652e 7661 6c75 652e 7370  palette.value.sp
-00027500: 6c69 7428 222c 2229 5d0d 0a20 2020 2020  lit(",")]..     
+00027100: 2020 2020 2073 656c 662e 636f 6c6f 7262       self.colorb
+00027110: 6172 5f63 7472 6c20 6973 206e 6f74 204e  ar_ctrl is not N
+00027120: 6f6e 650d 0a20 2020 2020 2020 2020 2020  one..           
+00027130: 2020 2020 2020 2020 2020 2020 2061 6e64               and
+00027140: 2073 656c 662e 636f 6c6f 7262 6172 5f63   self.colorbar_c
+00027150: 7472 6c20 696e 2073 656c 662e 636f 6e74  trl in self.cont
+00027160: 726f 6c73 0d0a 2020 2020 2020 2020 2020  rols..          
+00027170: 2020 2020 2020 2020 2020 293a 0d0a 2020            ):..  
+00027180: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027190: 2020 2020 2020 7365 6c66 2e72 656d 6f76        self.remov
+000271a0: 655f 636f 6e74 726f 6c28 7365 6c66 2e63  e_control(self.c
+000271b0: 6f6c 6f72 6261 725f 6374 726c 290d 0a20  olorbar_ctrl).. 
+000271c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000271d0: 2020 2020 2020 2073 656c 662e 636f 6c6f         self.colo
+000271e0: 7262 6172 5f63 7472 6c2e 636c 6f73 6528  rbar_ctrl.close(
+000271f0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00027200: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00027210: 636f 6c6f 7262 6172 5f77 6964 6765 742e  colorbar_widget.
+00027220: 636c 6f73 6528 290d 0a0d 0a20 2020 2020  close()....     
+00027230: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00027240: 6620 280d 0a20 2020 2020 2020 2020 2020  f (..           
+00027250: 2020 2020 2020 2020 2020 2020 2022 636f               "co
+00027260: 6c6f 7262 6172 2220 696e 206c 6179 6572  lorbar" in layer
+00027270: 5f64 6963 742e 6b65 7973 2829 0d0a 2020  _dict.keys()..  
+00027280: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027290: 2020 2020 2020 616e 6420 6c61 7965 725f        and layer_
+000272a0: 6469 6374 5b22 636f 6c6f 7262 6172 225d  dict["colorbar"]
+000272b0: 2069 6e20 7365 6c66 2e63 6f6e 7472 6f6c   in self.control
+000272c0: 730d 0a20 2020 2020 2020 2020 2020 2020  s..             
+000272d0: 2020 2020 2020 2029 3a0d 0a20 2020 2020         ):..     
+000272e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000272f0: 2020 2073 656c 662e 7265 6d6f 7665 5f63     self.remove_c
+00027300: 6f6e 7472 6f6c 286c 6179 6572 5f64 6963  ontrol(layer_dic
+00027310: 745b 2263 6f6c 6f72 6261 7222 5d29 0d0a  t["colorbar"])..
+00027320: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027330: 2020 2020 2020 2020 6c61 7965 725f 6469          layer_di
+00027340: 6374 5b22 636f 6c6f 7262 6172 225d 203d  ct["colorbar"] =
+00027350: 204e 6f6e 650d 0a0d 0a20 2020 2020 2020   None....       
+00027360: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00027370: 6c69 6e65 6172 5f63 686b 2e76 616c 7565  linear_chk.value
+00027380: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00027390: 2020 2020 2020 2020 2020 2069 6620 280d             if (.
+000273a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000273b0: 2020 2020 2020 2020 2020 2020 2022 6c65               "le
+000273c0: 6765 6e64 2220 696e 206c 6179 6572 5f64  gend" in layer_d
+000273d0: 6963 742e 6b65 7973 2829 0d0a 2020 2020  ict.keys()..    
+000273e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000273f0: 2020 2020 2020 2020 616e 6420 6c61 7965          and laye
+00027400: 725f 6469 6374 5b22 6c65 6765 6e64 225d  r_dict["legend"]
+00027410: 2069 6e20 7365 6c66 2e63 6f6e 7472 6f6c   in self.control
+00027420: 730d 0a20 2020 2020 2020 2020 2020 2020  s..             
+00027430: 2020 2020 2020 2020 2020 2029 3a0d 0a20             ):.. 
+00027440: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027450: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00027460: 7265 6d6f 7665 5f63 6f6e 7472 6f6c 286c  remove_control(l
+00027470: 6179 6572 5f64 6963 745b 226c 6567 656e  ayer_dict["legen
+00027480: 6422 5d29 0d0a 2020 2020 2020 2020 2020  d"])..          
+00027490: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000274a0: 2020 6c61 7965 725f 6469 6374 5b22 6c65    layer_dict["le
+000274b0: 6765 6e64 225d 203d 204e 6f6e 650d 0a0d  gend"] = None...
+000274c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000274d0: 2020 2020 2020 2020 2069 6620 6c65 6e28           if len(
+000274e0: 7061 6c65 7474 652e 7661 6c75 6529 203e  palette.value) >
+000274f0: 2030 2061 6e64 2022 2c22 2069 6e20 7061   0 and "," in pa
+00027500: 6c65 7474 652e 7661 6c75 653a 0d0a 2020  lette.value:..  
 00027510: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027520: 2020 2020 2020 2029 0d0a 0d0a 2020 2020         )....    
-00027530: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027540: 2020 2020 2020 2020 7365 6c66 2e61 6464          self.add
-00027550: 5f63 6f6c 6f72 6261 7228 0d0a 2020 2020  _colorbar(..    
-00027560: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027570: 2020 2020 2020 2020 2020 2020 7669 735f              vis_
-00027580: 7061 7261 6d73 3d7b 0d0a 2020 2020 2020  params={..      
-00027590: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000275a0: 2020 2020 2020 2020 2020 2020 2020 2270                "p
-000275b0: 616c 6574 7465 223a 2063 6f6c 6f72 732c  alette": colors,
-000275c0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000275d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000275e0: 2020 2020 2020 226d 696e 223a 2076 616c        "min": val
-000275f0: 7565 5f72 616e 6765 2e76 616c 7565 5b30  ue_range.value[0
-00027600: 5d2c 0d0a 2020 2020 2020 2020 2020 2020  ],..            
-00027610: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027620: 2020 2020 2020 2020 226d 6178 223a 2076          "max": v
-00027630: 616c 7565 5f72 616e 6765 2e76 616c 7565  alue_range.value
-00027640: 5b31 5d2c 0d0a 2020 2020 2020 2020 2020  [1],..          
-00027650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027660: 2020 2020 2020 7d2c 0d0a 2020 2020 2020        },..      
-00027670: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027680: 2020 2020 2020 2020 2020 6c61 7965 725f            layer_
-00027690: 6e61 6d65 3d6c 6179 6572 5f6e 616d 652c  name=layer_name,
-000276a0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000276b0: 2020 2020 2020 2020 2020 2020 2020 290d                ).
-000276c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000276d0: 2020 2020 2065 6c69 6620 7374 6570 5f63       elif step_c
-000276e0: 686b 2e76 616c 7565 3a0d 0a0d 0a20 2020  hk.value:....   
-000276f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027700: 2020 2020 2069 6620 6c65 6e28 7061 6c65       if len(pale
-00027710: 7474 652e 7661 6c75 6529 203e 2030 2061  tte.value) > 0 a
-00027720: 6e64 2022 2c22 2069 6e20 7061 6c65 7474  nd "," in palett
-00027730: 652e 7661 6c75 653a 0d0a 2020 2020 2020  e.value:..      
-00027740: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027750: 2020 2020 2020 636f 6c6f 7273 203d 2074        colors = t
-00027760: 6f5f 6865 785f 636f 6c6f 7273 280d 0a20  o_hex_colors(.. 
-00027770: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027780: 2020 2020 2020 2020 2020 2020 2020 205b                 [
-00027790: 636f 6c6f 722e 7374 7269 7028 2920 666f  color.strip() fo
-000277a0: 7220 636f 6c6f 7220 696e 2070 616c 6574  r color in palet
-000277b0: 7465 2e76 616c 7565 2e73 706c 6974 2822  te.value.split("
-000277c0: 2c22 295d 0d0a 2020 2020 2020 2020 2020  ,")]..          
+00027520: 2020 2020 2020 2020 2020 636f 6c6f 7273            colors
+00027530: 203d 2074 6f5f 6865 785f 636f 6c6f 7273   = to_hex_colors
+00027540: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
+00027550: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027560: 2020 205b 636f 6c6f 722e 7374 7269 7028     [color.strip(
+00027570: 2920 666f 7220 636f 6c6f 7220 696e 2070  ) for color in p
+00027580: 616c 6574 7465 2e76 616c 7565 2e73 706c  alette.value.spl
+00027590: 6974 2822 2c22 295d 0d0a 2020 2020 2020  it(",")]..      
+000275a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000275b0: 2020 2020 2020 290d 0a0d 0a20 2020 2020        )....     
+000275c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000275d0: 2020 2020 2020 2073 656c 662e 6164 645f         self.add_
+000275e0: 636f 6c6f 7262 6172 280d 0a20 2020 2020  colorbar(..     
+000275f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027600: 2020 2020 2020 2020 2020 2076 6973 5f70             vis_p
+00027610: 6172 616d 733d 7b0d 0a20 2020 2020 2020  arams={..       
+00027620: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027630: 2020 2020 2020 2020 2020 2020 2022 7061               "pa
+00027640: 6c65 7474 6522 3a20 636f 6c6f 7273 2c0d  lette": colors,.
+00027650: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00027660: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027670: 2020 2020 2022 6d69 6e22 3a20 7661 6c75       "min": valu
+00027680: 655f 7261 6e67 652e 7661 6c75 655b 305d  e_range.value[0]
+00027690: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+000276a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000276b0: 2020 2020 2020 2022 6d61 7822 3a20 7661         "max": va
+000276c0: 6c75 655f 7261 6e67 652e 7661 6c75 655b  lue_range.value[
+000276d0: 315d 2c0d 0a20 2020 2020 2020 2020 2020  1],..           
+000276e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000276f0: 2020 2020 207d 2c0d 0a20 2020 2020 2020       },..       
+00027700: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027710: 2020 2020 2020 2020 206c 6179 6572 5f6e           layer_n
+00027720: 616d 653d 6c61 7965 725f 6e61 6d65 2c0d  ame=layer_name,.
+00027730: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00027740: 2020 2020 2020 2020 2020 2020 2029 0d0a               )..
+00027750: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027760: 2020 2020 656c 6966 2073 7465 705f 6368      elif step_ch
+00027770: 6b2e 7661 6c75 653a 0d0a 0d0a 2020 2020  k.value:....    
+00027780: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027790: 2020 2020 6966 206c 656e 2870 616c 6574      if len(palet
+000277a0: 7465 2e76 616c 7565 2920 3e20 3020 616e  te.value) > 0 an
+000277b0: 6420 222c 2220 696e 2070 616c 6574 7465  d "," in palette
+000277c0: 2e76 616c 7565 3a0d 0a20 2020 2020 2020  .value:..       
 000277d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000277e0: 2020 290d 0a20 2020 2020 2020 2020 2020    )..           
-000277f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027800: 206c 6162 656c 7320 3d20 5b0d 0a20 2020   labels = [..   
-00027810: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027820: 2020 2020 2020 2020 2020 2020 206c 6162               lab
-00027830: 656c 2e73 7472 6970 2829 0d0a 2020 2020  el.strip()..    
-00027840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027850: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-00027860: 6c61 6265 6c20 696e 206c 6567 656e 645f  label in legend_
-00027870: 6c61 6265 6c73 2e76 616c 7565 2e73 706c  labels.value.spl
-00027880: 6974 2822 2c22 290d 0a20 2020 2020 2020  it(",")..       
-00027890: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000278a0: 2020 2020 205d 0d0a 0d0a 2020 2020 2020       ]....      
-000278b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000278c0: 2020 2020 2020 7365 6c66 2e61 6464 5f6c        self.add_l
-000278d0: 6567 656e 6428 0d0a 2020 2020 2020 2020  egend(..        
-000278e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000278f0: 2020 2020 2020 2020 6c65 6765 6e64 5f74          legend_t
-00027900: 6974 6c65 3d6c 6567 656e 645f 7469 746c  itle=legend_titl
-00027910: 652e 7661 6c75 652c 0d0a 2020 2020 2020  e.value,..      
+000277e0: 2020 2020 2063 6f6c 6f72 7320 3d20 746f       colors = to
+000277f0: 5f68 6578 5f63 6f6c 6f72 7328 0d0a 2020  _hex_colors(..  
+00027800: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027810: 2020 2020 2020 2020 2020 2020 2020 5b63                [c
+00027820: 6f6c 6f72 2e73 7472 6970 2829 2066 6f72  olor.strip() for
+00027830: 2063 6f6c 6f72 2069 6e20 7061 6c65 7474   color in palett
+00027840: 652e 7661 6c75 652e 7370 6c69 7428 222c  e.value.split(",
+00027850: 2229 5d0d 0a20 2020 2020 2020 2020 2020  ")]..           
+00027860: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027870: 2029 0d0a 2020 2020 2020 2020 2020 2020   )..            
+00027880: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027890: 6c61 6265 6c73 203d 205b 0d0a 2020 2020  labels = [..    
+000278a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000278b0: 2020 2020 2020 2020 2020 2020 6c61 6265              labe
+000278c0: 6c2e 7374 7269 7028 290d 0a20 2020 2020  l.strip()..     
+000278d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000278e0: 2020 2020 2020 2020 2020 2066 6f72 206c             for l
+000278f0: 6162 656c 2069 6e20 6c65 6765 6e64 5f6c  abel in legend_l
+00027900: 6162 656c 732e 7661 6c75 652e 7370 6c69  abels.value.spli
+00027910: 7428 222c 2229 0d0a 2020 2020 2020 2020  t(",")..        
 00027920: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027930: 2020 2020 2020 2020 2020 6c65 6765 6e64            legend
-00027940: 5f6b 6579 733d 6c61 6265 6c73 2c0d 0a20  _keys=labels,.. 
-00027950: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027960: 2020 2020 2020 2020 2020 2020 2020 206c                 l
-00027970: 6567 656e 645f 636f 6c6f 7273 3d63 6f6c  egend_colors=col
-00027980: 6f72 732c 0d0a 2020 2020 2020 2020 2020  ors,..          
-00027990: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000279a0: 2020 2020 2020 6c61 7965 725f 6e61 6d65        layer_name
-000279b0: 3d6c 6179 6572 5f6e 616d 652c 0d0a 2020  =layer_name,..  
-000279c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000279d0: 2020 2020 2020 2020 2020 290d 0a20 2020            )..   
-000279e0: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-000279f0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-00027a00: 2020 2020 2020 2020 6966 2072 6164 696f          if radio
-00027a10: 312e 696e 6465 7820 3d3d 2030 2061 6e64  1.index == 0 and
-00027a20: 2022 7061 6c65 7474 6522 2069 6e20 7669   "palette" in vi
-00027a30: 733a 0d0a 2020 2020 2020 2020 2020 2020  s:..            
-00027a40: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00027a50: 2e63 6f6c 6f72 6261 725f 7769 6467 6574  .colorbar_widget
-00027a60: 2e63 6c65 6172 5f6f 7574 7075 7428 290d  .clear_output().
-00027a70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00027a80: 2020 2020 2020 2020 2077 6974 6820 7365           with se
-00027a90: 6c66 2e63 6f6c 6f72 6261 725f 7769 6467  lf.colorbar_widg
-00027aa0: 6574 3a0d 0a20 2020 2020 2020 2020 2020  et:..           
-00027ab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027ac0: 205f 2c20 6178 203d 2070 6c74 2e73 7562   _, ax = plt.sub
-00027ad0: 706c 6f74 7328 6669 6773 697a 653d 2836  plots(figsize=(6
-00027ae0: 2c20 302e 3429 290d 0a20 2020 2020 2020  , 0.4))..       
-00027af0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027b00: 2020 2020 2063 6f6c 6f72 7320 3d20 746f       colors = to
-00027b10: 5f68 6578 5f63 6f6c 6f72 7328 7669 735b  _hex_colors(vis[
-00027b20: 2270 616c 6574 7465 225d 290d 0a20 2020  "palette"])..   
-00027b30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027b40: 2020 2020 2020 2020 2063 6d61 7020 3d20           cmap = 
-00027b50: 6d70 6c2e 636f 6c6f 7273 2e4c 696e 6561  mpl.colors.Linea
-00027b60: 7253 6567 6d65 6e74 6564 436f 6c6f 726d  rSegmentedColorm
-00027b70: 6170 2e66 726f 6d5f 6c69 7374 280d 0a20  ap.from_list(.. 
+00027930: 2020 2020 5d0d 0a0d 0a20 2020 2020 2020      ]....       
+00027940: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027950: 2020 2020 2073 656c 662e 6164 645f 6c65       self.add_le
+00027960: 6765 6e64 280d 0a20 2020 2020 2020 2020  gend(..         
+00027970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027980: 2020 2020 2020 206c 6567 656e 645f 7469         legend_ti
+00027990: 746c 653d 6c65 6765 6e64 5f74 6974 6c65  tle=legend_title
+000279a0: 2e76 616c 7565 2c0d 0a20 2020 2020 2020  .value,..       
+000279b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000279c0: 2020 2020 2020 2020 206c 6567 656e 645f           legend_
+000279d0: 6b65 7973 3d6c 6162 656c 732c 0d0a 2020  keys=labels,..  
+000279e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000279f0: 2020 2020 2020 2020 2020 2020 2020 6c65                le
+00027a00: 6765 6e64 5f63 6f6c 6f72 733d 636f 6c6f  gend_colors=colo
+00027a10: 7273 2c0d 0a20 2020 2020 2020 2020 2020  rs,..           
+00027a20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027a30: 2020 2020 206c 6179 6572 5f6e 616d 653d       layer_name=
+00027a40: 6c61 7965 725f 6e61 6d65 2c0d 0a20 2020  layer_name,..   
+00027a50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027a60: 2020 2020 2020 2020 2029 0d0a 2020 2020           )..    
+00027a70: 2020 2020 2020 2020 2020 2020 656c 7365              else
+00027a80: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00027a90: 2020 2020 2020 2069 6620 7261 6469 6f31         if radio1
+00027aa0: 2e69 6e64 6578 203d 3d20 3020 616e 6420  .index == 0 and 
+00027ab0: 2270 616c 6574 7465 2220 696e 2076 6973  "palette" in vis
+00027ac0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00027ad0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00027ae0: 636f 6c6f 7262 6172 5f77 6964 6765 742e  colorbar_widget.
+00027af0: 636c 6561 725f 6f75 7470 7574 2829 0d0a  clear_output()..
+00027b00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027b10: 2020 2020 2020 2020 7769 7468 2073 656c          with sel
+00027b20: 662e 636f 6c6f 7262 6172 5f77 6964 6765  f.colorbar_widge
+00027b30: 743a 0d0a 2020 2020 2020 2020 2020 2020  t:..            
+00027b40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027b50: 5f2c 2061 7820 3d20 706c 742e 7375 6270  _, ax = plt.subp
+00027b60: 6c6f 7473 2866 6967 7369 7a65 3d28 362c  lots(figsize=(6,
+00027b70: 2030 2e34 2929 0d0a 2020 2020 2020 2020   0.4))..        
 00027b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027b90: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00027ba0: 6375 7374 6f6d 222c 2063 6f6c 6f72 732c  custom", colors,
-00027bb0: 204e 3d32 3536 0d0a 2020 2020 2020 2020   N=256..        
+00027b90: 2020 2020 636f 6c6f 7273 203d 2074 6f5f      colors = to_
+00027ba0: 6865 785f 636f 6c6f 7273 2876 6973 5b22  hex_colors(vis["
+00027bb0: 7061 6c65 7474 6522 5d29 0d0a 2020 2020  palette"])..    
 00027bc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027bd0: 2020 2020 290d 0a20 2020 2020 2020 2020      )..         
-00027be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027bf0: 2020 206e 6f72 6d20 3d20 6d70 6c2e 636f     norm = mpl.co
-00027c00: 6c6f 7273 2e4e 6f72 6d61 6c69 7a65 280d  lors.Normalize(.
-00027c10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00027c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027c30: 2076 6d69 6e3d 7669 735b 226d 696e 225d   vmin=vis["min"]
-00027c40: 2c20 766d 6178 3d76 6973 5b22 6d61 7822  , vmax=vis["max"
-00027c50: 5d0d 0a20 2020 2020 2020 2020 2020 2020  ]..             
-00027c60: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-00027c70: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00027c80: 2020 2020 2020 2020 2020 2020 2020 6d70                mp
-00027c90: 6c2e 636f 6c6f 7262 6172 2e43 6f6c 6f72  l.colorbar.Color
-00027ca0: 6261 7242 6173 6528 0d0a 2020 2020 2020  barBase(..      
+00027bd0: 2020 2020 2020 2020 636d 6170 203d 206d          cmap = m
+00027be0: 706c 2e63 6f6c 6f72 732e 4c69 6e65 6172  pl.colors.Linear
+00027bf0: 5365 676d 656e 7465 6443 6f6c 6f72 6d61  SegmentedColorma
+00027c00: 702e 6672 6f6d 5f6c 6973 7428 0d0a 2020  p.from_list(..  
+00027c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027c20: 2020 2020 2020 2020 2020 2020 2020 2263                "c
+00027c30: 7573 746f 6d22 2c20 636f 6c6f 7273 2c20  ustom", colors, 
+00027c40: 4e3d 3235 360d 0a20 2020 2020 2020 2020  N=256..         
+00027c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027c60: 2020 2029 0d0a 2020 2020 2020 2020 2020     )..          
+00027c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027c80: 2020 6e6f 726d 203d 206d 706c 2e63 6f6c    norm = mpl.col
+00027c90: 6f72 732e 4e6f 726d 616c 697a 6528 0d0a  ors.Normalize(..
+00027ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00027cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027cc0: 2020 2020 2020 2020 2020 6178 2c20 6e6f            ax, no
-00027cd0: 726d 3d6e 6f72 6d2c 2063 6d61 703d 636d  rm=norm, cmap=cm
-00027ce0: 6170 2c20 6f72 6965 6e74 6174 696f 6e3d  ap, orientation=
-00027cf0: 2268 6f72 697a 6f6e 7461 6c22 0d0a 2020  "horizontal"..  
-00027d00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027d10: 2020 2020 2020 2020 2020 290d 0a20 2020            )..   
-00027d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027d30: 2020 2020 2020 2020 2070 6c74 2e73 686f           plt.sho
-00027d40: 7728 290d 0a0d 0a20 2020 2020 2020 2020  w()....         
-00027d50: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00027d60: 6620 280d 0a20 2020 2020 2020 2020 2020  f (..           
-00027d70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027d80: 2022 636f 6c6f 7262 6172 2220 696e 206c   "colorbar" in l
-00027d90: 6179 6572 5f64 6963 742e 6b65 7973 2829  ayer_dict.keys()
-00027da0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00027db0: 2020 2020 2020 2020 2020 2020 2020 616e                an
-00027dc0: 6420 6c61 7965 725f 6469 6374 5b22 636f  d layer_dict["co
-00027dd0: 6c6f 7262 6172 225d 2069 6e20 7365 6c66  lorbar"] in self
-00027de0: 2e63 6f6e 7472 6f6c 730d 0a20 2020 2020  .controls..     
-00027df0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027e00: 2020 2029 3a0d 0a20 2020 2020 2020 2020     ):..         
-00027e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027e20: 2020 2073 656c 662e 7265 6d6f 7665 5f63     self.remove_c
-00027e30: 6f6e 7472 6f6c 286c 6179 6572 5f64 6963  ontrol(layer_dic
-00027e40: 745b 2263 6f6c 6f72 6261 7222 5d29 0d0a  t["colorbar"])..
-00027e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027e60: 2020 2020 2020 2020 2020 2020 6c61 7965              laye
-00027e70: 725f 6469 6374 5b22 636f 6c6f 7262 6172  r_dict["colorbar
-00027e80: 225d 203d 204e 6f6e 650d 0a20 2020 2020  "] = None..     
-00027e90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027ea0: 2020 2069 6620 280d 0a20 2020 2020 2020     if (..       
-00027eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027ec0: 2020 2020 2022 6c65 6765 6e64 2220 696e       "legend" in
-00027ed0: 206c 6179 6572 5f64 6963 742e 6b65 7973   layer_dict.keys
-00027ee0: 2829 0d0a 2020 2020 2020 2020 2020 2020  ()..            
-00027ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027f00: 616e 6420 6c61 7965 725f 6469 6374 5b22  and layer_dict["
-00027f10: 6c65 6765 6e64 225d 2069 6e20 7365 6c66  legend"] in self
-00027f20: 2e63 6f6e 7472 6f6c 730d 0a20 2020 2020  .controls..     
-00027f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027f40: 2020 2029 3a0d 0a20 2020 2020 2020 2020     ):..         
-00027f50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027f60: 2020 2073 656c 662e 7265 6d6f 7665 5f63     self.remove_c
-00027f70: 6f6e 7472 6f6c 286c 6179 6572 5f64 6963  ontrol(layer_dic
-00027f80: 745b 226c 6567 656e 6422 5d29 0d0a 2020  t["legend"])..  
-00027f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027fa0: 2020 2020 2020 2020 2020 6c61 7965 725f            layer_
-00027fb0: 6469 6374 5b22 6c65 6765 6e64 225d 203d  dict["legend"] =
-00027fc0: 204e 6f6e 650d 0a0d 0a20 2020 2020 2020   None....       
-00027fd0: 2020 2020 2064 6566 2063 6c6f 7365 5f62       def close_b
-00027fe0: 746e 5f63 6c69 636b 6564 2862 293a 0d0a  tn_clicked(b):..
-00027ff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028000: 6966 2073 656c 662e 7669 735f 636f 6e74  if self.vis_cont
-00028010: 726f 6c20 696e 2073 656c 662e 636f 6e74  rol in self.cont
-00028020: 726f 6c73 3a0d 0a20 2020 2020 2020 2020  rols:..         
-00028030: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00028040: 7265 6d6f 7665 5f63 6f6e 7472 6f6c 2873  remove_control(s
-00028050: 656c 662e 7669 735f 636f 6e74 726f 6c29  elf.vis_control)
-00028060: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00028070: 2020 2020 2020 7365 6c66 2e76 6973 5f63        self.vis_c
-00028080: 6f6e 7472 6f6c 203d 204e 6f6e 650d 0a20  ontrol = None.. 
-00028090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000280a0: 2020 2073 656c 662e 7669 735f 7769 6467     self.vis_widg
-000280b0: 6574 2e63 6c6f 7365 2829 0d0a 0d0a 2020  et.close()....  
-000280c0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-000280d0: 2028 0d0a 2020 2020 2020 2020 2020 2020   (..            
-000280e0: 2020 2020 2020 2020 7365 6c66 2e63 6f6c          self.col
-000280f0: 6f72 6261 725f 6374 726c 2069 7320 6e6f  orbar_ctrl is no
-00028100: 7420 4e6f 6e65 0d0a 2020 2020 2020 2020  t None..        
-00028110: 2020 2020 2020 2020 2020 2020 616e 6420              and 
-00028120: 7365 6c66 2e63 6f6c 6f72 6261 725f 6374  self.colorbar_ct
-00028130: 726c 2069 6e20 7365 6c66 2e63 6f6e 7472  rl in self.contr
-00028140: 6f6c 730d 0a20 2020 2020 2020 2020 2020  ols..           
-00028150: 2020 2020 2029 3a0d 0a20 2020 2020 2020       ):..       
-00028160: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-00028170: 662e 7265 6d6f 7665 5f63 6f6e 7472 6f6c  f.remove_control
-00028180: 2873 656c 662e 636f 6c6f 7262 6172 5f63  (self.colorbar_c
-00028190: 7472 6c29 0d0a 2020 2020 2020 2020 2020  trl)..          
-000281a0: 2020 2020 2020 2020 2020 7365 6c66 2e63            self.c
-000281b0: 6f6c 6f72 6261 725f 6374 726c 203d 204e  olorbar_ctrl = N
-000281c0: 6f6e 650d 0a20 2020 2020 2020 2020 2020  one..           
-000281d0: 2020 2020 2020 2020 2073 656c 662e 636f           self.co
-000281e0: 6c6f 7262 6172 5f77 6964 6765 742e 636c  lorbar_widget.cl
-000281f0: 6f73 6528 290d 0a0d 0a20 2020 2020 2020  ose()....       
-00028200: 2020 2020 2069 6d70 6f72 745f 6274 6e2e       import_btn.
-00028210: 6f6e 5f63 6c69 636b 2869 6d70 6f72 745f  on_click(import_
-00028220: 6274 6e5f 636c 6963 6b65 6429 0d0a 2020  btn_clicked)..  
-00028230: 2020 2020 2020 2020 2020 6170 706c 795f            apply_
-00028240: 6274 6e2e 6f6e 5f63 6c69 636b 2861 7070  btn.on_click(app
-00028250: 6c79 5f62 746e 5f63 6c69 636b 6564 290d  ly_btn_clicked).
-00028260: 0a20 2020 2020 2020 2020 2020 2063 6c6f  .            clo
-00028270: 7365 5f62 746e 2e6f 6e5f 636c 6963 6b28  se_btn.on_click(
-00028280: 636c 6f73 655f 6274 6e5f 636c 6963 6b65  close_btn_clicke
-00028290: 6429 0d0a 0d0a 2020 2020 2020 2020 2020  d)....          
-000282a0: 2020 636f 6c6f 725f 6862 6f78 203d 2077    color_hbox = w
-000282b0: 6964 6765 7473 2e48 426f 7828 0d0a 2020  idgets.HBox(..  
-000282c0: 2020 2020 2020 2020 2020 2020 2020 5b6c                [l
-000282d0: 6567 656e 645f 6368 6b2c 2063 6f6c 6f72  egend_chk, color
-000282e0: 5f70 6963 6b65 722c 2061 6464 5f63 6f6c  _picker, add_col
-000282f0: 6f72 2c20 6465 6c5f 636f 6c6f 722c 2072  or, del_color, r
-00028300: 6573 6574 5f63 6f6c 6f72 5d0d 0a20 2020  eset_color]..   
-00028310: 2020 2020 2020 2020 2029 0d0a 2020 2020           )..    
-00028320: 2020 2020 2020 2020 6274 6e5f 6862 6f78          btn_hbox
-00028330: 203d 2077 6964 6765 7473 2e48 426f 7828   = widgets.HBox(
-00028340: 5b69 6d70 6f72 745f 6274 6e2c 2061 7070  [import_btn, app
-00028350: 6c79 5f62 746e 2c20 636c 6f73 655f 6274  ly_btn, close_bt
-00028360: 6e5d 290d 0a0d 0a20 2020 2020 2020 2020  n])....         
-00028370: 2020 2067 7261 795f 626f 7820 3d20 5b0d     gray_box = [.
-00028380: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00028390: 206c 6162 656c 2c0d 0a20 2020 2020 2020   label,..       
-000283a0: 2020 2020 2020 2020 2072 6164 696f 5f62           radio_b
-000283b0: 746e 2c0d 0a20 2020 2020 2020 2020 2020  tn,..           
-000283c0: 2020 2020 2062 616e 6473 5f68 626f 782c       bands_hbox,
-000283d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000283e0: 2020 765f 7370 6163 6572 2c0d 0a20 2020    v_spacer,..   
-000283f0: 2020 2020 2020 2020 2020 2020 2072 616e               ran
-00028400: 6765 5f68 626f 782c 0d0a 2020 2020 2020  ge_hbox,..      
-00028410: 2020 2020 2020 2020 2020 6f70 6163 6974            opacit
-00028420: 792c 0d0a 2020 2020 2020 2020 2020 2020  y,..            
-00028430: 2020 2020 6761 6d6d 612c 0d0a 2020 2020      gamma,..    
-00028440: 2020 2020 2020 2020 2020 2020 7769 6467              widg
-00028450: 6574 732e 4842 6f78 285b 636c 6173 7365  ets.HBox([classe
-00028460: 732c 2063 6f6c 6f72 6d61 705d 292c 0d0a  s, colormap]),..
-00028470: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028480: 7061 6c65 7474 652c 0d0a 2020 2020 2020  palette,..      
-00028490: 2020 2020 2020 2020 2020 636f 6c6f 725f            color_
-000284a0: 6862 6f78 2c0d 0a20 2020 2020 2020 2020  hbox,..         
-000284b0: 2020 2020 2020 206c 6567 656e 645f 7662         legend_vb
-000284c0: 6f78 2c0d 0a20 2020 2020 2020 2020 2020  ox,..           
-000284d0: 2020 2020 2062 746e 5f68 626f 782c 0d0a       btn_hbox,..
-000284e0: 2020 2020 2020 2020 2020 2020 5d0d 0a0d              ]...
-000284f0: 0a20 2020 2020 2020 2020 2020 2072 6762  .            rgb
-00028500: 5f62 6f78 203d 205b 0d0a 2020 2020 2020  _box = [..      
-00028510: 2020 2020 2020 2020 2020 6c61 6265 6c2c            label,
-00028520: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00028530: 2020 7261 6469 6f5f 6274 6e2c 0d0a 2020    radio_btn,..  
-00028540: 2020 2020 2020 2020 2020 2020 2020 6261                ba
-00028550: 6e64 735f 6862 6f78 2c0d 0a20 2020 2020  nds_hbox,..     
-00028560: 2020 2020 2020 2020 2020 2076 5f73 7061             v_spa
-00028570: 6365 722c 0d0a 2020 2020 2020 2020 2020  cer,..          
-00028580: 2020 2020 2020 7261 6e67 655f 6862 6f78        range_hbox
-00028590: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-000285a0: 2020 206f 7061 6369 7479 2c0d 0a20 2020     opacity,..   
-000285b0: 2020 2020 2020 2020 2020 2020 2067 616d               gam
-000285c0: 6d61 2c0d 0a20 2020 2020 2020 2020 2020  ma,..           
-000285d0: 2020 2020 2062 746e 5f68 626f 782c 0d0a       btn_hbox,..
-000285e0: 2020 2020 2020 2020 2020 2020 5d0d 0a0d              ]...
-000285f0: 0a20 2020 2020 2020 2020 2020 2064 6566  .            def
-00028600: 206c 6567 656e 645f 6368 6b5f 6368 616e   legend_chk_chan
-00028610: 6765 6428 6368 616e 6765 293a 0d0a 0d0a  ged(change):....
-00028620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028630: 6966 2063 6861 6e67 655b 226e 6577 225d  if change["new"]
-00028640: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00028650: 2020 2020 2020 206c 696e 6561 725f 6368         linear_ch
-00028660: 6b2e 7661 6c75 6520 3d20 5472 7565 0d0a  k.value = True..
-00028670: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028680: 2020 2020 6c65 6765 6e64 5f76 626f 782e      legend_vbox.
-00028690: 6368 696c 6472 656e 203d 205b 0d0a 2020  children = [..  
-000286a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000286b0: 2020 2020 2020 7769 6467 6574 732e 4842        widgets.HB
-000286c0: 6f78 285b 6c69 6e65 6172 5f63 686b 2c20  ox([linear_chk, 
-000286d0: 7374 6570 5f63 686b 5d29 2c0d 0a20 2020  step_chk]),..   
-000286e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000286f0: 2020 2020 2023 206c 6567 656e 645f 7469       # legend_ti
-00028700: 746c 652c 0d0a 2020 2020 2020 2020 2020  tle,..          
-00028710: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-00028720: 6c65 6765 6e64 5f6c 6162 656c 732c 0d0a  legend_labels,..
+00027cc0: 766d 696e 3d76 6973 5b22 6d69 6e22 5d2c  vmin=vis["min"],
+00027cd0: 2076 6d61 783d 7669 735b 226d 6178 225d   vmax=vis["max"]
+00027ce0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00027cf0: 2020 2020 2020 2020 2020 2020 2020 290d                ).
+00027d00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00027d10: 2020 2020 2020 2020 2020 2020 206d 706c               mpl
+00027d20: 2e63 6f6c 6f72 6261 722e 436f 6c6f 7262  .colorbar.Colorb
+00027d30: 6172 4261 7365 280d 0a20 2020 2020 2020  arBase(..       
+00027d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027d50: 2020 2020 2020 2020 2061 782c 206e 6f72           ax, nor
+00027d60: 6d3d 6e6f 726d 2c20 636d 6170 3d63 6d61  m=norm, cmap=cma
+00027d70: 702c 206f 7269 656e 7461 7469 6f6e 3d22  p, orientation="
+00027d80: 686f 7269 7a6f 6e74 616c 220d 0a20 2020  horizontal"..   
+00027d90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027da0: 2020 2020 2020 2020 2029 0d0a 2020 2020           )..    
+00027db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027dc0: 2020 2020 2020 2020 706c 742e 7368 6f77          plt.show
+00027dd0: 2829 0d0a 0d0a 2020 2020 2020 2020 2020  ()....          
+00027de0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00027df0: 2028 0d0a 2020 2020 2020 2020 2020 2020   (..            
+00027e00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027e10: 2263 6f6c 6f72 6261 7222 2069 6e20 6c61  "colorbar" in la
+00027e20: 7965 725f 6469 6374 2e6b 6579 7328 290d  yer_dict.keys().
+00027e30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00027e40: 2020 2020 2020 2020 2020 2020 2061 6e64               and
+00027e50: 206c 6179 6572 5f64 6963 745b 2263 6f6c   layer_dict["col
+00027e60: 6f72 6261 7222 5d20 696e 2073 656c 662e  orbar"] in self.
+00027e70: 636f 6e74 726f 6c73 0d0a 2020 2020 2020  controls..      
+00027e80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027e90: 2020 293a 0d0a 2020 2020 2020 2020 2020    ):..          
+00027ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027eb0: 2020 7365 6c66 2e72 656d 6f76 655f 636f    self.remove_co
+00027ec0: 6e74 726f 6c28 6c61 7965 725f 6469 6374  ntrol(layer_dict
+00027ed0: 5b22 636f 6c6f 7262 6172 225d 290d 0a20  ["colorbar"]).. 
+00027ee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027ef0: 2020 2020 2020 2020 2020 206c 6179 6572             layer
+00027f00: 5f64 6963 745b 2263 6f6c 6f72 6261 7222  _dict["colorbar"
+00027f10: 5d20 3d20 4e6f 6e65 0d0a 2020 2020 2020  ] = None..      
+00027f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027f30: 2020 6966 2028 0d0a 2020 2020 2020 2020    if (..        
+00027f40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027f50: 2020 2020 226c 6567 656e 6422 2069 6e20      "legend" in 
+00027f60: 6c61 7965 725f 6469 6374 2e6b 6579 7328  layer_dict.keys(
+00027f70: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00027f80: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+00027f90: 6e64 206c 6179 6572 5f64 6963 745b 226c  nd layer_dict["l
+00027fa0: 6567 656e 6422 5d20 696e 2073 656c 662e  egend"] in self.
+00027fb0: 636f 6e74 726f 6c73 0d0a 2020 2020 2020  controls..      
+00027fc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027fd0: 2020 293a 0d0a 2020 2020 2020 2020 2020    ):..          
+00027fe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027ff0: 2020 7365 6c66 2e72 656d 6f76 655f 636f    self.remove_co
+00028000: 6e74 726f 6c28 6c61 7965 725f 6469 6374  ntrol(layer_dict
+00028010: 5b22 6c65 6765 6e64 225d 290d 0a20 2020  ["legend"])..   
+00028020: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028030: 2020 2020 2020 2020 206c 6179 6572 5f64           layer_d
+00028040: 6963 745b 226c 6567 656e 6422 5d20 3d20  ict["legend"] = 
+00028050: 4e6f 6e65 0d0a 0d0a 2020 2020 2020 2020  None....        
+00028060: 2020 2020 6465 6620 636c 6f73 655f 6274      def close_bt
+00028070: 6e5f 636c 6963 6b65 6428 6229 3a0d 0a20  n_clicked(b):.. 
+00028080: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00028090: 6620 7365 6c66 2e76 6973 5f63 6f6e 7472  f self.vis_contr
+000280a0: 6f6c 2069 6e20 7365 6c66 2e63 6f6e 7472  ol in self.contr
+000280b0: 6f6c 733a 0d0a 2020 2020 2020 2020 2020  ols:..          
+000280c0: 2020 2020 2020 2020 2020 7365 6c66 2e72            self.r
+000280d0: 656d 6f76 655f 636f 6e74 726f 6c28 7365  emove_control(se
+000280e0: 6c66 2e76 6973 5f63 6f6e 7472 6f6c 290d  lf.vis_control).
+000280f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00028100: 2020 2020 2073 656c 662e 7669 735f 636f       self.vis_co
+00028110: 6e74 726f 6c20 3d20 4e6f 6e65 0d0a 2020  ntrol = None..  
+00028120: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028130: 2020 7365 6c66 2e76 6973 5f77 6964 6765    self.vis_widge
+00028140: 742e 636c 6f73 6528 290d 0a0d 0a20 2020  t.close()....   
+00028150: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00028160: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
+00028170: 2020 2020 2020 2073 656c 662e 636f 6c6f         self.colo
+00028180: 7262 6172 5f63 7472 6c20 6973 206e 6f74  rbar_ctrl is not
+00028190: 204e 6f6e 650d 0a20 2020 2020 2020 2020   None..         
+000281a0: 2020 2020 2020 2020 2020 2061 6e64 2073             and s
+000281b0: 656c 662e 636f 6c6f 7262 6172 5f63 7472  elf.colorbar_ctr
+000281c0: 6c20 696e 2073 656c 662e 636f 6e74 726f  l in self.contro
+000281d0: 6c73 0d0a 2020 2020 2020 2020 2020 2020  ls..            
+000281e0: 2020 2020 293a 0d0a 2020 2020 2020 2020      ):..        
+000281f0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00028200: 2e72 656d 6f76 655f 636f 6e74 726f 6c28  .remove_control(
+00028210: 7365 6c66 2e63 6f6c 6f72 6261 725f 6374  self.colorbar_ct
+00028220: 726c 290d 0a20 2020 2020 2020 2020 2020  rl)..           
+00028230: 2020 2020 2020 2020 2073 656c 662e 636f           self.co
+00028240: 6c6f 7262 6172 5f63 7472 6c20 3d20 4e6f  lorbar_ctrl = No
+00028250: 6e65 0d0a 2020 2020 2020 2020 2020 2020  ne..            
+00028260: 2020 2020 2020 2020 7365 6c66 2e63 6f6c          self.col
+00028270: 6f72 6261 725f 7769 6467 6574 2e63 6c6f  orbar_widget.clo
+00028280: 7365 2829 0d0a 0d0a 2020 2020 2020 2020  se()....        
+00028290: 2020 2020 696d 706f 7274 5f62 746e 2e6f      import_btn.o
+000282a0: 6e5f 636c 6963 6b28 696d 706f 7274 5f62  n_click(import_b
+000282b0: 746e 5f63 6c69 636b 6564 290d 0a20 2020  tn_clicked)..   
+000282c0: 2020 2020 2020 2020 2061 7070 6c79 5f62           apply_b
+000282d0: 746e 2e6f 6e5f 636c 6963 6b28 6170 706c  tn.on_click(appl
+000282e0: 795f 6274 6e5f 636c 6963 6b65 6429 0d0a  y_btn_clicked)..
+000282f0: 2020 2020 2020 2020 2020 2020 636c 6f73              clos
+00028300: 655f 6274 6e2e 6f6e 5f63 6c69 636b 2863  e_btn.on_click(c
+00028310: 6c6f 7365 5f62 746e 5f63 6c69 636b 6564  lose_btn_clicked
+00028320: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+00028330: 2063 6f6c 6f72 5f68 626f 7820 3d20 7769   color_hbox = wi
+00028340: 6467 6574 732e 4842 6f78 280d 0a20 2020  dgets.HBox(..   
+00028350: 2020 2020 2020 2020 2020 2020 205b 6c65               [le
+00028360: 6765 6e64 5f63 686b 2c20 636f 6c6f 725f  gend_chk, color_
+00028370: 7069 636b 6572 2c20 6164 645f 636f 6c6f  picker, add_colo
+00028380: 722c 2064 656c 5f63 6f6c 6f72 2c20 7265  r, del_color, re
+00028390: 7365 745f 636f 6c6f 725d 0d0a 2020 2020  set_color]..    
+000283a0: 2020 2020 2020 2020 290d 0a20 2020 2020          )..     
+000283b0: 2020 2020 2020 2062 746e 5f68 626f 7820         btn_hbox 
+000283c0: 3d20 7769 6467 6574 732e 4842 6f78 285b  = widgets.HBox([
+000283d0: 696d 706f 7274 5f62 746e 2c20 6170 706c  import_btn, appl
+000283e0: 795f 6274 6e2c 2063 6c6f 7365 5f62 746e  y_btn, close_btn
+000283f0: 5d29 0d0a 0d0a 2020 2020 2020 2020 2020  ])....          
+00028400: 2020 6772 6179 5f62 6f78 203d 205b 0d0a    gray_box = [..
+00028410: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028420: 6c61 6265 6c2c 0d0a 2020 2020 2020 2020  label,..        
+00028430: 2020 2020 2020 2020 7261 6469 6f5f 6274          radio_bt
+00028440: 6e2c 0d0a 2020 2020 2020 2020 2020 2020  n,..            
+00028450: 2020 2020 6261 6e64 735f 6862 6f78 2c0d      bands_hbox,.
+00028460: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00028470: 2076 5f73 7061 6365 722c 0d0a 2020 2020   v_spacer,..    
+00028480: 2020 2020 2020 2020 2020 2020 7261 6e67              rang
+00028490: 655f 6862 6f78 2c0d 0a20 2020 2020 2020  e_hbox,..       
+000284a0: 2020 2020 2020 2020 206f 7061 6369 7479           opacity
+000284b0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+000284c0: 2020 2067 616d 6d61 2c0d 0a20 2020 2020     gamma,..     
+000284d0: 2020 2020 2020 2020 2020 2077 6964 6765             widge
+000284e0: 7473 2e48 426f 7828 5b63 6c61 7373 6573  ts.HBox([classes
+000284f0: 2c20 636f 6c6f 726d 6170 5d29 2c0d 0a20  , colormap]),.. 
+00028500: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+00028510: 616c 6574 7465 2c0d 0a20 2020 2020 2020  alette,..       
+00028520: 2020 2020 2020 2020 2063 6f6c 6f72 5f68           color_h
+00028530: 626f 782c 0d0a 2020 2020 2020 2020 2020  box,..          
+00028540: 2020 2020 2020 6c65 6765 6e64 5f76 626f        legend_vbo
+00028550: 782c 0d0a 2020 2020 2020 2020 2020 2020  x,..            
+00028560: 2020 2020 6274 6e5f 6862 6f78 2c0d 0a20      btn_hbox,.. 
+00028570: 2020 2020 2020 2020 2020 205d 0d0a 0d0a             ]....
+00028580: 2020 2020 2020 2020 2020 2020 7267 625f              rgb_
+00028590: 626f 7820 3d20 5b0d 0a20 2020 2020 2020  box = [..       
+000285a0: 2020 2020 2020 2020 206c 6162 656c 2c0d           label,.
+000285b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000285c0: 2072 6164 696f 5f62 746e 2c0d 0a20 2020   radio_btn,..   
+000285d0: 2020 2020 2020 2020 2020 2020 2062 616e               ban
+000285e0: 6473 5f68 626f 782c 0d0a 2020 2020 2020  ds_hbox,..      
+000285f0: 2020 2020 2020 2020 2020 765f 7370 6163            v_spac
+00028600: 6572 2c0d 0a20 2020 2020 2020 2020 2020  er,..           
+00028610: 2020 2020 2072 616e 6765 5f68 626f 782c       range_hbox,
+00028620: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00028630: 2020 6f70 6163 6974 792c 0d0a 2020 2020    opacity,..    
+00028640: 2020 2020 2020 2020 2020 2020 6761 6d6d              gamm
+00028650: 612c 0d0a 2020 2020 2020 2020 2020 2020  a,..            
+00028660: 2020 2020 6274 6e5f 6862 6f78 2c0d 0a20      btn_hbox,.. 
+00028670: 2020 2020 2020 2020 2020 205d 0d0a 0d0a             ]....
+00028680: 2020 2020 2020 2020 2020 2020 6465 6620              def 
+00028690: 6c65 6765 6e64 5f63 686b 5f63 6861 6e67  legend_chk_chang
+000286a0: 6564 2863 6861 6e67 6529 3a0d 0a0d 0a20  ed(change):.... 
+000286b0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+000286c0: 6620 6368 616e 6765 5b22 6e65 7722 5d3a  f change["new"]:
+000286d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000286e0: 2020 2020 2020 6c69 6e65 6172 5f63 686b        linear_chk
+000286f0: 2e76 616c 7565 203d 2054 7275 650d 0a20  .value = True.. 
+00028700: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028710: 2020 206c 6567 656e 645f 7662 6f78 2e63     legend_vbox.c
+00028720: 6869 6c64 7265 6e20 3d20 5b0d 0a20 2020  hildren = [..   
 00028730: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028740: 2020 2020 5d0d 0a20 2020 2020 2020 2020      ]..         
-00028750: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
-00028760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028770: 2020 6c65 6765 6e64 5f76 626f 782e 6368    legend_vbox.ch
-00028780: 696c 6472 656e 203d 205b 5d0d 0a0d 0a20  ildren = [].... 
-00028790: 2020 2020 2020 2020 2020 206c 6567 656e             legen
-000287a0: 645f 6368 6b2e 6f62 7365 7276 6528 6c65  d_chk.observe(le
-000287b0: 6765 6e64 5f63 686b 5f63 6861 6e67 6564  gend_chk_changed
-000287c0: 2c20 2276 616c 7565 2229 0d0a 0d0a 2020  , "value")....  
-000287d0: 2020 2020 2020 2020 2020 6966 2062 616e            if ban
-000287e0: 645f 636f 756e 7420 3c20 333a 0d0a 2020  d_count < 3:..  
-000287f0: 2020 2020 2020 2020 2020 2020 2020 7261                ra
-00028800: 6469 6f31 2e69 6e64 6578 203d 2030 0d0a  dio1.index = 0..
-00028810: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028820: 6261 6e64 315f 6472 6f70 646f 776e 2e6c  band1_dropdown.l
-00028830: 6179 6f75 742e 7769 6474 6820 3d20 2233  ayout.width = "3
-00028840: 3030 7078 220d 0a20 2020 2020 2020 2020  00px"..         
-00028850: 2020 2020 2020 2062 616e 6473 5f68 626f         bands_hbo
-00028860: 782e 6368 696c 6472 656e 203d 205b 6261  x.children = [ba
-00028870: 6e64 315f 6472 6f70 646f 776e 5d0d 0a20  nd1_dropdown].. 
-00028880: 2020 2020 2020 2020 2020 2020 2020 2076                 v
-00028890: 6973 5f77 6964 6765 742e 6368 696c 6472  is_widget.childr
-000288a0: 656e 203d 2067 7261 795f 626f 780d 0a20  en = gray_box.. 
-000288b0: 2020 2020 2020 2020 2020 2020 2020 206c                 l
-000288c0: 6567 656e 645f 6368 6b2e 7661 6c75 6520  egend_chk.value 
-000288d0: 3d20 4661 6c73 650d 0a0d 0a20 2020 2020  = False....     
-000288e0: 2020 2020 2020 2020 2020 2069 6620 6c65             if le
-000288f0: 6e28 7061 6c65 7474 652e 7661 6c75 6529  n(palette.value)
-00028900: 203e 2030 2061 6e64 2022 2c22 2069 6e20   > 0 and "," in 
-00028910: 7061 6c65 7474 652e 7661 6c75 653a 0d0a  palette.value:..
-00028920: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028930: 2020 2020 696d 706f 7274 206d 6174 706c      import matpl
-00028940: 6f74 6c69 6220 6173 206d 706c 0d0a 2020  otlib as mpl..  
-00028950: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028960: 2020 696d 706f 7274 206d 6174 706c 6f74    import matplot
-00028970: 6c69 622e 7079 706c 6f74 2061 7320 706c  lib.pyplot as pl
-00028980: 740d 0a0d 0a20 2020 2020 2020 2020 2020  t....           
-00028990: 2020 2020 2020 2020 2063 6f6c 6f72 7320           colors 
-000289a0: 3d20 746f 5f68 6578 5f63 6f6c 6f72 7328  = to_hex_colors(
-000289b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000289c0: 2020 2020 2020 2020 2020 5b63 6f6c 6f72            [color
-000289d0: 2e73 7472 6970 2829 2066 6f72 2063 6f6c  .strip() for col
-000289e0: 6f72 2069 6e20 7061 6c65 7474 652e 7661  or in palette.va
-000289f0: 6c75 652e 7370 6c69 7428 222c 2229 5d0d  lue.split(",")].
-00028a00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00028a10: 2020 2020 2029 0d0a 0d0a 2020 2020 2020       )....      
-00028a20: 2020 2020 2020 2020 2020 2020 2020 7365                se
-00028a30: 6c66 2e63 6f6c 6f72 6261 725f 7769 6467  lf.colorbar_widg
-00028a40: 6574 2e63 6c65 6172 5f6f 7574 7075 7428  et.clear_output(
-00028a50: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-00028a60: 2020 2020 2020 2077 6974 6820 7365 6c66         with self
-00028a70: 2e63 6f6c 6f72 6261 725f 7769 6467 6574  .colorbar_widget
-00028a80: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00028a90: 2020 2020 2020 2020 2020 205f 2c20 6178             _, ax
-00028aa0: 203d 2070 6c74 2e73 7562 706c 6f74 7328   = plt.subplots(
-00028ab0: 6669 6773 697a 653d 2836 2c20 302e 3429  figsize=(6, 0.4)
-00028ac0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-00028ad0: 2020 2020 2020 2020 2020 2063 6d61 7020             cmap 
-00028ae0: 3d20 6d70 6c2e 636f 6c6f 7273 2e4c 696e  = mpl.colors.Lin
-00028af0: 6561 7253 6567 6d65 6e74 6564 436f 6c6f  earSegmentedColo
-00028b00: 726d 6170 2e66 726f 6d5f 6c69 7374 280d  rmap.from_list(.
-00028b10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00028b20: 2020 2020 2020 2020 2020 2020 2022 6375               "cu
-00028b30: 7374 6f6d 222c 2063 6f6c 6f72 732c 204e  stom", colors, N
-00028b40: 3d32 3536 0d0a 2020 2020 2020 2020 2020  =256..          
-00028b50: 2020 2020 2020 2020 2020 2020 2020 290d                ).
-00028b60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00028b70: 2020 2020 2020 2020 206e 6f72 6d20 3d20           norm = 
-00028b80: 6d70 6c2e 636f 6c6f 7273 2e4e 6f72 6d61  mpl.colors.Norma
-00028b90: 6c69 7a65 280d 0a20 2020 2020 2020 2020  lize(..         
+00028740: 2020 2020 2077 6964 6765 7473 2e48 426f       widgets.HBo
+00028750: 7828 5b6c 696e 6561 725f 6368 6b2c 2073  x([linear_chk, s
+00028760: 7465 705f 6368 6b5d 292c 0d0a 2020 2020  tep_chk]),..    
+00028770: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028780: 2020 2020 2320 6c65 6765 6e64 5f74 6974      # legend_tit
+00028790: 6c65 2c0d 0a20 2020 2020 2020 2020 2020  le,..           
+000287a0: 2020 2020 2020 2020 2020 2020 2023 206c               # l
+000287b0: 6567 656e 645f 6c61 6265 6c73 2c0d 0a20  egend_labels,.. 
+000287c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000287d0: 2020 205d 0d0a 2020 2020 2020 2020 2020     ]..          
+000287e0: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
+000287f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028800: 206c 6567 656e 645f 7662 6f78 2e63 6869   legend_vbox.chi
+00028810: 6c64 7265 6e20 3d20 5b5d 0d0a 0d0a 2020  ldren = []....  
+00028820: 2020 2020 2020 2020 2020 6c65 6765 6e64            legend
+00028830: 5f63 686b 2e6f 6273 6572 7665 286c 6567  _chk.observe(leg
+00028840: 656e 645f 6368 6b5f 6368 616e 6765 642c  end_chk_changed,
+00028850: 2022 7661 6c75 6522 290d 0a0d 0a20 2020   "value")....   
+00028860: 2020 2020 2020 2020 2069 6620 6261 6e64           if band
+00028870: 5f63 6f75 6e74 203c 2033 3a0d 0a20 2020  _count < 3:..   
+00028880: 2020 2020 2020 2020 2020 2020 2072 6164               rad
+00028890: 696f 312e 696e 6465 7820 3d20 300d 0a20  io1.index = 0.. 
+000288a0: 2020 2020 2020 2020 2020 2020 2020 2062                 b
+000288b0: 616e 6431 5f64 726f 7064 6f77 6e2e 6c61  and1_dropdown.la
+000288c0: 796f 7574 2e77 6964 7468 203d 2022 3330  yout.width = "30
+000288d0: 3070 7822 0d0a 2020 2020 2020 2020 2020  0px"..          
+000288e0: 2020 2020 2020 6261 6e64 735f 6862 6f78        bands_hbox
+000288f0: 2e63 6869 6c64 7265 6e20 3d20 5b62 616e  .children = [ban
+00028900: 6431 5f64 726f 7064 6f77 6e5d 0d0a 2020  d1_dropdown]..  
+00028910: 2020 2020 2020 2020 2020 2020 2020 7669                vi
+00028920: 735f 7769 6467 6574 2e63 6869 6c64 7265  s_widget.childre
+00028930: 6e20 3d20 6772 6179 5f62 6f78 0d0a 2020  n = gray_box..  
+00028940: 2020 2020 2020 2020 2020 2020 2020 6c65                le
+00028950: 6765 6e64 5f63 686b 2e76 616c 7565 203d  gend_chk.value =
+00028960: 2046 616c 7365 0d0a 0d0a 2020 2020 2020   False....      
+00028970: 2020 2020 2020 2020 2020 6966 206c 656e            if len
+00028980: 2870 616c 6574 7465 2e76 616c 7565 2920  (palette.value) 
+00028990: 3e20 3020 616e 6420 222c 2220 696e 2070  > 0 and "," in p
+000289a0: 616c 6574 7465 2e76 616c 7565 3a0d 0a20  alette.value:.. 
+000289b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000289c0: 2020 2069 6d70 6f72 7420 6d61 7470 6c6f     import matplo
+000289d0: 746c 6962 2061 7320 6d70 6c0d 0a20 2020  tlib as mpl..   
+000289e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000289f0: 2069 6d70 6f72 7420 6d61 7470 6c6f 746c   import matplotl
+00028a00: 6962 2e70 7970 6c6f 7420 6173 2070 6c74  ib.pyplot as plt
+00028a10: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00028a20: 2020 2020 2020 2020 636f 6c6f 7273 203d          colors =
+00028a30: 2074 6f5f 6865 785f 636f 6c6f 7273 280d   to_hex_colors(.
+00028a40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00028a50: 2020 2020 2020 2020 205b 636f 6c6f 722e           [color.
+00028a60: 7374 7269 7028 2920 666f 7220 636f 6c6f  strip() for colo
+00028a70: 7220 696e 2070 616c 6574 7465 2e76 616c  r in palette.val
+00028a80: 7565 2e73 706c 6974 2822 2c22 295d 0d0a  ue.split(",")]..
+00028a90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028aa0: 2020 2020 290d 0a0d 0a20 2020 2020 2020      )....       
+00028ab0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+00028ac0: 662e 636f 6c6f 7262 6172 5f77 6964 6765  f.colorbar_widge
+00028ad0: 742e 636c 6561 725f 6f75 7470 7574 2829  t.clear_output()
+00028ae0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00028af0: 2020 2020 2020 7769 7468 2073 656c 662e        with self.
+00028b00: 636f 6c6f 7262 6172 5f77 6964 6765 743a  colorbar_widget:
+00028b10: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00028b20: 2020 2020 2020 2020 2020 5f2c 2061 7820            _, ax 
+00028b30: 3d20 706c 742e 7375 6270 6c6f 7473 2866  = plt.subplots(f
+00028b40: 6967 7369 7a65 3d28 362c 2030 2e34 2929  igsize=(6, 0.4))
+00028b50: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00028b60: 2020 2020 2020 2020 2020 636d 6170 203d            cmap =
+00028b70: 206d 706c 2e63 6f6c 6f72 732e 4c69 6e65   mpl.colors.Line
+00028b80: 6172 5365 676d 656e 7465 6443 6f6c 6f72  arSegmentedColor
+00028b90: 6d61 702e 6672 6f6d 5f6c 6973 7428 0d0a  map.from_list(..
 00028ba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028bb0: 2020 2076 6d69 6e3d 7661 6c75 655f 7261     vmin=value_ra
-00028bc0: 6e67 652e 7661 6c75 655b 305d 2c20 766d  nge.value[0], vm
-00028bd0: 6178 3d76 616c 7565 5f72 616e 6765 2e76  ax=value_range.v
-00028be0: 616c 7565 5b31 5d0d 0a20 2020 2020 2020  alue[1]..       
+00028bb0: 2020 2020 2020 2020 2020 2020 2263 7573              "cus
+00028bc0: 746f 6d22 2c20 636f 6c6f 7273 2c20 4e3d  tom", colors, N=
+00028bd0: 3235 360d 0a20 2020 2020 2020 2020 2020  256..           
+00028be0: 2020 2020 2020 2020 2020 2020 2029 0d0a               )..
 00028bf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028c00: 2029 0d0a 2020 2020 2020 2020 2020 2020   )..            
-00028c10: 2020 2020 2020 2020 2020 2020 6d70 6c2e              mpl.
-00028c20: 636f 6c6f 7262 6172 2e43 6f6c 6f72 6261  colorbar.Colorba
-00028c30: 7242 6173 6528 0d0a 2020 2020 2020 2020  rBase(..        
-00028c40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028c50: 2020 2020 6178 2c20 6e6f 726d 3d6e 6f72      ax, norm=nor
-00028c60: 6d2c 2063 6d61 703d 636d 6170 2c20 6f72  m, cmap=cmap, or
-00028c70: 6965 6e74 6174 696f 6e3d 2268 6f72 697a  ientation="horiz
-00028c80: 6f6e 7461 6c22 0d0a 2020 2020 2020 2020  ontal"..        
-00028c90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028ca0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-00028cb0: 2020 2020 2020 2020 2020 2070 6c74 2e73             plt.s
-00028cc0: 686f 7728 290d 0a0d 0a20 2020 2020 2020  how()....       
-00028cd0: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
-00028ce0: 2020 2020 2020 2020 2020 2020 7261 6469              radi
-00028cf0: 6f32 2e69 6e64 6578 203d 2030 0d0a 2020  o2.index = 0..  
-00028d00: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00028d10: 2028 7365 6c5f 6261 6e64 7320 6973 204e   (sel_bands is N
-00028d20: 6f6e 6529 206f 7220 286c 656e 2873 656c  one) or (len(sel
-00028d30: 5f62 616e 6473 2920 3c20 3229 3a0d 0a20  _bands) < 2):.. 
-00028d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028d50: 2020 2073 656c 5f62 616e 6473 203d 2062     sel_bands = b
-00028d60: 616e 645f 6e61 6d65 735b 303a 335d 0d0a  and_names[0:3]..
-00028d70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028d80: 6261 6e64 315f 6472 6f70 646f 776e 2e76  band1_dropdown.v
-00028d90: 616c 7565 203d 2073 656c 5f62 616e 6473  alue = sel_bands
-00028da0: 5b30 5d0d 0a20 2020 2020 2020 2020 2020  [0]..           
-00028db0: 2020 2020 2062 616e 6432 5f64 726f 7064       band2_dropd
-00028dc0: 6f77 6e2e 7661 6c75 6520 3d20 7365 6c5f  own.value = sel_
-00028dd0: 6261 6e64 735b 315d 0d0a 2020 2020 2020  bands[1]..      
-00028de0: 2020 2020 2020 2020 2020 6261 6e64 335f            band3_
-00028df0: 6472 6f70 646f 776e 2e76 616c 7565 203d  dropdown.value =
-00028e00: 2073 656c 5f62 616e 6473 5b32 5d0d 0a20   sel_bands[2].. 
-00028e10: 2020 2020 2020 2020 2020 2020 2020 2062                 b
-00028e20: 616e 6473 5f68 626f 782e 6368 696c 6472  ands_hbox.childr
-00028e30: 656e 203d 205b 0d0a 2020 2020 2020 2020  en = [..        
-00028e40: 2020 2020 2020 2020 2020 2020 6261 6e64              band
-00028e50: 315f 6472 6f70 646f 776e 2c0d 0a20 2020  1_dropdown,..   
-00028e60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028e70: 2062 616e 6432 5f64 726f 7064 6f77 6e2c   band2_dropdown,
-00028e80: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00028e90: 2020 2020 2020 6261 6e64 335f 6472 6f70        band3_drop
-00028ea0: 646f 776e 2c0d 0a20 2020 2020 2020 2020  down,..         
-00028eb0: 2020 2020 2020 205d 0d0a 2020 2020 2020         ]..      
-00028ec0: 2020 2020 2020 2020 2020 7669 735f 7769            vis_wi
-00028ed0: 6467 6574 2e63 6869 6c64 7265 6e20 3d20  dget.children = 
-00028ee0: 7267 625f 626f 780d 0a0d 0a20 2020 2020  rgb_box....     
-00028ef0: 2020 2020 2020 2064 6566 2072 6164 696f         def radio
-00028f00: 315f 6f62 7365 7276 6572 2873 656e 6465  1_observer(sende
-00028f10: 7229 3a0d 0a20 2020 2020 2020 2020 2020  r):..           
-00028f20: 2020 2020 2072 6164 696f 322e 756e 6f62       radio2.unob
-00028f30: 7365 7276 6528 7261 6469 6f32 5f6f 6273  serve(radio2_obs
-00028f40: 6572 7665 722c 206e 616d 6573 3d5b 2276  erver, names=["v
-00028f50: 616c 7565 225d 290d 0a20 2020 2020 2020  alue"])..       
-00028f60: 2020 2020 2020 2020 2072 6164 696f 322e           radio2.
-00028f70: 696e 6465 7820 3d20 4e6f 6e65 0d0a 2020  index = None..  
-00028f80: 2020 2020 2020 2020 2020 2020 2020 7261                ra
-00028f90: 6469 6f32 2e6f 6273 6572 7665 2872 6164  dio2.observe(rad
-00028fa0: 696f 325f 6f62 7365 7276 6572 2c20 6e61  io2_observer, na
-00028fb0: 6d65 733d 5b22 7661 6c75 6522 5d29 0d0a  mes=["value"])..
-00028fc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028fd0: 6261 6e64 315f 6472 6f70 646f 776e 2e6c  band1_dropdown.l
-00028fe0: 6179 6f75 742e 7769 6474 6820 3d20 2233  ayout.width = "3
-00028ff0: 3030 7078 220d 0a20 2020 2020 2020 2020  00px"..         
-00029000: 2020 2020 2020 2062 616e 6473 5f68 626f         bands_hbo
-00029010: 782e 6368 696c 6472 656e 203d 205b 6261  x.children = [ba
-00029020: 6e64 315f 6472 6f70 646f 776e 5d0d 0a20  nd1_dropdown].. 
-00029030: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-00029040: 616c 6574 7465 2e76 616c 7565 203d 2022  alette.value = "
-00029050: 2c20 222e 6a6f 696e 286c 6179 6572 5f70  , ".join(layer_p
-00029060: 616c 6574 7465 290d 0a20 2020 2020 2020  alette)..       
-00029070: 2020 2020 2020 2020 2070 616c 6574 7465           palette
-00029080: 2e64 6973 6162 6c65 6420 3d20 4661 6c73  .disabled = Fals
-00029090: 650d 0a20 2020 2020 2020 2020 2020 2020  e..             
-000290a0: 2020 2063 6f6c 6f72 5f70 6963 6b65 722e     color_picker.
-000290b0: 6469 7361 626c 6564 203d 2046 616c 7365  disabled = False
-000290c0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000290d0: 2020 6164 645f 636f 6c6f 722e 6469 7361    add_color.disa
-000290e0: 626c 6564 203d 2046 616c 7365 0d0a 2020  bled = False..  
-000290f0: 2020 2020 2020 2020 2020 2020 2020 6465                de
-00029100: 6c5f 636f 6c6f 722e 6469 7361 626c 6564  l_color.disabled
-00029110: 203d 2046 616c 7365 0d0a 2020 2020 2020   = False..      
-00029120: 2020 2020 2020 2020 2020 7265 7365 745f            reset_
-00029130: 636f 6c6f 722e 6469 7361 626c 6564 203d  color.disabled =
-00029140: 2046 616c 7365 0d0a 2020 2020 2020 2020   False..        
-00029150: 2020 2020 2020 2020 7669 735f 7769 6467          vis_widg
-00029160: 6574 2e63 6869 6c64 7265 6e20 3d20 6772  et.children = gr
-00029170: 6179 5f62 6f78 0d0a 0d0a 2020 2020 2020  ay_box....      
-00029180: 2020 2020 2020 2020 2020 6966 206c 656e            if len
-00029190: 2870 616c 6574 7465 2e76 616c 7565 2920  (palette.value) 
-000291a0: 3e20 3020 616e 6420 222c 2220 696e 2070  > 0 and "," in p
-000291b0: 616c 6574 7465 2e76 616c 7565 3a0d 0a20  alette.value:.. 
-000291c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000291d0: 2020 2063 6f6c 6f72 7320 3d20 5b63 6f6c     colors = [col
-000291e0: 6f72 2e73 7472 6970 2829 2066 6f72 2063  or.strip() for c
-000291f0: 6f6c 6f72 2069 6e20 7061 6c65 7474 652e  olor in palette.
-00029200: 7661 6c75 652e 7370 6c69 7428 222c 2229  value.split(",")
-00029210: 5d0d 0a0d 0a20 2020 2020 2020 2020 2020  ]....           
-00029220: 2020 2020 2020 2020 205f 2c20 6178 203d           _, ax =
-00029230: 2070 6c74 2e73 7562 706c 6f74 7328 6669   plt.subplots(fi
-00029240: 6773 697a 653d 2836 2c20 302e 3429 290d  gsize=(6, 0.4)).
-00029250: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00029260: 2020 2020 2063 6d61 7020 3d20 6d70 6c2e       cmap = mpl.
-00029270: 636f 6c6f 7273 2e4c 696e 6561 7253 6567  colors.LinearSeg
-00029280: 6d65 6e74 6564 436f 6c6f 726d 6170 2e66  mentedColormap.f
-00029290: 726f 6d5f 6c69 7374 280d 0a20 2020 2020  rom_list(..     
-000292a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000292b0: 2020 2022 6375 7374 6f6d 222c 2074 6f5f     "custom", to_
-000292c0: 6865 785f 636f 6c6f 7273 2863 6f6c 6f72  hex_colors(color
-000292d0: 7329 2c20 4e3d 3235 360d 0a20 2020 2020  s), N=256..     
-000292e0: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-000292f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00029300: 2020 2020 2020 6e6f 726d 203d 206d 706c        norm = mpl
-00029310: 2e63 6f6c 6f72 732e 4e6f 726d 616c 697a  .colors.Normaliz
-00029320: 6528 766d 696e 3d30 2c20 766d 6178 3d31  e(vmin=0, vmax=1
-00029330: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-00029340: 2020 2020 2020 206d 706c 2e63 6f6c 6f72         mpl.color
-00029350: 6261 722e 436f 6c6f 7262 6172 4261 7365  bar.ColorbarBase
-00029360: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
-00029370: 2020 2020 2020 2020 2020 2061 782c 206e             ax, n
-00029380: 6f72 6d3d 6e6f 726d 2c20 636d 6170 3d63  orm=norm, cmap=c
-00029390: 6d61 702c 206f 7269 656e 7461 7469 6f6e  map, orientation
-000293a0: 3d22 686f 7269 7a6f 6e74 616c 220d 0a20  ="horizontal".. 
-000293b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000293c0: 2020 2029 0d0a 0d0a 2020 2020 2020 2020     )....        
-000293d0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-000293e0: 2e63 6f6c 6f72 6261 725f 7769 6467 6574  .colorbar_widget
-000293f0: 203d 2077 6964 6765 7473 2e4f 7574 7075   = widgets.Outpu
-00029400: 7428 0d0a 2020 2020 2020 2020 2020 2020  t(..            
-00029410: 2020 2020 2020 2020 2020 2020 6c61 796f              layo
-00029420: 7574 3d77 6964 6765 7473 2e4c 6179 6f75  ut=widgets.Layou
-00029430: 7428 6865 6967 6874 3d22 3630 7078 2229  t(height="60px")
-00029440: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00029450: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
-00029460: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-00029470: 662e 636f 6c6f 7262 6172 5f63 7472 6c20  f.colorbar_ctrl 
-00029480: 3d20 6970 796c 6561 666c 6574 2e57 6964  = ipyleaflet.Wid
-00029490: 6765 7443 6f6e 7472 6f6c 280d 0a20 2020  getControl(..   
-000294a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000294b0: 2020 2020 2077 6964 6765 743d 7365 6c66       widget=self
-000294c0: 2e63 6f6c 6f72 6261 725f 7769 6467 6574  .colorbar_widget
-000294d0: 2c20 706f 7369 7469 6f6e 3d22 626f 7474  , position="bott
-000294e0: 6f6d 7269 6768 7422 0d0a 2020 2020 2020  omright"..      
-000294f0: 2020 2020 2020 2020 2020 2020 2020 290d                ).
-00029500: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-00029510: 2020 2020 2020 2069 6620 7365 6c66 2e63         if self.c
-00029520: 6f6c 6f72 6261 725f 6374 726c 206e 6f74  olorbar_ctrl not
-00029530: 2069 6e20 7365 6c66 2e63 6f6e 7472 6f6c   in self.control
-00029540: 733a 0d0a 2020 2020 2020 2020 2020 2020  s:..            
-00029550: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00029560: 2e61 6464 5f63 6f6e 7472 6f6c 2873 656c  .add_control(sel
-00029570: 662e 636f 6c6f 7262 6172 5f63 7472 6c29  f.colorbar_ctrl)
-00029580: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00029590: 2020 2020 2020 2020 7365 6c66 2e63 6f6c          self.col
-000295a0: 6f72 6261 725f 7769 6467 6574 2e63 6c65  orbar_widget.cle
-000295b0: 6172 5f6f 7574 7075 7428 290d 0a20 2020  ar_output()..   
-000295c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000295d0: 2077 6974 6820 7365 6c66 2e63 6f6c 6f72   with self.color
-000295e0: 6261 725f 7769 6467 6574 3a0d 0a20 2020  bar_widget:..   
-000295f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029600: 2020 2020 2070 6c74 2e73 686f 7728 290d       plt.show().
-00029610: 0a0d 0a20 2020 2020 2020 2020 2020 2064  ...            d
-00029620: 6566 2072 6164 696f 325f 6f62 7365 7276  ef radio2_observ
-00029630: 6572 2873 656e 6465 7229 3a0d 0a20 2020  er(sender):..   
-00029640: 2020 2020 2020 2020 2020 2020 2072 6164               rad
-00029650: 696f 312e 756e 6f62 7365 7276 6528 7261  io1.unobserve(ra
-00029660: 6469 6f31 5f6f 6273 6572 7665 722c 206e  dio1_observer, n
-00029670: 616d 6573 3d5b 2276 616c 7565 225d 290d  ames=["value"]).
-00029680: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00029690: 2072 6164 696f 312e 696e 6465 7820 3d20   radio1.index = 
-000296a0: 4e6f 6e65 0d0a 2020 2020 2020 2020 2020  None..          
-000296b0: 2020 2020 2020 7261 6469 6f31 2e6f 6273        radio1.obs
-000296c0: 6572 7665 2872 6164 696f 315f 6f62 7365  erve(radio1_obse
-000296d0: 7276 6572 2c20 6e61 6d65 733d 5b22 7661  rver, names=["va
-000296e0: 6c75 6522 5d29 0d0a 2020 2020 2020 2020  lue"])..        
-000296f0: 2020 2020 2020 2020 6261 6e64 315f 6472          band1_dr
-00029700: 6f70 646f 776e 2e6c 6179 6f75 742e 7769  opdown.layout.wi
-00029710: 6474 6820 3d20 6472 6f70 646f 776e 5f77  dth = dropdown_w
-00029720: 6964 7468 0d0a 2020 2020 2020 2020 2020  idth..          
-00029730: 2020 2020 2020 6261 6e64 735f 6862 6f78        bands_hbox
-00029740: 2e63 6869 6c64 7265 6e20 3d20 5b0d 0a20  .children = [.. 
-00029750: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029760: 2020 2062 616e 6431 5f64 726f 7064 6f77     band1_dropdow
-00029770: 6e2c 0d0a 2020 2020 2020 2020 2020 2020  n,..            
-00029780: 2020 2020 2020 2020 6261 6e64 325f 6472          band2_dr
-00029790: 6f70 646f 776e 2c0d 0a20 2020 2020 2020  opdown,..       
-000297a0: 2020 2020 2020 2020 2020 2020 2062 616e               ban
-000297b0: 6433 5f64 726f 7064 6f77 6e2c 0d0a 2020  d3_dropdown,..  
-000297c0: 2020 2020 2020 2020 2020 2020 2020 5d0d                ].
-000297d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000297e0: 2070 616c 6574 7465 2e76 616c 7565 203d   palette.value =
-000297f0: 2022 220d 0a20 2020 2020 2020 2020 2020   ""..           
-00029800: 2020 2020 2070 616c 6574 7465 2e64 6973       palette.dis
-00029810: 6162 6c65 6420 3d20 5472 7565 0d0a 2020  abled = True..  
-00029820: 2020 2020 2020 2020 2020 2020 2020 636f                co
-00029830: 6c6f 725f 7069 636b 6572 2e64 6973 6162  lor_picker.disab
-00029840: 6c65 6420 3d20 5472 7565 0d0a 2020 2020  led = True..    
-00029850: 2020 2020 2020 2020 2020 2020 6164 645f              add_
-00029860: 636f 6c6f 722e 6469 7361 626c 6564 203d  color.disabled =
-00029870: 2054 7275 650d 0a20 2020 2020 2020 2020   True..         
-00029880: 2020 2020 2020 2064 656c 5f63 6f6c 6f72         del_color
-00029890: 2e64 6973 6162 6c65 6420 3d20 5472 7565  .disabled = True
-000298a0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000298b0: 2020 7265 7365 745f 636f 6c6f 722e 6469    reset_color.di
-000298c0: 7361 626c 6564 203d 2054 7275 650d 0a20  sabled = True.. 
-000298d0: 2020 2020 2020 2020 2020 2020 2020 2076                 v
-000298e0: 6973 5f77 6964 6765 742e 6368 696c 6472  is_widget.childr
-000298f0: 656e 203d 2072 6762 5f62 6f78 0d0a 0d0a  en = rgb_box....
-00029900: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029910: 6966 2028 0d0a 2020 2020 2020 2020 2020  if (..          
-00029920: 2020 2020 2020 2020 2020 7365 6c66 2e63            self.c
-00029930: 6f6c 6f72 6261 725f 6374 726c 2069 7320  olorbar_ctrl is 
-00029940: 6e6f 7420 4e6f 6e65 0d0a 2020 2020 2020  not None..      
-00029950: 2020 2020 2020 2020 2020 2020 2020 616e                an
-00029960: 6420 7365 6c66 2e63 6f6c 6f72 6261 725f  d self.colorbar_
-00029970: 6374 726c 2069 6e20 7365 6c66 2e63 6f6e  ctrl in self.con
-00029980: 7472 6f6c 730d 0a20 2020 2020 2020 2020  trols..         
-00029990: 2020 2020 2020 2029 3a0d 0a20 2020 2020         ):..     
-000299a0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-000299b0: 656c 662e 7265 6d6f 7665 5f63 6f6e 7472  elf.remove_contr
-000299c0: 6f6c 2873 656c 662e 636f 6c6f 7262 6172  ol(self.colorbar
-000299d0: 5f63 7472 6c29 0d0a 2020 2020 2020 2020  _ctrl)..        
-000299e0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-000299f0: 2e63 6f6c 6f72 6261 725f 6374 726c 2e63  .colorbar_ctrl.c
-00029a00: 6c6f 7365 2829 0d0a 2020 2020 2020 2020  lose()..        
-00029a10: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00029a20: 2e63 6f6c 6f72 6261 725f 7769 6467 6574  .colorbar_widget
-00029a30: 2e63 6c6f 7365 2829 0d0a 0d0a 2020 2020  .close()....    
-00029a40: 2020 2020 2020 2020 7261 6469 6f31 2e6f          radio1.o
-00029a50: 6273 6572 7665 2872 6164 696f 315f 6f62  bserve(radio1_ob
-00029a60: 7365 7276 6572 2c20 6e61 6d65 733d 5b22  server, names=["
-00029a70: 7661 6c75 6522 5d29 0d0a 2020 2020 2020  value"])..      
-00029a80: 2020 2020 2020 7261 6469 6f32 2e6f 6273        radio2.obs
-00029a90: 6572 7665 2872 6164 696f 325f 6f62 7365  erve(radio2_obse
-00029aa0: 7276 6572 2c20 6e61 6d65 733d 5b22 7661  rver, names=["va
-00029ab0: 6c75 6522 5d29 0d0a 0d0a 2020 2020 2020  lue"])....      
-00029ac0: 2020 2020 2020 7265 7475 726e 2076 6973        return vis
-00029ad0: 5f77 6964 6765 740d 0a0d 0a20 2020 2020  _widget....     
-00029ae0: 2020 2065 6c69 6620 6973 696e 7374 616e     elif isinstan
-00029af0: 6365 2865 655f 6f62 6a65 6374 2c20 6565  ce(ee_object, ee
-00029b00: 2e46 6561 7475 7265 436f 6c6c 6563 7469  .FeatureCollecti
-00029b10: 6f6e 293a 0d0a 0d0a 2020 2020 2020 2020  on):....        
-00029b20: 2020 2020 7669 735f 7769 6467 6574 203d      vis_widget =
-00029b30: 2077 6964 6765 7473 2e56 426f 7828 0d0a   widgets.VBox(..
-00029b40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029b50: 6c61 796f 7574 3d77 6964 6765 7473 2e4c  layout=widgets.L
-00029b60: 6179 6f75 7428 7061 6464 696e 673d 2235  ayout(padding="5
-00029b70: 7078 2035 7078 2035 7078 2038 7078 222c  px 5px 5px 8px",
-00029b80: 2077 6964 7468 3d22 3333 3070 7822 290d   width="330px").
-00029b90: 0a20 2020 2020 2020 2020 2020 2029 0d0a  .            )..
-00029ba0: 2020 2020 2020 2020 2020 2020 6c61 6265              labe
-00029bb0: 6c20 3d20 7769 6467 6574 732e 4c61 6265  l = widgets.Labe
-00029bc0: 6c28 7661 6c75 653d 6622 7b6c 6179 6572  l(value=f"{layer
-00029bd0: 5f6e 616d 657d 2076 6973 7561 6c69 7a61  _name} visualiza
-00029be0: 7469 6f6e 2070 6172 616d 6574 6572 7322  tion parameters"
-00029bf0: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
-00029c00: 206e 6577 5f6c 6179 6572 5f6e 616d 6520   new_layer_name 
-00029c10: 3d20 7769 6467 6574 732e 5465 7874 280d  = widgets.Text(.
-00029c20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00029c30: 2076 616c 7565 3d66 227b 6c61 7965 725f   value=f"{layer_
-00029c40: 6e61 6d65 7d20 7374 796c 6522 2c0d 0a20  name} style",.. 
-00029c50: 2020 2020 2020 2020 2020 2020 2020 2064                 d
-00029c60: 6573 6372 6970 7469 6f6e 3d22 4e65 7720  escription="New 
-00029c70: 6c61 7965 7220 6e61 6d65 3a22 2c0d 0a20  layer name:",.. 
-00029c80: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00029c90: 7479 6c65 3d7b 2264 6573 6372 6970 7469  tyle={"descripti
-00029ca0: 6f6e 5f77 6964 7468 223a 2022 696e 6974  on_width": "init
-00029cb0: 6961 6c22 7d2c 0d0a 2020 2020 2020 2020  ial"},..        
-00029cc0: 2020 2020 290d 0a0d 0a20 2020 2020 2020      )....       
-00029cd0: 2020 2020 2063 6f6c 6f72 203d 2077 6964       color = wid
-00029ce0: 6765 7473 2e43 6f6c 6f72 5069 636b 6572  gets.ColorPicker
-00029cf0: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
-00029d00: 2020 2063 6f6e 6369 7365 3d46 616c 7365     concise=False
-00029d10: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00029d20: 2020 2076 616c 7565 3d22 2330 3030 3030     value="#00000
-00029d30: 3022 2c0d 0a20 2020 2020 2020 2020 2020  0",..           
-00029d40: 2020 2020 2064 6573 6372 6970 7469 6f6e       description
-00029d50: 3d22 436f 6c6f 723a 222c 0d0a 2020 2020  ="Color:",..    
-00029d60: 2020 2020 2020 2020 2020 2020 6c61 796f              layo
-00029d70: 7574 3d77 6964 6765 7473 2e4c 6179 6f75  ut=widgets.Layou
-00029d80: 7428 7769 6474 683d 2231 3430 7078 2229  t(width="140px")
-00029d90: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00029da0: 2020 2073 7479 6c65 3d7b 2264 6573 6372     style={"descr
-00029db0: 6970 7469 6f6e 5f77 6964 7468 223a 2022  iption_width": "
-00029dc0: 696e 6974 6961 6c22 7d2c 0d0a 2020 2020  initial"},..    
-00029dd0: 2020 2020 2020 2020 290d 0a0d 0a20 2020          )....   
-00029de0: 2020 2020 2020 2020 2063 6f6c 6f72 5f6f           color_o
-00029df0: 7061 6369 7479 203d 2077 6964 6765 7473  pacity = widgets
-00029e00: 2e46 6c6f 6174 536c 6964 6572 280d 0a20  .FloatSlider(.. 
-00029e10: 2020 2020 2020 2020 2020 2020 2020 2076                 v
-00029e20: 616c 7565 3d6c 6179 6572 5f6f 7061 6369  alue=layer_opaci
-00029e30: 7479 2c0d 0a20 2020 2020 2020 2020 2020  ty,..           
-00029e40: 2020 2020 206d 696e 3d30 2c0d 0a20 2020       min=0,..   
-00029e50: 2020 2020 2020 2020 2020 2020 206d 6178               max
-00029e60: 3d31 2c0d 0a20 2020 2020 2020 2020 2020  =1,..           
-00029e70: 2020 2020 2073 7465 703d 302e 3031 2c0d       step=0.01,.
-00029e80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00029e90: 2064 6573 6372 6970 7469 6f6e 3d22 4f70   description="Op
-00029ea0: 6163 6974 793a 222c 0d0a 2020 2020 2020  acity:",..      
-00029eb0: 2020 2020 2020 2020 2020 636f 6e74 696e            contin
-00029ec0: 756f 7573 5f75 7064 6174 653d 5472 7565  uous_update=True
-00029ed0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00029ee0: 2020 2072 6561 646f 7574 3d46 616c 7365     readout=False
-00029ef0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00029f00: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00029f10: 2072 6561 646f 7574 5f66 6f72 6d61 743d   readout_format=
-00029f20: 222e 3266 222c 0d0a 2020 2020 2020 2020  ".2f",..        
-00029f30: 2020 2020 2020 2020 6c61 796f 7574 3d77          layout=w
-00029f40: 6964 6765 7473 2e4c 6179 6f75 7428 7769  idgets.Layout(wi
-00029f50: 6474 683d 2231 3330 7078 2229 2c0d 0a20  dth="130px"),.. 
-00029f60: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00029f70: 7479 6c65 3d7b 2264 6573 6372 6970 7469  tyle={"descripti
-00029f80: 6f6e 5f77 6964 7468 223a 2022 3530 7078  on_width": "50px
-00029f90: 227d 2c0d 0a20 2020 2020 2020 2020 2020  "},..           
-00029fa0: 2029 0d0a 0d0a 2020 2020 2020 2020 2020   )....          
-00029fb0: 2020 636f 6c6f 725f 6f70 6163 6974 795f    color_opacity_
-00029fc0: 6c61 6265 6c20 3d20 7769 6467 6574 732e  label = widgets.
-00029fd0: 4c61 6265 6c28 0d0a 2020 2020 2020 2020  Label(..        
-00029fe0: 2020 2020 2020 2020 7374 796c 653d 7b22          style={"
-00029ff0: 6465 7363 7269 7074 696f 6e5f 7769 6474  description_widt
-0002a000: 6822 3a20 2269 6e69 7469 616c 227d 2c0d  h": "initial"},.
-0002a010: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002a020: 206c 6179 6f75 743d 7769 6467 6574 732e   layout=widgets.
-0002a030: 4c61 796f 7574 2870 6164 6469 6e67 3d22  Layout(padding="
-0002a040: 3070 7822 292c 0d0a 2020 2020 2020 2020  0px"),..        
-0002a050: 2020 2020 290d 0a20 2020 2020 2020 2020      )..         
-0002a060: 2020 2077 6964 6765 7473 2e6a 736c 696e     widgets.jslin
-0002a070: 6b28 2863 6f6c 6f72 5f6f 7061 6369 7479  k((color_opacity
-0002a080: 2c20 2276 616c 7565 2229 2c20 2863 6f6c  , "value"), (col
-0002a090: 6f72 5f6f 7061 6369 7479 5f6c 6162 656c  or_opacity_label
-0002a0a0: 2c20 2276 616c 7565 2229 290d 0a0d 0a20  , "value")).... 
-0002a0b0: 2020 2020 2020 2020 2020 2070 6f69 6e74             point
-0002a0c0: 5f73 697a 6520 3d20 7769 6467 6574 732e  _size = widgets.
-0002a0d0: 496e 7454 6578 7428 0d0a 2020 2020 2020  IntText(..      
-0002a0e0: 2020 2020 2020 2020 2020 7661 6c75 653d            value=
-0002a0f0: 332c 0d0a 2020 2020 2020 2020 2020 2020  3,..            
-0002a100: 2020 2020 6465 7363 7269 7074 696f 6e3d      description=
-0002a110: 2250 6f69 6e74 2073 697a 653a 222c 0d0a  "Point size:",..
-0002a120: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a130: 6c61 796f 7574 3d77 6964 6765 7473 2e4c  layout=widgets.L
-0002a140: 6179 6f75 7428 7769 6474 683d 2231 3130  ayout(width="110
-0002a150: 7078 2229 2c0d 0a20 2020 2020 2020 2020  px"),..         
-0002a160: 2020 2020 2020 2073 7479 6c65 3d7b 2264         style={"d
-0002a170: 6573 6372 6970 7469 6f6e 5f77 6964 7468  escription_width
-0002a180: 223a 2022 696e 6974 6961 6c22 7d2c 0d0a  ": "initial"},..
-0002a190: 2020 2020 2020 2020 2020 2020 290d 0a0d              )...
-0002a1a0: 0a20 2020 2020 2020 2020 2020 2070 6f69  .            poi
-0002a1b0: 6e74 5f73 6861 7065 5f6f 7074 696f 6e73  nt_shape_options
-0002a1c0: 203d 205b 0d0a 2020 2020 2020 2020 2020   = [..          
-0002a1d0: 2020 2020 2020 2263 6972 636c 6522 2c0d        "circle",.
-0002a1e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002a1f0: 2022 7371 7561 7265 222c 0d0a 2020 2020   "square",..    
-0002a200: 2020 2020 2020 2020 2020 2020 2264 6961              "dia
-0002a210: 6d6f 6e64 222c 0d0a 2020 2020 2020 2020  mond",..        
-0002a220: 2020 2020 2020 2020 2263 726f 7373 222c          "cross",
-0002a230: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002a240: 2020 2270 6c75 7322 2c0d 0a20 2020 2020    "plus",..     
-0002a250: 2020 2020 2020 2020 2020 2022 7065 6e74             "pent
-0002a260: 6167 7261 6d22 2c0d 0a20 2020 2020 2020  agram",..       
-0002a270: 2020 2020 2020 2020 2022 6865 7861 6772           "hexagr
-0002a280: 616d 222c 0d0a 2020 2020 2020 2020 2020  am",..          
-0002a290: 2020 2020 2020 2274 7269 616e 676c 6522        "triangle"
-0002a2a0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-0002a2b0: 2020 2022 7472 6961 6e67 6c65 5f75 7022     "triangle_up"
-0002a2c0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-0002a2d0: 2020 2022 7472 6961 6e67 6c65 5f64 6f77     "triangle_dow
-0002a2e0: 6e22 2c0d 0a20 2020 2020 2020 2020 2020  n",..           
-0002a2f0: 2020 2020 2022 7472 6961 6e67 6c65 5f6c       "triangle_l
-0002a300: 6566 7422 2c0d 0a20 2020 2020 2020 2020  eft",..         
-0002a310: 2020 2020 2020 2022 7472 6961 6e67 6c65         "triangle
-0002a320: 5f72 6967 6874 222c 0d0a 2020 2020 2020  _right",..      
-0002a330: 2020 2020 2020 2020 2020 2270 656e 7461            "penta
-0002a340: 676f 6e22 2c0d 0a20 2020 2020 2020 2020  gon",..         
-0002a350: 2020 2020 2020 2022 6865 7861 676f 6e22         "hexagon"
-0002a360: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-0002a370: 2020 2022 7374 6172 3522 2c0d 0a20 2020     "star5",..   
-0002a380: 2020 2020 2020 2020 2020 2020 2022 7374               "st
-0002a390: 6172 3622 2c0d 0a20 2020 2020 2020 2020  ar6",..         
-0002a3a0: 2020 205d 0d0a 2020 2020 2020 2020 2020     ]..          
-0002a3b0: 2020 706f 696e 745f 7368 6170 6520 3d20    point_shape = 
-0002a3c0: 7769 6467 6574 732e 4472 6f70 646f 776e  widgets.Dropdown
-0002a3d0: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
-0002a3e0: 2020 206f 7074 696f 6e73 3d70 6f69 6e74     options=point
-0002a3f0: 5f73 6861 7065 5f6f 7074 696f 6e73 2c0d  _shape_options,.
-0002a400: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002a410: 2076 616c 7565 3d22 6369 7263 6c65 222c   value="circle",
-0002a420: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002a430: 2020 6465 7363 7269 7074 696f 6e3d 2250    description="P
-0002a440: 6f69 6e74 2073 6861 7065 3a22 2c0d 0a20  oint shape:",.. 
-0002a450: 2020 2020 2020 2020 2020 2020 2020 206c                 l
-0002a460: 6179 6f75 743d 7769 6467 6574 732e 4c61  ayout=widgets.La
-0002a470: 796f 7574 2877 6964 7468 3d22 3138 3570  yout(width="185p
-0002a480: 7822 292c 0d0a 2020 2020 2020 2020 2020  x"),..          
-0002a490: 2020 2020 2020 7374 796c 653d 7b22 6465        style={"de
-0002a4a0: 7363 7269 7074 696f 6e5f 7769 6474 6822  scription_width"
-0002a4b0: 3a20 2269 6e69 7469 616c 227d 2c0d 0a20  : "initial"},.. 
-0002a4c0: 2020 2020 2020 2020 2020 2029 0d0a 0d0a             )....
-0002a4d0: 2020 2020 2020 2020 2020 2020 6c69 6e65              line
-0002a4e0: 5f77 6964 7468 203d 2077 6964 6765 7473  _width = widgets
-0002a4f0: 2e49 6e74 5465 7874 280d 0a20 2020 2020  .IntText(..     
-0002a500: 2020 2020 2020 2020 2020 2076 616c 7565             value
-0002a510: 3d32 2c0d 0a20 2020 2020 2020 2020 2020  =2,..           
-0002a520: 2020 2020 2064 6573 6372 6970 7469 6f6e       description
-0002a530: 3d22 4c69 6e65 2077 6964 7468 3a22 2c0d  ="Line width:",.
-0002a540: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002a550: 206c 6179 6f75 743d 7769 6467 6574 732e   layout=widgets.
-0002a560: 4c61 796f 7574 2877 6964 7468 3d22 3131  Layout(width="11
-0002a570: 3070 7822 292c 0d0a 2020 2020 2020 2020  0px"),..        
-0002a580: 2020 2020 2020 2020 7374 796c 653d 7b22          style={"
-0002a590: 6465 7363 7269 7074 696f 6e5f 7769 6474  description_widt
-0002a5a0: 6822 3a20 2269 6e69 7469 616c 227d 2c0d  h": "initial"},.
-0002a5b0: 0a20 2020 2020 2020 2020 2020 2029 0d0a  .            )..
-0002a5c0: 0d0a 2020 2020 2020 2020 2020 2020 6c69  ..            li
-0002a5d0: 6e65 5f74 7970 6520 3d20 7769 6467 6574  ne_type = widget
-0002a5e0: 732e 4472 6f70 646f 776e 280d 0a20 2020  s.Dropdown(..   
-0002a5f0: 2020 2020 2020 2020 2020 2020 206f 7074               opt
-0002a600: 696f 6e73 3d5b 2273 6f6c 6964 222c 2022  ions=["solid", "
-0002a610: 646f 7474 6564 222c 2022 6461 7368 6564  dotted", "dashed
-0002a620: 225d 2c0d 0a20 2020 2020 2020 2020 2020  "],..           
-0002a630: 2020 2020 2076 616c 7565 3d22 736f 6c69       value="soli
-0002a640: 6422 2c0d 0a20 2020 2020 2020 2020 2020  d",..           
-0002a650: 2020 2020 2064 6573 6372 6970 7469 6f6e       description
-0002a660: 3d22 4c69 6e65 2074 7970 653a 222c 0d0a  ="Line type:",..
-0002a670: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a680: 6c61 796f 7574 3d77 6964 6765 7473 2e4c  layout=widgets.L
-0002a690: 6179 6f75 7428 7769 6474 683d 2231 3835  ayout(width="185
-0002a6a0: 7078 2229 2c0d 0a20 2020 2020 2020 2020  px"),..         
-0002a6b0: 2020 2020 2020 2073 7479 6c65 3d7b 2264         style={"d
-0002a6c0: 6573 6372 6970 7469 6f6e 5f77 6964 7468  escription_width
-0002a6d0: 223a 2022 696e 6974 6961 6c22 7d2c 0d0a  ": "initial"},..
-0002a6e0: 2020 2020 2020 2020 2020 2020 290d 0a0d              )...
-0002a6f0: 0a20 2020 2020 2020 2020 2020 2066 696c  .            fil
-0002a700: 6c5f 636f 6c6f 7220 3d20 7769 6467 6574  l_color = widget
-0002a710: 732e 436f 6c6f 7250 6963 6b65 7228 0d0a  s.ColorPicker(..
-0002a720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a730: 636f 6e63 6973 653d 4661 6c73 652c 0d0a  concise=False,..
-0002a740: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a750: 7661 6c75 653d 2223 3030 3030 3030 222c  value="#000000",
-0002a760: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002a770: 2020 6465 7363 7269 7074 696f 6e3d 2246    description="F
-0002a780: 696c 6c20 436f 6c6f 723a 222c 0d0a 2020  ill Color:",..  
-0002a790: 2020 2020 2020 2020 2020 2020 2020 6c61                la
-0002a7a0: 796f 7574 3d77 6964 6765 7473 2e4c 6179  yout=widgets.Lay
-0002a7b0: 6f75 7428 7769 6474 683d 2231 3630 7078  out(width="160px
-0002a7c0: 2229 2c0d 0a20 2020 2020 2020 2020 2020  "),..           
-0002a7d0: 2020 2020 2073 7479 6c65 3d7b 2264 6573       style={"des
-0002a7e0: 6372 6970 7469 6f6e 5f77 6964 7468 223a  cription_width":
-0002a7f0: 2022 696e 6974 6961 6c22 7d2c 0d0a 2020   "initial"},..  
-0002a800: 2020 2020 2020 2020 2020 290d 0a0d 0a20            ).... 
-0002a810: 2020 2020 2020 2020 2020 2066 696c 6c5f             fill_
-0002a820: 636f 6c6f 725f 6f70 6163 6974 7920 3d20  color_opacity = 
-0002a830: 7769 6467 6574 732e 466c 6f61 7453 6c69  widgets.FloatSli
-0002a840: 6465 7228 0d0a 2020 2020 2020 2020 2020  der(..          
-0002a850: 2020 2020 2020 7661 6c75 653d 302e 3636        value=0.66
-0002a860: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-0002a870: 2020 206d 696e 3d30 2c0d 0a20 2020 2020     min=0,..     
-0002a880: 2020 2020 2020 2020 2020 206d 6178 3d31             max=1
-0002a890: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-0002a8a0: 2020 2073 7465 703d 302e 3031 2c0d 0a20     step=0.01,.. 
-0002a8b0: 2020 2020 2020 2020 2020 2020 2020 2064                 d
-0002a8c0: 6573 6372 6970 7469 6f6e 3d22 4f70 6163  escription="Opac
-0002a8d0: 6974 793a 222c 0d0a 2020 2020 2020 2020  ity:",..        
-0002a8e0: 2020 2020 2020 2020 636f 6e74 696e 756f          continuo
-0002a8f0: 7573 5f75 7064 6174 653d 5472 7565 2c0d  us_update=True,.
-0002a900: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002a910: 2072 6561 646f 7574 3d46 616c 7365 2c0d   readout=False,.
-0002a920: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002a930: 2023 2020 2020 2020 2020 2020 2020 2072   #             r
-0002a940: 6561 646f 7574 5f66 6f72 6d61 743d 222e  eadout_format=".
-0002a950: 3266 222c 0d0a 2020 2020 2020 2020 2020  2f",..          
-0002a960: 2020 2020 2020 6c61 796f 7574 3d77 6964        layout=wid
-0002a970: 6765 7473 2e4c 6179 6f75 7428 7769 6474  gets.Layout(widt
-0002a980: 683d 2231 3130 7078 2229 2c0d 0a20 2020  h="110px"),..   
-0002a990: 2020 2020 2020 2020 2020 2020 2073 7479               sty
-0002a9a0: 6c65 3d7b 2264 6573 6372 6970 7469 6f6e  le={"description
-0002a9b0: 5f77 6964 7468 223a 2022 3530 7078 227d  _width": "50px"}
-0002a9c0: 2c0d 0a20 2020 2020 2020 2020 2020 2029  ,..            )
-0002a9d0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0002a9e0: 6669 6c6c 5f63 6f6c 6f72 5f6f 7061 6369  fill_color_opaci
-0002a9f0: 7479 5f6c 6162 656c 203d 2077 6964 6765  ty_label = widge
-0002aa00: 7473 2e4c 6162 656c 280d 0a20 2020 2020  ts.Label(..     
-0002aa10: 2020 2020 2020 2020 2020 2073 7479 6c65             style
-0002aa20: 3d7b 2264 6573 6372 6970 7469 6f6e 5f77  ={"description_w
-0002aa30: 6964 7468 223a 2022 696e 6974 6961 6c22  idth": "initial"
-0002aa40: 7d2c 0d0a 2020 2020 2020 2020 2020 2020  },..            
-0002aa50: 2020 2020 6c61 796f 7574 3d77 6964 6765      layout=widge
-0002aa60: 7473 2e4c 6179 6f75 7428 7061 6464 696e  ts.Layout(paddin
-0002aa70: 673d 2230 7078 2229 2c0d 0a20 2020 2020  g="0px"),..     
-0002aa80: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
-0002aa90: 2020 2020 2020 7769 6467 6574 732e 6a73        widgets.js
-0002aaa0: 6c69 6e6b 280d 0a20 2020 2020 2020 2020  link(..         
-0002aab0: 2020 2020 2020 2028 6669 6c6c 5f63 6f6c         (fill_col
-0002aac0: 6f72 5f6f 7061 6369 7479 2c20 2276 616c  or_opacity, "val
-0002aad0: 7565 2229 2c0d 0a20 2020 2020 2020 2020  ue"),..         
-0002aae0: 2020 2020 2020 2028 6669 6c6c 5f63 6f6c         (fill_col
-0002aaf0: 6f72 5f6f 7061 6369 7479 5f6c 6162 656c  or_opacity_label
-0002ab00: 2c20 2276 616c 7565 2229 2c0d 0a20 2020  , "value"),..   
-0002ab10: 2020 2020 2020 2020 2029 0d0a 0d0a 2020           )....  
-0002ab20: 2020 2020 2020 2020 2020 636f 6c6f 725f            color_
-0002ab30: 7069 636b 6572 203d 2077 6964 6765 7473  picker = widgets
-0002ab40: 2e43 6f6c 6f72 5069 636b 6572 280d 0a20  .ColorPicker(.. 
-0002ab50: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-0002ab60: 6f6e 6369 7365 3d46 616c 7365 2c0d 0a20  oncise=False,.. 
-0002ab70: 2020 2020 2020 2020 2020 2020 2020 2076                 v
-0002ab80: 616c 7565 3d22 2330 3030 3030 3022 2c0d  alue="#000000",.
-0002ab90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002aba0: 206c 6179 6f75 743d 7769 6467 6574 732e   layout=widgets.
-0002abb0: 4c61 796f 7574 2877 6964 7468 3d22 3131  Layout(width="11
-0002abc0: 3670 7822 292c 0d0a 2020 2020 2020 2020  6px"),..        
-0002abd0: 2020 2020 2020 2020 7374 796c 653d 7b22          style={"
-0002abe0: 6465 7363 7269 7074 696f 6e5f 7769 6474  description_widt
-0002abf0: 6822 3a20 2269 6e69 7469 616c 227d 2c0d  h": "initial"},.
-0002ac00: 0a20 2020 2020 2020 2020 2020 2029 0d0a  .            )..
-0002ac10: 2020 2020 2020 2020 2020 2020 6164 645f              add_
-0002ac20: 636f 6c6f 7220 3d20 7769 6467 6574 732e  color = widgets.
-0002ac30: 4275 7474 6f6e 280d 0a20 2020 2020 2020  Button(..       
-0002ac40: 2020 2020 2020 2020 2069 636f 6e3d 2270           icon="p
-0002ac50: 6c75 7322 2c0d 0a20 2020 2020 2020 2020  lus",..         
-0002ac60: 2020 2020 2020 2074 6f6f 6c74 6970 3d22         tooltip="
-0002ac70: 4164 6420 6120 6865 7820 636f 6c6f 7220  Add a hex color 
-0002ac80: 7374 7269 6e67 2074 6f20 7468 6520 7061  string to the pa
-0002ac90: 6c65 7474 6522 2c0d 0a20 2020 2020 2020  lette",..       
-0002aca0: 2020 2020 2020 2020 206c 6179 6f75 743d           layout=
-0002acb0: 7769 6467 6574 732e 4c61 796f 7574 2877  widgets.Layout(w
-0002acc0: 6964 7468 3d22 3332 7078 2229 2c0d 0a20  idth="32px"),.. 
-0002acd0: 2020 2020 2020 2020 2020 2029 0d0a 2020             )..  
-0002ace0: 2020 2020 2020 2020 2020 6465 6c5f 636f            del_co
-0002acf0: 6c6f 7220 3d20 7769 6467 6574 732e 4275  lor = widgets.Bu
-0002ad00: 7474 6f6e 280d 0a20 2020 2020 2020 2020  tton(..         
-0002ad10: 2020 2020 2020 2069 636f 6e3d 226d 696e         icon="min
-0002ad20: 7573 222c 0d0a 2020 2020 2020 2020 2020  us",..          
-0002ad30: 2020 2020 2020 746f 6f6c 7469 703d 2252        tooltip="R
-0002ad40: 656d 6f76 6520 6120 6865 7820 636f 6c6f  emove a hex colo
-0002ad50: 7220 7374 7269 6e67 2066 726f 6d20 7468  r string from th
-0002ad60: 6520 7061 6c65 7474 6522 2c0d 0a20 2020  e palette",..   
-0002ad70: 2020 2020 2020 2020 2020 2020 206c 6179               lay
-0002ad80: 6f75 743d 7769 6467 6574 732e 4c61 796f  out=widgets.Layo
-0002ad90: 7574 2877 6964 7468 3d22 3332 7078 2229  ut(width="32px")
-0002ada0: 2c0d 0a20 2020 2020 2020 2020 2020 2029  ,..            )
-0002adb0: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
-0002adc0: 7365 745f 636f 6c6f 7220 3d20 7769 6467  set_color = widg
-0002add0: 6574 732e 4275 7474 6f6e 280d 0a20 2020  ets.Button(..   
-0002ade0: 2020 2020 2020 2020 2020 2020 2069 636f               ico
-0002adf0: 6e3d 2265 7261 7365 7222 2c0d 0a20 2020  n="eraser",..   
-0002ae00: 2020 2020 2020 2020 2020 2020 2074 6f6f               too
-0002ae10: 6c74 6970 3d22 5265 6d6f 7665 2061 6c6c  ltip="Remove all
-0002ae20: 2063 6f6c 6f72 2073 7472 696e 6773 2066   color strings f
-0002ae30: 726f 6d20 7468 6520 7061 6c65 7474 6522  rom the palette"
-0002ae40: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-0002ae50: 2020 206c 6179 6f75 743d 7769 6467 6574     layout=widget
-0002ae60: 732e 4c61 796f 7574 2877 6964 7468 3d22  s.Layout(width="
-0002ae70: 3334 7078 2229 2c0d 0a20 2020 2020 2020  34px"),..       
-0002ae80: 2020 2020 2029 0d0a 0d0a 2020 2020 2020       )....      
-0002ae90: 2020 2020 2020 7061 6c65 7474 6520 3d20        palette = 
-0002aea0: 7769 6467 6574 732e 5465 7874 280d 0a20  widgets.Text(.. 
-0002aeb0: 2020 2020 2020 2020 2020 2020 2020 2076                 v
-0002aec0: 616c 7565 3d22 222c 0d0a 2020 2020 2020  alue="",..      
-0002aed0: 2020 2020 2020 2020 2020 706c 6163 6568            placeh
-0002aee0: 6f6c 6465 723d 224c 6973 7420 6f66 2068  older="List of h
-0002aef0: 6578 2063 6f64 6520 2852 5247 4742 4229  ex code (RRGGBB)
-0002af00: 2073 6570 6172 6174 6564 2062 7920 636f   separated by co
-0002af10: 6d6d 6122 2c0d 0a20 2020 2020 2020 2020  mma",..         
-0002af20: 2020 2020 2020 2064 6573 6372 6970 7469         descripti
-0002af30: 6f6e 3d22 5061 6c65 7474 653a 222c 0d0a  on="Palette:",..
-0002af40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002af50: 746f 6f6c 7469 703d 2245 6e74 6572 2061  tooltip="Enter a
-0002af60: 206c 6973 7420 6f66 2068 6578 2063 6f64   list of hex cod
-0002af70: 6520 2852 5247 4742 4229 2073 6570 6172  e (RRGGBB) separ
-0002af80: 6174 6564 2062 7920 636f 6d6d 6122 2c0d  ated by comma",.
-0002af90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002afa0: 206c 6179 6f75 743d 7769 6467 6574 732e   layout=widgets.
-0002afb0: 4c61 796f 7574 2877 6964 7468 3d22 3330  Layout(width="30
-0002afc0: 3070 7822 292c 0d0a 2020 2020 2020 2020  0px"),..        
-0002afd0: 2020 2020 2020 2020 7374 796c 653d 7b22          style={"
-0002afe0: 6465 7363 7269 7074 696f 6e5f 7769 6474  description_widt
-0002aff0: 6822 3a20 2269 6e69 7469 616c 227d 2c0d  h": "initial"},.
-0002b000: 0a20 2020 2020 2020 2020 2020 2029 0d0a  .            )..
-0002b010: 0d0a 2020 2020 2020 2020 2020 2020 6c65  ..            le
-0002b020: 6765 6e64 5f74 6974 6c65 203d 2077 6964  gend_title = wid
-0002b030: 6765 7473 2e54 6578 7428 0d0a 2020 2020  gets.Text(..    
-0002b040: 2020 2020 2020 2020 2020 2020 7661 6c75              valu
-0002b050: 653d 224c 6567 656e 6422 2c0d 0a20 2020  e="Legend",..   
-0002b060: 2020 2020 2020 2020 2020 2020 2064 6573               des
-0002b070: 6372 6970 7469 6f6e 3d22 4c65 6765 6e64  cription="Legend
-0002b080: 2074 6974 6c65 3a22 2c0d 0a20 2020 2020   title:",..     
-0002b090: 2020 2020 2020 2020 2020 2074 6f6f 6c74             toolt
-0002b0a0: 6970 3d22 456e 7465 7220 6120 7469 746c  ip="Enter a titl
-0002b0b0: 6520 666f 7220 7468 6520 6c65 6765 6e64  e for the legend
-0002b0c0: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
-0002b0d0: 2020 2020 6c61 796f 7574 3d77 6964 6765      layout=widge
-0002b0e0: 7473 2e4c 6179 6f75 7428 7769 6474 683d  ts.Layout(width=
-0002b0f0: 2233 3030 7078 2229 2c0d 0a20 2020 2020  "300px"),..     
-0002b100: 2020 2020 2020 2020 2020 2073 7479 6c65             style
-0002b110: 3d7b 2264 6573 6372 6970 7469 6f6e 5f77  ={"description_w
-0002b120: 6964 7468 223a 2022 696e 6974 6961 6c22  idth": "initial"
-0002b130: 7d2c 0d0a 2020 2020 2020 2020 2020 2020  },..            
-0002b140: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
-0002b150: 206c 6567 656e 645f 6c61 6265 6c73 203d   legend_labels =
-0002b160: 2077 6964 6765 7473 2e54 6578 7428 0d0a   widgets.Text(..
-0002b170: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b180: 7661 6c75 653d 224c 6162 656c 7322 2c0d  value="Labels",.
-0002b190: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002b1a0: 2064 6573 6372 6970 7469 6f6e 3d22 4c65   description="Le
-0002b1b0: 6765 6e64 206c 6162 656c 733a 222c 0d0a  gend labels:",..
-0002b1c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b1d0: 746f 6f6c 7469 703d 2245 6e74 6572 2061  tooltip="Enter a
-0002b1e0: 2061 206c 6973 7420 6f66 206c 6162 656c   a list of label
-0002b1f0: 7320 666f 7220 7468 6520 6c65 6765 6e64  s for the legend
-0002b200: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
-0002b210: 2020 2020 6c61 796f 7574 3d77 6964 6765      layout=widge
-0002b220: 7473 2e4c 6179 6f75 7428 7769 6474 683d  ts.Layout(width=
-0002b230: 2233 3030 7078 2229 2c0d 0a20 2020 2020  "300px"),..     
-0002b240: 2020 2020 2020 2020 2020 2073 7479 6c65             style
-0002b250: 3d7b 2264 6573 6372 6970 7469 6f6e 5f77  ={"description_w
-0002b260: 6964 7468 223a 2022 696e 6974 6961 6c22  idth": "initial"
-0002b270: 7d2c 0d0a 2020 2020 2020 2020 2020 2020  },..            
-0002b280: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
-0002b290: 2064 6566 2061 6464 5f63 6f6c 6f72 5f63   def add_color_c
-0002b2a0: 6c69 636b 6564 2862 293a 0d0a 2020 2020  licked(b):..    
-0002b2b0: 2020 2020 2020 2020 2020 2020 6966 2063              if c
-0002b2c0: 6f6c 6f72 5f70 6963 6b65 722e 7661 6c75  olor_picker.valu
-0002b2d0: 6520 6973 206e 6f74 204e 6f6e 653a 0d0a  e is not None:..
-0002b2e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b2f0: 2020 2020 6966 206c 656e 2870 616c 6574      if len(palet
-0002b300: 7465 2e76 616c 7565 2920 3d3d 2030 3a0d  te.value) == 0:.
-0002b310: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002b320: 2020 2020 2020 2020 2070 616c 6574 7465           palette
-0002b330: 2e76 616c 7565 203d 2063 6f6c 6f72 5f70  .value = color_p
-0002b340: 6963 6b65 722e 7661 6c75 655b 313a 5d0d  icker.value[1:].
-0002b350: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002b360: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
+00028c00: 2020 2020 2020 2020 6e6f 726d 203d 206d          norm = m
+00028c10: 706c 2e63 6f6c 6f72 732e 4e6f 726d 616c  pl.colors.Normal
+00028c20: 697a 6528 0d0a 2020 2020 2020 2020 2020  ize(..          
+00028c30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028c40: 2020 766d 696e 3d76 616c 7565 5f72 616e    vmin=value_ran
+00028c50: 6765 2e76 616c 7565 5b30 5d2c 2076 6d61  ge.value[0], vma
+00028c60: 783d 7661 6c75 655f 7261 6e67 652e 7661  x=value_range.va
+00028c70: 6c75 655b 315d 0d0a 2020 2020 2020 2020  lue[1]..        
+00028c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028c90: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00028ca0: 2020 2020 2020 2020 2020 206d 706c 2e63             mpl.c
+00028cb0: 6f6c 6f72 6261 722e 436f 6c6f 7262 6172  olorbar.Colorbar
+00028cc0: 4261 7365 280d 0a20 2020 2020 2020 2020  Base(..         
+00028cd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028ce0: 2020 2061 782c 206e 6f72 6d3d 6e6f 726d     ax, norm=norm
+00028cf0: 2c20 636d 6170 3d63 6d61 702c 206f 7269  , cmap=cmap, ori
+00028d00: 656e 7461 7469 6f6e 3d22 686f 7269 7a6f  entation="horizo
+00028d10: 6e74 616c 220d 0a20 2020 2020 2020 2020  ntal"..         
+00028d20: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+00028d30: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00028d40: 2020 2020 2020 2020 2020 706c 742e 7368            plt.sh
+00028d50: 6f77 2829 0d0a 0d0a 2020 2020 2020 2020  ow()....        
+00028d60: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
+00028d70: 2020 2020 2020 2020 2020 2072 6164 696f             radio
+00028d80: 322e 696e 6465 7820 3d20 300d 0a20 2020  2.index = 0..   
+00028d90: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00028da0: 2873 656c 5f62 616e 6473 2069 7320 4e6f  (sel_bands is No
+00028db0: 6e65 2920 6f72 2028 6c65 6e28 7365 6c5f  ne) or (len(sel_
+00028dc0: 6261 6e64 7329 203c 2032 293a 0d0a 2020  bands) < 2):..  
+00028dd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028de0: 2020 7365 6c5f 6261 6e64 7320 3d20 6261    sel_bands = ba
+00028df0: 6e64 5f6e 616d 6573 5b30 3a33 5d0d 0a20  nd_names[0:3].. 
+00028e00: 2020 2020 2020 2020 2020 2020 2020 2062                 b
+00028e10: 616e 6431 5f64 726f 7064 6f77 6e2e 7661  and1_dropdown.va
+00028e20: 6c75 6520 3d20 7365 6c5f 6261 6e64 735b  lue = sel_bands[
+00028e30: 305d 0d0a 2020 2020 2020 2020 2020 2020  0]..            
+00028e40: 2020 2020 6261 6e64 325f 6472 6f70 646f      band2_dropdo
+00028e50: 776e 2e76 616c 7565 203d 2073 656c 5f62  wn.value = sel_b
+00028e60: 616e 6473 5b31 5d0d 0a20 2020 2020 2020  ands[1]..       
+00028e70: 2020 2020 2020 2020 2062 616e 6433 5f64           band3_d
+00028e80: 726f 7064 6f77 6e2e 7661 6c75 6520 3d20  ropdown.value = 
+00028e90: 7365 6c5f 6261 6e64 735b 325d 0d0a 2020  sel_bands[2]..  
+00028ea0: 2020 2020 2020 2020 2020 2020 2020 6261                ba
+00028eb0: 6e64 735f 6862 6f78 2e63 6869 6c64 7265  nds_hbox.childre
+00028ec0: 6e20 3d20 5b0d 0a20 2020 2020 2020 2020  n = [..         
+00028ed0: 2020 2020 2020 2020 2020 2062 616e 6431             band1
+00028ee0: 5f64 726f 7064 6f77 6e2c 0d0a 2020 2020  _dropdown,..    
+00028ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028f00: 6261 6e64 325f 6472 6f70 646f 776e 2c0d  band2_dropdown,.
+00028f10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00028f20: 2020 2020 2062 616e 6433 5f64 726f 7064       band3_dropd
+00028f30: 6f77 6e2c 0d0a 2020 2020 2020 2020 2020  own,..          
+00028f40: 2020 2020 2020 5d0d 0a20 2020 2020 2020        ]..       
+00028f50: 2020 2020 2020 2020 2076 6973 5f77 6964           vis_wid
+00028f60: 6765 742e 6368 696c 6472 656e 203d 2072  get.children = r
+00028f70: 6762 5f62 6f78 0d0a 0d0a 2020 2020 2020  gb_box....      
+00028f80: 2020 2020 2020 6465 6620 7261 6469 6f31        def radio1
+00028f90: 5f6f 6273 6572 7665 7228 7365 6e64 6572  _observer(sender
+00028fa0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+00028fb0: 2020 2020 7261 6469 6f32 2e75 6e6f 6273      radio2.unobs
+00028fc0: 6572 7665 2872 6164 696f 325f 6f62 7365  erve(radio2_obse
+00028fd0: 7276 6572 2c20 6e61 6d65 733d 5b22 7661  rver, names=["va
+00028fe0: 6c75 6522 5d29 0d0a 2020 2020 2020 2020  lue"])..        
+00028ff0: 2020 2020 2020 2020 7261 6469 6f32 2e69          radio2.i
+00029000: 6e64 6578 203d 204e 6f6e 650d 0a20 2020  ndex = None..   
+00029010: 2020 2020 2020 2020 2020 2020 2072 6164               rad
+00029020: 696f 322e 6f62 7365 7276 6528 7261 6469  io2.observe(radi
+00029030: 6f32 5f6f 6273 6572 7665 722c 206e 616d  o2_observer, nam
+00029040: 6573 3d5b 2276 616c 7565 225d 290d 0a20  es=["value"]).. 
+00029050: 2020 2020 2020 2020 2020 2020 2020 2062                 b
+00029060: 616e 6431 5f64 726f 7064 6f77 6e2e 6c61  and1_dropdown.la
+00029070: 796f 7574 2e77 6964 7468 203d 2022 3330  yout.width = "30
+00029080: 3070 7822 0d0a 2020 2020 2020 2020 2020  0px"..          
+00029090: 2020 2020 2020 6261 6e64 735f 6862 6f78        bands_hbox
+000290a0: 2e63 6869 6c64 7265 6e20 3d20 5b62 616e  .children = [ban
+000290b0: 6431 5f64 726f 7064 6f77 6e5d 0d0a 2020  d1_dropdown]..  
+000290c0: 2020 2020 2020 2020 2020 2020 2020 7061                pa
+000290d0: 6c65 7474 652e 7661 6c75 6520 3d20 222c  lette.value = ",
+000290e0: 2022 2e6a 6f69 6e28 6c61 7965 725f 7061   ".join(layer_pa
+000290f0: 6c65 7474 6529 0d0a 2020 2020 2020 2020  lette)..        
+00029100: 2020 2020 2020 2020 7061 6c65 7474 652e          palette.
+00029110: 6469 7361 626c 6564 203d 2046 616c 7365  disabled = False
+00029120: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00029130: 2020 636f 6c6f 725f 7069 636b 6572 2e64    color_picker.d
+00029140: 6973 6162 6c65 6420 3d20 4661 6c73 650d  isabled = False.
+00029150: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00029160: 2061 6464 5f63 6f6c 6f72 2e64 6973 6162   add_color.disab
+00029170: 6c65 6420 3d20 4661 6c73 650d 0a20 2020  led = False..   
+00029180: 2020 2020 2020 2020 2020 2020 2064 656c               del
+00029190: 5f63 6f6c 6f72 2e64 6973 6162 6c65 6420  _color.disabled 
+000291a0: 3d20 4661 6c73 650d 0a20 2020 2020 2020  = False..       
+000291b0: 2020 2020 2020 2020 2072 6573 6574 5f63           reset_c
+000291c0: 6f6c 6f72 2e64 6973 6162 6c65 6420 3d20  olor.disabled = 
+000291d0: 4661 6c73 650d 0a20 2020 2020 2020 2020  False..         
+000291e0: 2020 2020 2020 2076 6973 5f77 6964 6765         vis_widge
+000291f0: 742e 6368 696c 6472 656e 203d 2067 7261  t.children = gra
+00029200: 795f 626f 780d 0a0d 0a20 2020 2020 2020  y_box....       
+00029210: 2020 2020 2020 2020 2069 6620 6c65 6e28           if len(
+00029220: 7061 6c65 7474 652e 7661 6c75 6529 203e  palette.value) >
+00029230: 2030 2061 6e64 2022 2c22 2069 6e20 7061   0 and "," in pa
+00029240: 6c65 7474 652e 7661 6c75 653a 0d0a 2020  lette.value:..  
+00029250: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00029260: 2020 636f 6c6f 7273 203d 205b 636f 6c6f    colors = [colo
+00029270: 722e 7374 7269 7028 2920 666f 7220 636f  r.strip() for co
+00029280: 6c6f 7220 696e 2070 616c 6574 7465 2e76  lor in palette.v
+00029290: 616c 7565 2e73 706c 6974 2822 2c22 295d  alue.split(",")]
+000292a0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+000292b0: 2020 2020 2020 2020 5f2c 2061 7820 3d20          _, ax = 
+000292c0: 706c 742e 7375 6270 6c6f 7473 2866 6967  plt.subplots(fig
+000292d0: 7369 7a65 3d28 362c 2030 2e34 2929 0d0a  size=(6, 0.4))..
+000292e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000292f0: 2020 2020 636d 6170 203d 206d 706c 2e63      cmap = mpl.c
+00029300: 6f6c 6f72 732e 4c69 6e65 6172 5365 676d  olors.LinearSegm
+00029310: 656e 7465 6443 6f6c 6f72 6d61 702e 6672  entedColormap.fr
+00029320: 6f6d 5f6c 6973 7428 0d0a 2020 2020 2020  om_list(..      
+00029330: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00029340: 2020 2263 7573 746f 6d22 2c20 746f 5f68    "custom", to_h
+00029350: 6578 5f63 6f6c 6f72 7328 636f 6c6f 7273  ex_colors(colors
+00029360: 292c 204e 3d32 3536 0d0a 2020 2020 2020  ), N=256..      
+00029370: 2020 2020 2020 2020 2020 2020 2020 290d                ).
+00029380: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00029390: 2020 2020 206e 6f72 6d20 3d20 6d70 6c2e       norm = mpl.
+000293a0: 636f 6c6f 7273 2e4e 6f72 6d61 6c69 7a65  colors.Normalize
+000293b0: 2876 6d69 6e3d 302c 2076 6d61 783d 3129  (vmin=0, vmax=1)
+000293c0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000293d0: 2020 2020 2020 6d70 6c2e 636f 6c6f 7262        mpl.colorb
+000293e0: 6172 2e43 6f6c 6f72 6261 7242 6173 6528  ar.ColorbarBase(
+000293f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00029400: 2020 2020 2020 2020 2020 6178 2c20 6e6f            ax, no
+00029410: 726d 3d6e 6f72 6d2c 2063 6d61 703d 636d  rm=norm, cmap=cm
+00029420: 6170 2c20 6f72 6965 6e74 6174 696f 6e3d  ap, orientation=
+00029430: 2268 6f72 697a 6f6e 7461 6c22 0d0a 2020  "horizontal"..  
+00029440: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00029450: 2020 290d 0a0d 0a20 2020 2020 2020 2020    )....         
+00029460: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00029470: 636f 6c6f 7262 6172 5f77 6964 6765 7420  colorbar_widget 
+00029480: 3d20 7769 6467 6574 732e 4f75 7470 7574  = widgets.Output
+00029490: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
+000294a0: 2020 2020 2020 2020 2020 206c 6179 6f75             layou
+000294b0: 743d 7769 6467 6574 732e 4c61 796f 7574  t=widgets.Layout
+000294c0: 2868 6569 6768 743d 2236 3070 7822 290d  (height="60px").
+000294d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000294e0: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
+000294f0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00029500: 2e63 6f6c 6f72 6261 725f 6374 726c 203d  .colorbar_ctrl =
+00029510: 2069 7079 6c65 6166 6c65 742e 5769 6467   ipyleaflet.Widg
+00029520: 6574 436f 6e74 726f 6c28 0d0a 2020 2020  etControl(..    
+00029530: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00029540: 2020 2020 7769 6467 6574 3d73 656c 662e      widget=self.
+00029550: 636f 6c6f 7262 6172 5f77 6964 6765 742c  colorbar_widget,
+00029560: 2070 6f73 6974 696f 6e3d 2262 6f74 746f   position="botto
+00029570: 6d72 6967 6874 220d 0a20 2020 2020 2020  mright"..       
+00029580: 2020 2020 2020 2020 2020 2020 2029 0d0a               )..
+00029590: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000295a0: 2020 2020 2020 6966 2073 656c 662e 636f        if self.co
+000295b0: 6c6f 7262 6172 5f63 7472 6c20 6e6f 7420  lorbar_ctrl not 
+000295c0: 696e 2073 656c 662e 636f 6e74 726f 6c73  in self.controls
+000295d0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+000295e0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+000295f0: 6164 645f 636f 6e74 726f 6c28 7365 6c66  add_control(self
+00029600: 2e63 6f6c 6f72 6261 725f 6374 726c 290d  .colorbar_ctrl).
+00029610: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+00029620: 2020 2020 2020 2073 656c 662e 636f 6c6f         self.colo
+00029630: 7262 6172 5f77 6964 6765 742e 636c 6561  rbar_widget.clea
+00029640: 725f 6f75 7470 7574 2829 0d0a 2020 2020  r_output()..    
+00029650: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00029660: 7769 7468 2073 656c 662e 636f 6c6f 7262  with self.colorb
+00029670: 6172 5f77 6964 6765 743a 0d0a 2020 2020  ar_widget:..    
+00029680: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00029690: 2020 2020 706c 742e 7368 6f77 2829 0d0a      plt.show()..
+000296a0: 0d0a 2020 2020 2020 2020 2020 2020 6465  ..            de
+000296b0: 6620 7261 6469 6f32 5f6f 6273 6572 7665  f radio2_observe
+000296c0: 7228 7365 6e64 6572 293a 0d0a 2020 2020  r(sender):..    
+000296d0: 2020 2020 2020 2020 2020 2020 7261 6469              radi
+000296e0: 6f31 2e75 6e6f 6273 6572 7665 2872 6164  o1.unobserve(rad
+000296f0: 696f 315f 6f62 7365 7276 6572 2c20 6e61  io1_observer, na
+00029700: 6d65 733d 5b22 7661 6c75 6522 5d29 0d0a  mes=["value"])..
+00029710: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00029720: 7261 6469 6f31 2e69 6e64 6578 203d 204e  radio1.index = N
+00029730: 6f6e 650d 0a20 2020 2020 2020 2020 2020  one..           
+00029740: 2020 2020 2072 6164 696f 312e 6f62 7365       radio1.obse
+00029750: 7276 6528 7261 6469 6f31 5f6f 6273 6572  rve(radio1_obser
+00029760: 7665 722c 206e 616d 6573 3d5b 2276 616c  ver, names=["val
+00029770: 7565 225d 290d 0a20 2020 2020 2020 2020  ue"])..         
+00029780: 2020 2020 2020 2062 616e 6431 5f64 726f         band1_dro
+00029790: 7064 6f77 6e2e 6c61 796f 7574 2e77 6964  pdown.layout.wid
+000297a0: 7468 203d 2064 726f 7064 6f77 6e5f 7769  th = dropdown_wi
+000297b0: 6474 680d 0a20 2020 2020 2020 2020 2020  dth..           
+000297c0: 2020 2020 2062 616e 6473 5f68 626f 782e       bands_hbox.
+000297d0: 6368 696c 6472 656e 203d 205b 0d0a 2020  children = [..  
+000297e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000297f0: 2020 6261 6e64 315f 6472 6f70 646f 776e    band1_dropdown
+00029800: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+00029810: 2020 2020 2020 2062 616e 6432 5f64 726f         band2_dro
+00029820: 7064 6f77 6e2c 0d0a 2020 2020 2020 2020  pdown,..        
+00029830: 2020 2020 2020 2020 2020 2020 6261 6e64              band
+00029840: 335f 6472 6f70 646f 776e 2c0d 0a20 2020  3_dropdown,..   
+00029850: 2020 2020 2020 2020 2020 2020 205d 0d0a               ]..
+00029860: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00029870: 7061 6c65 7474 652e 7661 6c75 6520 3d20  palette.value = 
+00029880: 2222 0d0a 2020 2020 2020 2020 2020 2020  ""..            
+00029890: 2020 2020 7061 6c65 7474 652e 6469 7361      palette.disa
+000298a0: 626c 6564 203d 2054 7275 650d 0a20 2020  bled = True..   
+000298b0: 2020 2020 2020 2020 2020 2020 2063 6f6c               col
+000298c0: 6f72 5f70 6963 6b65 722e 6469 7361 626c  or_picker.disabl
+000298d0: 6564 203d 2054 7275 650d 0a20 2020 2020  ed = True..     
+000298e0: 2020 2020 2020 2020 2020 2061 6464 5f63             add_c
+000298f0: 6f6c 6f72 2e64 6973 6162 6c65 6420 3d20  olor.disabled = 
+00029900: 5472 7565 0d0a 2020 2020 2020 2020 2020  True..          
+00029910: 2020 2020 2020 6465 6c5f 636f 6c6f 722e        del_color.
+00029920: 6469 7361 626c 6564 203d 2054 7275 650d  disabled = True.
+00029930: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00029940: 2072 6573 6574 5f63 6f6c 6f72 2e64 6973   reset_color.dis
+00029950: 6162 6c65 6420 3d20 5472 7565 0d0a 2020  abled = True..  
+00029960: 2020 2020 2020 2020 2020 2020 2020 7669                vi
+00029970: 735f 7769 6467 6574 2e63 6869 6c64 7265  s_widget.childre
+00029980: 6e20 3d20 7267 625f 626f 780d 0a0d 0a20  n = rgb_box.... 
+00029990: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+000299a0: 6620 280d 0a20 2020 2020 2020 2020 2020  f (..           
+000299b0: 2020 2020 2020 2020 2073 656c 662e 636f           self.co
+000299c0: 6c6f 7262 6172 5f63 7472 6c20 6973 206e  lorbar_ctrl is n
+000299d0: 6f74 204e 6f6e 650d 0a20 2020 2020 2020  ot None..       
+000299e0: 2020 2020 2020 2020 2020 2020 2061 6e64               and
+000299f0: 2073 656c 662e 636f 6c6f 7262 6172 5f63   self.colorbar_c
+00029a00: 7472 6c20 696e 2073 656c 662e 636f 6e74  trl in self.cont
+00029a10: 726f 6c73 0d0a 2020 2020 2020 2020 2020  rols..          
+00029a20: 2020 2020 2020 293a 0d0a 2020 2020 2020        ):..      
+00029a30: 2020 2020 2020 2020 2020 2020 2020 7365                se
+00029a40: 6c66 2e72 656d 6f76 655f 636f 6e74 726f  lf.remove_contro
+00029a50: 6c28 7365 6c66 2e63 6f6c 6f72 6261 725f  l(self.colorbar_
+00029a60: 6374 726c 290d 0a20 2020 2020 2020 2020  ctrl)..         
+00029a70: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00029a80: 636f 6c6f 7262 6172 5f63 7472 6c2e 636c  colorbar_ctrl.cl
+00029a90: 6f73 6528 290d 0a20 2020 2020 2020 2020  ose()..         
+00029aa0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00029ab0: 636f 6c6f 7262 6172 5f77 6964 6765 742e  colorbar_widget.
+00029ac0: 636c 6f73 6528 290d 0a0d 0a20 2020 2020  close()....     
+00029ad0: 2020 2020 2020 2072 6164 696f 312e 6f62         radio1.ob
+00029ae0: 7365 7276 6528 7261 6469 6f31 5f6f 6273  serve(radio1_obs
+00029af0: 6572 7665 722c 206e 616d 6573 3d5b 2276  erver, names=["v
+00029b00: 616c 7565 225d 290d 0a20 2020 2020 2020  alue"])..       
+00029b10: 2020 2020 2072 6164 696f 322e 6f62 7365       radio2.obse
+00029b20: 7276 6528 7261 6469 6f32 5f6f 6273 6572  rve(radio2_obser
+00029b30: 7665 722c 206e 616d 6573 3d5b 2276 616c  ver, names=["val
+00029b40: 7565 225d 290d 0a0d 0a20 2020 2020 2020  ue"])....       
+00029b50: 2020 2020 2072 6574 7572 6e20 7669 735f       return vis_
+00029b60: 7769 6467 6574 0d0a 0d0a 2020 2020 2020  widget....      
+00029b70: 2020 656c 6966 2069 7369 6e73 7461 6e63    elif isinstanc
+00029b80: 6528 6565 5f6f 626a 6563 742c 2065 652e  e(ee_object, ee.
+00029b90: 4665 6174 7572 6543 6f6c 6c65 6374 696f  FeatureCollectio
+00029ba0: 6e29 3a0d 0a0d 0a20 2020 2020 2020 2020  n):....         
+00029bb0: 2020 2076 6973 5f77 6964 6765 7420 3d20     vis_widget = 
+00029bc0: 7769 6467 6574 732e 5642 6f78 280d 0a20  widgets.VBox(.. 
+00029bd0: 2020 2020 2020 2020 2020 2020 2020 206c                 l
+00029be0: 6179 6f75 743d 7769 6467 6574 732e 4c61  ayout=widgets.La
+00029bf0: 796f 7574 2870 6164 6469 6e67 3d22 3570  yout(padding="5p
+00029c00: 7820 3570 7820 3570 7820 3870 7822 2c20  x 5px 5px 8px", 
+00029c10: 7769 6474 683d 2233 3330 7078 2229 0d0a  width="330px")..
+00029c20: 2020 2020 2020 2020 2020 2020 290d 0a20              ).. 
+00029c30: 2020 2020 2020 2020 2020 206c 6162 656c             label
+00029c40: 203d 2077 6964 6765 7473 2e4c 6162 656c   = widgets.Label
+00029c50: 2876 616c 7565 3d66 227b 6c61 7965 725f  (value=f"{layer_
+00029c60: 6e61 6d65 7d20 7669 7375 616c 697a 6174  name} visualizat
+00029c70: 696f 6e20 7061 7261 6d65 7465 7273 2229  ion parameters")
+00029c80: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00029c90: 6e65 775f 6c61 7965 725f 6e61 6d65 203d  new_layer_name =
+00029ca0: 2077 6964 6765 7473 2e54 6578 7428 0d0a   widgets.Text(..
+00029cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00029cc0: 7661 6c75 653d 6622 7b6c 6179 6572 5f6e  value=f"{layer_n
+00029cd0: 616d 657d 2073 7479 6c65 222c 0d0a 2020  ame} style",..  
+00029ce0: 2020 2020 2020 2020 2020 2020 2020 6465                de
+00029cf0: 7363 7269 7074 696f 6e3d 224e 6577 206c  scription="New l
+00029d00: 6179 6572 206e 616d 653a 222c 0d0a 2020  ayer name:",..  
+00029d10: 2020 2020 2020 2020 2020 2020 2020 7374                st
+00029d20: 796c 653d 7b22 6465 7363 7269 7074 696f  yle={"descriptio
+00029d30: 6e5f 7769 6474 6822 3a20 2269 6e69 7469  n_width": "initi
+00029d40: 616c 227d 2c0d 0a20 2020 2020 2020 2020  al"},..         
+00029d50: 2020 2029 0d0a 0d0a 2020 2020 2020 2020     )....        
+00029d60: 2020 2020 636f 6c6f 7220 3d20 7769 6467      color = widg
+00029d70: 6574 732e 436f 6c6f 7250 6963 6b65 7228  ets.ColorPicker(
+00029d80: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00029d90: 2020 636f 6e63 6973 653d 4661 6c73 652c    concise=False,
+00029da0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00029db0: 2020 7661 6c75 653d 2223 3030 3030 3030    value="#000000
+00029dc0: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
+00029dd0: 2020 2020 6465 7363 7269 7074 696f 6e3d      description=
+00029de0: 2243 6f6c 6f72 3a22 2c0d 0a20 2020 2020  "Color:",..     
+00029df0: 2020 2020 2020 2020 2020 206c 6179 6f75             layou
+00029e00: 743d 7769 6467 6574 732e 4c61 796f 7574  t=widgets.Layout
+00029e10: 2877 6964 7468 3d22 3134 3070 7822 292c  (width="140px"),
+00029e20: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00029e30: 2020 7374 796c 653d 7b22 6465 7363 7269    style={"descri
+00029e40: 7074 696f 6e5f 7769 6474 6822 3a20 2269  ption_width": "i
+00029e50: 6e69 7469 616c 227d 2c0d 0a20 2020 2020  nitial"},..     
+00029e60: 2020 2020 2020 2029 0d0a 0d0a 2020 2020         )....    
+00029e70: 2020 2020 2020 2020 636f 6c6f 725f 6f70          color_op
+00029e80: 6163 6974 7920 3d20 7769 6467 6574 732e  acity = widgets.
+00029e90: 466c 6f61 7453 6c69 6465 7228 0d0a 2020  FloatSlider(..  
+00029ea0: 2020 2020 2020 2020 2020 2020 2020 7661                va
+00029eb0: 6c75 653d 6c61 7965 725f 6f70 6163 6974  lue=layer_opacit
+00029ec0: 792c 0d0a 2020 2020 2020 2020 2020 2020  y,..            
+00029ed0: 2020 2020 6d69 6e3d 302c 0d0a 2020 2020      min=0,..    
+00029ee0: 2020 2020 2020 2020 2020 2020 6d61 783d              max=
+00029ef0: 312c 0d0a 2020 2020 2020 2020 2020 2020  1,..            
+00029f00: 2020 2020 7374 6570 3d30 2e30 312c 0d0a      step=0.01,..
+00029f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00029f20: 6465 7363 7269 7074 696f 6e3d 224f 7061  description="Opa
+00029f30: 6369 7479 3a22 2c0d 0a20 2020 2020 2020  city:",..       
+00029f40: 2020 2020 2020 2020 2063 6f6e 7469 6e75           continu
+00029f50: 6f75 735f 7570 6461 7465 3d54 7275 652c  ous_update=True,
+00029f60: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00029f70: 2020 7265 6164 6f75 743d 4661 6c73 652c    readout=False,
+00029f80: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00029f90: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00029fa0: 7265 6164 6f75 745f 666f 726d 6174 3d22  readout_format="
+00029fb0: 2e32 6622 2c0d 0a20 2020 2020 2020 2020  .2f",..         
+00029fc0: 2020 2020 2020 206c 6179 6f75 743d 7769         layout=wi
+00029fd0: 6467 6574 732e 4c61 796f 7574 2877 6964  dgets.Layout(wid
+00029fe0: 7468 3d22 3133 3070 7822 292c 0d0a 2020  th="130px"),..  
+00029ff0: 2020 2020 2020 2020 2020 2020 2020 7374                st
+0002a000: 796c 653d 7b22 6465 7363 7269 7074 696f  yle={"descriptio
+0002a010: 6e5f 7769 6474 6822 3a20 2235 3070 7822  n_width": "50px"
+0002a020: 7d2c 0d0a 2020 2020 2020 2020 2020 2020  },..            
+0002a030: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+0002a040: 2063 6f6c 6f72 5f6f 7061 6369 7479 5f6c   color_opacity_l
+0002a050: 6162 656c 203d 2077 6964 6765 7473 2e4c  abel = widgets.L
+0002a060: 6162 656c 280d 0a20 2020 2020 2020 2020  abel(..         
+0002a070: 2020 2020 2020 2073 7479 6c65 3d7b 2264         style={"d
+0002a080: 6573 6372 6970 7469 6f6e 5f77 6964 7468  escription_width
+0002a090: 223a 2022 696e 6974 6961 6c22 7d2c 0d0a  ": "initial"},..
+0002a0a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002a0b0: 6c61 796f 7574 3d77 6964 6765 7473 2e4c  layout=widgets.L
+0002a0c0: 6179 6f75 7428 7061 6464 696e 673d 2230  ayout(padding="0
+0002a0d0: 7078 2229 2c0d 0a20 2020 2020 2020 2020  px"),..         
+0002a0e0: 2020 2029 0d0a 2020 2020 2020 2020 2020     )..          
+0002a0f0: 2020 7769 6467 6574 732e 6a73 6c69 6e6b    widgets.jslink
+0002a100: 2828 636f 6c6f 725f 6f70 6163 6974 792c  ((color_opacity,
+0002a110: 2022 7661 6c75 6522 292c 2028 636f 6c6f   "value"), (colo
+0002a120: 725f 6f70 6163 6974 795f 6c61 6265 6c2c  r_opacity_label,
+0002a130: 2022 7661 6c75 6522 2929 0d0a 0d0a 2020   "value"))....  
+0002a140: 2020 2020 2020 2020 2020 706f 696e 745f            point_
+0002a150: 7369 7a65 203d 2077 6964 6765 7473 2e49  size = widgets.I
+0002a160: 6e74 5465 7874 280d 0a20 2020 2020 2020  ntText(..       
+0002a170: 2020 2020 2020 2020 2076 616c 7565 3d33           value=3
+0002a180: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+0002a190: 2020 2064 6573 6372 6970 7469 6f6e 3d22     description="
+0002a1a0: 506f 696e 7420 7369 7a65 3a22 2c0d 0a20  Point size:",.. 
+0002a1b0: 2020 2020 2020 2020 2020 2020 2020 206c                 l
+0002a1c0: 6179 6f75 743d 7769 6467 6574 732e 4c61  ayout=widgets.La
+0002a1d0: 796f 7574 2877 6964 7468 3d22 3131 3070  yout(width="110p
+0002a1e0: 7822 292c 0d0a 2020 2020 2020 2020 2020  x"),..          
+0002a1f0: 2020 2020 2020 7374 796c 653d 7b22 6465        style={"de
+0002a200: 7363 7269 7074 696f 6e5f 7769 6474 6822  scription_width"
+0002a210: 3a20 2269 6e69 7469 616c 227d 2c0d 0a20  : "initial"},.. 
+0002a220: 2020 2020 2020 2020 2020 2029 0d0a 0d0a             )....
+0002a230: 2020 2020 2020 2020 2020 2020 706f 696e              poin
+0002a240: 745f 7368 6170 655f 6f70 7469 6f6e 7320  t_shape_options 
+0002a250: 3d20 5b0d 0a20 2020 2020 2020 2020 2020  = [..           
+0002a260: 2020 2020 2022 6369 7263 6c65 222c 0d0a       "circle",..
+0002a270: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002a280: 2273 7175 6172 6522 2c0d 0a20 2020 2020  "square",..     
+0002a290: 2020 2020 2020 2020 2020 2022 6469 616d             "diam
+0002a2a0: 6f6e 6422 2c0d 0a20 2020 2020 2020 2020  ond",..         
+0002a2b0: 2020 2020 2020 2022 6372 6f73 7322 2c0d         "cross",.
+0002a2c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002a2d0: 2022 706c 7573 222c 0d0a 2020 2020 2020   "plus",..      
+0002a2e0: 2020 2020 2020 2020 2020 2270 656e 7461            "penta
+0002a2f0: 6772 616d 222c 0d0a 2020 2020 2020 2020  gram",..        
+0002a300: 2020 2020 2020 2020 2268 6578 6167 7261          "hexagra
+0002a310: 6d22 2c0d 0a20 2020 2020 2020 2020 2020  m",..           
+0002a320: 2020 2020 2022 7472 6961 6e67 6c65 222c       "triangle",
+0002a330: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002a340: 2020 2274 7269 616e 676c 655f 7570 222c    "triangle_up",
+0002a350: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002a360: 2020 2274 7269 616e 676c 655f 646f 776e    "triangle_down
+0002a370: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
+0002a380: 2020 2020 2274 7269 616e 676c 655f 6c65      "triangle_le
+0002a390: 6674 222c 0d0a 2020 2020 2020 2020 2020  ft",..          
+0002a3a0: 2020 2020 2020 2274 7269 616e 676c 655f        "triangle_
+0002a3b0: 7269 6768 7422 2c0d 0a20 2020 2020 2020  right",..       
+0002a3c0: 2020 2020 2020 2020 2022 7065 6e74 6167           "pentag
+0002a3d0: 6f6e 222c 0d0a 2020 2020 2020 2020 2020  on",..          
+0002a3e0: 2020 2020 2020 2268 6578 6167 6f6e 222c        "hexagon",
+0002a3f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002a400: 2020 2273 7461 7235 222c 0d0a 2020 2020    "star5",..    
+0002a410: 2020 2020 2020 2020 2020 2020 2273 7461              "sta
+0002a420: 7236 222c 0d0a 2020 2020 2020 2020 2020  r6",..          
+0002a430: 2020 5d0d 0a20 2020 2020 2020 2020 2020    ]..           
+0002a440: 2070 6f69 6e74 5f73 6861 7065 203d 2077   point_shape = w
+0002a450: 6964 6765 7473 2e44 726f 7064 6f77 6e28  idgets.Dropdown(
+0002a460: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002a470: 2020 6f70 7469 6f6e 733d 706f 696e 745f    options=point_
+0002a480: 7368 6170 655f 6f70 7469 6f6e 732c 0d0a  shape_options,..
+0002a490: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002a4a0: 7661 6c75 653d 2263 6972 636c 6522 2c0d  value="circle",.
+0002a4b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002a4c0: 2064 6573 6372 6970 7469 6f6e 3d22 506f   description="Po
+0002a4d0: 696e 7420 7368 6170 653a 222c 0d0a 2020  int shape:",..  
+0002a4e0: 2020 2020 2020 2020 2020 2020 2020 6c61                la
+0002a4f0: 796f 7574 3d77 6964 6765 7473 2e4c 6179  yout=widgets.Lay
+0002a500: 6f75 7428 7769 6474 683d 2231 3835 7078  out(width="185px
+0002a510: 2229 2c0d 0a20 2020 2020 2020 2020 2020  "),..           
+0002a520: 2020 2020 2073 7479 6c65 3d7b 2264 6573       style={"des
+0002a530: 6372 6970 7469 6f6e 5f77 6964 7468 223a  cription_width":
+0002a540: 2022 696e 6974 6961 6c22 7d2c 0d0a 2020   "initial"},..  
+0002a550: 2020 2020 2020 2020 2020 290d 0a0d 0a20            ).... 
+0002a560: 2020 2020 2020 2020 2020 206c 696e 655f             line_
+0002a570: 7769 6474 6820 3d20 7769 6467 6574 732e  width = widgets.
+0002a580: 496e 7454 6578 7428 0d0a 2020 2020 2020  IntText(..      
+0002a590: 2020 2020 2020 2020 2020 7661 6c75 653d            value=
+0002a5a0: 322c 0d0a 2020 2020 2020 2020 2020 2020  2,..            
+0002a5b0: 2020 2020 6465 7363 7269 7074 696f 6e3d      description=
+0002a5c0: 224c 696e 6520 7769 6474 683a 222c 0d0a  "Line width:",..
+0002a5d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002a5e0: 6c61 796f 7574 3d77 6964 6765 7473 2e4c  layout=widgets.L
+0002a5f0: 6179 6f75 7428 7769 6474 683d 2231 3130  ayout(width="110
+0002a600: 7078 2229 2c0d 0a20 2020 2020 2020 2020  px"),..         
+0002a610: 2020 2020 2020 2073 7479 6c65 3d7b 2264         style={"d
+0002a620: 6573 6372 6970 7469 6f6e 5f77 6964 7468  escription_width
+0002a630: 223a 2022 696e 6974 6961 6c22 7d2c 0d0a  ": "initial"},..
+0002a640: 2020 2020 2020 2020 2020 2020 290d 0a0d              )...
+0002a650: 0a20 2020 2020 2020 2020 2020 206c 696e  .            lin
+0002a660: 655f 7479 7065 203d 2077 6964 6765 7473  e_type = widgets
+0002a670: 2e44 726f 7064 6f77 6e28 0d0a 2020 2020  .Dropdown(..    
+0002a680: 2020 2020 2020 2020 2020 2020 6f70 7469              opti
+0002a690: 6f6e 733d 5b22 736f 6c69 6422 2c20 2264  ons=["solid", "d
+0002a6a0: 6f74 7465 6422 2c20 2264 6173 6865 6422  otted", "dashed"
+0002a6b0: 5d2c 0d0a 2020 2020 2020 2020 2020 2020  ],..            
+0002a6c0: 2020 2020 7661 6c75 653d 2273 6f6c 6964      value="solid
+0002a6d0: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
+0002a6e0: 2020 2020 6465 7363 7269 7074 696f 6e3d      description=
+0002a6f0: 224c 696e 6520 7479 7065 3a22 2c0d 0a20  "Line type:",.. 
+0002a700: 2020 2020 2020 2020 2020 2020 2020 206c                 l
+0002a710: 6179 6f75 743d 7769 6467 6574 732e 4c61  ayout=widgets.La
+0002a720: 796f 7574 2877 6964 7468 3d22 3138 3570  yout(width="185p
+0002a730: 7822 292c 0d0a 2020 2020 2020 2020 2020  x"),..          
+0002a740: 2020 2020 2020 7374 796c 653d 7b22 6465        style={"de
+0002a750: 7363 7269 7074 696f 6e5f 7769 6474 6822  scription_width"
+0002a760: 3a20 2269 6e69 7469 616c 227d 2c0d 0a20  : "initial"},.. 
+0002a770: 2020 2020 2020 2020 2020 2029 0d0a 0d0a             )....
+0002a780: 2020 2020 2020 2020 2020 2020 6669 6c6c              fill
+0002a790: 5f63 6f6c 6f72 203d 2077 6964 6765 7473  _color = widgets
+0002a7a0: 2e43 6f6c 6f72 5069 636b 6572 280d 0a20  .ColorPicker(.. 
+0002a7b0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+0002a7c0: 6f6e 6369 7365 3d46 616c 7365 2c0d 0a20  oncise=False,.. 
+0002a7d0: 2020 2020 2020 2020 2020 2020 2020 2076                 v
+0002a7e0: 616c 7565 3d22 2330 3030 3030 3022 2c0d  alue="#000000",.
+0002a7f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002a800: 2064 6573 6372 6970 7469 6f6e 3d22 4669   description="Fi
+0002a810: 6c6c 2043 6f6c 6f72 3a22 2c0d 0a20 2020  ll Color:",..   
+0002a820: 2020 2020 2020 2020 2020 2020 206c 6179               lay
+0002a830: 6f75 743d 7769 6467 6574 732e 4c61 796f  out=widgets.Layo
+0002a840: 7574 2877 6964 7468 3d22 3136 3070 7822  ut(width="160px"
+0002a850: 292c 0d0a 2020 2020 2020 2020 2020 2020  ),..            
+0002a860: 2020 2020 7374 796c 653d 7b22 6465 7363      style={"desc
+0002a870: 7269 7074 696f 6e5f 7769 6474 6822 3a20  ription_width": 
+0002a880: 2269 6e69 7469 616c 227d 2c0d 0a20 2020  "initial"},..   
+0002a890: 2020 2020 2020 2020 2029 0d0a 0d0a 2020           )....  
+0002a8a0: 2020 2020 2020 2020 2020 6669 6c6c 5f63            fill_c
+0002a8b0: 6f6c 6f72 5f6f 7061 6369 7479 203d 2077  olor_opacity = w
+0002a8c0: 6964 6765 7473 2e46 6c6f 6174 536c 6964  idgets.FloatSlid
+0002a8d0: 6572 280d 0a20 2020 2020 2020 2020 2020  er(..           
+0002a8e0: 2020 2020 2076 616c 7565 3d30 2e36 362c       value=0.66,
+0002a8f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002a900: 2020 6d69 6e3d 302c 0d0a 2020 2020 2020    min=0,..      
+0002a910: 2020 2020 2020 2020 2020 6d61 783d 312c            max=1,
+0002a920: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002a930: 2020 7374 6570 3d30 2e30 312c 0d0a 2020    step=0.01,..  
+0002a940: 2020 2020 2020 2020 2020 2020 2020 6465                de
+0002a950: 7363 7269 7074 696f 6e3d 224f 7061 6369  scription="Opaci
+0002a960: 7479 3a22 2c0d 0a20 2020 2020 2020 2020  ty:",..         
+0002a970: 2020 2020 2020 2063 6f6e 7469 6e75 6f75         continuou
+0002a980: 735f 7570 6461 7465 3d54 7275 652c 0d0a  s_update=True,..
+0002a990: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002a9a0: 7265 6164 6f75 743d 4661 6c73 652c 0d0a  readout=False,..
+0002a9b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002a9c0: 2320 2020 2020 2020 2020 2020 2020 7265  #             re
+0002a9d0: 6164 6f75 745f 666f 726d 6174 3d22 2e32  adout_format=".2
+0002a9e0: 6622 2c0d 0a20 2020 2020 2020 2020 2020  f",..           
+0002a9f0: 2020 2020 206c 6179 6f75 743d 7769 6467       layout=widg
+0002aa00: 6574 732e 4c61 796f 7574 2877 6964 7468  ets.Layout(width
+0002aa10: 3d22 3131 3070 7822 292c 0d0a 2020 2020  ="110px"),..    
+0002aa20: 2020 2020 2020 2020 2020 2020 7374 796c              styl
+0002aa30: 653d 7b22 6465 7363 7269 7074 696f 6e5f  e={"description_
+0002aa40: 7769 6474 6822 3a20 2235 3070 7822 7d2c  width": "50px"},
+0002aa50: 0d0a 2020 2020 2020 2020 2020 2020 290d  ..            ).
+0002aa60: 0a0d 0a20 2020 2020 2020 2020 2020 2066  ...            f
+0002aa70: 696c 6c5f 636f 6c6f 725f 6f70 6163 6974  ill_color_opacit
+0002aa80: 795f 6c61 6265 6c20 3d20 7769 6467 6574  y_label = widget
+0002aa90: 732e 4c61 6265 6c28 0d0a 2020 2020 2020  s.Label(..      
+0002aaa0: 2020 2020 2020 2020 2020 7374 796c 653d            style=
+0002aab0: 7b22 6465 7363 7269 7074 696f 6e5f 7769  {"description_wi
+0002aac0: 6474 6822 3a20 2269 6e69 7469 616c 227d  dth": "initial"}
+0002aad0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+0002aae0: 2020 206c 6179 6f75 743d 7769 6467 6574     layout=widget
+0002aaf0: 732e 4c61 796f 7574 2870 6164 6469 6e67  s.Layout(padding
+0002ab00: 3d22 3070 7822 292c 0d0a 2020 2020 2020  ="0px"),..      
+0002ab10: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
+0002ab20: 2020 2020 2077 6964 6765 7473 2e6a 736c       widgets.jsl
+0002ab30: 696e 6b28 0d0a 2020 2020 2020 2020 2020  ink(..          
+0002ab40: 2020 2020 2020 2866 696c 6c5f 636f 6c6f        (fill_colo
+0002ab50: 725f 6f70 6163 6974 792c 2022 7661 6c75  r_opacity, "valu
+0002ab60: 6522 292c 0d0a 2020 2020 2020 2020 2020  e"),..          
+0002ab70: 2020 2020 2020 2866 696c 6c5f 636f 6c6f        (fill_colo
+0002ab80: 725f 6f70 6163 6974 795f 6c61 6265 6c2c  r_opacity_label,
+0002ab90: 2022 7661 6c75 6522 292c 0d0a 2020 2020   "value"),..    
+0002aba0: 2020 2020 2020 2020 290d 0a0d 0a20 2020          )....   
+0002abb0: 2020 2020 2020 2020 2063 6f6c 6f72 5f70           color_p
+0002abc0: 6963 6b65 7220 3d20 7769 6467 6574 732e  icker = widgets.
+0002abd0: 436f 6c6f 7250 6963 6b65 7228 0d0a 2020  ColorPicker(..  
+0002abe0: 2020 2020 2020 2020 2020 2020 2020 636f                co
+0002abf0: 6e63 6973 653d 4661 6c73 652c 0d0a 2020  ncise=False,..  
+0002ac00: 2020 2020 2020 2020 2020 2020 2020 7661                va
+0002ac10: 6c75 653d 2223 3030 3030 3030 222c 0d0a  lue="#000000",..
+0002ac20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ac30: 6c61 796f 7574 3d77 6964 6765 7473 2e4c  layout=widgets.L
+0002ac40: 6179 6f75 7428 7769 6474 683d 2231 3136  ayout(width="116
+0002ac50: 7078 2229 2c0d 0a20 2020 2020 2020 2020  px"),..         
+0002ac60: 2020 2020 2020 2073 7479 6c65 3d7b 2264         style={"d
+0002ac70: 6573 6372 6970 7469 6f6e 5f77 6964 7468  escription_width
+0002ac80: 223a 2022 696e 6974 6961 6c22 7d2c 0d0a  ": "initial"},..
+0002ac90: 2020 2020 2020 2020 2020 2020 290d 0a20              ).. 
+0002aca0: 2020 2020 2020 2020 2020 2061 6464 5f63             add_c
+0002acb0: 6f6c 6f72 203d 2077 6964 6765 7473 2e42  olor = widgets.B
+0002acc0: 7574 746f 6e28 0d0a 2020 2020 2020 2020  utton(..        
+0002acd0: 2020 2020 2020 2020 6963 6f6e 3d22 706c          icon="pl
+0002ace0: 7573 222c 0d0a 2020 2020 2020 2020 2020  us",..          
+0002acf0: 2020 2020 2020 746f 6f6c 7469 703d 2241        tooltip="A
+0002ad00: 6464 2061 2068 6578 2063 6f6c 6f72 2073  dd a hex color s
+0002ad10: 7472 696e 6720 746f 2074 6865 2070 616c  tring to the pal
+0002ad20: 6574 7465 222c 0d0a 2020 2020 2020 2020  ette",..        
+0002ad30: 2020 2020 2020 2020 6c61 796f 7574 3d77          layout=w
+0002ad40: 6964 6765 7473 2e4c 6179 6f75 7428 7769  idgets.Layout(wi
+0002ad50: 6474 683d 2233 3270 7822 292c 0d0a 2020  dth="32px"),..  
+0002ad60: 2020 2020 2020 2020 2020 290d 0a20 2020            )..   
+0002ad70: 2020 2020 2020 2020 2064 656c 5f63 6f6c           del_col
+0002ad80: 6f72 203d 2077 6964 6765 7473 2e42 7574  or = widgets.But
+0002ad90: 746f 6e28 0d0a 2020 2020 2020 2020 2020  ton(..          
+0002ada0: 2020 2020 2020 6963 6f6e 3d22 6d69 6e75        icon="minu
+0002adb0: 7322 2c0d 0a20 2020 2020 2020 2020 2020  s",..           
+0002adc0: 2020 2020 2074 6f6f 6c74 6970 3d22 5265       tooltip="Re
+0002add0: 6d6f 7665 2061 2068 6578 2063 6f6c 6f72  move a hex color
+0002ade0: 2073 7472 696e 6720 6672 6f6d 2074 6865   string from the
+0002adf0: 2070 616c 6574 7465 222c 0d0a 2020 2020   palette",..    
+0002ae00: 2020 2020 2020 2020 2020 2020 6c61 796f              layo
+0002ae10: 7574 3d77 6964 6765 7473 2e4c 6179 6f75  ut=widgets.Layou
+0002ae20: 7428 7769 6474 683d 2233 3270 7822 292c  t(width="32px"),
+0002ae30: 0d0a 2020 2020 2020 2020 2020 2020 290d  ..            ).
+0002ae40: 0a20 2020 2020 2020 2020 2020 2072 6573  .            res
+0002ae50: 6574 5f63 6f6c 6f72 203d 2077 6964 6765  et_color = widge
+0002ae60: 7473 2e42 7574 746f 6e28 0d0a 2020 2020  ts.Button(..    
+0002ae70: 2020 2020 2020 2020 2020 2020 6963 6f6e              icon
+0002ae80: 3d22 6572 6173 6572 222c 0d0a 2020 2020  ="eraser",..    
+0002ae90: 2020 2020 2020 2020 2020 2020 746f 6f6c              tool
+0002aea0: 7469 703d 2252 656d 6f76 6520 616c 6c20  tip="Remove all 
+0002aeb0: 636f 6c6f 7220 7374 7269 6e67 7320 6672  color strings fr
+0002aec0: 6f6d 2074 6865 2070 616c 6574 7465 222c  om the palette",
+0002aed0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002aee0: 2020 6c61 796f 7574 3d77 6964 6765 7473    layout=widgets
+0002aef0: 2e4c 6179 6f75 7428 7769 6474 683d 2233  .Layout(width="3
+0002af00: 3470 7822 292c 0d0a 2020 2020 2020 2020  4px"),..        
+0002af10: 2020 2020 290d 0a0d 0a20 2020 2020 2020      )....       
+0002af20: 2020 2020 2070 616c 6574 7465 203d 2077       palette = w
+0002af30: 6964 6765 7473 2e54 6578 7428 0d0a 2020  idgets.Text(..  
+0002af40: 2020 2020 2020 2020 2020 2020 2020 7661                va
+0002af50: 6c75 653d 2222 2c0d 0a20 2020 2020 2020  lue="",..       
+0002af60: 2020 2020 2020 2020 2070 6c61 6365 686f           placeho
+0002af70: 6c64 6572 3d22 4c69 7374 206f 6620 6865  lder="List of he
+0002af80: 7820 636f 6465 2028 5252 4747 4242 2920  x code (RRGGBB) 
+0002af90: 7365 7061 7261 7465 6420 6279 2063 6f6d  separated by com
+0002afa0: 6d61 222c 0d0a 2020 2020 2020 2020 2020  ma",..          
+0002afb0: 2020 2020 2020 6465 7363 7269 7074 696f        descriptio
+0002afc0: 6e3d 2250 616c 6574 7465 3a22 2c0d 0a20  n="Palette:",.. 
+0002afd0: 2020 2020 2020 2020 2020 2020 2020 2074                 t
+0002afe0: 6f6f 6c74 6970 3d22 456e 7465 7220 6120  ooltip="Enter a 
+0002aff0: 6c69 7374 206f 6620 6865 7820 636f 6465  list of hex code
+0002b000: 2028 5252 4747 4242 2920 7365 7061 7261   (RRGGBB) separa
+0002b010: 7465 6420 6279 2063 6f6d 6d61 222c 0d0a  ted by comma",..
+0002b020: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b030: 6c61 796f 7574 3d77 6964 6765 7473 2e4c  layout=widgets.L
+0002b040: 6179 6f75 7428 7769 6474 683d 2233 3030  ayout(width="300
+0002b050: 7078 2229 2c0d 0a20 2020 2020 2020 2020  px"),..         
+0002b060: 2020 2020 2020 2073 7479 6c65 3d7b 2264         style={"d
+0002b070: 6573 6372 6970 7469 6f6e 5f77 6964 7468  escription_width
+0002b080: 223a 2022 696e 6974 6961 6c22 7d2c 0d0a  ": "initial"},..
+0002b090: 2020 2020 2020 2020 2020 2020 290d 0a0d              )...
+0002b0a0: 0a20 2020 2020 2020 2020 2020 206c 6567  .            leg
+0002b0b0: 656e 645f 7469 746c 6520 3d20 7769 6467  end_title = widg
+0002b0c0: 6574 732e 5465 7874 280d 0a20 2020 2020  ets.Text(..     
+0002b0d0: 2020 2020 2020 2020 2020 2076 616c 7565             value
+0002b0e0: 3d22 4c65 6765 6e64 222c 0d0a 2020 2020  ="Legend",..    
+0002b0f0: 2020 2020 2020 2020 2020 2020 6465 7363              desc
+0002b100: 7269 7074 696f 6e3d 224c 6567 656e 6420  ription="Legend 
+0002b110: 7469 746c 653a 222c 0d0a 2020 2020 2020  title:",..      
+0002b120: 2020 2020 2020 2020 2020 746f 6f6c 7469            toolti
+0002b130: 703d 2245 6e74 6572 2061 2074 6974 6c65  p="Enter a title
+0002b140: 2066 6f72 2074 6865 206c 6567 656e 6422   for the legend"
+0002b150: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+0002b160: 2020 206c 6179 6f75 743d 7769 6467 6574     layout=widget
+0002b170: 732e 4c61 796f 7574 2877 6964 7468 3d22  s.Layout(width="
+0002b180: 3330 3070 7822 292c 0d0a 2020 2020 2020  300px"),..      
+0002b190: 2020 2020 2020 2020 2020 7374 796c 653d            style=
+0002b1a0: 7b22 6465 7363 7269 7074 696f 6e5f 7769  {"description_wi
+0002b1b0: 6474 6822 3a20 2269 6e69 7469 616c 227d  dth": "initial"}
+0002b1c0: 2c0d 0a20 2020 2020 2020 2020 2020 2029  ,..            )
+0002b1d0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+0002b1e0: 6c65 6765 6e64 5f6c 6162 656c 7320 3d20  legend_labels = 
+0002b1f0: 7769 6467 6574 732e 5465 7874 280d 0a20  widgets.Text(.. 
+0002b200: 2020 2020 2020 2020 2020 2020 2020 2076                 v
+0002b210: 616c 7565 3d22 4c61 6265 6c73 222c 0d0a  alue="Labels",..
+0002b220: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b230: 6465 7363 7269 7074 696f 6e3d 224c 6567  description="Leg
+0002b240: 656e 6420 6c61 6265 6c73 3a22 2c0d 0a20  end labels:",.. 
+0002b250: 2020 2020 2020 2020 2020 2020 2020 2074                 t
+0002b260: 6f6f 6c74 6970 3d22 456e 7465 7220 6120  ooltip="Enter a 
+0002b270: 6120 6c69 7374 206f 6620 6c61 6265 6c73  a list of labels
+0002b280: 2066 6f72 2074 6865 206c 6567 656e 6422   for the legend"
+0002b290: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+0002b2a0: 2020 206c 6179 6f75 743d 7769 6467 6574     layout=widget
+0002b2b0: 732e 4c61 796f 7574 2877 6964 7468 3d22  s.Layout(width="
+0002b2c0: 3330 3070 7822 292c 0d0a 2020 2020 2020  300px"),..      
+0002b2d0: 2020 2020 2020 2020 2020 7374 796c 653d            style=
+0002b2e0: 7b22 6465 7363 7269 7074 696f 6e5f 7769  {"description_wi
+0002b2f0: 6474 6822 3a20 2269 6e69 7469 616c 227d  dth": "initial"}
+0002b300: 2c0d 0a20 2020 2020 2020 2020 2020 2029  ,..            )
+0002b310: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+0002b320: 6465 6620 6164 645f 636f 6c6f 725f 636c  def add_color_cl
+0002b330: 6963 6b65 6428 6229 3a0d 0a20 2020 2020  icked(b):..     
+0002b340: 2020 2020 2020 2020 2020 2069 6620 636f             if co
+0002b350: 6c6f 725f 7069 636b 6572 2e76 616c 7565  lor_picker.value
+0002b360: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
 0002b370: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b380: 2020 2020 7061 6c65 7474 652e 7661 6c75      palette.valu
-0002b390: 6520 2b3d 2022 2c20 2220 2b20 636f 6c6f  e += ", " + colo
-0002b3a0: 725f 7069 636b 6572 2e76 616c 7565 5b31  r_picker.value[1
-0002b3b0: 3a5d 0d0a 0d0a 2020 2020 2020 2020 2020  :]....          
-0002b3c0: 2020 6465 6620 6465 6c5f 636f 6c6f 725f    def del_color_
-0002b3d0: 636c 6963 6b65 6428 6229 3a0d 0a20 2020  clicked(b):..   
-0002b3e0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0002b3f0: 222c 2220 696e 2070 616c 6574 7465 2e76  "," in palette.v
-0002b400: 616c 7565 3a0d 0a20 2020 2020 2020 2020  alue:..         
-0002b410: 2020 2020 2020 2020 2020 2069 7465 6d73             items
-0002b420: 203d 205b 6974 656d 2e73 7472 6970 2829   = [item.strip()
-0002b430: 2066 6f72 2069 7465 6d20 696e 2070 616c   for item in pal
-0002b440: 6574 7465 2e76 616c 7565 2e73 706c 6974  ette.value.split
-0002b450: 2822 2c22 295d 0d0a 2020 2020 2020 2020  (",")]..        
-0002b460: 2020 2020 2020 2020 2020 2020 7061 6c65              pale
-0002b470: 7474 652e 7661 6c75 6520 3d20 222c 2022  tte.value = ", "
-0002b480: 2e6a 6f69 6e28 6974 656d 735b 3a2d 315d  .join(items[:-1]
-0002b490: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-0002b4a0: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
-0002b4b0: 2020 2020 2020 2020 2020 2020 2020 7061                pa
-0002b4c0: 6c65 7474 652e 7661 6c75 6520 3d20 2222  lette.value = ""
-0002b4d0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0002b4e0: 6465 6620 7265 7365 745f 636f 6c6f 725f  def reset_color_
-0002b4f0: 636c 6963 6b65 6428 6229 3a0d 0a20 2020  clicked(b):..   
-0002b500: 2020 2020 2020 2020 2020 2020 2070 616c               pal
-0002b510: 6574 7465 2e76 616c 7565 203d 2022 220d  ette.value = "".
-0002b520: 0a0d 0a20 2020 2020 2020 2020 2020 2061  ...            a
-0002b530: 6464 5f63 6f6c 6f72 2e6f 6e5f 636c 6963  dd_color.on_clic
-0002b540: 6b28 6164 645f 636f 6c6f 725f 636c 6963  k(add_color_clic
-0002b550: 6b65 6429 0d0a 2020 2020 2020 2020 2020  ked)..          
-0002b560: 2020 6465 6c5f 636f 6c6f 722e 6f6e 5f63    del_color.on_c
-0002b570: 6c69 636b 2864 656c 5f63 6f6c 6f72 5f63  lick(del_color_c
-0002b580: 6c69 636b 6564 290d 0a20 2020 2020 2020  licked)..       
-0002b590: 2020 2020 2072 6573 6574 5f63 6f6c 6f72       reset_color
-0002b5a0: 2e6f 6e5f 636c 6963 6b28 7265 7365 745f  .on_click(reset_
-0002b5b0: 636f 6c6f 725f 636c 6963 6b65 6429 0d0a  color_clicked)..
-0002b5c0: 0d0a 2020 2020 2020 2020 2020 2020 6669  ..            fi
-0002b5d0: 656c 6420 3d20 7769 6467 6574 732e 4472  eld = widgets.Dr
-0002b5e0: 6f70 646f 776e 280d 0a20 2020 2020 2020  opdown(..       
-0002b5f0: 2020 2020 2020 2020 206f 7074 696f 6e73           options
-0002b600: 3d5b 5d2c 0d0a 2020 2020 2020 2020 2020  =[],..          
-0002b610: 2020 2020 2020 7661 6c75 653d 4e6f 6e65        value=None
-0002b620: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-0002b630: 2020 2064 6573 6372 6970 7469 6f6e 3d22     description="
-0002b640: 4669 656c 643a 222c 0d0a 2020 2020 2020  Field:",..      
-0002b650: 2020 2020 2020 2020 2020 6c61 796f 7574            layout
-0002b660: 3d77 6964 6765 7473 2e4c 6179 6f75 7428  =widgets.Layout(
-0002b670: 7769 6474 683d 2231 3430 7078 2229 2c0d  width="140px"),.
-0002b680: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002b690: 2073 7479 6c65 3d7b 2264 6573 6372 6970   style={"descrip
-0002b6a0: 7469 6f6e 5f77 6964 7468 223a 2022 696e  tion_width": "in
-0002b6b0: 6974 6961 6c22 7d2c 0d0a 2020 2020 2020  itial"},..      
-0002b6c0: 2020 2020 2020 290d 0a0d 0a20 2020 2020        )....     
-0002b6d0: 2020 2020 2020 2066 6965 6c64 5f76 616c         field_val
-0002b6e0: 7565 7320 3d20 7769 6467 6574 732e 4472  ues = widgets.Dr
-0002b6f0: 6f70 646f 776e 280d 0a20 2020 2020 2020  opdown(..       
-0002b700: 2020 2020 2020 2020 206f 7074 696f 6e73           options
-0002b710: 3d5b 5d2c 0d0a 2020 2020 2020 2020 2020  =[],..          
-0002b720: 2020 2020 2020 7661 6c75 653d 4e6f 6e65        value=None
-0002b730: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-0002b740: 2020 2064 6573 6372 6970 7469 6f6e 3d22     description="
-0002b750: 5661 6c75 6573 3a22 2c0d 0a20 2020 2020  Values:",..     
-0002b760: 2020 2020 2020 2020 2020 206c 6179 6f75             layou
-0002b770: 743d 7769 6467 6574 732e 4c61 796f 7574  t=widgets.Layout
-0002b780: 2877 6964 7468 3d22 3135 3670 7822 292c  (width="156px"),
-0002b790: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002b7a0: 2020 7374 796c 653d 7b22 6465 7363 7269    style={"descri
-0002b7b0: 7074 696f 6e5f 7769 6474 6822 3a20 2269  ption_width": "i
-0002b7c0: 6e69 7469 616c 227d 2c0d 0a20 2020 2020  nitial"},..     
-0002b7d0: 2020 2020 2020 2029 0d0a 0d0a 2020 2020         )....    
-0002b7e0: 2020 2020 2020 2020 636c 6173 7365 7320          classes 
-0002b7f0: 3d20 7769 6467 6574 732e 4472 6f70 646f  = widgets.Dropdo
-0002b800: 776e 280d 0a20 2020 2020 2020 2020 2020  wn(..           
-0002b810: 2020 2020 206f 7074 696f 6e73 3d5b 2241       options=["A
-0002b820: 6e79 225d 202b 205b 7374 7228 6929 2066  ny"] + [str(i) f
-0002b830: 6f72 2069 2069 6e20 7261 6e67 6528 332c  or i in range(3,
-0002b840: 2031 3329 5d2c 0d0a 2020 2020 2020 2020   13)],..        
-0002b850: 2020 2020 2020 2020 6465 7363 7269 7074          descript
-0002b860: 696f 6e3d 2243 6c61 7373 6573 3a22 2c0d  ion="Classes:",.
-0002b870: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002b880: 206c 6179 6f75 743d 7769 6467 6574 732e   layout=widgets.
-0002b890: 4c61 796f 7574 2877 6964 7468 3d22 3131  Layout(width="11
-0002b8a0: 3570 7822 292c 0d0a 2020 2020 2020 2020  5px"),..        
-0002b8b0: 2020 2020 2020 2020 7374 796c 653d 7b22          style={"
-0002b8c0: 6465 7363 7269 7074 696f 6e5f 7769 6474  description_widt
-0002b8d0: 6822 3a20 2269 6e69 7469 616c 227d 2c0d  h": "initial"},.
-0002b8e0: 0a20 2020 2020 2020 2020 2020 2029 0d0a  .            )..
-0002b8f0: 0d0a 2020 2020 2020 2020 2020 2020 636f  ..            co
-0002b900: 6c6f 726d 6170 203d 2077 6964 6765 7473  lormap = widgets
-0002b910: 2e44 726f 7064 6f77 6e28 0d0a 2020 2020  .Dropdown(..    
-0002b920: 2020 2020 2020 2020 2020 2020 6f70 7469              opti
-0002b930: 6f6e 733d 5b22 7669 7269 6469 7322 5d2c  ons=["viridis"],
-0002b940: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002b950: 2020 7661 6c75 653d 2276 6972 6964 6973    value="viridis
-0002b960: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
-0002b970: 2020 2020 6465 7363 7269 7074 696f 6e3d      description=
-0002b980: 2243 6f6c 6f72 6d61 703a 222c 0d0a 2020  "Colormap:",..  
-0002b990: 2020 2020 2020 2020 2020 2020 2020 6c61                la
-0002b9a0: 796f 7574 3d77 6964 6765 7473 2e4c 6179  yout=widgets.Lay
-0002b9b0: 6f75 7428 7769 6474 683d 2231 3831 7078  out(width="181px
-0002b9c0: 2229 2c0d 0a20 2020 2020 2020 2020 2020  "),..           
-0002b9d0: 2020 2020 2073 7479 6c65 3d7b 2264 6573       style={"des
-0002b9e0: 6372 6970 7469 6f6e 5f77 6964 7468 223a  cription_width":
-0002b9f0: 2022 696e 6974 6961 6c22 7d2c 0d0a 2020   "initial"},..  
-0002ba00: 2020 2020 2020 2020 2020 290d 0a0d 0a20            ).... 
-0002ba10: 2020 2020 2020 2020 2020 2064 6566 2063             def c
-0002ba20: 6c61 7373 6573 5f63 6861 6e67 6564 2863  lasses_changed(c
-0002ba30: 6861 6e67 6529 3a0d 0a20 2020 2020 2020  hange):..       
-0002ba40: 2020 2020 2020 2020 2069 6620 6368 616e           if chan
-0002ba50: 6765 5b22 6e65 7722 5d3a 0d0a 2020 2020  ge["new"]:..    
-0002ba60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ba70: 7365 6c65 6374 6564 203d 2063 6861 6e67  selected = chang
-0002ba80: 655b 226f 776e 6572 225d 2e76 616c 7565  e["owner"].value
-0002ba90: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002baa0: 2020 2020 2020 6966 2063 6f6c 6f72 6d61        if colorma
-0002bab0: 702e 7661 6c75 6520 6973 206e 6f74 204e  p.value is not N
-0002bac0: 6f6e 653a 0d0a 0d0a 2020 2020 2020 2020  one:....        
-0002bad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bae0: 6e5f 636c 6173 7320 3d20 4e6f 6e65 0d0a  n_class = None..
-0002baf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bb00: 2020 2020 2020 2020 6966 2073 656c 6563          if selec
-0002bb10: 7465 6420 213d 2022 416e 7922 3a0d 0a20  ted != "Any":.. 
-0002bb20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bb30: 2020 2020 2020 2020 2020 206e 5f63 6c61             n_cla
-0002bb40: 7373 203d 2069 6e74 2863 6c61 7373 6573  ss = int(classes
-0002bb50: 2e76 616c 7565 290d 0a0d 0a20 2020 2020  .value)....     
-0002bb60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bb70: 2020 2063 6f6c 6f72 7320 3d20 706c 742e     colors = plt.
-0002bb80: 636d 2e67 6574 5f63 6d61 7028 636f 6c6f  cm.get_cmap(colo
-0002bb90: 726d 6170 2e76 616c 7565 2c20 6e5f 636c  rmap.value, n_cl
-0002bba0: 6173 7329 0d0a 2020 2020 2020 2020 2020  ass)..          
-0002bbb0: 2020 2020 2020 2020 2020 2020 2020 636d                cm
-0002bbc0: 6170 5f63 6f6c 6f72 7320 3d20 5b0d 0a20  ap_colors = [.. 
-0002bbd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bbe0: 2020 2020 2020 2020 2020 206d 706c 2e63             mpl.c
-0002bbf0: 6f6c 6f72 732e 7267 6232 6865 7828 636f  olors.rgb2hex(co
-0002bc00: 6c6f 7273 2869 2929 5b31 3a5d 2066 6f72  lors(i))[1:] for
-0002bc10: 2069 2069 6e20 7261 6e67 6528 636f 6c6f   i in range(colo
-0002bc20: 7273 2e4e 290d 0a20 2020 2020 2020 2020  rs.N)..         
-0002bc30: 2020 2020 2020 2020 2020 2020 2020 205d                 ]
-0002bc40: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0002bc50: 2020 2020 2020 2020 2020 2020 5f2c 2061              _, a
-0002bc60: 7820 3d20 706c 742e 7375 6270 6c6f 7473  x = plt.subplots
-0002bc70: 2866 6967 7369 7a65 3d28 362c 2030 2e34  (figsize=(6, 0.4
-0002bc80: 2929 0d0a 2020 2020 2020 2020 2020 2020  ))..            
-0002bc90: 2020 2020 2020 2020 2020 2020 636d 6170              cmap
-0002bca0: 203d 206d 706c 2e63 6f6c 6f72 732e 4c69   = mpl.colors.Li
-0002bcb0: 6e65 6172 5365 676d 656e 7465 6443 6f6c  nearSegmentedCol
-0002bcc0: 6f72 6d61 702e 6672 6f6d 5f6c 6973 7428  ormap.from_list(
-0002bcd0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002bce0: 2020 2020 2020 2020 2020 2020 2020 2263                "c
-0002bcf0: 7573 746f 6d22 2c20 746f 5f68 6578 5f63  ustom", to_hex_c
-0002bd00: 6f6c 6f72 7328 636d 6170 5f63 6f6c 6f72  olors(cmap_color
-0002bd10: 7329 2c20 4e3d 3235 360d 0a20 2020 2020  s), N=256..     
-0002bd20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bd30: 2020 2029 0d0a 2020 2020 2020 2020 2020     )..          
-0002bd40: 2020 2020 2020 2020 2020 2020 2020 6e6f                no
-0002bd50: 726d 203d 206d 706c 2e63 6f6c 6f72 732e  rm = mpl.colors.
-0002bd60: 4e6f 726d 616c 697a 6528 766d 696e 3d30  Normalize(vmin=0
-0002bd70: 2c20 766d 6178 3d31 290d 0a20 2020 2020  , vmax=1)..     
-0002bd80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bd90: 2020 206d 706c 2e63 6f6c 6f72 6261 722e     mpl.colorbar.
-0002bda0: 436f 6c6f 7262 6172 4261 7365 280d 0a20  ColorbarBase(.. 
+0002b380: 2020 2069 6620 6c65 6e28 7061 6c65 7474     if len(palett
+0002b390: 652e 7661 6c75 6529 203d 3d20 303a 0d0a  e.value) == 0:..
+0002b3a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b3b0: 2020 2020 2020 2020 7061 6c65 7474 652e          palette.
+0002b3c0: 7661 6c75 6520 3d20 636f 6c6f 725f 7069  value = color_pi
+0002b3d0: 636b 6572 2e76 616c 7565 5b31 3a5d 0d0a  cker.value[1:]..
+0002b3e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b3f0: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
+0002b400: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b410: 2020 2070 616c 6574 7465 2e76 616c 7565     palette.value
+0002b420: 202b 3d20 222c 2022 202b 2063 6f6c 6f72   += ", " + color
+0002b430: 5f70 6963 6b65 722e 7661 6c75 655b 313a  _picker.value[1:
+0002b440: 5d0d 0a0d 0a20 2020 2020 2020 2020 2020  ]....           
+0002b450: 2064 6566 2064 656c 5f63 6f6c 6f72 5f63   def del_color_c
+0002b460: 6c69 636b 6564 2862 293a 0d0a 2020 2020  licked(b):..    
+0002b470: 2020 2020 2020 2020 2020 2020 6966 2022              if "
+0002b480: 2c22 2069 6e20 7061 6c65 7474 652e 7661  ," in palette.va
+0002b490: 6c75 653a 0d0a 2020 2020 2020 2020 2020  lue:..          
+0002b4a0: 2020 2020 2020 2020 2020 6974 656d 7320            items 
+0002b4b0: 3d20 5b69 7465 6d2e 7374 7269 7028 2920  = [item.strip() 
+0002b4c0: 666f 7220 6974 656d 2069 6e20 7061 6c65  for item in pale
+0002b4d0: 7474 652e 7661 6c75 652e 7370 6c69 7428  tte.value.split(
+0002b4e0: 222c 2229 5d0d 0a20 2020 2020 2020 2020  ",")]..         
+0002b4f0: 2020 2020 2020 2020 2020 2070 616c 6574             palet
+0002b500: 7465 2e76 616c 7565 203d 2022 2c20 222e  te.value = ", ".
+0002b510: 6a6f 696e 2869 7465 6d73 5b3a 2d31 5d29  join(items[:-1])
+0002b520: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002b530: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
+0002b540: 2020 2020 2020 2020 2020 2020 2070 616c               pal
+0002b550: 6574 7465 2e76 616c 7565 203d 2022 220d  ette.value = "".
+0002b560: 0a0d 0a20 2020 2020 2020 2020 2020 2064  ...            d
+0002b570: 6566 2072 6573 6574 5f63 6f6c 6f72 5f63  ef reset_color_c
+0002b580: 6c69 636b 6564 2862 293a 0d0a 2020 2020  licked(b):..    
+0002b590: 2020 2020 2020 2020 2020 2020 7061 6c65              pale
+0002b5a0: 7474 652e 7661 6c75 6520 3d20 2222 0d0a  tte.value = ""..
+0002b5b0: 0d0a 2020 2020 2020 2020 2020 2020 6164  ..            ad
+0002b5c0: 645f 636f 6c6f 722e 6f6e 5f63 6c69 636b  d_color.on_click
+0002b5d0: 2861 6464 5f63 6f6c 6f72 5f63 6c69 636b  (add_color_click
+0002b5e0: 6564 290d 0a20 2020 2020 2020 2020 2020  ed)..           
+0002b5f0: 2064 656c 5f63 6f6c 6f72 2e6f 6e5f 636c   del_color.on_cl
+0002b600: 6963 6b28 6465 6c5f 636f 6c6f 725f 636c  ick(del_color_cl
+0002b610: 6963 6b65 6429 0d0a 2020 2020 2020 2020  icked)..        
+0002b620: 2020 2020 7265 7365 745f 636f 6c6f 722e      reset_color.
+0002b630: 6f6e 5f63 6c69 636b 2872 6573 6574 5f63  on_click(reset_c
+0002b640: 6f6c 6f72 5f63 6c69 636b 6564 290d 0a0d  olor_clicked)...
+0002b650: 0a20 2020 2020 2020 2020 2020 2066 6965  .            fie
+0002b660: 6c64 203d 2077 6964 6765 7473 2e44 726f  ld = widgets.Dro
+0002b670: 7064 6f77 6e28 0d0a 2020 2020 2020 2020  pdown(..        
+0002b680: 2020 2020 2020 2020 6f70 7469 6f6e 733d          options=
+0002b690: 5b5d 2c0d 0a20 2020 2020 2020 2020 2020  [],..           
+0002b6a0: 2020 2020 2076 616c 7565 3d4e 6f6e 652c       value=None,
+0002b6b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002b6c0: 2020 6465 7363 7269 7074 696f 6e3d 2246    description="F
+0002b6d0: 6965 6c64 3a22 2c0d 0a20 2020 2020 2020  ield:",..       
+0002b6e0: 2020 2020 2020 2020 206c 6179 6f75 743d           layout=
+0002b6f0: 7769 6467 6574 732e 4c61 796f 7574 2877  widgets.Layout(w
+0002b700: 6964 7468 3d22 3134 3070 7822 292c 0d0a  idth="140px"),..
+0002b710: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b720: 7374 796c 653d 7b22 6465 7363 7269 7074  style={"descript
+0002b730: 696f 6e5f 7769 6474 6822 3a20 2269 6e69  ion_width": "ini
+0002b740: 7469 616c 227d 2c0d 0a20 2020 2020 2020  tial"},..       
+0002b750: 2020 2020 2029 0d0a 0d0a 2020 2020 2020       )....      
+0002b760: 2020 2020 2020 6669 656c 645f 7661 6c75        field_valu
+0002b770: 6573 203d 2077 6964 6765 7473 2e44 726f  es = widgets.Dro
+0002b780: 7064 6f77 6e28 0d0a 2020 2020 2020 2020  pdown(..        
+0002b790: 2020 2020 2020 2020 6f70 7469 6f6e 733d          options=
+0002b7a0: 5b5d 2c0d 0a20 2020 2020 2020 2020 2020  [],..           
+0002b7b0: 2020 2020 2076 616c 7565 3d4e 6f6e 652c       value=None,
+0002b7c0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002b7d0: 2020 6465 7363 7269 7074 696f 6e3d 2256    description="V
+0002b7e0: 616c 7565 733a 222c 0d0a 2020 2020 2020  alues:",..      
+0002b7f0: 2020 2020 2020 2020 2020 6c61 796f 7574            layout
+0002b800: 3d77 6964 6765 7473 2e4c 6179 6f75 7428  =widgets.Layout(
+0002b810: 7769 6474 683d 2231 3536 7078 2229 2c0d  width="156px"),.
+0002b820: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002b830: 2073 7479 6c65 3d7b 2264 6573 6372 6970   style={"descrip
+0002b840: 7469 6f6e 5f77 6964 7468 223a 2022 696e  tion_width": "in
+0002b850: 6974 6961 6c22 7d2c 0d0a 2020 2020 2020  itial"},..      
+0002b860: 2020 2020 2020 290d 0a0d 0a20 2020 2020        )....     
+0002b870: 2020 2020 2020 2063 6c61 7373 6573 203d         classes =
+0002b880: 2077 6964 6765 7473 2e44 726f 7064 6f77   widgets.Dropdow
+0002b890: 6e28 0d0a 2020 2020 2020 2020 2020 2020  n(..            
+0002b8a0: 2020 2020 6f70 7469 6f6e 733d 5b22 416e      options=["An
+0002b8b0: 7922 5d20 2b20 5b73 7472 2869 2920 666f  y"] + [str(i) fo
+0002b8c0: 7220 6920 696e 2072 616e 6765 2833 2c20  r i in range(3, 
+0002b8d0: 3133 295d 2c0d 0a20 2020 2020 2020 2020  13)],..         
+0002b8e0: 2020 2020 2020 2064 6573 6372 6970 7469         descripti
+0002b8f0: 6f6e 3d22 436c 6173 7365 733a 222c 0d0a  on="Classes:",..
+0002b900: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b910: 6c61 796f 7574 3d77 6964 6765 7473 2e4c  layout=widgets.L
+0002b920: 6179 6f75 7428 7769 6474 683d 2231 3135  ayout(width="115
+0002b930: 7078 2229 2c0d 0a20 2020 2020 2020 2020  px"),..         
+0002b940: 2020 2020 2020 2073 7479 6c65 3d7b 2264         style={"d
+0002b950: 6573 6372 6970 7469 6f6e 5f77 6964 7468  escription_width
+0002b960: 223a 2022 696e 6974 6961 6c22 7d2c 0d0a  ": "initial"},..
+0002b970: 2020 2020 2020 2020 2020 2020 290d 0a0d              )...
+0002b980: 0a20 2020 2020 2020 2020 2020 2063 6f6c  .            col
+0002b990: 6f72 6d61 7020 3d20 7769 6467 6574 732e  ormap = widgets.
+0002b9a0: 4472 6f70 646f 776e 280d 0a20 2020 2020  Dropdown(..     
+0002b9b0: 2020 2020 2020 2020 2020 206f 7074 696f             optio
+0002b9c0: 6e73 3d5b 2276 6972 6964 6973 225d 2c0d  ns=["viridis"],.
+0002b9d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002b9e0: 2076 616c 7565 3d22 7669 7269 6469 7322   value="viridis"
+0002b9f0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+0002ba00: 2020 2064 6573 6372 6970 7469 6f6e 3d22     description="
+0002ba10: 436f 6c6f 726d 6170 3a22 2c0d 0a20 2020  Colormap:",..   
+0002ba20: 2020 2020 2020 2020 2020 2020 206c 6179               lay
+0002ba30: 6f75 743d 7769 6467 6574 732e 4c61 796f  out=widgets.Layo
+0002ba40: 7574 2877 6964 7468 3d22 3138 3170 7822  ut(width="181px"
+0002ba50: 292c 0d0a 2020 2020 2020 2020 2020 2020  ),..            
+0002ba60: 2020 2020 7374 796c 653d 7b22 6465 7363      style={"desc
+0002ba70: 7269 7074 696f 6e5f 7769 6474 6822 3a20  ription_width": 
+0002ba80: 2269 6e69 7469 616c 227d 2c0d 0a20 2020  "initial"},..   
+0002ba90: 2020 2020 2020 2020 2029 0d0a 0d0a 2020           )....  
+0002baa0: 2020 2020 2020 2020 2020 6465 6620 636c            def cl
+0002bab0: 6173 7365 735f 6368 616e 6765 6428 6368  asses_changed(ch
+0002bac0: 616e 6765 293a 0d0a 2020 2020 2020 2020  ange):..        
+0002bad0: 2020 2020 2020 2020 6966 2063 6861 6e67          if chang
+0002bae0: 655b 226e 6577 225d 3a0d 0a20 2020 2020  e["new"]:..     
+0002baf0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0002bb00: 656c 6563 7465 6420 3d20 6368 616e 6765  elected = change
+0002bb10: 5b22 6f77 6e65 7222 5d2e 7661 6c75 650d  ["owner"].value.
+0002bb20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002bb30: 2020 2020 2069 6620 636f 6c6f 726d 6170       if colormap
+0002bb40: 2e76 616c 7565 2069 7320 6e6f 7420 4e6f  .value is not No
+0002bb50: 6e65 3a0d 0a0d 0a20 2020 2020 2020 2020  ne:....         
+0002bb60: 2020 2020 2020 2020 2020 2020 2020 206e                 n
+0002bb70: 5f63 6c61 7373 203d 204e 6f6e 650d 0a20  _class = None.. 
+0002bb80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002bb90: 2020 2020 2020 2069 6620 7365 6c65 6374         if select
+0002bba0: 6564 2021 3d20 2241 6e79 223a 0d0a 2020  ed != "Any":..  
+0002bbb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002bbc0: 2020 2020 2020 2020 2020 6e5f 636c 6173            n_clas
+0002bbd0: 7320 3d20 696e 7428 636c 6173 7365 732e  s = int(classes.
+0002bbe0: 7661 6c75 6529 0d0a 0d0a 2020 2020 2020  value)....      
+0002bbf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002bc00: 2020 636f 6c6f 7273 203d 2070 6c74 2e63    colors = plt.c
+0002bc10: 6d2e 6765 745f 636d 6170 2863 6f6c 6f72  m.get_cmap(color
+0002bc20: 6d61 702e 7661 6c75 652c 206e 5f63 6c61  map.value, n_cla
+0002bc30: 7373 290d 0a20 2020 2020 2020 2020 2020  ss)..           
+0002bc40: 2020 2020 2020 2020 2020 2020 2063 6d61               cma
+0002bc50: 705f 636f 6c6f 7273 203d 205b 0d0a 2020  p_colors = [..  
+0002bc60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002bc70: 2020 2020 2020 2020 2020 6d70 6c2e 636f            mpl.co
+0002bc80: 6c6f 7273 2e72 6762 3268 6578 2863 6f6c  lors.rgb2hex(col
+0002bc90: 6f72 7328 6929 295b 313a 5d20 666f 7220  ors(i))[1:] for 
+0002bca0: 6920 696e 2072 616e 6765 2863 6f6c 6f72  i in range(color
+0002bcb0: 732e 4e29 0d0a 2020 2020 2020 2020 2020  s.N)..          
+0002bcc0: 2020 2020 2020 2020 2020 2020 2020 5d0d                ].
+0002bcd0: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0002bce0: 2020 2020 2020 2020 2020 205f 2c20 6178             _, ax
+0002bcf0: 203d 2070 6c74 2e73 7562 706c 6f74 7328   = plt.subplots(
+0002bd00: 6669 6773 697a 653d 2836 2c20 302e 3429  figsize=(6, 0.4)
+0002bd10: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+0002bd20: 2020 2020 2020 2020 2020 2063 6d61 7020             cmap 
+0002bd30: 3d20 6d70 6c2e 636f 6c6f 7273 2e4c 696e  = mpl.colors.Lin
+0002bd40: 6561 7253 6567 6d65 6e74 6564 436f 6c6f  earSegmentedColo
+0002bd50: 726d 6170 2e66 726f 6d5f 6c69 7374 280d  rmap.from_list(.
+0002bd60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002bd70: 2020 2020 2020 2020 2020 2020 2022 6375               "cu
+0002bd80: 7374 6f6d 222c 2074 6f5f 6865 785f 636f  stom", to_hex_co
+0002bd90: 6c6f 7273 2863 6d61 705f 636f 6c6f 7273  lors(cmap_colors
+0002bda0: 292c 204e 3d32 3536 0d0a 2020 2020 2020  ), N=256..      
 0002bdb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bdc0: 2020 2020 2020 2020 2020 2061 782c 206e             ax, n
-0002bdd0: 6f72 6d3d 6e6f 726d 2c20 636d 6170 3d63  orm=norm, cmap=c
-0002bde0: 6d61 702c 206f 7269 656e 7461 7469 6f6e  map, orientation
-0002bdf0: 3d22 686f 7269 7a6f 6e74 616c 220d 0a20  ="horizontal".. 
-0002be00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002be10: 2020 2020 2020 2029 0d0a 0d0a 2020 2020         )....    
-0002be20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002be30: 2020 2020 7061 6c65 7474 652e 7661 6c75      palette.valu
-0002be40: 6520 3d20 222c 2022 2e6a 6f69 6e28 5b63  e = ", ".join([c
-0002be50: 6f6c 6f72 2066 6f72 2063 6f6c 6f72 2069  olor for color i
-0002be60: 6e20 636d 6170 5f63 6f6c 6f72 735d 290d  n cmap_colors]).
-0002be70: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0002be80: 2020 2020 2020 2020 2020 2069 6620 7365             if se
-0002be90: 6c66 2e63 6f6c 6f72 6261 725f 7769 6467  lf.colorbar_widg
-0002bea0: 6574 2069 7320 4e6f 6e65 3a0d 0a20 2020  et is None:..   
+0002bdc0: 2020 290d 0a20 2020 2020 2020 2020 2020    )..           
+0002bdd0: 2020 2020 2020 2020 2020 2020 206e 6f72               nor
+0002bde0: 6d20 3d20 6d70 6c2e 636f 6c6f 7273 2e4e  m = mpl.colors.N
+0002bdf0: 6f72 6d61 6c69 7a65 2876 6d69 6e3d 302c  ormalize(vmin=0,
+0002be00: 2076 6d61 783d 3129 0d0a 2020 2020 2020   vmax=1)..      
+0002be10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002be20: 2020 6d70 6c2e 636f 6c6f 7262 6172 2e43    mpl.colorbar.C
+0002be30: 6f6c 6f72 6261 7242 6173 6528 0d0a 2020  olorbarBase(..  
+0002be40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002be50: 2020 2020 2020 2020 2020 6178 2c20 6e6f            ax, no
+0002be60: 726d 3d6e 6f72 6d2c 2063 6d61 703d 636d  rm=norm, cmap=cm
+0002be70: 6170 2c20 6f72 6965 6e74 6174 696f 6e3d  ap, orientation=
+0002be80: 2268 6f72 697a 6f6e 7461 6c22 0d0a 2020  "horizontal"..  
+0002be90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002bea0: 2020 2020 2020 290d 0a0d 0a20 2020 2020        )....     
 0002beb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bec0: 2020 2020 2020 2020 2073 656c 662e 636f           self.co
-0002bed0: 6c6f 7262 6172 5f77 6964 6765 7420 3d20  lorbar_widget = 
-0002bee0: 7769 6467 6574 732e 4f75 7470 7574 280d  widgets.Output(.
-0002bef0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002bf00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bf10: 206c 6179 6f75 743d 7769 6467 6574 732e   layout=widgets.
-0002bf20: 4c61 796f 7574 2868 6569 6768 743d 2236  Layout(height="6
-0002bf30: 3070 7822 290d 0a20 2020 2020 2020 2020  0px")..         
+0002bec0: 2020 2070 616c 6574 7465 2e76 616c 7565     palette.value
+0002bed0: 203d 2022 2c20 222e 6a6f 696e 285b 636f   = ", ".join([co
+0002bee0: 6c6f 7220 666f 7220 636f 6c6f 7220 696e  lor for color in
+0002bef0: 2063 6d61 705f 636f 6c6f 7273 5d29 0d0a   cmap_colors])..
+0002bf00: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002bf10: 2020 2020 2020 2020 2020 6966 2073 656c            if sel
+0002bf20: 662e 636f 6c6f 7262 6172 5f77 6964 6765  f.colorbar_widge
+0002bf30: 7420 6973 204e 6f6e 653a 0d0a 2020 2020  t is None:..    
 0002bf40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bf50: 2020 2029 0d0a 0d0a 2020 2020 2020 2020     )....        
-0002bf60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bf70: 6966 2073 656c 662e 636f 6c6f 7262 6172  if self.colorbar
-0002bf80: 5f63 7472 6c20 6973 204e 6f6e 653a 0d0a  _ctrl is None:..
+0002bf50: 2020 2020 2020 2020 7365 6c66 2e63 6f6c          self.col
+0002bf60: 6f72 6261 725f 7769 6467 6574 203d 2077  orbar_widget = w
+0002bf70: 6964 6765 7473 2e4f 7574 7075 7428 0d0a  idgets.Output(..
+0002bf80: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0002bf90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bfa0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0002bfb0: 2e63 6f6c 6f72 6261 725f 6374 726c 203d  .colorbar_ctrl =
-0002bfc0: 2069 7079 6c65 6166 6c65 742e 5769 6467   ipyleaflet.Widg
-0002bfd0: 6574 436f 6e74 726f 6c28 0d0a 2020 2020  etControl(..    
-0002bfe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bff0: 2020 2020 2020 2020 2020 2020 7769 6467              widg
-0002c000: 6574 3d73 656c 662e 636f 6c6f 7262 6172  et=self.colorbar
-0002c010: 5f77 6964 6765 742c 2070 6f73 6974 696f  _widget, positio
-0002c020: 6e3d 2262 6f74 746f 6d72 6967 6874 220d  n="bottomright".
-0002c030: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002c040: 2020 2020 2020 2020 2020 2020 2029 0d0a               )..
-0002c050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c060: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0002c070: 2e61 6464 5f63 6f6e 7472 6f6c 2873 656c  .add_control(sel
-0002c080: 662e 636f 6c6f 7262 6172 5f63 7472 6c29  f.colorbar_ctrl)
-0002c090: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0002c0a0: 2020 2020 2020 2020 2020 2020 636f 6c6f              colo
-0002c0b0: 7262 6172 5f6f 7574 7075 7420 3d20 7365  rbar_output = se
-0002c0c0: 6c66 2e63 6f6c 6f72 6261 725f 7769 6467  lf.colorbar_widg
-0002c0d0: 6574 0d0a 2020 2020 2020 2020 2020 2020  et..            
-0002c0e0: 2020 2020 2020 2020 2020 2020 7769 7468              with
-0002c0f0: 2063 6f6c 6f72 6261 725f 6f75 7470 7574   colorbar_output
-0002c100: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-0002c110: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-0002c120: 6f6c 6f72 6261 725f 6f75 7470 7574 2e63  olorbar_output.c
-0002c130: 6c65 6172 5f6f 7574 7075 7428 290d 0a20  lear_output().. 
-0002c140: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c150: 2020 2020 2020 2020 2020 2070 6c74 2e73             plt.s
-0002c160: 686f 7728 290d 0a0d 0a20 2020 2020 2020  how()....       
-0002c170: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c180: 2069 6620 6c65 6e28 7061 6c65 7474 652e   if len(palette.
-0002c190: 7661 6c75 6529 203e 2030 2061 6e64 2022  value) > 0 and "
-0002c1a0: 2c22 2069 6e20 7061 6c65 7474 652e 7661  ," in palette.va
-0002c1b0: 6c75 653a 0d0a 2020 2020 2020 2020 2020  lue:..          
-0002c1c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c1d0: 2020 6c61 6265 6c73 203d 205b 0d0a 2020    labels = [..  
-0002c1e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c1f0: 2020 2020 2020 2020 2020 2020 2020 6622                f"
-0002c200: 436c 6173 7320 7b69 2b31 7d22 0d0a 2020  Class {i+1}"..  
-0002c210: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c220: 2020 2020 2020 2020 2020 2020 2020 666f                fo
-0002c230: 7220 6920 696e 2072 616e 6765 286c 656e  r i in range(len
-0002c240: 2870 616c 6574 7465 2e76 616c 7565 2e73  (palette.value.s
-0002c250: 706c 6974 2822 2c22 2929 290d 0a20 2020  plit(",")))..   
-0002c260: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c270: 2020 2020 2020 2020 205d 0d0a 2020 2020           ]..    
-0002c280: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c290: 2020 2020 2020 2020 6c65 6765 6e64 5f6c          legend_l
-0002c2a0: 6162 656c 732e 7661 6c75 6520 3d20 222c  abels.value = ",
-0002c2b0: 2022 2e6a 6f69 6e28 6c61 6265 6c73 290d   ".join(labels).
-0002c2c0: 0a0d 0a20 2020 2020 2020 2020 2020 2063  ...            c
-0002c2d0: 6c61 7373 6573 2e6f 6273 6572 7665 2863  lasses.observe(c
-0002c2e0: 6c61 7373 6573 5f63 6861 6e67 6564 2c20  lasses_changed, 
-0002c2f0: 2276 616c 7565 2229 0d0a 0d0a 2020 2020  "value")....    
-0002c300: 2020 2020 2020 2020 6465 6620 636f 6c6f          def colo
-0002c310: 726d 6170 5f63 6861 6e67 6564 2863 6861  rmap_changed(cha
-0002c320: 6e67 6529 3a0d 0a20 2020 2020 2020 2020  nge):..         
-0002c330: 2020 2020 2020 2069 6620 6368 616e 6765         if change
-0002c340: 5b22 6e65 7722 5d3a 0d0a 0d0a 2020 2020  ["new"]:....    
-0002c350: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c360: 6e5f 636c 6173 7320 3d20 4e6f 6e65 0d0a  n_class = None..
-0002c370: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c380: 2020 2020 6966 2063 6c61 7373 6573 2e76      if classes.v
-0002c390: 616c 7565 2021 3d20 2241 6e79 223a 0d0a  alue != "Any":..
-0002c3a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c3b0: 2020 2020 2020 2020 6e5f 636c 6173 7320          n_class 
-0002c3c0: 3d20 696e 7428 636c 6173 7365 732e 7661  = int(classes.va
-0002c3d0: 6c75 6529 0d0a 0d0a 2020 2020 2020 2020  lue)....        
-0002c3e0: 2020 2020 2020 2020 2020 2020 636f 6c6f              colo
-0002c3f0: 7273 203d 2070 6c74 2e63 6d2e 6765 745f  rs = plt.cm.get_
-0002c400: 636d 6170 2863 6f6c 6f72 6d61 702e 7661  cmap(colormap.va
-0002c410: 6c75 652c 206e 5f63 6c61 7373 290d 0a20  lue, n_class).. 
-0002c420: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c430: 2020 2063 6d61 705f 636f 6c6f 7273 203d     cmap_colors =
-0002c440: 205b 0d0a 2020 2020 2020 2020 2020 2020   [..            
-0002c450: 2020 2020 2020 2020 2020 2020 6d70 6c2e              mpl.
-0002c460: 636f 6c6f 7273 2e72 6762 3268 6578 2863  colors.rgb2hex(c
-0002c470: 6f6c 6f72 7328 6929 295b 313a 5d20 666f  olors(i))[1:] fo
-0002c480: 7220 6920 696e 2072 616e 6765 2863 6f6c  r i in range(col
-0002c490: 6f72 732e 4e29 0d0a 2020 2020 2020 2020  ors.N)..        
-0002c4a0: 2020 2020 2020 2020 2020 2020 5d0d 0a0d              ]...
-0002c4b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002c4c0: 2020 2020 205f 2c20 6178 203d 2070 6c74       _, ax = plt
-0002c4d0: 2e73 7562 706c 6f74 7328 6669 6773 697a  .subplots(figsiz
-0002c4e0: 653d 2836 2c20 302e 3429 290d 0a20 2020  e=(6, 0.4))..   
-0002c4f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c500: 2063 6d61 7020 3d20 6d70 6c2e 636f 6c6f   cmap = mpl.colo
-0002c510: 7273 2e4c 696e 6561 7253 6567 6d65 6e74  rs.LinearSegment
-0002c520: 6564 436f 6c6f 726d 6170 2e66 726f 6d5f  edColormap.from_
-0002c530: 6c69 7374 280d 0a20 2020 2020 2020 2020  list(..         
-0002c540: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0002c550: 6375 7374 6f6d 222c 2074 6f5f 6865 785f  custom", to_hex_
-0002c560: 636f 6c6f 7273 2863 6d61 705f 636f 6c6f  colors(cmap_colo
-0002c570: 7273 292c 204e 3d32 3536 0d0a 2020 2020  rs), N=256..    
+0002bfa0: 6c61 796f 7574 3d77 6964 6765 7473 2e4c  layout=widgets.L
+0002bfb0: 6179 6f75 7428 6865 6967 6874 3d22 3630  ayout(height="60
+0002bfc0: 7078 2229 0d0a 2020 2020 2020 2020 2020  px")..          
+0002bfd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002bfe0: 2020 290d 0a0d 0a20 2020 2020 2020 2020    )....         
+0002bff0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0002c000: 6620 7365 6c66 2e63 6f6c 6f72 6261 725f  f self.colorbar_
+0002c010: 6374 726c 2069 7320 4e6f 6e65 3a0d 0a20  ctrl is None:.. 
+0002c020: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c030: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0002c040: 636f 6c6f 7262 6172 5f63 7472 6c20 3d20  colorbar_ctrl = 
+0002c050: 6970 796c 6561 666c 6574 2e57 6964 6765  ipyleaflet.Widge
+0002c060: 7443 6f6e 7472 6f6c 280d 0a20 2020 2020  tControl(..     
+0002c070: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c080: 2020 2020 2020 2020 2020 2077 6964 6765             widge
+0002c090: 743d 7365 6c66 2e63 6f6c 6f72 6261 725f  t=self.colorbar_
+0002c0a0: 7769 6467 6574 2c20 706f 7369 7469 6f6e  widget, position
+0002c0b0: 3d22 626f 7474 6f6d 7269 6768 7422 0d0a  ="bottomright"..
+0002c0c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c0d0: 2020 2020 2020 2020 2020 2020 290d 0a20              ).. 
+0002c0e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c0f0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0002c100: 6164 645f 636f 6e74 726f 6c28 7365 6c66  add_control(self
+0002c110: 2e63 6f6c 6f72 6261 725f 6374 726c 290d  .colorbar_ctrl).
+0002c120: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0002c130: 2020 2020 2020 2020 2020 2063 6f6c 6f72             color
+0002c140: 6261 725f 6f75 7470 7574 203d 2073 656c  bar_output = sel
+0002c150: 662e 636f 6c6f 7262 6172 5f77 6964 6765  f.colorbar_widge
+0002c160: 740d 0a20 2020 2020 2020 2020 2020 2020  t..             
+0002c170: 2020 2020 2020 2020 2020 2077 6974 6820             with 
+0002c180: 636f 6c6f 7262 6172 5f6f 7574 7075 743a  colorbar_output:
+0002c190: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002c1a0: 2020 2020 2020 2020 2020 2020 2020 636f                co
+0002c1b0: 6c6f 7262 6172 5f6f 7574 7075 742e 636c  lorbar_output.cl
+0002c1c0: 6561 725f 6f75 7470 7574 2829 0d0a 2020  ear_output()..  
+0002c1d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c1e0: 2020 2020 2020 2020 2020 706c 742e 7368            plt.sh
+0002c1f0: 6f77 2829 0d0a 0d0a 2020 2020 2020 2020  ow()....        
+0002c200: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c210: 6966 206c 656e 2870 616c 6574 7465 2e76  if len(palette.v
+0002c220: 616c 7565 2920 3e20 3020 616e 6420 222c  alue) > 0 and ",
+0002c230: 2220 696e 2070 616c 6574 7465 2e76 616c  " in palette.val
+0002c240: 7565 3a0d 0a20 2020 2020 2020 2020 2020  ue:..           
+0002c250: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c260: 206c 6162 656c 7320 3d20 5b0d 0a20 2020   labels = [..   
+0002c270: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c280: 2020 2020 2020 2020 2020 2020 2066 2243               f"C
+0002c290: 6c61 7373 207b 692b 317d 220d 0a20 2020  lass {i+1}"..   
+0002c2a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c2b0: 2020 2020 2020 2020 2020 2020 2066 6f72               for
+0002c2c0: 2069 2069 6e20 7261 6e67 6528 6c65 6e28   i in range(len(
+0002c2d0: 7061 6c65 7474 652e 7661 6c75 652e 7370  palette.value.sp
+0002c2e0: 6c69 7428 222c 2229 2929 0d0a 2020 2020  lit(",")))..    
+0002c2f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c300: 2020 2020 2020 2020 5d0d 0a20 2020 2020          ]..     
+0002c310: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c320: 2020 2020 2020 206c 6567 656e 645f 6c61         legend_la
+0002c330: 6265 6c73 2e76 616c 7565 203d 2022 2c20  bels.value = ", 
+0002c340: 222e 6a6f 696e 286c 6162 656c 7329 0d0a  ".join(labels)..
+0002c350: 0d0a 2020 2020 2020 2020 2020 2020 636c  ..            cl
+0002c360: 6173 7365 732e 6f62 7365 7276 6528 636c  asses.observe(cl
+0002c370: 6173 7365 735f 6368 616e 6765 642c 2022  asses_changed, "
+0002c380: 7661 6c75 6522 290d 0a0d 0a20 2020 2020  value")....     
+0002c390: 2020 2020 2020 2064 6566 2063 6f6c 6f72         def color
+0002c3a0: 6d61 705f 6368 616e 6765 6428 6368 616e  map_changed(chan
+0002c3b0: 6765 293a 0d0a 2020 2020 2020 2020 2020  ge):..          
+0002c3c0: 2020 2020 2020 6966 2063 6861 6e67 655b        if change[
+0002c3d0: 226e 6577 225d 3a0d 0a0d 0a20 2020 2020  "new"]:....     
+0002c3e0: 2020 2020 2020 2020 2020 2020 2020 206e                 n
+0002c3f0: 5f63 6c61 7373 203d 204e 6f6e 650d 0a20  _class = None.. 
+0002c400: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c410: 2020 2069 6620 636c 6173 7365 732e 7661     if classes.va
+0002c420: 6c75 6520 213d 2022 416e 7922 3a0d 0a20  lue != "Any":.. 
+0002c430: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c440: 2020 2020 2020 206e 5f63 6c61 7373 203d         n_class =
+0002c450: 2069 6e74 2863 6c61 7373 6573 2e76 616c   int(classes.val
+0002c460: 7565 290d 0a0d 0a20 2020 2020 2020 2020  ue)....         
+0002c470: 2020 2020 2020 2020 2020 2063 6f6c 6f72             color
+0002c480: 7320 3d20 706c 742e 636d 2e67 6574 5f63  s = plt.cm.get_c
+0002c490: 6d61 7028 636f 6c6f 726d 6170 2e76 616c  map(colormap.val
+0002c4a0: 7565 2c20 6e5f 636c 6173 7329 0d0a 2020  ue, n_class)..  
+0002c4b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c4c0: 2020 636d 6170 5f63 6f6c 6f72 7320 3d20    cmap_colors = 
+0002c4d0: 5b0d 0a20 2020 2020 2020 2020 2020 2020  [..             
+0002c4e0: 2020 2020 2020 2020 2020 206d 706c 2e63             mpl.c
+0002c4f0: 6f6c 6f72 732e 7267 6232 6865 7828 636f  olors.rgb2hex(co
+0002c500: 6c6f 7273 2869 2929 5b31 3a5d 2066 6f72  lors(i))[1:] for
+0002c510: 2069 2069 6e20 7261 6e67 6528 636f 6c6f   i in range(colo
+0002c520: 7273 2e4e 290d 0a20 2020 2020 2020 2020  rs.N)..         
+0002c530: 2020 2020 2020 2020 2020 205d 0d0a 0d0a             ]....
+0002c540: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c550: 2020 2020 5f2c 2061 7820 3d20 706c 742e      _, ax = plt.
+0002c560: 7375 6270 6c6f 7473 2866 6967 7369 7a65  subplots(figsize
+0002c570: 3d28 362c 2030 2e34 2929 0d0a 2020 2020  =(6, 0.4))..    
 0002c580: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c590: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-0002c5a0: 2020 2020 2020 206e 6f72 6d20 3d20 6d70         norm = mp
-0002c5b0: 6c2e 636f 6c6f 7273 2e4e 6f72 6d61 6c69  l.colors.Normali
-0002c5c0: 7a65 2876 6d69 6e3d 302c 2076 6d61 783d  ze(vmin=0, vmax=
-0002c5d0: 3129 0d0a 2020 2020 2020 2020 2020 2020  1)..            
-0002c5e0: 2020 2020 2020 2020 6d70 6c2e 636f 6c6f          mpl.colo
-0002c5f0: 7262 6172 2e43 6f6c 6f72 6261 7242 6173  rbar.ColorbarBas
-0002c600: 6528 0d0a 2020 2020 2020 2020 2020 2020  e(..            
-0002c610: 2020 2020 2020 2020 2020 2020 6178 2c20              ax, 
-0002c620: 6e6f 726d 3d6e 6f72 6d2c 2063 6d61 703d  norm=norm, cmap=
-0002c630: 636d 6170 2c20 6f72 6965 6e74 6174 696f  cmap, orientatio
-0002c640: 6e3d 2268 6f72 697a 6f6e 7461 6c22 0d0a  n="horizontal"..
-0002c650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c660: 2020 2020 290d 0a0d 0a20 2020 2020 2020      )....       
-0002c670: 2020 2020 2020 2020 2020 2020 2070 616c               pal
-0002c680: 6574 7465 2e76 616c 7565 203d 2022 2c20  ette.value = ", 
-0002c690: 222e 6a6f 696e 2863 6d61 705f 636f 6c6f  ".join(cmap_colo
-0002c6a0: 7273 290d 0a0d 0a20 2020 2020 2020 2020  rs)....         
-0002c6b0: 2020 2020 2020 2020 2020 2069 6620 7365             if se
-0002c6c0: 6c66 2e63 6f6c 6f72 6261 725f 7769 6467  lf.colorbar_widg
-0002c6d0: 6574 2069 7320 4e6f 6e65 3a0d 0a20 2020  et is None:..   
+0002c590: 636d 6170 203d 206d 706c 2e63 6f6c 6f72  cmap = mpl.color
+0002c5a0: 732e 4c69 6e65 6172 5365 676d 656e 7465  s.LinearSegmente
+0002c5b0: 6443 6f6c 6f72 6d61 702e 6672 6f6d 5f6c  dColormap.from_l
+0002c5c0: 6973 7428 0d0a 2020 2020 2020 2020 2020  ist(..          
+0002c5d0: 2020 2020 2020 2020 2020 2020 2020 2263                "c
+0002c5e0: 7573 746f 6d22 2c20 746f 5f68 6578 5f63  ustom", to_hex_c
+0002c5f0: 6f6c 6f72 7328 636d 6170 5f63 6f6c 6f72  olors(cmap_color
+0002c600: 7329 2c20 4e3d 3235 360d 0a20 2020 2020  s), N=256..     
+0002c610: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+0002c620: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002c630: 2020 2020 2020 6e6f 726d 203d 206d 706c        norm = mpl
+0002c640: 2e63 6f6c 6f72 732e 4e6f 726d 616c 697a  .colors.Normaliz
+0002c650: 6528 766d 696e 3d30 2c20 766d 6178 3d31  e(vmin=0, vmax=1
+0002c660: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+0002c670: 2020 2020 2020 206d 706c 2e63 6f6c 6f72         mpl.color
+0002c680: 6261 722e 436f 6c6f 7262 6172 4261 7365  bar.ColorbarBase
+0002c690: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
+0002c6a0: 2020 2020 2020 2020 2020 2061 782c 206e             ax, n
+0002c6b0: 6f72 6d3d 6e6f 726d 2c20 636d 6170 3d63  orm=norm, cmap=c
+0002c6c0: 6d61 702c 206f 7269 656e 7461 7469 6f6e  map, orientation
+0002c6d0: 3d22 686f 7269 7a6f 6e74 616c 220d 0a20  ="horizontal".. 
 0002c6e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c6f0: 2020 2020 2073 656c 662e 636f 6c6f 7262       self.colorb
-0002c700: 6172 5f77 6964 6765 7420 3d20 7769 6467  ar_widget = widg
-0002c710: 6574 732e 4f75 7470 7574 280d 0a20 2020  ets.Output(..   
-0002c720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c730: 2020 2020 2020 2020 206c 6179 6f75 743d           layout=
-0002c740: 7769 6467 6574 732e 4c61 796f 7574 2868  widgets.Layout(h
-0002c750: 6569 6768 743d 2236 3070 7822 290d 0a20  eight="60px").. 
-0002c760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c770: 2020 2020 2020 2029 0d0a 0d0a 2020 2020         )....    
-0002c780: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c790: 6966 2073 656c 662e 636f 6c6f 7262 6172  if self.colorbar
-0002c7a0: 5f63 7472 6c20 6973 204e 6f6e 653a 0d0a  _ctrl is None:..
+0002c6f0: 2020 2029 0d0a 0d0a 2020 2020 2020 2020     )....        
+0002c700: 2020 2020 2020 2020 2020 2020 7061 6c65              pale
+0002c710: 7474 652e 7661 6c75 6520 3d20 222c 2022  tte.value = ", "
+0002c720: 2e6a 6f69 6e28 636d 6170 5f63 6f6c 6f72  .join(cmap_color
+0002c730: 7329 0d0a 0d0a 2020 2020 2020 2020 2020  s)....          
+0002c740: 2020 2020 2020 2020 2020 6966 2073 656c            if sel
+0002c750: 662e 636f 6c6f 7262 6172 5f77 6964 6765  f.colorbar_widge
+0002c760: 7420 6973 204e 6f6e 653a 0d0a 2020 2020  t is None:..    
+0002c770: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c780: 2020 2020 7365 6c66 2e63 6f6c 6f72 6261      self.colorba
+0002c790: 725f 7769 6467 6574 203d 2077 6964 6765  r_widget = widge
+0002c7a0: 7473 2e4f 7574 7075 7428 0d0a 2020 2020  ts.Output(..    
 0002c7b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c7c0: 2020 2020 2020 2020 7365 6c66 2e63 6f6c          self.col
-0002c7d0: 6f72 6261 725f 6374 726c 203d 2069 7079  orbar_ctrl = ipy
-0002c7e0: 6c65 6166 6c65 742e 5769 6467 6574 436f  leaflet.WidgetCo
-0002c7f0: 6e74 726f 6c28 0d0a 2020 2020 2020 2020  ntrol(..        
-0002c800: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c810: 2020 2020 7769 6467 6574 3d73 656c 662e      widget=self.
-0002c820: 636f 6c6f 7262 6172 5f77 6964 6765 742c  colorbar_widget,
-0002c830: 2070 6f73 6974 696f 6e3d 2262 6f74 746f   position="botto
-0002c840: 6d72 6967 6874 220d 0a20 2020 2020 2020  mright"..       
-0002c850: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c860: 2029 0d0a 2020 2020 2020 2020 2020 2020   )..            
-0002c870: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0002c880: 2e61 6464 5f63 6f6e 7472 6f6c 2873 656c  .add_control(sel
-0002c890: 662e 636f 6c6f 7262 6172 5f63 7472 6c29  f.colorbar_ctrl)
-0002c8a0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0002c8b0: 2020 2020 2020 2020 636f 6c6f 7262 6172          colorbar
-0002c8c0: 5f6f 7574 7075 7420 3d20 7365 6c66 2e63  _output = self.c
-0002c8d0: 6f6c 6f72 6261 725f 7769 6467 6574 0d0a  olorbar_widget..
+0002c7c0: 2020 2020 2020 2020 6c61 796f 7574 3d77          layout=w
+0002c7d0: 6964 6765 7473 2e4c 6179 6f75 7428 6865  idgets.Layout(he
+0002c7e0: 6967 6874 3d22 3630 7078 2229 0d0a 2020  ight="60px")..  
+0002c7f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c800: 2020 2020 2020 290d 0a0d 0a20 2020 2020        )....     
+0002c810: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0002c820: 6620 7365 6c66 2e63 6f6c 6f72 6261 725f  f self.colorbar_
+0002c830: 6374 726c 2069 7320 4e6f 6e65 3a0d 0a20  ctrl is None:.. 
+0002c840: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c850: 2020 2020 2020 2073 656c 662e 636f 6c6f         self.colo
+0002c860: 7262 6172 5f63 7472 6c20 3d20 6970 796c  rbar_ctrl = ipyl
+0002c870: 6561 666c 6574 2e57 6964 6765 7443 6f6e  eaflet.WidgetCon
+0002c880: 7472 6f6c 280d 0a20 2020 2020 2020 2020  trol(..         
+0002c890: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c8a0: 2020 2077 6964 6765 743d 7365 6c66 2e63     widget=self.c
+0002c8b0: 6f6c 6f72 6261 725f 7769 6467 6574 2c20  olorbar_widget, 
+0002c8c0: 706f 7369 7469 6f6e 3d22 626f 7474 6f6d  position="bottom
+0002c8d0: 7269 6768 7422 0d0a 2020 2020 2020 2020  right"..        
 0002c8e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c8f0: 2020 2020 7769 7468 2063 6f6c 6f72 6261      with colorba
-0002c900: 725f 6f75 7470 7574 3a0d 0a20 2020 2020  r_output:..     
-0002c910: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c920: 2020 2063 6f6c 6f72 6261 725f 6f75 7470     colorbar_outp
-0002c930: 7574 2e63 6c65 6172 5f6f 7574 7075 7428  ut.clear_output(
-0002c940: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-0002c950: 2020 2020 2020 2020 2020 2070 6c74 2e73             plt.s
-0002c960: 686f 7728 290d 0a20 2020 2020 2020 2020  how()..         
-0002c970: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-0002c980: 2064 6973 706c 6179 2863 6f6c 6f72 6261   display(colorba
-0002c990: 7229 0d0a 0d0a 2020 2020 2020 2020 2020  r)....          
-0002c9a0: 2020 2020 2020 2020 2020 6966 206c 656e            if len
-0002c9b0: 2870 616c 6574 7465 2e76 616c 7565 2920  (palette.value) 
-0002c9c0: 3e20 3020 616e 6420 222c 2220 696e 2070  > 0 and "," in p
-0002c9d0: 616c 6574 7465 2e76 616c 7565 3a0d 0a20  alette.value:.. 
-0002c9e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c9f0: 2020 2020 2020 206c 6162 656c 7320 3d20         labels = 
-0002ca00: 5b0d 0a20 2020 2020 2020 2020 2020 2020  [..             
-0002ca10: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-0002ca20: 2243 6c61 7373 207b 692b 317d 2220 666f  "Class {i+1}" fo
-0002ca30: 7220 6920 696e 2072 616e 6765 286c 656e  r i in range(len
-0002ca40: 2870 616c 6574 7465 2e76 616c 7565 2e73  (palette.value.s
-0002ca50: 706c 6974 2822 2c22 2929 290d 0a20 2020  plit(",")))..   
-0002ca60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ca70: 2020 2020 205d 0d0a 2020 2020 2020 2020       ]..        
-0002ca80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ca90: 6c65 6765 6e64 5f6c 6162 656c 732e 7661  legend_labels.va
-0002caa0: 6c75 6520 3d20 222c 2022 2e6a 6f69 6e28  lue = ", ".join(
-0002cab0: 6c61 6265 6c73 290d 0a0d 0a20 2020 2020  labels)....     
-0002cac0: 2020 2020 2020 2063 6f6c 6f72 6d61 702e         colormap.
-0002cad0: 6f62 7365 7276 6528 636f 6c6f 726d 6170  observe(colormap
-0002cae0: 5f63 6861 6e67 6564 2c20 2276 616c 7565  _changed, "value
-0002caf0: 2229 0d0a 0d0a 2020 2020 2020 2020 2020  ")....          
-0002cb00: 2020 6274 6e5f 7769 6474 6820 3d20 2239    btn_width = "9
-0002cb10: 372e 3570 7822 0d0a 2020 2020 2020 2020  7.5px"..        
-0002cb20: 2020 2020 696d 706f 7274 5f62 746e 203d      import_btn =
-0002cb30: 2077 6964 6765 7473 2e42 7574 746f 6e28   widgets.Button(
-0002cb40: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002cb50: 2020 6465 7363 7269 7074 696f 6e3d 2249    description="I
-0002cb60: 6d70 6f72 7422 2c0d 0a20 2020 2020 2020  mport",..       
-0002cb70: 2020 2020 2020 2020 2062 7574 746f 6e5f           button_
-0002cb80: 7374 796c 653d 2270 7269 6d61 7279 222c  style="primary",
-0002cb90: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002cba0: 2020 746f 6f6c 7469 703d 2249 6d70 6f72    tooltip="Impor
-0002cbb0: 7420 7669 7320 7061 7261 6d73 2074 6f20  t vis params to 
-0002cbc0: 6e6f 7465 626f 6f6b 222c 0d0a 2020 2020  notebook",..    
-0002cbd0: 2020 2020 2020 2020 2020 2020 6c61 796f              layo
-0002cbe0: 7574 3d77 6964 6765 7473 2e4c 6179 6f75  ut=widgets.Layou
-0002cbf0: 7428 7769 6474 683d 6274 6e5f 7769 6474  t(width=btn_widt
-0002cc00: 6829 2c0d 0a20 2020 2020 2020 2020 2020  h),..           
-0002cc10: 2029 0d0a 0d0a 2020 2020 2020 2020 2020   )....          
-0002cc20: 2020 6170 706c 795f 6274 6e20 3d20 7769    apply_btn = wi
-0002cc30: 6467 6574 732e 4275 7474 6f6e 280d 0a20  dgets.Button(.. 
-0002cc40: 2020 2020 2020 2020 2020 2020 2020 2064                 d
-0002cc50: 6573 6372 6970 7469 6f6e 3d22 4170 706c  escription="Appl
-0002cc60: 7922 2c0d 0a20 2020 2020 2020 2020 2020  y",..           
-0002cc70: 2020 2020 2074 6f6f 6c74 6970 3d22 4170       tooltip="Ap
-0002cc80: 706c 7920 7669 7320 7061 7261 6d73 2074  ply vis params t
-0002cc90: 6f20 7468 6520 6c61 7965 7222 2c0d 0a20  o the layer",.. 
-0002cca0: 2020 2020 2020 2020 2020 2020 2020 206c                 l
-0002ccb0: 6179 6f75 743d 7769 6467 6574 732e 4c61  ayout=widgets.La
-0002ccc0: 796f 7574 2877 6964 7468 3d62 746e 5f77  yout(width=btn_w
-0002ccd0: 6964 7468 292c 0d0a 2020 2020 2020 2020  idth),..        
-0002cce0: 2020 2020 290d 0a0d 0a20 2020 2020 2020      )....       
-0002ccf0: 2020 2020 2063 6c6f 7365 5f62 746e 203d       close_btn =
-0002cd00: 2077 6964 6765 7473 2e42 7574 746f 6e28   widgets.Button(
-0002cd10: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002cd20: 2020 6465 7363 7269 7074 696f 6e3d 2243    description="C
-0002cd30: 6c6f 7365 222c 0d0a 2020 2020 2020 2020  lose",..        
-0002cd40: 2020 2020 2020 2020 746f 6f6c 7469 703d          tooltip=
-0002cd50: 2243 6c6f 7365 2076 6973 2070 6172 616d  "Close vis param
-0002cd60: 7320 6469 6167 6c6f 6722 2c0d 0a20 2020  s diaglog",..   
-0002cd70: 2020 2020 2020 2020 2020 2020 206c 6179               lay
-0002cd80: 6f75 743d 7769 6467 6574 732e 4c61 796f  out=widgets.Layo
-0002cd90: 7574 2877 6964 7468 3d62 746e 5f77 6964  ut(width=btn_wid
-0002cda0: 7468 292c 0d0a 2020 2020 2020 2020 2020  th),..          
-0002cdb0: 2020 290d 0a0d 0a20 2020 2020 2020 2020    )....         
-0002cdc0: 2020 2073 7479 6c65 5f63 686b 203d 2077     style_chk = w
-0002cdd0: 6964 6765 7473 2e43 6865 636b 626f 7828  idgets.Checkbox(
-0002cde0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002cdf0: 2020 7661 6c75 653d 4661 6c73 652c 0d0a    value=False,..
-0002ce00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ce10: 6465 7363 7269 7074 696f 6e3d 2253 7479  description="Sty
-0002ce20: 6c65 2062 7920 6174 7472 6962 7574 6522  le by attribute"
-0002ce30: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-0002ce40: 2020 2069 6e64 656e 743d 4661 6c73 652c     indent=False,
-0002ce50: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002ce60: 2020 6c61 796f 7574 3d77 6964 6765 7473    layout=widgets
-0002ce70: 2e4c 6179 6f75 7428 7769 6474 683d 2231  .Layout(width="1
-0002ce80: 3430 7078 2229 2c0d 0a20 2020 2020 2020  40px"),..       
-0002ce90: 2020 2020 2029 0d0a 0d0a 2020 2020 2020       )....      
-0002cea0: 2020 2020 2020 6c65 6765 6e64 5f63 686b        legend_chk
-0002ceb0: 203d 2077 6964 6765 7473 2e43 6865 636b   = widgets.Check
-0002cec0: 626f 7828 0d0a 2020 2020 2020 2020 2020  box(..          
-0002ced0: 2020 2020 2020 7661 6c75 653d 4661 6c73        value=Fals
-0002cee0: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
-0002cef0: 2020 2020 6465 7363 7269 7074 696f 6e3d      description=
-0002cf00: 224c 6567 656e 6422 2c0d 0a20 2020 2020  "Legend",..     
-0002cf10: 2020 2020 2020 2020 2020 2069 6e64 656e             inden
-0002cf20: 743d 4661 6c73 652c 0d0a 2020 2020 2020  t=False,..      
-0002cf30: 2020 2020 2020 2020 2020 6c61 796f 7574            layout
-0002cf40: 3d77 6964 6765 7473 2e4c 6179 6f75 7428  =widgets.Layout(
-0002cf50: 7769 6474 683d 2237 3070 7822 292c 0d0a  width="70px"),..
-0002cf60: 2020 2020 2020 2020 2020 2020 290d 0a20              ).. 
-0002cf70: 2020 2020 2020 2020 2020 2063 6f6d 7075             compu
-0002cf80: 7465 5f6c 6162 656c 203d 2077 6964 6765  te_label = widge
-0002cf90: 7473 2e4c 6162 656c 2876 616c 7565 3d22  ts.Label(value="
-0002cfa0: 2229 0d0a 0d0a 2020 2020 2020 2020 2020  ")....          
-0002cfb0: 2020 7374 796c 655f 7662 6f78 203d 2077    style_vbox = w
-0002cfc0: 6964 6765 7473 2e56 426f 7828 5b77 6964  idgets.VBox([wid
-0002cfd0: 6765 7473 2e48 426f 7828 5b73 7479 6c65  gets.HBox([style
-0002cfe0: 5f63 686b 2c20 636f 6d70 7574 655f 6c61  _chk, compute_la
-0002cff0: 6265 6c5d 295d 290d 0a0d 0a20 2020 2020  bel])])....     
-0002d000: 2020 2020 2020 2064 6566 2073 7479 6c65         def style
-0002d010: 5f63 686b 5f63 6861 6e67 6564 2863 6861  _chk_changed(cha
-0002d020: 6e67 6529 3a0d 0a0d 0a20 2020 2020 2020  nge):....       
-0002d030: 2020 2020 2020 2020 2069 6620 6368 616e           if chan
-0002d040: 6765 5b22 6e65 7722 5d3a 0d0a 0d0a 2020  ge["new"]:....  
-0002d050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d060: 2020 6966 2028 0d0a 2020 2020 2020 2020    if (..        
-0002d070: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d080: 7365 6c66 2e63 6f6c 6f72 6261 725f 6374  self.colorbar_ct
-0002d090: 726c 2069 7320 6e6f 7420 4e6f 6e65 0d0a  rl is not None..
-0002d0a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d0b0: 2020 2020 2020 2020 616e 6420 7365 6c66          and self
-0002d0c0: 2e63 6f6c 6f72 6261 725f 6374 726c 2069  .colorbar_ctrl i
-0002d0d0: 6e20 7365 6c66 2e63 6f6e 7472 6f6c 730d  n self.controls.
-0002d0e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002d0f0: 2020 2020 2029 3a0d 0a20 2020 2020 2020       ):..       
-0002d100: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d110: 2073 656c 662e 7265 6d6f 7665 5f63 6f6e   self.remove_con
-0002d120: 7472 6f6c 2873 656c 662e 636f 6c6f 7262  trol(self.colorb
-0002d130: 6172 5f63 7472 6c29 0d0a 2020 2020 2020  ar_ctrl)..      
-0002d140: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d150: 2020 7365 6c66 2e63 6f6c 6f72 6261 725f    self.colorbar_
-0002d160: 6374 726c 2e63 6c6f 7365 2829 0d0a 2020  ctrl.close()..  
+0002c8f0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+0002c900: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0002c910: 6164 645f 636f 6e74 726f 6c28 7365 6c66  add_control(self
+0002c920: 2e63 6f6c 6f72 6261 725f 6374 726c 290d  .colorbar_ctrl).
+0002c930: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0002c940: 2020 2020 2020 2063 6f6c 6f72 6261 725f         colorbar_
+0002c950: 6f75 7470 7574 203d 2073 656c 662e 636f  output = self.co
+0002c960: 6c6f 7262 6172 5f77 6964 6765 740d 0a20  lorbar_widget.. 
+0002c970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c980: 2020 2077 6974 6820 636f 6c6f 7262 6172     with colorbar
+0002c990: 5f6f 7574 7075 743a 0d0a 2020 2020 2020  _output:..      
+0002c9a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c9b0: 2020 636f 6c6f 7262 6172 5f6f 7574 7075    colorbar_outpu
+0002c9c0: 742e 636c 6561 725f 6f75 7470 7574 2829  t.clear_output()
+0002c9d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002c9e0: 2020 2020 2020 2020 2020 706c 742e 7368            plt.sh
+0002c9f0: 6f77 2829 0d0a 2020 2020 2020 2020 2020  ow()..          
+0002ca00: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+0002ca10: 6469 7370 6c61 7928 636f 6c6f 7262 6172  display(colorbar
+0002ca20: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+0002ca30: 2020 2020 2020 2020 2069 6620 6c65 6e28           if len(
+0002ca40: 7061 6c65 7474 652e 7661 6c75 6529 203e  palette.value) >
+0002ca50: 2030 2061 6e64 2022 2c22 2069 6e20 7061   0 and "," in pa
+0002ca60: 6c65 7474 652e 7661 6c75 653a 0d0a 2020  lette.value:..  
+0002ca70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ca80: 2020 2020 2020 6c61 6265 6c73 203d 205b        labels = [
+0002ca90: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002caa0: 2020 2020 2020 2020 2020 2020 2020 6622                f"
+0002cab0: 436c 6173 7320 7b69 2b31 7d22 2066 6f72  Class {i+1}" for
+0002cac0: 2069 2069 6e20 7261 6e67 6528 6c65 6e28   i in range(len(
+0002cad0: 7061 6c65 7474 652e 7661 6c75 652e 7370  palette.value.sp
+0002cae0: 6c69 7428 222c 2229 2929 0d0a 2020 2020  lit(",")))..    
+0002caf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cb00: 2020 2020 5d0d 0a20 2020 2020 2020 2020      ]..         
+0002cb10: 2020 2020 2020 2020 2020 2020 2020 206c                 l
+0002cb20: 6567 656e 645f 6c61 6265 6c73 2e76 616c  egend_labels.val
+0002cb30: 7565 203d 2022 2c20 222e 6a6f 696e 286c  ue = ", ".join(l
+0002cb40: 6162 656c 7329 0d0a 0d0a 2020 2020 2020  abels)....      
+0002cb50: 2020 2020 2020 636f 6c6f 726d 6170 2e6f        colormap.o
+0002cb60: 6273 6572 7665 2863 6f6c 6f72 6d61 705f  bserve(colormap_
+0002cb70: 6368 616e 6765 642c 2022 7661 6c75 6522  changed, "value"
+0002cb80: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+0002cb90: 2062 746e 5f77 6964 7468 203d 2022 3937   btn_width = "97
+0002cba0: 2e35 7078 220d 0a20 2020 2020 2020 2020  .5px"..         
+0002cbb0: 2020 2069 6d70 6f72 745f 6274 6e20 3d20     import_btn = 
+0002cbc0: 7769 6467 6574 732e 4275 7474 6f6e 280d  widgets.Button(.
+0002cbd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002cbe0: 2064 6573 6372 6970 7469 6f6e 3d22 496d   description="Im
+0002cbf0: 706f 7274 222c 0d0a 2020 2020 2020 2020  port",..        
+0002cc00: 2020 2020 2020 2020 6275 7474 6f6e 5f73          button_s
+0002cc10: 7479 6c65 3d22 7072 696d 6172 7922 2c0d  tyle="primary",.
+0002cc20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002cc30: 2074 6f6f 6c74 6970 3d22 496d 706f 7274   tooltip="Import
+0002cc40: 2076 6973 2070 6172 616d 7320 746f 206e   vis params to n
+0002cc50: 6f74 6562 6f6f 6b22 2c0d 0a20 2020 2020  otebook",..     
+0002cc60: 2020 2020 2020 2020 2020 206c 6179 6f75             layou
+0002cc70: 743d 7769 6467 6574 732e 4c61 796f 7574  t=widgets.Layout
+0002cc80: 2877 6964 7468 3d62 746e 5f77 6964 7468  (width=btn_width
+0002cc90: 292c 0d0a 2020 2020 2020 2020 2020 2020  ),..            
+0002cca0: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+0002ccb0: 2061 7070 6c79 5f62 746e 203d 2077 6964   apply_btn = wid
+0002ccc0: 6765 7473 2e42 7574 746f 6e28 0d0a 2020  gets.Button(..  
+0002ccd0: 2020 2020 2020 2020 2020 2020 2020 6465                de
+0002cce0: 7363 7269 7074 696f 6e3d 2241 7070 6c79  scription="Apply
+0002ccf0: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
+0002cd00: 2020 2020 746f 6f6c 7469 703d 2241 7070      tooltip="App
+0002cd10: 6c79 2076 6973 2070 6172 616d 7320 746f  ly vis params to
+0002cd20: 2074 6865 206c 6179 6572 222c 0d0a 2020   the layer",..  
+0002cd30: 2020 2020 2020 2020 2020 2020 2020 6c61                la
+0002cd40: 796f 7574 3d77 6964 6765 7473 2e4c 6179  yout=widgets.Lay
+0002cd50: 6f75 7428 7769 6474 683d 6274 6e5f 7769  out(width=btn_wi
+0002cd60: 6474 6829 2c0d 0a20 2020 2020 2020 2020  dth),..         
+0002cd70: 2020 2029 0d0a 0d0a 2020 2020 2020 2020     )....        
+0002cd80: 2020 2020 636c 6f73 655f 6274 6e20 3d20      close_btn = 
+0002cd90: 7769 6467 6574 732e 4275 7474 6f6e 280d  widgets.Button(.
+0002cda0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002cdb0: 2064 6573 6372 6970 7469 6f6e 3d22 436c   description="Cl
+0002cdc0: 6f73 6522 2c0d 0a20 2020 2020 2020 2020  ose",..         
+0002cdd0: 2020 2020 2020 2074 6f6f 6c74 6970 3d22         tooltip="
+0002cde0: 436c 6f73 6520 7669 7320 7061 7261 6d73  Close vis params
+0002cdf0: 2064 6961 676c 6f67 222c 0d0a 2020 2020   diaglog",..    
+0002ce00: 2020 2020 2020 2020 2020 2020 6c61 796f              layo
+0002ce10: 7574 3d77 6964 6765 7473 2e4c 6179 6f75  ut=widgets.Layou
+0002ce20: 7428 7769 6474 683d 6274 6e5f 7769 6474  t(width=btn_widt
+0002ce30: 6829 2c0d 0a20 2020 2020 2020 2020 2020  h),..           
+0002ce40: 2029 0d0a 0d0a 2020 2020 2020 2020 2020   )....          
+0002ce50: 2020 7374 796c 655f 6368 6b20 3d20 7769    style_chk = wi
+0002ce60: 6467 6574 732e 4368 6563 6b62 6f78 280d  dgets.Checkbox(.
+0002ce70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002ce80: 2076 616c 7565 3d46 616c 7365 2c0d 0a20   value=False,.. 
+0002ce90: 2020 2020 2020 2020 2020 2020 2020 2064                 d
+0002cea0: 6573 6372 6970 7469 6f6e 3d22 5374 796c  escription="Styl
+0002ceb0: 6520 6279 2061 7474 7269 6275 7465 222c  e by attribute",
+0002cec0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002ced0: 2020 696e 6465 6e74 3d46 616c 7365 2c0d    indent=False,.
+0002cee0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002cef0: 206c 6179 6f75 743d 7769 6467 6574 732e   layout=widgets.
+0002cf00: 4c61 796f 7574 2877 6964 7468 3d22 3134  Layout(width="14
+0002cf10: 3070 7822 292c 0d0a 2020 2020 2020 2020  0px"),..        
+0002cf20: 2020 2020 290d 0a0d 0a20 2020 2020 2020      )....       
+0002cf30: 2020 2020 206c 6567 656e 645f 6368 6b20       legend_chk 
+0002cf40: 3d20 7769 6467 6574 732e 4368 6563 6b62  = widgets.Checkb
+0002cf50: 6f78 280d 0a20 2020 2020 2020 2020 2020  ox(..           
+0002cf60: 2020 2020 2076 616c 7565 3d46 616c 7365       value=False
+0002cf70: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+0002cf80: 2020 2064 6573 6372 6970 7469 6f6e 3d22     description="
+0002cf90: 4c65 6765 6e64 222c 0d0a 2020 2020 2020  Legend",..      
+0002cfa0: 2020 2020 2020 2020 2020 696e 6465 6e74            indent
+0002cfb0: 3d46 616c 7365 2c0d 0a20 2020 2020 2020  =False,..       
+0002cfc0: 2020 2020 2020 2020 206c 6179 6f75 743d           layout=
+0002cfd0: 7769 6467 6574 732e 4c61 796f 7574 2877  widgets.Layout(w
+0002cfe0: 6964 7468 3d22 3730 7078 2229 2c0d 0a20  idth="70px"),.. 
+0002cff0: 2020 2020 2020 2020 2020 2029 0d0a 2020             )..  
+0002d000: 2020 2020 2020 2020 2020 636f 6d70 7574            comput
+0002d010: 655f 6c61 6265 6c20 3d20 7769 6467 6574  e_label = widget
+0002d020: 732e 4c61 6265 6c28 7661 6c75 653d 2222  s.Label(value=""
+0002d030: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+0002d040: 2073 7479 6c65 5f76 626f 7820 3d20 7769   style_vbox = wi
+0002d050: 6467 6574 732e 5642 6f78 285b 7769 6467  dgets.VBox([widg
+0002d060: 6574 732e 4842 6f78 285b 7374 796c 655f  ets.HBox([style_
+0002d070: 6368 6b2c 2063 6f6d 7075 7465 5f6c 6162  chk, compute_lab
+0002d080: 656c 5d29 5d29 0d0a 0d0a 2020 2020 2020  el])])....      
+0002d090: 2020 2020 2020 6465 6620 7374 796c 655f        def style_
+0002d0a0: 6368 6b5f 6368 616e 6765 6428 6368 616e  chk_changed(chan
+0002d0b0: 6765 293a 0d0a 0d0a 2020 2020 2020 2020  ge):....        
+0002d0c0: 2020 2020 2020 2020 6966 2063 6861 6e67          if chang
+0002d0d0: 655b 226e 6577 225d 3a0d 0a0d 0a20 2020  e["new"]:....   
+0002d0e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d0f0: 2069 6620 280d 0a20 2020 2020 2020 2020   if (..         
+0002d100: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0002d110: 656c 662e 636f 6c6f 7262 6172 5f63 7472  elf.colorbar_ctr
+0002d120: 6c20 6973 206e 6f74 204e 6f6e 650d 0a20  l is not None.. 
+0002d130: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d140: 2020 2020 2020 2061 6e64 2073 656c 662e         and self.
+0002d150: 636f 6c6f 7262 6172 5f63 7472 6c20 696e  colorbar_ctrl in
+0002d160: 2073 656c 662e 636f 6e74 726f 6c73 0d0a   self.controls..
 0002d170: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d180: 2020 2020 2020 7365 6c66 2e63 6f6c 6f72        self.color
-0002d190: 6261 725f 7769 6467 6574 2e63 6c6f 7365  bar_widget.close
-0002d1a0: 2829 0d0a 0d0a 2020 2020 2020 2020 2020  ()....          
-0002d1b0: 2020 2020 2020 2020 2020 7365 6c66 2e63            self.c
-0002d1c0: 6f6c 6f72 6261 725f 7769 6467 6574 203d  olorbar_widget =
-0002d1d0: 2077 6964 6765 7473 2e4f 7574 7075 7428   widgets.Output(
-0002d1e0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002d1f0: 2020 2020 2020 2020 2020 6c61 796f 7574            layout
-0002d200: 3d77 6964 6765 7473 2e4c 6179 6f75 7428  =widgets.Layout(
-0002d210: 6865 6967 6874 3d22 3630 7078 2229 0d0a  height="60px")..
-0002d220: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d230: 2020 2020 290d 0a20 2020 2020 2020 2020      )..         
-0002d240: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0002d250: 636f 6c6f 7262 6172 5f63 7472 6c20 3d20  colorbar_ctrl = 
-0002d260: 6970 796c 6561 666c 6574 2e57 6964 6765  ipyleaflet.Widge
-0002d270: 7443 6f6e 7472 6f6c 280d 0a20 2020 2020  tControl(..     
-0002d280: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d290: 2020 2077 6964 6765 743d 7365 6c66 2e63     widget=self.c
-0002d2a0: 6f6c 6f72 6261 725f 7769 6467 6574 2c20  olorbar_widget, 
-0002d2b0: 706f 7369 7469 6f6e 3d22 626f 7474 6f6d  position="bottom
-0002d2c0: 7269 6768 7422 0d0a 2020 2020 2020 2020  right"..        
-0002d2d0: 2020 2020 2020 2020 2020 2020 290d 0a20              ).. 
-0002d2e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d2f0: 2020 2073 656c 662e 6164 645f 636f 6e74     self.add_cont
-0002d300: 726f 6c28 7365 6c66 2e63 6f6c 6f72 6261  rol(self.colorba
-0002d310: 725f 6374 726c 290d 0a20 2020 2020 2020  r_ctrl)..       
-0002d320: 2020 2020 2020 2020 2020 2020 2066 696c               fil
-0002d330: 6c5f 636f 6c6f 722e 6469 7361 626c 6564  l_color.disabled
-0002d340: 203d 2054 7275 650d 0a20 2020 2020 2020   = True..       
-0002d350: 2020 2020 2020 2020 2020 2020 2063 6f6c               col
-0002d360: 6f72 6d61 702e 6f70 7469 6f6e 7320 3d20  ormap.options = 
-0002d370: 706c 742e 636f 6c6f 726d 6170 7328 290d  plt.colormaps().
-0002d380: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002d390: 2020 2020 2063 6f6c 6f72 6d61 702e 7661       colormap.va
-0002d3a0: 6c75 6520 3d20 2276 6972 6964 6973 220d  lue = "viridis".
-0002d3b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002d3c0: 2020 2020 2073 7479 6c65 5f76 626f 782e       style_vbox.
-0002d3d0: 6368 696c 6472 656e 203d 205b 0d0a 2020  children = [..  
-0002d3e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d3f0: 2020 2020 2020 7769 6467 6574 732e 4842        widgets.HB
-0002d400: 6f78 285b 7374 796c 655f 6368 6b2c 2063  ox([style_chk, c
-0002d410: 6f6d 7075 7465 5f6c 6162 656c 5d29 2c0d  ompute_label]),.
-0002d420: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002d430: 2020 2020 2020 2020 2077 6964 6765 7473           widgets
-0002d440: 2e48 426f 7828 5b66 6965 6c64 2c20 6669  .HBox([field, fi
-0002d450: 656c 645f 7661 6c75 6573 5d29 2c0d 0a20  eld_values]),.. 
-0002d460: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d470: 2020 2020 2020 2077 6964 6765 7473 2e48         widgets.H
-0002d480: 426f 7828 5b63 6c61 7373 6573 2c20 636f  Box([classes, co
-0002d490: 6c6f 726d 6170 5d29 2c0d 0a20 2020 2020  lormap]),..     
-0002d4a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d4b0: 2020 2070 616c 6574 7465 2c0d 0a20 2020     palette,..   
-0002d4c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d4d0: 2020 2020 2077 6964 6765 7473 2e48 426f       widgets.HBo
-0002d4e0: 7828 0d0a 2020 2020 2020 2020 2020 2020  x(..            
+0002d180: 2020 2020 293a 0d0a 2020 2020 2020 2020      ):..        
+0002d190: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d1a0: 7365 6c66 2e72 656d 6f76 655f 636f 6e74  self.remove_cont
+0002d1b0: 726f 6c28 7365 6c66 2e63 6f6c 6f72 6261  rol(self.colorba
+0002d1c0: 725f 6374 726c 290d 0a20 2020 2020 2020  r_ctrl)..       
+0002d1d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d1e0: 2073 656c 662e 636f 6c6f 7262 6172 5f63   self.colorbar_c
+0002d1f0: 7472 6c2e 636c 6f73 6528 290d 0a20 2020  trl.close()..   
+0002d200: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d210: 2020 2020 2073 656c 662e 636f 6c6f 7262       self.colorb
+0002d220: 6172 5f77 6964 6765 742e 636c 6f73 6528  ar_widget.close(
+0002d230: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+0002d240: 2020 2020 2020 2020 2073 656c 662e 636f           self.co
+0002d250: 6c6f 7262 6172 5f77 6964 6765 7420 3d20  lorbar_widget = 
+0002d260: 7769 6467 6574 732e 4f75 7470 7574 280d  widgets.Output(.
+0002d270: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002d280: 2020 2020 2020 2020 206c 6179 6f75 743d           layout=
+0002d290: 7769 6467 6574 732e 4c61 796f 7574 2868  widgets.Layout(h
+0002d2a0: 6569 6768 743d 2236 3070 7822 290d 0a20  eight="60px").. 
+0002d2b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d2c0: 2020 2029 0d0a 2020 2020 2020 2020 2020     )..          
+0002d2d0: 2020 2020 2020 2020 2020 7365 6c66 2e63            self.c
+0002d2e0: 6f6c 6f72 6261 725f 6374 726c 203d 2069  olorbar_ctrl = i
+0002d2f0: 7079 6c65 6166 6c65 742e 5769 6467 6574  pyleaflet.Widget
+0002d300: 436f 6e74 726f 6c28 0d0a 2020 2020 2020  Control(..      
+0002d310: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d320: 2020 7769 6467 6574 3d73 656c 662e 636f    widget=self.co
+0002d330: 6c6f 7262 6172 5f77 6964 6765 742c 2070  lorbar_widget, p
+0002d340: 6f73 6974 696f 6e3d 2262 6f74 746f 6d72  osition="bottomr
+0002d350: 6967 6874 220d 0a20 2020 2020 2020 2020  ight"..         
+0002d360: 2020 2020 2020 2020 2020 2029 0d0a 2020             )..  
+0002d370: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d380: 2020 7365 6c66 2e61 6464 5f63 6f6e 7472    self.add_contr
+0002d390: 6f6c 2873 656c 662e 636f 6c6f 7262 6172  ol(self.colorbar
+0002d3a0: 5f63 7472 6c29 0d0a 2020 2020 2020 2020  _ctrl)..        
+0002d3b0: 2020 2020 2020 2020 2020 2020 6669 6c6c              fill
+0002d3c0: 5f63 6f6c 6f72 2e64 6973 6162 6c65 6420  _color.disabled 
+0002d3d0: 3d20 5472 7565 0d0a 2020 2020 2020 2020  = True..        
+0002d3e0: 2020 2020 2020 2020 2020 2020 636f 6c6f              colo
+0002d3f0: 726d 6170 2e6f 7074 696f 6e73 203d 2070  rmap.options = p
+0002d400: 6c74 2e63 6f6c 6f72 6d61 7073 2829 0d0a  lt.colormaps()..
+0002d410: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d420: 2020 2020 636f 6c6f 726d 6170 2e76 616c      colormap.val
+0002d430: 7565 203d 2022 7669 7269 6469 7322 0d0a  ue = "viridis"..
+0002d440: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d450: 2020 2020 7374 796c 655f 7662 6f78 2e63      style_vbox.c
+0002d460: 6869 6c64 7265 6e20 3d20 5b0d 0a20 2020  hildren = [..   
+0002d470: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d480: 2020 2020 2077 6964 6765 7473 2e48 426f       widgets.HBo
+0002d490: 7828 5b73 7479 6c65 5f63 686b 2c20 636f  x([style_chk, co
+0002d4a0: 6d70 7574 655f 6c61 6265 6c5d 292c 0d0a  mpute_label]),..
+0002d4b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d4c0: 2020 2020 2020 2020 7769 6467 6574 732e          widgets.
+0002d4d0: 4842 6f78 285b 6669 656c 642c 2066 6965  HBox([field, fie
+0002d4e0: 6c64 5f76 616c 7565 735d 292c 0d0a 2020  ld_values]),..  
 0002d4f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d500: 5b0d 0a20 2020 2020 2020 2020 2020 2020  [..             
-0002d510: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d520: 2020 206c 6567 656e 645f 6368 6b2c 0d0a     legend_chk,..
+0002d500: 2020 2020 2020 7769 6467 6574 732e 4842        widgets.HB
+0002d510: 6f78 285b 636c 6173 7365 732c 2063 6f6c  ox([classes, col
+0002d520: 6f72 6d61 705d 292c 0d0a 2020 2020 2020  ormap]),..      
 0002d530: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d540: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d550: 636f 6c6f 725f 7069 636b 6572 2c0d 0a20  color_picker,.. 
-0002d560: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d570: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-0002d580: 6464 5f63 6f6c 6f72 2c0d 0a20 2020 2020  dd_color,..     
-0002d590: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d5a0: 2020 2020 2020 2020 2020 2064 656c 5f63             del_c
-0002d5b0: 6f6c 6f72 2c0d 0a20 2020 2020 2020 2020  olor,..         
+0002d540: 2020 7061 6c65 7474 652c 0d0a 2020 2020    palette,..    
+0002d550: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d560: 2020 2020 7769 6467 6574 732e 4842 6f78      widgets.HBox
+0002d570: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
+0002d580: 2020 2020 2020 2020 2020 2020 2020 205b                 [
+0002d590: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002d5a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d5b0: 2020 6c65 6765 6e64 5f63 686b 2c0d 0a20    legend_chk,.. 
 0002d5c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d5d0: 2020 2020 2020 2072 6573 6574 5f63 6f6c         reset_col
-0002d5e0: 6f72 2c0d 0a20 2020 2020 2020 2020 2020  or,..           
+0002d5d0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+0002d5e0: 6f6c 6f72 5f70 6963 6b65 722c 0d0a 2020  olor_picker,..  
 0002d5f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d600: 205d 0d0a 2020 2020 2020 2020 2020 2020   ]..            
-0002d610: 2020 2020 2020 2020 2020 2020 292c 0d0a              ),..
+0002d600: 2020 2020 2020 2020 2020 2020 2020 6164                ad
+0002d610: 645f 636f 6c6f 722c 0d0a 2020 2020 2020  d_color,..      
 0002d620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d630: 2020 2020 5d0d 0a20 2020 2020 2020 2020      ]..         
-0002d640: 2020 2020 2020 2020 2020 2063 6f6d 7075             compu
-0002d650: 7465 5f6c 6162 656c 2e76 616c 7565 203d  te_label.value =
-0002d660: 2022 436f 6d70 7574 696e 6720 2e2e 2e22   "Computing ..."
-0002d670: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0002d680: 2020 2020 2020 2020 6669 656c 642e 6f70          field.op
-0002d690: 7469 6f6e 7320 3d20 280d 0a20 2020 2020  tions = (..     
-0002d6a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d6b0: 2020 2065 652e 4665 6174 7572 6528 6565     ee.Feature(ee
-0002d6c0: 5f6f 626a 6563 742e 6669 7273 7428 2929  _object.first())
-0002d6d0: 2e70 726f 7065 7274 794e 616d 6573 2829  .propertyNames()
-0002d6e0: 2e67 6574 496e 666f 2829 0d0a 2020 2020  .getInfo()..    
-0002d6f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d700: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-0002d710: 2020 2020 2020 2063 6f6d 7075 7465 5f6c         compute_l
-0002d720: 6162 656c 2e76 616c 7565 203d 2022 220d  abel.value = "".
-0002d730: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002d740: 2020 2020 2063 6c61 7373 6573 2e76 616c       classes.val
-0002d750: 7565 203d 2022 416e 7922 0d0a 2020 2020  ue = "Any"..    
-0002d760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d770: 6c65 6765 6e64 5f63 686b 2e76 616c 7565  legend_chk.value
-0002d780: 203d 2046 616c 7365 0d0a 0d0a 2020 2020   = False....    
-0002d790: 2020 2020 2020 2020 2020 2020 656c 7365              else
-0002d7a0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-0002d7b0: 2020 2020 2020 2066 696c 6c5f 636f 6c6f         fill_colo
-0002d7c0: 722e 6469 7361 626c 6564 203d 2046 616c  r.disabled = Fal
-0002d7d0: 7365 0d0a 2020 2020 2020 2020 2020 2020  se..            
-0002d7e0: 2020 2020 2020 2020 7374 796c 655f 7662          style_vb
-0002d7f0: 6f78 2e63 6869 6c64 7265 6e20 3d20 5b77  ox.children = [w
-0002d800: 6964 6765 7473 2e48 426f 7828 5b73 7479  idgets.HBox([sty
-0002d810: 6c65 5f63 686b 2c20 636f 6d70 7574 655f  le_chk, compute_
-0002d820: 6c61 6265 6c5d 295d 0d0a 2020 2020 2020  label])]..      
-0002d830: 2020 2020 2020 2020 2020 2020 2020 636f                co
-0002d840: 6d70 7574 655f 6c61 6265 6c2e 7661 6c75  mpute_label.valu
-0002d850: 6520 3d20 2222 0d0a 2020 2020 2020 2020  e = ""..        
-0002d860: 2020 2020 2020 2020 2020 2020 6966 2028              if (
-0002d870: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002d880: 2020 2020 2020 2020 2020 7365 6c66 2e63            self.c
-0002d890: 6f6c 6f72 6261 725f 6374 726c 2069 7320  olorbar_ctrl is 
-0002d8a0: 6e6f 7420 4e6f 6e65 0d0a 2020 2020 2020  not None..      
-0002d8b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d8c0: 2020 616e 6420 7365 6c66 2e63 6f6c 6f72    and self.color
-0002d8d0: 6261 725f 6374 726c 2069 6e20 7365 6c66  bar_ctrl in self
-0002d8e0: 2e63 6f6e 7472 6f6c 730d 0a20 2020 2020  .controls..     
-0002d8f0: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-0002d900: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-0002d910: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0002d920: 7265 6d6f 7665 5f63 6f6e 7472 6f6c 2873  remove_control(s
-0002d930: 656c 662e 636f 6c6f 7262 6172 5f63 7472  elf.colorbar_ctr
-0002d940: 6c29 0d0a 2020 2020 2020 2020 2020 2020  l)..            
-0002d950: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0002d960: 2e63 6f6c 6f72 6261 725f 6374 726c 203d  .colorbar_ctrl =
-0002d970: 204e 6f6e 650d 0a20 2020 2020 2020 2020   None..         
-0002d980: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0002d990: 656c 662e 636f 6c6f 7262 6172 5f77 6964  elf.colorbar_wid
-0002d9a0: 6765 7420 3d20 4e6f 6e65 0d0a 2020 2020  get = None..    
-0002d9b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d9c0: 2320 6c65 6765 6e64 5f63 686b 2e76 616c  # legend_chk.val
-0002d9d0: 7565 203d 2046 616c 7365 0d0a 0d0a 2020  ue = False....  
-0002d9e0: 2020 2020 2020 2020 2020 7374 796c 655f            style_
-0002d9f0: 6368 6b2e 6f62 7365 7276 6528 7374 796c  chk.observe(styl
-0002da00: 655f 6368 6b5f 6368 616e 6765 642c 2022  e_chk_changed, "
-0002da10: 7661 6c75 6522 290d 0a0d 0a20 2020 2020  value")....     
-0002da20: 2020 2020 2020 2064 6566 206c 6567 656e         def legen
-0002da30: 645f 6368 6b5f 6368 616e 6765 6428 6368  d_chk_changed(ch
-0002da40: 616e 6765 293a 0d0a 2020 2020 2020 2020  ange):..        
-0002da50: 2020 2020 2020 2020 6966 2063 6861 6e67          if chang
-0002da60: 655b 226e 6577 225d 3a0d 0a20 2020 2020  e["new"]:..     
-0002da70: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0002da80: 7479 6c65 5f76 626f 782e 6368 696c 6472  tyle_vbox.childr
-0002da90: 656e 203d 206c 6973 7428 7374 796c 655f  en = list(style_
-0002daa0: 7662 6f78 2e63 6869 6c64 7265 6e29 202b  vbox.children) +
-0002dab0: 205b 0d0a 2020 2020 2020 2020 2020 2020   [..            
-0002dac0: 2020 2020 2020 2020 2020 2020 7769 6467              widg
-0002dad0: 6574 732e 5642 6f78 285b 6c65 6765 6e64  ets.VBox([legend
-0002dae0: 5f74 6974 6c65 2c20 6c65 6765 6e64 5f6c  _title, legend_l
-0002daf0: 6162 656c 735d 290d 0a20 2020 2020 2020  abels])..       
-0002db00: 2020 2020 2020 2020 2020 2020 205d 0d0a               ]..
-0002db10: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002db20: 2020 2020 2020 6966 206c 656e 2870 616c        if len(pal
-0002db30: 6574 7465 2e76 616c 7565 2920 3e20 3020  ette.value) > 0 
-0002db40: 616e 6420 222c 2220 696e 2070 616c 6574  and "," in palet
-0002db50: 7465 2e76 616c 7565 3a0d 0a20 2020 2020  te.value:..     
-0002db60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002db70: 2020 206c 6162 656c 7320 3d20 5b0d 0a20     labels = [.. 
-0002db80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002db90: 2020 2020 2020 2020 2020 2066 2243 6c61             f"Cla
-0002dba0: 7373 207b 692b 317d 2220 666f 7220 6920  ss {i+1}" for i 
-0002dbb0: 696e 2072 616e 6765 286c 656e 2870 616c  in range(len(pal
-0002dbc0: 6574 7465 2e76 616c 7565 2e73 706c 6974  ette.value.split
-0002dbd0: 2822 2c22 2929 290d 0a20 2020 2020 2020  (",")))..       
-0002dbe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002dbf0: 205d 0d0a 2020 2020 2020 2020 2020 2020   ]..            
-0002dc00: 2020 2020 2020 2020 2020 2020 6c65 6765              lege
-0002dc10: 6e64 5f6c 6162 656c 732e 7661 6c75 6520  nd_labels.value 
-0002dc20: 3d20 222c 2022 2e6a 6f69 6e28 6c61 6265  = ", ".join(labe
-0002dc30: 6c73 290d 0a0d 0a20 2020 2020 2020 2020  ls)....         
-0002dc40: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
-0002dc50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002dc60: 2020 7374 796c 655f 7662 6f78 2e63 6869    style_vbox.chi
-0002dc70: 6c64 7265 6e20 3d20 5b0d 0a20 2020 2020  ldren = [..     
-0002dc80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002dc90: 2020 2077 6964 6765 7473 2e48 426f 7828     widgets.HBox(
-0002dca0: 5b73 7479 6c65 5f63 686b 2c20 636f 6d70  [style_chk, comp
-0002dcb0: 7574 655f 6c61 6265 6c5d 292c 0d0a 2020  ute_label]),..  
-0002dcc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002dcd0: 2020 2020 2020 7769 6467 6574 732e 4842        widgets.HB
-0002dce0: 6f78 285b 6669 656c 642c 2066 6965 6c64  ox([field, field
-0002dcf0: 5f76 616c 7565 735d 292c 0d0a 2020 2020  _values]),..    
-0002dd00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002dd10: 2020 2020 7769 6467 6574 732e 4842 6f78      widgets.HBox
-0002dd20: 285b 636c 6173 7365 732c 2063 6f6c 6f72  ([classes, color
-0002dd30: 6d61 705d 292c 0d0a 2020 2020 2020 2020  map]),..        
-0002dd40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002dd50: 7061 6c65 7474 652c 0d0a 2020 2020 2020  palette,..      
-0002dd60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002dd70: 2020 7769 6467 6574 732e 4842 6f78 280d    widgets.HBox(.
-0002dd80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002dd90: 2020 2020 2020 2020 2020 2020 205b 0d0a               [..
-0002dda0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ddb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ddc0: 6c65 6765 6e64 5f63 686b 2c0d 0a20 2020  legend_chk,..   
-0002ddd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002dde0: 2020 2020 2020 2020 2020 2020 2063 6f6c               col
-0002ddf0: 6f72 5f70 6963 6b65 722c 0d0a 2020 2020  or_picker,..    
-0002de00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002de10: 2020 2020 2020 2020 2020 2020 6164 645f              add_
-0002de20: 636f 6c6f 722c 0d0a 2020 2020 2020 2020  color,..        
+0002d630: 2020 2020 2020 2020 2020 6465 6c5f 636f            del_co
+0002d640: 6c6f 722c 0d0a 2020 2020 2020 2020 2020  lor,..          
+0002d650: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d660: 2020 2020 2020 7265 7365 745f 636f 6c6f        reset_colo
+0002d670: 722c 0d0a 2020 2020 2020 2020 2020 2020  r,..            
+0002d680: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d690: 5d0d 0a20 2020 2020 2020 2020 2020 2020  ]..             
+0002d6a0: 2020 2020 2020 2020 2020 2029 2c0d 0a20             ),.. 
+0002d6b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d6c0: 2020 205d 0d0a 2020 2020 2020 2020 2020     ]..          
+0002d6d0: 2020 2020 2020 2020 2020 636f 6d70 7574            comput
+0002d6e0: 655f 6c61 6265 6c2e 7661 6c75 6520 3d20  e_label.value = 
+0002d6f0: 2243 6f6d 7075 7469 6e67 202e 2e2e 220d  "Computing ...".
+0002d700: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0002d710: 2020 2020 2020 2066 6965 6c64 2e6f 7074         field.opt
+0002d720: 696f 6e73 203d 2028 0d0a 2020 2020 2020  ions = (..      
+0002d730: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d740: 2020 6565 2e46 6561 7475 7265 2865 655f    ee.Feature(ee_
+0002d750: 6f62 6a65 6374 2e66 6972 7374 2829 292e  object.first()).
+0002d760: 7072 6f70 6572 7479 4e61 6d65 7328 292e  propertyNames().
+0002d770: 6765 7449 6e66 6f28 290d 0a20 2020 2020  getInfo()..     
+0002d780: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+0002d790: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002d7a0: 2020 2020 2020 636f 6d70 7574 655f 6c61        compute_la
+0002d7b0: 6265 6c2e 7661 6c75 6520 3d20 2222 0d0a  bel.value = ""..
+0002d7c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d7d0: 2020 2020 636c 6173 7365 732e 7661 6c75      classes.valu
+0002d7e0: 6520 3d20 2241 6e79 220d 0a20 2020 2020  e = "Any"..     
+0002d7f0: 2020 2020 2020 2020 2020 2020 2020 206c                 l
+0002d800: 6567 656e 645f 6368 6b2e 7661 6c75 6520  egend_chk.value 
+0002d810: 3d20 4661 6c73 650d 0a0d 0a20 2020 2020  = False....     
+0002d820: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+0002d830: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002d840: 2020 2020 2020 6669 6c6c 5f63 6f6c 6f72        fill_color
+0002d850: 2e64 6973 6162 6c65 6420 3d20 4661 6c73  .disabled = Fals
+0002d860: 650d 0a20 2020 2020 2020 2020 2020 2020  e..             
+0002d870: 2020 2020 2020 2073 7479 6c65 5f76 626f         style_vbo
+0002d880: 782e 6368 696c 6472 656e 203d 205b 7769  x.children = [wi
+0002d890: 6467 6574 732e 4842 6f78 285b 7374 796c  dgets.HBox([styl
+0002d8a0: 655f 6368 6b2c 2063 6f6d 7075 7465 5f6c  e_chk, compute_l
+0002d8b0: 6162 656c 5d29 5d0d 0a20 2020 2020 2020  abel])]..       
+0002d8c0: 2020 2020 2020 2020 2020 2020 2063 6f6d               com
+0002d8d0: 7075 7465 5f6c 6162 656c 2e76 616c 7565  pute_label.value
+0002d8e0: 203d 2022 220d 0a20 2020 2020 2020 2020   = ""..         
+0002d8f0: 2020 2020 2020 2020 2020 2069 6620 280d             if (.
+0002d900: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002d910: 2020 2020 2020 2020 2073 656c 662e 636f           self.co
+0002d920: 6c6f 7262 6172 5f63 7472 6c20 6973 206e  lorbar_ctrl is n
+0002d930: 6f74 204e 6f6e 650d 0a20 2020 2020 2020  ot None..       
+0002d940: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d950: 2061 6e64 2073 656c 662e 636f 6c6f 7262   and self.colorb
+0002d960: 6172 5f63 7472 6c20 696e 2073 656c 662e  ar_ctrl in self.
+0002d970: 636f 6e74 726f 6c73 0d0a 2020 2020 2020  controls..      
+0002d980: 2020 2020 2020 2020 2020 2020 2020 293a                ):
+0002d990: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002d9a0: 2020 2020 2020 2020 2020 7365 6c66 2e72            self.r
+0002d9b0: 656d 6f76 655f 636f 6e74 726f 6c28 7365  emove_control(se
+0002d9c0: 6c66 2e63 6f6c 6f72 6261 725f 6374 726c  lf.colorbar_ctrl
+0002d9d0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+0002d9e0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0002d9f0: 636f 6c6f 7262 6172 5f63 7472 6c20 3d20  colorbar_ctrl = 
+0002da00: 4e6f 6e65 0d0a 2020 2020 2020 2020 2020  None..          
+0002da10: 2020 2020 2020 2020 2020 2020 2020 7365                se
+0002da20: 6c66 2e63 6f6c 6f72 6261 725f 7769 6467  lf.colorbar_widg
+0002da30: 6574 203d 204e 6f6e 650d 0a20 2020 2020  et = None..     
+0002da40: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0002da50: 206c 6567 656e 645f 6368 6b2e 7661 6c75   legend_chk.valu
+0002da60: 6520 3d20 4661 6c73 650d 0a0d 0a20 2020  e = False....   
+0002da70: 2020 2020 2020 2020 2073 7479 6c65 5f63           style_c
+0002da80: 686b 2e6f 6273 6572 7665 2873 7479 6c65  hk.observe(style
+0002da90: 5f63 686b 5f63 6861 6e67 6564 2c20 2276  _chk_changed, "v
+0002daa0: 616c 7565 2229 0d0a 0d0a 2020 2020 2020  alue")....      
+0002dab0: 2020 2020 2020 6465 6620 6c65 6765 6e64        def legend
+0002dac0: 5f63 686b 5f63 6861 6e67 6564 2863 6861  _chk_changed(cha
+0002dad0: 6e67 6529 3a0d 0a20 2020 2020 2020 2020  nge):..         
+0002dae0: 2020 2020 2020 2069 6620 6368 616e 6765         if change
+0002daf0: 5b22 6e65 7722 5d3a 0d0a 2020 2020 2020  ["new"]:..      
+0002db00: 2020 2020 2020 2020 2020 2020 2020 7374                st
+0002db10: 796c 655f 7662 6f78 2e63 6869 6c64 7265  yle_vbox.childre
+0002db20: 6e20 3d20 6c69 7374 2873 7479 6c65 5f76  n = list(style_v
+0002db30: 626f 782e 6368 696c 6472 656e 2920 2b20  box.children) + 
+0002db40: 5b0d 0a20 2020 2020 2020 2020 2020 2020  [..             
+0002db50: 2020 2020 2020 2020 2020 2077 6964 6765             widge
+0002db60: 7473 2e56 426f 7828 5b6c 6567 656e 645f  ts.VBox([legend_
+0002db70: 7469 746c 652c 206c 6567 656e 645f 6c61  title, legend_la
+0002db80: 6265 6c73 5d29 0d0a 2020 2020 2020 2020  bels])..        
+0002db90: 2020 2020 2020 2020 2020 2020 5d0d 0a0d              ]...
+0002dba0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002dbb0: 2020 2020 2069 6620 6c65 6e28 7061 6c65       if len(pale
+0002dbc0: 7474 652e 7661 6c75 6529 203e 2030 2061  tte.value) > 0 a
+0002dbd0: 6e64 2022 2c22 2069 6e20 7061 6c65 7474  nd "," in palett
+0002dbe0: 652e 7661 6c75 653a 0d0a 2020 2020 2020  e.value:..      
+0002dbf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dc00: 2020 6c61 6265 6c73 203d 205b 0d0a 2020    labels = [..  
+0002dc10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dc20: 2020 2020 2020 2020 2020 6622 436c 6173            f"Clas
+0002dc30: 7320 7b69 2b31 7d22 2066 6f72 2069 2069  s {i+1}" for i i
+0002dc40: 6e20 7261 6e67 6528 6c65 6e28 7061 6c65  n range(len(pale
+0002dc50: 7474 652e 7661 6c75 652e 7370 6c69 7428  tte.value.split(
+0002dc60: 222c 2229 2929 0d0a 2020 2020 2020 2020  ",")))..        
+0002dc70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dc80: 5d0d 0a20 2020 2020 2020 2020 2020 2020  ]..             
+0002dc90: 2020 2020 2020 2020 2020 206c 6567 656e             legen
+0002dca0: 645f 6c61 6265 6c73 2e76 616c 7565 203d  d_labels.value =
+0002dcb0: 2022 2c20 222e 6a6f 696e 286c 6162 656c   ", ".join(label
+0002dcc0: 7329 0d0a 0d0a 2020 2020 2020 2020 2020  s)....          
+0002dcd0: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
+0002dce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dcf0: 2073 7479 6c65 5f76 626f 782e 6368 696c   style_vbox.chil
+0002dd00: 6472 656e 203d 205b 0d0a 2020 2020 2020  dren = [..      
+0002dd10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dd20: 2020 7769 6467 6574 732e 4842 6f78 285b    widgets.HBox([
+0002dd30: 7374 796c 655f 6368 6b2c 2063 6f6d 7075  style_chk, compu
+0002dd40: 7465 5f6c 6162 656c 5d29 2c0d 0a20 2020  te_label]),..   
+0002dd50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dd60: 2020 2020 2077 6964 6765 7473 2e48 426f       widgets.HBo
+0002dd70: 7828 5b66 6965 6c64 2c20 6669 656c 645f  x([field, field_
+0002dd80: 7661 6c75 6573 5d29 2c0d 0a20 2020 2020  values]),..     
+0002dd90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dda0: 2020 2077 6964 6765 7473 2e48 426f 7828     widgets.HBox(
+0002ddb0: 5b63 6c61 7373 6573 2c20 636f 6c6f 726d  [classes, colorm
+0002ddc0: 6170 5d29 2c0d 0a20 2020 2020 2020 2020  ap]),..         
+0002ddd0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+0002dde0: 616c 6574 7465 2c0d 0a20 2020 2020 2020  alette,..       
+0002ddf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002de00: 2077 6964 6765 7473 2e48 426f 7828 0d0a   widgets.HBox(..
+0002de10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002de20: 2020 2020 2020 2020 2020 2020 5b0d 0a20              [.. 
 0002de30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002de40: 2020 2020 2020 2020 6465 6c5f 636f 6c6f          del_colo
-0002de50: 722c 0d0a 2020 2020 2020 2020 2020 2020  r,..            
+0002de40: 2020 2020 2020 2020 2020 2020 2020 206c                 l
+0002de50: 6567 656e 645f 6368 6b2c 0d0a 2020 2020  egend_chk,..    
 0002de60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002de70: 2020 2020 7265 7365 745f 636f 6c6f 722c      reset_color,
-0002de80: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002de90: 2020 2020 2020 2020 2020 2020 2020 5d0d                ].
-0002dea0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002deb0: 2020 2020 2020 2020 2029 2c0d 0a20 2020           ),..   
+0002de70: 2020 2020 2020 2020 2020 2020 636f 6c6f              colo
+0002de80: 725f 7069 636b 6572 2c0d 0a20 2020 2020  r_picker,..     
+0002de90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002dea0: 2020 2020 2020 2020 2020 2061 6464 5f63             add_c
+0002deb0: 6f6c 6f72 2c0d 0a20 2020 2020 2020 2020  olor,..         
 0002dec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ded0: 205d 0d0a 0d0a 2020 2020 2020 2020 2020   ]....          
-0002dee0: 2020 6c65 6765 6e64 5f63 686b 2e6f 6273    legend_chk.obs
-0002def0: 6572 7665 286c 6567 656e 645f 6368 6b5f  erve(legend_chk_
-0002df00: 6368 616e 6765 642c 2022 7661 6c75 6522  changed, "value"
-0002df10: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
-0002df20: 2064 6566 2066 6965 6c64 5f63 6861 6e67   def field_chang
-0002df30: 6564 2863 6861 6e67 6529 3a0d 0a0d 0a20  ed(change):.... 
-0002df40: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0002df50: 6620 6368 616e 6765 5b22 6e65 7722 5d3a  f change["new"]:
-0002df60: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002df70: 2020 2020 2020 636f 6d70 7574 655f 6c61        compute_la
-0002df80: 6265 6c2e 7661 6c75 6520 3d20 2243 6f6d  bel.value = "Com
-0002df90: 7075 7469 6e67 202e 2e2e 220d 0a20 2020  puting ..."..   
-0002dfa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002dfb0: 206f 7074 696f 6e73 203d 2065 655f 6f62   options = ee_ob
-0002dfc0: 6a65 6374 2e61 6767 7265 6761 7465 5f61  ject.aggregate_a
-0002dfd0: 7272 6179 2866 6965 6c64 2e76 616c 7565  rray(field.value
-0002dfe0: 292e 6765 7449 6e66 6f28 290d 0a20 2020  ).getInfo()..   
-0002dff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e000: 2069 6620 6f70 7469 6f6e 7320 6973 206e   if options is n
-0002e010: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
-0002e020: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e030: 2020 6f70 7469 6f6e 7320 3d20 6c69 7374    options = list
-0002e040: 2873 6574 286f 7074 696f 6e73 2929 0d0a  (set(options))..
-0002e050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e060: 2020 2020 2020 2020 6f70 7469 6f6e 732e          options.
-0002e070: 736f 7274 2829 0d0a 0d0a 2020 2020 2020  sort()....      
-0002e080: 2020 2020 2020 2020 2020 2020 2020 6669                fi
-0002e090: 656c 645f 7661 6c75 6573 2e6f 7074 696f  eld_values.optio
-0002e0a0: 6e73 203d 206f 7074 696f 6e73 0d0a 2020  ns = options..  
+0002ded0: 2020 2020 2020 2064 656c 5f63 6f6c 6f72         del_color
+0002dee0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+0002def0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002df00: 2020 2072 6573 6574 5f63 6f6c 6f72 2c0d     reset_color,.
+0002df10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002df20: 2020 2020 2020 2020 2020 2020 205d 0d0a               ]..
+0002df30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002df40: 2020 2020 2020 2020 292c 0d0a 2020 2020          ),..    
+0002df50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002df60: 5d0d 0a0d 0a20 2020 2020 2020 2020 2020  ]....           
+0002df70: 206c 6567 656e 645f 6368 6b2e 6f62 7365   legend_chk.obse
+0002df80: 7276 6528 6c65 6765 6e64 5f63 686b 5f63  rve(legend_chk_c
+0002df90: 6861 6e67 6564 2c20 2276 616c 7565 2229  hanged, "value")
+0002dfa0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+0002dfb0: 6465 6620 6669 656c 645f 6368 616e 6765  def field_change
+0002dfc0: 6428 6368 616e 6765 293a 0d0a 0d0a 2020  d(change):....  
+0002dfd0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0002dfe0: 2063 6861 6e67 655b 226e 6577 225d 3a0d   change["new"]:.
+0002dff0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002e000: 2020 2020 2063 6f6d 7075 7465 5f6c 6162       compute_lab
+0002e010: 656c 2e76 616c 7565 203d 2022 436f 6d70  el.value = "Comp
+0002e020: 7574 696e 6720 2e2e 2e22 0d0a 2020 2020  uting ..."..    
+0002e030: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e040: 6f70 7469 6f6e 7320 3d20 6565 5f6f 626a  options = ee_obj
+0002e050: 6563 742e 6167 6772 6567 6174 655f 6172  ect.aggregate_ar
+0002e060: 7261 7928 6669 656c 642e 7661 6c75 6529  ray(field.value)
+0002e070: 2e67 6574 496e 666f 2829 0d0a 2020 2020  .getInfo()..    
+0002e080: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e090: 6966 206f 7074 696f 6e73 2069 7320 6e6f  if options is no
+0002e0a0: 7420 4e6f 6e65 3a0d 0a20 2020 2020 2020  t None:..       
 0002e0b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e0c0: 2020 636f 6d70 7574 655f 6c61 6265 6c2e    compute_label.
-0002e0d0: 7661 6c75 6520 3d20 2222 0d0a 0d0a 2020  value = ""....  
-0002e0e0: 2020 2020 2020 2020 2020 6669 656c 642e            field.
-0002e0f0: 6f62 7365 7276 6528 6669 656c 645f 6368  observe(field_ch
-0002e100: 616e 6765 642c 2022 7661 6c75 6522 290d  anged, "value").
-0002e110: 0a0d 0a20 2020 2020 2020 2020 2020 2064  ...            d
-0002e120: 6566 2067 6574 5f76 6973 5f70 6172 616d  ef get_vis_param
-0002e130: 7328 293a 0d0a 0d0a 2020 2020 2020 2020  s():....        
-0002e140: 2020 2020 2020 2020 7669 7320 3d20 7b7d          vis = {}
-0002e150: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002e160: 2020 7669 735b 2263 6f6c 6f72 225d 203d    vis["color"] =
-0002e170: 2063 6f6c 6f72 2e76 616c 7565 5b31 3a5d   color.value[1:]
-0002e180: 202b 2073 7472 280d 0a20 2020 2020 2020   + str(..       
-0002e190: 2020 2020 2020 2020 2020 2020 2068 6578               hex
-0002e1a0: 2869 6e74 2863 6f6c 6f72 5f6f 7061 6369  (int(color_opaci
-0002e1b0: 7479 2e76 616c 7565 202a 2032 3535 2929  ty.value * 255))
-0002e1c0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002e1d0: 2020 295b 323a 5d2e 7a66 696c 6c28 3229    )[2:].zfill(2)
-0002e1e0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002e1f0: 2020 6966 2067 656f 6d65 7472 795f 7479    if geometry_ty
-0002e200: 7065 2865 655f 6f62 6a65 6374 2920 696e  pe(ee_object) in
-0002e210: 205b 2250 6f69 6e74 222c 2022 4d75 6c74   ["Point", "Mult
-0002e220: 6950 6f69 6e74 225d 3a0d 0a20 2020 2020  iPoint"]:..     
-0002e230: 2020 2020 2020 2020 2020 2020 2020 2076                 v
-0002e240: 6973 5b22 706f 696e 7453 697a 6522 5d20  is["pointSize"] 
-0002e250: 3d20 706f 696e 745f 7369 7a65 2e76 616c  = point_size.val
-0002e260: 7565 0d0a 2020 2020 2020 2020 2020 2020  ue..            
-0002e270: 2020 2020 2020 2020 7669 735b 2270 6f69          vis["poi
-0002e280: 6e74 5368 6170 6522 5d20 3d20 706f 696e  ntShape"] = poin
-0002e290: 745f 7368 6170 652e 7661 6c75 650d 0a20  t_shape.value.. 
-0002e2a0: 2020 2020 2020 2020 2020 2020 2020 2076                 v
-0002e2b0: 6973 5b22 7769 6474 6822 5d20 3d20 6c69  is["width"] = li
-0002e2c0: 6e65 5f77 6964 7468 2e76 616c 7565 0d0a  ne_width.value..
-0002e2d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e2e0: 7669 735b 226c 696e 6554 7970 6522 5d20  vis["lineType"] 
-0002e2f0: 3d20 6c69 6e65 5f74 7970 652e 7661 6c75  = line_type.valu
-0002e300: 650d 0a20 2020 2020 2020 2020 2020 2020  e..             
-0002e310: 2020 2076 6973 5b22 6669 6c6c 436f 6c6f     vis["fillColo
-0002e320: 7222 5d20 3d20 6669 6c6c 5f63 6f6c 6f72  r"] = fill_color
-0002e330: 2e76 616c 7565 5b31 3a5d 202b 2073 7472  .value[1:] + str
-0002e340: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
-0002e350: 2020 2020 2020 2068 6578 2869 6e74 2866         hex(int(f
-0002e360: 696c 6c5f 636f 6c6f 725f 6f70 6163 6974  ill_color_opacit
-0002e370: 792e 7661 6c75 6520 2a20 3235 3529 290d  y.value * 255)).
-0002e380: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002e390: 2029 5b32 3a5d 2e7a 6669 6c6c 2832 290d   )[2:].zfill(2).
-0002e3a0: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0002e3b0: 2020 2072 6574 7572 6e20 7669 730d 0a0d     return vis...
-0002e3c0: 0a20 2020 2020 2020 2020 2020 2064 6566  .            def
-0002e3d0: 2069 6d70 6f72 745f 6274 6e5f 636c 6963   import_btn_clic
-0002e3e0: 6b65 6428 6229 3a0d 0a0d 0a20 2020 2020  ked(b):....     
-0002e3f0: 2020 2020 2020 2020 2020 2076 6973 203d             vis =
-0002e400: 2067 6574 5f76 6973 5f70 6172 616d 7328   get_vis_params(
-0002e410: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-0002e420: 2020 2063 7265 6174 655f 636f 6465 5f63     create_code_c
-0002e430: 656c 6c28 6622 7669 735f 7061 7261 6d73  ell(f"vis_params
-0002e440: 203d 207b 7374 7228 7669 7329 7d22 290d   = {str(vis)}").
-0002e450: 0a0d 0a20 2020 2020 2020 2020 2020 2064  ...            d
-0002e460: 6566 2061 7070 6c79 5f62 746e 5f63 6c69  ef apply_btn_cli
-0002e470: 636b 6564 2862 293a 0d0a 0d0a 2020 2020  cked(b):....    
-0002e480: 2020 2020 2020 2020 2020 2020 636f 6d70              comp
-0002e490: 7574 655f 6c61 6265 6c2e 7661 6c75 6520  ute_label.value 
-0002e4a0: 3d20 2243 6f6d 7075 7469 6e67 202e 2e2e  = "Computing ...
-0002e4b0: 220d 0a0d 0a20 2020 2020 2020 2020 2020  "....           
-0002e4c0: 2020 2020 2069 6620 6e65 775f 6c61 7965       if new_laye
-0002e4d0: 725f 6e61 6d65 2e76 616c 7565 2069 6e20  r_name.value in 
-0002e4e0: 7365 6c66 2e65 655f 6c61 7965 725f 6e61  self.ee_layer_na
-0002e4f0: 6d65 733a 0d0a 2020 2020 2020 2020 2020  mes:..          
-0002e500: 2020 2020 2020 2020 2020 6f6c 645f 6c61            old_la
-0002e510: 7965 7220 3d20 6e65 775f 6c61 7965 725f  yer = new_layer_
-0002e520: 6e61 6d65 2e76 616c 7565 0d0a 0d0a 2020  name.value....  
-0002e530: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e540: 2020 6966 2022 6c65 6765 6e64 2220 696e    if "legend" in
-0002e550: 2073 656c 662e 6565 5f6c 6179 6572 5f64   self.ee_layer_d
-0002e560: 6963 745b 6f6c 645f 6c61 7965 725d 2e6b  ict[old_layer].k
-0002e570: 6579 7328 293a 0d0a 2020 2020 2020 2020  eys():..        
-0002e580: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e590: 6c65 6765 6e64 203d 2073 656c 662e 6565  legend = self.ee
-0002e5a0: 5f6c 6179 6572 5f64 6963 745b 6f6c 645f  _layer_dict[old_
-0002e5b0: 6c61 7965 725d 5b22 6c65 6765 6e64 225d  layer]["legend"]
-0002e5c0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002e5d0: 2020 2020 2020 2020 2020 6966 206c 6567            if leg
-0002e5e0: 656e 6420 696e 2073 656c 662e 636f 6e74  end in self.cont
-0002e5f0: 726f 6c73 3a0d 0a20 2020 2020 2020 2020  rols:..         
-0002e600: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e610: 2020 2073 656c 662e 7265 6d6f 7665 5f63     self.remove_c
-0002e620: 6f6e 7472 6f6c 286c 6567 656e 6429 0d0a  ontrol(legend)..
-0002e630: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e640: 2020 2020 2020 2020 6c65 6765 6e64 2e63          legend.c
-0002e650: 6c6f 7365 2829 0d0a 2020 2020 2020 2020  lose()..        
-0002e660: 2020 2020 2020 2020 2020 2020 6966 2022              if "
-0002e670: 636f 6c6f 7262 6172 2220 696e 2073 656c  colorbar" in sel
-0002e680: 662e 6565 5f6c 6179 6572 5f64 6963 745b  f.ee_layer_dict[
-0002e690: 6f6c 645f 6c61 7965 725d 2e6b 6579 7328  old_layer].keys(
-0002e6a0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-0002e6b0: 2020 2020 2020 2020 2020 2020 636f 6c6f              colo
-0002e6c0: 7262 6172 203d 2073 656c 662e 6565 5f6c  rbar = self.ee_l
-0002e6d0: 6179 6572 5f64 6963 745b 6f6c 645f 6c61  ayer_dict[old_la
-0002e6e0: 7965 725d 5b22 636f 6c6f 7262 6172 225d  yer]["colorbar"]
-0002e6f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002e700: 2020 2020 2020 2020 2020 6966 2063 6f6c            if col
-0002e710: 6f72 6261 7220 696e 2073 656c 662e 636f  orbar in self.co
-0002e720: 6e74 726f 6c73 3a0d 0a20 2020 2020 2020  ntrols:..       
-0002e730: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e740: 2020 2020 2073 656c 662e 7265 6d6f 7665       self.remove
-0002e750: 5f63 6f6e 7472 6f6c 2863 6f6c 6f72 6261  _control(colorba
-0002e760: 7229 0d0a 2020 2020 2020 2020 2020 2020  r)..            
-0002e770: 2020 2020 2020 2020 2020 2020 636f 6c6f              colo
-0002e780: 7262 6172 2e63 6c6f 7365 2829 0d0a 0d0a  rbar.close()....
-0002e790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e7a0: 6966 206e 6f74 2073 7479 6c65 5f63 686b  if not style_chk
-0002e7b0: 2e76 616c 7565 3a0d 0a20 2020 2020 2020  .value:..       
-0002e7c0: 2020 2020 2020 2020 2020 2020 2076 6973               vis
-0002e7d0: 203d 2067 6574 5f76 6973 5f70 6172 616d   = get_vis_param
-0002e7e0: 7328 290d 0a20 2020 2020 2020 2020 2020  s()..           
-0002e7f0: 2020 2020 2020 2020 2073 656c 662e 6164           self.ad
-0002e800: 644c 6179 6572 2865 655f 6f62 6a65 6374  dLayer(ee_object
-0002e810: 2e73 7479 6c65 282a 2a76 6973 292c 207b  .style(**vis), {
-0002e820: 7d2c 206e 6577 5f6c 6179 6572 5f6e 616d  }, new_layer_nam
-0002e830: 652e 7661 6c75 6529 0d0a 2020 2020 2020  e.value)..      
-0002e840: 2020 2020 2020 2020 2020 2020 2020 6565                ee
-0002e850: 5f6c 6179 6572 2e76 6973 6962 6c65 203d  _layer.visible =
-0002e860: 2046 616c 7365 0d0a 0d0a 2020 2020 2020   False....      
-0002e870: 2020 2020 2020 2020 2020 656c 6966 2028            elif (
-0002e880: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002e890: 2020 2020 2020 7374 796c 655f 6368 6b2e        style_chk.
-0002e8a0: 7661 6c75 6520 616e 6420 6c65 6e28 7061  value and len(pa
-0002e8b0: 6c65 7474 652e 7661 6c75 6529 203e 2030  lette.value) > 0
-0002e8c0: 2061 6e64 2022 2c22 2069 6e20 7061 6c65   and "," in pale
-0002e8d0: 7474 652e 7661 6c75 650d 0a20 2020 2020  tte.value..     
-0002e8e0: 2020 2020 2020 2020 2020 2029 3a0d 0a20             ):.. 
-0002e8f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e900: 2020 2063 6f6c 6f72 7320 3d20 6565 2e4c     colors = ee.L
-0002e910: 6973 7428 0d0a 2020 2020 2020 2020 2020  ist(..          
-0002e920: 2020 2020 2020 2020 2020 2020 2020 5b0d                [.
-0002e930: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002e940: 2020 2020 2020 2020 2020 2020 2063 6f6c               col
-0002e950: 6f72 2e73 7472 6970 2829 0d0a 2020 2020  or.strip()..    
-0002e960: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e970: 2020 2020 2020 2020 2b20 7374 7228 6865          + str(he
-0002e980: 7828 696e 7428 6669 6c6c 5f63 6f6c 6f72  x(int(fill_color
-0002e990: 5f6f 7061 6369 7479 2e76 616c 7565 202a  _opacity.value *
-0002e9a0: 2032 3535 2929 295b 323a 5d2e 7a66 696c   255)))[2:].zfil
-0002e9b0: 6c28 3229 0d0a 2020 2020 2020 2020 2020  l(2)..          
+0002e0c0: 206f 7074 696f 6e73 203d 206c 6973 7428   options = list(
+0002e0d0: 7365 7428 6f70 7469 6f6e 7329 290d 0a20  set(options)).. 
+0002e0e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e0f0: 2020 2020 2020 206f 7074 696f 6e73 2e73         options.s
+0002e100: 6f72 7428 290d 0a0d 0a20 2020 2020 2020  ort()....       
+0002e110: 2020 2020 2020 2020 2020 2020 2066 6965               fie
+0002e120: 6c64 5f76 616c 7565 732e 6f70 7469 6f6e  ld_values.option
+0002e130: 7320 3d20 6f70 7469 6f6e 730d 0a20 2020  s = options..   
+0002e140: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e150: 2063 6f6d 7075 7465 5f6c 6162 656c 2e76   compute_label.v
+0002e160: 616c 7565 203d 2022 220d 0a0d 0a20 2020  alue = ""....   
+0002e170: 2020 2020 2020 2020 2066 6965 6c64 2e6f           field.o
+0002e180: 6273 6572 7665 2866 6965 6c64 5f63 6861  bserve(field_cha
+0002e190: 6e67 6564 2c20 2276 616c 7565 2229 0d0a  nged, "value")..
+0002e1a0: 0d0a 2020 2020 2020 2020 2020 2020 6465  ..            de
+0002e1b0: 6620 6765 745f 7669 735f 7061 7261 6d73  f get_vis_params
+0002e1c0: 2829 3a0d 0a0d 0a20 2020 2020 2020 2020  ():....         
+0002e1d0: 2020 2020 2020 2076 6973 203d 207b 7d0d         vis = {}.
+0002e1e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002e1f0: 2076 6973 5b22 636f 6c6f 7222 5d20 3d20   vis["color"] = 
+0002e200: 636f 6c6f 722e 7661 6c75 655b 313a 5d20  color.value[1:] 
+0002e210: 2b20 7374 7228 0d0a 2020 2020 2020 2020  + str(..        
+0002e220: 2020 2020 2020 2020 2020 2020 6865 7828              hex(
+0002e230: 696e 7428 636f 6c6f 725f 6f70 6163 6974  int(color_opacit
+0002e240: 792e 7661 6c75 6520 2a20 3235 3529 290d  y.value * 255)).
+0002e250: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002e260: 2029 5b32 3a5d 2e7a 6669 6c6c 2832 290d   )[2:].zfill(2).
+0002e270: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002e280: 2069 6620 6765 6f6d 6574 7279 5f74 7970   if geometry_typ
+0002e290: 6528 6565 5f6f 626a 6563 7429 2069 6e20  e(ee_object) in 
+0002e2a0: 5b22 506f 696e 7422 2c20 224d 756c 7469  ["Point", "Multi
+0002e2b0: 506f 696e 7422 5d3a 0d0a 2020 2020 2020  Point"]:..      
+0002e2c0: 2020 2020 2020 2020 2020 2020 2020 7669                vi
+0002e2d0: 735b 2270 6f69 6e74 5369 7a65 225d 203d  s["pointSize"] =
+0002e2e0: 2070 6f69 6e74 5f73 697a 652e 7661 6c75   point_size.valu
+0002e2f0: 650d 0a20 2020 2020 2020 2020 2020 2020  e..             
+0002e300: 2020 2020 2020 2076 6973 5b22 706f 696e         vis["poin
+0002e310: 7453 6861 7065 225d 203d 2070 6f69 6e74  tShape"] = point
+0002e320: 5f73 6861 7065 2e76 616c 7565 0d0a 2020  _shape.value..  
+0002e330: 2020 2020 2020 2020 2020 2020 2020 7669                vi
+0002e340: 735b 2277 6964 7468 225d 203d 206c 696e  s["width"] = lin
+0002e350: 655f 7769 6474 682e 7661 6c75 650d 0a20  e_width.value.. 
+0002e360: 2020 2020 2020 2020 2020 2020 2020 2076                 v
+0002e370: 6973 5b22 6c69 6e65 5479 7065 225d 203d  is["lineType"] =
+0002e380: 206c 696e 655f 7479 7065 2e76 616c 7565   line_type.value
+0002e390: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002e3a0: 2020 7669 735b 2266 696c 6c43 6f6c 6f72    vis["fillColor
+0002e3b0: 225d 203d 2066 696c 6c5f 636f 6c6f 722e  "] = fill_color.
+0002e3c0: 7661 6c75 655b 313a 5d20 2b20 7374 7228  value[1:] + str(
+0002e3d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002e3e0: 2020 2020 2020 6865 7828 696e 7428 6669        hex(int(fi
+0002e3f0: 6c6c 5f63 6f6c 6f72 5f6f 7061 6369 7479  ll_color_opacity
+0002e400: 2e76 616c 7565 202a 2032 3535 2929 0d0a  .value * 255))..
+0002e410: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e420: 295b 323a 5d2e 7a66 696c 6c28 3229 0d0a  )[2:].zfill(2)..
+0002e430: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002e440: 2020 7265 7475 726e 2076 6973 0d0a 0d0a    return vis....
+0002e450: 2020 2020 2020 2020 2020 2020 6465 6620              def 
+0002e460: 696d 706f 7274 5f62 746e 5f63 6c69 636b  import_btn_click
+0002e470: 6564 2862 293a 0d0a 0d0a 2020 2020 2020  ed(b):....      
+0002e480: 2020 2020 2020 2020 2020 7669 7320 3d20            vis = 
+0002e490: 6765 745f 7669 735f 7061 7261 6d73 2829  get_vis_params()
+0002e4a0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002e4b0: 2020 6372 6561 7465 5f63 6f64 655f 6365    create_code_ce
+0002e4c0: 6c6c 2866 2276 6973 5f70 6172 616d 7320  ll(f"vis_params 
+0002e4d0: 3d20 7b73 7472 2876 6973 297d 2229 0d0a  = {str(vis)}")..
+0002e4e0: 0d0a 2020 2020 2020 2020 2020 2020 6465  ..            de
+0002e4f0: 6620 6170 706c 795f 6274 6e5f 636c 6963  f apply_btn_clic
+0002e500: 6b65 6428 6229 3a0d 0a0d 0a20 2020 2020  ked(b):....     
+0002e510: 2020 2020 2020 2020 2020 2063 6f6d 7075             compu
+0002e520: 7465 5f6c 6162 656c 2e76 616c 7565 203d  te_label.value =
+0002e530: 2022 436f 6d70 7574 696e 6720 2e2e 2e22   "Computing ..."
+0002e540: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+0002e550: 2020 2020 6966 206e 6577 5f6c 6179 6572      if new_layer
+0002e560: 5f6e 616d 652e 7661 6c75 6520 696e 2073  _name.value in s
+0002e570: 656c 662e 6565 5f6c 6179 6572 5f6e 616d  elf.ee_layer_nam
+0002e580: 6573 3a0d 0a20 2020 2020 2020 2020 2020  es:..           
+0002e590: 2020 2020 2020 2020 206f 6c64 5f6c 6179           old_lay
+0002e5a0: 6572 203d 206e 6577 5f6c 6179 6572 5f6e  er = new_layer_n
+0002e5b0: 616d 652e 7661 6c75 650d 0a0d 0a20 2020  ame.value....   
+0002e5c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e5d0: 2069 6620 226c 6567 656e 6422 2069 6e20   if "legend" in 
+0002e5e0: 7365 6c66 2e65 655f 6c61 7965 725f 6469  self.ee_layer_di
+0002e5f0: 6374 5b6f 6c64 5f6c 6179 6572 5d2e 6b65  ct[old_layer].ke
+0002e600: 7973 2829 3a0d 0a20 2020 2020 2020 2020  ys():..         
+0002e610: 2020 2020 2020 2020 2020 2020 2020 206c                 l
+0002e620: 6567 656e 6420 3d20 7365 6c66 2e65 655f  egend = self.ee_
+0002e630: 6c61 7965 725f 6469 6374 5b6f 6c64 5f6c  layer_dict[old_l
+0002e640: 6179 6572 5d5b 226c 6567 656e 6422 5d0d  ayer]["legend"].
+0002e650: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002e660: 2020 2020 2020 2020 2069 6620 6c65 6765           if lege
+0002e670: 6e64 2069 6e20 7365 6c66 2e63 6f6e 7472  nd in self.contr
+0002e680: 6f6c 733a 0d0a 2020 2020 2020 2020 2020  ols:..          
+0002e690: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e6a0: 2020 7365 6c66 2e72 656d 6f76 655f 636f    self.remove_co
+0002e6b0: 6e74 726f 6c28 6c65 6765 6e64 290d 0a20  ntrol(legend).. 
+0002e6c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e6d0: 2020 2020 2020 206c 6567 656e 642e 636c         legend.cl
+0002e6e0: 6f73 6528 290d 0a20 2020 2020 2020 2020  ose()..         
+0002e6f0: 2020 2020 2020 2020 2020 2069 6620 2263             if "c
+0002e700: 6f6c 6f72 6261 7222 2069 6e20 7365 6c66  olorbar" in self
+0002e710: 2e65 655f 6c61 7965 725f 6469 6374 5b6f  .ee_layer_dict[o
+0002e720: 6c64 5f6c 6179 6572 5d2e 6b65 7973 2829  ld_layer].keys()
+0002e730: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0002e740: 2020 2020 2020 2020 2020 2063 6f6c 6f72             color
+0002e750: 6261 7220 3d20 7365 6c66 2e65 655f 6c61  bar = self.ee_la
+0002e760: 7965 725f 6469 6374 5b6f 6c64 5f6c 6179  yer_dict[old_lay
+0002e770: 6572 5d5b 2263 6f6c 6f72 6261 7222 5d0d  er]["colorbar"].
+0002e780: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002e790: 2020 2020 2020 2020 2069 6620 636f 6c6f           if colo
+0002e7a0: 7262 6172 2069 6e20 7365 6c66 2e63 6f6e  rbar in self.con
+0002e7b0: 7472 6f6c 733a 0d0a 2020 2020 2020 2020  trols:..        
+0002e7c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e7d0: 2020 2020 7365 6c66 2e72 656d 6f76 655f      self.remove_
+0002e7e0: 636f 6e74 726f 6c28 636f 6c6f 7262 6172  control(colorbar
+0002e7f0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+0002e800: 2020 2020 2020 2020 2020 2063 6f6c 6f72             color
+0002e810: 6261 722e 636c 6f73 6528 290d 0a0d 0a20  bar.close().... 
+0002e820: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0002e830: 6620 6e6f 7420 7374 796c 655f 6368 6b2e  f not style_chk.
+0002e840: 7661 6c75 653a 0d0a 2020 2020 2020 2020  value:..        
+0002e850: 2020 2020 2020 2020 2020 2020 7669 7320              vis 
+0002e860: 3d20 6765 745f 7669 735f 7061 7261 6d73  = get_vis_params
+0002e870: 2829 0d0a 2020 2020 2020 2020 2020 2020  ()..            
+0002e880: 2020 2020 2020 2020 7365 6c66 2e61 6464          self.add
+0002e890: 4c61 7965 7228 6565 5f6f 626a 6563 742e  Layer(ee_object.
+0002e8a0: 7374 796c 6528 2a2a 7669 7329 2c20 7b7d  style(**vis), {}
+0002e8b0: 2c20 6e65 775f 6c61 7965 725f 6e61 6d65  , new_layer_name
+0002e8c0: 2e76 616c 7565 290d 0a20 2020 2020 2020  .value)..       
+0002e8d0: 2020 2020 2020 2020 2020 2020 2065 655f               ee_
+0002e8e0: 6c61 7965 722e 7669 7369 626c 6520 3d20  layer.visible = 
+0002e8f0: 4661 6c73 650d 0a0d 0a20 2020 2020 2020  False....       
+0002e900: 2020 2020 2020 2020 2065 6c69 6620 280d           elif (.
+0002e910: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002e920: 2020 2020 2073 7479 6c65 5f63 686b 2e76       style_chk.v
+0002e930: 616c 7565 2061 6e64 206c 656e 2870 616c  alue and len(pal
+0002e940: 6574 7465 2e76 616c 7565 2920 3e20 3020  ette.value) > 0 
+0002e950: 616e 6420 222c 2220 696e 2070 616c 6574  and "," in palet
+0002e960: 7465 2e76 616c 7565 0d0a 2020 2020 2020  te.value..      
+0002e970: 2020 2020 2020 2020 2020 293a 0d0a 2020            ):..  
+0002e980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e990: 2020 636f 6c6f 7273 203d 2065 652e 4c69    colors = ee.Li
+0002e9a0: 7374 280d 0a20 2020 2020 2020 2020 2020  st(..           
+0002e9b0: 2020 2020 2020 2020 2020 2020 205b 0d0a               [..
 0002e9c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e9d0: 2020 666f 7220 636f 6c6f 7220 696e 2070    for color in p
-0002e9e0: 616c 6574 7465 2e76 616c 7565 2e73 706c  alette.value.spl
-0002e9f0: 6974 2822 2c22 290d 0a20 2020 2020 2020  it(",")..       
-0002ea00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ea10: 205d 0d0a 2020 2020 2020 2020 2020 2020   ]..            
-0002ea20: 2020 2020 2020 2020 290d 0a20 2020 2020          )..     
-0002ea30: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-0002ea40: 7272 203d 2065 655f 6f62 6a65 6374 2e61  rr = ee_object.a
-0002ea50: 6767 7265 6761 7465 5f61 7272 6179 2866  ggregate_array(f
-0002ea60: 6965 6c64 2e76 616c 7565 292e 6469 7374  ield.value).dist
-0002ea70: 696e 6374 2829 2e73 6f72 7428 290d 0a20  inct().sort().. 
-0002ea80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ea90: 2020 2066 6320 3d20 6565 5f6f 626a 6563     fc = ee_objec
-0002eaa0: 742e 6d61 7028 0d0a 2020 2020 2020 2020  t.map(..        
-0002eab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002eac0: 6c61 6d62 6461 2066 3a20 662e 7365 7428  lambda f: f.set(
-0002ead0: 7b22 7374 796c 6549 6e64 6578 223a 2061  {"styleIndex": a
-0002eae0: 7272 2e69 6e64 6578 4f66 2866 2e67 6574  rr.indexOf(f.get
-0002eaf0: 2866 6965 6c64 2e76 616c 7565 2929 7d29  (field.value))})
-0002eb00: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002eb10: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
-0002eb20: 2020 2020 2020 2020 2020 2020 2073 7465               ste
-0002eb30: 7020 3d20 6172 722e 7369 7a65 2829 2e64  p = arr.size().d
-0002eb40: 6976 6964 6528 636f 6c6f 7273 2e73 697a  ivide(colors.siz
-0002eb50: 6528 2929 2e63 6569 6c28 290d 0a20 2020  e()).ceil()..   
-0002eb60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002eb70: 2066 6320 3d20 6663 2e6d 6170 280d 0a20   fc = fc.map(.. 
-0002eb80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002eb90: 2020 2020 2020 206c 616d 6264 6120 663a         lambda f:
-0002eba0: 2066 2e73 6574 280d 0a20 2020 2020 2020   f.set(..       
-0002ebb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ebc0: 2020 2020 207b 0d0a 2020 2020 2020 2020       {..        
-0002ebd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ebe0: 2020 2020 2020 2020 2273 7479 6c65 223a          "style":
-0002ebf0: 207b 0d0a 2020 2020 2020 2020 2020 2020   {..            
-0002ec00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ec10: 2020 2020 2020 2020 2263 6f6c 6f72 223a          "color":
-0002ec20: 2063 6f6c 6f72 2e76 616c 7565 5b31 3a5d   color.value[1:]
-0002ec30: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002e9d0: 2020 2020 2020 2020 2020 2020 636f 6c6f              colo
+0002e9e0: 722e 7374 7269 7028 290d 0a20 2020 2020  r.strip()..     
+0002e9f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ea00: 2020 2020 2020 202b 2073 7472 2868 6578         + str(hex
+0002ea10: 2869 6e74 2866 696c 6c5f 636f 6c6f 725f  (int(fill_color_
+0002ea20: 6f70 6163 6974 792e 7661 6c75 6520 2a20  opacity.value * 
+0002ea30: 3235 3529 2929 5b32 3a5d 2e7a 6669 6c6c  255)))[2:].zfill
+0002ea40: 2832 290d 0a20 2020 2020 2020 2020 2020  (2)..           
+0002ea50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ea60: 2066 6f72 2063 6f6c 6f72 2069 6e20 7061   for color in pa
+0002ea70: 6c65 7474 652e 7661 6c75 652e 7370 6c69  lette.value.spli
+0002ea80: 7428 222c 2229 0d0a 2020 2020 2020 2020  t(",")..        
+0002ea90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002eaa0: 5d0d 0a20 2020 2020 2020 2020 2020 2020  ]..             
+0002eab0: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
+0002eac0: 2020 2020 2020 2020 2020 2020 2020 6172                ar
+0002ead0: 7220 3d20 6565 5f6f 626a 6563 742e 6167  r = ee_object.ag
+0002eae0: 6772 6567 6174 655f 6172 7261 7928 6669  gregate_array(fi
+0002eaf0: 656c 642e 7661 6c75 6529 2e64 6973 7469  eld.value).disti
+0002eb00: 6e63 7428 292e 736f 7274 2829 0d0a 2020  nct().sort()..  
+0002eb10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002eb20: 2020 6663 203d 2065 655f 6f62 6a65 6374    fc = ee_object
+0002eb30: 2e6d 6170 280d 0a20 2020 2020 2020 2020  .map(..         
+0002eb40: 2020 2020 2020 2020 2020 2020 2020 206c                 l
+0002eb50: 616d 6264 6120 663a 2066 2e73 6574 287b  ambda f: f.set({
+0002eb60: 2273 7479 6c65 496e 6465 7822 3a20 6172  "styleIndex": ar
+0002eb70: 722e 696e 6465 784f 6628 662e 6765 7428  r.indexOf(f.get(
+0002eb80: 6669 656c 642e 7661 6c75 6529 297d 290d  field.value))}).
+0002eb90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002eba0: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
+0002ebb0: 2020 2020 2020 2020 2020 2020 7374 6570              step
+0002ebc0: 203d 2061 7272 2e73 697a 6528 292e 6469   = arr.size().di
+0002ebd0: 7669 6465 2863 6f6c 6f72 732e 7369 7a65  vide(colors.size
+0002ebe0: 2829 292e 6365 696c 2829 0d0a 2020 2020  ()).ceil()..    
+0002ebf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ec00: 6663 203d 2066 632e 6d61 7028 0d0a 2020  fc = fc.map(..  
+0002ec10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ec20: 2020 2020 2020 6c61 6d62 6461 2066 3a20        lambda f: 
+0002ec30: 662e 7365 7428 0d0a 2020 2020 2020 2020  f.set(..        
 0002ec40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ec50: 2020 2020 2020 2b20 7374 7228 6865 7828        + str(hex(
-0002ec60: 696e 7428 636f 6c6f 725f 6f70 6163 6974  int(color_opacit
-0002ec70: 792e 7661 6c75 6520 2a20 3235 3529 2929  y.value * 255)))
-0002ec80: 5b0d 0a20 2020 2020 2020 2020 2020 2020  [..             
+0002ec50: 2020 2020 7b0d 0a20 2020 2020 2020 2020      {..         
+0002ec60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ec70: 2020 2020 2020 2022 7374 796c 6522 3a20         "style": 
+0002ec80: 7b0d 0a20 2020 2020 2020 2020 2020 2020  {..             
 0002ec90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002eca0: 2020 2020 2020 2020 2020 2032 3a0d 0a20             2:.. 
-0002ecb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ecc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ecd0: 2020 205d 2e7a 6669 6c6c 2832 292c 0d0a     ].zfill(2),..
-0002ece0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ecf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ed00: 2020 2020 2270 6f69 6e74 5369 7a65 223a      "pointSize":
-0002ed10: 2070 6f69 6e74 5f73 697a 652e 7661 6c75   point_size.valu
-0002ed20: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
-0002ed30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ed40: 2020 2020 2020 2020 2270 6f69 6e74 5368          "pointSh
-0002ed50: 6170 6522 3a20 706f 696e 745f 7368 6170  ape": point_shap
-0002ed60: 652e 7661 6c75 652c 0d0a 2020 2020 2020  e.value,..      
+0002eca0: 2020 2020 2020 2022 636f 6c6f 7222 3a20         "color": 
+0002ecb0: 636f 6c6f 722e 7661 6c75 655b 313a 5d0d  color.value[1:].
+0002ecc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002ecd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ece0: 2020 2020 202b 2073 7472 2868 6578 2869       + str(hex(i
+0002ecf0: 6e74 2863 6f6c 6f72 5f6f 7061 6369 7479  nt(color_opacity
+0002ed00: 2e76 616c 7565 202a 2032 3535 2929 295b  .value * 255)))[
+0002ed10: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002ed20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ed30: 2020 2020 2020 2020 2020 323a 0d0a 2020            2:..  
+0002ed40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ed50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ed60: 2020 5d2e 7a66 696c 6c28 3229 2c0d 0a20    ].zfill(2),.. 
 0002ed70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ed80: 2020 2020 2020 2020 2020 2020 2020 2277                "w
-0002ed90: 6964 7468 223a 206c 696e 655f 7769 6474  idth": line_widt
-0002eda0: 682e 7661 6c75 652c 0d0a 2020 2020 2020  h.value,..      
-0002edb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002edc0: 2020 2020 2020 2020 2020 2020 2020 226c                "l
-0002edd0: 696e 6554 7970 6522 3a20 6c69 6e65 5f74  ineType": line_t
-0002ede0: 7970 652e 7661 6c75 652c 0d0a 2020 2020  ype.value,..    
-0002edf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ed80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ed90: 2020 2022 706f 696e 7453 697a 6522 3a20     "pointSize": 
+0002eda0: 706f 696e 745f 7369 7a65 2e76 616c 7565  point_size.value
+0002edb0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+0002edc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002edd0: 2020 2020 2020 2022 706f 696e 7453 6861         "pointSha
+0002ede0: 7065 223a 2070 6f69 6e74 5f73 6861 7065  pe": point_shape
+0002edf0: 2e76 616c 7565 2c0d 0a20 2020 2020 2020  .value,..       
 0002ee00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ee10: 2266 696c 6c43 6f6c 6f72 223a 2063 6f6c  "fillColor": col
-0002ee20: 6f72 732e 6765 7428 0d0a 2020 2020 2020  ors.get(..      
-0002ee30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ee10: 2020 2020 2020 2020 2020 2020 2022 7769               "wi
+0002ee20: 6474 6822 3a20 6c69 6e65 5f77 6964 7468  dth": line_width
+0002ee30: 2e76 616c 7565 2c0d 0a20 2020 2020 2020  .value,..       
 0002ee40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ee50: 2020 6565 2e4e 756d 6265 7228 0d0a 2020    ee.Number(..  
-0002ee60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ee70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ee80: 2020 2020 2020 2020 2020 6565 2e4e 756d            ee.Num
-0002ee90: 6265 7228 662e 6765 7428 2273 7479 6c65  ber(f.get("style
-0002eea0: 496e 6465 7822 2929 2e64 6976 6964 6528  Index")).divide(
-0002eeb0: 7374 6570 290d 0a20 2020 2020 2020 2020  step)..         
+0002ee50: 2020 2020 2020 2020 2020 2020 2022 6c69               "li
+0002ee60: 6e65 5479 7065 223a 206c 696e 655f 7479  neType": line_ty
+0002ee70: 7065 2e76 616c 7565 2c0d 0a20 2020 2020  pe.value,..     
+0002ee80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ee90: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0002eea0: 6669 6c6c 436f 6c6f 7222 3a20 636f 6c6f  fillColor": colo
+0002eeb0: 7273 2e67 6574 280d 0a20 2020 2020 2020  rs.get(..       
 0002eec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002eed0: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-0002eee0: 2e66 6c6f 6f72 2829 0d0a 2020 2020 2020  .floor()..      
+0002eed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002eee0: 2065 652e 4e75 6d62 6572 280d 0a20 2020   ee.Number(..   
 0002eef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ef00: 2020 2020 2020 2020 2020 2020 2020 292c                ),
-0002ef10: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0002ef20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ef30: 2020 7d0d 0a20 2020 2020 2020 2020 2020    }..           
-0002ef40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ef50: 207d 0d0a 2020 2020 2020 2020 2020 2020   }..            
-0002ef60: 2020 2020 2020 2020 2020 2020 290d 0a20              ).. 
-0002ef70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ef80: 2020 2029 0d0a 0d0a 2020 2020 2020 2020     )....        
-0002ef90: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0002efa0: 2e61 6464 4c61 7965 7228 0d0a 2020 2020  .addLayer(..    
+0002ef00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ef10: 2020 2020 2020 2020 2065 652e 4e75 6d62           ee.Numb
+0002ef20: 6572 2866 2e67 6574 2822 7374 796c 6549  er(f.get("styleI
+0002ef30: 6e64 6578 2229 292e 6469 7669 6465 2873  ndex")).divide(s
+0002ef40: 7465 7029 0d0a 2020 2020 2020 2020 2020  tep)..          
+0002ef50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ef60: 2020 2020 2020 2020 2020 2020 2020 292e                ).
+0002ef70: 666c 6f6f 7228 290d 0a20 2020 2020 2020  floor()..       
+0002ef80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ef90: 2020 2020 2020 2020 2020 2020 2029 2c0d               ),.
+0002efa0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 0002efb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002efc0: 2020 2020 6663 2e73 7479 6c65 282a 2a7b      fc.style(**{
-0002efd0: 2273 7479 6c65 5072 6f70 6572 7479 223a  "styleProperty":
-0002efe0: 2022 7374 796c 6522 7d29 2c0d 0a20 2020   "style"}),..   
-0002eff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f000: 2020 2020 207b 7d2c 0d0a 2020 2020 2020       {},..      
-0002f010: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f020: 2020 6622 7b6e 6577 5f6c 6179 6572 5f6e    f"{new_layer_n
-0002f030: 616d 652e 7661 6c75 657d 222c 0d0a 2020  ame.value}",..  
+0002efc0: 207d 0d0a 2020 2020 2020 2020 2020 2020   }..            
+0002efd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002efe0: 7d0d 0a20 2020 2020 2020 2020 2020 2020  }..             
+0002eff0: 2020 2020 2020 2020 2020 2029 0d0a 2020             )..  
+0002f000: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f010: 2020 290d 0a0d 0a20 2020 2020 2020 2020    )....         
+0002f020: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0002f030: 6164 644c 6179 6572 280d 0a20 2020 2020  addLayer(..     
 0002f040: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f050: 2020 290d 0a0d 0a20 2020 2020 2020 2020    )....         
-0002f060: 2020 2020 2020 2020 2020 2069 6620 280d             if (.
-0002f070: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002f080: 2020 2020 2020 2020 206c 656e 2870 616c           len(pal
-0002f090: 6574 7465 2e76 616c 7565 290d 0a20 2020  ette.value)..   
+0002f050: 2020 2066 632e 7374 796c 6528 2a2a 7b22     fc.style(**{"
+0002f060: 7374 796c 6550 726f 7065 7274 7922 3a20  styleProperty": 
+0002f070: 2273 7479 6c65 227d 292c 0d0a 2020 2020  "style"}),..    
+0002f080: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f090: 2020 2020 7b7d 2c0d 0a20 2020 2020 2020      {},..       
 0002f0a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f0b0: 2020 2020 2061 6e64 206c 6567 656e 645f       and legend_
-0002f0c0: 6368 6b2e 7661 6c75 650d 0a20 2020 2020  chk.value..     
+0002f0b0: 2066 227b 6e65 775f 6c61 7965 725f 6e61   f"{new_layer_na
+0002f0c0: 6d65 2e76 616c 7565 7d22 2c0d 0a20 2020  me.value}",..   
 0002f0d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f0e0: 2020 2061 6e64 206c 656e 286c 6567 656e     and len(legen
-0002f0f0: 645f 6c61 6265 6c73 2e76 616c 7565 2920  d_labels.value) 
-0002f100: 3e20 300d 0a20 2020 2020 2020 2020 2020  > 0..           
-0002f110: 2020 2020 2020 2020 2029 3a0d 0a20 2020           ):..   
-0002f120: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f130: 2020 2020 206c 6567 656e 645f 636f 6c6f       legend_colo
-0002f140: 7273 203d 205b 0d0a 2020 2020 2020 2020  rs = [..        
-0002f150: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f160: 2020 2020 636f 6c6f 722e 7374 7269 7028      color.strip(
-0002f170: 2920 666f 7220 636f 6c6f 7220 696e 2070  ) for color in p
-0002f180: 616c 6574 7465 2e76 616c 7565 2e73 706c  alette.value.spl
-0002f190: 6974 2822 2c22 290d 0a20 2020 2020 2020  it(",")..       
-0002f1a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f1b0: 205d 0d0a 2020 2020 2020 2020 2020 2020   ]..            
-0002f1c0: 2020 2020 2020 2020 2020 2020 6c65 6765              lege
-0002f1d0: 6e64 5f6b 6579 7320 3d20 5b0d 0a20 2020  nd_keys = [..   
+0002f0e0: 2029 0d0a 0d0a 2020 2020 2020 2020 2020   )....          
+0002f0f0: 2020 2020 2020 2020 2020 6966 2028 0d0a            if (..
+0002f100: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f110: 2020 2020 2020 2020 6c65 6e28 7061 6c65          len(pale
+0002f120: 7474 652e 7661 6c75 6529 0d0a 2020 2020  tte.value)..    
+0002f130: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f140: 2020 2020 616e 6420 6c65 6765 6e64 5f63      and legend_c
+0002f150: 686b 2e76 616c 7565 0d0a 2020 2020 2020  hk.value..      
+0002f160: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f170: 2020 616e 6420 6c65 6e28 6c65 6765 6e64    and len(legend
+0002f180: 5f6c 6162 656c 732e 7661 6c75 6529 203e  _labels.value) >
+0002f190: 2030 0d0a 2020 2020 2020 2020 2020 2020   0..            
+0002f1a0: 2020 2020 2020 2020 293a 0d0a 2020 2020          ):..    
+0002f1b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f1c0: 2020 2020 6c65 6765 6e64 5f63 6f6c 6f72      legend_color
+0002f1d0: 7320 3d20 5b0d 0a20 2020 2020 2020 2020  s = [..         
 0002f1e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f1f0: 2020 2020 2020 2020 206c 6162 656c 2e73           label.s
-0002f200: 7472 6970 2829 2066 6f72 206c 6162 656c  trip() for label
-0002f210: 2069 6e20 6c65 6765 6e64 5f6c 6162 656c   in legend_label
-0002f220: 732e 7661 6c75 652e 7370 6c69 7428 222c  s.value.split(",
-0002f230: 2229 0d0a 2020 2020 2020 2020 2020 2020  ")..            
-0002f240: 2020 2020 2020 2020 2020 2020 5d0d 0a20              ].. 
-0002f250: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f260: 2020 2020 2020 2073 656c 662e 6164 645f         self.add_
-0002f270: 6c65 6765 6e64 280d 0a20 2020 2020 2020  legend(..       
-0002f280: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f290: 2020 2020 206c 6567 656e 645f 7469 746c       legend_titl
-0002f2a0: 653d 6c65 6765 6e64 5f74 6974 6c65 2e76  e=legend_title.v
-0002f2b0: 616c 7565 2c0d 0a20 2020 2020 2020 2020  alue,..         
-0002f2c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f2d0: 2020 206c 6567 656e 645f 6b65 7973 3d6c     legend_keys=l
-0002f2e0: 6567 656e 645f 6b65 7973 2c0d 0a20 2020  egend_keys,..   
-0002f2f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f300: 2020 2020 2020 2020 206c 6567 656e 645f           legend_
-0002f310: 636f 6c6f 7273 3d6c 6567 656e 645f 636f  colors=legend_co
-0002f320: 6c6f 7273 2c0d 0a20 2020 2020 2020 2020  lors,..         
-0002f330: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f340: 2020 206c 6179 6572 5f6e 616d 653d 6e65     layer_name=ne
-0002f350: 775f 6c61 7965 725f 6e61 6d65 2e76 616c  w_layer_name.val
-0002f360: 7565 2c0d 0a20 2020 2020 2020 2020 2020  ue,..           
-0002f370: 2020 2020 2020 2020 2020 2020 2029 0d0a               )..
+0002f1f0: 2020 2063 6f6c 6f72 2e73 7472 6970 2829     color.strip()
+0002f200: 2066 6f72 2063 6f6c 6f72 2069 6e20 7061   for color in pa
+0002f210: 6c65 7474 652e 7661 6c75 652e 7370 6c69  lette.value.spli
+0002f220: 7428 222c 2229 0d0a 2020 2020 2020 2020  t(",")..        
+0002f230: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f240: 5d0d 0a20 2020 2020 2020 2020 2020 2020  ]..             
+0002f250: 2020 2020 2020 2020 2020 206c 6567 656e             legen
+0002f260: 645f 6b65 7973 203d 205b 0d0a 2020 2020  d_keys = [..    
+0002f270: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f280: 2020 2020 2020 2020 6c61 6265 6c2e 7374          label.st
+0002f290: 7269 7028 2920 666f 7220 6c61 6265 6c20  rip() for label 
+0002f2a0: 696e 206c 6567 656e 645f 6c61 6265 6c73  in legend_labels
+0002f2b0: 2e76 616c 7565 2e73 706c 6974 2822 2c22  .value.split(","
+0002f2c0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+0002f2d0: 2020 2020 2020 2020 2020 205d 0d0a 2020             ]..  
+0002f2e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f2f0: 2020 2020 2020 7365 6c66 2e61 6464 5f6c        self.add_l
+0002f300: 6567 656e 6428 0d0a 2020 2020 2020 2020  egend(..        
+0002f310: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f320: 2020 2020 6c65 6765 6e64 5f74 6974 6c65      legend_title
+0002f330: 3d6c 6567 656e 645f 7469 746c 652e 7661  =legend_title.va
+0002f340: 6c75 652c 0d0a 2020 2020 2020 2020 2020  lue,..          
+0002f350: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f360: 2020 6c65 6765 6e64 5f6b 6579 733d 6c65    legend_keys=le
+0002f370: 6765 6e64 5f6b 6579 732c 0d0a 2020 2020  gend_keys,..    
 0002f380: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f390: 6565 5f6c 6179 6572 2e76 6973 6962 6c65  ee_layer.visible
-0002f3a0: 203d 2046 616c 7365 0d0a 2020 2020 2020   = False..      
-0002f3b0: 2020 2020 2020 2020 2020 636f 6d70 7574            comput
-0002f3c0: 655f 6c61 6265 6c2e 7661 6c75 6520 3d20  e_label.value = 
-0002f3d0: 2222 0d0a 0d0a 2020 2020 2020 2020 2020  ""....          
-0002f3e0: 2020 6465 6620 636c 6f73 655f 6274 6e5f    def close_btn_
-0002f3f0: 636c 6963 6b65 6428 6229 3a0d 0a20 2020  clicked(b):..   
-0002f400: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-0002f410: 662e 7265 6d6f 7665 5f63 6f6e 7472 6f6c  f.remove_control
-0002f420: 2873 656c 662e 7669 735f 636f 6e74 726f  (self.vis_contro
-0002f430: 6c29 0d0a 2020 2020 2020 2020 2020 2020  l)..            
-0002f440: 2020 2020 7365 6c66 2e76 6973 5f63 6f6e      self.vis_con
-0002f450: 7472 6f6c 2e63 6c6f 7365 2829 0d0a 2020  trol.close()..  
-0002f460: 2020 2020 2020 2020 2020 2020 2020 7365                se
-0002f470: 6c66 2e76 6973 5f77 6964 6765 742e 636c  lf.vis_widget.cl
-0002f480: 6f73 6528 290d 0a0d 0a20 2020 2020 2020  ose()....       
-0002f490: 2020 2020 2020 2020 2069 6620 280d 0a20           if (.. 
-0002f4a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f4b0: 2020 2073 656c 662e 636f 6c6f 7262 6172     self.colorbar
-0002f4c0: 5f63 7472 6c20 6973 206e 6f74 204e 6f6e  _ctrl is not Non
-0002f4d0: 650d 0a20 2020 2020 2020 2020 2020 2020  e..             
-0002f4e0: 2020 2020 2020 2061 6e64 2073 656c 662e         and self.
-0002f4f0: 636f 6c6f 7262 6172 5f63 7472 6c20 696e  colorbar_ctrl in
-0002f500: 2073 656c 662e 636f 6e74 726f 6c73 0d0a   self.controls..
-0002f510: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f520: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-0002f530: 2020 2020 2020 2020 7365 6c66 2e72 656d          self.rem
-0002f540: 6f76 655f 636f 6e74 726f 6c28 7365 6c66  ove_control(self
-0002f550: 2e63 6f6c 6f72 6261 725f 6374 726c 290d  .colorbar_ctrl).
-0002f560: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002f570: 2020 2020 2073 656c 662e 636f 6c6f 7262       self.colorb
-0002f580: 6172 5f63 7472 6c2e 636c 6f73 6528 290d  ar_ctrl.close().
-0002f590: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002f5a0: 2020 2020 2073 656c 662e 636f 6c6f 7262       self.colorb
-0002f5b0: 6172 5f77 6964 6765 742e 636c 6f73 6528  ar_widget.close(
-0002f5c0: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
-0002f5d0: 2069 6d70 6f72 745f 6274 6e2e 6f6e 5f63   import_btn.on_c
-0002f5e0: 6c69 636b 2869 6d70 6f72 745f 6274 6e5f  lick(import_btn_
-0002f5f0: 636c 6963 6b65 6429 0d0a 2020 2020 2020  clicked)..      
-0002f600: 2020 2020 2020 6170 706c 795f 6274 6e2e        apply_btn.
-0002f610: 6f6e 5f63 6c69 636b 2861 7070 6c79 5f62  on_click(apply_b
-0002f620: 746e 5f63 6c69 636b 6564 290d 0a20 2020  tn_clicked)..   
-0002f630: 2020 2020 2020 2020 2063 6c6f 7365 5f62           close_b
-0002f640: 746e 2e6f 6e5f 636c 6963 6b28 636c 6f73  tn.on_click(clos
-0002f650: 655f 6274 6e5f 636c 6963 6b65 6429 0d0a  e_btn_clicked)..
-0002f660: 0d0a 2020 2020 2020 2020 2020 2020 7669  ..            vi
-0002f670: 735f 7769 6467 6574 2e63 6869 6c64 7265  s_widget.childre
-0002f680: 6e20 3d20 5b0d 0a20 2020 2020 2020 2020  n = [..         
-0002f690: 2020 2020 2020 206c 6162 656c 2c0d 0a20         label,.. 
-0002f6a0: 2020 2020 2020 2020 2020 2020 2020 206e                 n
-0002f6b0: 6577 5f6c 6179 6572 5f6e 616d 652c 0d0a  ew_layer_name,..
-0002f6c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f6d0: 7769 6467 6574 732e 4842 6f78 285b 636f  widgets.HBox([co
-0002f6e0: 6c6f 722c 2063 6f6c 6f72 5f6f 7061 6369  lor, color_opaci
-0002f6f0: 7479 2c20 636f 6c6f 725f 6f70 6163 6974  ty, color_opacit
-0002f700: 795f 6c61 6265 6c5d 292c 0d0a 2020 2020  y_label]),..    
-0002f710: 2020 2020 2020 2020 2020 2020 7769 6467              widg
-0002f720: 6574 732e 4842 6f78 285b 706f 696e 745f  ets.HBox([point_
-0002f730: 7369 7a65 2c20 706f 696e 745f 7368 6170  size, point_shap
-0002f740: 655d 292c 0d0a 2020 2020 2020 2020 2020  e]),..          
-0002f750: 2020 2020 2020 7769 6467 6574 732e 4842        widgets.HB
-0002f760: 6f78 285b 6c69 6e65 5f77 6964 7468 2c20  ox([line_width, 
-0002f770: 6c69 6e65 5f74 7970 655d 292c 0d0a 2020  line_type]),..  
-0002f780: 2020 2020 2020 2020 2020 2020 2020 7769                wi
-0002f790: 6467 6574 732e 4842 6f78 280d 0a20 2020  dgets.HBox(..   
-0002f7a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f7b0: 205b 6669 6c6c 5f63 6f6c 6f72 2c20 6669   [fill_color, fi
-0002f7c0: 6c6c 5f63 6f6c 6f72 5f6f 7061 6369 7479  ll_color_opacity
-0002f7d0: 2c20 6669 6c6c 5f63 6f6c 6f72 5f6f 7061  , fill_color_opa
-0002f7e0: 6369 7479 5f6c 6162 656c 5d0d 0a20 2020  city_label]..   
-0002f7f0: 2020 2020 2020 2020 2020 2020 2029 2c0d               ),.
-0002f800: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002f810: 2073 7479 6c65 5f76 626f 782c 0d0a 2020   style_vbox,..  
-0002f820: 2020 2020 2020 2020 2020 2020 2020 7769                wi
-0002f830: 6467 6574 732e 4842 6f78 285b 696d 706f  dgets.HBox([impo
-0002f840: 7274 5f62 746e 2c20 6170 706c 795f 6274  rt_btn, apply_bt
-0002f850: 6e2c 2063 6c6f 7365 5f62 746e 5d29 2c0d  n, close_btn]),.
-0002f860: 0a20 2020 2020 2020 2020 2020 205d 0d0a  .            ]..
-0002f870: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
-0002f880: 2067 656f 6d65 7472 795f 7479 7065 2865   geometry_type(e
-0002f890: 655f 6f62 6a65 6374 2920 696e 205b 2250  e_object) in ["P
-0002f8a0: 6f69 6e74 222c 2022 4d75 6c74 6950 6f69  oint", "MultiPoi
-0002f8b0: 6e74 225d 3a0d 0a20 2020 2020 2020 2020  nt"]:..         
-0002f8c0: 2020 2020 2020 2070 6f69 6e74 5f73 697a         point_siz
-0002f8d0: 652e 6469 7361 626c 6564 203d 2046 616c  e.disabled = Fal
-0002f8e0: 7365 0d0a 2020 2020 2020 2020 2020 2020  se..            
-0002f8f0: 2020 2020 706f 696e 745f 7368 6170 652e      point_shape.
-0002f900: 6469 7361 626c 6564 203d 2046 616c 7365  disabled = False
-0002f910: 0d0a 2020 2020 2020 2020 2020 2020 656c  ..            el
-0002f920: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
-0002f930: 2020 2020 2070 6f69 6e74 5f73 697a 652e       point_size.
-0002f940: 6469 7361 626c 6564 203d 2054 7275 650d  disabled = True.
-0002f950: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002f960: 2070 6f69 6e74 5f73 6861 7065 2e64 6973   point_shape.dis
-0002f970: 6162 6c65 6420 3d20 5472 7565 0d0a 0d0a  abled = True....
-0002f980: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-0002f990: 726e 2076 6973 5f77 6964 6765 740d 0a0d  rn vis_widget...
-0002f9a0: 0a20 2020 2064 6566 2061 6464 5f73 7479  .    def add_sty
-0002f9b0: 6c65 645f 7665 6374 6f72 280d 0a20 2020  led_vector(..   
-0002f9c0: 2020 2020 2073 656c 662c 2065 655f 6f62       self, ee_ob
-0002f9d0: 6a65 6374 2c20 636f 6c75 6d6e 2c20 7061  ject, column, pa
-0002f9e0: 6c65 7474 652c 206c 6179 6572 5f6e 616d  lette, layer_nam
-0002f9f0: 653d 2255 6e74 6974 6c65 6422 2c20 2a2a  e="Untitled", **
-0002fa00: 6b77 6172 6773 0d0a 2020 2020 293a 0d0a  kwargs..    ):..
-0002fa10: 2020 2020 2020 2020 2222 2241 6464 7320          """Adds 
-0002fa20: 6120 7374 796c 6564 2076 6563 746f 7220  a styled vector 
-0002fa30: 746f 2074 6865 206d 6170 2e0d 0a0d 0a20  to the map..... 
-0002fa40: 2020 2020 2020 2041 7267 733a 0d0a 2020         Args:..  
-0002fa50: 2020 2020 2020 2020 2020 6565 5f6f 626a            ee_obj
-0002fa60: 6563 7420 286f 626a 6563 7429 3a20 416e  ect (object): An
-0002fa70: 2065 652e 4665 6174 7572 6543 6f6c 6c65   ee.FeatureColle
-0002fa80: 6374 696f 6e2e 0d0a 2020 2020 2020 2020  ction...        
-0002fa90: 2020 2020 636f 6c75 6d6e 2028 7374 7229      column (str)
-0002faa0: 3a20 5468 6520 636f 6c75 6d6e 206e 616d  : The column nam
-0002fab0: 6520 746f 2075 7365 2066 6f72 2073 7479  e to use for sty
-0002fac0: 6c69 6e67 2e0d 0a20 2020 2020 2020 2020  ling...         
-0002fad0: 2020 2070 616c 6574 7465 2028 6c69 7374     palette (list
-0002fae0: 207c 2064 6963 7429 3a20 5468 6520 7061   | dict): The pa
-0002faf0: 6c65 7474 6520 2865 2e67 2e2c 206c 6973  lette (e.g., lis
-0002fb00: 7420 6f66 2063 6f6c 6f72 7320 6f72 2061  t of colors or a
-0002fb10: 2064 6963 7420 636f 6e74 6169 6e69 6e67   dict containing
-0002fb20: 206c 6162 656c 2061 6e64 2063 6f6c 6f72   label and color
-0002fb30: 2070 6169 7273 2920 746f 2075 7365 2066   pairs) to use f
-0002fb40: 6f72 2073 7479 6c69 6e67 2e0d 0a20 2020  or styling...   
-0002fb50: 2020 2020 2020 2020 206c 6179 6572 5f6e           layer_n
-0002fb60: 616d 6520 2873 7472 2c20 6f70 7469 6f6e  ame (str, option
-0002fb70: 616c 293a 2054 6865 206e 616d 6520 746f  al): The name to
-0002fb80: 2062 6520 7573 6564 2066 6f72 2074 6865   be used for the
-0002fb90: 206e 6577 206c 6179 6572 2e20 4465 6661   new layer. Defa
-0002fba0: 756c 7473 2074 6f20 2255 6e74 6974 6c65  ults to "Untitle
-0002fbb0: 6422 2e0d 0a20 2020 2020 2020 2022 2222  d"...        """
-0002fbc0: 0d0a 2020 2020 2020 2020 7374 796c 6564  ..        styled
-0002fbd0: 5f76 6563 746f 7220 3d20 7665 6374 6f72  _vector = vector
-0002fbe0: 5f73 7479 6c69 6e67 2865 655f 6f62 6a65  _styling(ee_obje
-0002fbf0: 6374 2c20 636f 6c75 6d6e 2c20 7061 6c65  ct, column, pale
-0002fc00: 7474 652c 202a 2a6b 7761 7267 7329 0d0a  tte, **kwargs)..
-0002fc10: 2020 2020 2020 2020 7365 6c66 2e61 6464          self.add
-0002fc20: 4c61 7965 7228 7374 796c 6564 5f76 6563  Layer(styled_vec
-0002fc30: 746f 722e 7374 796c 6528 2a2a 7b22 7374  tor.style(**{"st
-0002fc40: 796c 6550 726f 7065 7274 7922 3a20 2273  yleProperty": "s
-0002fc50: 7479 6c65 227d 292c 207b 7d2c 206c 6179  tyle"}), {}, lay
-0002fc60: 6572 5f6e 616d 6529 0d0a 0d0a 2020 2020  er_name)....    
-0002fc70: 6465 6620 6164 645f 7368 6170 6566 696c  def add_shapefil
-0002fc80: 6528 0d0a 2020 2020 2020 2020 7365 6c66  e(..        self
-0002fc90: 2c0d 0a20 2020 2020 2020 2069 6e5f 7368  ,..        in_sh
-0002fca0: 702c 0d0a 2020 2020 2020 2020 6c61 7965  p,..        laye
-0002fcb0: 725f 6e61 6d65 3d22 556e 7469 746c 6564  r_name="Untitled
-0002fcc0: 222c 0d0a 2020 2020 2020 2020 7374 796c  ",..        styl
-0002fcd0: 653d 7b7d 2c0d 0a20 2020 2020 2020 2068  e={},..        h
-0002fce0: 6f76 6572 5f73 7479 6c65 3d7b 7d2c 0d0a  over_style={},..
-0002fcf0: 2020 2020 2020 2020 7374 796c 655f 6361          style_ca
-0002fd00: 6c6c 6261 636b 3d4e 6f6e 652c 0d0a 2020  llback=None,..  
-0002fd10: 2020 2020 2020 6669 6c6c 5f63 6f6c 6f72        fill_color
-0002fd20: 733d 5b22 626c 6163 6b22 5d2c 0d0a 2020  s=["black"],..  
-0002fd30: 2020 2020 2020 696e 666f 5f6d 6f64 653d        info_mode=
-0002fd40: 226f 6e5f 686f 7665 7222 2c0d 0a20 2020  "on_hover",..   
-0002fd50: 2029 3a0d 0a20 2020 2020 2020 2022 2222   ):..        """
-0002fd60: 4164 6473 2061 2073 6861 7065 6669 6c65  Adds a shapefile
-0002fd70: 2074 6f20 7468 6520 6d61 702e 0d0a 0d0a   to the map.....
-0002fd80: 2020 2020 2020 2020 4172 6773 3a0d 0a20          Args:.. 
-0002fd90: 2020 2020 2020 2020 2020 2069 6e5f 7368             in_sh
-0002fda0: 7020 2873 7472 293a 2054 6865 2069 6e70  p (str): The inp
-0002fdb0: 7574 2066 696c 6520 7061 7468 2074 6f20  ut file path to 
-0002fdc0: 7468 6520 7368 6170 6566 696c 652e 0d0a  the shapefile...
-0002fdd0: 2020 2020 2020 2020 2020 2020 6c61 7965              laye
-0002fde0: 725f 6e61 6d65 2028 7374 722c 206f 7074  r_name (str, opt
-0002fdf0: 696f 6e61 6c29 3a20 5468 6520 6c61 7965  ional): The laye
-0002fe00: 7220 6e61 6d65 2074 6f20 6265 2075 7365  r name to be use
-0002fe10: 642e 2e20 4465 6661 756c 7473 2074 6f20  d.. Defaults to 
-0002fe20: 2255 6e74 6974 6c65 6422 2e0d 0a20 2020  "Untitled"...   
-0002fe30: 2020 2020 2020 2020 2073 7479 6c65 2028           style (
-0002fe40: 6469 6374 2c20 6f70 7469 6f6e 616c 293a  dict, optional):
-0002fe50: 2041 2064 6963 7469 6f6e 6172 7920 7370   A dictionary sp
-0002fe60: 6563 6966 7969 6e67 2074 6865 2073 7479  ecifying the sty
-0002fe70: 6c65 2074 6f20 6265 2075 7365 642e 2044  le to be used. D
-0002fe80: 6566 6175 6c74 7320 746f 207b 7d2e 0d0a  efaults to {}...
-0002fe90: 2020 2020 2020 2020 2020 2020 686f 7665              hove
-0002fea0: 725f 7374 796c 6520 2864 6963 742c 206f  r_style (dict, o
-0002feb0: 7074 696f 6e61 6c29 3a20 486f 7665 7220  ptional): Hover 
-0002fec0: 7374 796c 6520 6469 6374 696f 6e61 7279  style dictionary
-0002fed0: 2e20 4465 6661 756c 7473 2074 6f20 7b7d  . Defaults to {}
-0002fee0: 2e0d 0a20 2020 2020 2020 2020 2020 2073  ...            s
-0002fef0: 7479 6c65 5f63 616c 6c62 6163 6b20 2866  tyle_callback (f
-0002ff00: 756e 6374 696f 6e2c 206f 7074 696f 6e61  unction, optiona
-0002ff10: 6c29 3a20 5374 796c 696e 6720 6675 6e63  l): Styling func
-0002ff20: 7469 6f6e 2074 6861 7420 6973 2063 616c  tion that is cal
-0002ff30: 6c65 6420 666f 7220 6561 6368 2066 6561  led for each fea
-0002ff40: 7475 7265 2c20 616e 6420 7368 6f75 6c64  ture, and should
-0002ff50: 2072 6574 7572 6e20 7468 6520 6665 6174   return the feat
-0002ff60: 7572 6520 7374 796c 652e 2054 6869 7320  ure style. This 
-0002ff70: 7374 796c 696e 6720 6675 6e63 7469 6f6e  styling function
-0002ff80: 2074 616b 6573 2074 6865 2066 6561 7475   takes the featu
-0002ff90: 7265 2061 7320 6172 6775 6d65 6e74 2e20  re as argument. 
-0002ffa0: 4465 6661 756c 7473 2074 6f20 4e6f 6e65  Defaults to None
-0002ffb0: 2e0d 0a20 2020 2020 2020 2020 2020 2066  ...            f
-0002ffc0: 696c 6c5f 636f 6c6f 7273 2028 6c69 7374  ill_colors (list
-0002ffd0: 2c20 6f70 7469 6f6e 616c 293a 2054 6865  , optional): The
-0002ffe0: 2072 616e 646f 6d20 636f 6c6f 7273 2074   random colors t
-0002fff0: 6f20 7573 6520 666f 7220 6669 6c6c 696e  o use for fillin
-00030000: 6720 706f 6c79 676f 6e73 2e20 4465 6661  g polygons. Defa
-00030010: 756c 7473 2074 6f20 5b22 626c 6163 6b22  ults to ["black"
-00030020: 5d2e 0d0a 2020 2020 2020 2020 2020 2020  ]...            
-00030030: 696e 666f 5f6d 6f64 6520 2873 7472 2c20  info_mode (str, 
-00030040: 6f70 7469 6f6e 616c 293a 2044 6973 706c  optional): Displ
-00030050: 6179 7320 7468 6520 6174 7472 6962 7574  ays the attribut
-00030060: 6573 2062 7920 6569 7468 6572 206f 6e5f  es by either on_
-00030070: 686f 7665 7220 6f72 206f 6e5f 636c 6963  hover or on_clic
-00030080: 6b2e 2041 6e79 2076 616c 7565 206f 7468  k. Any value oth
-00030090: 6572 2074 6861 6e20 226f 6e5f 686f 7665  er than "on_hove
-000300a0: 7222 206f 7220 226f 6e5f 636c 6963 6b22  r" or "on_click"
-000300b0: 2077 696c 6c20 6265 2074 7265 6174 6564   will be treated
-000300c0: 2061 7320 4e6f 6e65 2e20 4465 6661 756c   as None. Defaul
-000300d0: 7473 2074 6f20 226f 6e5f 686f 7665 7222  ts to "on_hover"
-000300e0: 2e0d 0a0d 0a20 2020 2020 2020 2052 6169  .....        Rai
-000300f0: 7365 733a 0d0a 2020 2020 2020 2020 2020  ses:..          
-00030100: 2020 4669 6c65 4e6f 7446 6f75 6e64 4572    FileNotFoundEr
-00030110: 726f 723a 2054 6865 2070 726f 7669 6465  ror: The provide
-00030120: 6420 7368 6170 6566 696c 6520 636f 756c  d shapefile coul
-00030130: 6420 6e6f 7420 6265 2066 6f75 6e64 2e0d  d not be found..
-00030140: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
-00030150: 2020 2020 2020 696e 5f73 6870 203d 206f        in_shp = o
-00030160: 732e 7061 7468 2e61 6273 7061 7468 2869  s.path.abspath(i
-00030170: 6e5f 7368 7029 0d0a 2020 2020 2020 2020  n_shp)..        
-00030180: 6966 206e 6f74 206f 732e 7061 7468 2e65  if not os.path.e
-00030190: 7869 7374 7328 696e 5f73 6870 293a 0d0a  xists(in_shp):..
-000301a0: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-000301b0: 6520 4669 6c65 4e6f 7446 6f75 6e64 4572  e FileNotFoundEr
-000301c0: 726f 7228 2254 6865 2070 726f 7669 6465  ror("The provide
-000301d0: 6420 7368 6170 6566 696c 6520 636f 756c  d shapefile coul
-000301e0: 6420 6e6f 7420 6265 2066 6f75 6e64 2e22  d not be found."
-000301f0: 290d 0a0d 0a20 2020 2020 2020 2067 656f  )....        geo
-00030200: 6a73 6f6e 203d 2073 6870 5f74 6f5f 6765  json = shp_to_ge
-00030210: 6f6a 736f 6e28 696e 5f73 6870 290d 0a20  ojson(in_shp).. 
-00030220: 2020 2020 2020 2073 656c 662e 6164 645f         self.add_
-00030230: 6765 6f6a 736f 6e28 0d0a 2020 2020 2020  geojson(..      
-00030240: 2020 2020 2020 6765 6f6a 736f 6e2c 0d0a        geojson,..
-00030250: 2020 2020 2020 2020 2020 2020 6c61 7965              laye
-00030260: 725f 6e61 6d65 2c0d 0a20 2020 2020 2020  r_name,..       
-00030270: 2020 2020 2073 7479 6c65 2c0d 0a20 2020       style,..   
-00030280: 2020 2020 2020 2020 2068 6f76 6572 5f73           hover_s
-00030290: 7479 6c65 2c0d 0a20 2020 2020 2020 2020  tyle,..         
-000302a0: 2020 2073 7479 6c65 5f63 616c 6c62 6163     style_callbac
-000302b0: 6b2c 0d0a 2020 2020 2020 2020 2020 2020  k,..            
-000302c0: 6669 6c6c 5f63 6f6c 6f72 732c 0d0a 2020  fill_colors,..  
-000302d0: 2020 2020 2020 2020 2020 696e 666f 5f6d            info_m
-000302e0: 6f64 652c 0d0a 2020 2020 2020 2020 290d  ode,..        ).
-000302f0: 0a0d 0a20 2020 2064 6566 2061 6464 5f67  ...    def add_g
-00030300: 656f 6a73 6f6e 280d 0a20 2020 2020 2020  eojson(..       
-00030310: 2073 656c 662c 0d0a 2020 2020 2020 2020   self,..        
-00030320: 696e 5f67 656f 6a73 6f6e 2c0d 0a20 2020  in_geojson,..   
-00030330: 2020 2020 206c 6179 6572 5f6e 616d 653d       layer_name=
-00030340: 2255 6e74 6974 6c65 6422 2c0d 0a20 2020  "Untitled",..   
-00030350: 2020 2020 2073 7479 6c65 3d7b 7d2c 0d0a       style={},..
-00030360: 2020 2020 2020 2020 686f 7665 725f 7374          hover_st
-00030370: 796c 653d 7b7d 2c0d 0a20 2020 2020 2020  yle={},..       
-00030380: 2073 7479 6c65 5f63 616c 6c62 6163 6b3d   style_callback=
-00030390: 4e6f 6e65 2c0d 0a20 2020 2020 2020 2066  None,..        f
-000303a0: 696c 6c5f 636f 6c6f 7273 3d5b 2262 6c61  ill_colors=["bla
-000303b0: 636b 225d 2c0d 0a20 2020 2020 2020 2069  ck"],..        i
-000303c0: 6e66 6f5f 6d6f 6465 3d22 6f6e 5f68 6f76  nfo_mode="on_hov
-000303d0: 6572 222c 0d0a 2020 2020 293a 0d0a 2020  er",..    ):..  
-000303e0: 2020 2020 2020 2222 2241 6464 7320 6120        """Adds a 
-000303f0: 4765 6f4a 534f 4e20 6669 6c65 2074 6f20  GeoJSON file to 
-00030400: 7468 6520 6d61 702e 0d0a 0d0a 2020 2020  the map.....    
-00030410: 2020 2020 4172 6773 3a0d 0a20 2020 2020      Args:..     
-00030420: 2020 2020 2020 2069 6e5f 6765 6f6a 736f         in_geojso
-00030430: 6e20 2873 7472 207c 2064 6963 7429 3a20  n (str | dict): 
-00030440: 5468 6520 6669 6c65 2070 6174 6820 6f72  The file path or
-00030450: 2068 7474 7020 5552 4c20 746f 2074 6865   http URL to the
-00030460: 2069 6e70 7574 2047 656f 4a53 4f4e 206f   input GeoJSON o
-00030470: 7220 6120 6469 6374 696f 6e61 7279 2063  r a dictionary c
-00030480: 6f6e 7461 696e 696e 6720 7468 6520 6765  ontaining the ge
-00030490: 6f6a 736f 6e2e 0d0a 2020 2020 2020 2020  ojson...        
-000304a0: 2020 2020 6c61 7965 725f 6e61 6d65 2028      layer_name (
-000304b0: 7374 722c 206f 7074 696f 6e61 6c29 3a20  str, optional): 
-000304c0: 5468 6520 6c61 7965 7220 6e61 6d65 2074  The layer name t
-000304d0: 6f20 6265 2075 7365 642e 2e20 4465 6661  o be used.. Defa
-000304e0: 756c 7473 2074 6f20 2255 6e74 6974 6c65  ults to "Untitle
-000304f0: 6422 2e0d 0a20 2020 2020 2020 2020 2020  d"...           
-00030500: 2073 7479 6c65 2028 6469 6374 2c20 6f70   style (dict, op
-00030510: 7469 6f6e 616c 293a 2041 2064 6963 7469  tional): A dicti
-00030520: 6f6e 6172 7920 7370 6563 6966 7969 6e67  onary specifying
-00030530: 2074 6865 2073 7479 6c65 2074 6f20 6265   the style to be
-00030540: 2075 7365 642e 2044 6566 6175 6c74 7320   used. Defaults 
-00030550: 746f 207b 7d2e 0d0a 2020 2020 2020 2020  to {}...        
-00030560: 2020 2020 686f 7665 725f 7374 796c 6520      hover_style 
-00030570: 2864 6963 742c 206f 7074 696f 6e61 6c29  (dict, optional)
-00030580: 3a20 486f 7665 7220 7374 796c 6520 6469  : Hover style di
-00030590: 6374 696f 6e61 7279 2e20 4465 6661 756c  ctionary. Defaul
-000305a0: 7473 2074 6f20 7b7d 2e0d 0a20 2020 2020  ts to {}...     
-000305b0: 2020 2020 2020 2073 7479 6c65 5f63 616c         style_cal
-000305c0: 6c62 6163 6b20 2866 756e 6374 696f 6e2c  lback (function,
-000305d0: 206f 7074 696f 6e61 6c29 3a20 5374 796c   optional): Styl
-000305e0: 696e 6720 6675 6e63 7469 6f6e 2074 6861  ing function tha
-000305f0: 7420 6973 2063 616c 6c65 6420 666f 7220  t is called for 
-00030600: 6561 6368 2066 6561 7475 7265 2c20 616e  each feature, an
-00030610: 6420 7368 6f75 6c64 2072 6574 7572 6e20  d should return 
-00030620: 7468 6520 6665 6174 7572 6520 7374 796c  the feature styl
-00030630: 652e 2054 6869 7320 7374 796c 696e 6720  e. This styling 
-00030640: 6675 6e63 7469 6f6e 2074 616b 6573 2074  function takes t
-00030650: 6865 2066 6561 7475 7265 2061 7320 6172  he feature as ar
-00030660: 6775 6d65 6e74 2e20 4465 6661 756c 7473  gument. Defaults
-00030670: 2074 6f20 4e6f 6e65 2e0d 0a20 2020 2020   to None...     
-00030680: 2020 2020 2020 2066 696c 6c5f 636f 6c6f         fill_colo
-00030690: 7273 2028 6c69 7374 2c20 6f70 7469 6f6e  rs (list, option
-000306a0: 616c 293a 2054 6865 2072 616e 646f 6d20  al): The random 
-000306b0: 636f 6c6f 7273 2074 6f20 7573 6520 666f  colors to use fo
-000306c0: 7220 6669 6c6c 696e 6720 706f 6c79 676f  r filling polygo
-000306d0: 6e73 2e20 4465 6661 756c 7473 2074 6f20  ns. Defaults to 
-000306e0: 5b22 626c 6163 6b22 5d2e 0d0a 2020 2020  ["black"]...    
-000306f0: 2020 2020 2020 2020 696e 666f 5f6d 6f64          info_mod
-00030700: 6520 2873 7472 2c20 6f70 7469 6f6e 616c  e (str, optional
-00030710: 293a 2044 6973 706c 6179 7320 7468 6520  ): Displays the 
-00030720: 6174 7472 6962 7574 6573 2062 7920 6569  attributes by ei
-00030730: 7468 6572 206f 6e5f 686f 7665 7220 6f72  ther on_hover or
-00030740: 206f 6e5f 636c 6963 6b2e 2041 6e79 2076   on_click. Any v
-00030750: 616c 7565 206f 7468 6572 2074 6861 6e20  alue other than 
-00030760: 226f 6e5f 686f 7665 7222 206f 7220 226f  "on_hover" or "o
-00030770: 6e5f 636c 6963 6b22 2077 696c 6c20 6265  n_click" will be
-00030780: 2074 7265 6174 6564 2061 7320 4e6f 6e65   treated as None
-00030790: 2e20 4465 6661 756c 7473 2074 6f20 226f  . Defaults to "o
-000307a0: 6e5f 686f 7665 7222 2e0d 0a20 2020 2020  n_hover"...     
-000307b0: 2020 2052 6169 7365 733a 0d0a 2020 2020     Raises:..    
-000307c0: 2020 2020 2020 2020 4669 6c65 4e6f 7446          FileNotF
-000307d0: 6f75 6e64 4572 726f 723a 2054 6865 2070  oundError: The p
-000307e0: 726f 7669 6465 6420 4765 6f4a 534f 4e20  rovided GeoJSON 
-000307f0: 6669 6c65 2063 6f75 6c64 206e 6f74 2062  file could not b
-00030800: 6520 666f 756e 642e 0d0a 2020 2020 2020  e found...      
-00030810: 2020 2222 220d 0a20 2020 2020 2020 2069    """..        i
-00030820: 6d70 6f72 7420 6a73 6f6e 0d0a 2020 2020  mport json..    
-00030830: 2020 2020 696d 706f 7274 2072 616e 646f      import rando
-00030840: 6d0d 0a20 2020 2020 2020 2069 6d70 6f72  m..        impor
-00030850: 7420 7265 7175 6573 7473 0d0a 0d0a 2020  t requests....  
-00030860: 2020 2020 2020 7374 796c 655f 6361 6c6c        style_call
-00030870: 6261 636b 5f6f 6e6c 7920 3d20 4661 6c73  back_only = Fals
-00030880: 650d 0a0d 0a20 2020 2020 2020 2069 6620  e....        if 
-00030890: 6c65 6e28 7374 796c 6529 203d 3d20 3020  len(style) == 0 
-000308a0: 616e 6420 7374 796c 655f 6361 6c6c 6261  and style_callba
-000308b0: 636b 2069 7320 6e6f 7420 4e6f 6e65 3a0d  ck is not None:.
-000308c0: 0a20 2020 2020 2020 2020 2020 2073 7479  .            sty
-000308d0: 6c65 5f63 616c 6c62 6163 6b5f 6f6e 6c79  le_callback_only
-000308e0: 203d 2054 7275 650d 0a0d 0a20 2020 2020   = True....     
-000308f0: 2020 2074 7279 3a0d 0a0d 0a20 2020 2020     try:....     
-00030900: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-00030910: 616e 6365 2869 6e5f 6765 6f6a 736f 6e2c  ance(in_geojson,
-00030920: 2073 7472 293a 0d0a 0d0a 2020 2020 2020   str):....      
-00030930: 2020 2020 2020 2020 2020 6966 2069 6e5f            if in_
-00030940: 6765 6f6a 736f 6e2e 7374 6172 7473 7769  geojson.startswi
-00030950: 7468 2822 6874 7470 2229 3a0d 0a20 2020  th("http"):..   
-00030960: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00030970: 2064 6174 6120 3d20 7265 7175 6573 7473   data = requests
-00030980: 2e67 6574 2869 6e5f 6765 6f6a 736f 6e29  .get(in_geojson)
-00030990: 2e6a 736f 6e28 290d 0a20 2020 2020 2020  .json()..       
-000309a0: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
-000309b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000309c0: 2020 2020 696e 5f67 656f 6a73 6f6e 203d      in_geojson =
-000309d0: 206f 732e 7061 7468 2e61 6273 7061 7468   os.path.abspath
-000309e0: 2869 6e5f 6765 6f6a 736f 6e29 0d0a 2020  (in_geojson)..  
+0002f390: 2020 2020 2020 2020 6c65 6765 6e64 5f63          legend_c
+0002f3a0: 6f6c 6f72 733d 6c65 6765 6e64 5f63 6f6c  olors=legend_col
+0002f3b0: 6f72 732c 0d0a 2020 2020 2020 2020 2020  ors,..          
+0002f3c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f3d0: 2020 6c61 7965 725f 6e61 6d65 3d6e 6577    layer_name=new
+0002f3e0: 5f6c 6179 6572 5f6e 616d 652e 7661 6c75  _layer_name.valu
+0002f3f0: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
+0002f400: 2020 2020 2020 2020 2020 2020 290d 0a20              ).. 
+0002f410: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+0002f420: 655f 6c61 7965 722e 7669 7369 626c 6520  e_layer.visible 
+0002f430: 3d20 4661 6c73 650d 0a20 2020 2020 2020  = False..       
+0002f440: 2020 2020 2020 2020 2063 6f6d 7075 7465           compute
+0002f450: 5f6c 6162 656c 2e76 616c 7565 203d 2022  _label.value = "
+0002f460: 220d 0a0d 0a20 2020 2020 2020 2020 2020  "....           
+0002f470: 2064 6566 2063 6c6f 7365 5f62 746e 5f63   def close_btn_c
+0002f480: 6c69 636b 6564 2862 293a 0d0a 2020 2020  licked(b):..    
+0002f490: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0002f4a0: 2e72 656d 6f76 655f 636f 6e74 726f 6c28  .remove_control(
+0002f4b0: 7365 6c66 2e76 6973 5f63 6f6e 7472 6f6c  self.vis_control
+0002f4c0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+0002f4d0: 2020 2073 656c 662e 7669 735f 636f 6e74     self.vis_cont
+0002f4e0: 726f 6c2e 636c 6f73 6528 290d 0a20 2020  rol.close()..   
+0002f4f0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+0002f500: 662e 7669 735f 7769 6467 6574 2e63 6c6f  f.vis_widget.clo
+0002f510: 7365 2829 0d0a 0d0a 2020 2020 2020 2020  se()....        
+0002f520: 2020 2020 2020 2020 6966 2028 0d0a 2020          if (..  
+0002f530: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f540: 2020 7365 6c66 2e63 6f6c 6f72 6261 725f    self.colorbar_
+0002f550: 6374 726c 2069 7320 6e6f 7420 4e6f 6e65  ctrl is not None
+0002f560: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0002f570: 2020 2020 2020 616e 6420 7365 6c66 2e63        and self.c
+0002f580: 6f6c 6f72 6261 725f 6374 726c 2069 6e20  olorbar_ctrl in 
+0002f590: 7365 6c66 2e63 6f6e 7472 6f6c 730d 0a20  self.controls.. 
+0002f5a0: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+0002f5b0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0002f5c0: 2020 2020 2020 2073 656c 662e 7265 6d6f         self.remo
+0002f5d0: 7665 5f63 6f6e 7472 6f6c 2873 656c 662e  ve_control(self.
+0002f5e0: 636f 6c6f 7262 6172 5f63 7472 6c29 0d0a  colorbar_ctrl)..
+0002f5f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f600: 2020 2020 7365 6c66 2e63 6f6c 6f72 6261      self.colorba
+0002f610: 725f 6374 726c 2e63 6c6f 7365 2829 0d0a  r_ctrl.close()..
+0002f620: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f630: 2020 2020 7365 6c66 2e63 6f6c 6f72 6261      self.colorba
+0002f640: 725f 7769 6467 6574 2e63 6c6f 7365 2829  r_widget.close()
+0002f650: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+0002f660: 696d 706f 7274 5f62 746e 2e6f 6e5f 636c  import_btn.on_cl
+0002f670: 6963 6b28 696d 706f 7274 5f62 746e 5f63  ick(import_btn_c
+0002f680: 6c69 636b 6564 290d 0a20 2020 2020 2020  licked)..       
+0002f690: 2020 2020 2061 7070 6c79 5f62 746e 2e6f       apply_btn.o
+0002f6a0: 6e5f 636c 6963 6b28 6170 706c 795f 6274  n_click(apply_bt
+0002f6b0: 6e5f 636c 6963 6b65 6429 0d0a 2020 2020  n_clicked)..    
+0002f6c0: 2020 2020 2020 2020 636c 6f73 655f 6274          close_bt
+0002f6d0: 6e2e 6f6e 5f63 6c69 636b 2863 6c6f 7365  n.on_click(close
+0002f6e0: 5f62 746e 5f63 6c69 636b 6564 290d 0a0d  _btn_clicked)...
+0002f6f0: 0a20 2020 2020 2020 2020 2020 2076 6973  .            vis
+0002f700: 5f77 6964 6765 742e 6368 696c 6472 656e  _widget.children
+0002f710: 203d 205b 0d0a 2020 2020 2020 2020 2020   = [..          
+0002f720: 2020 2020 2020 6c61 6265 6c2c 0d0a 2020        label,..  
+0002f730: 2020 2020 2020 2020 2020 2020 2020 6e65                ne
+0002f740: 775f 6c61 7965 725f 6e61 6d65 2c0d 0a20  w_layer_name,.. 
+0002f750: 2020 2020 2020 2020 2020 2020 2020 2077                 w
+0002f760: 6964 6765 7473 2e48 426f 7828 5b63 6f6c  idgets.HBox([col
+0002f770: 6f72 2c20 636f 6c6f 725f 6f70 6163 6974  or, color_opacit
+0002f780: 792c 2063 6f6c 6f72 5f6f 7061 6369 7479  y, color_opacity
+0002f790: 5f6c 6162 656c 5d29 2c0d 0a20 2020 2020  _label]),..     
+0002f7a0: 2020 2020 2020 2020 2020 2077 6964 6765             widge
+0002f7b0: 7473 2e48 426f 7828 5b70 6f69 6e74 5f73  ts.HBox([point_s
+0002f7c0: 697a 652c 2070 6f69 6e74 5f73 6861 7065  ize, point_shape
+0002f7d0: 5d29 2c0d 0a20 2020 2020 2020 2020 2020  ]),..           
+0002f7e0: 2020 2020 2077 6964 6765 7473 2e48 426f       widgets.HBo
+0002f7f0: 7828 5b6c 696e 655f 7769 6474 682c 206c  x([line_width, l
+0002f800: 696e 655f 7479 7065 5d29 2c0d 0a20 2020  ine_type]),..   
+0002f810: 2020 2020 2020 2020 2020 2020 2077 6964               wid
+0002f820: 6765 7473 2e48 426f 7828 0d0a 2020 2020  gets.HBox(..    
+0002f830: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f840: 5b66 696c 6c5f 636f 6c6f 722c 2066 696c  [fill_color, fil
+0002f850: 6c5f 636f 6c6f 725f 6f70 6163 6974 792c  l_color_opacity,
+0002f860: 2066 696c 6c5f 636f 6c6f 725f 6f70 6163   fill_color_opac
+0002f870: 6974 795f 6c61 6265 6c5d 0d0a 2020 2020  ity_label]..    
+0002f880: 2020 2020 2020 2020 2020 2020 292c 0d0a              ),..
+0002f890: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f8a0: 7374 796c 655f 7662 6f78 2c0d 0a20 2020  style_vbox,..   
+0002f8b0: 2020 2020 2020 2020 2020 2020 2077 6964               wid
+0002f8c0: 6765 7473 2e48 426f 7828 5b69 6d70 6f72  gets.HBox([impor
+0002f8d0: 745f 6274 6e2c 2061 7070 6c79 5f62 746e  t_btn, apply_btn
+0002f8e0: 2c20 636c 6f73 655f 6274 6e5d 292c 0d0a  , close_btn]),..
+0002f8f0: 2020 2020 2020 2020 2020 2020 5d0d 0a0d              ]...
+0002f900: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0002f910: 6765 6f6d 6574 7279 5f74 7970 6528 6565  geometry_type(ee
+0002f920: 5f6f 626a 6563 7429 2069 6e20 5b22 506f  _object) in ["Po
+0002f930: 696e 7422 2c20 224d 756c 7469 506f 696e  int", "MultiPoin
+0002f940: 7422 5d3a 0d0a 2020 2020 2020 2020 2020  t"]:..          
+0002f950: 2020 2020 2020 706f 696e 745f 7369 7a65        point_size
+0002f960: 2e64 6973 6162 6c65 6420 3d20 4661 6c73  .disabled = Fals
+0002f970: 650d 0a20 2020 2020 2020 2020 2020 2020  e..             
+0002f980: 2020 2070 6f69 6e74 5f73 6861 7065 2e64     point_shape.d
+0002f990: 6973 6162 6c65 6420 3d20 4661 6c73 650d  isabled = False.
+0002f9a0: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
+0002f9b0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+0002f9c0: 2020 2020 706f 696e 745f 7369 7a65 2e64      point_size.d
+0002f9d0: 6973 6162 6c65 6420 3d20 5472 7565 0d0a  isabled = True..
+0002f9e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f9f0: 706f 696e 745f 7368 6170 652e 6469 7361  point_shape.disa
+0002fa00: 626c 6564 203d 2054 7275 650d 0a0d 0a20  bled = True.... 
+0002fa10: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0002fa20: 6e20 7669 735f 7769 6467 6574 0d0a 0d0a  n vis_widget....
+0002fa30: 2020 2020 6465 6620 6164 645f 7374 796c      def add_styl
+0002fa40: 6564 5f76 6563 746f 7228 0d0a 2020 2020  ed_vector(..    
+0002fa50: 2020 2020 7365 6c66 2c20 6565 5f6f 626a      self, ee_obj
+0002fa60: 6563 742c 2063 6f6c 756d 6e2c 2070 616c  ect, column, pal
+0002fa70: 6574 7465 2c20 6c61 7965 725f 6e61 6d65  ette, layer_name
+0002fa80: 3d22 556e 7469 746c 6564 222c 202a 2a6b  ="Untitled", **k
+0002fa90: 7761 7267 730d 0a20 2020 2029 3a0d 0a20  wargs..    ):.. 
+0002faa0: 2020 2020 2020 2022 2222 4164 6473 2061         """Adds a
+0002fab0: 2073 7479 6c65 6420 7665 6374 6f72 2074   styled vector t
+0002fac0: 6f20 7468 6520 6d61 702e 0d0a 0d0a 2020  o the map.....  
+0002fad0: 2020 2020 2020 4172 6773 3a0d 0a20 2020        Args:..   
+0002fae0: 2020 2020 2020 2020 2065 655f 6f62 6a65           ee_obje
+0002faf0: 6374 2028 6f62 6a65 6374 293a 2041 6e20  ct (object): An 
+0002fb00: 6565 2e46 6561 7475 7265 436f 6c6c 6563  ee.FeatureCollec
+0002fb10: 7469 6f6e 2e0d 0a20 2020 2020 2020 2020  tion...         
+0002fb20: 2020 2063 6f6c 756d 6e20 2873 7472 293a     column (str):
+0002fb30: 2054 6865 2063 6f6c 756d 6e20 6e61 6d65   The column name
+0002fb40: 2074 6f20 7573 6520 666f 7220 7374 796c   to use for styl
+0002fb50: 696e 672e 0d0a 2020 2020 2020 2020 2020  ing...          
+0002fb60: 2020 7061 6c65 7474 6520 286c 6973 7420    palette (list 
+0002fb70: 7c20 6469 6374 293a 2054 6865 2070 616c  | dict): The pal
+0002fb80: 6574 7465 2028 652e 672e 2c20 6c69 7374  ette (e.g., list
+0002fb90: 206f 6620 636f 6c6f 7273 206f 7220 6120   of colors or a 
+0002fba0: 6469 6374 2063 6f6e 7461 696e 696e 6720  dict containing 
+0002fbb0: 6c61 6265 6c20 616e 6420 636f 6c6f 7220  label and color 
+0002fbc0: 7061 6972 7329 2074 6f20 7573 6520 666f  pairs) to use fo
+0002fbd0: 7220 7374 796c 696e 672e 0d0a 2020 2020  r styling...    
+0002fbe0: 2020 2020 2020 2020 6c61 7965 725f 6e61          layer_na
+0002fbf0: 6d65 2028 7374 722c 206f 7074 696f 6e61  me (str, optiona
+0002fc00: 6c29 3a20 5468 6520 6e61 6d65 2074 6f20  l): The name to 
+0002fc10: 6265 2075 7365 6420 666f 7220 7468 6520  be used for the 
+0002fc20: 6e65 7720 6c61 7965 722e 2044 6566 6175  new layer. Defau
+0002fc30: 6c74 7320 746f 2022 556e 7469 746c 6564  lts to "Untitled
+0002fc40: 222e 0d0a 2020 2020 2020 2020 2222 220d  "...        """.
+0002fc50: 0a20 2020 2020 2020 2073 7479 6c65 645f  .        styled_
+0002fc60: 7665 6374 6f72 203d 2076 6563 746f 725f  vector = vector_
+0002fc70: 7374 796c 696e 6728 6565 5f6f 626a 6563  styling(ee_objec
+0002fc80: 742c 2063 6f6c 756d 6e2c 2070 616c 6574  t, column, palet
+0002fc90: 7465 2c20 2a2a 6b77 6172 6773 290d 0a20  te, **kwargs).. 
+0002fca0: 2020 2020 2020 2073 656c 662e 6164 644c         self.addL
+0002fcb0: 6179 6572 2873 7479 6c65 645f 7665 6374  ayer(styled_vect
+0002fcc0: 6f72 2e73 7479 6c65 282a 2a7b 2273 7479  or.style(**{"sty
+0002fcd0: 6c65 5072 6f70 6572 7479 223a 2022 7374  leProperty": "st
+0002fce0: 796c 6522 7d29 2c20 7b7d 2c20 6c61 7965  yle"}), {}, laye
+0002fcf0: 725f 6e61 6d65 290d 0a0d 0a20 2020 2064  r_name)....    d
+0002fd00: 6566 2061 6464 5f73 6861 7065 6669 6c65  ef add_shapefile
+0002fd10: 280d 0a20 2020 2020 2020 2073 656c 662c  (..        self,
+0002fd20: 0d0a 2020 2020 2020 2020 696e 5f73 6870  ..        in_shp
+0002fd30: 2c0d 0a20 2020 2020 2020 206c 6179 6572  ,..        layer
+0002fd40: 5f6e 616d 653d 2255 6e74 6974 6c65 6422  _name="Untitled"
+0002fd50: 2c0d 0a20 2020 2020 2020 2073 7479 6c65  ,..        style
+0002fd60: 3d7b 7d2c 0d0a 2020 2020 2020 2020 686f  ={},..        ho
+0002fd70: 7665 725f 7374 796c 653d 7b7d 2c0d 0a20  ver_style={},.. 
+0002fd80: 2020 2020 2020 2073 7479 6c65 5f63 616c         style_cal
+0002fd90: 6c62 6163 6b3d 4e6f 6e65 2c0d 0a20 2020  lback=None,..   
+0002fda0: 2020 2020 2066 696c 6c5f 636f 6c6f 7273       fill_colors
+0002fdb0: 3d5b 2262 6c61 636b 225d 2c0d 0a20 2020  =["black"],..   
+0002fdc0: 2020 2020 2069 6e66 6f5f 6d6f 6465 3d22       info_mode="
+0002fdd0: 6f6e 5f68 6f76 6572 222c 0d0a 2020 2020  on_hover",..    
+0002fde0: 293a 0d0a 2020 2020 2020 2020 2222 2241  ):..        """A
+0002fdf0: 6464 7320 6120 7368 6170 6566 696c 6520  dds a shapefile 
+0002fe00: 746f 2074 6865 206d 6170 2e0d 0a0d 0a20  to the map..... 
+0002fe10: 2020 2020 2020 2041 7267 733a 0d0a 2020         Args:..  
+0002fe20: 2020 2020 2020 2020 2020 696e 5f73 6870            in_shp
+0002fe30: 2028 7374 7229 3a20 5468 6520 696e 7075   (str): The inpu
+0002fe40: 7420 6669 6c65 2070 6174 6820 746f 2074  t file path to t
+0002fe50: 6865 2073 6861 7065 6669 6c65 2e0d 0a20  he shapefile... 
+0002fe60: 2020 2020 2020 2020 2020 206c 6179 6572             layer
+0002fe70: 5f6e 616d 6520 2873 7472 2c20 6f70 7469  _name (str, opti
+0002fe80: 6f6e 616c 293a 2054 6865 206c 6179 6572  onal): The layer
+0002fe90: 206e 616d 6520 746f 2062 6520 7573 6564   name to be used
+0002fea0: 2e2e 2044 6566 6175 6c74 7320 746f 2022  .. Defaults to "
+0002feb0: 556e 7469 746c 6564 222e 0d0a 2020 2020  Untitled"...    
+0002fec0: 2020 2020 2020 2020 7374 796c 6520 2864          style (d
+0002fed0: 6963 742c 206f 7074 696f 6e61 6c29 3a20  ict, optional): 
+0002fee0: 4120 6469 6374 696f 6e61 7279 2073 7065  A dictionary spe
+0002fef0: 6369 6679 696e 6720 7468 6520 7374 796c  cifying the styl
+0002ff00: 6520 746f 2062 6520 7573 6564 2e20 4465  e to be used. De
+0002ff10: 6661 756c 7473 2074 6f20 7b7d 2e0d 0a20  faults to {}... 
+0002ff20: 2020 2020 2020 2020 2020 2068 6f76 6572             hover
+0002ff30: 5f73 7479 6c65 2028 6469 6374 2c20 6f70  _style (dict, op
+0002ff40: 7469 6f6e 616c 293a 2048 6f76 6572 2073  tional): Hover s
+0002ff50: 7479 6c65 2064 6963 7469 6f6e 6172 792e  tyle dictionary.
+0002ff60: 2044 6566 6175 6c74 7320 746f 207b 7d2e   Defaults to {}.
+0002ff70: 0d0a 2020 2020 2020 2020 2020 2020 7374  ..            st
+0002ff80: 796c 655f 6361 6c6c 6261 636b 2028 6675  yle_callback (fu
+0002ff90: 6e63 7469 6f6e 2c20 6f70 7469 6f6e 616c  nction, optional
+0002ffa0: 293a 2053 7479 6c69 6e67 2066 756e 6374  ): Styling funct
+0002ffb0: 696f 6e20 7468 6174 2069 7320 6361 6c6c  ion that is call
+0002ffc0: 6564 2066 6f72 2065 6163 6820 6665 6174  ed for each feat
+0002ffd0: 7572 652c 2061 6e64 2073 686f 756c 6420  ure, and should 
+0002ffe0: 7265 7475 726e 2074 6865 2066 6561 7475  return the featu
+0002fff0: 7265 2073 7479 6c65 2e20 5468 6973 2073  re style. This s
+00030000: 7479 6c69 6e67 2066 756e 6374 696f 6e20  tyling function 
+00030010: 7461 6b65 7320 7468 6520 6665 6174 7572  takes the featur
+00030020: 6520 6173 2061 7267 756d 656e 742e 2044  e as argument. D
+00030030: 6566 6175 6c74 7320 746f 204e 6f6e 652e  efaults to None.
+00030040: 0d0a 2020 2020 2020 2020 2020 2020 6669  ..            fi
+00030050: 6c6c 5f63 6f6c 6f72 7320 286c 6973 742c  ll_colors (list,
+00030060: 206f 7074 696f 6e61 6c29 3a20 5468 6520   optional): The 
+00030070: 7261 6e64 6f6d 2063 6f6c 6f72 7320 746f  random colors to
+00030080: 2075 7365 2066 6f72 2066 696c 6c69 6e67   use for filling
+00030090: 2070 6f6c 7967 6f6e 732e 2044 6566 6175   polygons. Defau
+000300a0: 6c74 7320 746f 205b 2262 6c61 636b 225d  lts to ["black"]
+000300b0: 2e0d 0a20 2020 2020 2020 2020 2020 2069  ...            i
+000300c0: 6e66 6f5f 6d6f 6465 2028 7374 722c 206f  nfo_mode (str, o
+000300d0: 7074 696f 6e61 6c29 3a20 4469 7370 6c61  ptional): Displa
+000300e0: 7973 2074 6865 2061 7474 7269 6275 7465  ys the attribute
+000300f0: 7320 6279 2065 6974 6865 7220 6f6e 5f68  s by either on_h
+00030100: 6f76 6572 206f 7220 6f6e 5f63 6c69 636b  over or on_click
+00030110: 2e20 416e 7920 7661 6c75 6520 6f74 6865  . Any value othe
+00030120: 7220 7468 616e 2022 6f6e 5f68 6f76 6572  r than "on_hover
+00030130: 2220 6f72 2022 6f6e 5f63 6c69 636b 2220  " or "on_click" 
+00030140: 7769 6c6c 2062 6520 7472 6561 7465 6420  will be treated 
+00030150: 6173 204e 6f6e 652e 2044 6566 6175 6c74  as None. Default
+00030160: 7320 746f 2022 6f6e 5f68 6f76 6572 222e  s to "on_hover".
+00030170: 0d0a 0d0a 2020 2020 2020 2020 5261 6973  ....        Rais
+00030180: 6573 3a0d 0a20 2020 2020 2020 2020 2020  es:..           
+00030190: 2046 696c 654e 6f74 466f 756e 6445 7272   FileNotFoundErr
+000301a0: 6f72 3a20 5468 6520 7072 6f76 6964 6564  or: The provided
+000301b0: 2073 6861 7065 6669 6c65 2063 6f75 6c64   shapefile could
+000301c0: 206e 6f74 2062 6520 666f 756e 642e 0d0a   not be found...
+000301d0: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
+000301e0: 2020 2020 2069 6e5f 7368 7020 3d20 6f73       in_shp = os
+000301f0: 2e70 6174 682e 6162 7370 6174 6828 696e  .path.abspath(in
+00030200: 5f73 6870 290d 0a20 2020 2020 2020 2069  _shp)..        i
+00030210: 6620 6e6f 7420 6f73 2e70 6174 682e 6578  f not os.path.ex
+00030220: 6973 7473 2869 6e5f 7368 7029 3a0d 0a20  ists(in_shp):.. 
+00030230: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+00030240: 2046 696c 654e 6f74 466f 756e 6445 7272   FileNotFoundErr
+00030250: 6f72 2822 5468 6520 7072 6f76 6964 6564  or("The provided
+00030260: 2073 6861 7065 6669 6c65 2063 6f75 6c64   shapefile could
+00030270: 206e 6f74 2062 6520 666f 756e 642e 2229   not be found.")
+00030280: 0d0a 0d0a 2020 2020 2020 2020 6765 6f6a  ....        geoj
+00030290: 736f 6e20 3d20 7368 705f 746f 5f67 656f  son = shp_to_geo
+000302a0: 6a73 6f6e 2869 6e5f 7368 7029 0d0a 2020  json(in_shp)..  
+000302b0: 2020 2020 2020 7365 6c66 2e61 6464 5f67        self.add_g
+000302c0: 656f 6a73 6f6e 280d 0a20 2020 2020 2020  eojson(..       
+000302d0: 2020 2020 2067 656f 6a73 6f6e 2c0d 0a20       geojson,.. 
+000302e0: 2020 2020 2020 2020 2020 206c 6179 6572             layer
+000302f0: 5f6e 616d 652c 0d0a 2020 2020 2020 2020  _name,..        
+00030300: 2020 2020 7374 796c 652c 0d0a 2020 2020      style,..    
+00030310: 2020 2020 2020 2020 686f 7665 725f 7374          hover_st
+00030320: 796c 652c 0d0a 2020 2020 2020 2020 2020  yle,..          
+00030330: 2020 7374 796c 655f 6361 6c6c 6261 636b    style_callback
+00030340: 2c0d 0a20 2020 2020 2020 2020 2020 2066  ,..            f
+00030350: 696c 6c5f 636f 6c6f 7273 2c0d 0a20 2020  ill_colors,..   
+00030360: 2020 2020 2020 2020 2069 6e66 6f5f 6d6f           info_mo
+00030370: 6465 2c0d 0a20 2020 2020 2020 2029 0d0a  de,..        )..
+00030380: 0d0a 2020 2020 6465 6620 6164 645f 6765  ..    def add_ge
+00030390: 6f6a 736f 6e28 0d0a 2020 2020 2020 2020  ojson(..        
+000303a0: 7365 6c66 2c0d 0a20 2020 2020 2020 2069  self,..        i
+000303b0: 6e5f 6765 6f6a 736f 6e2c 0d0a 2020 2020  n_geojson,..    
+000303c0: 2020 2020 6c61 7965 725f 6e61 6d65 3d22      layer_name="
+000303d0: 556e 7469 746c 6564 222c 0d0a 2020 2020  Untitled",..    
+000303e0: 2020 2020 7374 796c 653d 7b7d 2c0d 0a20      style={},.. 
+000303f0: 2020 2020 2020 2068 6f76 6572 5f73 7479         hover_sty
+00030400: 6c65 3d7b 7d2c 0d0a 2020 2020 2020 2020  le={},..        
+00030410: 7374 796c 655f 6361 6c6c 6261 636b 3d4e  style_callback=N
+00030420: 6f6e 652c 0d0a 2020 2020 2020 2020 6669  one,..        fi
+00030430: 6c6c 5f63 6f6c 6f72 733d 5b22 626c 6163  ll_colors=["blac
+00030440: 6b22 5d2c 0d0a 2020 2020 2020 2020 696e  k"],..        in
+00030450: 666f 5f6d 6f64 653d 226f 6e5f 686f 7665  fo_mode="on_hove
+00030460: 7222 2c0d 0a20 2020 2029 3a0d 0a20 2020  r",..    ):..   
+00030470: 2020 2020 2022 2222 4164 6473 2061 2047       """Adds a G
+00030480: 656f 4a53 4f4e 2066 696c 6520 746f 2074  eoJSON file to t
+00030490: 6865 206d 6170 2e0d 0a0d 0a20 2020 2020  he map.....     
+000304a0: 2020 2041 7267 733a 0d0a 2020 2020 2020     Args:..      
+000304b0: 2020 2020 2020 696e 5f67 656f 6a73 6f6e        in_geojson
+000304c0: 2028 7374 7220 7c20 6469 6374 293a 2054   (str | dict): T
+000304d0: 6865 2066 696c 6520 7061 7468 206f 7220  he file path or 
+000304e0: 6874 7470 2055 524c 2074 6f20 7468 6520  http URL to the 
+000304f0: 696e 7075 7420 4765 6f4a 534f 4e20 6f72  input GeoJSON or
+00030500: 2061 2064 6963 7469 6f6e 6172 7920 636f   a dictionary co
+00030510: 6e74 6169 6e69 6e67 2074 6865 2067 656f  ntaining the geo
+00030520: 6a73 6f6e 2e0d 0a20 2020 2020 2020 2020  json...         
+00030530: 2020 206c 6179 6572 5f6e 616d 6520 2873     layer_name (s
+00030540: 7472 2c20 6f70 7469 6f6e 616c 293a 2054  tr, optional): T
+00030550: 6865 206c 6179 6572 206e 616d 6520 746f  he layer name to
+00030560: 2062 6520 7573 6564 2e2e 2044 6566 6175   be used.. Defau
+00030570: 6c74 7320 746f 2022 556e 7469 746c 6564  lts to "Untitled
+00030580: 222e 0d0a 2020 2020 2020 2020 2020 2020  "...            
+00030590: 7374 796c 6520 2864 6963 742c 206f 7074  style (dict, opt
+000305a0: 696f 6e61 6c29 3a20 4120 6469 6374 696f  ional): A dictio
+000305b0: 6e61 7279 2073 7065 6369 6679 696e 6720  nary specifying 
+000305c0: 7468 6520 7374 796c 6520 746f 2062 6520  the style to be 
+000305d0: 7573 6564 2e20 4465 6661 756c 7473 2074  used. Defaults t
+000305e0: 6f20 7b7d 2e0d 0a20 2020 2020 2020 2020  o {}...         
+000305f0: 2020 2068 6f76 6572 5f73 7479 6c65 2028     hover_style (
+00030600: 6469 6374 2c20 6f70 7469 6f6e 616c 293a  dict, optional):
+00030610: 2048 6f76 6572 2073 7479 6c65 2064 6963   Hover style dic
+00030620: 7469 6f6e 6172 792e 2044 6566 6175 6c74  tionary. Default
+00030630: 7320 746f 207b 7d2e 0d0a 2020 2020 2020  s to {}...      
+00030640: 2020 2020 2020 7374 796c 655f 6361 6c6c        style_call
+00030650: 6261 636b 2028 6675 6e63 7469 6f6e 2c20  back (function, 
+00030660: 6f70 7469 6f6e 616c 293a 2053 7479 6c69  optional): Styli
+00030670: 6e67 2066 756e 6374 696f 6e20 7468 6174  ng function that
+00030680: 2069 7320 6361 6c6c 6564 2066 6f72 2065   is called for e
+00030690: 6163 6820 6665 6174 7572 652c 2061 6e64  ach feature, and
+000306a0: 2073 686f 756c 6420 7265 7475 726e 2074   should return t
+000306b0: 6865 2066 6561 7475 7265 2073 7479 6c65  he feature style
+000306c0: 2e20 5468 6973 2073 7479 6c69 6e67 2066  . This styling f
+000306d0: 756e 6374 696f 6e20 7461 6b65 7320 7468  unction takes th
+000306e0: 6520 6665 6174 7572 6520 6173 2061 7267  e feature as arg
+000306f0: 756d 656e 742e 2044 6566 6175 6c74 7320  ument. Defaults 
+00030700: 746f 204e 6f6e 652e 0d0a 2020 2020 2020  to None...      
+00030710: 2020 2020 2020 6669 6c6c 5f63 6f6c 6f72        fill_color
+00030720: 7320 286c 6973 742c 206f 7074 696f 6e61  s (list, optiona
+00030730: 6c29 3a20 5468 6520 7261 6e64 6f6d 2063  l): The random c
+00030740: 6f6c 6f72 7320 746f 2075 7365 2066 6f72  olors to use for
+00030750: 2066 696c 6c69 6e67 2070 6f6c 7967 6f6e   filling polygon
+00030760: 732e 2044 6566 6175 6c74 7320 746f 205b  s. Defaults to [
+00030770: 2262 6c61 636b 225d 2e0d 0a20 2020 2020  "black"]...     
+00030780: 2020 2020 2020 2069 6e66 6f5f 6d6f 6465         info_mode
+00030790: 2028 7374 722c 206f 7074 696f 6e61 6c29   (str, optional)
+000307a0: 3a20 4469 7370 6c61 7973 2074 6865 2061  : Displays the a
+000307b0: 7474 7269 6275 7465 7320 6279 2065 6974  ttributes by eit
+000307c0: 6865 7220 6f6e 5f68 6f76 6572 206f 7220  her on_hover or 
+000307d0: 6f6e 5f63 6c69 636b 2e20 416e 7920 7661  on_click. Any va
+000307e0: 6c75 6520 6f74 6865 7220 7468 616e 2022  lue other than "
+000307f0: 6f6e 5f68 6f76 6572 2220 6f72 2022 6f6e  on_hover" or "on
+00030800: 5f63 6c69 636b 2220 7769 6c6c 2062 6520  _click" will be 
+00030810: 7472 6561 7465 6420 6173 204e 6f6e 652e  treated as None.
+00030820: 2044 6566 6175 6c74 7320 746f 2022 6f6e   Defaults to "on
+00030830: 5f68 6f76 6572 222e 0d0a 2020 2020 2020  _hover"...      
+00030840: 2020 5261 6973 6573 3a0d 0a20 2020 2020    Raises:..     
+00030850: 2020 2020 2020 2046 696c 654e 6f74 466f         FileNotFo
+00030860: 756e 6445 7272 6f72 3a20 5468 6520 7072  undError: The pr
+00030870: 6f76 6964 6564 2047 656f 4a53 4f4e 2066  ovided GeoJSON f
+00030880: 696c 6520 636f 756c 6420 6e6f 7420 6265  ile could not be
+00030890: 2066 6f75 6e64 2e0d 0a20 2020 2020 2020   found...       
+000308a0: 2022 2222 0d0a 2020 2020 2020 2020 696d   """..        im
+000308b0: 706f 7274 206a 736f 6e0d 0a20 2020 2020  port json..     
+000308c0: 2020 2069 6d70 6f72 7420 7261 6e64 6f6d     import random
+000308d0: 0d0a 2020 2020 2020 2020 696d 706f 7274  ..        import
+000308e0: 2072 6571 7565 7374 730d 0a0d 0a20 2020   requests....   
+000308f0: 2020 2020 2073 7479 6c65 5f63 616c 6c62       style_callb
+00030900: 6163 6b5f 6f6e 6c79 203d 2046 616c 7365  ack_only = False
+00030910: 0d0a 0d0a 2020 2020 2020 2020 6966 206c  ....        if l
+00030920: 656e 2873 7479 6c65 2920 3d3d 2030 2061  en(style) == 0 a
+00030930: 6e64 2073 7479 6c65 5f63 616c 6c62 6163  nd style_callbac
+00030940: 6b20 6973 206e 6f74 204e 6f6e 653a 0d0a  k is not None:..
+00030950: 2020 2020 2020 2020 2020 2020 7374 796c              styl
+00030960: 655f 6361 6c6c 6261 636b 5f6f 6e6c 7920  e_callback_only 
+00030970: 3d20 5472 7565 0d0a 0d0a 2020 2020 2020  = True....      
+00030980: 2020 7472 793a 0d0a 0d0a 2020 2020 2020    try:....      
+00030990: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
+000309a0: 6e63 6528 696e 5f67 656f 6a73 6f6e 2c20  nce(in_geojson, 
+000309b0: 7374 7229 3a0d 0a0d 0a20 2020 2020 2020  str):....       
+000309c0: 2020 2020 2020 2020 2069 6620 696e 5f67           if in_g
+000309d0: 656f 6a73 6f6e 2e73 7461 7274 7377 6974  eojson.startswit
+000309e0: 6828 2268 7474 7022 293a 0d0a 2020 2020  h("http"):..    
 000309f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00030a00: 2020 6966 206e 6f74 206f 732e 7061 7468    if not os.path
-00030a10: 2e65 7869 7374 7328 696e 5f67 656f 6a73  .exists(in_geojs
-00030a20: 6f6e 293a 0d0a 2020 2020 2020 2020 2020  on):..          
-00030a30: 2020 2020 2020 2020 2020 2020 2020 7261                ra
-00030a40: 6973 6520 4669 6c65 4e6f 7446 6f75 6e64  ise FileNotFound
-00030a50: 4572 726f 7228 0d0a 2020 2020 2020 2020  Error(..        
-00030a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00030a70: 2020 2020 2254 6865 2070 726f 7669 6465      "The provide
-00030a80: 6420 4765 6f4a 534f 4e20 6669 6c65 2063  d GeoJSON file c
-00030a90: 6f75 6c64 206e 6f74 2062 6520 666f 756e  ould not be foun
-00030aa0: 642e 220d 0a20 2020 2020 2020 2020 2020  d."..           
-00030ab0: 2020 2020 2020 2020 2020 2020 2029 0d0a               )..
-00030ac0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00030ad0: 2020 2020 2020 7769 7468 206f 7065 6e28        with open(
-00030ae0: 696e 5f67 656f 6a73 6f6e 2c20 656e 636f  in_geojson, enco
-00030af0: 6469 6e67 3d22 7574 662d 3822 2920 6173  ding="utf-8") as
-00030b00: 2066 3a0d 0a20 2020 2020 2020 2020 2020   f:..           
-00030b10: 2020 2020 2020 2020 2020 2020 2064 6174               dat
-00030b20: 6120 3d20 6a73 6f6e 2e6c 6f61 6428 6629  a = json.load(f)
-00030b30: 0d0a 2020 2020 2020 2020 2020 2020 656c  ..            el
-00030b40: 6966 2069 7369 6e73 7461 6e63 6528 696e  if isinstance(in
-00030b50: 5f67 656f 6a73 6f6e 2c20 6469 6374 293a  _geojson, dict):
-00030b60: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00030b70: 2020 6461 7461 203d 2069 6e5f 6765 6f6a    data = in_geoj
-00030b80: 736f 6e0d 0a20 2020 2020 2020 2020 2020  son..           
-00030b90: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
-00030ba0: 2020 2020 2020 2020 7261 6973 6520 5479          raise Ty
-00030bb0: 7065 4572 726f 7228 2254 6865 2069 6e70  peError("The inp
-00030bc0: 7574 2067 656f 6a73 6f6e 206d 7573 7420  ut geojson must 
-00030bd0: 6265 2061 2074 7970 6520 6f66 2073 7472  be a type of str
-00030be0: 206f 7220 6469 6374 2e22 290d 0a20 2020   or dict.")..   
-00030bf0: 2020 2020 2065 7863 6570 7420 4578 6365       except Exce
-00030c00: 7074 696f 6e20 6173 2065 3a0d 0a20 2020  ption as e:..   
-00030c10: 2020 2020 2020 2020 2072 6169 7365 2045           raise E
-00030c20: 7863 6570 7469 6f6e 2865 290d 0a0d 0a20  xception(e).... 
-00030c30: 2020 2020 2020 2069 6620 6e6f 7420 7374         if not st
-00030c40: 796c 653a 0d0a 2020 2020 2020 2020 2020  yle:..          
-00030c50: 2020 7374 796c 6520 3d20 7b0d 0a20 2020    style = {..   
-00030c60: 2020 2020 2020 2020 2020 2020 2023 2022               # "
-00030c70: 7374 726f 6b65 223a 2054 7275 652c 0d0a  stroke": True,..
-00030c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00030c90: 2263 6f6c 6f72 223a 2022 2330 3030 3030  "color": "#00000
-00030ca0: 3022 2c0d 0a20 2020 2020 2020 2020 2020  0",..           
-00030cb0: 2020 2020 2022 7765 6967 6874 223a 2031       "weight": 1
-00030cc0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00030cd0: 2020 2022 6f70 6163 6974 7922 3a20 312c     "opacity": 1,
-00030ce0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00030cf0: 2020 2320 2266 696c 6c22 3a20 5472 7565    # "fill": True
-00030d00: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00030d10: 2020 2023 2022 6669 6c6c 436f 6c6f 7222     # "fillColor"
-00030d20: 3a20 2223 6666 6666 6666 222c 0d0a 2020  : "#ffffff",..  
-00030d30: 2020 2020 2020 2020 2020 2020 2020 2266                "f
-00030d40: 696c 6c4f 7061 6369 7479 223a 2030 2e31  illOpacity": 0.1
-00030d50: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00030d60: 2020 2023 2022 6461 7368 4172 7261 7922     # "dashArray"
-00030d70: 3a20 2239 220d 0a20 2020 2020 2020 2020  : "9"..         
-00030d80: 2020 2020 2020 2023 2022 636c 6963 6b61         # "clicka
-00030d90: 626c 6522 3a20 5472 7565 2c0d 0a20 2020  ble": True,..   
-00030da0: 2020 2020 2020 2020 207d 0d0a 2020 2020           }..    
-00030db0: 2020 2020 656c 6966 2022 7765 6967 6874      elif "weight
-00030dc0: 2220 6e6f 7420 696e 2073 7479 6c65 3a0d  " not in style:.
-00030dd0: 0a20 2020 2020 2020 2020 2020 2073 7479  .            sty
-00030de0: 6c65 5b22 7765 6967 6874 225d 203d 2031  le["weight"] = 1
-00030df0: 0d0a 0d0a 2020 2020 2020 2020 6966 206e  ....        if n
-00030e00: 6f74 2068 6f76 6572 5f73 7479 6c65 3a0d  ot hover_style:.
-00030e10: 0a20 2020 2020 2020 2020 2020 2068 6f76  .            hov
-00030e20: 6572 5f73 7479 6c65 203d 207b 2277 6569  er_style = {"wei
-00030e30: 6768 7422 3a20 7374 796c 655b 2277 6569  ght": style["wei
-00030e40: 6768 7422 5d20 2b20 312c 2022 6669 6c6c  ght"] + 1, "fill
-00030e50: 4f70 6163 6974 7922 3a20 302e 357d 0d0a  Opacity": 0.5}..
-00030e60: 0d0a 2020 2020 2020 2020 6465 6620 7261  ..        def ra
-00030e70: 6e64 6f6d 5f63 6f6c 6f72 2866 6561 7475  ndom_color(featu
-00030e80: 7265 293a 0d0a 2020 2020 2020 2020 2020  re):..          
-00030e90: 2020 7265 7475 726e 207b 0d0a 2020 2020    return {..    
-00030ea0: 2020 2020 2020 2020 2020 2020 2263 6f6c              "col
-00030eb0: 6f72 223a 2022 626c 6163 6b22 2c0d 0a20  or": "black",.. 
-00030ec0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00030ed0: 6669 6c6c 436f 6c6f 7222 3a20 7261 6e64  fillColor": rand
-00030ee0: 6f6d 2e63 686f 6963 6528 6669 6c6c 5f63  om.choice(fill_c
-00030ef0: 6f6c 6f72 7329 2c0d 0a20 2020 2020 2020  olors),..       
-00030f00: 2020 2020 207d 0d0a 0d0a 2020 2020 2020       }....      
-00030f10: 2020 746f 6f6c 6261 725f 6275 7474 6f6e    toolbar_button
-00030f20: 203d 2077 6964 6765 7473 2e54 6f67 676c   = widgets.Toggl
-00030f30: 6542 7574 746f 6e28 0d0a 2020 2020 2020  eButton(..      
-00030f40: 2020 2020 2020 7661 6c75 653d 5472 7565        value=True
-00030f50: 2c0d 0a20 2020 2020 2020 2020 2020 2074  ,..            t
-00030f60: 6f6f 6c74 6970 3d22 546f 6f6c 6261 7222  ooltip="Toolbar"
-00030f70: 2c0d 0a20 2020 2020 2020 2020 2020 2069  ,..            i
-00030f80: 636f 6e3d 2269 6e66 6f22 2c0d 0a20 2020  con="info",..   
-00030f90: 2020 2020 2020 2020 206c 6179 6f75 743d           layout=
-00030fa0: 7769 6467 6574 732e 4c61 796f 7574 280d  widgets.Layout(.
-00030fb0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00030fc0: 2077 6964 7468 3d22 3238 7078 222c 2068   width="28px", h
-00030fd0: 6569 6768 743d 2232 3870 7822 2c20 7061  eight="28px", pa
-00030fe0: 6464 696e 673d 2230 7078 2030 7078 2030  dding="0px 0px 0
-00030ff0: 7078 2034 7078 220d 0a20 2020 2020 2020  px 4px"..       
-00031000: 2020 2020 2029 2c0d 0a20 2020 2020 2020       ),..       
-00031010: 2029 0d0a 0d0a 2020 2020 2020 2020 636c   )....        cl
-00031020: 6f73 655f 6275 7474 6f6e 203d 2077 6964  ose_button = wid
-00031030: 6765 7473 2e54 6f67 676c 6542 7574 746f  gets.ToggleButto
-00031040: 6e28 0d0a 2020 2020 2020 2020 2020 2020  n(..            
-00031050: 7661 6c75 653d 4661 6c73 652c 0d0a 2020  value=False,..  
-00031060: 2020 2020 2020 2020 2020 746f 6f6c 7469            toolti
-00031070: 703d 2243 6c6f 7365 2074 6865 2074 6f6f  p="Close the too
-00031080: 6c22 2c0d 0a20 2020 2020 2020 2020 2020  l",..           
-00031090: 2069 636f 6e3d 2274 696d 6573 222c 0d0a   icon="times",..
-000310a0: 2020 2020 2020 2020 2020 2020 2320 6275              # bu
-000310b0: 7474 6f6e 5f73 7479 6c65 3d22 7072 696d  tton_style="prim
-000310c0: 6172 7922 2c0d 0a20 2020 2020 2020 2020  ary",..         
-000310d0: 2020 206c 6179 6f75 743d 7769 6467 6574     layout=widget
-000310e0: 732e 4c61 796f 7574 280d 0a20 2020 2020  s.Layout(..     
-000310f0: 2020 2020 2020 2020 2020 2068 6569 6768             heigh
-00031100: 743d 2232 3870 7822 2c20 7769 6474 683d  t="28px", width=
-00031110: 2232 3870 7822 2c20 7061 6464 696e 673d  "28px", padding=
-00031120: 2230 7078 2030 7078 2030 7078 2034 7078  "0px 0px 0px 4px
-00031130: 220d 0a20 2020 2020 2020 2020 2020 2029  "..            )
-00031140: 2c0d 0a20 2020 2020 2020 2029 0d0a 0d0a  ,..        )....
-00031150: 2020 2020 2020 2020 6874 6d6c 203d 2077          html = w
-00031160: 6964 6765 7473 2e48 544d 4c28 290d 0a20  idgets.HTML().. 
-00031170: 2020 2020 2020 2068 746d 6c2e 6c61 796f         html.layo
-00031180: 7574 2e6d 6172 6769 6e20 3d20 2230 7078  ut.margin = "0px
-00031190: 2031 3070 7820 3070 7820 3130 7078 220d   10px 0px 10px".
-000311a0: 0a20 2020 2020 2020 2068 746d 6c2e 6c61  .        html.la
-000311b0: 796f 7574 2e6d 6178 5f68 6569 6768 7420  yout.max_height 
-000311c0: 3d20 2232 3530 7078 220d 0a20 2020 2020  = "250px"..     
-000311d0: 2020 2068 746d 6c2e 6c61 796f 7574 2e6d     html.layout.m
-000311e0: 6178 5f77 6964 7468 203d 2022 3235 3070  ax_width = "250p
-000311f0: 7822 0d0a 0d0a 2020 2020 2020 2020 6f75  x"....        ou
-00031200: 7470 7574 5f77 6964 6765 7420 3d20 7769  tput_widget = wi
-00031210: 6467 6574 732e 5642 6f78 280d 0a20 2020  dgets.VBox(..   
-00031220: 2020 2020 2020 2020 205b 7769 6467 6574           [widget
-00031230: 732e 4842 6f78 285b 746f 6f6c 6261 725f  s.HBox([toolbar_
-00031240: 6275 7474 6f6e 2c20 636c 6f73 655f 6275  button, close_bu
-00031250: 7474 6f6e 5d29 2c20 6874 6d6c 5d0d 0a20  tton]), html].. 
-00031260: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
-00031270: 2020 696e 666f 5f63 6f6e 7472 6f6c 203d    info_control =
-00031280: 2069 7079 6c65 6166 6c65 742e 5769 6467   ipyleaflet.Widg
-00031290: 6574 436f 6e74 726f 6c28 0d0a 2020 2020  etControl(..    
-000312a0: 2020 2020 2020 2020 7769 6467 6574 3d6f          widget=o
-000312b0: 7574 7075 745f 7769 6467 6574 2c20 706f  utput_widget, po
-000312c0: 7369 7469 6f6e 3d22 626f 7474 6f6d 7269  sition="bottomri
-000312d0: 6768 7422 0d0a 2020 2020 2020 2020 290d  ght"..        ).
-000312e0: 0a0d 0a20 2020 2020 2020 2069 6620 696e  ...        if in
-000312f0: 666f 5f6d 6f64 6520 696e 205b 226f 6e5f  fo_mode in ["on_
-00031300: 686f 7665 7222 2c20 226f 6e5f 636c 6963  hover", "on_clic
-00031310: 6b22 5d3a 0d0a 2020 2020 2020 2020 2020  k"]:..          
-00031320: 2020 7365 6c66 2e61 6464 5f63 6f6e 7472    self.add_contr
-00031330: 6f6c 2869 6e66 6f5f 636f 6e74 726f 6c29  ol(info_control)
-00031340: 0d0a 0d0a 2020 2020 2020 2020 6465 6620  ....        def 
-00031350: 746f 6f6c 6261 725f 6274 6e5f 636c 6963  toolbar_btn_clic
-00031360: 6b28 6368 616e 6765 293a 0d0a 2020 2020  k(change):..    
-00031370: 2020 2020 2020 2020 6966 2063 6861 6e67          if chang
-00031380: 655b 226e 6577 225d 3a0d 0a20 2020 2020  e["new"]:..     
-00031390: 2020 2020 2020 2020 2020 2063 6c6f 7365             close
-000313a0: 5f62 7574 746f 6e2e 7661 6c75 6520 3d20  _button.value = 
-000313b0: 4661 6c73 650d 0a20 2020 2020 2020 2020  False..         
-000313c0: 2020 2020 2020 206f 7574 7075 745f 7769         output_wi
-000313d0: 6467 6574 2e63 6869 6c64 7265 6e20 3d20  dget.children = 
-000313e0: 5b0d 0a20 2020 2020 2020 2020 2020 2020  [..             
-000313f0: 2020 2020 2020 2077 6964 6765 7473 2e56         widgets.V
-00031400: 426f 7828 5b77 6964 6765 7473 2e48 426f  Box([widgets.HBo
-00031410: 7828 5b74 6f6f 6c62 6172 5f62 7574 746f  x([toolbar_butto
-00031420: 6e2c 2063 6c6f 7365 5f62 7574 746f 6e5d  n, close_button]
-00031430: 292c 2068 746d 6c5d 290d 0a20 2020 2020  ), html])..     
-00031440: 2020 2020 2020 2020 2020 205d 0d0a 2020             ]..  
-00031450: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
-00031460: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00031470: 206f 7574 7075 745f 7769 6467 6574 2e63   output_widget.c
-00031480: 6869 6c64 7265 6e20 3d20 5b77 6964 6765  hildren = [widge
-00031490: 7473 2e48 426f 7828 5b74 6f6f 6c62 6172  ts.HBox([toolbar
-000314a0: 5f62 7574 746f 6e2c 2063 6c6f 7365 5f62  _button, close_b
-000314b0: 7574 746f 6e5d 295d 0d0a 0d0a 2020 2020  utton])]....    
-000314c0: 2020 2020 746f 6f6c 6261 725f 6275 7474      toolbar_butt
-000314d0: 6f6e 2e6f 6273 6572 7665 2874 6f6f 6c62  on.observe(toolb
-000314e0: 6172 5f62 746e 5f63 6c69 636b 2c20 2276  ar_btn_click, "v
-000314f0: 616c 7565 2229 0d0a 0d0a 2020 2020 2020  alue")....      
-00031500: 2020 6465 6620 636c 6f73 655f 6274 6e5f    def close_btn_
-00031510: 636c 6963 6b28 6368 616e 6765 293a 0d0a  click(change):..
-00031520: 2020 2020 2020 2020 2020 2020 6966 2063              if c
-00031530: 6861 6e67 655b 226e 6577 225d 3a0d 0a20  hange["new"]:.. 
-00031540: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-00031550: 6f6f 6c62 6172 5f62 7574 746f 6e2e 7661  oolbar_button.va
-00031560: 6c75 6520 3d20 4661 6c73 650d 0a20 2020  lue = False..   
-00031570: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00031580: 696e 666f 5f63 6f6e 7472 6f6c 2069 6e20  info_control in 
-00031590: 7365 6c66 2e63 6f6e 7472 6f6c 733a 0d0a  self.controls:..
-000315a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000315b0: 2020 2020 7365 6c66 2e72 656d 6f76 655f      self.remove_
-000315c0: 636f 6e74 726f 6c28 696e 666f 5f63 6f6e  control(info_con
-000315d0: 7472 6f6c 290d 0a20 2020 2020 2020 2020  trol)..         
-000315e0: 2020 2020 2020 206f 7574 7075 745f 7769         output_wi
-000315f0: 6467 6574 2e63 6c6f 7365 2829 0d0a 0d0a  dget.close()....
-00031600: 2020 2020 2020 2020 636c 6f73 655f 6275          close_bu
-00031610: 7474 6f6e 2e6f 6273 6572 7665 2863 6c6f  tton.observe(clo
-00031620: 7365 5f62 746e 5f63 6c69 636b 2c20 2276  se_btn_click, "v
-00031630: 616c 7565 2229 0d0a 0d0a 2020 2020 2020  alue")....      
-00031640: 2020 6465 6620 7570 6461 7465 5f68 746d    def update_htm
-00031650: 6c28 6665 6174 7572 652c 202a 2a6b 7761  l(feature, **kwa
-00031660: 7267 7329 3a0d 0a0d 0a20 2020 2020 2020  rgs):....       
-00031670: 2020 2020 2076 616c 7565 203d 205b 0d0a       value = [..
-00031680: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00031690: 223c 6835 3e3c 623e 7b7d 3a20 3c2f 623e  "<h5><b>{}: </b>
-000316a0: 7b7d 3c2f 6835 3e22 2e66 6f72 6d61 7428  {}</h5>".format(
-000316b0: 7072 6f70 2c20 6665 6174 7572 655b 2270  prop, feature["p
-000316c0: 726f 7065 7274 6965 7322 5d5b 7072 6f70  roperties"][prop
-000316d0: 5d29 0d0a 2020 2020 2020 2020 2020 2020  ])..            
-000316e0: 2020 2020 666f 7220 7072 6f70 2069 6e20      for prop in 
-000316f0: 6665 6174 7572 655b 2270 726f 7065 7274  feature["propert
-00031700: 6965 7322 5d2e 6b65 7973 2829 0d0a 2020  ies"].keys()..  
-00031710: 2020 2020 2020 2020 2020 5d5b 3a2d 315d            ][:-1]
-00031720: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00031730: 7661 6c75 6520 3d20 2222 227b 7d22 2222  value = """{}"""
-00031740: 2e66 6f72 6d61 7428 2222 2e6a 6f69 6e28  .format("".join(
-00031750: 7661 6c75 6529 290d 0a20 2020 2020 2020  value))..       
-00031760: 2020 2020 2068 746d 6c2e 7661 6c75 6520       html.value 
-00031770: 3d20 7661 6c75 650d 0a0d 0a20 2020 2020  = value....     
-00031780: 2020 2069 6620 7374 796c 655f 6361 6c6c     if style_call
-00031790: 6261 636b 2069 7320 4e6f 6e65 3a0d 0a20  back is None:.. 
-000317a0: 2020 2020 2020 2020 2020 2073 7479 6c65             style
-000317b0: 5f63 616c 6c62 6163 6b20 3d20 7261 6e64  _callback = rand
-000317c0: 6f6d 5f63 6f6c 6f72 0d0a 0d0a 2020 2020  om_color....    
-000317d0: 2020 2020 6966 2073 7479 6c65 5f63 616c      if style_cal
-000317e0: 6c62 6163 6b5f 6f6e 6c79 3a0d 0a20 2020  lback_only:..   
-000317f0: 2020 2020 2020 2020 2067 656f 6a73 6f6e           geojson
-00031800: 203d 2069 7079 6c65 6166 6c65 742e 4765   = ipyleaflet.Ge
-00031810: 6f4a 534f 4e28 0d0a 2020 2020 2020 2020  oJSON(..        
-00031820: 2020 2020 2020 2020 6461 7461 3d64 6174          data=dat
-00031830: 612c 0d0a 2020 2020 2020 2020 2020 2020  a,..            
-00031840: 2020 2020 686f 7665 725f 7374 796c 653d      hover_style=
-00031850: 686f 7665 725f 7374 796c 652c 0d0a 2020  hover_style,..  
-00031860: 2020 2020 2020 2020 2020 2020 2020 7374                st
-00031870: 796c 655f 6361 6c6c 6261 636b 3d73 7479  yle_callback=sty
-00031880: 6c65 5f63 616c 6c62 6163 6b2c 0d0a 2020  le_callback,..  
-00031890: 2020 2020 2020 2020 2020 2020 2020 6e61                na
-000318a0: 6d65 3d6c 6179 6572 5f6e 616d 652c 0d0a  me=layer_name,..
-000318b0: 2020 2020 2020 2020 2020 2020 290d 0a20              ).. 
-000318c0: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
-000318d0: 2020 2020 2020 2020 2020 6765 6f6a 736f            geojso
-000318e0: 6e20 3d20 6970 796c 6561 666c 6574 2e47  n = ipyleaflet.G
-000318f0: 656f 4a53 4f4e 280d 0a20 2020 2020 2020  eoJSON(..       
-00031900: 2020 2020 2020 2020 2064 6174 613d 6461           data=da
-00031910: 7461 2c0d 0a20 2020 2020 2020 2020 2020  ta,..           
-00031920: 2020 2020 2073 7479 6c65 3d73 7479 6c65       style=style
-00031930: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00031940: 2020 2068 6f76 6572 5f73 7479 6c65 3d68     hover_style=h
-00031950: 6f76 6572 5f73 7479 6c65 2c0d 0a20 2020  over_style,..   
-00031960: 2020 2020 2020 2020 2020 2020 2073 7479               sty
-00031970: 6c65 5f63 616c 6c62 6163 6b3d 7374 796c  le_callback=styl
-00031980: 655f 6361 6c6c 6261 636b 2c0d 0a20 2020  e_callback,..   
-00031990: 2020 2020 2020 2020 2020 2020 206e 616d               nam
-000319a0: 653d 6c61 7965 725f 6e61 6d65 2c0d 0a20  e=layer_name,.. 
-000319b0: 2020 2020 2020 2020 2020 2029 0d0a 0d0a             )....
-000319c0: 2020 2020 2020 2020 6966 2069 6e66 6f5f          if info_
-000319d0: 6d6f 6465 203d 3d20 226f 6e5f 686f 7665  mode == "on_hove
-000319e0: 7222 3a0d 0a20 2020 2020 2020 2020 2020  r":..           
-000319f0: 2067 656f 6a73 6f6e 2e6f 6e5f 686f 7665   geojson.on_hove
-00031a00: 7228 7570 6461 7465 5f68 746d 6c29 0d0a  r(update_html)..
-00031a10: 2020 2020 2020 2020 656c 6966 2069 6e66          elif inf
-00031a20: 6f5f 6d6f 6465 203d 3d20 226f 6e5f 636c  o_mode == "on_cl
-00031a30: 6963 6b22 3a0d 0a20 2020 2020 2020 2020  ick":..         
-00031a40: 2020 2067 656f 6a73 6f6e 2e6f 6e5f 636c     geojson.on_cl
-00031a50: 6963 6b28 7570 6461 7465 5f68 746d 6c29  ick(update_html)
-00031a60: 0d0a 0d0a 2020 2020 2020 2020 7365 6c66  ....        self
-00031a70: 2e61 6464 5f6c 6179 6572 2867 656f 6a73  .add_layer(geojs
-00031a80: 6f6e 290d 0a0d 0a20 2020 2064 6566 2061  on)....    def a
-00031a90: 6464 5f6b 6d6c 280d 0a20 2020 2020 2020  dd_kml(..       
-00031aa0: 2073 656c 662c 0d0a 2020 2020 2020 2020   self,..        
-00031ab0: 696e 5f6b 6d6c 2c0d 0a20 2020 2020 2020  in_kml,..       
-00031ac0: 206c 6179 6572 5f6e 616d 653d 2255 6e74   layer_name="Unt
-00031ad0: 6974 6c65 6422 2c0d 0a20 2020 2020 2020  itled",..       
-00031ae0: 2073 7479 6c65 3d7b 7d2c 0d0a 2020 2020   style={},..    
-00031af0: 2020 2020 686f 7665 725f 7374 796c 653d      hover_style=
-00031b00: 7b7d 2c0d 0a20 2020 2020 2020 2073 7479  {},..        sty
-00031b10: 6c65 5f63 616c 6c62 6163 6b3d 4e6f 6e65  le_callback=None
-00031b20: 2c0d 0a20 2020 2020 2020 2066 696c 6c5f  ,..        fill_
-00031b30: 636f 6c6f 7273 3d5b 2262 6c61 636b 225d  colors=["black"]
-00031b40: 2c0d 0a20 2020 2020 2020 2069 6e66 6f5f  ,..        info_
-00031b50: 6d6f 6465 3d22 6f6e 5f68 6f76 6572 222c  mode="on_hover",
-00031b60: 0d0a 2020 2020 293a 0d0a 2020 2020 2020  ..    ):..      
-00031b70: 2020 2222 2241 6464 7320 6120 4765 6f4a    """Adds a GeoJ
-00031b80: 534f 4e20 6669 6c65 2074 6f20 7468 6520  SON file to the 
-00031b90: 6d61 702e 0d0a 0d0a 2020 2020 2020 2020  map.....        
-00031ba0: 4172 6773 3a0d 0a20 2020 2020 2020 2020  Args:..         
-00031bb0: 2020 2069 6e5f 6b6d 6c20 2873 7472 293a     in_kml (str):
-00031bc0: 2054 6865 2069 6e70 7574 2066 696c 6520   The input file 
-00031bd0: 7061 7468 2074 6f20 7468 6520 4b4d 4c2e  path to the KML.
-00031be0: 0d0a 2020 2020 2020 2020 2020 2020 6c61  ..            la
-00031bf0: 7965 725f 6e61 6d65 2028 7374 722c 206f  yer_name (str, o
-00031c00: 7074 696f 6e61 6c29 3a20 5468 6520 6c61  ptional): The la
-00031c10: 7965 7220 6e61 6d65 2074 6f20 6265 2075  yer name to be u
-00031c20: 7365 642e 2e20 4465 6661 756c 7473 2074  sed.. Defaults t
-00031c30: 6f20 2255 6e74 6974 6c65 6422 2e0d 0a20  o "Untitled"... 
-00031c40: 2020 2020 2020 2020 2020 2073 7479 6c65             style
-00031c50: 2028 6469 6374 2c20 6f70 7469 6f6e 616c   (dict, optional
-00031c60: 293a 2041 2064 6963 7469 6f6e 6172 7920  ): A dictionary 
-00031c70: 7370 6563 6966 7969 6e67 2074 6865 2073  specifying the s
-00031c80: 7479 6c65 2074 6f20 6265 2075 7365 642e  tyle to be used.
-00031c90: 2044 6566 6175 6c74 7320 746f 207b 7d2e   Defaults to {}.
-00031ca0: 0d0a 2020 2020 2020 2020 2020 2020 686f  ..            ho
-00031cb0: 7665 725f 7374 796c 6520 2864 6963 742c  ver_style (dict,
-00031cc0: 206f 7074 696f 6e61 6c29 3a20 486f 7665   optional): Hove
-00031cd0: 7220 7374 796c 6520 6469 6374 696f 6e61  r style dictiona
-00031ce0: 7279 2e20 4465 6661 756c 7473 2074 6f20  ry. Defaults to 
-00031cf0: 7b7d 2e0d 0a20 2020 2020 2020 2020 2020  {}...           
-00031d00: 2073 7479 6c65 5f63 616c 6c62 6163 6b20   style_callback 
-00031d10: 2866 756e 6374 696f 6e2c 206f 7074 696f  (function, optio
-00031d20: 6e61 6c29 3a20 5374 796c 696e 6720 6675  nal): Styling fu
-00031d30: 6e63 7469 6f6e 2074 6861 7420 6973 2063  nction that is c
-00031d40: 616c 6c65 6420 666f 7220 6561 6368 2066  alled for each f
-00031d50: 6561 7475 7265 2c20 616e 6420 7368 6f75  eature, and shou
-00031d60: 6c64 2072 6574 7572 6e20 7468 6520 6665  ld return the fe
-00031d70: 6174 7572 6520 7374 796c 652e 2054 6869  ature style. Thi
-00031d80: 7320 7374 796c 696e 6720 6675 6e63 7469  s styling functi
-00031d90: 6f6e 2074 616b 6573 2074 6865 2066 6561  on takes the fea
-00031da0: 7475 7265 2061 7320 6172 6775 6d65 6e74  ture as argument
-00031db0: 2e20 4465 6661 756c 7473 2074 6f20 4e6f  . Defaults to No
-00031dc0: 6e65 2e0d 0a20 2020 2020 2020 2020 2020  ne...           
-00031dd0: 2066 696c 6c5f 636f 6c6f 7273 2028 6c69   fill_colors (li
-00031de0: 7374 2c20 6f70 7469 6f6e 616c 293a 2054  st, optional): T
-00031df0: 6865 2072 616e 646f 6d20 636f 6c6f 7273  he random colors
-00031e00: 2074 6f20 7573 6520 666f 7220 6669 6c6c   to use for fill
-00031e10: 696e 6720 706f 6c79 676f 6e73 2e20 4465  ing polygons. De
-00031e20: 6661 756c 7473 2074 6f20 5b22 626c 6163  faults to ["blac
-00031e30: 6b22 5d2e 0d0a 2020 2020 2020 2020 2020  k"]...          
-00031e40: 2020 696e 666f 5f6d 6f64 6520 2873 7472    info_mode (str
-00031e50: 2c20 6f70 7469 6f6e 616c 293a 2044 6973  , optional): Dis
-00031e60: 706c 6179 7320 7468 6520 6174 7472 6962  plays the attrib
-00031e70: 7574 6573 2062 7920 6569 7468 6572 206f  utes by either o
-00031e80: 6e5f 686f 7665 7220 6f72 206f 6e5f 636c  n_hover or on_cl
-00031e90: 6963 6b2e 2041 6e79 2076 616c 7565 206f  ick. Any value o
-00031ea0: 7468 6572 2074 6861 6e20 226f 6e5f 686f  ther than "on_ho
-00031eb0: 7665 7222 206f 7220 226f 6e5f 636c 6963  ver" or "on_clic
-00031ec0: 6b22 2077 696c 6c20 6265 2074 7265 6174  k" will be treat
-00031ed0: 6564 2061 7320 4e6f 6e65 2e20 4465 6661  ed as None. Defa
-00031ee0: 756c 7473 2074 6f20 226f 6e5f 686f 7665  ults to "on_hove
-00031ef0: 7222 2e0d 0a0d 0a20 2020 2020 2020 2052  r".....        R
-00031f00: 6169 7365 733a 0d0a 2020 2020 2020 2020  aises:..        
-00031f10: 2020 2020 4669 6c65 4e6f 7446 6f75 6e64      FileNotFound
-00031f20: 4572 726f 723a 2054 6865 2070 726f 7669  Error: The provi
-00031f30: 6465 6420 4b4d 4c20 6669 6c65 2063 6f75  ded KML file cou
-00031f40: 6c64 206e 6f74 2062 6520 666f 756e 642e  ld not be found.
-00031f50: 0d0a 2020 2020 2020 2020 2222 220d 0a0d  ..        """...
-00031f60: 0a20 2020 2020 2020 2069 6e5f 6b6d 6c20  .        in_kml 
-00031f70: 3d20 6f73 2e70 6174 682e 6162 7370 6174  = os.path.abspat
-00031f80: 6828 696e 5f6b 6d6c 290d 0a20 2020 2020  h(in_kml)..     
-00031f90: 2020 2069 6620 6e6f 7420 6f73 2e70 6174     if not os.pat
-00031fa0: 682e 6578 6973 7473 2869 6e5f 6b6d 6c29  h.exists(in_kml)
-00031fb0: 3a0d 0a20 2020 2020 2020 2020 2020 2072  :..            r
-00031fc0: 6169 7365 2046 696c 654e 6f74 466f 756e  aise FileNotFoun
-00031fd0: 6445 7272 6f72 2822 5468 6520 7072 6f76  dError("The prov
-00031fe0: 6964 6564 204b 4d4c 2066 696c 6520 636f  ided KML file co
-00031ff0: 756c 6420 6e6f 7420 6265 2066 6f75 6e64  uld not be found
-00032000: 2e22 290d 0a20 2020 2020 2020 2073 656c  .")..        sel
-00032010: 662e 6164 645f 7665 6374 6f72 280d 0a20  f.add_vector(.. 
-00032020: 2020 2020 2020 2020 2020 2069 6e5f 6b6d             in_km
-00032030: 6c2c 0d0a 2020 2020 2020 2020 2020 2020  l,..            
-00032040: 6c61 7965 725f 6e61 6d65 2c0d 0a20 2020  layer_name,..   
-00032050: 2020 2020 2020 2020 2073 7479 6c65 3d73           style=s
-00032060: 7479 6c65 2c0d 0a20 2020 2020 2020 2020  tyle,..         
-00032070: 2020 2068 6f76 6572 5f73 7479 6c65 3d68     hover_style=h
-00032080: 6f76 6572 5f73 7479 6c65 2c0d 0a20 2020  over_style,..   
-00032090: 2020 2020 2020 2020 2073 7479 6c65 5f63           style_c
-000320a0: 616c 6c62 6163 6b3d 7374 796c 655f 6361  allback=style_ca
-000320b0: 6c6c 6261 636b 2c0d 0a20 2020 2020 2020  llback,..       
-000320c0: 2020 2020 2066 696c 6c5f 636f 6c6f 7273       fill_colors
-000320d0: 3d66 696c 6c5f 636f 6c6f 7273 2c0d 0a20  =fill_colors,.. 
-000320e0: 2020 2020 2020 2020 2020 2069 6e66 6f5f             info_
-000320f0: 6d6f 6465 3d69 6e66 6f5f 6d6f 6465 2c0d  mode=info_mode,.
-00032100: 0a20 2020 2020 2020 2029 0d0a 0d0a 2020  .        )....  
-00032110: 2020 6465 6620 6164 645f 7665 6374 6f72    def add_vector
-00032120: 280d 0a20 2020 2020 2020 2073 656c 662c  (..        self,
-00032130: 0d0a 2020 2020 2020 2020 6669 6c65 6e61  ..        filena
-00032140: 6d65 2c0d 0a20 2020 2020 2020 206c 6179  me,..        lay
-00032150: 6572 5f6e 616d 653d 2255 6e74 6974 6c65  er_name="Untitle
-00032160: 6422 2c0d 0a20 2020 2020 2020 2074 6f5f  d",..        to_
-00032170: 6565 3d46 616c 7365 2c0d 0a20 2020 2020  ee=False,..     
-00032180: 2020 2062 626f 783d 4e6f 6e65 2c0d 0a20     bbox=None,.. 
-00032190: 2020 2020 2020 206d 6173 6b3d 4e6f 6e65         mask=None
-000321a0: 2c0d 0a20 2020 2020 2020 2072 6f77 733d  ,..        rows=
-000321b0: 4e6f 6e65 2c0d 0a20 2020 2020 2020 2073  None,..        s
-000321c0: 7479 6c65 3d7b 7d2c 0d0a 2020 2020 2020  tyle={},..      
-000321d0: 2020 686f 7665 725f 7374 796c 653d 7b7d    hover_style={}
-000321e0: 2c0d 0a20 2020 2020 2020 2073 7479 6c65  ,..        style
-000321f0: 5f63 616c 6c62 6163 6b3d 4e6f 6e65 2c0d  _callback=None,.
-00032200: 0a20 2020 2020 2020 2066 696c 6c5f 636f  .        fill_co
-00032210: 6c6f 7273 3d5b 2262 6c61 636b 225d 2c0d  lors=["black"],.
-00032220: 0a20 2020 2020 2020 2069 6e66 6f5f 6d6f  .        info_mo
-00032230: 6465 3d22 6f6e 5f68 6f76 6572 222c 0d0a  de="on_hover",..
-00032240: 2020 2020 2020 2020 2a2a 6b77 6172 6773          **kwargs
-00032250: 2c0d 0a20 2020 2029 3a0d 0a20 2020 2020  ,..    ):..     
-00032260: 2020 2022 2222 4164 6473 2061 6e79 2067     """Adds any g
-00032270: 656f 7061 6e64 6173 2d73 7570 706f 7274  eopandas-support
-00032280: 6564 2076 6563 746f 7220 6461 7461 7365  ed vector datase
-00032290: 7420 746f 2074 6865 206d 6170 2e0d 0a0d  t to the map....
-000322a0: 0a20 2020 2020 2020 2041 7267 733a 0d0a  .        Args:..
-000322b0: 2020 2020 2020 2020 2020 2020 6669 6c65              file
-000322c0: 6e61 6d65 2028 7374 7229 3a20 4569 7468  name (str): Eith
-000322d0: 6572 2074 6865 2061 6273 6f6c 7574 6520  er the absolute 
-000322e0: 6f72 2072 656c 6174 6976 6520 7061 7468  or relative path
-000322f0: 2074 6f20 7468 6520 6669 6c65 206f 7220   to the file or 
-00032300: 5552 4c20 746f 2062 6520 6f70 656e 6564  URL to be opened
-00032310: 2c20 6f72 2061 6e79 206f 626a 6563 7420  , or any object 
-00032320: 7769 7468 2061 2072 6561 6428 2920 6d65  with a read() me
-00032330: 7468 6f64 2028 7375 6368 2061 7320 616e  thod (such as an
-00032340: 206f 7065 6e20 6669 6c65 206f 7220 5374   open file or St
-00032350: 7269 6e67 494f 292e 0d0a 2020 2020 2020  ringIO)...      
-00032360: 2020 2020 2020 6c61 7965 725f 6e61 6d65        layer_name
-00032370: 2028 7374 722c 206f 7074 696f 6e61 6c29   (str, optional)
-00032380: 3a20 5468 6520 6c61 7965 7220 6e61 6d65  : The layer name
-00032390: 2074 6f20 7573 652e 2044 6566 6175 6c74   to use. Default
-000323a0: 7320 746f 2022 556e 7469 746c 6564 222e  s to "Untitled".
-000323b0: 0d0a 2020 2020 2020 2020 2020 2020 746f  ..            to
-000323c0: 5f65 6520 2862 6f6f 6c2c 206f 7074 696f  _ee (bool, optio
-000323d0: 6e61 6c29 3a20 5768 6574 6865 7220 746f  nal): Whether to
-000323e0: 2063 6f6e 7665 7274 2074 6865 2047 656f   convert the Geo
-000323f0: 4a53 4f4e 2074 6f20 6565 2e46 6561 7475  JSON to ee.Featu
-00032400: 7265 436f 6c6c 6563 7469 6f6e 2e20 4465  reCollection. De
-00032410: 6661 756c 7473 2074 6f20 4661 6c73 652e  faults to False.
-00032420: 0d0a 2020 2020 2020 2020 2020 2020 6262  ..            bb
-00032430: 6f78 2028 7475 706c 6520 7c20 4765 6f44  ox (tuple | GeoD
-00032440: 6174 6146 7261 6d65 206f 7220 4765 6f53  ataFrame or GeoS
-00032450: 6572 6965 7320 7c20 7368 6170 656c 7920  eries | shapely 
-00032460: 4765 6f6d 6574 7279 2c20 6f70 7469 6f6e  Geometry, option
-00032470: 616c 293a 2046 696c 7465 7220 6665 6174  al): Filter feat
-00032480: 7572 6573 2062 7920 6769 7665 6e20 626f  ures by given bo
-00032490: 756e 6469 6e67 2062 6f78 2c20 4765 6f53  unding box, GeoS
-000324a0: 6572 6965 732c 2047 656f 4461 7461 4672  eries, GeoDataFr
-000324b0: 616d 6520 6f72 2061 2073 6861 7065 6c79  ame or a shapely
-000324c0: 2067 656f 6d65 7472 792e 2043 5253 206d   geometry. CRS m
-000324d0: 6973 2d6d 6174 6368 6573 2061 7265 2072  is-matches are r
-000324e0: 6573 6f6c 7665 6420 6966 2067 6976 656e  esolved if given
-000324f0: 2061 2047 656f 5365 7269 6573 206f 7220   a GeoSeries or 
-00032500: 4765 6f44 6174 6146 7261 6d65 2e20 4361  GeoDataFrame. Ca
-00032510: 6e6e 6f74 2062 6520 7573 6564 2077 6974  nnot be used wit
-00032520: 6820 6d61 736b 2e20 4465 6661 756c 7473  h mask. Defaults
-00032530: 2074 6f20 4e6f 6e65 2e0d 0a20 2020 2020   to None...     
-00032540: 2020 2020 2020 206d 6173 6b20 2864 6963         mask (dic
-00032550: 7420 7c20 4765 6f44 6174 6146 7261 6d65  t | GeoDataFrame
-00032560: 206f 7220 4765 6f53 6572 6965 7320 7c20   or GeoSeries | 
-00032570: 7368 6170 656c 7920 4765 6f6d 6574 7279  shapely Geometry
-00032580: 2c20 6f70 7469 6f6e 616c 293a 2046 696c  , optional): Fil
-00032590: 7465 7220 666f 7220 6665 6174 7572 6573  ter for features
-000325a0: 2074 6861 7420 696e 7465 7273 6563 7420   that intersect 
-000325b0: 7769 7468 2074 6865 2067 6976 656e 2064  with the given d
-000325c0: 6963 742d 6c69 6b65 2067 656f 6a73 6f6e  ict-like geojson
-000325d0: 2067 656f 6d65 7472 792c 2047 656f 5365   geometry, GeoSe
-000325e0: 7269 6573 2c20 4765 6f44 6174 6146 7261  ries, GeoDataFra
-000325f0: 6d65 206f 7220 7368 6170 656c 7920 6765  me or shapely ge
-00032600: 6f6d 6574 7279 2e20 4352 5320 6d69 732d  ometry. CRS mis-
-00032610: 6d61 7463 6865 7320 6172 6520 7265 736f  matches are reso
-00032620: 6c76 6564 2069 6620 6769 7665 6e20 6120  lved if given a 
-00032630: 4765 6f53 6572 6965 7320 6f72 2047 656f  GeoSeries or Geo
-00032640: 4461 7461 4672 616d 652e 2043 616e 6e6f  DataFrame. Canno
-00032650: 7420 6265 2075 7365 6420 7769 7468 2062  t be used with b
-00032660: 626f 782e 2044 6566 6175 6c74 7320 746f  box. Defaults to
-00032670: 204e 6f6e 652e 0d0a 2020 2020 2020 2020   None...        
-00032680: 2020 2020 726f 7773 2028 696e 7420 6f72      rows (int or
-00032690: 2073 6c69 6365 2c20 6f70 7469 6f6e 616c   slice, optional
-000326a0: 293a 204c 6f61 6420 696e 2073 7065 6369  ): Load in speci
-000326b0: 6669 6320 726f 7773 2062 7920 7061 7373  fic rows by pass
-000326c0: 696e 6720 616e 2069 6e74 6567 6572 2028  ing an integer (
-000326d0: 6669 7273 7420 6e20 726f 7773 2920 6f72  first n rows) or
-000326e0: 2061 2073 6c69 6365 2829 206f 626a 6563   a slice() objec
-000326f0: 742e 2e20 4465 6661 756c 7473 2074 6f20  t.. Defaults to 
+00030a00: 6461 7461 203d 2072 6571 7565 7374 732e  data = requests.
+00030a10: 6765 7428 696e 5f67 656f 6a73 6f6e 292e  get(in_geojson).
+00030a20: 6a73 6f6e 2829 0d0a 2020 2020 2020 2020  json()..        
+00030a30: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
+00030a40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00030a50: 2020 2069 6e5f 6765 6f6a 736f 6e20 3d20     in_geojson = 
+00030a60: 6f73 2e70 6174 682e 6162 7370 6174 6828  os.path.abspath(
+00030a70: 696e 5f67 656f 6a73 6f6e 290d 0a20 2020  in_geojson)..   
+00030a80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00030a90: 2069 6620 6e6f 7420 6f73 2e70 6174 682e   if not os.path.
+00030aa0: 6578 6973 7473 2869 6e5f 6765 6f6a 736f  exists(in_geojso
+00030ab0: 6e29 3a0d 0a20 2020 2020 2020 2020 2020  n):..           
+00030ac0: 2020 2020 2020 2020 2020 2020 2072 6169               rai
+00030ad0: 7365 2046 696c 654e 6f74 466f 756e 6445  se FileNotFoundE
+00030ae0: 7272 6f72 280d 0a20 2020 2020 2020 2020  rror(..         
+00030af0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00030b00: 2020 2022 5468 6520 7072 6f76 6964 6564     "The provided
+00030b10: 2047 656f 4a53 4f4e 2066 696c 6520 636f   GeoJSON file co
+00030b20: 756c 6420 6e6f 7420 6265 2066 6f75 6e64  uld not be found
+00030b30: 2e22 0d0a 2020 2020 2020 2020 2020 2020  ."..            
+00030b40: 2020 2020 2020 2020 2020 2020 290d 0a0d              )...
+00030b50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00030b60: 2020 2020 2077 6974 6820 6f70 656e 2869       with open(i
+00030b70: 6e5f 6765 6f6a 736f 6e2c 2065 6e63 6f64  n_geojson, encod
+00030b80: 696e 673d 2275 7466 2d38 2229 2061 7320  ing="utf-8") as 
+00030b90: 663a 0d0a 2020 2020 2020 2020 2020 2020  f:..            
+00030ba0: 2020 2020 2020 2020 2020 2020 6461 7461              data
+00030bb0: 203d 206a 736f 6e2e 6c6f 6164 2866 290d   = json.load(f).
+00030bc0: 0a20 2020 2020 2020 2020 2020 2065 6c69  .            eli
+00030bd0: 6620 6973 696e 7374 616e 6365 2869 6e5f  f isinstance(in_
+00030be0: 6765 6f6a 736f 6e2c 2064 6963 7429 3a0d  geojson, dict):.
+00030bf0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00030c00: 2064 6174 6120 3d20 696e 5f67 656f 6a73   data = in_geojs
+00030c10: 6f6e 0d0a 2020 2020 2020 2020 2020 2020  on..            
+00030c20: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
+00030c30: 2020 2020 2020 2072 6169 7365 2054 7970         raise Typ
+00030c40: 6545 7272 6f72 2822 5468 6520 696e 7075  eError("The inpu
+00030c50: 7420 6765 6f6a 736f 6e20 6d75 7374 2062  t geojson must b
+00030c60: 6520 6120 7479 7065 206f 6620 7374 7220  e a type of str 
+00030c70: 6f72 2064 6963 742e 2229 0d0a 2020 2020  or dict.")..    
+00030c80: 2020 2020 6578 6365 7074 2045 7863 6570      except Excep
+00030c90: 7469 6f6e 2061 7320 653a 0d0a 2020 2020  tion as e:..    
+00030ca0: 2020 2020 2020 2020 7261 6973 6520 4578          raise Ex
+00030cb0: 6365 7074 696f 6e28 6529 0d0a 0d0a 2020  ception(e)....  
+00030cc0: 2020 2020 2020 6966 206e 6f74 2073 7479        if not sty
+00030cd0: 6c65 3a0d 0a20 2020 2020 2020 2020 2020  le:..           
+00030ce0: 2073 7479 6c65 203d 207b 0d0a 2020 2020   style = {..    
+00030cf0: 2020 2020 2020 2020 2020 2020 2320 2273              # "s
+00030d00: 7472 6f6b 6522 3a20 5472 7565 2c0d 0a20  troke": True,.. 
+00030d10: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00030d20: 636f 6c6f 7222 3a20 2223 3030 3030 3030  color": "#000000
+00030d30: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
+00030d40: 2020 2020 2277 6569 6768 7422 3a20 312c      "weight": 1,
+00030d50: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00030d60: 2020 226f 7061 6369 7479 223a 2031 2c0d    "opacity": 1,.
+00030d70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00030d80: 2023 2022 6669 6c6c 223a 2054 7275 652c   # "fill": True,
+00030d90: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00030da0: 2020 2320 2266 696c 6c43 6f6c 6f72 223a    # "fillColor":
+00030db0: 2022 2366 6666 6666 6622 2c0d 0a20 2020   "#ffffff",..   
+00030dc0: 2020 2020 2020 2020 2020 2020 2022 6669               "fi
+00030dd0: 6c6c 4f70 6163 6974 7922 3a20 302e 312c  llOpacity": 0.1,
+00030de0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00030df0: 2020 2320 2264 6173 6841 7272 6179 223a    # "dashArray":
+00030e00: 2022 3922 0d0a 2020 2020 2020 2020 2020   "9"..          
+00030e10: 2020 2020 2020 2320 2263 6c69 636b 6162        # "clickab
+00030e20: 6c65 223a 2054 7275 652c 0d0a 2020 2020  le": True,..    
+00030e30: 2020 2020 2020 2020 7d0d 0a20 2020 2020          }..     
+00030e40: 2020 2065 6c69 6620 2277 6569 6768 7422     elif "weight"
+00030e50: 206e 6f74 2069 6e20 7374 796c 653a 0d0a   not in style:..
+00030e60: 2020 2020 2020 2020 2020 2020 7374 796c              styl
+00030e70: 655b 2277 6569 6768 7422 5d20 3d20 310d  e["weight"] = 1.
+00030e80: 0a0d 0a20 2020 2020 2020 2069 6620 6e6f  ...        if no
+00030e90: 7420 686f 7665 725f 7374 796c 653a 0d0a  t hover_style:..
+00030ea0: 2020 2020 2020 2020 2020 2020 686f 7665              hove
+00030eb0: 725f 7374 796c 6520 3d20 7b22 7765 6967  r_style = {"weig
+00030ec0: 6874 223a 2073 7479 6c65 5b22 7765 6967  ht": style["weig
+00030ed0: 6874 225d 202b 2031 2c20 2266 696c 6c4f  ht"] + 1, "fillO
+00030ee0: 7061 6369 7479 223a 2030 2e35 7d0d 0a0d  pacity": 0.5}...
+00030ef0: 0a20 2020 2020 2020 2064 6566 2072 616e  .        def ran
+00030f00: 646f 6d5f 636f 6c6f 7228 6665 6174 7572  dom_color(featur
+00030f10: 6529 3a0d 0a20 2020 2020 2020 2020 2020  e):..           
+00030f20: 2072 6574 7572 6e20 7b0d 0a20 2020 2020   return {..     
+00030f30: 2020 2020 2020 2020 2020 2022 636f 6c6f             "colo
+00030f40: 7222 3a20 2262 6c61 636b 222c 0d0a 2020  r": "black",..  
+00030f50: 2020 2020 2020 2020 2020 2020 2020 2266                "f
+00030f60: 696c 6c43 6f6c 6f72 223a 2072 616e 646f  illColor": rando
+00030f70: 6d2e 6368 6f69 6365 2866 696c 6c5f 636f  m.choice(fill_co
+00030f80: 6c6f 7273 292c 0d0a 2020 2020 2020 2020  lors),..        
+00030f90: 2020 2020 7d0d 0a0d 0a20 2020 2020 2020      }....       
+00030fa0: 2074 6f6f 6c62 6172 5f62 7574 746f 6e20   toolbar_button 
+00030fb0: 3d20 7769 6467 6574 732e 546f 6767 6c65  = widgets.Toggle
+00030fc0: 4275 7474 6f6e 280d 0a20 2020 2020 2020  Button(..       
+00030fd0: 2020 2020 2076 616c 7565 3d54 7275 652c       value=True,
+00030fe0: 0d0a 2020 2020 2020 2020 2020 2020 746f  ..            to
+00030ff0: 6f6c 7469 703d 2254 6f6f 6c62 6172 222c  oltip="Toolbar",
+00031000: 0d0a 2020 2020 2020 2020 2020 2020 6963  ..            ic
+00031010: 6f6e 3d22 696e 666f 222c 0d0a 2020 2020  on="info",..    
+00031020: 2020 2020 2020 2020 6c61 796f 7574 3d77          layout=w
+00031030: 6964 6765 7473 2e4c 6179 6f75 7428 0d0a  idgets.Layout(..
+00031040: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00031050: 7769 6474 683d 2232 3870 7822 2c20 6865  width="28px", he
+00031060: 6967 6874 3d22 3238 7078 222c 2070 6164  ight="28px", pad
+00031070: 6469 6e67 3d22 3070 7820 3070 7820 3070  ding="0px 0px 0p
+00031080: 7820 3470 7822 0d0a 2020 2020 2020 2020  x 4px"..        
+00031090: 2020 2020 292c 0d0a 2020 2020 2020 2020      ),..        
+000310a0: 290d 0a0d 0a20 2020 2020 2020 2063 6c6f  )....        clo
+000310b0: 7365 5f62 7574 746f 6e20 3d20 7769 6467  se_button = widg
+000310c0: 6574 732e 546f 6767 6c65 4275 7474 6f6e  ets.ToggleButton
+000310d0: 280d 0a20 2020 2020 2020 2020 2020 2076  (..            v
+000310e0: 616c 7565 3d46 616c 7365 2c0d 0a20 2020  alue=False,..   
+000310f0: 2020 2020 2020 2020 2074 6f6f 6c74 6970           tooltip
+00031100: 3d22 436c 6f73 6520 7468 6520 746f 6f6c  ="Close the tool
+00031110: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
+00031120: 6963 6f6e 3d22 7469 6d65 7322 2c0d 0a20  icon="times",.. 
+00031130: 2020 2020 2020 2020 2020 2023 2062 7574             # but
+00031140: 746f 6e5f 7374 796c 653d 2270 7269 6d61  ton_style="prima
+00031150: 7279 222c 0d0a 2020 2020 2020 2020 2020  ry",..          
+00031160: 2020 6c61 796f 7574 3d77 6964 6765 7473    layout=widgets
+00031170: 2e4c 6179 6f75 7428 0d0a 2020 2020 2020  .Layout(..      
+00031180: 2020 2020 2020 2020 2020 6865 6967 6874            height
+00031190: 3d22 3238 7078 222c 2077 6964 7468 3d22  ="28px", width="
+000311a0: 3238 7078 222c 2070 6164 6469 6e67 3d22  28px", padding="
+000311b0: 3070 7820 3070 7820 3070 7820 3470 7822  0px 0px 0px 4px"
+000311c0: 0d0a 2020 2020 2020 2020 2020 2020 292c  ..            ),
+000311d0: 0d0a 2020 2020 2020 2020 290d 0a0d 0a20  ..        ).... 
+000311e0: 2020 2020 2020 2068 746d 6c20 3d20 7769         html = wi
+000311f0: 6467 6574 732e 4854 4d4c 2829 0d0a 2020  dgets.HTML()..  
+00031200: 2020 2020 2020 6874 6d6c 2e6c 6179 6f75        html.layou
+00031210: 742e 6d61 7267 696e 203d 2022 3070 7820  t.margin = "0px 
+00031220: 3130 7078 2030 7078 2031 3070 7822 0d0a  10px 0px 10px"..
+00031230: 2020 2020 2020 2020 6874 6d6c 2e6c 6179          html.lay
+00031240: 6f75 742e 6d61 785f 6865 6967 6874 203d  out.max_height =
+00031250: 2022 3235 3070 7822 0d0a 2020 2020 2020   "250px"..      
+00031260: 2020 6874 6d6c 2e6c 6179 6f75 742e 6d61    html.layout.ma
+00031270: 785f 7769 6474 6820 3d20 2232 3530 7078  x_width = "250px
+00031280: 220d 0a0d 0a20 2020 2020 2020 206f 7574  "....        out
+00031290: 7075 745f 7769 6467 6574 203d 2077 6964  put_widget = wid
+000312a0: 6765 7473 2e56 426f 7828 0d0a 2020 2020  gets.VBox(..    
+000312b0: 2020 2020 2020 2020 5b77 6964 6765 7473          [widgets
+000312c0: 2e48 426f 7828 5b74 6f6f 6c62 6172 5f62  .HBox([toolbar_b
+000312d0: 7574 746f 6e2c 2063 6c6f 7365 5f62 7574  utton, close_but
+000312e0: 746f 6e5d 292c 2068 746d 6c5d 0d0a 2020  ton]), html]..  
+000312f0: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
+00031300: 2069 6e66 6f5f 636f 6e74 726f 6c20 3d20   info_control = 
+00031310: 6970 796c 6561 666c 6574 2e57 6964 6765  ipyleaflet.Widge
+00031320: 7443 6f6e 7472 6f6c 280d 0a20 2020 2020  tControl(..     
+00031330: 2020 2020 2020 2077 6964 6765 743d 6f75         widget=ou
+00031340: 7470 7574 5f77 6964 6765 742c 2070 6f73  tput_widget, pos
+00031350: 6974 696f 6e3d 2262 6f74 746f 6d72 6967  ition="bottomrig
+00031360: 6874 220d 0a20 2020 2020 2020 2029 0d0a  ht"..        )..
+00031370: 0d0a 2020 2020 2020 2020 6966 2069 6e66  ..        if inf
+00031380: 6f5f 6d6f 6465 2069 6e20 5b22 6f6e 5f68  o_mode in ["on_h
+00031390: 6f76 6572 222c 2022 6f6e 5f63 6c69 636b  over", "on_click
+000313a0: 225d 3a0d 0a20 2020 2020 2020 2020 2020  "]:..           
+000313b0: 2073 656c 662e 6164 645f 636f 6e74 726f   self.add_contro
+000313c0: 6c28 696e 666f 5f63 6f6e 7472 6f6c 290d  l(info_control).
+000313d0: 0a0d 0a20 2020 2020 2020 2064 6566 2074  ...        def t
+000313e0: 6f6f 6c62 6172 5f62 746e 5f63 6c69 636b  oolbar_btn_click
+000313f0: 2863 6861 6e67 6529 3a0d 0a20 2020 2020  (change):..     
+00031400: 2020 2020 2020 2069 6620 6368 616e 6765         if change
+00031410: 5b22 6e65 7722 5d3a 0d0a 2020 2020 2020  ["new"]:..      
+00031420: 2020 2020 2020 2020 2020 636c 6f73 655f            close_
+00031430: 6275 7474 6f6e 2e76 616c 7565 203d 2046  button.value = F
+00031440: 616c 7365 0d0a 2020 2020 2020 2020 2020  alse..          
+00031450: 2020 2020 2020 6f75 7470 7574 5f77 6964        output_wid
+00031460: 6765 742e 6368 696c 6472 656e 203d 205b  get.children = [
+00031470: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00031480: 2020 2020 2020 7769 6467 6574 732e 5642        widgets.VB
+00031490: 6f78 285b 7769 6467 6574 732e 4842 6f78  ox([widgets.HBox
+000314a0: 285b 746f 6f6c 6261 725f 6275 7474 6f6e  ([toolbar_button
+000314b0: 2c20 636c 6f73 655f 6275 7474 6f6e 5d29  , close_button])
+000314c0: 2c20 6874 6d6c 5d29 0d0a 2020 2020 2020  , html])..      
+000314d0: 2020 2020 2020 2020 2020 5d0d 0a20 2020            ]..   
+000314e0: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
+000314f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00031500: 6f75 7470 7574 5f77 6964 6765 742e 6368  output_widget.ch
+00031510: 696c 6472 656e 203d 205b 7769 6467 6574  ildren = [widget
+00031520: 732e 4842 6f78 285b 746f 6f6c 6261 725f  s.HBox([toolbar_
+00031530: 6275 7474 6f6e 2c20 636c 6f73 655f 6275  button, close_bu
+00031540: 7474 6f6e 5d29 5d0d 0a0d 0a20 2020 2020  tton])]....     
+00031550: 2020 2074 6f6f 6c62 6172 5f62 7574 746f     toolbar_butto
+00031560: 6e2e 6f62 7365 7276 6528 746f 6f6c 6261  n.observe(toolba
+00031570: 725f 6274 6e5f 636c 6963 6b2c 2022 7661  r_btn_click, "va
+00031580: 6c75 6522 290d 0a0d 0a20 2020 2020 2020  lue")....       
+00031590: 2064 6566 2063 6c6f 7365 5f62 746e 5f63   def close_btn_c
+000315a0: 6c69 636b 2863 6861 6e67 6529 3a0d 0a20  lick(change):.. 
+000315b0: 2020 2020 2020 2020 2020 2069 6620 6368             if ch
+000315c0: 616e 6765 5b22 6e65 7722 5d3a 0d0a 2020  ange["new"]:..  
+000315d0: 2020 2020 2020 2020 2020 2020 2020 746f                to
+000315e0: 6f6c 6261 725f 6275 7474 6f6e 2e76 616c  olbar_button.val
+000315f0: 7565 203d 2046 616c 7365 0d0a 2020 2020  ue = False..    
+00031600: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+00031610: 6e66 6f5f 636f 6e74 726f 6c20 696e 2073  nfo_control in s
+00031620: 656c 662e 636f 6e74 726f 6c73 3a0d 0a20  elf.controls:.. 
+00031630: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00031640: 2020 2073 656c 662e 7265 6d6f 7665 5f63     self.remove_c
+00031650: 6f6e 7472 6f6c 2869 6e66 6f5f 636f 6e74  ontrol(info_cont
+00031660: 726f 6c29 0d0a 2020 2020 2020 2020 2020  rol)..          
+00031670: 2020 2020 2020 6f75 7470 7574 5f77 6964        output_wid
+00031680: 6765 742e 636c 6f73 6528 290d 0a0d 0a20  get.close().... 
+00031690: 2020 2020 2020 2063 6c6f 7365 5f62 7574         close_but
+000316a0: 746f 6e2e 6f62 7365 7276 6528 636c 6f73  ton.observe(clos
+000316b0: 655f 6274 6e5f 636c 6963 6b2c 2022 7661  e_btn_click, "va
+000316c0: 6c75 6522 290d 0a0d 0a20 2020 2020 2020  lue")....       
+000316d0: 2064 6566 2075 7064 6174 655f 6874 6d6c   def update_html
+000316e0: 2866 6561 7475 7265 2c20 2a2a 6b77 6172  (feature, **kwar
+000316f0: 6773 293a 0d0a 0d0a 2020 2020 2020 2020  gs):....        
+00031700: 2020 2020 7661 6c75 6520 3d20 5b0d 0a20      value = [.. 
+00031710: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00031720: 3c68 353e 3c62 3e7b 7d3a 203c 2f62 3e7b  <h5><b>{}: </b>{
+00031730: 7d3c 2f68 353e 222e 666f 726d 6174 2870  }</h5>".format(p
+00031740: 726f 702c 2066 6561 7475 7265 5b22 7072  rop, feature["pr
+00031750: 6f70 6572 7469 6573 225d 5b70 726f 705d  operties"][prop]
+00031760: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00031770: 2020 2066 6f72 2070 726f 7020 696e 2066     for prop in f
+00031780: 6561 7475 7265 5b22 7072 6f70 6572 7469  eature["properti
+00031790: 6573 225d 2e6b 6579 7328 290d 0a20 2020  es"].keys()..   
+000317a0: 2020 2020 2020 2020 205d 5b3a 2d31 5d0d           ][:-1].
+000317b0: 0a0d 0a20 2020 2020 2020 2020 2020 2076  ...            v
+000317c0: 616c 7565 203d 2022 2222 7b7d 2222 222e  alue = """{}""".
+000317d0: 666f 726d 6174 2822 222e 6a6f 696e 2876  format("".join(v
+000317e0: 616c 7565 2929 0d0a 2020 2020 2020 2020  alue))..        
+000317f0: 2020 2020 6874 6d6c 2e76 616c 7565 203d      html.value =
+00031800: 2076 616c 7565 0d0a 0d0a 2020 2020 2020   value....      
+00031810: 2020 6966 2073 7479 6c65 5f63 616c 6c62    if style_callb
+00031820: 6163 6b20 6973 204e 6f6e 653a 0d0a 2020  ack is None:..  
+00031830: 2020 2020 2020 2020 2020 7374 796c 655f            style_
+00031840: 6361 6c6c 6261 636b 203d 2072 616e 646f  callback = rando
+00031850: 6d5f 636f 6c6f 720d 0a0d 0a20 2020 2020  m_color....     
+00031860: 2020 2069 6620 7374 796c 655f 6361 6c6c     if style_call
+00031870: 6261 636b 5f6f 6e6c 793a 0d0a 2020 2020  back_only:..    
+00031880: 2020 2020 2020 2020 6765 6f6a 736f 6e20          geojson 
+00031890: 3d20 6970 796c 6561 666c 6574 2e47 656f  = ipyleaflet.Geo
+000318a0: 4a53 4f4e 280d 0a20 2020 2020 2020 2020  JSON(..         
+000318b0: 2020 2020 2020 2064 6174 613d 6461 7461         data=data
+000318c0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+000318d0: 2020 2068 6f76 6572 5f73 7479 6c65 3d68     hover_style=h
+000318e0: 6f76 6572 5f73 7479 6c65 2c0d 0a20 2020  over_style,..   
+000318f0: 2020 2020 2020 2020 2020 2020 2073 7479               sty
+00031900: 6c65 5f63 616c 6c62 6163 6b3d 7374 796c  le_callback=styl
+00031910: 655f 6361 6c6c 6261 636b 2c0d 0a20 2020  e_callback,..   
+00031920: 2020 2020 2020 2020 2020 2020 206e 616d               nam
+00031930: 653d 6c61 7965 725f 6e61 6d65 2c0d 0a20  e=layer_name,.. 
+00031940: 2020 2020 2020 2020 2020 2029 0d0a 2020             )..  
+00031950: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
+00031960: 2020 2020 2020 2020 2067 656f 6a73 6f6e           geojson
+00031970: 203d 2069 7079 6c65 6166 6c65 742e 4765   = ipyleaflet.Ge
+00031980: 6f4a 534f 4e28 0d0a 2020 2020 2020 2020  oJSON(..        
+00031990: 2020 2020 2020 2020 6461 7461 3d64 6174          data=dat
+000319a0: 612c 0d0a 2020 2020 2020 2020 2020 2020  a,..            
+000319b0: 2020 2020 7374 796c 653d 7374 796c 652c      style=style,
+000319c0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000319d0: 2020 686f 7665 725f 7374 796c 653d 686f    hover_style=ho
+000319e0: 7665 725f 7374 796c 652c 0d0a 2020 2020  ver_style,..    
+000319f0: 2020 2020 2020 2020 2020 2020 7374 796c              styl
+00031a00: 655f 6361 6c6c 6261 636b 3d73 7479 6c65  e_callback=style
+00031a10: 5f63 616c 6c62 6163 6b2c 0d0a 2020 2020  _callback,..    
+00031a20: 2020 2020 2020 2020 2020 2020 6e61 6d65              name
+00031a30: 3d6c 6179 6572 5f6e 616d 652c 0d0a 2020  =layer_name,..  
+00031a40: 2020 2020 2020 2020 2020 290d 0a0d 0a20            ).... 
+00031a50: 2020 2020 2020 2069 6620 696e 666f 5f6d         if info_m
+00031a60: 6f64 6520 3d3d 2022 6f6e 5f68 6f76 6572  ode == "on_hover
+00031a70: 223a 0d0a 2020 2020 2020 2020 2020 2020  ":..            
+00031a80: 6765 6f6a 736f 6e2e 6f6e 5f68 6f76 6572  geojson.on_hover
+00031a90: 2875 7064 6174 655f 6874 6d6c 290d 0a20  (update_html).. 
+00031aa0: 2020 2020 2020 2065 6c69 6620 696e 666f         elif info
+00031ab0: 5f6d 6f64 6520 3d3d 2022 6f6e 5f63 6c69  _mode == "on_cli
+00031ac0: 636b 223a 0d0a 2020 2020 2020 2020 2020  ck":..          
+00031ad0: 2020 6765 6f6a 736f 6e2e 6f6e 5f63 6c69    geojson.on_cli
+00031ae0: 636b 2875 7064 6174 655f 6874 6d6c 290d  ck(update_html).
+00031af0: 0a0d 0a20 2020 2020 2020 2073 656c 662e  ...        self.
+00031b00: 6164 645f 6c61 7965 7228 6765 6f6a 736f  add_layer(geojso
+00031b10: 6e29 0d0a 0d0a 2020 2020 6465 6620 6164  n)....    def ad
+00031b20: 645f 6b6d 6c28 0d0a 2020 2020 2020 2020  d_kml(..        
+00031b30: 7365 6c66 2c0d 0a20 2020 2020 2020 2069  self,..        i
+00031b40: 6e5f 6b6d 6c2c 0d0a 2020 2020 2020 2020  n_kml,..        
+00031b50: 6c61 7965 725f 6e61 6d65 3d22 556e 7469  layer_name="Unti
+00031b60: 746c 6564 222c 0d0a 2020 2020 2020 2020  tled",..        
+00031b70: 7374 796c 653d 7b7d 2c0d 0a20 2020 2020  style={},..     
+00031b80: 2020 2068 6f76 6572 5f73 7479 6c65 3d7b     hover_style={
+00031b90: 7d2c 0d0a 2020 2020 2020 2020 7374 796c  },..        styl
+00031ba0: 655f 6361 6c6c 6261 636b 3d4e 6f6e 652c  e_callback=None,
+00031bb0: 0d0a 2020 2020 2020 2020 6669 6c6c 5f63  ..        fill_c
+00031bc0: 6f6c 6f72 733d 5b22 626c 6163 6b22 5d2c  olors=["black"],
+00031bd0: 0d0a 2020 2020 2020 2020 696e 666f 5f6d  ..        info_m
+00031be0: 6f64 653d 226f 6e5f 686f 7665 7222 2c0d  ode="on_hover",.
+00031bf0: 0a20 2020 2029 3a0d 0a20 2020 2020 2020  .    ):..       
+00031c00: 2022 2222 4164 6473 2061 2047 656f 4a53   """Adds a GeoJS
+00031c10: 4f4e 2066 696c 6520 746f 2074 6865 206d  ON file to the m
+00031c20: 6170 2e0d 0a0d 0a20 2020 2020 2020 2041  ap.....        A
+00031c30: 7267 733a 0d0a 2020 2020 2020 2020 2020  rgs:..          
+00031c40: 2020 696e 5f6b 6d6c 2028 7374 7229 3a20    in_kml (str): 
+00031c50: 5468 6520 696e 7075 7420 6669 6c65 2070  The input file p
+00031c60: 6174 6820 746f 2074 6865 204b 4d4c 2e0d  ath to the KML..
+00031c70: 0a20 2020 2020 2020 2020 2020 206c 6179  .            lay
+00031c80: 6572 5f6e 616d 6520 2873 7472 2c20 6f70  er_name (str, op
+00031c90: 7469 6f6e 616c 293a 2054 6865 206c 6179  tional): The lay
+00031ca0: 6572 206e 616d 6520 746f 2062 6520 7573  er name to be us
+00031cb0: 6564 2e2e 2044 6566 6175 6c74 7320 746f  ed.. Defaults to
+00031cc0: 2022 556e 7469 746c 6564 222e 0d0a 2020   "Untitled"...  
+00031cd0: 2020 2020 2020 2020 2020 7374 796c 6520            style 
+00031ce0: 2864 6963 742c 206f 7074 696f 6e61 6c29  (dict, optional)
+00031cf0: 3a20 4120 6469 6374 696f 6e61 7279 2073  : A dictionary s
+00031d00: 7065 6369 6679 696e 6720 7468 6520 7374  pecifying the st
+00031d10: 796c 6520 746f 2062 6520 7573 6564 2e20  yle to be used. 
+00031d20: 4465 6661 756c 7473 2074 6f20 7b7d 2e0d  Defaults to {}..
+00031d30: 0a20 2020 2020 2020 2020 2020 2068 6f76  .            hov
+00031d40: 6572 5f73 7479 6c65 2028 6469 6374 2c20  er_style (dict, 
+00031d50: 6f70 7469 6f6e 616c 293a 2048 6f76 6572  optional): Hover
+00031d60: 2073 7479 6c65 2064 6963 7469 6f6e 6172   style dictionar
+00031d70: 792e 2044 6566 6175 6c74 7320 746f 207b  y. Defaults to {
+00031d80: 7d2e 0d0a 2020 2020 2020 2020 2020 2020  }...            
+00031d90: 7374 796c 655f 6361 6c6c 6261 636b 2028  style_callback (
+00031da0: 6675 6e63 7469 6f6e 2c20 6f70 7469 6f6e  function, option
+00031db0: 616c 293a 2053 7479 6c69 6e67 2066 756e  al): Styling fun
+00031dc0: 6374 696f 6e20 7468 6174 2069 7320 6361  ction that is ca
+00031dd0: 6c6c 6564 2066 6f72 2065 6163 6820 6665  lled for each fe
+00031de0: 6174 7572 652c 2061 6e64 2073 686f 756c  ature, and shoul
+00031df0: 6420 7265 7475 726e 2074 6865 2066 6561  d return the fea
+00031e00: 7475 7265 2073 7479 6c65 2e20 5468 6973  ture style. This
+00031e10: 2073 7479 6c69 6e67 2066 756e 6374 696f   styling functio
+00031e20: 6e20 7461 6b65 7320 7468 6520 6665 6174  n takes the feat
+00031e30: 7572 6520 6173 2061 7267 756d 656e 742e  ure as argument.
+00031e40: 2044 6566 6175 6c74 7320 746f 204e 6f6e   Defaults to Non
+00031e50: 652e 0d0a 2020 2020 2020 2020 2020 2020  e...            
+00031e60: 6669 6c6c 5f63 6f6c 6f72 7320 286c 6973  fill_colors (lis
+00031e70: 742c 206f 7074 696f 6e61 6c29 3a20 5468  t, optional): Th
+00031e80: 6520 7261 6e64 6f6d 2063 6f6c 6f72 7320  e random colors 
+00031e90: 746f 2075 7365 2066 6f72 2066 696c 6c69  to use for filli
+00031ea0: 6e67 2070 6f6c 7967 6f6e 732e 2044 6566  ng polygons. Def
+00031eb0: 6175 6c74 7320 746f 205b 2262 6c61 636b  aults to ["black
+00031ec0: 225d 2e0d 0a20 2020 2020 2020 2020 2020  "]...           
+00031ed0: 2069 6e66 6f5f 6d6f 6465 2028 7374 722c   info_mode (str,
+00031ee0: 206f 7074 696f 6e61 6c29 3a20 4469 7370   optional): Disp
+00031ef0: 6c61 7973 2074 6865 2061 7474 7269 6275  lays the attribu
+00031f00: 7465 7320 6279 2065 6974 6865 7220 6f6e  tes by either on
+00031f10: 5f68 6f76 6572 206f 7220 6f6e 5f63 6c69  _hover or on_cli
+00031f20: 636b 2e20 416e 7920 7661 6c75 6520 6f74  ck. Any value ot
+00031f30: 6865 7220 7468 616e 2022 6f6e 5f68 6f76  her than "on_hov
+00031f40: 6572 2220 6f72 2022 6f6e 5f63 6c69 636b  er" or "on_click
+00031f50: 2220 7769 6c6c 2062 6520 7472 6561 7465  " will be treate
+00031f60: 6420 6173 204e 6f6e 652e 2044 6566 6175  d as None. Defau
+00031f70: 6c74 7320 746f 2022 6f6e 5f68 6f76 6572  lts to "on_hover
+00031f80: 222e 0d0a 0d0a 2020 2020 2020 2020 5261  ".....        Ra
+00031f90: 6973 6573 3a0d 0a20 2020 2020 2020 2020  ises:..         
+00031fa0: 2020 2046 696c 654e 6f74 466f 756e 6445     FileNotFoundE
+00031fb0: 7272 6f72 3a20 5468 6520 7072 6f76 6964  rror: The provid
+00031fc0: 6564 204b 4d4c 2066 696c 6520 636f 756c  ed KML file coul
+00031fd0: 6420 6e6f 7420 6265 2066 6f75 6e64 2e0d  d not be found..
+00031fe0: 0a20 2020 2020 2020 2022 2222 0d0a 0d0a  .        """....
+00031ff0: 2020 2020 2020 2020 696e 5f6b 6d6c 203d          in_kml =
+00032000: 206f 732e 7061 7468 2e61 6273 7061 7468   os.path.abspath
+00032010: 2869 6e5f 6b6d 6c29 0d0a 2020 2020 2020  (in_kml)..      
+00032020: 2020 6966 206e 6f74 206f 732e 7061 7468    if not os.path
+00032030: 2e65 7869 7374 7328 696e 5f6b 6d6c 293a  .exists(in_kml):
+00032040: 0d0a 2020 2020 2020 2020 2020 2020 7261  ..            ra
+00032050: 6973 6520 4669 6c65 4e6f 7446 6f75 6e64  ise FileNotFound
+00032060: 4572 726f 7228 2254 6865 2070 726f 7669  Error("The provi
+00032070: 6465 6420 4b4d 4c20 6669 6c65 2063 6f75  ded KML file cou
+00032080: 6c64 206e 6f74 2062 6520 666f 756e 642e  ld not be found.
+00032090: 2229 0d0a 2020 2020 2020 2020 7365 6c66  ")..        self
+000320a0: 2e61 6464 5f76 6563 746f 7228 0d0a 2020  .add_vector(..  
+000320b0: 2020 2020 2020 2020 2020 696e 5f6b 6d6c            in_kml
+000320c0: 2c0d 0a20 2020 2020 2020 2020 2020 206c  ,..            l
+000320d0: 6179 6572 5f6e 616d 652c 0d0a 2020 2020  ayer_name,..    
+000320e0: 2020 2020 2020 2020 7374 796c 653d 7374          style=st
+000320f0: 796c 652c 0d0a 2020 2020 2020 2020 2020  yle,..          
+00032100: 2020 686f 7665 725f 7374 796c 653d 686f    hover_style=ho
+00032110: 7665 725f 7374 796c 652c 0d0a 2020 2020  ver_style,..    
+00032120: 2020 2020 2020 2020 7374 796c 655f 6361          style_ca
+00032130: 6c6c 6261 636b 3d73 7479 6c65 5f63 616c  llback=style_cal
+00032140: 6c62 6163 6b2c 0d0a 2020 2020 2020 2020  lback,..        
+00032150: 2020 2020 6669 6c6c 5f63 6f6c 6f72 733d      fill_colors=
+00032160: 6669 6c6c 5f63 6f6c 6f72 732c 0d0a 2020  fill_colors,..  
+00032170: 2020 2020 2020 2020 2020 696e 666f 5f6d            info_m
+00032180: 6f64 653d 696e 666f 5f6d 6f64 652c 0d0a  ode=info_mode,..
+00032190: 2020 2020 2020 2020 290d 0a0d 0a20 2020          )....   
+000321a0: 2064 6566 2061 6464 5f76 6563 746f 7228   def add_vector(
+000321b0: 0d0a 2020 2020 2020 2020 7365 6c66 2c0d  ..        self,.
+000321c0: 0a20 2020 2020 2020 2066 696c 656e 616d  .        filenam
+000321d0: 652c 0d0a 2020 2020 2020 2020 6c61 7965  e,..        laye
+000321e0: 725f 6e61 6d65 3d22 556e 7469 746c 6564  r_name="Untitled
+000321f0: 222c 0d0a 2020 2020 2020 2020 746f 5f65  ",..        to_e
+00032200: 653d 4661 6c73 652c 0d0a 2020 2020 2020  e=False,..      
+00032210: 2020 6262 6f78 3d4e 6f6e 652c 0d0a 2020    bbox=None,..  
+00032220: 2020 2020 2020 6d61 736b 3d4e 6f6e 652c        mask=None,
+00032230: 0d0a 2020 2020 2020 2020 726f 7773 3d4e  ..        rows=N
+00032240: 6f6e 652c 0d0a 2020 2020 2020 2020 7374  one,..        st
+00032250: 796c 653d 7b7d 2c0d 0a20 2020 2020 2020  yle={},..       
+00032260: 2068 6f76 6572 5f73 7479 6c65 3d7b 7d2c   hover_style={},
+00032270: 0d0a 2020 2020 2020 2020 7374 796c 655f  ..        style_
+00032280: 6361 6c6c 6261 636b 3d4e 6f6e 652c 0d0a  callback=None,..
+00032290: 2020 2020 2020 2020 6669 6c6c 5f63 6f6c          fill_col
+000322a0: 6f72 733d 5b22 626c 6163 6b22 5d2c 0d0a  ors=["black"],..
+000322b0: 2020 2020 2020 2020 696e 666f 5f6d 6f64          info_mod
+000322c0: 653d 226f 6e5f 686f 7665 7222 2c0d 0a20  e="on_hover",.. 
+000322d0: 2020 2020 2020 202a 2a6b 7761 7267 732c         **kwargs,
+000322e0: 0d0a 2020 2020 293a 0d0a 2020 2020 2020  ..    ):..      
+000322f0: 2020 2222 2241 6464 7320 616e 7920 6765    """Adds any ge
+00032300: 6f70 616e 6461 732d 7375 7070 6f72 7465  opandas-supporte
+00032310: 6420 7665 6374 6f72 2064 6174 6173 6574  d vector dataset
+00032320: 2074 6f20 7468 6520 6d61 702e 0d0a 0d0a   to the map.....
+00032330: 2020 2020 2020 2020 4172 6773 3a0d 0a20          Args:.. 
+00032340: 2020 2020 2020 2020 2020 2066 696c 656e             filen
+00032350: 616d 6520 2873 7472 293a 2045 6974 6865  ame (str): Eithe
+00032360: 7220 7468 6520 6162 736f 6c75 7465 206f  r the absolute o
+00032370: 7220 7265 6c61 7469 7665 2070 6174 6820  r relative path 
+00032380: 746f 2074 6865 2066 696c 6520 6f72 2055  to the file or U
+00032390: 524c 2074 6f20 6265 206f 7065 6e65 642c  RL to be opened,
+000323a0: 206f 7220 616e 7920 6f62 6a65 6374 2077   or any object w
+000323b0: 6974 6820 6120 7265 6164 2829 206d 6574  ith a read() met
+000323c0: 686f 6420 2873 7563 6820 6173 2061 6e20  hod (such as an 
+000323d0: 6f70 656e 2066 696c 6520 6f72 2053 7472  open file or Str
+000323e0: 696e 6749 4f29 2e0d 0a20 2020 2020 2020  ingIO)...       
+000323f0: 2020 2020 206c 6179 6572 5f6e 616d 6520       layer_name 
+00032400: 2873 7472 2c20 6f70 7469 6f6e 616c 293a  (str, optional):
+00032410: 2054 6865 206c 6179 6572 206e 616d 6520   The layer name 
+00032420: 746f 2075 7365 2e20 4465 6661 756c 7473  to use. Defaults
+00032430: 2074 6f20 2255 6e74 6974 6c65 6422 2e0d   to "Untitled"..
+00032440: 0a20 2020 2020 2020 2020 2020 2074 6f5f  .            to_
+00032450: 6565 2028 626f 6f6c 2c20 6f70 7469 6f6e  ee (bool, option
+00032460: 616c 293a 2057 6865 7468 6572 2074 6f20  al): Whether to 
+00032470: 636f 6e76 6572 7420 7468 6520 4765 6f4a  convert the GeoJ
+00032480: 534f 4e20 746f 2065 652e 4665 6174 7572  SON to ee.Featur
+00032490: 6543 6f6c 6c65 6374 696f 6e2e 2044 6566  eCollection. Def
+000324a0: 6175 6c74 7320 746f 2046 616c 7365 2e0d  aults to False..
+000324b0: 0a20 2020 2020 2020 2020 2020 2062 626f  .            bbo
+000324c0: 7820 2874 7570 6c65 207c 2047 656f 4461  x (tuple | GeoDa
+000324d0: 7461 4672 616d 6520 6f72 2047 656f 5365  taFrame or GeoSe
+000324e0: 7269 6573 207c 2073 6861 7065 6c79 2047  ries | shapely G
+000324f0: 656f 6d65 7472 792c 206f 7074 696f 6e61  eometry, optiona
+00032500: 6c29 3a20 4669 6c74 6572 2066 6561 7475  l): Filter featu
+00032510: 7265 7320 6279 2067 6976 656e 2062 6f75  res by given bou
+00032520: 6e64 696e 6720 626f 782c 2047 656f 5365  nding box, GeoSe
+00032530: 7269 6573 2c20 4765 6f44 6174 6146 7261  ries, GeoDataFra
+00032540: 6d65 206f 7220 6120 7368 6170 656c 7920  me or a shapely 
+00032550: 6765 6f6d 6574 7279 2e20 4352 5320 6d69  geometry. CRS mi
+00032560: 732d 6d61 7463 6865 7320 6172 6520 7265  s-matches are re
+00032570: 736f 6c76 6564 2069 6620 6769 7665 6e20  solved if given 
+00032580: 6120 4765 6f53 6572 6965 7320 6f72 2047  a GeoSeries or G
+00032590: 656f 4461 7461 4672 616d 652e 2043 616e  eoDataFrame. Can
+000325a0: 6e6f 7420 6265 2075 7365 6420 7769 7468  not be used with
+000325b0: 206d 6173 6b2e 2044 6566 6175 6c74 7320   mask. Defaults 
+000325c0: 746f 204e 6f6e 652e 0d0a 2020 2020 2020  to None...      
+000325d0: 2020 2020 2020 6d61 736b 2028 6469 6374        mask (dict
+000325e0: 207c 2047 656f 4461 7461 4672 616d 6520   | GeoDataFrame 
+000325f0: 6f72 2047 656f 5365 7269 6573 207c 2073  or GeoSeries | s
+00032600: 6861 7065 6c79 2047 656f 6d65 7472 792c  hapely Geometry,
+00032610: 206f 7074 696f 6e61 6c29 3a20 4669 6c74   optional): Filt
+00032620: 6572 2066 6f72 2066 6561 7475 7265 7320  er for features 
+00032630: 7468 6174 2069 6e74 6572 7365 6374 2077  that intersect w
+00032640: 6974 6820 7468 6520 6769 7665 6e20 6469  ith the given di
+00032650: 6374 2d6c 696b 6520 6765 6f6a 736f 6e20  ct-like geojson 
+00032660: 6765 6f6d 6574 7279 2c20 4765 6f53 6572  geometry, GeoSer
+00032670: 6965 732c 2047 656f 4461 7461 4672 616d  ies, GeoDataFram
+00032680: 6520 6f72 2073 6861 7065 6c79 2067 656f  e or shapely geo
+00032690: 6d65 7472 792e 2043 5253 206d 6973 2d6d  metry. CRS mis-m
+000326a0: 6174 6368 6573 2061 7265 2072 6573 6f6c  atches are resol
+000326b0: 7665 6420 6966 2067 6976 656e 2061 2047  ved if given a G
+000326c0: 656f 5365 7269 6573 206f 7220 4765 6f44  eoSeries or GeoD
+000326d0: 6174 6146 7261 6d65 2e20 4361 6e6e 6f74  ataFrame. Cannot
+000326e0: 2062 6520 7573 6564 2077 6974 6820 6262   be used with bb
+000326f0: 6f78 2e20 4465 6661 756c 7473 2074 6f20  ox. Defaults to 
 00032700: 4e6f 6e65 2e0d 0a20 2020 2020 2020 2020  None...         
-00032710: 2020 2073 7479 6c65 2028 6469 6374 2c20     style (dict, 
-00032720: 6f70 7469 6f6e 616c 293a 2041 2064 6963  optional): A dic
-00032730: 7469 6f6e 6172 7920 7370 6563 6966 7969  tionary specifyi
-00032740: 6e67 2074 6865 2073 7479 6c65 2074 6f20  ng the style to 
-00032750: 6265 2075 7365 642e 2044 6566 6175 6c74  be used. Default
-00032760: 7320 746f 207b 7d2e 0d0a 2020 2020 2020  s to {}...      
-00032770: 2020 2020 2020 686f 7665 725f 7374 796c        hover_styl
-00032780: 6520 2864 6963 742c 206f 7074 696f 6e61  e (dict, optiona
-00032790: 6c29 3a20 486f 7665 7220 7374 796c 6520  l): Hover style 
-000327a0: 6469 6374 696f 6e61 7279 2e20 4465 6661  dictionary. Defa
-000327b0: 756c 7473 2074 6f20 7b7d 2e0d 0a20 2020  ults to {}...   
-000327c0: 2020 2020 2020 2020 2073 7479 6c65 5f63           style_c
-000327d0: 616c 6c62 6163 6b20 2866 756e 6374 696f  allback (functio
-000327e0: 6e2c 206f 7074 696f 6e61 6c29 3a20 5374  n, optional): St
-000327f0: 796c 696e 6720 6675 6e63 7469 6f6e 2074  yling function t
-00032800: 6861 7420 6973 2063 616c 6c65 6420 666f  hat is called fo
-00032810: 7220 6561 6368 2066 6561 7475 7265 2c20  r each feature, 
-00032820: 616e 6420 7368 6f75 6c64 2072 6574 7572  and should retur
-00032830: 6e20 7468 6520 6665 6174 7572 6520 7374  n the feature st
-00032840: 796c 652e 2054 6869 7320 7374 796c 696e  yle. This stylin
-00032850: 6720 6675 6e63 7469 6f6e 2074 616b 6573  g function takes
-00032860: 2074 6865 2066 6561 7475 7265 2061 7320   the feature as 
-00032870: 6172 6775 6d65 6e74 2e20 4465 6661 756c  argument. Defaul
-00032880: 7473 2074 6f20 4e6f 6e65 2e0d 0a20 2020  ts to None...   
-00032890: 2020 2020 2020 2020 2066 696c 6c5f 636f           fill_co
-000328a0: 6c6f 7273 2028 6c69 7374 2c20 6f70 7469  lors (list, opti
-000328b0: 6f6e 616c 293a 2054 6865 2072 616e 646f  onal): The rando
-000328c0: 6d20 636f 6c6f 7273 2074 6f20 7573 6520  m colors to use 
-000328d0: 666f 7220 6669 6c6c 696e 6720 706f 6c79  for filling poly
-000328e0: 676f 6e73 2e20 4465 6661 756c 7473 2074  gons. Defaults t
-000328f0: 6f20 5b22 626c 6163 6b22 5d2e 0d0a 2020  o ["black"]...  
-00032900: 2020 2020 2020 2020 2020 696e 666f 5f6d            info_m
-00032910: 6f64 6520 2873 7472 2c20 6f70 7469 6f6e  ode (str, option
-00032920: 616c 293a 2044 6973 706c 6179 7320 7468  al): Displays th
-00032930: 6520 6174 7472 6962 7574 6573 2062 7920  e attributes by 
-00032940: 6569 7468 6572 206f 6e5f 686f 7665 7220  either on_hover 
-00032950: 6f72 206f 6e5f 636c 6963 6b2e 2041 6e79  or on_click. Any
-00032960: 2076 616c 7565 206f 7468 6572 2074 6861   value other tha
-00032970: 6e20 226f 6e5f 686f 7665 7222 206f 7220  n "on_hover" or 
-00032980: 226f 6e5f 636c 6963 6b22 2077 696c 6c20  "on_click" will 
-00032990: 6265 2074 7265 6174 6564 2061 7320 4e6f  be treated as No
-000329a0: 6e65 2e20 4465 6661 756c 7473 2074 6f20  ne. Defaults to 
-000329b0: 226f 6e5f 686f 7665 7222 2e0d 0a0d 0a20  "on_hover"..... 
-000329c0: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
-000329d0: 2020 2020 6966 206e 6f74 2066 696c 656e      if not filen
-000329e0: 616d 652e 7374 6172 7473 7769 7468 2822  ame.startswith("
-000329f0: 6874 7470 2229 3a0d 0a20 2020 2020 2020  http"):..       
-00032a00: 2020 2020 2066 696c 656e 616d 6520 3d20       filename = 
-00032a10: 6f73 2e70 6174 682e 6162 7370 6174 6828  os.path.abspath(
-00032a20: 6669 6c65 6e61 6d65 290d 0a20 2020 2020  filename)..     
-00032a30: 2020 2069 6620 746f 5f65 653a 0d0a 0d0a     if to_ee:....
-00032a40: 2020 2020 2020 2020 2020 2020 6663 203d              fc =
-00032a50: 2076 6563 746f 725f 746f 5f65 6528 0d0a   vector_to_ee(..
-00032a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00032a70: 6669 6c65 6e61 6d65 2c0d 0a20 2020 2020  filename,..     
-00032a80: 2020 2020 2020 2020 2020 2062 626f 783d             bbox=
-00032a90: 6262 6f78 2c0d 0a20 2020 2020 2020 2020  bbox,..         
-00032aa0: 2020 2020 2020 206d 6173 6b3d 6d61 736b         mask=mask
-00032ab0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00032ac0: 2020 2072 6f77 733d 726f 7773 2c0d 0a20     rows=rows,.. 
-00032ad0: 2020 2020 2020 2020 2020 2020 2020 2067                 g
-00032ae0: 656f 6465 7369 633d 5472 7565 2c0d 0a20  eodesic=True,.. 
-00032af0: 2020 2020 2020 2020 2020 2020 2020 202a                 *
-00032b00: 2a6b 7761 7267 732c 0d0a 2020 2020 2020  *kwargs,..      
-00032b10: 2020 2020 2020 290d 0a0d 0a20 2020 2020        )....     
-00032b20: 2020 2020 2020 2073 656c 662e 6164 644c         self.addL
-00032b30: 6179 6572 2866 632c 207b 7d2c 206c 6179  ayer(fc, {}, lay
-00032b40: 6572 5f6e 616d 6529 0d0a 2020 2020 2020  er_name)..      
-00032b50: 2020 656c 7365 3a0d 0a0d 0a20 2020 2020    else:....     
-00032b60: 2020 2020 2020 2065 7874 203d 206f 732e         ext = os.
-00032b70: 7061 7468 2e73 706c 6974 6578 7428 6669  path.splitext(fi
-00032b80: 6c65 6e61 6d65 295b 315d 2e6c 6f77 6572  lename)[1].lower
-00032b90: 2829 0d0a 2020 2020 2020 2020 2020 2020  ()..            
-00032ba0: 6966 2065 7874 203d 3d20 222e 7368 7022  if ext == ".shp"
-00032bb0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00032bc0: 2020 2073 656c 662e 6164 645f 7368 6170     self.add_shap
-00032bd0: 6566 696c 6528 0d0a 2020 2020 2020 2020  efile(..        
-00032be0: 2020 2020 2020 2020 2020 2020 6669 6c65              file
-00032bf0: 6e61 6d65 2c0d 0a20 2020 2020 2020 2020  name,..         
-00032c00: 2020 2020 2020 2020 2020 206c 6179 6572             layer
-00032c10: 5f6e 616d 652c 0d0a 2020 2020 2020 2020  _name,..        
-00032c20: 2020 2020 2020 2020 2020 2020 7374 796c              styl
-00032c30: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
-00032c40: 2020 2020 2020 2020 686f 7665 725f 7374          hover_st
-00032c50: 796c 652c 0d0a 2020 2020 2020 2020 2020  yle,..          
-00032c60: 2020 2020 2020 2020 2020 7374 796c 655f            style_
-00032c70: 6361 6c6c 6261 636b 2c0d 0a20 2020 2020  callback,..     
-00032c80: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-00032c90: 696c 6c5f 636f 6c6f 7273 2c0d 0a20 2020  ill_colors,..   
-00032ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00032cb0: 2069 6e66 6f5f 6d6f 6465 2c0d 0a20 2020   info_mode,..   
-00032cc0: 2020 2020 2020 2020 2020 2020 2029 0d0a               )..
-00032cd0: 2020 2020 2020 2020 2020 2020 656c 6966              elif
-00032ce0: 2065 7874 2069 6e20 5b22 2e6a 736f 6e22   ext in [".json"
-00032cf0: 2c20 222e 6765 6f6a 736f 6e22 5d3a 0d0a  , ".geojson"]:..
-00032d00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00032d10: 7365 6c66 2e61 6464 5f67 656f 6a73 6f6e  self.add_geojson
-00032d20: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
-00032d30: 2020 2020 2020 2066 696c 656e 616d 652c         filename,
-00032d40: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00032d50: 2020 2020 2020 6c61 7965 725f 6e61 6d65        layer_name
-00032d60: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00032d70: 2020 2020 2020 2073 7479 6c65 2c0d 0a20         style,.. 
-00032d80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00032d90: 2020 2068 6f76 6572 5f73 7479 6c65 2c0d     hover_style,.
-00032da0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00032db0: 2020 2020 2073 7479 6c65 5f63 616c 6c62       style_callb
-00032dc0: 6163 6b2c 0d0a 2020 2020 2020 2020 2020  ack,..          
-00032dd0: 2020 2020 2020 2020 2020 6669 6c6c 5f63            fill_c
-00032de0: 6f6c 6f72 732c 0d0a 2020 2020 2020 2020  olors,..        
-00032df0: 2020 2020 2020 2020 2020 2020 696e 666f              info
-00032e00: 5f6d 6f64 652c 0d0a 2020 2020 2020 2020  _mode,..        
-00032e10: 2020 2020 2020 2020 290d 0a20 2020 2020          )..     
-00032e20: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
-00032e30: 2020 2020 2020 2020 2020 2020 2020 6765                ge
-00032e40: 6f6a 736f 6e20 3d20 7665 6374 6f72 5f74  ojson = vector_t
-00032e50: 6f5f 6765 6f6a 736f 6e28 0d0a 2020 2020  o_geojson(..    
-00032e60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00032e70: 6669 6c65 6e61 6d65 2c0d 0a20 2020 2020  filename,..     
-00032e80: 2020 2020 2020 2020 2020 2020 2020 2062                 b
-00032e90: 626f 783d 6262 6f78 2c0d 0a20 2020 2020  box=bbox,..     
-00032ea0: 2020 2020 2020 2020 2020 2020 2020 206d                 m
-00032eb0: 6173 6b3d 6d61 736b 2c0d 0a20 2020 2020  ask=mask,..     
-00032ec0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00032ed0: 6f77 733d 726f 7773 2c0d 0a20 2020 2020  ows=rows,..     
-00032ee0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00032ef0: 7073 673d 2234 3332 3622 2c0d 0a20 2020  psg="4326",..   
-00032f00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00032f10: 202a 2a6b 7761 7267 732c 0d0a 2020 2020   **kwargs,..    
-00032f20: 2020 2020 2020 2020 2020 2020 290d 0a0d              )...
-00032f30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00032f40: 2073 656c 662e 6164 645f 6765 6f6a 736f   self.add_geojso
-00032f50: 6e28 0d0a 2020 2020 2020 2020 2020 2020  n(..            
-00032f60: 2020 2020 2020 2020 6765 6f6a 736f 6e2c          geojson,
-00032f70: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00032f80: 2020 2020 2020 6c61 7965 725f 6e61 6d65        layer_name
-00032f90: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00032fa0: 2020 2020 2020 2073 7479 6c65 2c0d 0a20         style,.. 
-00032fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00032fc0: 2020 2068 6f76 6572 5f73 7479 6c65 2c0d     hover_style,.
-00032fd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00032fe0: 2020 2020 2073 7479 6c65 5f63 616c 6c62       style_callb
-00032ff0: 6163 6b2c 0d0a 2020 2020 2020 2020 2020  ack,..          
-00033000: 2020 2020 2020 2020 2020 6669 6c6c 5f63            fill_c
-00033010: 6f6c 6f72 732c 0d0a 2020 2020 2020 2020  olors,..        
-00033020: 2020 2020 2020 2020 2020 2020 696e 666f              info
-00033030: 5f6d 6f64 652c 0d0a 2020 2020 2020 2020  _mode,..        
-00033040: 2020 2020 2020 2020 290d 0a0d 0a20 2020          )....   
-00033050: 2064 6566 2061 6464 5f6f 736d 280d 0a20   def add_osm(.. 
-00033060: 2020 2020 2020 2073 656c 662c 0d0a 2020         self,..  
-00033070: 2020 2020 2020 7175 6572 792c 0d0a 2020        query,..  
-00033080: 2020 2020 2020 6c61 7965 725f 6e61 6d65        layer_name
-00033090: 3d22 556e 7469 746c 6564 222c 0d0a 2020  ="Untitled",..  
-000330a0: 2020 2020 2020 7374 796c 653d 7b7d 2c0d        style={},.
-000330b0: 0a20 2020 2020 2020 2068 6f76 6572 5f73  .        hover_s
-000330c0: 7479 6c65 3d7b 7d2c 0d0a 2020 2020 2020  tyle={},..      
-000330d0: 2020 7374 796c 655f 6361 6c6c 6261 636b    style_callback
-000330e0: 3d4e 6f6e 652c 0d0a 2020 2020 2020 2020  =None,..        
-000330f0: 6669 6c6c 5f63 6f6c 6f72 733d 5b22 626c  fill_colors=["bl
-00033100: 6163 6b22 5d2c 0d0a 2020 2020 2020 2020  ack"],..        
-00033110: 696e 666f 5f6d 6f64 653d 226f 6e5f 686f  info_mode="on_ho
-00033120: 7665 7222 2c0d 0a20 2020 2020 2020 2077  ver",..        w
-00033130: 6869 6368 5f72 6573 756c 743d 4e6f 6e65  hich_result=None
-00033140: 2c0d 0a20 2020 2020 2020 2062 795f 6f73  ,..        by_os
-00033150: 6d69 643d 4661 6c73 652c 0d0a 2020 2020  mid=False,..    
-00033160: 2020 2020 6275 6666 6572 5f64 6973 743d      buffer_dist=
-00033170: 4e6f 6e65 2c0d 0a20 2020 2020 2020 2074  None,..        t
-00033180: 6f5f 6565 3d46 616c 7365 2c0d 0a20 2020  o_ee=False,..   
-00033190: 2020 2020 2067 656f 6465 7369 633d 5472       geodesic=Tr
-000331a0: 7565 2c0d 0a20 2020 2029 3a0d 0a20 2020  ue,..    ):..   
-000331b0: 2020 2020 2022 2222 4164 6473 204f 534d       """Adds OSM
-000331c0: 2064 6174 6120 746f 2074 6865 206d 6170   data to the map
-000331d0: 2e0d 0a0d 0a20 2020 2020 2020 2041 7267  .....        Arg
-000331e0: 733a 0d0a 2020 2020 2020 2020 2020 2020  s:..            
-000331f0: 7175 6572 7920 2873 7472 207c 2064 6963  query (str | dic
-00033200: 7420 7c20 6c69 7374 293a 2051 7565 7279  t | list): Query
-00033210: 2073 7472 696e 6728 7329 206f 7220 7374   string(s) or st
-00033220: 7275 6374 7572 6564 2064 6963 7428 7329  ructured dict(s)
-00033230: 2074 6f20 6765 6f63 6f64 652e 0d0a 2020   to geocode...  
-00033240: 2020 2020 2020 2020 2020 6c61 7965 725f            layer_
-00033250: 6e61 6d65 2028 7374 722c 206f 7074 696f  name (str, optio
-00033260: 6e61 6c29 3a20 5468 6520 6c61 7965 7220  nal): The layer 
-00033270: 6e61 6d65 2074 6f20 6265 2075 7365 642e  name to be used.
-00033280: 2e20 4465 6661 756c 7473 2074 6f20 2255  . Defaults to "U
-00033290: 6e74 6974 6c65 6422 2e0d 0a20 2020 2020  ntitled"...     
-000332a0: 2020 2020 2020 2073 7479 6c65 2028 6469         style (di
-000332b0: 6374 2c20 6f70 7469 6f6e 616c 293a 2041  ct, optional): A
-000332c0: 2064 6963 7469 6f6e 6172 7920 7370 6563   dictionary spec
-000332d0: 6966 7969 6e67 2074 6865 2073 7479 6c65  ifying the style
-000332e0: 2074 6f20 6265 2075 7365 642e 2044 6566   to be used. Def
-000332f0: 6175 6c74 7320 746f 207b 7d2e 0d0a 2020  aults to {}...  
-00033300: 2020 2020 2020 2020 2020 686f 7665 725f            hover_
-00033310: 7374 796c 6520 2864 6963 742c 206f 7074  style (dict, opt
-00033320: 696f 6e61 6c29 3a20 486f 7665 7220 7374  ional): Hover st
-00033330: 796c 6520 6469 6374 696f 6e61 7279 2e20  yle dictionary. 
-00033340: 4465 6661 756c 7473 2074 6f20 7b7d 2e0d  Defaults to {}..
-00033350: 0a20 2020 2020 2020 2020 2020 2073 7479  .            sty
-00033360: 6c65 5f63 616c 6c62 6163 6b20 2866 756e  le_callback (fun
-00033370: 6374 696f 6e2c 206f 7074 696f 6e61 6c29  ction, optional)
-00033380: 3a20 5374 796c 696e 6720 6675 6e63 7469  : Styling functi
-00033390: 6f6e 2074 6861 7420 6973 2063 616c 6c65  on that is calle
-000333a0: 6420 666f 7220 6561 6368 2066 6561 7475  d for each featu
-000333b0: 7265 2c20 616e 6420 7368 6f75 6c64 2072  re, and should r
-000333c0: 6574 7572 6e20 7468 6520 6665 6174 7572  eturn the featur
-000333d0: 6520 7374 796c 652e 2054 6869 7320 7374  e style. This st
-000333e0: 796c 696e 6720 6675 6e63 7469 6f6e 2074  yling function t
-000333f0: 616b 6573 2074 6865 2066 6561 7475 7265  akes the feature
-00033400: 2061 7320 6172 6775 6d65 6e74 2e20 4465   as argument. De
-00033410: 6661 756c 7473 2074 6f20 4e6f 6e65 2e0d  faults to None..
-00033420: 0a20 2020 2020 2020 2020 2020 2066 696c  .            fil
-00033430: 6c5f 636f 6c6f 7273 2028 6c69 7374 2c20  l_colors (list, 
-00033440: 6f70 7469 6f6e 616c 293a 2054 6865 2072  optional): The r
-00033450: 616e 646f 6d20 636f 6c6f 7273 2074 6f20  andom colors to 
-00033460: 7573 6520 666f 7220 6669 6c6c 696e 6720  use for filling 
-00033470: 706f 6c79 676f 6e73 2e20 4465 6661 756c  polygons. Defaul
-00033480: 7473 2074 6f20 5b22 626c 6163 6b22 5d2e  ts to ["black"].
-00033490: 0d0a 2020 2020 2020 2020 2020 2020 696e  ..            in
-000334a0: 666f 5f6d 6f64 6520 2873 7472 2c20 6f70  fo_mode (str, op
-000334b0: 7469 6f6e 616c 293a 2044 6973 706c 6179  tional): Display
-000334c0: 7320 7468 6520 6174 7472 6962 7574 6573  s the attributes
-000334d0: 2062 7920 6569 7468 6572 206f 6e5f 686f   by either on_ho
-000334e0: 7665 7220 6f72 206f 6e5f 636c 6963 6b2e  ver or on_click.
-000334f0: 2041 6e79 2076 616c 7565 206f 7468 6572   Any value other
-00033500: 2074 6861 6e20 226f 6e5f 686f 7665 7222   than "on_hover"
-00033510: 206f 7220 226f 6e5f 636c 6963 6b22 2077   or "on_click" w
-00033520: 696c 6c20 6265 2074 7265 6174 6564 2061  ill be treated a
-00033530: 7320 4e6f 6e65 2e20 4465 6661 756c 7473  s None. Defaults
-00033540: 2074 6f20 226f 6e5f 686f 7665 7222 2e0d   to "on_hover"..
-00033550: 0a20 2020 2020 2020 2020 2020 2077 6869  .            whi
-00033560: 6368 5f72 6573 756c 7420 2849 4e54 2c20  ch_result (INT, 
-00033570: 6f70 7469 6f6e 616c 293a 2057 6869 6368  optional): Which
-00033580: 2067 656f 636f 6469 6e67 2072 6573 756c   geocoding resul
-00033590: 7420 746f 2075 7365 2e20 6966 204e 6f6e  t to use. if Non
-000335a0: 652c 2061 7574 6f2d 7365 6c65 6374 2074  e, auto-select t
-000335b0: 6865 2066 6972 7374 2028 4d75 6c74 6929  he first (Multi)
-000335c0: 506f 6c79 676f 6e20 6f72 2072 6169 7365  Polygon or raise
-000335d0: 2061 6e20 6572 726f 7220 6966 204f 534d   an error if OSM
-000335e0: 2064 6f65 736e 2774 2072 6574 7572 6e20   doesn't return 
-000335f0: 6f6e 652e 2074 6f20 6765 7420 7468 6520  one. to get the 
-00033600: 746f 7020 6d61 7463 6820 7265 6761 7264  top match regard
-00033610: 6c65 7373 206f 6620 6765 6f6d 6574 7279  less of geometry
-00033620: 2074 7970 652c 2073 6574 2077 6869 6368   type, set which
-00033630: 5f72 6573 756c 743d 312e 2044 6566 6175  _result=1. Defau
-00033640: 6c74 7320 746f 204e 6f6e 652e 0d0a 2020  lts to None...  
-00033650: 2020 2020 2020 2020 2020 6279 5f6f 736d            by_osm
-00033660: 6964 2028 626f 6f6c 2c20 6f70 7469 6f6e  id (bool, option
-00033670: 616c 293a 2049 6620 5472 7565 2c20 6861  al): If True, ha
-00033680: 6e64 6c65 2071 7565 7279 2061 7320 616e  ndle query as an
-00033690: 204f 534d 2049 4420 666f 7220 6c6f 6f6b   OSM ID for look
-000336a0: 7570 2072 6174 6865 7220 7468 616e 2074  up rather than t
-000336b0: 6578 7420 7365 6172 6368 2e20 4465 6661  ext search. Defa
-000336c0: 756c 7473 2074 6f20 4661 6c73 652e 0d0a  ults to False...
-000336d0: 2020 2020 2020 2020 2020 2020 6275 6666              buff
-000336e0: 6572 5f64 6973 7420 2866 6c6f 6174 2c20  er_dist (float, 
-000336f0: 6f70 7469 6f6e 616c 293a 2044 6973 7461  optional): Dista
-00033700: 6e63 6520 746f 2062 7566 6665 7220 6172  nce to buffer ar
-00033710: 6f75 6e64 2074 6865 2070 6c61 6365 2067  ound the place g
-00033720: 656f 6d65 7472 792c 2069 6e20 6d65 7465  eometry, in mete
-00033730: 7273 2e20 4465 6661 756c 7473 2074 6f20  rs. Defaults to 
-00033740: 4e6f 6e65 2e0d 0a20 2020 2020 2020 2020  None...         
-00033750: 2020 2074 6f5f 6565 2028 626f 6f6c 2c20     to_ee (bool, 
-00033760: 6f70 7469 6f6e 616c 293a 2057 6865 7468  optional): Wheth
-00033770: 6572 2074 6f20 636f 6e76 6572 7420 7468  er to convert th
-00033780: 6520 6373 7620 746f 2061 6e20 6565 2e46  e csv to an ee.F
-00033790: 6561 7475 7265 436f 6c6c 6563 7469 6f6e  eatureCollection
-000337a0: 2e0d 0a20 2020 2020 2020 2020 2020 2067  ...            g
-000337b0: 656f 6465 7369 6320 2862 6f6f 6c2c 206f  eodesic (bool, o
-000337c0: 7074 696f 6e61 6c29 3a20 5768 6574 6865  ptional): Whethe
-000337d0: 7220 6c69 6e65 2073 6567 6d65 6e74 7320  r line segments 
-000337e0: 7368 6f75 6c64 2062 6520 696e 7465 7270  should be interp
-000337f0: 7265 7465 6420 6173 2073 7068 6572 6963  reted as spheric
-00033800: 616c 2067 656f 6465 7369 6373 2e20 4966  al geodesics. If
-00033810: 2066 616c 7365 2c20 696e 6469 6361 7465   false, indicate
-00033820: 7320 7468 6174 206c 696e 6520 7365 676d  s that line segm
-00033830: 656e 7473 2073 686f 756c 6420 6265 2069  ents should be i
-00033840: 6e74 6572 7072 6574 6564 2061 7320 706c  nterpreted as pl
-00033850: 616e 6172 206c 696e 6573 2069 6e20 7468  anar lines in th
-00033860: 6520 7370 6563 6966 6965 6420 4352 532e  e specified CRS.
-00033870: 2049 6620 6162 7365 6e74 2c20 6465 6661   If absent, defa
-00033880: 756c 7473 2074 6f20 7472 7565 2069 6620  ults to true if 
-00033890: 7468 6520 4352 5320 6973 2067 656f 6772  the CRS is geogr
-000338a0: 6170 6869 6320 2869 6e63 6c75 6469 6e67  aphic (including
-000338b0: 2074 6865 2064 6566 6175 6c74 2045 5053   the default EPS
-000338c0: 473a 3433 3236 292c 206f 7220 746f 2066  G:4326), or to f
-000338d0: 616c 7365 2069 6620 7468 6520 4352 5320  alse if the CRS 
-000338e0: 6973 2070 726f 6a65 6374 6564 2e0d 0a0d  is projected....
-000338f0: 0a20 2020 2020 2020 2022 2222 0d0a 0d0a  .        """....
-00033900: 2020 2020 2020 2020 6764 6620 3d20 6f73          gdf = os
-00033910: 6d5f 746f 5f67 656f 7061 6e64 6173 280d  m_to_geopandas(.
-00033920: 0a20 2020 2020 2020 2020 2020 2071 7565  .            que
-00033930: 7279 2c20 7768 6963 685f 7265 7375 6c74  ry, which_result
-00033940: 3d77 6869 6368 5f72 6573 756c 742c 2062  =which_result, b
-00033950: 795f 6f73 6d69 643d 6279 5f6f 736d 6964  y_osmid=by_osmid
-00033960: 2c20 6275 6666 6572 5f64 6973 743d 6275  , buffer_dist=bu
-00033970: 6666 6572 5f64 6973 740d 0a20 2020 2020  ffer_dist..     
-00033980: 2020 2029 0d0a 2020 2020 2020 2020 6765     )..        ge
-00033990: 6f6a 736f 6e20 3d20 6764 662e 5f5f 6765  ojson = gdf.__ge
-000339a0: 6f5f 696e 7465 7266 6163 655f 5f0d 0a0d  o_interface__...
-000339b0: 0a20 2020 2020 2020 2069 6620 746f 5f65  .        if to_e
-000339c0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-000339d0: 6663 203d 2067 656f 6a73 6f6e 5f74 6f5f  fc = geojson_to_
-000339e0: 6565 2867 656f 6a73 6f6e 2c20 6765 6f64  ee(geojson, geod
-000339f0: 6573 6963 3d67 656f 6465 7369 6329 0d0a  esic=geodesic)..
-00033a00: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00033a10: 2e61 6464 4c61 7965 7228 6663 2c20 7b7d  .addLayer(fc, {}
-00033a20: 2c20 6c61 7965 725f 6e61 6d65 290d 0a20  , layer_name).. 
-00033a30: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00033a40: 7a6f 6f6d 546f 4f62 6a65 6374 2866 6329  zoomToObject(fc)
-00033a50: 0d0a 2020 2020 2020 2020 656c 7365 3a0d  ..        else:.
-00033a60: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00033a70: 662e 6164 645f 6765 6f6a 736f 6e28 0d0a  f.add_geojson(..
-00033a80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00033a90: 6765 6f6a 736f 6e2c 0d0a 2020 2020 2020  geojson,..      
-00033aa0: 2020 2020 2020 2020 2020 6c61 7965 725f            layer_
-00033ab0: 6e61 6d65 3d6c 6179 6572 5f6e 616d 652c  name=layer_name,
-00033ac0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00033ad0: 2020 7374 796c 653d 7374 796c 652c 0d0a    style=style,..
-00033ae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00033af0: 686f 7665 725f 7374 796c 653d 686f 7665  hover_style=hove
-00033b00: 725f 7374 796c 652c 0d0a 2020 2020 2020  r_style,..      
-00033b10: 2020 2020 2020 2020 2020 7374 796c 655f            style_
-00033b20: 6361 6c6c 6261 636b 3d73 7479 6c65 5f63  callback=style_c
-00033b30: 616c 6c62 6163 6b2c 0d0a 2020 2020 2020  allback,..      
-00033b40: 2020 2020 2020 2020 2020 6669 6c6c 5f63            fill_c
-00033b50: 6f6c 6f72 733d 6669 6c6c 5f63 6f6c 6f72  olors=fill_color
-00033b60: 732c 0d0a 2020 2020 2020 2020 2020 2020  s,..            
-00033b70: 2020 2020 696e 666f 5f6d 6f64 653d 696e      info_mode=in
-00033b80: 666f 5f6d 6f64 652c 0d0a 2020 2020 2020  fo_mode,..      
-00033b90: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
-00033ba0: 2020 2020 2062 6f75 6e64 7320 3d20 6764       bounds = gd
-00033bb0: 662e 626f 756e 6473 2e69 6c6f 635b 305d  f.bounds.iloc[0]
-00033bc0: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-00033bd0: 6c66 2e66 6974 5f62 6f75 6e64 7328 5b5b  lf.fit_bounds([[
-00033be0: 626f 756e 6473 5b31 5d2c 2062 6f75 6e64  bounds[1], bound
-00033bf0: 735b 305d 5d2c 205b 626f 756e 6473 5b33  s[0]], [bounds[3
-00033c00: 5d2c 2062 6f75 6e64 735b 325d 5d5d 290d  ], bounds[2]]]).
-00033c10: 0a0d 0a20 2020 2064 6566 2061 6464 5f74  ...    def add_t
-00033c20: 696d 655f 736c 6964 6572 280d 0a20 2020  ime_slider(..   
-00033c30: 2020 2020 2073 656c 662c 0d0a 2020 2020       self,..    
-00033c40: 2020 2020 6565 5f6f 626a 6563 742c 0d0a      ee_object,..
-00033c50: 2020 2020 2020 2020 7669 735f 7061 7261          vis_para
-00033c60: 6d73 3d7b 7d2c 0d0a 2020 2020 2020 2020  ms={},..        
-00033c70: 7265 6769 6f6e 3d4e 6f6e 652c 0d0a 2020  region=None,..  
-00033c80: 2020 2020 2020 6c61 7965 725f 6e61 6d65        layer_name
-00033c90: 3d22 5469 6d65 2073 6572 6965 7322 2c0d  ="Time series",.
-00033ca0: 0a20 2020 2020 2020 206c 6162 656c 733d  .        labels=
-00033cb0: 4e6f 6e65 2c0d 0a20 2020 2020 2020 2074  None,..        t
-00033cc0: 696d 655f 696e 7465 7276 616c 3d31 2c0d  ime_interval=1,.
-00033cd0: 0a20 2020 2020 2020 2070 6f73 6974 696f  .        positio
-00033ce0: 6e3d 2262 6f74 746f 6d72 6967 6874 222c  n="bottomright",
-00033cf0: 0d0a 2020 2020 2020 2020 736c 6964 6572  ..        slider
-00033d00: 5f6c 656e 6774 683d 2231 3530 7078 222c  _length="150px",
-00033d10: 0d0a 2020 2020 2020 2020 6461 7465 5f66  ..        date_f
-00033d20: 6f72 6d61 743d 2259 5959 592d 4d4d 2d64  ormat="YYYY-MM-d
-00033d30: 6422 2c0d 0a20 2020 2029 3a0d 0a20 2020  d",..    ):..   
-00033d40: 2020 2020 2022 2222 4164 6473 2061 2074       """Adds a t
-00033d50: 696d 6520 736c 6964 6572 2074 6f20 7468  ime slider to th
-00033d60: 6520 6d61 702e 0d0a 0d0a 2020 2020 2020  e map.....      
-00033d70: 2020 4172 6773 3a0d 0a20 2020 2020 2020    Args:..       
-00033d80: 2020 2020 2065 655f 6f62 6a65 6374 2028       ee_object (
-00033d90: 6565 2e49 6d61 6765 207c 2065 652e 496d  ee.Image | ee.Im
-00033da0: 6167 6543 6f6c 6c65 6374 696f 6e29 3a20  ageCollection): 
-00033db0: 5468 6520 496d 6167 6520 6f72 2049 6d61  The Image or Ima
-00033dc0: 6765 436f 6c6c 6563 7469 6f6e 2074 6f20  geCollection to 
-00033dd0: 7669 7375 616c 697a 652e 0d0a 2020 2020  visualize...    
-00033de0: 2020 2020 2020 2020 7669 735f 7061 7261          vis_para
-00033df0: 6d73 2028 6469 6374 2c20 6f70 7469 6f6e  ms (dict, option
-00033e00: 616c 293a 2056 6973 7561 6c69 7a61 7469  al): Visualizati
-00033e10: 6f6e 2070 6172 616d 6574 6572 7320 746f  on parameters to
-00033e20: 2075 7365 2066 6f72 2076 6973 7561 6c69   use for visuali
-00033e30: 7a69 6e67 2069 6d61 6765 2e20 4465 6661  zing image. Defa
-00033e40: 756c 7473 2074 6f20 7b7d 2e0d 0a20 2020  ults to {}...   
-00033e50: 2020 2020 2020 2020 2072 6567 696f 6e20           region 
-00033e60: 2865 652e 4765 6f6d 6574 7279 207c 2065  (ee.Geometry | e
-00033e70: 652e 4665 6174 7572 6543 6f6c 6c65 6374  e.FeatureCollect
-00033e80: 696f 6e29 3a20 5468 6520 7265 6769 6f6e  ion): The region
-00033e90: 2074 6f20 7669 7375 616c 697a 652e 0d0a   to visualize...
-00033ea0: 2020 2020 2020 2020 2020 2020 6c61 7965              laye
-00033eb0: 725f 6e61 6d65 2028 7374 722c 206f 7074  r_name (str, opt
-00033ec0: 696f 6e61 6c29 3a20 5468 6520 6c61 7965  ional): The laye
-00033ed0: 7220 6e61 6d65 2074 6f20 6265 2075 7365  r name to be use
-00033ee0: 642e 2044 6566 6175 6c74 7320 746f 2022  d. Defaults to "
-00033ef0: 5469 6d65 2073 6572 6965 7322 2e0d 0a20  Time series"... 
-00033f00: 2020 2020 2020 2020 2020 206c 6162 656c             label
-00033f10: 7320 286c 6973 742c 206f 7074 696f 6e61  s (list, optiona
-00033f20: 6c29 3a20 5468 6520 6c69 7374 206f 6620  l): The list of 
-00033f30: 6c61 6265 6c73 2074 6f20 6265 2075 7365  labels to be use
-00033f40: 6420 666f 7220 7468 6520 7469 6d65 2073  d for the time s
-00033f50: 6572 6965 732e 2044 6566 6175 6c74 7320  eries. Defaults 
-00033f60: 746f 204e 6f6e 652e 0d0a 2020 2020 2020  to None...      
-00033f70: 2020 2020 2020 7469 6d65 5f69 6e74 6572        time_inter
-00033f80: 7661 6c20 2869 6e74 2c20 6f70 7469 6f6e  val (int, option
-00033f90: 616c 293a 2054 696d 6520 696e 7465 7276  al): Time interv
-00033fa0: 616c 2069 6e20 7365 636f 6e64 732e 2044  al in seconds. D
-00033fb0: 6566 6175 6c74 7320 746f 2031 2e0d 0a20  efaults to 1... 
-00033fc0: 2020 2020 2020 2020 2020 2070 6f73 6974             posit
-00033fd0: 696f 6e20 2873 7472 2c20 6f70 7469 6f6e  ion (str, option
-00033fe0: 616c 293a 2050 6f73 6974 696f 6e20 746f  al): Position to
-00033ff0: 2070 6c61 6365 2074 6865 2074 696d 6520   place the time 
-00034000: 736c 6964 6572 2c20 6361 6e20 6265 2061  slider, can be a
-00034010: 6e79 206f 6620 5b27 746f 706c 6566 7427  ny of ['topleft'
-00034020: 2c20 2774 6f70 7269 6768 7427 2c20 2762  , 'topright', 'b
-00034030: 6f74 746f 6d6c 6566 7427 2c20 2762 6f74  ottomleft', 'bot
-00034040: 746f 6d72 6967 6874 275d 2e20 4465 6661  tomright']. Defa
-00034050: 756c 7473 2074 6f20 2262 6f74 746f 6d72  ults to "bottomr
-00034060: 6967 6874 222e 0d0a 2020 2020 2020 2020  ight"...        
-00034070: 2020 2020 736c 6964 6572 5f6c 656e 6774      slider_lengt
-00034080: 6820 2873 7472 2c20 6f70 7469 6f6e 616c  h (str, optional
-00034090: 293a 204c 656e 6774 6820 6f66 2074 6865  ): Length of the
-000340a0: 2074 696d 6520 736c 6964 6572 2e20 4465   time slider. De
-000340b0: 6661 756c 7473 2074 6f20 2231 3530 7078  faults to "150px
-000340c0: 222e 0d0a 2020 2020 2020 2020 2020 2020  "...            
-000340d0: 6461 7465 5f66 6f72 6d61 7420 2873 7472  date_format (str
-000340e0: 2c20 6f70 7469 6f6e 616c 293a 2054 6865  , optional): The
-000340f0: 2064 6174 6520 666f 726d 6174 2074 6f20   date format to 
-00034100: 7573 652e 2044 6566 6175 6c74 7320 746f  use. Defaults to
-00034110: 2027 5959 5959 2d4d 4d2d 6464 272e 0d0a   'YYYY-MM-dd'...
-00034120: 0d0a 2020 2020 2020 2020 5261 6973 6573  ..        Raises
-00034130: 3a0d 0a20 2020 2020 2020 2020 2020 2054  :..            T
-00034140: 7970 6545 7272 6f72 3a20 4966 2074 6865  ypeError: If the
-00034150: 2065 655f 6f62 6a65 6374 2069 7320 6e6f   ee_object is no
-00034160: 7420 6565 2e49 6d61 6765 207c 2065 652e  t ee.Image | ee.
-00034170: 496d 6167 6543 6f6c 6c65 6374 696f 6e2e  ImageCollection.
-00034180: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-00034190: 2020 2020 2020 2069 6d70 6f72 7420 7468         import th
-000341a0: 7265 6164 696e 670d 0a0d 0a20 2020 2020  reading....     
-000341b0: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-000341c0: 2865 655f 6f62 6a65 6374 2c20 6565 2e49  (ee_object, ee.I
-000341d0: 6d61 6765 293a 0d0a 2020 2020 2020 2020  mage):..        
-000341e0: 2020 2020 6966 2072 6567 696f 6e20 6973      if region is
-000341f0: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
-00034200: 2020 2020 2020 2020 2020 2020 6966 2069              if i
-00034210: 7369 6e73 7461 6e63 6528 7265 6769 6f6e  sinstance(region
-00034220: 2c20 6565 2e47 656f 6d65 7472 7929 3a0d  , ee.Geometry):.
-00034230: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00034240: 2020 2020 2065 655f 6f62 6a65 6374 203d       ee_object =
-00034250: 2065 655f 6f62 6a65 6374 2e63 6c69 7028   ee_object.clip(
-00034260: 7265 6769 6f6e 290d 0a20 2020 2020 2020  region)..       
-00034270: 2020 2020 2020 2020 2065 6c69 6620 6973           elif is
-00034280: 696e 7374 616e 6365 2872 6567 696f 6e2c  instance(region,
-00034290: 2065 652e 4665 6174 7572 6543 6f6c 6c65   ee.FeatureColle
-000342a0: 6374 696f 6e29 3a0d 0a20 2020 2020 2020  ction):..       
-000342b0: 2020 2020 2020 2020 2020 2020 2065 655f               ee_
-000342c0: 6f62 6a65 6374 203d 2065 655f 6f62 6a65  object = ee_obje
-000342d0: 6374 2e63 6c69 7054 6f43 6f6c 6c65 6374  ct.clipToCollect
-000342e0: 696f 6e28 7265 6769 6f6e 290d 0a20 2020  ion(region)..   
-000342f0: 2020 2020 2020 2020 2069 6620 6c61 7965           if laye
-00034300: 725f 6e61 6d65 206e 6f74 2069 6e20 7365  r_name not in se
-00034310: 6c66 2e65 655f 7261 7374 6572 5f6c 6179  lf.ee_raster_lay
-00034320: 6572 5f6e 616d 6573 3a0d 0a20 2020 2020  er_names:..     
-00034330: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00034340: 6164 644c 6179 6572 2865 655f 6f62 6a65  addLayer(ee_obje
-00034350: 6374 2c20 7b7d 2c20 6c61 7965 725f 6e61  ct, {}, layer_na
-00034360: 6d65 2c20 4661 6c73 6529 0d0a 2020 2020  me, False)..    
-00034370: 2020 2020 2020 2020 6261 6e64 5f6e 616d          band_nam
-00034380: 6573 203d 2065 655f 6f62 6a65 6374 2e62  es = ee_object.b
-00034390: 616e 644e 616d 6573 2829 0d0a 2020 2020  andNames()..    
-000343a0: 2020 2020 2020 2020 6565 5f6f 626a 6563          ee_objec
-000343b0: 7420 3d20 6565 2e49 6d61 6765 436f 6c6c  t = ee.ImageColl
-000343c0: 6563 7469 6f6e 280d 0a20 2020 2020 2020  ection(..       
-000343d0: 2020 2020 2020 2020 2065 655f 6f62 6a65           ee_obje
-000343e0: 6374 2e62 616e 644e 616d 6573 2829 2e6d  ct.bandNames().m
-000343f0: 6170 286c 616d 6264 6120 623a 2065 655f  ap(lambda b: ee_
-00034400: 6f62 6a65 6374 2e73 656c 6563 7428 5b62  object.select([b
-00034410: 5d29 290d 0a20 2020 2020 2020 2020 2020  ]))..           
-00034420: 2029 0d0a 0d0a 2020 2020 2020 2020 2020   )....          
-00034430: 2020 6966 206c 6162 656c 7320 6973 206e    if labels is n
-00034440: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
-00034450: 2020 2020 2020 2020 2020 6966 206c 656e            if len
-00034460: 286c 6162 656c 7329 2021 3d20 696e 7428  (labels) != int(
-00034470: 6565 5f6f 626a 6563 742e 7369 7a65 2829  ee_object.size()
-00034480: 2e67 6574 496e 666f 2829 293a 0d0a 2020  .getInfo()):..  
-00034490: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000344a0: 2020 7261 6973 6520 5661 6c75 6545 7272    raise ValueErr
-000344b0: 6f72 280d 0a20 2020 2020 2020 2020 2020  or(..           
-000344c0: 2020 2020 2020 2020 2020 2020 2022 5468               "Th
-000344d0: 6520 6c65 6e67 7468 206f 6620 6c61 6265  e length of labe
-000344e0: 6c73 206d 7573 7420 6265 2065 7175 616c  ls must be equal
-000344f0: 2074 6f20 7468 6520 6e75 6d62 6572 206f   to the number o
-00034500: 6620 6261 6e64 7320 696e 2074 6865 2069  f bands in the i
-00034510: 6d61 6765 2e22 0d0a 2020 2020 2020 2020  mage."..        
-00034520: 2020 2020 2020 2020 2020 2020 290d 0a20              ).. 
-00034530: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-00034540: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00034550: 2020 6c61 6265 6c73 203d 2062 616e 645f    labels = band_
-00034560: 6e61 6d65 732e 6765 7449 6e66 6f28 290d  names.getInfo().
-00034570: 0a0d 0a20 2020 2020 2020 2065 6c69 6620  ...        elif 
-00034580: 6973 696e 7374 616e 6365 2865 655f 6f62  isinstance(ee_ob
-00034590: 6a65 6374 2c20 6565 2e49 6d61 6765 436f  ject, ee.ImageCo
-000345a0: 6c6c 6563 7469 6f6e 293a 0d0a 2020 2020  llection):..    
-000345b0: 2020 2020 2020 2020 6966 2072 6567 696f          if regio
-000345c0: 6e20 6973 206e 6f74 204e 6f6e 653a 0d0a  n is not None:..
-000345d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000345e0: 6966 2069 7369 6e73 7461 6e63 6528 7265  if isinstance(re
-000345f0: 6769 6f6e 2c20 6565 2e47 656f 6d65 7472  gion, ee.Geometr
-00034600: 7929 3a0d 0a20 2020 2020 2020 2020 2020  y):..           
-00034610: 2020 2020 2020 2020 2065 655f 6f62 6a65           ee_obje
-00034620: 6374 203d 2065 655f 6f62 6a65 6374 2e6d  ct = ee_object.m
-00034630: 6170 286c 616d 6264 6120 696d 673a 2069  ap(lambda img: i
-00034640: 6d67 2e63 6c69 7028 7265 6769 6f6e 2929  mg.clip(region))
-00034650: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00034660: 2020 656c 6966 2069 7369 6e73 7461 6e63    elif isinstanc
-00034670: 6528 7265 6769 6f6e 2c20 6565 2e46 6561  e(region, ee.Fea
-00034680: 7475 7265 436f 6c6c 6563 7469 6f6e 293a  tureCollection):
-00034690: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000346a0: 2020 2020 2020 6565 5f6f 626a 6563 7420        ee_object 
-000346b0: 3d20 6565 5f6f 626a 6563 742e 6d61 7028  = ee_object.map(
-000346c0: 6c61 6d62 6461 2069 6d67 3a20 696d 672e  lambda img: img.
-000346d0: 636c 6970 546f 436f 6c6c 6563 7469 6f6e  clipToCollection
-000346e0: 2872 6567 696f 6e29 290d 0a0d 0a20 2020  (region))....   
-000346f0: 2020 2020 2020 2020 2069 6620 6c61 6265           if labe
-00034700: 6c73 2069 7320 6e6f 7420 4e6f 6e65 3a0d  ls is not None:.
-00034710: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00034720: 2069 6620 6c65 6e28 6c61 6265 6c73 2920   if len(labels) 
-00034730: 213d 2069 6e74 2865 655f 6f62 6a65 6374  != int(ee_object
-00034740: 2e73 697a 6528 292e 6765 7449 6e66 6f28  .size().getInfo(
-00034750: 2929 3a0d 0a20 2020 2020 2020 2020 2020  )):..           
-00034760: 2020 2020 2020 2020 2072 6169 7365 2056           raise V
-00034770: 616c 7565 4572 726f 7228 0d0a 2020 2020  alueError(..    
-00034780: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00034790: 2020 2020 2254 6865 206c 656e 6774 6820      "The length 
-000347a0: 6f66 206c 6162 656c 7320 6d75 7374 2062  of labels must b
-000347b0: 6520 6571 7561 6c20 746f 2074 6865 206e  e equal to the n
-000347c0: 756d 6265 7220 6f66 2069 6d61 6765 7320  umber of images 
-000347d0: 696e 2074 6865 2049 6d61 6765 436f 6c6c  in the ImageColl
-000347e0: 6563 7469 6f6e 2e22 0d0a 2020 2020 2020  ection."..      
-000347f0: 2020 2020 2020 2020 2020 2020 2020 290d                ).
-00034800: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
-00034810: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-00034820: 2020 2020 6c61 6265 6c73 203d 2028 0d0a      labels = (..
-00034830: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00034840: 2020 2020 6565 5f6f 626a 6563 742e 6167      ee_object.ag
-00034850: 6772 6567 6174 655f 6172 7261 7928 2273  gregate_array("s
-00034860: 7973 7465 6d3a 7469 6d65 5f73 7461 7274  ystem:time_start
-00034870: 2229 0d0a 2020 2020 2020 2020 2020 2020  ")..            
-00034880: 2020 2020 2020 2020 2e6d 6170 286c 616d          .map(lam
-00034890: 6264 6120 643a 2065 652e 4461 7465 2864  bda d: ee.Date(d
-000348a0: 292e 666f 726d 6174 2864 6174 655f 666f  ).format(date_fo
-000348b0: 726d 6174 2929 0d0a 2020 2020 2020 2020  rmat))..        
-000348c0: 2020 2020 2020 2020 2020 2020 2e67 6574              .get
-000348d0: 496e 666f 2829 0d0a 2020 2020 2020 2020  Info()..        
-000348e0: 2020 2020 2020 2020 290d 0a20 2020 2020          )..     
-000348f0: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
-00034900: 2020 2020 2020 7261 6973 6520 5479 7065        raise Type
-00034910: 4572 726f 7228 2254 6865 2065 655f 6f62  Error("The ee_ob
-00034920: 6a65 6374 206d 7573 7420 6265 2061 6e20  ject must be an 
-00034930: 6565 2e49 6d61 6765 206f 7220 6565 2e49  ee.Image or ee.I
-00034940: 6d61 6765 436f 6c6c 6563 7469 6f6e 2229  mageCollection")
-00034950: 0d0a 0d0a 2020 2020 2020 2020 2320 6966  ....        # if
-00034960: 206c 6162 656c 7320 6973 206e 6f74 204e   labels is not N
-00034970: 6f6e 653a 0d0a 2020 2020 2020 2020 2320  one:..        # 
-00034980: 2020 2020 7369 7a65 203d 206c 656e 286c      size = len(l
-00034990: 6162 656c 7329 0d0a 2020 2020 2020 2020  abels)..        
-000349a0: 2320 656c 7365 3a0d 0a20 2020 2020 2020  # else:..       
-000349b0: 2023 2020 2020 2073 697a 6520 3d20 6565   #     size = ee
-000349c0: 5f6f 626a 6563 742e 7369 7a65 2829 2e67  _object.size().g
-000349d0: 6574 496e 666f 2829 0d0a 2020 2020 2020  etInfo()..      
-000349e0: 2020 2320 2020 2020 6c61 6265 6c73 203d    #     labels =
-000349f0: 205b 7374 7228 6929 2066 6f72 2069 2069   [str(i) for i i
-00034a00: 6e20 7261 6e67 6528 312c 2073 697a 6520  n range(1, size 
-00034a10: 2b20 3129 5d0d 0a0d 0a20 2020 2020 2020  + 1)]....       
-00034a20: 2066 6972 7374 203d 2065 652e 496d 6167   first = ee.Imag
-00034a30: 6528 6565 5f6f 626a 6563 742e 6669 7273  e(ee_object.firs
-00034a40: 7428 2929 0d0a 0d0a 2020 2020 2020 2020  t())....        
-00034a50: 6966 206c 6179 6572 5f6e 616d 6520 6e6f  if layer_name no
-00034a60: 7420 696e 2073 656c 662e 6565 5f72 6173  t in self.ee_ras
-00034a70: 7465 725f 6c61 7965 725f 6e61 6d65 733a  ter_layer_names:
-00034a80: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-00034a90: 6c66 2e61 6464 4c61 7965 7228 6565 5f6f  lf.addLayer(ee_o
-00034aa0: 626a 6563 742e 746f 4261 6e64 7328 292c  bject.toBands(),
-00034ab0: 207b 7d2c 206c 6179 6572 5f6e 616d 652c   {}, layer_name,
-00034ac0: 2046 616c 7365 290d 0a20 2020 2020 2020   False)..       
-00034ad0: 2073 656c 662e 6164 644c 6179 6572 2866   self.addLayer(f
-00034ae0: 6972 7374 2c20 7669 735f 7061 7261 6d73  irst, vis_params
-00034af0: 2c20 2249 6d61 6765 2058 2229 0d0a 0d0a  , "Image X")....
-00034b00: 2020 2020 2020 2020 736c 6964 6572 203d          slider =
-00034b10: 2077 6964 6765 7473 2e49 6e74 536c 6964   widgets.IntSlid
-00034b20: 6572 280d 0a20 2020 2020 2020 2020 2020  er(..           
-00034b30: 206d 696e 3d31 2c0d 0a20 2020 2020 2020   min=1,..       
-00034b40: 2020 2020 206d 6178 3d6c 656e 286c 6162       max=len(lab
-00034b50: 656c 7329 2c0d 0a20 2020 2020 2020 2020  els),..         
-00034b60: 2020 2072 6561 646f 7574 3d46 616c 7365     readout=False
-00034b70: 2c0d 0a20 2020 2020 2020 2020 2020 2063  ,..            c
-00034b80: 6f6e 7469 6e75 6f75 735f 7570 6461 7465  ontinuous_update
-00034b90: 3d46 616c 7365 2c0d 0a20 2020 2020 2020  =False,..       
-00034ba0: 2020 2020 206c 6179 6f75 743d 7769 6467       layout=widg
-00034bb0: 6574 732e 4c61 796f 7574 2877 6964 7468  ets.Layout(width
-00034bc0: 3d73 6c69 6465 725f 6c65 6e67 7468 292c  =slider_length),
-00034bd0: 0d0a 2020 2020 2020 2020 290d 0a20 2020  ..        )..   
-00034be0: 2020 2020 206c 6162 656c 203d 2077 6964       label = wid
-00034bf0: 6765 7473 2e4c 6162 656c 280d 0a20 2020  gets.Label(..   
-00034c00: 2020 2020 2020 2020 2076 616c 7565 3d6c           value=l
-00034c10: 6162 656c 735b 305d 2c20 6c61 796f 7574  abels[0], layout
-00034c20: 3d77 6964 6765 7473 2e4c 6179 6f75 7428  =widgets.Layout(
-00034c30: 7061 6464 696e 673d 2230 7078 2035 7078  padding="0px 5px
-00034c40: 2030 7078 2035 7078 2229 0d0a 2020 2020   0px 5px")..    
-00034c50: 2020 2020 290d 0a0d 0a20 2020 2020 2020      )....       
-00034c60: 2070 6c61 795f 6274 6e20 3d20 7769 6467   play_btn = widg
-00034c70: 6574 732e 4275 7474 6f6e 280d 0a20 2020  ets.Button(..   
-00034c80: 2020 2020 2020 2020 2069 636f 6e3d 2270           icon="p
-00034c90: 6c61 7922 2c0d 0a20 2020 2020 2020 2020  lay",..         
-00034ca0: 2020 2074 6f6f 6c74 6970 3d22 506c 6179     tooltip="Play
-00034cb0: 2074 6865 2074 696d 6520 736c 6964 6572   the time slider
-00034cc0: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
-00034cd0: 6275 7474 6f6e 5f73 7479 6c65 3d22 7072  button_style="pr
-00034ce0: 696d 6172 7922 2c0d 0a20 2020 2020 2020  imary",..       
-00034cf0: 2020 2020 206c 6179 6f75 743d 7769 6467       layout=widg
-00034d00: 6574 732e 4c61 796f 7574 2877 6964 7468  ets.Layout(width
-00034d10: 3d22 3332 7078 2229 2c0d 0a20 2020 2020  ="32px"),..     
-00034d20: 2020 2029 0d0a 0d0a 2020 2020 2020 2020     )....        
-00034d30: 7061 7573 655f 6274 6e20 3d20 7769 6467  pause_btn = widg
-00034d40: 6574 732e 4275 7474 6f6e 280d 0a20 2020  ets.Button(..   
-00034d50: 2020 2020 2020 2020 2069 636f 6e3d 2270           icon="p
-00034d60: 6175 7365 222c 0d0a 2020 2020 2020 2020  ause",..        
-00034d70: 2020 2020 746f 6f6c 7469 703d 2250 6175      tooltip="Pau
-00034d80: 7365 2074 6865 2074 696d 6520 736c 6964  se the time slid
-00034d90: 6572 222c 0d0a 2020 2020 2020 2020 2020  er",..          
-00034da0: 2020 6275 7474 6f6e 5f73 7479 6c65 3d22    button_style="
-00034db0: 7072 696d 6172 7922 2c0d 0a20 2020 2020  primary",..     
-00034dc0: 2020 2020 2020 206c 6179 6f75 743d 7769         layout=wi
-00034dd0: 6467 6574 732e 4c61 796f 7574 2877 6964  dgets.Layout(wid
-00034de0: 7468 3d22 3332 7078 2229 2c0d 0a20 2020  th="32px"),..   
-00034df0: 2020 2020 2029 0d0a 0d0a 2020 2020 2020       )....      
-00034e00: 2020 636c 6f73 655f 6274 6e20 3d20 7769    close_btn = wi
-00034e10: 6467 6574 732e 4275 7474 6f6e 280d 0a20  dgets.Button(.. 
-00034e20: 2020 2020 2020 2020 2020 2069 636f 6e3d             icon=
-00034e30: 2274 696d 6573 222c 0d0a 2020 2020 2020  "times",..      
-00034e40: 2020 2020 2020 746f 6f6c 7469 703d 2243        tooltip="C
-00034e50: 6c6f 7365 2074 6865 2074 696d 6520 736c  lose the time sl
-00034e60: 6964 6572 222c 0d0a 2020 2020 2020 2020  ider",..        
-00034e70: 2020 2020 6275 7474 6f6e 5f73 7479 6c65      button_style
-00034e80: 3d22 7072 696d 6172 7922 2c0d 0a20 2020  ="primary",..   
-00034e90: 2020 2020 2020 2020 206c 6179 6f75 743d           layout=
-00034ea0: 7769 6467 6574 732e 4c61 796f 7574 2877  widgets.Layout(w
-00034eb0: 6964 7468 3d22 3332 7078 2229 2c0d 0a20  idth="32px"),.. 
-00034ec0: 2020 2020 2020 2029 0d0a 0d0a 2020 2020         )....    
-00034ed0: 2020 2020 706c 6179 5f63 686b 203d 2077      play_chk = w
-00034ee0: 6964 6765 7473 2e43 6865 636b 626f 7828  idgets.Checkbox(
-00034ef0: 7661 6c75 653d 4661 6c73 6529 0d0a 0d0a  value=False)....
-00034f00: 2020 2020 2020 2020 736c 6964 6572 5f77          slider_w
-00034f10: 6964 6765 7420 3d20 7769 6467 6574 732e  idget = widgets.
-00034f20: 4842 6f78 285b 736c 6964 6572 2c20 6c61  HBox([slider, la
-00034f30: 6265 6c2c 2070 6c61 795f 6274 6e2c 2070  bel, play_btn, p
-00034f40: 6175 7365 5f62 746e 2c20 636c 6f73 655f  ause_btn, close_
-00034f50: 6274 6e5d 290d 0a0d 0a20 2020 2020 2020  btn])....       
-00034f60: 2064 6566 2070 6c61 795f 636c 6963 6b28   def play_click(
-00034f70: 6229 3a0d 0a0d 0a20 2020 2020 2020 2020  b):....         
-00034f80: 2020 2070 6c61 795f 6368 6b2e 7661 6c75     play_chk.valu
-00034f90: 6520 3d20 5472 7565 0d0a 0d0a 2020 2020  e = True....    
-00034fa0: 2020 2020 2020 2020 6465 6620 776f 726b          def work
-00034fb0: 2873 6c69 6465 7229 3a0d 0a20 2020 2020  (slider):..     
-00034fc0: 2020 2020 2020 2020 2020 2077 6869 6c65             while
-00034fd0: 2070 6c61 795f 6368 6b2e 7661 6c75 653a   play_chk.value:
-00034fe0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00034ff0: 2020 2020 2020 6966 2073 6c69 6465 722e        if slider.
-00035000: 7661 6c75 6520 3c20 6c65 6e28 6c61 6265  value < len(labe
-00035010: 6c73 293a 0d0a 2020 2020 2020 2020 2020  ls):..          
-00035020: 2020 2020 2020 2020 2020 2020 2020 736c                sl
-00035030: 6964 6572 2e76 616c 7565 202b 3d20 310d  ider.value += 1.
-00035040: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00035050: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
-00035060: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00035070: 2020 2020 736c 6964 6572 2e76 616c 7565      slider.value
-00035080: 203d 2031 0d0a 2020 2020 2020 2020 2020   = 1..          
-00035090: 2020 2020 2020 2020 2020 7469 6d65 2e73            time.s
-000350a0: 6c65 6570 2874 696d 655f 696e 7465 7276  leep(time_interv
-000350b0: 616c 290d 0a0d 0a20 2020 2020 2020 2020  al)....         
-000350c0: 2020 2074 6872 6561 6420 3d20 7468 7265     thread = thre
-000350d0: 6164 696e 672e 5468 7265 6164 2874 6172  ading.Thread(tar
-000350e0: 6765 743d 776f 726b 2c20 6172 6773 3d28  get=work, args=(
-000350f0: 736c 6964 6572 2c29 290d 0a20 2020 2020  slider,))..     
-00035100: 2020 2020 2020 2074 6872 6561 642e 7374         thread.st
-00035110: 6172 7428 290d 0a0d 0a20 2020 2020 2020  art()....       
-00035120: 2064 6566 2070 6175 7365 5f63 6c69 636b   def pause_click
-00035130: 2862 293a 0d0a 2020 2020 2020 2020 2020  (b):..          
-00035140: 2020 706c 6179 5f63 686b 2e76 616c 7565    play_chk.value
-00035150: 203d 2046 616c 7365 0d0a 0d0a 2020 2020   = False....    
-00035160: 2020 2020 706c 6179 5f62 746e 2e6f 6e5f      play_btn.on_
-00035170: 636c 6963 6b28 706c 6179 5f63 6c69 636b  click(play_click
-00035180: 290d 0a20 2020 2020 2020 2070 6175 7365  )..        pause
-00035190: 5f62 746e 2e6f 6e5f 636c 6963 6b28 7061  _btn.on_click(pa
-000351a0: 7573 655f 636c 6963 6b29 0d0a 0d0a 2020  use_click)....  
-000351b0: 2020 2020 2020 6465 6620 736c 6964 6572        def slider
-000351c0: 5f63 6861 6e67 6564 2863 6861 6e67 6529  _changed(change)
-000351d0: 3a0d 0a20 2020 2020 2020 2020 2020 2073  :..            s
-000351e0: 656c 662e 6465 6661 756c 745f 7374 796c  elf.default_styl
-000351f0: 6520 3d20 7b22 6375 7273 6f72 223a 2022  e = {"cursor": "
-00035200: 7761 6974 227d 0d0a 2020 2020 2020 2020  wait"}..        
-00035210: 2020 2020 696e 6465 7820 3d20 736c 6964      index = slid
-00035220: 6572 2e76 616c 7565 202d 2031 0d0a 2020  er.value - 1..  
-00035230: 2020 2020 2020 2020 2020 6c61 6265 6c2e            label.
-00035240: 7661 6c75 6520 3d20 6c61 6265 6c73 5b69  value = labels[i
-00035250: 6e64 6578 5d0d 0a20 2020 2020 2020 2020  ndex]..         
-00035260: 2020 2069 6d61 6765 203d 2065 652e 496d     image = ee.Im
-00035270: 6167 6528 6565 5f6f 626a 6563 742e 746f  age(ee_object.to
-00035280: 4c69 7374 2865 655f 6f62 6a65 6374 2e73  List(ee_object.s
-00035290: 697a 6528 2929 2e67 6574 2869 6e64 6578  ize()).get(index
-000352a0: 2929 0d0a 2020 2020 2020 2020 2020 2020  ))..            
-000352b0: 6966 206c 6179 6572 5f6e 616d 6520 6e6f  if layer_name no
-000352c0: 7420 696e 2073 656c 662e 6565 5f72 6173  t in self.ee_ras
-000352d0: 7465 725f 6c61 7965 725f 6e61 6d65 733a  ter_layer_names:
-000352e0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000352f0: 2020 7365 6c66 2e61 6464 4c61 7965 7228    self.addLayer(
-00035300: 6565 5f6f 626a 6563 742e 746f 4261 6e64  ee_object.toBand
-00035310: 7328 292c 207b 7d2c 206c 6179 6572 5f6e  s(), {}, layer_n
-00035320: 616d 652c 2046 616c 7365 290d 0a20 2020  ame, False)..   
-00035330: 2020 2020 2020 2020 2073 656c 662e 6164           self.ad
-00035340: 644c 6179 6572 2869 6d61 6765 2c20 7669  dLayer(image, vi
-00035350: 735f 7061 7261 6d73 2c20 2249 6d61 6765  s_params, "Image
-00035360: 2058 2229 0d0a 2020 2020 2020 2020 2020   X")..          
-00035370: 2020 7365 6c66 2e64 6566 6175 6c74 5f73    self.default_s
-00035380: 7479 6c65 203d 207b 2263 7572 736f 7222  tyle = {"cursor"
-00035390: 3a20 2264 6566 6175 6c74 227d 0d0a 0d0a  : "default"}....
-000353a0: 2020 2020 2020 2020 736c 6964 6572 2e6f          slider.o
-000353b0: 6273 6572 7665 2873 6c69 6465 725f 6368  bserve(slider_ch
-000353c0: 616e 6765 642c 2022 7661 6c75 6522 290d  anged, "value").
-000353d0: 0a0d 0a20 2020 2020 2020 2064 6566 2063  ...        def c
-000353e0: 6c6f 7365 5f63 6c69 636b 2862 293a 0d0a  lose_click(b):..
-000353f0: 2020 2020 2020 2020 2020 2020 706c 6179              play
-00035400: 5f63 686b 2e76 616c 7565 203d 2046 616c  _chk.value = Fal
-00035410: 7365 0d0a 2020 2020 2020 2020 2020 2020  se..            
-00035420: 7365 6c66 2e74 6f6f 6c62 6172 5f72 6573  self.toolbar_res
-00035430: 6574 2829 0d0a 2020 2020 2020 2020 2020  et()..          
-00035440: 2020 7365 6c66 2e72 656d 6f76 655f 6565    self.remove_ee
-00035450: 5f6c 6179 6572 2822 496d 6167 6520 5822  _layer("Image X"
-00035460: 290d 0a20 2020 2020 2020 2020 2020 2073  )..            s
-00035470: 656c 662e 7265 6d6f 7665 5f65 655f 6c61  elf.remove_ee_la
-00035480: 7965 7228 6c61 7965 725f 6e61 6d65 290d  yer(layer_name).
-00035490: 0a0d 0a20 2020 2020 2020 2020 2020 2069  ...            i
-000354a0: 6620 7365 6c66 2e73 6c69 6465 725f 6374  f self.slider_ct
-000354b0: 726c 2069 7320 6e6f 7420 4e6f 6e65 2061  rl is not None a
-000354c0: 6e64 2073 656c 662e 736c 6964 6572 5f63  nd self.slider_c
-000354d0: 7472 6c20 696e 2073 656c 662e 636f 6e74  trl in self.cont
-000354e0: 726f 6c73 3a0d 0a20 2020 2020 2020 2020  rols:..         
-000354f0: 2020 2020 2020 2073 656c 662e 7265 6d6f         self.remo
-00035500: 7665 5f63 6f6e 7472 6f6c 2873 656c 662e  ve_control(self.
-00035510: 736c 6964 6572 5f63 7472 6c29 0d0a 2020  slider_ctrl)..  
-00035520: 2020 2020 2020 2020 2020 736c 6964 6572            slider
-00035530: 5f77 6964 6765 742e 636c 6f73 6528 290d  _widget.close().
-00035540: 0a0d 0a20 2020 2020 2020 2063 6c6f 7365  ...        close
-00035550: 5f62 746e 2e6f 6e5f 636c 6963 6b28 636c  _btn.on_click(cl
-00035560: 6f73 655f 636c 6963 6b29 0d0a 0d0a 2020  ose_click)....  
-00035570: 2020 2020 2020 736c 6964 6572 5f63 7472        slider_ctr
-00035580: 6c20 3d20 6970 796c 6561 666c 6574 2e57  l = ipyleaflet.W
-00035590: 6964 6765 7443 6f6e 7472 6f6c 2877 6964  idgetControl(wid
-000355a0: 6765 743d 736c 6964 6572 5f77 6964 6765  get=slider_widge
-000355b0: 742c 2070 6f73 6974 696f 6e3d 706f 7369  t, position=posi
-000355c0: 7469 6f6e 290d 0a20 2020 2020 2020 2073  tion)..        s
-000355d0: 656c 662e 6164 645f 636f 6e74 726f 6c28  elf.add_control(
-000355e0: 736c 6964 6572 5f63 7472 6c29 0d0a 2020  slider_ctrl)..  
-000355f0: 2020 2020 2020 7365 6c66 2e73 6c69 6465        self.slide
-00035600: 725f 6374 726c 203d 2073 6c69 6465 725f  r_ctrl = slider_
-00035610: 6374 726c 0d0a 0d0a 2020 2020 6465 6620  ctrl....    def 
-00035620: 6164 645f 7879 5f64 6174 6128 0d0a 2020  add_xy_data(..  
-00035630: 2020 2020 2020 7365 6c66 2c0d 0a20 2020        self,..   
-00035640: 2020 2020 2069 6e5f 6373 762c 0d0a 2020       in_csv,..  
-00035650: 2020 2020 2020 783d 226c 6f6e 6769 7475        x="longitu
-00035660: 6465 222c 0d0a 2020 2020 2020 2020 793d  de",..        y=
-00035670: 226c 6174 6974 7564 6522 2c0d 0a20 2020  "latitude",..   
-00035680: 2020 2020 206c 6162 656c 3d4e 6f6e 652c       label=None,
-00035690: 0d0a 2020 2020 2020 2020 6c61 7965 725f  ..        layer_
-000356a0: 6e61 6d65 3d22 4d61 726b 6572 2063 6c75  name="Marker clu
-000356b0: 7374 6572 222c 0d0a 2020 2020 2020 2020  ster",..        
-000356c0: 746f 5f65 653d 4661 6c73 652c 0d0a 2020  to_ee=False,..  
-000356d0: 2020 293a 0d0a 2020 2020 2020 2020 2222    ):..        ""
-000356e0: 2241 6464 7320 706f 696e 7473 2066 726f  "Adds points fro
-000356f0: 6d20 6120 4353 5620 6669 6c65 2063 6f6e  m a CSV file con
-00035700: 7461 696e 696e 6720 6c61 742f 6c6f 6e20  taining lat/lon 
-00035710: 696e 666f 726d 6174 696f 6e20 616e 6420  information and 
-00035720: 6469 7370 6c61 7920 6461 7461 206f 6e20  display data on 
-00035730: 7468 6520 6d61 702e 0d0a 0d0a 2020 2020  the map.....    
-00035740: 2020 2020 4172 6773 3a0d 0a20 2020 2020      Args:..     
-00035750: 2020 2020 2020 2069 6e5f 6373 7620 2873         in_csv (s
-00035760: 7472 293a 2054 6865 2066 696c 6520 7061  tr): The file pa
-00035770: 7468 2074 6f20 7468 6520 696e 7075 7420  th to the input 
-00035780: 4353 5620 6669 6c65 2e0d 0a20 2020 2020  CSV file...     
-00035790: 2020 2020 2020 2078 2028 7374 722c 206f         x (str, o
-000357a0: 7074 696f 6e61 6c29 3a20 5468 6520 6e61  ptional): The na
-000357b0: 6d65 206f 6620 7468 6520 636f 6c75 6d6e  me of the column
-000357c0: 2063 6f6e 7461 696e 696e 6720 6c6f 6e67   containing long
-000357d0: 6974 7564 6520 636f 6f72 6469 6e61 7465  itude coordinate
-000357e0: 732e 2044 6566 6175 6c74 7320 746f 2022  s. Defaults to "
-000357f0: 6c6f 6e67 6974 7564 6522 2e0d 0a20 2020  longitude"...   
-00035800: 2020 2020 2020 2020 2079 2028 7374 722c           y (str,
-00035810: 206f 7074 696f 6e61 6c29 3a20 5468 6520   optional): The 
-00035820: 6e61 6d65 206f 6620 7468 6520 636f 6c75  name of the colu
-00035830: 6d6e 2063 6f6e 7461 696e 696e 6720 6c61  mn containing la
-00035840: 7469 7475 6465 2063 6f6f 7264 696e 6174  titude coordinat
-00035850: 6573 2e20 4465 6661 756c 7473 2074 6f20  es. Defaults to 
-00035860: 226c 6174 6974 7564 6522 2e0d 0a20 2020  "latitude"...   
-00035870: 2020 2020 2020 2020 206c 6162 656c 2028           label (
-00035880: 7374 722c 206f 7074 696f 6e61 6c29 3a20  str, optional): 
-00035890: 5468 6520 6e61 6d65 206f 6620 7468 6520  The name of the 
-000358a0: 636f 6c75 6d6e 2063 6f6e 7461 696e 696e  column containin
-000358b0: 6720 6c61 6265 6c20 696e 666f 726d 6174  g label informat
-000358c0: 696f 6e20 746f 2075 7365 6420 666f 7220  ion to used for 
-000358d0: 6d61 726b 6572 2070 6f70 7570 2e20 4465  marker popup. De
-000358e0: 6661 756c 7473 2074 6f20 4e6f 6e65 2e0d  faults to None..
-000358f0: 0a20 2020 2020 2020 2020 2020 206c 6179  .            lay
-00035900: 6572 5f6e 616d 6520 2873 7472 2c20 6f70  er_name (str, op
-00035910: 7469 6f6e 616c 293a 2054 6865 206c 6179  tional): The lay
-00035920: 6572 206e 616d 6520 746f 2075 7365 2e20  er name to use. 
-00035930: 4465 6661 756c 7473 2074 6f20 224d 6172  Defaults to "Mar
-00035940: 6b65 7220 636c 7573 7465 7222 2e0d 0a20  ker cluster"... 
-00035950: 2020 2020 2020 2020 2020 2074 6f5f 6565             to_ee
-00035960: 2028 626f 6f6c 2c20 6f70 7469 6f6e 616c   (bool, optional
-00035970: 293a 2057 6865 7468 6572 2074 6f20 636f  ): Whether to co
-00035980: 6e76 6572 7420 7468 6520 6373 7620 746f  nvert the csv to
-00035990: 2061 6e20 6565 2e46 6561 7475 7265 436f   an ee.FeatureCo
-000359a0: 6c6c 6563 7469 6f6e 2e0d 0a0d 0a20 2020  llection.....   
-000359b0: 2020 2020 2052 6169 7365 733a 0d0a 2020       Raises:..  
-000359c0: 2020 2020 2020 2020 2020 4669 6c65 4e6f            FileNo
-000359d0: 7446 6f75 6e64 4572 726f 723a 2054 6865  tFoundError: The
-000359e0: 2073 7065 6369 6669 6564 2069 6e70 7574   specified input
-000359f0: 2063 7376 2064 6f65 7320 6e6f 7420 6578   csv does not ex
-00035a00: 6973 742e 0d0a 2020 2020 2020 2020 2020  ist...          
-00035a10: 2020 5661 6c75 6545 7272 6f72 3a20 5468    ValueError: Th
-00035a20: 6520 7370 6563 6966 6965 6420 7820 636f  e specified x co
-00035a30: 6c75 6d6e 2064 6f65 7320 6e6f 7420 6578  lumn does not ex
-00035a40: 6973 742e 0d0a 2020 2020 2020 2020 2020  ist...          
-00035a50: 2020 5661 6c75 6545 7272 6f72 3a20 5468    ValueError: Th
-00035a60: 6520 7370 6563 6966 6965 6420 7920 636f  e specified y co
-00035a70: 6c75 6d6e 2064 6f65 7320 6e6f 7420 6578  lumn does not ex
-00035a80: 6973 742e 0d0a 2020 2020 2020 2020 2020  ist...          
-00035a90: 2020 5661 6c75 6545 7272 6f72 3a20 5468    ValueError: Th
-00035aa0: 6520 7370 6563 6966 6965 6420 6c61 6265  e specified labe
-00035ab0: 6c20 636f 6c75 6d6e 2064 6f65 7320 6e6f  l column does no
-00035ac0: 7420 6578 6973 742e 0d0a 2020 2020 2020  t exist...      
-00035ad0: 2020 2222 220d 0a20 2020 2020 2020 2069    """..        i
-00035ae0: 6d70 6f72 7420 7061 6e64 6173 2061 7320  mport pandas as 
-00035af0: 7064 0d0a 0d0a 2020 2020 2020 2020 6966  pd....        if
-00035b00: 206e 6f74 2069 6e5f 6373 762e 7374 6172   not in_csv.star
-00035b10: 7473 7769 7468 2822 6874 7470 2229 2061  tswith("http") a
-00035b20: 6e64 2028 6e6f 7420 6f73 2e70 6174 682e  nd (not os.path.
-00035b30: 6578 6973 7473 2869 6e5f 6373 7629 293a  exists(in_csv)):
-00035b40: 0d0a 2020 2020 2020 2020 2020 2020 7261  ..            ra
-00035b50: 6973 6520 4669 6c65 4e6f 7446 6f75 6e64  ise FileNotFound
-00035b60: 4572 726f 7228 2254 6865 2073 7065 6369  Error("The speci
-00035b70: 6669 6564 2069 6e70 7574 2063 7376 2064  fied input csv d
-00035b80: 6f65 7320 6e6f 7420 6578 6973 742e 2229  oes not exist.")
-00035b90: 0d0a 0d0a 2020 2020 2020 2020 6466 203d  ....        df =
-00035ba0: 2070 642e 7265 6164 5f63 7376 2869 6e5f   pd.read_csv(in_
-00035bb0: 6373 7629 0d0a 2020 2020 2020 2020 636f  csv)..        co
-00035bc0: 6c5f 6e61 6d65 7320 3d20 6466 2e63 6f6c  l_names = df.col
-00035bd0: 756d 6e73 2e76 616c 7565 732e 746f 6c69  umns.values.toli
-00035be0: 7374 2829 0d0a 0d0a 2020 2020 2020 2020  st()....        
-00035bf0: 6966 2078 206e 6f74 2069 6e20 636f 6c5f  if x not in col_
-00035c00: 6e61 6d65 733a 0d0a 2020 2020 2020 2020  names:..        
-00035c10: 2020 2020 7261 6973 6520 5661 6c75 6545      raise ValueE
-00035c20: 7272 6f72 2866 2278 206d 7573 7420 6265  rror(f"x must be
-00035c30: 206f 6e65 206f 6620 7468 6520 666f 6c6c   one of the foll
-00035c40: 6f77 696e 673a 207b 272c 2027 2e6a 6f69  owing: {', '.joi
-00035c50: 6e28 636f 6c5f 6e61 6d65 7329 7d22 290d  n(col_names)}").
-00035c60: 0a0d 0a20 2020 2020 2020 2069 6620 7920  ...        if y 
-00035c70: 6e6f 7420 696e 2063 6f6c 5f6e 616d 6573  not in col_names
+00032710: 2020 2072 6f77 7320 2869 6e74 206f 7220     rows (int or 
+00032720: 736c 6963 652c 206f 7074 696f 6e61 6c29  slice, optional)
+00032730: 3a20 4c6f 6164 2069 6e20 7370 6563 6966  : Load in specif
+00032740: 6963 2072 6f77 7320 6279 2070 6173 7369  ic rows by passi
+00032750: 6e67 2061 6e20 696e 7465 6765 7220 2866  ng an integer (f
+00032760: 6972 7374 206e 2072 6f77 7329 206f 7220  irst n rows) or 
+00032770: 6120 736c 6963 6528 2920 6f62 6a65 6374  a slice() object
+00032780: 2e2e 2044 6566 6175 6c74 7320 746f 204e  .. Defaults to N
+00032790: 6f6e 652e 0d0a 2020 2020 2020 2020 2020  one...          
+000327a0: 2020 7374 796c 6520 2864 6963 742c 206f    style (dict, o
+000327b0: 7074 696f 6e61 6c29 3a20 4120 6469 6374  ptional): A dict
+000327c0: 696f 6e61 7279 2073 7065 6369 6679 696e  ionary specifyin
+000327d0: 6720 7468 6520 7374 796c 6520 746f 2062  g the style to b
+000327e0: 6520 7573 6564 2e20 4465 6661 756c 7473  e used. Defaults
+000327f0: 2074 6f20 7b7d 2e0d 0a20 2020 2020 2020   to {}...       
+00032800: 2020 2020 2068 6f76 6572 5f73 7479 6c65       hover_style
+00032810: 2028 6469 6374 2c20 6f70 7469 6f6e 616c   (dict, optional
+00032820: 293a 2048 6f76 6572 2073 7479 6c65 2064  ): Hover style d
+00032830: 6963 7469 6f6e 6172 792e 2044 6566 6175  ictionary. Defau
+00032840: 6c74 7320 746f 207b 7d2e 0d0a 2020 2020  lts to {}...    
+00032850: 2020 2020 2020 2020 7374 796c 655f 6361          style_ca
+00032860: 6c6c 6261 636b 2028 6675 6e63 7469 6f6e  llback (function
+00032870: 2c20 6f70 7469 6f6e 616c 293a 2053 7479  , optional): Sty
+00032880: 6c69 6e67 2066 756e 6374 696f 6e20 7468  ling function th
+00032890: 6174 2069 7320 6361 6c6c 6564 2066 6f72  at is called for
+000328a0: 2065 6163 6820 6665 6174 7572 652c 2061   each feature, a
+000328b0: 6e64 2073 686f 756c 6420 7265 7475 726e  nd should return
+000328c0: 2074 6865 2066 6561 7475 7265 2073 7479   the feature sty
+000328d0: 6c65 2e20 5468 6973 2073 7479 6c69 6e67  le. This styling
+000328e0: 2066 756e 6374 696f 6e20 7461 6b65 7320   function takes 
+000328f0: 7468 6520 6665 6174 7572 6520 6173 2061  the feature as a
+00032900: 7267 756d 656e 742e 2044 6566 6175 6c74  rgument. Default
+00032910: 7320 746f 204e 6f6e 652e 0d0a 2020 2020  s to None...    
+00032920: 2020 2020 2020 2020 6669 6c6c 5f63 6f6c          fill_col
+00032930: 6f72 7320 286c 6973 742c 206f 7074 696f  ors (list, optio
+00032940: 6e61 6c29 3a20 5468 6520 7261 6e64 6f6d  nal): The random
+00032950: 2063 6f6c 6f72 7320 746f 2075 7365 2066   colors to use f
+00032960: 6f72 2066 696c 6c69 6e67 2070 6f6c 7967  or filling polyg
+00032970: 6f6e 732e 2044 6566 6175 6c74 7320 746f  ons. Defaults to
+00032980: 205b 2262 6c61 636b 225d 2e0d 0a20 2020   ["black"]...   
+00032990: 2020 2020 2020 2020 2069 6e66 6f5f 6d6f           info_mo
+000329a0: 6465 2028 7374 722c 206f 7074 696f 6e61  de (str, optiona
+000329b0: 6c29 3a20 4469 7370 6c61 7973 2074 6865  l): Displays the
+000329c0: 2061 7474 7269 6275 7465 7320 6279 2065   attributes by e
+000329d0: 6974 6865 7220 6f6e 5f68 6f76 6572 206f  ither on_hover o
+000329e0: 7220 6f6e 5f63 6c69 636b 2e20 416e 7920  r on_click. Any 
+000329f0: 7661 6c75 6520 6f74 6865 7220 7468 616e  value other than
+00032a00: 2022 6f6e 5f68 6f76 6572 2220 6f72 2022   "on_hover" or "
+00032a10: 6f6e 5f63 6c69 636b 2220 7769 6c6c 2062  on_click" will b
+00032a20: 6520 7472 6561 7465 6420 6173 204e 6f6e  e treated as Non
+00032a30: 652e 2044 6566 6175 6c74 7320 746f 2022  e. Defaults to "
+00032a40: 6f6e 5f68 6f76 6572 222e 0d0a 0d0a 2020  on_hover".....  
+00032a50: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
+00032a60: 2020 2069 6620 6e6f 7420 6669 6c65 6e61     if not filena
+00032a70: 6d65 2e73 7461 7274 7377 6974 6828 2268  me.startswith("h
+00032a80: 7474 7022 293a 0d0a 2020 2020 2020 2020  ttp"):..        
+00032a90: 2020 2020 6669 6c65 6e61 6d65 203d 206f      filename = o
+00032aa0: 732e 7061 7468 2e61 6273 7061 7468 2866  s.path.abspath(f
+00032ab0: 696c 656e 616d 6529 0d0a 2020 2020 2020  ilename)..      
+00032ac0: 2020 6966 2074 6f5f 6565 3a0d 0a0d 0a20    if to_ee:.... 
+00032ad0: 2020 2020 2020 2020 2020 2066 6320 3d20             fc = 
+00032ae0: 7665 6374 6f72 5f74 6f5f 6565 280d 0a20  vector_to_ee(.. 
+00032af0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00032b00: 696c 656e 616d 652c 0d0a 2020 2020 2020  ilename,..      
+00032b10: 2020 2020 2020 2020 2020 6262 6f78 3d62            bbox=b
+00032b20: 626f 782c 0d0a 2020 2020 2020 2020 2020  box,..          
+00032b30: 2020 2020 2020 6d61 736b 3d6d 6173 6b2c        mask=mask,
+00032b40: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00032b50: 2020 726f 7773 3d72 6f77 732c 0d0a 2020    rows=rows,..  
+00032b60: 2020 2020 2020 2020 2020 2020 2020 6765                ge
+00032b70: 6f64 6573 6963 3d54 7275 652c 0d0a 2020  odesic=True,..  
+00032b80: 2020 2020 2020 2020 2020 2020 2020 2a2a                **
+00032b90: 6b77 6172 6773 2c0d 0a20 2020 2020 2020  kwargs,..       
+00032ba0: 2020 2020 2029 0d0a 0d0a 2020 2020 2020       )....      
+00032bb0: 2020 2020 2020 7365 6c66 2e61 6464 4c61        self.addLa
+00032bc0: 7965 7228 6663 2c20 7b7d 2c20 6c61 7965  yer(fc, {}, laye
+00032bd0: 725f 6e61 6d65 290d 0a20 2020 2020 2020  r_name)..       
+00032be0: 2065 6c73 653a 0d0a 0d0a 2020 2020 2020   else:....      
+00032bf0: 2020 2020 2020 6578 7420 3d20 6f73 2e70        ext = os.p
+00032c00: 6174 682e 7370 6c69 7465 7874 2866 696c  ath.splitext(fil
+00032c10: 656e 616d 6529 5b31 5d2e 6c6f 7765 7228  ename)[1].lower(
+00032c20: 290d 0a20 2020 2020 2020 2020 2020 2069  )..            i
+00032c30: 6620 6578 7420 3d3d 2022 2e73 6870 223a  f ext == ".shp":
+00032c40: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00032c50: 2020 7365 6c66 2e61 6464 5f73 6861 7065    self.add_shape
+00032c60: 6669 6c65 280d 0a20 2020 2020 2020 2020  file(..         
+00032c70: 2020 2020 2020 2020 2020 2066 696c 656e             filen
+00032c80: 616d 652c 0d0a 2020 2020 2020 2020 2020  ame,..          
+00032c90: 2020 2020 2020 2020 2020 6c61 7965 725f            layer_
+00032ca0: 6e61 6d65 2c0d 0a20 2020 2020 2020 2020  name,..         
+00032cb0: 2020 2020 2020 2020 2020 2073 7479 6c65             style
+00032cc0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+00032cd0: 2020 2020 2020 2068 6f76 6572 5f73 7479         hover_sty
+00032ce0: 6c65 2c0d 0a20 2020 2020 2020 2020 2020  le,..           
+00032cf0: 2020 2020 2020 2020 2073 7479 6c65 5f63           style_c
+00032d00: 616c 6c62 6163 6b2c 0d0a 2020 2020 2020  allback,..      
+00032d10: 2020 2020 2020 2020 2020 2020 2020 6669                fi
+00032d20: 6c6c 5f63 6f6c 6f72 732c 0d0a 2020 2020  ll_colors,..    
+00032d30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00032d40: 696e 666f 5f6d 6f64 652c 0d0a 2020 2020  info_mode,..    
+00032d50: 2020 2020 2020 2020 2020 2020 290d 0a20              ).. 
+00032d60: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+00032d70: 6578 7420 696e 205b 222e 6a73 6f6e 222c  ext in [".json",
+00032d80: 2022 2e67 656f 6a73 6f6e 225d 3a0d 0a20   ".geojson"]:.. 
+00032d90: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00032da0: 656c 662e 6164 645f 6765 6f6a 736f 6e28  elf.add_geojson(
+00032db0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00032dc0: 2020 2020 2020 6669 6c65 6e61 6d65 2c0d        filename,.
+00032dd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00032de0: 2020 2020 206c 6179 6572 5f6e 616d 652c       layer_name,
+00032df0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00032e00: 2020 2020 2020 7374 796c 652c 0d0a 2020        style,..  
+00032e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00032e20: 2020 686f 7665 725f 7374 796c 652c 0d0a    hover_style,..
+00032e30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00032e40: 2020 2020 7374 796c 655f 6361 6c6c 6261      style_callba
+00032e50: 636b 2c0d 0a20 2020 2020 2020 2020 2020  ck,..           
+00032e60: 2020 2020 2020 2020 2066 696c 6c5f 636f           fill_co
+00032e70: 6c6f 7273 2c0d 0a20 2020 2020 2020 2020  lors,..         
+00032e80: 2020 2020 2020 2020 2020 2069 6e66 6f5f             info_
+00032e90: 6d6f 6465 2c0d 0a20 2020 2020 2020 2020  mode,..         
+00032ea0: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
+00032eb0: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
+00032ec0: 2020 2020 2020 2020 2020 2020 2067 656f               geo
+00032ed0: 6a73 6f6e 203d 2076 6563 746f 725f 746f  json = vector_to
+00032ee0: 5f67 656f 6a73 6f6e 280d 0a20 2020 2020  _geojson(..     
+00032ef0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00032f00: 696c 656e 616d 652c 0d0a 2020 2020 2020  ilename,..      
+00032f10: 2020 2020 2020 2020 2020 2020 2020 6262                bb
+00032f20: 6f78 3d62 626f 782c 0d0a 2020 2020 2020  ox=bbox,..      
+00032f30: 2020 2020 2020 2020 2020 2020 2020 6d61                ma
+00032f40: 736b 3d6d 6173 6b2c 0d0a 2020 2020 2020  sk=mask,..      
+00032f50: 2020 2020 2020 2020 2020 2020 2020 726f                ro
+00032f60: 7773 3d72 6f77 732c 0d0a 2020 2020 2020  ws=rows,..      
+00032f70: 2020 2020 2020 2020 2020 2020 2020 6570                ep
+00032f80: 7367 3d22 3433 3236 222c 0d0a 2020 2020  sg="4326",..    
+00032f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00032fa0: 2a2a 6b77 6172 6773 2c0d 0a20 2020 2020  **kwargs,..     
+00032fb0: 2020 2020 2020 2020 2020 2029 0d0a 0d0a             )....
+00032fc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00032fd0: 7365 6c66 2e61 6464 5f67 656f 6a73 6f6e  self.add_geojson
+00032fe0: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
+00032ff0: 2020 2020 2020 2067 656f 6a73 6f6e 2c0d         geojson,.
+00033000: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00033010: 2020 2020 206c 6179 6572 5f6e 616d 652c       layer_name,
+00033020: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00033030: 2020 2020 2020 7374 796c 652c 0d0a 2020        style,..  
+00033040: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00033050: 2020 686f 7665 725f 7374 796c 652c 0d0a    hover_style,..
+00033060: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00033070: 2020 2020 7374 796c 655f 6361 6c6c 6261      style_callba
+00033080: 636b 2c0d 0a20 2020 2020 2020 2020 2020  ck,..           
+00033090: 2020 2020 2020 2020 2066 696c 6c5f 636f           fill_co
+000330a0: 6c6f 7273 2c0d 0a20 2020 2020 2020 2020  lors,..         
+000330b0: 2020 2020 2020 2020 2020 2069 6e66 6f5f             info_
+000330c0: 6d6f 6465 2c0d 0a20 2020 2020 2020 2020  mode,..         
+000330d0: 2020 2020 2020 2029 0d0a 0d0a 2020 2020         )....    
+000330e0: 6465 6620 6164 645f 6f73 6d28 0d0a 2020  def add_osm(..  
+000330f0: 2020 2020 2020 7365 6c66 2c0d 0a20 2020        self,..   
+00033100: 2020 2020 2071 7565 7279 2c0d 0a20 2020       query,..   
+00033110: 2020 2020 206c 6179 6572 5f6e 616d 653d       layer_name=
+00033120: 2255 6e74 6974 6c65 6422 2c0d 0a20 2020  "Untitled",..   
+00033130: 2020 2020 2073 7479 6c65 3d7b 7d2c 0d0a       style={},..
+00033140: 2020 2020 2020 2020 686f 7665 725f 7374          hover_st
+00033150: 796c 653d 7b7d 2c0d 0a20 2020 2020 2020  yle={},..       
+00033160: 2073 7479 6c65 5f63 616c 6c62 6163 6b3d   style_callback=
+00033170: 4e6f 6e65 2c0d 0a20 2020 2020 2020 2066  None,..        f
+00033180: 696c 6c5f 636f 6c6f 7273 3d5b 2262 6c61  ill_colors=["bla
+00033190: 636b 225d 2c0d 0a20 2020 2020 2020 2069  ck"],..        i
+000331a0: 6e66 6f5f 6d6f 6465 3d22 6f6e 5f68 6f76  nfo_mode="on_hov
+000331b0: 6572 222c 0d0a 2020 2020 2020 2020 7768  er",..        wh
+000331c0: 6963 685f 7265 7375 6c74 3d4e 6f6e 652c  ich_result=None,
+000331d0: 0d0a 2020 2020 2020 2020 6279 5f6f 736d  ..        by_osm
+000331e0: 6964 3d46 616c 7365 2c0d 0a20 2020 2020  id=False,..     
+000331f0: 2020 2062 7566 6665 725f 6469 7374 3d4e     buffer_dist=N
+00033200: 6f6e 652c 0d0a 2020 2020 2020 2020 746f  one,..        to
+00033210: 5f65 653d 4661 6c73 652c 0d0a 2020 2020  _ee=False,..    
+00033220: 2020 2020 6765 6f64 6573 6963 3d54 7275      geodesic=Tru
+00033230: 652c 0d0a 2020 2020 293a 0d0a 2020 2020  e,..    ):..    
+00033240: 2020 2020 2222 2241 6464 7320 4f53 4d20      """Adds OSM 
+00033250: 6461 7461 2074 6f20 7468 6520 6d61 702e  data to the map.
+00033260: 0d0a 0d0a 2020 2020 2020 2020 4172 6773  ....        Args
+00033270: 3a0d 0a20 2020 2020 2020 2020 2020 2071  :..            q
+00033280: 7565 7279 2028 7374 7220 7c20 6469 6374  uery (str | dict
+00033290: 207c 206c 6973 7429 3a20 5175 6572 7920   | list): Query 
+000332a0: 7374 7269 6e67 2873 2920 6f72 2073 7472  string(s) or str
+000332b0: 7563 7475 7265 6420 6469 6374 2873 2920  uctured dict(s) 
+000332c0: 746f 2067 656f 636f 6465 2e0d 0a20 2020  to geocode...   
+000332d0: 2020 2020 2020 2020 206c 6179 6572 5f6e           layer_n
+000332e0: 616d 6520 2873 7472 2c20 6f70 7469 6f6e  ame (str, option
+000332f0: 616c 293a 2054 6865 206c 6179 6572 206e  al): The layer n
+00033300: 616d 6520 746f 2062 6520 7573 6564 2e2e  ame to be used..
+00033310: 2044 6566 6175 6c74 7320 746f 2022 556e   Defaults to "Un
+00033320: 7469 746c 6564 222e 0d0a 2020 2020 2020  titled"...      
+00033330: 2020 2020 2020 7374 796c 6520 2864 6963        style (dic
+00033340: 742c 206f 7074 696f 6e61 6c29 3a20 4120  t, optional): A 
+00033350: 6469 6374 696f 6e61 7279 2073 7065 6369  dictionary speci
+00033360: 6679 696e 6720 7468 6520 7374 796c 6520  fying the style 
+00033370: 746f 2062 6520 7573 6564 2e20 4465 6661  to be used. Defa
+00033380: 756c 7473 2074 6f20 7b7d 2e0d 0a20 2020  ults to {}...   
+00033390: 2020 2020 2020 2020 2068 6f76 6572 5f73           hover_s
+000333a0: 7479 6c65 2028 6469 6374 2c20 6f70 7469  tyle (dict, opti
+000333b0: 6f6e 616c 293a 2048 6f76 6572 2073 7479  onal): Hover sty
+000333c0: 6c65 2064 6963 7469 6f6e 6172 792e 2044  le dictionary. D
+000333d0: 6566 6175 6c74 7320 746f 207b 7d2e 0d0a  efaults to {}...
+000333e0: 2020 2020 2020 2020 2020 2020 7374 796c              styl
+000333f0: 655f 6361 6c6c 6261 636b 2028 6675 6e63  e_callback (func
+00033400: 7469 6f6e 2c20 6f70 7469 6f6e 616c 293a  tion, optional):
+00033410: 2053 7479 6c69 6e67 2066 756e 6374 696f   Styling functio
+00033420: 6e20 7468 6174 2069 7320 6361 6c6c 6564  n that is called
+00033430: 2066 6f72 2065 6163 6820 6665 6174 7572   for each featur
+00033440: 652c 2061 6e64 2073 686f 756c 6420 7265  e, and should re
+00033450: 7475 726e 2074 6865 2066 6561 7475 7265  turn the feature
+00033460: 2073 7479 6c65 2e20 5468 6973 2073 7479   style. This sty
+00033470: 6c69 6e67 2066 756e 6374 696f 6e20 7461  ling function ta
+00033480: 6b65 7320 7468 6520 6665 6174 7572 6520  kes the feature 
+00033490: 6173 2061 7267 756d 656e 742e 2044 6566  as argument. Def
+000334a0: 6175 6c74 7320 746f 204e 6f6e 652e 0d0a  aults to None...
+000334b0: 2020 2020 2020 2020 2020 2020 6669 6c6c              fill
+000334c0: 5f63 6f6c 6f72 7320 286c 6973 742c 206f  _colors (list, o
+000334d0: 7074 696f 6e61 6c29 3a20 5468 6520 7261  ptional): The ra
+000334e0: 6e64 6f6d 2063 6f6c 6f72 7320 746f 2075  ndom colors to u
+000334f0: 7365 2066 6f72 2066 696c 6c69 6e67 2070  se for filling p
+00033500: 6f6c 7967 6f6e 732e 2044 6566 6175 6c74  olygons. Default
+00033510: 7320 746f 205b 2262 6c61 636b 225d 2e0d  s to ["black"]..
+00033520: 0a20 2020 2020 2020 2020 2020 2069 6e66  .            inf
+00033530: 6f5f 6d6f 6465 2028 7374 722c 206f 7074  o_mode (str, opt
+00033540: 696f 6e61 6c29 3a20 4469 7370 6c61 7973  ional): Displays
+00033550: 2074 6865 2061 7474 7269 6275 7465 7320   the attributes 
+00033560: 6279 2065 6974 6865 7220 6f6e 5f68 6f76  by either on_hov
+00033570: 6572 206f 7220 6f6e 5f63 6c69 636b 2e20  er or on_click. 
+00033580: 416e 7920 7661 6c75 6520 6f74 6865 7220  Any value other 
+00033590: 7468 616e 2022 6f6e 5f68 6f76 6572 2220  than "on_hover" 
+000335a0: 6f72 2022 6f6e 5f63 6c69 636b 2220 7769  or "on_click" wi
+000335b0: 6c6c 2062 6520 7472 6561 7465 6420 6173  ll be treated as
+000335c0: 204e 6f6e 652e 2044 6566 6175 6c74 7320   None. Defaults 
+000335d0: 746f 2022 6f6e 5f68 6f76 6572 222e 0d0a  to "on_hover"...
+000335e0: 2020 2020 2020 2020 2020 2020 7768 6963              whic
+000335f0: 685f 7265 7375 6c74 2028 494e 542c 206f  h_result (INT, o
+00033600: 7074 696f 6e61 6c29 3a20 5768 6963 6820  ptional): Which 
+00033610: 6765 6f63 6f64 696e 6720 7265 7375 6c74  geocoding result
+00033620: 2074 6f20 7573 652e 2069 6620 4e6f 6e65   to use. if None
+00033630: 2c20 6175 746f 2d73 656c 6563 7420 7468  , auto-select th
+00033640: 6520 6669 7273 7420 284d 756c 7469 2950  e first (Multi)P
+00033650: 6f6c 7967 6f6e 206f 7220 7261 6973 6520  olygon or raise 
+00033660: 616e 2065 7272 6f72 2069 6620 4f53 4d20  an error if OSM 
+00033670: 646f 6573 6e27 7420 7265 7475 726e 206f  doesn't return o
+00033680: 6e65 2e20 746f 2067 6574 2074 6865 2074  ne. to get the t
+00033690: 6f70 206d 6174 6368 2072 6567 6172 646c  op match regardl
+000336a0: 6573 7320 6f66 2067 656f 6d65 7472 7920  ess of geometry 
+000336b0: 7479 7065 2c20 7365 7420 7768 6963 685f  type, set which_
+000336c0: 7265 7375 6c74 3d31 2e20 4465 6661 756c  result=1. Defaul
+000336d0: 7473 2074 6f20 4e6f 6e65 2e0d 0a20 2020  ts to None...   
+000336e0: 2020 2020 2020 2020 2062 795f 6f73 6d69           by_osmi
+000336f0: 6420 2862 6f6f 6c2c 206f 7074 696f 6e61  d (bool, optiona
+00033700: 6c29 3a20 4966 2054 7275 652c 2068 616e  l): If True, han
+00033710: 646c 6520 7175 6572 7920 6173 2061 6e20  dle query as an 
+00033720: 4f53 4d20 4944 2066 6f72 206c 6f6f 6b75  OSM ID for looku
+00033730: 7020 7261 7468 6572 2074 6861 6e20 7465  p rather than te
+00033740: 7874 2073 6561 7263 682e 2044 6566 6175  xt search. Defau
+00033750: 6c74 7320 746f 2046 616c 7365 2e0d 0a20  lts to False... 
+00033760: 2020 2020 2020 2020 2020 2062 7566 6665             buffe
+00033770: 725f 6469 7374 2028 666c 6f61 742c 206f  r_dist (float, o
+00033780: 7074 696f 6e61 6c29 3a20 4469 7374 616e  ptional): Distan
+00033790: 6365 2074 6f20 6275 6666 6572 2061 726f  ce to buffer aro
+000337a0: 756e 6420 7468 6520 706c 6163 6520 6765  und the place ge
+000337b0: 6f6d 6574 7279 2c20 696e 206d 6574 6572  ometry, in meter
+000337c0: 732e 2044 6566 6175 6c74 7320 746f 204e  s. Defaults to N
+000337d0: 6f6e 652e 0d0a 2020 2020 2020 2020 2020  one...          
+000337e0: 2020 746f 5f65 6520 2862 6f6f 6c2c 206f    to_ee (bool, o
+000337f0: 7074 696f 6e61 6c29 3a20 5768 6574 6865  ptional): Whethe
+00033800: 7220 746f 2063 6f6e 7665 7274 2074 6865  r to convert the
+00033810: 2063 7376 2074 6f20 616e 2065 652e 4665   csv to an ee.Fe
+00033820: 6174 7572 6543 6f6c 6c65 6374 696f 6e2e  atureCollection.
+00033830: 0d0a 2020 2020 2020 2020 2020 2020 6765  ..            ge
+00033840: 6f64 6573 6963 2028 626f 6f6c 2c20 6f70  odesic (bool, op
+00033850: 7469 6f6e 616c 293a 2057 6865 7468 6572  tional): Whether
+00033860: 206c 696e 6520 7365 676d 656e 7473 2073   line segments s
+00033870: 686f 756c 6420 6265 2069 6e74 6572 7072  hould be interpr
+00033880: 6574 6564 2061 7320 7370 6865 7269 6361  eted as spherica
+00033890: 6c20 6765 6f64 6573 6963 732e 2049 6620  l geodesics. If 
+000338a0: 6661 6c73 652c 2069 6e64 6963 6174 6573  false, indicates
+000338b0: 2074 6861 7420 6c69 6e65 2073 6567 6d65   that line segme
+000338c0: 6e74 7320 7368 6f75 6c64 2062 6520 696e  nts should be in
+000338d0: 7465 7270 7265 7465 6420 6173 2070 6c61  terpreted as pla
+000338e0: 6e61 7220 6c69 6e65 7320 696e 2074 6865  nar lines in the
+000338f0: 2073 7065 6369 6669 6564 2043 5253 2e20   specified CRS. 
+00033900: 4966 2061 6273 656e 742c 2064 6566 6175  If absent, defau
+00033910: 6c74 7320 746f 2074 7275 6520 6966 2074  lts to true if t
+00033920: 6865 2043 5253 2069 7320 6765 6f67 7261  he CRS is geogra
+00033930: 7068 6963 2028 696e 636c 7564 696e 6720  phic (including 
+00033940: 7468 6520 6465 6661 756c 7420 4550 5347  the default EPSG
+00033950: 3a34 3332 3629 2c20 6f72 2074 6f20 6661  :4326), or to fa
+00033960: 6c73 6520 6966 2074 6865 2043 5253 2069  lse if the CRS i
+00033970: 7320 7072 6f6a 6563 7465 642e 0d0a 0d0a  s projected.....
+00033980: 2020 2020 2020 2020 2222 220d 0a0d 0a20          """.... 
+00033990: 2020 2020 2020 2067 6466 203d 206f 736d         gdf = osm
+000339a0: 5f74 6f5f 6765 6f70 616e 6461 7328 0d0a  _to_geopandas(..
+000339b0: 2020 2020 2020 2020 2020 2020 7175 6572              quer
+000339c0: 792c 2077 6869 6368 5f72 6573 756c 743d  y, which_result=
+000339d0: 7768 6963 685f 7265 7375 6c74 2c20 6279  which_result, by
+000339e0: 5f6f 736d 6964 3d62 795f 6f73 6d69 642c  _osmid=by_osmid,
+000339f0: 2062 7566 6665 725f 6469 7374 3d62 7566   buffer_dist=buf
+00033a00: 6665 725f 6469 7374 0d0a 2020 2020 2020  fer_dist..      
+00033a10: 2020 290d 0a20 2020 2020 2020 2067 656f    )..        geo
+00033a20: 6a73 6f6e 203d 2067 6466 2e5f 5f67 656f  json = gdf.__geo
+00033a30: 5f69 6e74 6572 6661 6365 5f5f 0d0a 0d0a  _interface__....
+00033a40: 2020 2020 2020 2020 6966 2074 6f5f 6565          if to_ee
+00033a50: 3a0d 0a20 2020 2020 2020 2020 2020 2066  :..            f
+00033a60: 6320 3d20 6765 6f6a 736f 6e5f 746f 5f65  c = geojson_to_e
+00033a70: 6528 6765 6f6a 736f 6e2c 2067 656f 6465  e(geojson, geode
+00033a80: 7369 633d 6765 6f64 6573 6963 290d 0a20  sic=geodesic).. 
+00033a90: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00033aa0: 6164 644c 6179 6572 2866 632c 207b 7d2c  addLayer(fc, {},
+00033ab0: 206c 6179 6572 5f6e 616d 6529 0d0a 2020   layer_name)..  
+00033ac0: 2020 2020 2020 2020 2020 7365 6c66 2e7a            self.z
+00033ad0: 6f6f 6d54 6f4f 626a 6563 7428 6663 290d  oomToObject(fc).
+00033ae0: 0a20 2020 2020 2020 2065 6c73 653a 0d0a  .        else:..
+00033af0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00033b00: 2e61 6464 5f67 656f 6a73 6f6e 280d 0a20  .add_geojson(.. 
+00033b10: 2020 2020 2020 2020 2020 2020 2020 2067                 g
+00033b20: 656f 6a73 6f6e 2c0d 0a20 2020 2020 2020  eojson,..       
+00033b30: 2020 2020 2020 2020 206c 6179 6572 5f6e           layer_n
+00033b40: 616d 653d 6c61 7965 725f 6e61 6d65 2c0d  ame=layer_name,.
+00033b50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00033b60: 2073 7479 6c65 3d73 7479 6c65 2c0d 0a20   style=style,.. 
+00033b70: 2020 2020 2020 2020 2020 2020 2020 2068                 h
+00033b80: 6f76 6572 5f73 7479 6c65 3d68 6f76 6572  over_style=hover
+00033b90: 5f73 7479 6c65 2c0d 0a20 2020 2020 2020  _style,..       
+00033ba0: 2020 2020 2020 2020 2073 7479 6c65 5f63           style_c
+00033bb0: 616c 6c62 6163 6b3d 7374 796c 655f 6361  allback=style_ca
+00033bc0: 6c6c 6261 636b 2c0d 0a20 2020 2020 2020  llback,..       
+00033bd0: 2020 2020 2020 2020 2066 696c 6c5f 636f           fill_co
+00033be0: 6c6f 7273 3d66 696c 6c5f 636f 6c6f 7273  lors=fill_colors
+00033bf0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+00033c00: 2020 2069 6e66 6f5f 6d6f 6465 3d69 6e66     info_mode=inf
+00033c10: 6f5f 6d6f 6465 2c0d 0a20 2020 2020 2020  o_mode,..       
+00033c20: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
+00033c30: 2020 2020 626f 756e 6473 203d 2067 6466      bounds = gdf
+00033c40: 2e62 6f75 6e64 732e 696c 6f63 5b30 5d0d  .bounds.iloc[0].
+00033c50: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00033c60: 662e 6669 745f 626f 756e 6473 285b 5b62  f.fit_bounds([[b
+00033c70: 6f75 6e64 735b 315d 2c20 626f 756e 6473  ounds[1], bounds
+00033c80: 5b30 5d5d 2c20 5b62 6f75 6e64 735b 335d  [0]], [bounds[3]
+00033c90: 2c20 626f 756e 6473 5b32 5d5d 5d29 0d0a  , bounds[2]]])..
+00033ca0: 0d0a 2020 2020 6465 6620 6164 645f 7469  ..    def add_ti
+00033cb0: 6d65 5f73 6c69 6465 7228 0d0a 2020 2020  me_slider(..    
+00033cc0: 2020 2020 7365 6c66 2c0d 0a20 2020 2020      self,..     
+00033cd0: 2020 2065 655f 6f62 6a65 6374 2c0d 0a20     ee_object,.. 
+00033ce0: 2020 2020 2020 2076 6973 5f70 6172 616d         vis_param
+00033cf0: 733d 7b7d 2c0d 0a20 2020 2020 2020 2072  s={},..        r
+00033d00: 6567 696f 6e3d 4e6f 6e65 2c0d 0a20 2020  egion=None,..   
+00033d10: 2020 2020 206c 6179 6572 5f6e 616d 653d       layer_name=
+00033d20: 2254 696d 6520 7365 7269 6573 222c 0d0a  "Time series",..
+00033d30: 2020 2020 2020 2020 6c61 6265 6c73 3d4e          labels=N
+00033d40: 6f6e 652c 0d0a 2020 2020 2020 2020 7469  one,..        ti
+00033d50: 6d65 5f69 6e74 6572 7661 6c3d 312c 0d0a  me_interval=1,..
+00033d60: 2020 2020 2020 2020 706f 7369 7469 6f6e          position
+00033d70: 3d22 626f 7474 6f6d 7269 6768 7422 2c0d  ="bottomright",.
+00033d80: 0a20 2020 2020 2020 2073 6c69 6465 725f  .        slider_
+00033d90: 6c65 6e67 7468 3d22 3135 3070 7822 2c0d  length="150px",.
+00033da0: 0a20 2020 2020 2020 2064 6174 655f 666f  .        date_fo
+00033db0: 726d 6174 3d22 5959 5959 2d4d 4d2d 6464  rmat="YYYY-MM-dd
+00033dc0: 222c 0d0a 2020 2020 2020 2020 6f70 6163  ",..        opac
+00033dd0: 6974 793d 312e 302c 0d0a 2020 2020 2020  ity=1.0,..      
+00033de0: 2020 2a2a 6b77 6172 6773 2c0d 0a20 2020    **kwargs,..   
+00033df0: 2029 3a0d 0a20 2020 2020 2020 2022 2222   ):..        """
+00033e00: 4164 6473 2061 2074 696d 6520 736c 6964  Adds a time slid
+00033e10: 6572 2074 6f20 7468 6520 6d61 702e 0d0a  er to the map...
+00033e20: 0d0a 2020 2020 2020 2020 4172 6773 3a0d  ..        Args:.
+00033e30: 0a20 2020 2020 2020 2020 2020 2065 655f  .            ee_
+00033e40: 6f62 6a65 6374 2028 6565 2e49 6d61 6765  object (ee.Image
+00033e50: 207c 2065 652e 496d 6167 6543 6f6c 6c65   | ee.ImageColle
+00033e60: 6374 696f 6e29 3a20 5468 6520 496d 6167  ction): The Imag
+00033e70: 6520 6f72 2049 6d61 6765 436f 6c6c 6563  e or ImageCollec
+00033e80: 7469 6f6e 2074 6f20 7669 7375 616c 697a  tion to visualiz
+00033e90: 652e 0d0a 2020 2020 2020 2020 2020 2020  e...            
+00033ea0: 7669 735f 7061 7261 6d73 2028 6469 6374  vis_params (dict
+00033eb0: 2c20 6f70 7469 6f6e 616c 293a 2056 6973  , optional): Vis
+00033ec0: 7561 6c69 7a61 7469 6f6e 2070 6172 616d  ualization param
+00033ed0: 6574 6572 7320 746f 2075 7365 2066 6f72  eters to use for
+00033ee0: 2076 6973 7561 6c69 7a69 6e67 2069 6d61   visualizing ima
+00033ef0: 6765 2e20 4465 6661 756c 7473 2074 6f20  ge. Defaults to 
+00033f00: 7b7d 2e0d 0a20 2020 2020 2020 2020 2020  {}...           
+00033f10: 2072 6567 696f 6e20 2865 652e 4765 6f6d   region (ee.Geom
+00033f20: 6574 7279 207c 2065 652e 4665 6174 7572  etry | ee.Featur
+00033f30: 6543 6f6c 6c65 6374 696f 6e29 3a20 5468  eCollection): Th
+00033f40: 6520 7265 6769 6f6e 2074 6f20 7669 7375  e region to visu
+00033f50: 616c 697a 652e 0d0a 2020 2020 2020 2020  alize...        
+00033f60: 2020 2020 6c61 7965 725f 6e61 6d65 2028      layer_name (
+00033f70: 7374 722c 206f 7074 696f 6e61 6c29 3a20  str, optional): 
+00033f80: 5468 6520 6c61 7965 7220 6e61 6d65 2074  The layer name t
+00033f90: 6f20 6265 2075 7365 642e 2044 6566 6175  o be used. Defau
+00033fa0: 6c74 7320 746f 2022 5469 6d65 2073 6572  lts to "Time ser
+00033fb0: 6965 7322 2e0d 0a20 2020 2020 2020 2020  ies"...         
+00033fc0: 2020 206c 6162 656c 7320 286c 6973 742c     labels (list,
+00033fd0: 206f 7074 696f 6e61 6c29 3a20 5468 6520   optional): The 
+00033fe0: 6c69 7374 206f 6620 6c61 6265 6c73 2074  list of labels t
+00033ff0: 6f20 6265 2075 7365 6420 666f 7220 7468  o be used for th
+00034000: 6520 7469 6d65 2073 6572 6965 732e 2044  e time series. D
+00034010: 6566 6175 6c74 7320 746f 204e 6f6e 652e  efaults to None.
+00034020: 0d0a 2020 2020 2020 2020 2020 2020 7469  ..            ti
+00034030: 6d65 5f69 6e74 6572 7661 6c20 2869 6e74  me_interval (int
+00034040: 2c20 6f70 7469 6f6e 616c 293a 2054 696d  , optional): Tim
+00034050: 6520 696e 7465 7276 616c 2069 6e20 7365  e interval in se
+00034060: 636f 6e64 732e 2044 6566 6175 6c74 7320  conds. Defaults 
+00034070: 746f 2031 2e0d 0a20 2020 2020 2020 2020  to 1...         
+00034080: 2020 2070 6f73 6974 696f 6e20 2873 7472     position (str
+00034090: 2c20 6f70 7469 6f6e 616c 293a 2050 6f73  , optional): Pos
+000340a0: 6974 696f 6e20 746f 2070 6c61 6365 2074  ition to place t
+000340b0: 6865 2074 696d 6520 736c 6964 6572 2c20  he time slider, 
+000340c0: 6361 6e20 6265 2061 6e79 206f 6620 5b27  can be any of ['
+000340d0: 746f 706c 6566 7427 2c20 2774 6f70 7269  topleft', 'topri
+000340e0: 6768 7427 2c20 2762 6f74 746f 6d6c 6566  ght', 'bottomlef
+000340f0: 7427 2c20 2762 6f74 746f 6d72 6967 6874  t', 'bottomright
+00034100: 275d 2e20 4465 6661 756c 7473 2074 6f20  ']. Defaults to 
+00034110: 2262 6f74 746f 6d72 6967 6874 222e 0d0a  "bottomright"...
+00034120: 2020 2020 2020 2020 2020 2020 736c 6964              slid
+00034130: 6572 5f6c 656e 6774 6820 2873 7472 2c20  er_length (str, 
+00034140: 6f70 7469 6f6e 616c 293a 204c 656e 6774  optional): Lengt
+00034150: 6820 6f66 2074 6865 2074 696d 6520 736c  h of the time sl
+00034160: 6964 6572 2e20 4465 6661 756c 7473 2074  ider. Defaults t
+00034170: 6f20 2231 3530 7078 222e 0d0a 2020 2020  o "150px"...    
+00034180: 2020 2020 2020 2020 6461 7465 5f66 6f72          date_for
+00034190: 6d61 7420 2873 7472 2c20 6f70 7469 6f6e  mat (str, option
+000341a0: 616c 293a 2054 6865 2064 6174 6520 666f  al): The date fo
+000341b0: 726d 6174 2074 6f20 7573 652e 2044 6566  rmat to use. Def
+000341c0: 6175 6c74 7320 746f 2027 5959 5959 2d4d  aults to 'YYYY-M
+000341d0: 4d2d 6464 272e 0d0a 2020 2020 2020 2020  M-dd'...        
+000341e0: 2020 2020 6f70 6163 6974 7920 2866 6c6f      opacity (flo
+000341f0: 6174 2c20 6f70 7469 6f6e 616c 293a 2054  at, optional): T
+00034200: 6865 206f 7061 6369 7479 206f 6620 6c61  he opacity of la
+00034210: 7965 7273 2e20 4465 6661 756c 7473 2074  yers. Defaults t
+00034220: 6f20 312e 302e 0d0a 0d0a 2020 2020 2020  o 1.0.....      
+00034230: 2020 5261 6973 6573 3a0d 0a20 2020 2020    Raises:..     
+00034240: 2020 2020 2020 2054 7970 6545 7272 6f72         TypeError
+00034250: 3a20 4966 2074 6865 2065 655f 6f62 6a65  : If the ee_obje
+00034260: 6374 2069 7320 6e6f 7420 6565 2e49 6d61  ct is not ee.Ima
+00034270: 6765 207c 2065 652e 496d 6167 6543 6f6c  ge | ee.ImageCol
+00034280: 6c65 6374 696f 6e2e 0d0a 2020 2020 2020  lection...      
+00034290: 2020 2222 220d 0a20 2020 2020 2020 2069    """..        i
+000342a0: 6d70 6f72 7420 7468 7265 6164 696e 670d  mport threading.
+000342b0: 0a0d 0a20 2020 2020 2020 2069 6620 6973  ...        if is
+000342c0: 696e 7374 616e 6365 2865 655f 6f62 6a65  instance(ee_obje
+000342d0: 6374 2c20 6565 2e49 6d61 6765 293a 0d0a  ct, ee.Image):..
+000342e0: 2020 2020 2020 2020 2020 2020 6966 2072              if r
+000342f0: 6567 696f 6e20 6973 206e 6f74 204e 6f6e  egion is not Non
+00034300: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+00034310: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
+00034320: 6528 7265 6769 6f6e 2c20 6565 2e47 656f  e(region, ee.Geo
+00034330: 6d65 7472 7929 3a0d 0a20 2020 2020 2020  metry):..       
+00034340: 2020 2020 2020 2020 2020 2020 2065 655f               ee_
+00034350: 6f62 6a65 6374 203d 2065 655f 6f62 6a65  object = ee_obje
+00034360: 6374 2e63 6c69 7028 7265 6769 6f6e 290d  ct.clip(region).
+00034370: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00034380: 2065 6c69 6620 6973 696e 7374 616e 6365   elif isinstance
+00034390: 2872 6567 696f 6e2c 2065 652e 4665 6174  (region, ee.Feat
+000343a0: 7572 6543 6f6c 6c65 6374 696f 6e29 3a0d  ureCollection):.
+000343b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000343c0: 2020 2020 2065 655f 6f62 6a65 6374 203d       ee_object =
+000343d0: 2065 655f 6f62 6a65 6374 2e63 6c69 7054   ee_object.clipT
+000343e0: 6f43 6f6c 6c65 6374 696f 6e28 7265 6769  oCollection(regi
+000343f0: 6f6e 290d 0a20 2020 2020 2020 2020 2020  on)..           
+00034400: 2069 6620 6c61 7965 725f 6e61 6d65 206e   if layer_name n
+00034410: 6f74 2069 6e20 7365 6c66 2e65 655f 7261  ot in self.ee_ra
+00034420: 7374 6572 5f6c 6179 6572 5f6e 616d 6573  ster_layer_names
+00034430: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00034440: 2020 2073 656c 662e 6164 644c 6179 6572     self.addLayer
+00034450: 2865 655f 6f62 6a65 6374 2c20 7b7d 2c20  (ee_object, {}, 
+00034460: 6c61 7965 725f 6e61 6d65 2c20 4661 6c73  layer_name, Fals
+00034470: 652c 206f 7061 6369 7479 290d 0a20 2020  e, opacity)..   
+00034480: 2020 2020 2020 2020 2062 616e 645f 6e61           band_na
+00034490: 6d65 7320 3d20 6565 5f6f 626a 6563 742e  mes = ee_object.
+000344a0: 6261 6e64 4e61 6d65 7328 290d 0a20 2020  bandNames()..   
+000344b0: 2020 2020 2020 2020 2065 655f 6f62 6a65           ee_obje
+000344c0: 6374 203d 2065 652e 496d 6167 6543 6f6c  ct = ee.ImageCol
+000344d0: 6c65 6374 696f 6e28 0d0a 2020 2020 2020  lection(..      
+000344e0: 2020 2020 2020 2020 2020 6565 5f6f 626a            ee_obj
+000344f0: 6563 742e 6261 6e64 4e61 6d65 7328 292e  ect.bandNames().
+00034500: 6d61 7028 6c61 6d62 6461 2062 3a20 6565  map(lambda b: ee
+00034510: 5f6f 626a 6563 742e 7365 6c65 6374 285b  _object.select([
+00034520: 625d 2929 0d0a 2020 2020 2020 2020 2020  b]))..          
+00034530: 2020 290d 0a0d 0a20 2020 2020 2020 2020    )....         
+00034540: 2020 2069 6620 6c61 6265 6c73 2069 7320     if labels is 
+00034550: 6e6f 7420 4e6f 6e65 3a0d 0a20 2020 2020  not None:..     
+00034560: 2020 2020 2020 2020 2020 2069 6620 6c65             if le
+00034570: 6e28 6c61 6265 6c73 2920 213d 2069 6e74  n(labels) != int
+00034580: 2865 655f 6f62 6a65 6374 2e73 697a 6528  (ee_object.size(
+00034590: 292e 6765 7449 6e66 6f28 2929 3a0d 0a20  ).getInfo()):.. 
+000345a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000345b0: 2020 2072 6169 7365 2056 616c 7565 4572     raise ValueEr
+000345c0: 726f 7228 0d0a 2020 2020 2020 2020 2020  ror(..          
+000345d0: 2020 2020 2020 2020 2020 2020 2020 2254                "T
+000345e0: 6865 206c 656e 6774 6820 6f66 206c 6162  he length of lab
+000345f0: 656c 7320 6d75 7374 2062 6520 6571 7561  els must be equa
+00034600: 6c20 746f 2074 6865 206e 756d 6265 7220  l to the number 
+00034610: 6f66 2062 616e 6473 2069 6e20 7468 6520  of bands in the 
+00034620: 696d 6167 652e 220d 0a20 2020 2020 2020  image."..       
+00034630: 2020 2020 2020 2020 2020 2020 2029 0d0a               )..
+00034640: 2020 2020 2020 2020 2020 2020 656c 7365              else
+00034650: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00034660: 2020 206c 6162 656c 7320 3d20 6261 6e64     labels = band
+00034670: 5f6e 616d 6573 2e67 6574 496e 666f 2829  _names.getInfo()
+00034680: 0d0a 0d0a 2020 2020 2020 2020 656c 6966  ....        elif
+00034690: 2069 7369 6e73 7461 6e63 6528 6565 5f6f   isinstance(ee_o
+000346a0: 626a 6563 742c 2065 652e 496d 6167 6543  bject, ee.ImageC
+000346b0: 6f6c 6c65 6374 696f 6e29 3a0d 0a20 2020  ollection):..   
+000346c0: 2020 2020 2020 2020 2069 6620 7265 6769           if regi
+000346d0: 6f6e 2069 7320 6e6f 7420 4e6f 6e65 3a0d  on is not None:.
+000346e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000346f0: 2069 6620 6973 696e 7374 616e 6365 2872   if isinstance(r
+00034700: 6567 696f 6e2c 2065 652e 4765 6f6d 6574  egion, ee.Geomet
+00034710: 7279 293a 0d0a 2020 2020 2020 2020 2020  ry):..          
+00034720: 2020 2020 2020 2020 2020 6565 5f6f 626a            ee_obj
+00034730: 6563 7420 3d20 6565 5f6f 626a 6563 742e  ect = ee_object.
+00034740: 6d61 7028 6c61 6d62 6461 2069 6d67 3a20  map(lambda img: 
+00034750: 696d 672e 636c 6970 2872 6567 696f 6e29  img.clip(region)
+00034760: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00034770: 2020 2065 6c69 6620 6973 696e 7374 616e     elif isinstan
+00034780: 6365 2872 6567 696f 6e2c 2065 652e 4665  ce(region, ee.Fe
+00034790: 6174 7572 6543 6f6c 6c65 6374 696f 6e29  atureCollection)
+000347a0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+000347b0: 2020 2020 2020 2065 655f 6f62 6a65 6374         ee_object
+000347c0: 203d 2065 655f 6f62 6a65 6374 2e6d 6170   = ee_object.map
+000347d0: 286c 616d 6264 6120 696d 673a 2069 6d67  (lambda img: img
+000347e0: 2e63 6c69 7054 6f43 6f6c 6c65 6374 696f  .clipToCollectio
+000347f0: 6e28 7265 6769 6f6e 2929 0d0a 0d0a 2020  n(region))....  
+00034800: 2020 2020 2020 2020 2020 6966 206c 6162            if lab
+00034810: 656c 7320 6973 206e 6f74 204e 6f6e 653a  els is not None:
+00034820: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00034830: 2020 6966 206c 656e 286c 6162 656c 7329    if len(labels)
+00034840: 2021 3d20 696e 7428 6565 5f6f 626a 6563   != int(ee_objec
+00034850: 742e 7369 7a65 2829 2e67 6574 496e 666f  t.size().getInfo
+00034860: 2829 293a 0d0a 2020 2020 2020 2020 2020  ()):..          
+00034870: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+00034880: 5661 6c75 6545 7272 6f72 280d 0a20 2020  ValueError(..   
+00034890: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000348a0: 2020 2020 2022 5468 6520 6c65 6e67 7468       "The length
+000348b0: 206f 6620 6c61 6265 6c73 206d 7573 7420   of labels must 
+000348c0: 6265 2065 7175 616c 2074 6f20 7468 6520  be equal to the 
+000348d0: 6e75 6d62 6572 206f 6620 696d 6167 6573  number of images
+000348e0: 2069 6e20 7468 6520 496d 6167 6543 6f6c   in the ImageCol
+000348f0: 6c65 6374 696f 6e2e 220d 0a20 2020 2020  lection."..     
+00034900: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+00034910: 0d0a 2020 2020 2020 2020 2020 2020 656c  ..            el
+00034920: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
+00034930: 2020 2020 206c 6162 656c 7320 3d20 280d       labels = (.
+00034940: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00034950: 2020 2020 2065 655f 6f62 6a65 6374 2e61       ee_object.a
+00034960: 6767 7265 6761 7465 5f61 7272 6179 2822  ggregate_array("
+00034970: 7379 7374 656d 3a74 696d 655f 7374 6172  system:time_star
+00034980: 7422 290d 0a20 2020 2020 2020 2020 2020  t")..           
+00034990: 2020 2020 2020 2020 202e 6d61 7028 6c61           .map(la
+000349a0: 6d62 6461 2064 3a20 6565 2e44 6174 6528  mbda d: ee.Date(
+000349b0: 6429 2e66 6f72 6d61 7428 6461 7465 5f66  d).format(date_f
+000349c0: 6f72 6d61 7429 290d 0a20 2020 2020 2020  ormat))..       
+000349d0: 2020 2020 2020 2020 2020 2020 202e 6765               .ge
+000349e0: 7449 6e66 6f28 290d 0a20 2020 2020 2020  tInfo()..       
+000349f0: 2020 2020 2020 2020 2029 0d0a 2020 2020           )..    
+00034a00: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
+00034a10: 2020 2020 2020 2072 6169 7365 2054 7970         raise Typ
+00034a20: 6545 7272 6f72 2822 5468 6520 6565 5f6f  eError("The ee_o
+00034a30: 626a 6563 7420 6d75 7374 2062 6520 616e  bject must be an
+00034a40: 2065 652e 496d 6167 6520 6f72 2065 652e   ee.Image or ee.
+00034a50: 496d 6167 6543 6f6c 6c65 6374 696f 6e22  ImageCollection"
+00034a60: 290d 0a0d 0a20 2020 2020 2020 2023 2069  )....        # i
+00034a70: 6620 6c61 6265 6c73 2069 7320 6e6f 7420  f labels is not 
+00034a80: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2023  None:..        #
+00034a90: 2020 2020 2073 697a 6520 3d20 6c65 6e28       size = len(
+00034aa0: 6c61 6265 6c73 290d 0a20 2020 2020 2020  labels)..       
+00034ab0: 2023 2065 6c73 653a 0d0a 2020 2020 2020   # else:..      
+00034ac0: 2020 2320 2020 2020 7369 7a65 203d 2065    #     size = e
+00034ad0: 655f 6f62 6a65 6374 2e73 697a 6528 292e  e_object.size().
+00034ae0: 6765 7449 6e66 6f28 290d 0a20 2020 2020  getInfo()..     
+00034af0: 2020 2023 2020 2020 206c 6162 656c 7320     #     labels 
+00034b00: 3d20 5b73 7472 2869 2920 666f 7220 6920  = [str(i) for i 
+00034b10: 696e 2072 616e 6765 2831 2c20 7369 7a65  in range(1, size
+00034b20: 202b 2031 295d 0d0a 0d0a 2020 2020 2020   + 1)]....      
+00034b30: 2020 6669 7273 7420 3d20 6565 2e49 6d61    first = ee.Ima
+00034b40: 6765 2865 655f 6f62 6a65 6374 2e66 6972  ge(ee_object.fir
+00034b50: 7374 2829 290d 0a0d 0a20 2020 2020 2020  st())....       
+00034b60: 2069 6620 6c61 7965 725f 6e61 6d65 206e   if layer_name n
+00034b70: 6f74 2069 6e20 7365 6c66 2e65 655f 7261  ot in self.ee_ra
+00034b80: 7374 6572 5f6c 6179 6572 5f6e 616d 6573  ster_layer_names
+00034b90: 3a0d 0a20 2020 2020 2020 2020 2020 2073  :..            s
+00034ba0: 656c 662e 6164 644c 6179 6572 2865 655f  elf.addLayer(ee_
+00034bb0: 6f62 6a65 6374 2e74 6f42 616e 6473 2829  object.toBands()
+00034bc0: 2c20 7b7d 2c20 6c61 7965 725f 6e61 6d65  , {}, layer_name
+00034bd0: 2c20 4661 6c73 652c 206f 7061 6369 7479  , False, opacity
+00034be0: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+00034bf0: 6164 644c 6179 6572 2866 6972 7374 2c20  addLayer(first, 
+00034c00: 7669 735f 7061 7261 6d73 2c20 2249 6d61  vis_params, "Ima
+00034c10: 6765 2058 222c 2054 7275 652c 206f 7061  ge X", True, opa
+00034c20: 6369 7479 290d 0a0d 0a20 2020 2020 2020  city)....       
+00034c30: 2073 6c69 6465 7220 3d20 7769 6467 6574   slider = widget
+00034c40: 732e 496e 7453 6c69 6465 7228 0d0a 2020  s.IntSlider(..  
+00034c50: 2020 2020 2020 2020 2020 6d69 6e3d 312c            min=1,
+00034c60: 0d0a 2020 2020 2020 2020 2020 2020 6d61  ..            ma
+00034c70: 783d 6c65 6e28 6c61 6265 6c73 292c 0d0a  x=len(labels),..
+00034c80: 2020 2020 2020 2020 2020 2020 7265 6164              read
+00034c90: 6f75 743d 4661 6c73 652c 0d0a 2020 2020  out=False,..    
+00034ca0: 2020 2020 2020 2020 636f 6e74 696e 756f          continuo
+00034cb0: 7573 5f75 7064 6174 653d 4661 6c73 652c  us_update=False,
+00034cc0: 0d0a 2020 2020 2020 2020 2020 2020 6c61  ..            la
+00034cd0: 796f 7574 3d77 6964 6765 7473 2e4c 6179  yout=widgets.Lay
+00034ce0: 6f75 7428 7769 6474 683d 736c 6964 6572  out(width=slider
+00034cf0: 5f6c 656e 6774 6829 2c0d 0a20 2020 2020  _length),..     
+00034d00: 2020 2029 0d0a 2020 2020 2020 2020 6c61     )..        la
+00034d10: 6265 6c20 3d20 7769 6467 6574 732e 4c61  bel = widgets.La
+00034d20: 6265 6c28 0d0a 2020 2020 2020 2020 2020  bel(..          
+00034d30: 2020 7661 6c75 653d 6c61 6265 6c73 5b30    value=labels[0
+00034d40: 5d2c 206c 6179 6f75 743d 7769 6467 6574  ], layout=widget
+00034d50: 732e 4c61 796f 7574 2870 6164 6469 6e67  s.Layout(padding
+00034d60: 3d22 3070 7820 3570 7820 3070 7820 3570  ="0px 5px 0px 5p
+00034d70: 7822 290d 0a20 2020 2020 2020 2029 0d0a  x")..        )..
+00034d80: 0d0a 2020 2020 2020 2020 706c 6179 5f62  ..        play_b
+00034d90: 746e 203d 2077 6964 6765 7473 2e42 7574  tn = widgets.But
+00034da0: 746f 6e28 0d0a 2020 2020 2020 2020 2020  ton(..          
+00034db0: 2020 6963 6f6e 3d22 706c 6179 222c 0d0a    icon="play",..
+00034dc0: 2020 2020 2020 2020 2020 2020 746f 6f6c              tool
+00034dd0: 7469 703d 2250 6c61 7920 7468 6520 7469  tip="Play the ti
+00034de0: 6d65 2073 6c69 6465 7222 2c0d 0a20 2020  me slider",..   
+00034df0: 2020 2020 2020 2020 2062 7574 746f 6e5f           button_
+00034e00: 7374 796c 653d 2270 7269 6d61 7279 222c  style="primary",
+00034e10: 0d0a 2020 2020 2020 2020 2020 2020 6c61  ..            la
+00034e20: 796f 7574 3d77 6964 6765 7473 2e4c 6179  yout=widgets.Lay
+00034e30: 6f75 7428 7769 6474 683d 2233 3270 7822  out(width="32px"
+00034e40: 292c 0d0a 2020 2020 2020 2020 290d 0a0d  ),..        )...
+00034e50: 0a20 2020 2020 2020 2070 6175 7365 5f62  .        pause_b
+00034e60: 746e 203d 2077 6964 6765 7473 2e42 7574  tn = widgets.But
+00034e70: 746f 6e28 0d0a 2020 2020 2020 2020 2020  ton(..          
+00034e80: 2020 6963 6f6e 3d22 7061 7573 6522 2c0d    icon="pause",.
+00034e90: 0a20 2020 2020 2020 2020 2020 2074 6f6f  .            too
+00034ea0: 6c74 6970 3d22 5061 7573 6520 7468 6520  ltip="Pause the 
+00034eb0: 7469 6d65 2073 6c69 6465 7222 2c0d 0a20  time slider",.. 
+00034ec0: 2020 2020 2020 2020 2020 2062 7574 746f             butto
+00034ed0: 6e5f 7374 796c 653d 2270 7269 6d61 7279  n_style="primary
+00034ee0: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
+00034ef0: 6c61 796f 7574 3d77 6964 6765 7473 2e4c  layout=widgets.L
+00034f00: 6179 6f75 7428 7769 6474 683d 2233 3270  ayout(width="32p
+00034f10: 7822 292c 0d0a 2020 2020 2020 2020 290d  x"),..        ).
+00034f20: 0a0d 0a20 2020 2020 2020 2063 6c6f 7365  ...        close
+00034f30: 5f62 746e 203d 2077 6964 6765 7473 2e42  _btn = widgets.B
+00034f40: 7574 746f 6e28 0d0a 2020 2020 2020 2020  utton(..        
+00034f50: 2020 2020 6963 6f6e 3d22 7469 6d65 7322      icon="times"
+00034f60: 2c0d 0a20 2020 2020 2020 2020 2020 2074  ,..            t
+00034f70: 6f6f 6c74 6970 3d22 436c 6f73 6520 7468  ooltip="Close th
+00034f80: 6520 7469 6d65 2073 6c69 6465 7222 2c0d  e time slider",.
+00034f90: 0a20 2020 2020 2020 2020 2020 2062 7574  .            but
+00034fa0: 746f 6e5f 7374 796c 653d 2270 7269 6d61  ton_style="prima
+00034fb0: 7279 222c 0d0a 2020 2020 2020 2020 2020  ry",..          
+00034fc0: 2020 6c61 796f 7574 3d77 6964 6765 7473    layout=widgets
+00034fd0: 2e4c 6179 6f75 7428 7769 6474 683d 2233  .Layout(width="3
+00034fe0: 3270 7822 292c 0d0a 2020 2020 2020 2020  2px"),..        
+00034ff0: 290d 0a0d 0a20 2020 2020 2020 2070 6c61  )....        pla
+00035000: 795f 6368 6b20 3d20 7769 6467 6574 732e  y_chk = widgets.
+00035010: 4368 6563 6b62 6f78 2876 616c 7565 3d46  Checkbox(value=F
+00035020: 616c 7365 290d 0a0d 0a20 2020 2020 2020  alse)....       
+00035030: 2073 6c69 6465 725f 7769 6467 6574 203d   slider_widget =
+00035040: 2077 6964 6765 7473 2e48 426f 7828 5b73   widgets.HBox([s
+00035050: 6c69 6465 722c 206c 6162 656c 2c20 706c  lider, label, pl
+00035060: 6179 5f62 746e 2c20 7061 7573 655f 6274  ay_btn, pause_bt
+00035070: 6e2c 2063 6c6f 7365 5f62 746e 5d29 0d0a  n, close_btn])..
+00035080: 0d0a 2020 2020 2020 2020 6465 6620 706c  ..        def pl
+00035090: 6179 5f63 6c69 636b 2862 293a 0d0a 0d0a  ay_click(b):....
+000350a0: 2020 2020 2020 2020 2020 2020 706c 6179              play
+000350b0: 5f63 686b 2e76 616c 7565 203d 2054 7275  _chk.value = Tru
+000350c0: 650d 0a0d 0a20 2020 2020 2020 2020 2020  e....           
+000350d0: 2064 6566 2077 6f72 6b28 736c 6964 6572   def work(slider
+000350e0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+000350f0: 2020 2020 7768 696c 6520 706c 6179 5f63      while play_c
+00035100: 686b 2e76 616c 7565 3a0d 0a20 2020 2020  hk.value:..     
+00035110: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00035120: 6620 736c 6964 6572 2e76 616c 7565 203c  f slider.value <
+00035130: 206c 656e 286c 6162 656c 7329 3a0d 0a20   len(labels):.. 
+00035140: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00035150: 2020 2020 2020 2073 6c69 6465 722e 7661         slider.va
+00035160: 6c75 6520 2b3d 2031 0d0a 2020 2020 2020  lue += 1..      
+00035170: 2020 2020 2020 2020 2020 2020 2020 656c                el
+00035180: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
+00035190: 2020 2020 2020 2020 2020 2020 2073 6c69               sli
+000351a0: 6465 722e 7661 6c75 6520 3d20 310d 0a20  der.value = 1.. 
+000351b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000351c0: 2020 2074 696d 652e 736c 6565 7028 7469     time.sleep(ti
+000351d0: 6d65 5f69 6e74 6572 7661 6c29 0d0a 0d0a  me_interval)....
+000351e0: 2020 2020 2020 2020 2020 2020 7468 7265              thre
+000351f0: 6164 203d 2074 6872 6561 6469 6e67 2e54  ad = threading.T
+00035200: 6872 6561 6428 7461 7267 6574 3d77 6f72  hread(target=wor
+00035210: 6b2c 2061 7267 733d 2873 6c69 6465 722c  k, args=(slider,
+00035220: 2929 0d0a 2020 2020 2020 2020 2020 2020  ))..            
+00035230: 7468 7265 6164 2e73 7461 7274 2829 0d0a  thread.start()..
+00035240: 0d0a 2020 2020 2020 2020 6465 6620 7061  ..        def pa
+00035250: 7573 655f 636c 6963 6b28 6229 3a0d 0a20  use_click(b):.. 
+00035260: 2020 2020 2020 2020 2020 2070 6c61 795f             play_
+00035270: 6368 6b2e 7661 6c75 6520 3d20 4661 6c73  chk.value = Fals
+00035280: 650d 0a0d 0a20 2020 2020 2020 2070 6c61  e....        pla
+00035290: 795f 6274 6e2e 6f6e 5f63 6c69 636b 2870  y_btn.on_click(p
+000352a0: 6c61 795f 636c 6963 6b29 0d0a 2020 2020  lay_click)..    
+000352b0: 2020 2020 7061 7573 655f 6274 6e2e 6f6e      pause_btn.on
+000352c0: 5f63 6c69 636b 2870 6175 7365 5f63 6c69  _click(pause_cli
+000352d0: 636b 290d 0a0d 0a20 2020 2020 2020 2064  ck)....        d
+000352e0: 6566 2073 6c69 6465 725f 6368 616e 6765  ef slider_change
+000352f0: 6428 6368 616e 6765 293a 0d0a 2020 2020  d(change):..    
+00035300: 2020 2020 2020 2020 7365 6c66 2e64 6566          self.def
+00035310: 6175 6c74 5f73 7479 6c65 203d 207b 2263  ault_style = {"c
+00035320: 7572 736f 7222 3a20 2277 6169 7422 7d0d  ursor": "wait"}.
+00035330: 0a20 2020 2020 2020 2020 2020 2069 6e64  .            ind
+00035340: 6578 203d 2073 6c69 6465 722e 7661 6c75  ex = slider.valu
+00035350: 6520 2d20 310d 0a20 2020 2020 2020 2020  e - 1..         
+00035360: 2020 206c 6162 656c 2e76 616c 7565 203d     label.value =
+00035370: 206c 6162 656c 735b 696e 6465 785d 0d0a   labels[index]..
+00035380: 2020 2020 2020 2020 2020 2020 696d 6167              imag
+00035390: 6520 3d20 6565 2e49 6d61 6765 2865 655f  e = ee.Image(ee_
+000353a0: 6f62 6a65 6374 2e74 6f4c 6973 7428 6565  object.toList(ee
+000353b0: 5f6f 626a 6563 742e 7369 7a65 2829 292e  _object.size()).
+000353c0: 6765 7428 696e 6465 7829 290d 0a20 2020  get(index))..   
+000353d0: 2020 2020 2020 2020 2069 6620 6c61 7965           if laye
+000353e0: 725f 6e61 6d65 206e 6f74 2069 6e20 7365  r_name not in se
+000353f0: 6c66 2e65 655f 7261 7374 6572 5f6c 6179  lf.ee_raster_lay
+00035400: 6572 5f6e 616d 6573 3a0d 0a20 2020 2020  er_names:..     
+00035410: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00035420: 6164 644c 6179 6572 2865 655f 6f62 6a65  addLayer(ee_obje
+00035430: 6374 2e74 6f42 616e 6473 2829 2c20 7b7d  ct.toBands(), {}
+00035440: 2c20 6c61 7965 725f 6e61 6d65 2c20 4661  , layer_name, Fa
+00035450: 6c73 652c 206f 7061 6369 7479 290d 0a20  lse, opacity).. 
+00035460: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00035470: 6164 644c 6179 6572 2869 6d61 6765 2c20  addLayer(image, 
+00035480: 7669 735f 7061 7261 6d73 2c20 2249 6d61  vis_params, "Ima
+00035490: 6765 2058 222c 2054 7275 652c 206f 7061  ge X", True, opa
+000354a0: 6369 7479 290d 0a20 2020 2020 2020 2020  city)..         
+000354b0: 2020 2073 656c 662e 6465 6661 756c 745f     self.default_
+000354c0: 7374 796c 6520 3d20 7b22 6375 7273 6f72  style = {"cursor
+000354d0: 223a 2022 6465 6661 756c 7422 7d0d 0a0d  ": "default"}...
+000354e0: 0a20 2020 2020 2020 2073 6c69 6465 722e  .        slider.
+000354f0: 6f62 7365 7276 6528 736c 6964 6572 5f63  observe(slider_c
+00035500: 6861 6e67 6564 2c20 2276 616c 7565 2229  hanged, "value")
+00035510: 0d0a 0d0a 2020 2020 2020 2020 6465 6620  ....        def 
+00035520: 636c 6f73 655f 636c 6963 6b28 6229 3a0d  close_click(b):.
+00035530: 0a20 2020 2020 2020 2020 2020 2070 6c61  .            pla
+00035540: 795f 6368 6b2e 7661 6c75 6520 3d20 4661  y_chk.value = Fa
+00035550: 6c73 650d 0a20 2020 2020 2020 2020 2020  lse..           
+00035560: 2073 656c 662e 746f 6f6c 6261 725f 7265   self.toolbar_re
+00035570: 7365 7428 290d 0a20 2020 2020 2020 2020  set()..         
+00035580: 2020 2073 656c 662e 7265 6d6f 7665 5f65     self.remove_e
+00035590: 655f 6c61 7965 7228 2249 6d61 6765 2058  e_layer("Image X
+000355a0: 2229 0d0a 2020 2020 2020 2020 2020 2020  ")..            
+000355b0: 7365 6c66 2e72 656d 6f76 655f 6565 5f6c  self.remove_ee_l
+000355c0: 6179 6572 286c 6179 6572 5f6e 616d 6529  ayer(layer_name)
+000355d0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+000355e0: 6966 2073 656c 662e 736c 6964 6572 5f63  if self.slider_c
+000355f0: 7472 6c20 6973 206e 6f74 204e 6f6e 6520  trl is not None 
+00035600: 616e 6420 7365 6c66 2e73 6c69 6465 725f  and self.slider_
+00035610: 6374 726c 2069 6e20 7365 6c66 2e63 6f6e  ctrl in self.con
+00035620: 7472 6f6c 733a 0d0a 2020 2020 2020 2020  trols:..        
+00035630: 2020 2020 2020 2020 7365 6c66 2e72 656d          self.rem
+00035640: 6f76 655f 636f 6e74 726f 6c28 7365 6c66  ove_control(self
+00035650: 2e73 6c69 6465 725f 6374 726c 290d 0a20  .slider_ctrl).. 
+00035660: 2020 2020 2020 2020 2020 2073 6c69 6465             slide
+00035670: 725f 7769 6467 6574 2e63 6c6f 7365 2829  r_widget.close()
+00035680: 0d0a 0d0a 2020 2020 2020 2020 636c 6f73  ....        clos
+00035690: 655f 6274 6e2e 6f6e 5f63 6c69 636b 2863  e_btn.on_click(c
+000356a0: 6c6f 7365 5f63 6c69 636b 290d 0a0d 0a20  lose_click).... 
+000356b0: 2020 2020 2020 2073 6c69 6465 725f 6374         slider_ct
+000356c0: 726c 203d 2069 7079 6c65 6166 6c65 742e  rl = ipyleaflet.
+000356d0: 5769 6467 6574 436f 6e74 726f 6c28 7769  WidgetControl(wi
+000356e0: 6467 6574 3d73 6c69 6465 725f 7769 6467  dget=slider_widg
+000356f0: 6574 2c20 706f 7369 7469 6f6e 3d70 6f73  et, position=pos
+00035700: 6974 696f 6e29 0d0a 2020 2020 2020 2020  ition)..        
+00035710: 7365 6c66 2e61 6464 5f63 6f6e 7472 6f6c  self.add_control
+00035720: 2873 6c69 6465 725f 6374 726c 290d 0a20  (slider_ctrl).. 
+00035730: 2020 2020 2020 2073 656c 662e 736c 6964         self.slid
+00035740: 6572 5f63 7472 6c20 3d20 736c 6964 6572  er_ctrl = slider
+00035750: 5f63 7472 6c0d 0a0d 0a20 2020 2064 6566  _ctrl....    def
+00035760: 2061 6464 5f78 795f 6461 7461 280d 0a20   add_xy_data(.. 
+00035770: 2020 2020 2020 2073 656c 662c 0d0a 2020         self,..  
+00035780: 2020 2020 2020 696e 5f63 7376 2c0d 0a20        in_csv,.. 
+00035790: 2020 2020 2020 2078 3d22 6c6f 6e67 6974         x="longit
+000357a0: 7564 6522 2c0d 0a20 2020 2020 2020 2079  ude",..        y
+000357b0: 3d22 6c61 7469 7475 6465 222c 0d0a 2020  ="latitude",..  
+000357c0: 2020 2020 2020 6c61 6265 6c3d 4e6f 6e65        label=None
+000357d0: 2c0d 0a20 2020 2020 2020 206c 6179 6572  ,..        layer
+000357e0: 5f6e 616d 653d 224d 6172 6b65 7220 636c  _name="Marker cl
+000357f0: 7573 7465 7222 2c0d 0a20 2020 2020 2020  uster",..       
+00035800: 2074 6f5f 6565 3d46 616c 7365 2c0d 0a20   to_ee=False,.. 
+00035810: 2020 2029 3a0d 0a20 2020 2020 2020 2022     ):..        "
+00035820: 2222 4164 6473 2070 6f69 6e74 7320 6672  ""Adds points fr
+00035830: 6f6d 2061 2043 5356 2066 696c 6520 636f  om a CSV file co
+00035840: 6e74 6169 6e69 6e67 206c 6174 2f6c 6f6e  ntaining lat/lon
+00035850: 2069 6e66 6f72 6d61 7469 6f6e 2061 6e64   information and
+00035860: 2064 6973 706c 6179 2064 6174 6120 6f6e   display data on
+00035870: 2074 6865 206d 6170 2e0d 0a0d 0a20 2020   the map.....   
+00035880: 2020 2020 2041 7267 733a 0d0a 2020 2020       Args:..    
+00035890: 2020 2020 2020 2020 696e 5f63 7376 2028          in_csv (
+000358a0: 7374 7229 3a20 5468 6520 6669 6c65 2070  str): The file p
+000358b0: 6174 6820 746f 2074 6865 2069 6e70 7574  ath to the input
+000358c0: 2043 5356 2066 696c 652e 0d0a 2020 2020   CSV file...    
+000358d0: 2020 2020 2020 2020 7820 2873 7472 2c20          x (str, 
+000358e0: 6f70 7469 6f6e 616c 293a 2054 6865 206e  optional): The n
+000358f0: 616d 6520 6f66 2074 6865 2063 6f6c 756d  ame of the colum
+00035900: 6e20 636f 6e74 6169 6e69 6e67 206c 6f6e  n containing lon
+00035910: 6769 7475 6465 2063 6f6f 7264 696e 6174  gitude coordinat
+00035920: 6573 2e20 4465 6661 756c 7473 2074 6f20  es. Defaults to 
+00035930: 226c 6f6e 6769 7475 6465 222e 0d0a 2020  "longitude"...  
+00035940: 2020 2020 2020 2020 2020 7920 2873 7472            y (str
+00035950: 2c20 6f70 7469 6f6e 616c 293a 2054 6865  , optional): The
+00035960: 206e 616d 6520 6f66 2074 6865 2063 6f6c   name of the col
+00035970: 756d 6e20 636f 6e74 6169 6e69 6e67 206c  umn containing l
+00035980: 6174 6974 7564 6520 636f 6f72 6469 6e61  atitude coordina
+00035990: 7465 732e 2044 6566 6175 6c74 7320 746f  tes. Defaults to
+000359a0: 2022 6c61 7469 7475 6465 222e 0d0a 2020   "latitude"...  
+000359b0: 2020 2020 2020 2020 2020 6c61 6265 6c20            label 
+000359c0: 2873 7472 2c20 6f70 7469 6f6e 616c 293a  (str, optional):
+000359d0: 2054 6865 206e 616d 6520 6f66 2074 6865   The name of the
+000359e0: 2063 6f6c 756d 6e20 636f 6e74 6169 6e69   column containi
+000359f0: 6e67 206c 6162 656c 2069 6e66 6f72 6d61  ng label informa
+00035a00: 7469 6f6e 2074 6f20 7573 6564 2066 6f72  tion to used for
+00035a10: 206d 6172 6b65 7220 706f 7075 702e 2044   marker popup. D
+00035a20: 6566 6175 6c74 7320 746f 204e 6f6e 652e  efaults to None.
+00035a30: 0d0a 2020 2020 2020 2020 2020 2020 6c61  ..            la
+00035a40: 7965 725f 6e61 6d65 2028 7374 722c 206f  yer_name (str, o
+00035a50: 7074 696f 6e61 6c29 3a20 5468 6520 6c61  ptional): The la
+00035a60: 7965 7220 6e61 6d65 2074 6f20 7573 652e  yer name to use.
+00035a70: 2044 6566 6175 6c74 7320 746f 2022 4d61   Defaults to "Ma
+00035a80: 726b 6572 2063 6c75 7374 6572 222e 0d0a  rker cluster"...
+00035a90: 2020 2020 2020 2020 2020 2020 746f 5f65              to_e
+00035aa0: 6520 2862 6f6f 6c2c 206f 7074 696f 6e61  e (bool, optiona
+00035ab0: 6c29 3a20 5768 6574 6865 7220 746f 2063  l): Whether to c
+00035ac0: 6f6e 7665 7274 2074 6865 2063 7376 2074  onvert the csv t
+00035ad0: 6f20 616e 2065 652e 4665 6174 7572 6543  o an ee.FeatureC
+00035ae0: 6f6c 6c65 6374 696f 6e2e 0d0a 0d0a 2020  ollection.....  
+00035af0: 2020 2020 2020 5261 6973 6573 3a0d 0a20        Raises:.. 
+00035b00: 2020 2020 2020 2020 2020 2046 696c 654e             FileN
+00035b10: 6f74 466f 756e 6445 7272 6f72 3a20 5468  otFoundError: Th
+00035b20: 6520 7370 6563 6966 6965 6420 696e 7075  e specified inpu
+00035b30: 7420 6373 7620 646f 6573 206e 6f74 2065  t csv does not e
+00035b40: 7869 7374 2e0d 0a20 2020 2020 2020 2020  xist...         
+00035b50: 2020 2056 616c 7565 4572 726f 723a 2054     ValueError: T
+00035b60: 6865 2073 7065 6369 6669 6564 2078 2063  he specified x c
+00035b70: 6f6c 756d 6e20 646f 6573 206e 6f74 2065  olumn does not e
+00035b80: 7869 7374 2e0d 0a20 2020 2020 2020 2020  xist...         
+00035b90: 2020 2056 616c 7565 4572 726f 723a 2054     ValueError: T
+00035ba0: 6865 2073 7065 6369 6669 6564 2079 2063  he specified y c
+00035bb0: 6f6c 756d 6e20 646f 6573 206e 6f74 2065  olumn does not e
+00035bc0: 7869 7374 2e0d 0a20 2020 2020 2020 2020  xist...         
+00035bd0: 2020 2056 616c 7565 4572 726f 723a 2054     ValueError: T
+00035be0: 6865 2073 7065 6369 6669 6564 206c 6162  he specified lab
+00035bf0: 656c 2063 6f6c 756d 6e20 646f 6573 206e  el column does n
+00035c00: 6f74 2065 7869 7374 2e0d 0a20 2020 2020  ot exist...     
+00035c10: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
+00035c20: 696d 706f 7274 2070 616e 6461 7320 6173  import pandas as
+00035c30: 2070 640d 0a0d 0a20 2020 2020 2020 2069   pd....        i
+00035c40: 6620 6e6f 7420 696e 5f63 7376 2e73 7461  f not in_csv.sta
+00035c50: 7274 7377 6974 6828 2268 7474 7022 2920  rtswith("http") 
+00035c60: 616e 6420 286e 6f74 206f 732e 7061 7468  and (not os.path
+00035c70: 2e65 7869 7374 7328 696e 5f63 7376 2929  .exists(in_csv))
 00035c80: 3a0d 0a20 2020 2020 2020 2020 2020 2072  :..            r
-00035c90: 6169 7365 2056 616c 7565 4572 726f 7228  aise ValueError(
-00035ca0: 6622 7920 6d75 7374 2062 6520 6f6e 6520  f"y must be one 
-00035cb0: 6f66 2074 6865 2066 6f6c 6c6f 7769 6e67  of the following
-00035cc0: 3a20 7b27 2c20 272e 6a6f 696e 2863 6f6c  : {', '.join(col
-00035cd0: 5f6e 616d 6573 297d 2229 0d0a 0d0a 2020  _names)}")....  
-00035ce0: 2020 2020 2020 6966 206c 6162 656c 2069        if label i
-00035cf0: 7320 6e6f 7420 4e6f 6e65 2061 6e64 2028  s not None and (
-00035d00: 6c61 6265 6c20 6e6f 7420 696e 2063 6f6c  label not in col
-00035d10: 5f6e 616d 6573 293a 0d0a 2020 2020 2020  _names):..      
-00035d20: 2020 2020 2020 7261 6973 6520 5661 6c75        raise Valu
-00035d30: 6545 7272 6f72 280d 0a20 2020 2020 2020  eError(..       
-00035d40: 2020 2020 2020 2020 2066 226c 6162 656c           f"label
-00035d50: 206d 7573 7420 6265 206f 6e65 206f 6620   must be one of 
-00035d60: 7468 6520 666f 6c6c 6f77 696e 673a 207b  the following: {
-00035d70: 272c 2027 2e6a 6f69 6e28 636f 6c5f 6e61  ', '.join(col_na
-00035d80: 6d65 7329 7d22 0d0a 2020 2020 2020 2020  mes)}"..        
-00035d90: 2020 2020 290d 0a0d 0a20 2020 2020 2020      )....       
-00035da0: 2073 656c 662e 6465 6661 756c 745f 7374   self.default_st
-00035db0: 796c 6520 3d20 7b22 6375 7273 6f72 223a  yle = {"cursor":
-00035dc0: 2022 7761 6974 227d 0d0a 0d0a 2020 2020   "wait"}....    
-00035dd0: 2020 2020 6966 2074 6f5f 6565 3a0d 0a20      if to_ee:.. 
-00035de0: 2020 2020 2020 2020 2020 2066 6320 3d20             fc = 
-00035df0: 6373 765f 746f 5f65 6528 696e 5f63 7376  csv_to_ee(in_csv
-00035e00: 2c20 6c61 7469 7475 6465 3d79 2c20 6c6f  , latitude=y, lo
-00035e10: 6e67 6974 7564 653d 7829 0d0a 2020 2020  ngitude=x)..    
-00035e20: 2020 2020 2020 2020 7365 6c66 2e61 6464          self.add
-00035e30: 4c61 7965 7228 6663 2c20 7b7d 2c20 6c61  Layer(fc, {}, la
-00035e40: 7965 725f 6e61 6d65 290d 0a0d 0a20 2020  yer_name)....   
-00035e50: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
-00035e60: 2020 2020 2020 2020 706f 696e 7473 203d          points =
-00035e70: 206c 6973 7428 7a69 7028 6466 5b79 5d2c   list(zip(df[y],
-00035e80: 2064 665b 785d 2929 0d0a 0d0a 2020 2020   df[x]))....    
-00035e90: 2020 2020 2020 2020 6966 206c 6162 656c          if label
-00035ea0: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
-00035eb0: 2020 2020 2020 2020 2020 2020 2020 206c                 l
-00035ec0: 6162 656c 7320 3d20 6466 5b6c 6162 656c  abels = df[label
-00035ed0: 5d0d 0a20 2020 2020 2020 2020 2020 2020  ]..             
-00035ee0: 2020 206d 6172 6b65 7273 203d 205b 0d0a     markers = [..
-00035ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00035f00: 2020 2020 6970 796c 6561 666c 6574 2e4d      ipyleaflet.M
-00035f10: 6172 6b65 7228 0d0a 2020 2020 2020 2020  arker(..        
-00035f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00035f30: 6c6f 6361 7469 6f6e 3d70 6f69 6e74 2c0d  location=point,.
-00035f40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00035f50: 2020 2020 2020 2020 2064 7261 6767 6162           draggab
-00035f60: 6c65 3d46 616c 7365 2c0d 0a20 2020 2020  le=False,..     
-00035f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00035f80: 2020 2070 6f70 7570 3d77 6964 6765 7473     popup=widgets
-00035f90: 2e48 544d 4c28 7374 7228 6c61 6265 6c73  .HTML(str(labels
-00035fa0: 5b69 6e64 6578 5d29 292c 0d0a 2020 2020  [index])),..    
-00035fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00035fc0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-00035fd0: 2020 2020 2020 2066 6f72 2069 6e64 6578         for index
-00035fe0: 2c20 706f 696e 7420 696e 2065 6e75 6d65  , point in enume
-00035ff0: 7261 7465 2870 6f69 6e74 7329 0d0a 2020  rate(points)..  
-00036000: 2020 2020 2020 2020 2020 2020 2020 5d0d                ].
-00036010: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
-00036020: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-00036030: 2020 2020 6d61 726b 6572 7320 3d20 5b0d      markers = [.
-00036040: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00036050: 2020 2020 2069 7079 6c65 6166 6c65 742e       ipyleaflet.
-00036060: 4d61 726b 6572 286c 6f63 6174 696f 6e3d  Marker(location=
-00036070: 706f 696e 742c 2064 7261 6767 6162 6c65  point, draggable
-00036080: 3d46 616c 7365 290d 0a20 2020 2020 2020  =False)..       
-00036090: 2020 2020 2020 2020 2020 2020 2066 6f72               for
-000360a0: 2070 6f69 6e74 2069 6e20 706f 696e 7473   point in points
-000360b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000360c0: 2020 5d0d 0a0d 0a20 2020 2020 2020 2020    ]....         
-000360d0: 2020 206d 6172 6b65 725f 636c 7573 7465     marker_cluste
-000360e0: 7220 3d20 6970 796c 6561 666c 6574 2e4d  r = ipyleaflet.M
-000360f0: 6172 6b65 7243 6c75 7374 6572 286d 6172  arkerCluster(mar
-00036100: 6b65 7273 3d6d 6172 6b65 7273 2c20 6e61  kers=markers, na
-00036110: 6d65 3d6c 6179 6572 5f6e 616d 6529 0d0a  me=layer_name)..
-00036120: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00036130: 2e61 6464 5f6c 6179 6572 286d 6172 6b65  .add_layer(marke
-00036140: 725f 636c 7573 7465 7229 0d0a 0d0a 2020  r_cluster)....  
-00036150: 2020 2020 2020 7365 6c66 2e64 6566 6175        self.defau
-00036160: 6c74 5f73 7479 6c65 203d 207b 2263 7572  lt_style = {"cur
-00036170: 736f 7222 3a20 2264 6566 6175 6c74 227d  sor": "default"}
-00036180: 0d0a 0d0a 2020 2020 6465 6620 6164 645f  ....    def add_
-00036190: 706c 616e 6574 5f62 795f 6d6f 6e74 6828  planet_by_month(
-000361a0: 0d0a 2020 2020 2020 2020 7365 6c66 2c20  ..        self, 
-000361b0: 7965 6172 3d32 3031 362c 206d 6f6e 7468  year=2016, month
-000361c0: 3d31 2c20 6e61 6d65 3d4e 6f6e 652c 2061  =1, name=None, a
-000361d0: 7069 5f6b 6579 3d4e 6f6e 652c 2074 6f6b  pi_key=None, tok
-000361e0: 656e 5f6e 616d 653d 2250 4c41 4e45 545f  en_name="PLANET_
-000361f0: 4150 495f 4b45 5922 0d0a 2020 2020 293a  API_KEY"..    ):
-00036200: 0d0a 2020 2020 2020 2020 2222 2241 6464  ..        """Add
-00036210: 7320 6120 506c 616e 6574 2067 6c6f 6261  s a Planet globa
-00036220: 6c20 6d6f 7361 6963 2062 7920 6d6f 6e74  l mosaic by mont
-00036230: 6820 746f 2074 6865 206d 6170 2e20 546f  h to the map. To
-00036240: 2067 6574 2061 2050 6c61 6e65 7420 4150   get a Planet AP
-00036250: 4920 6b65 792c 2073 6565 2068 7474 7073  I key, see https
-00036260: 3a2f 2f64 6576 656c 6f70 6572 732e 706c  ://developers.pl
-00036270: 616e 6574 2e63 6f6d 2f71 7569 636b 7374  anet.com/quickst
-00036280: 6172 742f 6170 6973 0d0a 0d0a 2020 2020  art/apis....    
-00036290: 2020 2020 4172 6773 3a0d 0a20 2020 2020      Args:..     
-000362a0: 2020 2020 2020 2079 6561 7220 2869 6e74         year (int
-000362b0: 2c20 6f70 7469 6f6e 616c 293a 2054 6865  , optional): The
-000362c0: 2079 6561 7220 6f66 2050 6c61 6e65 7420   year of Planet 
-000362d0: 676c 6f62 616c 206d 6f73 6169 632c 206d  global mosaic, m
-000362e0: 7573 7420 6265 203e 3d32 3031 362e 2044  ust be >=2016. D
-000362f0: 6566 6175 6c74 7320 746f 2032 3031 362e  efaults to 2016.
-00036300: 0d0a 2020 2020 2020 2020 2020 2020 6d6f  ..            mo
-00036310: 6e74 6820 2869 6e74 2c20 6f70 7469 6f6e  nth (int, option
-00036320: 616c 293a 2054 6865 206d 6f6e 7468 206f  al): The month o
-00036330: 6620 506c 616e 6574 2067 6c6f 6261 6c20  f Planet global 
-00036340: 6d6f 7361 6963 2c20 6d75 7374 2062 6520  mosaic, must be 
-00036350: 312d 3132 2e20 4465 6661 756c 7473 2074  1-12. Defaults t
-00036360: 6f20 312e 0d0a 2020 2020 2020 2020 2020  o 1...          
-00036370: 2020 6e61 6d65 2028 7374 722c 206f 7074    name (str, opt
-00036380: 696f 6e61 6c29 3a20 5468 6520 6c61 7965  ional): The laye
-00036390: 7220 6e61 6d65 2074 6f20 7573 652e 2044  r name to use. D
-000363a0: 6566 6175 6c74 7320 746f 204e 6f6e 652e  efaults to None.
-000363b0: 0d0a 2020 2020 2020 2020 2020 2020 6170  ..            ap
-000363c0: 695f 6b65 7920 2873 7472 2c20 6f70 7469  i_key (str, opti
-000363d0: 6f6e 616c 293a 2054 6865 2050 6c61 6e65  onal): The Plane
-000363e0: 7420 4150 4920 6b65 792e 2044 6566 6175  t API key. Defau
-000363f0: 6c74 7320 746f 204e 6f6e 652e 0d0a 2020  lts to None...  
-00036400: 2020 2020 2020 2020 2020 746f 6b65 6e5f            token_
-00036410: 6e61 6d65 2028 7374 722c 206f 7074 696f  name (str, optio
-00036420: 6e61 6c29 3a20 5468 6520 656e 7669 726f  nal): The enviro
-00036430: 6e6d 656e 7420 7661 7269 6162 6c65 206e  nment variable n
-00036440: 616d 6520 6f66 2074 6865 2041 5049 206b  ame of the API k
-00036450: 6579 2e20 4465 6661 756c 7473 2074 6f20  ey. Defaults to 
-00036460: 2250 4c41 4e45 545f 4150 495f 4b45 5922  "PLANET_API_KEY"
-00036470: 2e0d 0a20 2020 2020 2020 2022 2222 0d0a  ...        """..
-00036480: 2020 2020 2020 2020 6c61 7965 7220 3d20          layer = 
-00036490: 706c 616e 6574 5f74 696c 655f 6279 5f6d  planet_tile_by_m
-000364a0: 6f6e 7468 2879 6561 722c 206d 6f6e 7468  onth(year, month
-000364b0: 2c20 6e61 6d65 2c20 6170 695f 6b65 792c  , name, api_key,
-000364c0: 2074 6f6b 656e 5f6e 616d 6529 0d0a 2020   token_name)..  
-000364d0: 2020 2020 2020 7365 6c66 2e61 6464 5f6c        self.add_l
-000364e0: 6179 6572 286c 6179 6572 290d 0a0d 0a20  ayer(layer).... 
-000364f0: 2020 2064 6566 2061 6464 5f70 6c61 6e65     def add_plane
-00036500: 745f 6279 5f71 7561 7274 6572 280d 0a20  t_by_quarter(.. 
-00036510: 2020 2020 2020 2073 656c 662c 2079 6561         self, yea
-00036520: 723d 3230 3136 2c20 7175 6172 7465 723d  r=2016, quarter=
-00036530: 312c 206e 616d 653d 4e6f 6e65 2c20 6170  1, name=None, ap
-00036540: 695f 6b65 793d 4e6f 6e65 2c20 746f 6b65  i_key=None, toke
-00036550: 6e5f 6e61 6d65 3d22 504c 414e 4554 5f41  n_name="PLANET_A
-00036560: 5049 5f4b 4559 220d 0a20 2020 2029 3a0d  PI_KEY"..    ):.
-00036570: 0a20 2020 2020 2020 2022 2222 4164 6473  .        """Adds
-00036580: 2061 2050 6c61 6e65 7420 676c 6f62 616c   a Planet global
-00036590: 206d 6f73 6169 6320 6279 2071 7561 7274   mosaic by quart
-000365a0: 6572 2074 6f20 7468 6520 6d61 702e 2054  er to the map. T
-000365b0: 6f20 6765 7420 6120 506c 616e 6574 2041  o get a Planet A
-000365c0: 5049 206b 6579 2c20 7365 6520 6874 7470  PI key, see http
-000365d0: 733a 2f2f 6465 7665 6c6f 7065 7273 2e70  s://developers.p
-000365e0: 6c61 6e65 742e 636f 6d2f 7175 6963 6b73  lanet.com/quicks
-000365f0: 7461 7274 2f61 7069 730d 0a0d 0a20 2020  tart/apis....   
-00036600: 2020 2020 2041 7267 733a 0d0a 2020 2020       Args:..    
-00036610: 2020 2020 2020 2020 7965 6172 2028 696e          year (in
-00036620: 742c 206f 7074 696f 6e61 6c29 3a20 5468  t, optional): Th
-00036630: 6520 7965 6172 206f 6620 506c 616e 6574  e year of Planet
-00036640: 2067 6c6f 6261 6c20 6d6f 7361 6963 2c20   global mosaic, 
-00036650: 6d75 7374 2062 6520 3e3d 3230 3136 2e20  must be >=2016. 
-00036660: 4465 6661 756c 7473 2074 6f20 3230 3136  Defaults to 2016
-00036670: 2e0d 0a20 2020 2020 2020 2020 2020 2071  ...            q
-00036680: 7561 7274 6572 2028 696e 742c 206f 7074  uarter (int, opt
-00036690: 696f 6e61 6c29 3a20 5468 6520 7175 6172  ional): The quar
-000366a0: 7465 7220 6f66 2050 6c61 6e65 7420 676c  ter of Planet gl
-000366b0: 6f62 616c 206d 6f73 6169 632c 206d 7573  obal mosaic, mus
-000366c0: 7420 6265 2031 2d31 322e 2044 6566 6175  t be 1-12. Defau
-000366d0: 6c74 7320 746f 2031 2e0d 0a20 2020 2020  lts to 1...     
-000366e0: 2020 2020 2020 206e 616d 6520 2873 7472         name (str
-000366f0: 2c20 6f70 7469 6f6e 616c 293a 2054 6865  , optional): The
-00036700: 206c 6179 6572 206e 616d 6520 746f 2075   layer name to u
-00036710: 7365 2e20 4465 6661 756c 7473 2074 6f20  se. Defaults to 
-00036720: 4e6f 6e65 2e0d 0a20 2020 2020 2020 2020  None...         
-00036730: 2020 2061 7069 5f6b 6579 2028 7374 722c     api_key (str,
-00036740: 206f 7074 696f 6e61 6c29 3a20 5468 6520   optional): The 
-00036750: 506c 616e 6574 2041 5049 206b 6579 2e20  Planet API key. 
-00036760: 4465 6661 756c 7473 2074 6f20 4e6f 6e65  Defaults to None
-00036770: 2e0d 0a20 2020 2020 2020 2020 2020 2074  ...            t
-00036780: 6f6b 656e 5f6e 616d 6520 2873 7472 2c20  oken_name (str, 
-00036790: 6f70 7469 6f6e 616c 293a 2054 6865 2065  optional): The e
-000367a0: 6e76 6972 6f6e 6d65 6e74 2076 6172 6961  nvironment varia
-000367b0: 626c 6520 6e61 6d65 206f 6620 7468 6520  ble name of the 
-000367c0: 4150 4920 6b65 792e 2044 6566 6175 6c74  API key. Default
-000367d0: 7320 746f 2022 504c 414e 4554 5f41 5049  s to "PLANET_API
-000367e0: 5f4b 4559 222e 0d0a 2020 2020 2020 2020  _KEY"...        
-000367f0: 2222 220d 0a20 2020 2020 2020 206c 6179  """..        lay
-00036800: 6572 203d 2070 6c61 6e65 745f 7469 6c65  er = planet_tile
-00036810: 5f62 795f 7175 6172 7465 7228 7965 6172  _by_quarter(year
-00036820: 2c20 7175 6172 7465 722c 206e 616d 652c  , quarter, name,
-00036830: 2061 7069 5f6b 6579 2c20 746f 6b65 6e5f   api_key, token_
-00036840: 6e61 6d65 290d 0a20 2020 2020 2020 2073  name)..        s
-00036850: 656c 662e 6164 645f 6c61 7965 7228 6c61  elf.add_layer(la
-00036860: 7965 7229 0d0a 0d0a 2020 2020 6465 6620  yer)....    def 
-00036870: 746f 5f73 7472 6561 6d6c 6974 280d 0a20  to_streamlit(.. 
-00036880: 2020 2020 2020 2073 656c 662c 2077 6964         self, wid
-00036890: 7468 3d37 3030 2c20 6865 6967 6874 3d35  th=700, height=5
-000368a0: 3030 2c20 7265 7370 6f6e 7369 7665 3d54  00, responsive=T
-000368b0: 7275 652c 2073 6372 6f6c 6c69 6e67 3d46  rue, scrolling=F
-000368c0: 616c 7365 2c20 2a2a 6b77 6172 6773 0d0a  alse, **kwargs..
-000368d0: 2020 2020 293a 0d0a 2020 2020 2020 2020      ):..        
-000368e0: 2222 2252 656e 6465 7273 206d 6170 2066  """Renders map f
-000368f0: 6967 7572 6520 696e 2061 2053 7472 6561  igure in a Strea
-00036900: 6d6c 6974 2061 7070 2e0d 0a0d 0a20 2020  mlit app.....   
-00036910: 2020 2020 2041 7267 733a 0d0a 2020 2020       Args:..    
-00036920: 2020 2020 2020 2020 7769 6474 6820 2869          width (i
-00036930: 6e74 2c20 6f70 7469 6f6e 616c 293a 2057  nt, optional): W
-00036940: 6964 7468 206f 6620 7468 6520 6d61 702e  idth of the map.
-00036950: 2044 6566 6175 6c74 7320 746f 2037 3030   Defaults to 700
-00036960: 2e0d 0a20 2020 2020 2020 2020 2020 2068  ...            h
-00036970: 6569 6768 7420 2869 6e74 2c20 6f70 7469  eight (int, opti
-00036980: 6f6e 616c 293a 2048 6569 6768 7420 6f66  onal): Height of
-00036990: 2074 6865 206d 6170 2e20 4465 6661 756c   the map. Defaul
-000369a0: 7473 2074 6f20 3530 302e 0d0a 2020 2020  ts to 500...    
-000369b0: 2020 2020 2020 2020 7265 7370 6f6e 7369          responsi
-000369c0: 7665 2028 626f 6f6c 2c20 6f70 7469 6f6e  ve (bool, option
-000369d0: 616c 293a 2057 6865 7468 6572 2074 6f20  al): Whether to 
-000369e0: 6d61 6b65 2074 6865 206d 6170 2072 6573  make the map res
-000369f0: 706f 6e73 6976 652e 2044 6566 6175 6c74  ponsive. Default
-00036a00: 7320 746f 2054 7275 652e 0d0a 2020 2020  s to True...    
-00036a10: 2020 2020 2020 2020 7363 726f 6c6c 696e          scrollin
-00036a20: 6720 2862 6f6f 6c2c 206f 7074 696f 6e61  g (bool, optiona
-00036a30: 6c29 3a20 4966 2054 7275 652c 2073 686f  l): If True, sho
-00036a40: 7720 6120 7363 726f 6c6c 6261 7220 7768  w a scrollbar wh
-00036a50: 656e 2074 6865 2063 6f6e 7465 6e74 2069  en the content i
-00036a60: 7320 6c61 7267 6572 2074 6861 6e20 7468  s larger than th
-00036a70: 6520 6966 7261 6d65 2e20 4f74 6865 7277  e iframe. Otherw
-00036a80: 6973 652c 2064 6f20 6e6f 7420 7368 6f77  ise, do not show
-00036a90: 2061 2073 6372 6f6c 6c62 6172 2e20 4465   a scrollbar. De
-00036aa0: 6661 756c 7473 2074 6f20 4661 6c73 652e  faults to False.
-00036ab0: 0d0a 0d0a 2020 2020 2020 2020 5265 7475  ....        Retu
-00036ac0: 726e 733a 0d0a 2020 2020 2020 2020 2020  rns:..          
-00036ad0: 2020 7374 7265 616d 6c69 742e 636f 6d70    streamlit.comp
-00036ae0: 6f6e 656e 7473 3a20 636f 6d70 6f6e 656e  onents: componen
-00036af0: 7473 2e68 746d 6c20 6f62 6a65 6374 2e0d  ts.html object..
-00036b00: 0a20 2020 2020 2020 2022 2222 0d0a 0d0a  .        """....
-00036b10: 2020 2020 2020 2020 7472 793a 0d0a 2020          try:..  
-00036b20: 2020 2020 2020 2020 2020 696d 706f 7274            import
-00036b30: 2073 7472 6561 6d6c 6974 2061 7320 7374   streamlit as st
-00036b40: 0d0a 2020 2020 2020 2020 2020 2020 696d  ..            im
-00036b50: 706f 7274 2073 7472 6561 6d6c 6974 2e63  port streamlit.c
-00036b60: 6f6d 706f 6e65 6e74 732e 7631 2061 7320  omponents.v1 as 
-00036b70: 636f 6d70 6f6e 656e 7473 0d0a 0d0a 2020  components....  
-00036b80: 2020 2020 2020 2020 2020 6966 2072 6573            if res
-00036b90: 706f 6e73 6976 653a 0d0a 2020 2020 2020  ponsive:..      
-00036ba0: 2020 2020 2020 2020 2020 6d61 6b65 5f6d            make_m
-00036bb0: 6170 5f72 6573 706f 6e73 6976 6520 3d20  ap_responsive = 
-00036bc0: 2222 220d 0a20 2020 2020 2020 2020 2020  """..           
-00036bd0: 2020 2020 203c 7374 796c 653e 0d0a 2020       <style>..  
-00036be0: 2020 2020 2020 2020 2020 2020 2020 5b74                [t
-00036bf0: 6974 6c65 7e3d 2273 742e 6966 7261 6d65  itle~="st.iframe
-00036c00: 225d 207b 2077 6964 7468 3a20 3130 3025  "] { width: 100%
-00036c10: 7d0d 0a20 2020 2020 2020 2020 2020 2020  }..             
-00036c20: 2020 203c 2f73 7479 6c65 3e0d 0a20 2020     </style>..   
-00036c30: 2020 2020 2020 2020 2020 2020 2022 2222               """
-00036c40: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00036c50: 2020 7374 2e6d 6172 6b64 6f77 6e28 6d61    st.markdown(ma
-00036c60: 6b65 5f6d 6170 5f72 6573 706f 6e73 6976  ke_map_responsiv
-00036c70: 652c 2075 6e73 6166 655f 616c 6c6f 775f  e, unsafe_allow_
-00036c80: 6874 6d6c 3d54 7275 6529 0d0a 2020 2020  html=True)..    
-00036c90: 2020 2020 2020 2020 7265 7475 726e 2063          return c
-00036ca0: 6f6d 706f 6e65 6e74 732e 6874 6d6c 280d  omponents.html(.
-00036cb0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00036cc0: 2073 656c 662e 746f 5f68 746d 6c28 292c   self.to_html(),
-00036cd0: 2077 6964 7468 3d77 6964 7468 2c20 6865   width=width, he
-00036ce0: 6967 6874 3d68 6569 6768 742c 2073 6372  ight=height, scr
-00036cf0: 6f6c 6c69 6e67 3d73 6372 6f6c 6c69 6e67  olling=scrolling
-00036d00: 0d0a 2020 2020 2020 2020 2020 2020 290d  ..            ).
-00036d10: 0a0d 0a20 2020 2020 2020 2065 7863 6570  ...        excep
-00036d20: 7420 4578 6365 7074 696f 6e20 6173 2065  t Exception as e
-00036d30: 3a0d 0a20 2020 2020 2020 2020 2020 2072  :..            r
-00036d40: 6169 7365 2045 7863 6570 7469 6f6e 2865  aise Exception(e
-00036d50: 290d 0a0d 0a20 2020 2064 6566 2061 6464  )....    def add
-00036d60: 5f70 6f69 6e74 5f6c 6179 6572 280d 0a20  _point_layer(.. 
-00036d70: 2020 2020 2020 2073 656c 662c 2066 696c         self, fil
-00036d80: 656e 616d 652c 2070 6f70 7570 3d4e 6f6e  ename, popup=Non
-00036d90: 652c 206c 6179 6572 5f6e 616d 653d 224d  e, layer_name="M
-00036da0: 6172 6b65 7220 436c 7573 7465 7222 2c20  arker Cluster", 
-00036db0: 2a2a 6b77 6172 6773 0d0a 2020 2020 293a  **kwargs..    ):
-00036dc0: 0d0a 2020 2020 2020 2020 2222 2241 6464  ..        """Add
-00036dd0: 7320 6120 706f 696e 7420 6c61 7965 7220  s a point layer 
-00036de0: 746f 2074 6865 206d 6170 2077 6974 6820  to the map with 
-00036df0: 6120 706f 7075 7020 6174 7472 6962 7574  a popup attribut
-00036e00: 652e 0d0a 0d0a 2020 2020 2020 2020 4172  e.....        Ar
-00036e10: 6773 3a0d 0a20 2020 2020 2020 2020 2020  gs:..           
-00036e20: 2066 696c 656e 616d 6520 2873 7472 293a   filename (str):
-00036e30: 2073 7472 2c20 6874 7470 2075 726c 2c20   str, http url, 
-00036e40: 7061 7468 206f 626a 6563 7420 6f72 2066  path object or f
-00036e50: 696c 652d 6c69 6b65 206f 626a 6563 742e  ile-like object.
-00036e60: 2045 6974 6865 7220 7468 6520 6162 736f   Either the abso
-00036e70: 6c75 7465 206f 7220 7265 6c61 7469 7665  lute or relative
-00036e80: 2070 6174 6820 746f 2074 6865 2066 696c   path to the fil
-00036e90: 6520 6f72 2055 524c 2074 6f20 6265 206f  e or URL to be o
-00036ea0: 7065 6e65 642c 206f 7220 616e 7920 6f62  pened, or any ob
-00036eb0: 6a65 6374 2077 6974 6820 6120 7265 6164  ject with a read
-00036ec0: 2829 206d 6574 686f 6420 2873 7563 6820  () method (such 
-00036ed0: 6173 2061 6e20 6f70 656e 2066 696c 6520  as an open file 
-00036ee0: 6f72 2053 7472 696e 6749 4f29 0d0a 2020  or StringIO)..  
-00036ef0: 2020 2020 2020 2020 2020 706f 7075 7020            popup 
-00036f00: 2873 7472 207c 206c 6973 742c 206f 7074  (str | list, opt
-00036f10: 696f 6e61 6c29 3a20 436f 6c75 6d6e 206e  ional): Column n
-00036f20: 616d 6528 7329 2074 6f20 6265 2075 7365  ame(s) to be use
-00036f30: 6420 666f 7220 706f 7075 702e 2044 6566  d for popup. Def
-00036f40: 6175 6c74 7320 746f 204e 6f6e 652e 0d0a  aults to None...
-00036f50: 2020 2020 2020 2020 2020 2020 6c61 7965              laye
-00036f60: 725f 6e61 6d65 2028 7374 722c 206f 7074  r_name (str, opt
-00036f70: 696f 6e61 6c29 3a20 4120 6c61 7965 7220  ional): A layer 
-00036f80: 6e61 6d65 2074 6f20 7573 652e 2044 6566  name to use. Def
-00036f90: 6175 6c74 7320 746f 2022 4d61 726b 6572  aults to "Marker
-00036fa0: 2043 6c75 7374 6572 222e 0d0a 0d0a 2020   Cluster".....  
-00036fb0: 2020 2020 2020 5261 6973 6573 3a0d 0a20        Raises:.. 
-00036fc0: 2020 2020 2020 2020 2020 2056 616c 7565             Value
-00036fd0: 4572 726f 723a 2049 6620 7468 6520 7370  Error: If the sp
-00036fe0: 6563 6966 6965 6420 636f 6c75 6d6e 206e  ecified column n
-00036ff0: 616d 6520 646f 6573 206e 6f74 2065 7869  ame does not exi
-00037000: 7374 2e0d 0a20 2020 2020 2020 2020 2020  st...           
-00037010: 2056 616c 7565 4572 726f 723a 2049 6620   ValueError: If 
-00037020: 7468 6520 7370 6563 6966 6965 6420 636f  the specified co
-00037030: 6c75 6d6e 206e 616d 6573 2064 6f20 6e6f  lumn names do no
-00037040: 7420 6578 6973 742e 0d0a 2020 2020 2020  t exist...      
-00037050: 2020 2222 220d 0a20 2020 2020 2020 2069    """..        i
-00037060: 6d70 6f72 7420 7761 726e 696e 6773 0d0a  mport warnings..
-00037070: 0d0a 2020 2020 2020 2020 7761 726e 696e  ..        warnin
-00037080: 6773 2e66 696c 7465 7277 6172 6e69 6e67  gs.filterwarning
-00037090: 7328 2269 676e 6f72 6522 290d 0a20 2020  s("ignore")..   
-000370a0: 2020 2020 2063 6865 636b 5f70 6163 6b61       check_packa
-000370b0: 6765 286e 616d 653d 2267 656f 7061 6e64  ge(name="geopand
-000370c0: 6173 222c 2055 524c 3d22 6874 7470 733a  as", URL="https:
-000370d0: 2f2f 6765 6f70 616e 6461 732e 6f72 6722  //geopandas.org"
-000370e0: 290d 0a20 2020 2020 2020 2069 6d70 6f72  )..        impor
-000370f0: 7420 6765 6f70 616e 6461 7320 6173 2067  t geopandas as g
-00037100: 7064 0d0a 0d0a 2020 2020 2020 2020 7365  pd....        se
-00037110: 6c66 2e64 6566 6175 6c74 5f73 7479 6c65  lf.default_style
-00037120: 203d 207b 2263 7572 736f 7222 3a20 2277   = {"cursor": "w
-00037130: 6169 7422 7d0d 0a0d 0a20 2020 2020 2020  ait"}....       
-00037140: 2069 6620 6e6f 7420 6669 6c65 6e61 6d65   if not filename
-00037150: 2e73 7461 7274 7377 6974 6828 2268 7474  .startswith("htt
-00037160: 7022 293a 0d0a 2020 2020 2020 2020 2020  p"):..          
-00037170: 2020 6669 6c65 6e61 6d65 203d 206f 732e    filename = os.
-00037180: 7061 7468 2e61 6273 7061 7468 2866 696c  path.abspath(fil
-00037190: 656e 616d 6529 0d0a 2020 2020 2020 2020  ename)..        
-000371a0: 6578 7420 3d20 6f73 2e70 6174 682e 7370  ext = os.path.sp
-000371b0: 6c69 7465 7874 2866 696c 656e 616d 6529  litext(filename)
-000371c0: 5b31 5d2e 6c6f 7765 7228 290d 0a20 2020  [1].lower()..   
-000371d0: 2020 2020 2069 6620 6578 7420 3d3d 2022       if ext == "
-000371e0: 2e6b 6d6c 223a 0d0a 2020 2020 2020 2020  .kml":..        
-000371f0: 2020 2020 6770 642e 696f 2e66 696c 652e      gpd.io.file.
-00037200: 6669 6f6e 612e 6472 7673 7570 706f 7274  fiona.drvsupport
-00037210: 2e73 7570 706f 7274 6564 5f64 7269 7665  .supported_drive
-00037220: 7273 5b22 4b4d 4c22 5d20 3d20 2272 7722  rs["KML"] = "rw"
-00037230: 0d0a 2020 2020 2020 2020 2020 2020 6764  ..            gd
-00037240: 6620 3d20 6770 642e 7265 6164 5f66 696c  f = gpd.read_fil
-00037250: 6528 6669 6c65 6e61 6d65 2c20 6472 6976  e(filename, driv
-00037260: 6572 3d22 4b4d 4c22 2c20 2a2a 6b77 6172  er="KML", **kwar
-00037270: 6773 290d 0a20 2020 2020 2020 2065 6c73  gs)..        els
-00037280: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-00037290: 6764 6620 3d20 6770 642e 7265 6164 5f66  gdf = gpd.read_f
-000372a0: 696c 6528 6669 6c65 6e61 6d65 2c20 2a2a  ile(filename, **
-000372b0: 6b77 6172 6773 290d 0a20 2020 2020 2020  kwargs)..       
-000372c0: 2064 6620 3d20 6764 662e 746f 5f63 7273   df = gdf.to_crs
-000372d0: 2865 7073 673d 2234 3332 3622 290d 0a20  (epsg="4326").. 
-000372e0: 2020 2020 2020 2063 6f6c 5f6e 616d 6573         col_names
-000372f0: 203d 2064 662e 636f 6c75 6d6e 732e 7661   = df.columns.va
-00037300: 6c75 6573 2e74 6f6c 6973 7428 290d 0a20  lues.tolist().. 
-00037310: 2020 2020 2020 2069 6620 706f 7075 7020         if popup 
-00037320: 6973 206e 6f74 204e 6f6e 653a 0d0a 2020  is not None:..  
-00037330: 2020 2020 2020 2020 2020 6966 2069 7369            if isi
-00037340: 6e73 7461 6e63 6528 706f 7075 702c 2073  nstance(popup, s
-00037350: 7472 2920 616e 6420 2870 6f70 7570 206e  tr) and (popup n
-00037360: 6f74 2069 6e20 636f 6c5f 6e61 6d65 7329  ot in col_names)
-00037370: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00037380: 2020 2072 6169 7365 2056 616c 7565 4572     raise ValueEr
-00037390: 726f 7228 0d0a 2020 2020 2020 2020 2020  ror(..          
-000373a0: 2020 2020 2020 2020 2020 6622 706f 7075            f"popu
-000373b0: 7020 6d75 7374 2062 6520 6f6e 6520 6f66  p must be one of
-000373c0: 2074 6865 2066 6f6c 6c6f 7769 6e67 3a20   the following: 
-000373d0: 7b27 2c20 272e 6a6f 696e 2863 6f6c 5f6e  {', '.join(col_n
-000373e0: 616d 6573 297d 220d 0a20 2020 2020 2020  ames)}"..       
-000373f0: 2020 2020 2020 2020 2029 0d0a 2020 2020           )..    
-00037400: 2020 2020 2020 2020 656c 6966 2069 7369          elif isi
-00037410: 6e73 7461 6e63 6528 706f 7075 702c 206c  nstance(popup, l
-00037420: 6973 7429 2061 6e64 2028 0d0a 2020 2020  ist) and (..    
-00037430: 2020 2020 2020 2020 2020 2020 6e6f 7420              not 
-00037440: 616c 6c28 6974 656d 2069 6e20 636f 6c5f  all(item in col_
-00037450: 6e61 6d65 7320 666f 7220 6974 656d 2069  names for item i
-00037460: 6e20 706f 7075 7029 0d0a 2020 2020 2020  n popup)..      
-00037470: 2020 2020 2020 293a 0d0a 2020 2020 2020        ):..      
-00037480: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-00037490: 5661 6c75 6545 7272 6f72 280d 0a20 2020  ValueError(..   
-000374a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000374b0: 2066 2241 6c6c 2070 6f70 7570 2069 7465   f"All popup ite
-000374c0: 6d73 206d 7573 7420 6265 2073 656c 6563  ms must be selec
-000374d0: 7420 6672 6f6d 3a20 7b27 2c20 272e 6a6f  t from: {', '.jo
-000374e0: 696e 2863 6f6c 5f6e 616d 6573 297d 220d  in(col_names)}".
-000374f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00037500: 2029 0d0a 0d0a 2020 2020 2020 2020 6466   )....        df
-00037510: 5b22 7822 5d20 3d20 6466 2e67 656f 6d65  ["x"] = df.geome
-00037520: 7472 792e 780d 0a20 2020 2020 2020 2064  try.x..        d
-00037530: 665b 2279 225d 203d 2064 662e 6765 6f6d  f["y"] = df.geom
-00037540: 6574 7279 2e79 0d0a 0d0a 2020 2020 2020  etry.y....      
-00037550: 2020 706f 696e 7473 203d 206c 6973 7428    points = list(
-00037560: 7a69 7028 6466 5b22 7922 5d2c 2064 665b  zip(df["y"], df[
-00037570: 2278 225d 2929 0d0a 0d0a 2020 2020 2020  "x"]))....      
-00037580: 2020 6966 2070 6f70 7570 2069 7320 6e6f    if popup is no
-00037590: 7420 4e6f 6e65 3a0d 0a20 2020 2020 2020  t None:..       
-000375a0: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
-000375b0: 6365 2870 6f70 7570 2c20 7374 7229 3a0d  ce(popup, str):.
-000375c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000375d0: 206c 6162 656c 7320 3d20 6466 5b70 6f70   labels = df[pop
-000375e0: 7570 5d0d 0a20 2020 2020 2020 2020 2020  up]..           
-000375f0: 2020 2020 206d 6172 6b65 7273 203d 205b       markers = [
-00037600: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00037610: 2020 2020 2020 6970 796c 6561 666c 6574        ipyleaflet
-00037620: 2e4d 6172 6b65 7228 0d0a 2020 2020 2020  .Marker(..      
-00037630: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00037640: 2020 6c6f 6361 7469 6f6e 3d70 6f69 6e74    location=point
-00037650: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00037660: 2020 2020 2020 2020 2020 2064 7261 6767             dragg
-00037670: 6162 6c65 3d46 616c 7365 2c0d 0a20 2020  able=False,..   
-00037680: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00037690: 2020 2020 2070 6f70 7570 3d77 6964 6765       popup=widge
-000376a0: 7473 2e48 544d 4c28 7374 7228 6c61 6265  ts.HTML(str(labe
-000376b0: 6c73 5b69 6e64 6578 5d29 292c 0d0a 2020  ls[index])),..  
-000376c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000376d0: 2020 290d 0a20 2020 2020 2020 2020 2020    )..           
-000376e0: 2020 2020 2020 2020 2066 6f72 2069 6e64           for ind
-000376f0: 6578 2c20 706f 696e 7420 696e 2065 6e75  ex, point in enu
-00037700: 6d65 7261 7465 2870 6f69 6e74 7329 0d0a  merate(points)..
-00037710: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00037720: 5d0d 0a20 2020 2020 2020 2020 2020 2065  ]..            e
-00037730: 6c69 6620 6973 696e 7374 616e 6365 2870  lif isinstance(p
-00037740: 6f70 7570 2c20 6c69 7374 293a 0d0a 2020  opup, list):..  
-00037750: 2020 2020 2020 2020 2020 2020 2020 6c61                la
-00037760: 6265 6c73 203d 205b 5d0d 0a20 2020 2020  bels = []..     
-00037770: 2020 2020 2020 2020 2020 2066 6f72 2069             for i
-00037780: 2069 6e20 7261 6e67 6528 6c65 6e28 706f   in range(len(po
-00037790: 696e 7473 2929 3a0d 0a20 2020 2020 2020  ints)):..       
-000377a0: 2020 2020 2020 2020 2020 2020 206c 6162               lab
-000377b0: 656c 203d 2022 220d 0a20 2020 2020 2020  el = ""..       
-000377c0: 2020 2020 2020 2020 2020 2020 2066 6f72               for
-000377d0: 2069 7465 6d20 696e 2070 6f70 7570 3a0d   item in popup:.
-000377e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000377f0: 2020 2020 2020 2020 206c 6162 656c 203d           label =
-00037800: 206c 6162 656c 202b 2073 7472 2869 7465   label + str(ite
-00037810: 6d29 202b 2022 3a20 2220 2b20 7374 7228  m) + ": " + str(
-00037820: 6466 5b69 7465 6d5d 5b69 5d29 202b 2022  df[item][i]) + "
-00037830: 3c62 723e 220d 0a20 2020 2020 2020 2020  <br>"..         
-00037840: 2020 2020 2020 2020 2020 206c 6162 656c             label
-00037850: 732e 6170 7065 6e64 286c 6162 656c 290d  s.append(label).
-00037860: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00037870: 2064 665b 2270 6f70 7570 225d 203d 206c   df["popup"] = l
-00037880: 6162 656c 730d 0a0d 0a20 2020 2020 2020  abels....       
-00037890: 2020 2020 2020 2020 206d 6172 6b65 7273           markers
-000378a0: 203d 205b 0d0a 2020 2020 2020 2020 2020   = [..          
-000378b0: 2020 2020 2020 2020 2020 6970 796c 6561            ipylea
-000378c0: 666c 6574 2e4d 6172 6b65 7228 0d0a 2020  flet.Marker(..  
-000378d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000378e0: 2020 2020 2020 6c6f 6361 7469 6f6e 3d70        location=p
-000378f0: 6f69 6e74 2c0d 0a20 2020 2020 2020 2020  oint,..         
-00037900: 2020 2020 2020 2020 2020 2020 2020 2064                 d
-00037910: 7261 6767 6162 6c65 3d46 616c 7365 2c0d  raggable=False,.
-00037920: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00037930: 2020 2020 2020 2020 2070 6f70 7570 3d77           popup=w
-00037940: 6964 6765 7473 2e48 544d 4c28 6c61 6265  idgets.HTML(labe
-00037950: 6c73 5b69 6e64 6578 5d29 2c0d 0a20 2020  ls[index]),..   
-00037960: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00037970: 2029 0d0a 2020 2020 2020 2020 2020 2020   )..            
-00037980: 2020 2020 2020 2020 666f 7220 696e 6465          for inde
-00037990: 782c 2070 6f69 6e74 2069 6e20 656e 756d  x, point in enum
-000379a0: 6572 6174 6528 706f 696e 7473 290d 0a20  erate(points).. 
-000379b0: 2020 2020 2020 2020 2020 2020 2020 205d                 ]
-000379c0: 0d0a 0d0a 2020 2020 2020 2020 656c 7365  ....        else
-000379d0: 3a0d 0a20 2020 2020 2020 2020 2020 206d  :..            m
-000379e0: 6172 6b65 7273 203d 205b 0d0a 2020 2020  arkers = [..    
-000379f0: 2020 2020 2020 2020 2020 2020 6970 796c              ipyl
-00037a00: 6561 666c 6574 2e4d 6172 6b65 7228 6c6f  eaflet.Marker(lo
-00037a10: 6361 7469 6f6e 3d70 6f69 6e74 2c20 6472  cation=point, dr
-00037a20: 6167 6761 626c 653d 4661 6c73 6529 2066  aggable=False) f
-00037a30: 6f72 2070 6f69 6e74 2069 6e20 706f 696e  or point in poin
-00037a40: 7473 0d0a 2020 2020 2020 2020 2020 2020  ts..            
-00037a50: 5d0d 0a0d 0a20 2020 2020 2020 206d 6172  ]....        mar
-00037a60: 6b65 725f 636c 7573 7465 7220 3d20 6970  ker_cluster = ip
-00037a70: 796c 6561 666c 6574 2e4d 6172 6b65 7243  yleaflet.MarkerC
-00037a80: 6c75 7374 6572 286d 6172 6b65 7273 3d6d  luster(markers=m
-00037a90: 6172 6b65 7273 2c20 6e61 6d65 3d6c 6179  arkers, name=lay
-00037aa0: 6572 5f6e 616d 6529 0d0a 2020 2020 2020  er_name)..      
-00037ab0: 2020 7365 6c66 2e61 6464 5f6c 6179 6572    self.add_layer
-00037ac0: 286d 6172 6b65 725f 636c 7573 7465 7229  (marker_cluster)
-00037ad0: 0d0a 0d0a 2020 2020 2020 2020 7365 6c66  ....        self
-00037ae0: 2e64 6566 6175 6c74 5f73 7479 6c65 203d  .default_style =
-00037af0: 207b 2263 7572 736f 7222 3a20 2264 6566   {"cursor": "def
-00037b00: 6175 6c74 227d 0d0a 0d0a 2020 2020 6465  ault"}....    de
-00037b10: 6620 6164 645f 6365 6e73 7573 5f64 6174  f add_census_dat
-00037b20: 6128 7365 6c66 2c20 776d 732c 206c 6179  a(self, wms, lay
-00037b30: 6572 2c20 6365 6e73 7573 5f64 6963 743d  er, census_dict=
-00037b40: 4e6f 6e65 2c20 2a2a 6b77 6172 6773 293a  None, **kwargs):
-00037b50: 0d0a 2020 2020 2020 2020 2222 2241 6464  ..        """Add
-00037b60: 7320 6120 6365 6e73 7573 2064 6174 6120  s a census data 
-00037b70: 6c61 7965 7220 746f 2074 6865 206d 6170  layer to the map
-00037b80: 2e0d 0a0d 0a20 2020 2020 2020 2041 7267  .....        Arg
-00037b90: 733a 0d0a 2020 2020 2020 2020 2020 2020  s:..            
-00037ba0: 776d 7320 2873 7472 293a 2054 6865 2077  wms (str): The w
-00037bb0: 6d73 2074 6f20 7573 652e 2046 6f72 2065  ms to use. For e
-00037bc0: 7861 6d70 6c65 2c20 2243 7572 7265 6e74  xample, "Current
-00037bd0: 222c 2022 4143 5320 3230 3231 222c 2022  ", "ACS 2021", "
-00037be0: 4365 6e73 7573 2032 3032 3022 2e20 2053  Census 2020".  S
-00037bf0: 6565 2074 6865 2063 6f6d 706c 6574 6520  ee the complete 
-00037c00: 6c69 7374 2061 7420 6874 7470 733a 2f2f  list at https://
-00037c10: 7469 6765 7277 6562 2e67 656f 2e63 656e  tigerweb.geo.cen
-00037c20: 7375 732e 676f 762f 7469 6765 7277 6562  sus.gov/tigerweb
-00037c30: 6d61 696e 2f54 4947 4552 7765 625f 776d  main/TIGERweb_wm
-00037c40: 732e 6874 6d6c 0d0a 2020 2020 2020 2020  s.html..        
-00037c50: 2020 2020 6c61 7965 7220 2873 7472 293a      layer (str):
-00037c60: 2054 6865 206c 6179 6572 206e 616d 6520   The layer name 
-00037c70: 746f 2061 6464 2074 6f20 7468 6520 6d61  to add to the ma
-00037c80: 702e 0d0a 2020 2020 2020 2020 2020 2020  p...            
-00037c90: 6365 6e73 7573 5f64 6963 7420 2864 6963  census_dict (dic
-00037ca0: 742c 206f 7074 696f 6e61 6c29 3a20 4120  t, optional): A 
-00037cb0: 6469 6374 696f 6e61 7279 2063 6f6e 7461  dictionary conta
-00037cc0: 696e 696e 6720 6365 6e73 7573 2064 6174  ining census dat
-00037cd0: 612e 2044 6566 6175 6c74 7320 746f 204e  a. Defaults to N
-00037ce0: 6f6e 652e 2049 7420 6361 6e20 6265 206f  one. It can be o
-00037cf0: 6274 6169 6e65 6420 6672 6f6d 2074 6865  btained from the
-00037d00: 2067 6574 5f63 656e 7375 735f 6469 6374   get_census_dict
-00037d10: 2829 2066 756e 6374 696f 6e2e 0d0a 2020  () function...  
-00037d20: 2020 2020 2020 2222 220d 0a0d 0a20 2020        """....   
-00037d30: 2020 2020 2074 7279 3a0d 0a20 2020 2020       try:..     
-00037d40: 2020 2020 2020 2069 6620 6365 6e73 7573         if census
-00037d50: 5f64 6963 7420 6973 204e 6f6e 653a 0d0a  _dict is None:..
-00037d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00037d70: 6365 6e73 7573 5f64 6963 7420 3d20 6765  census_dict = ge
-00037d80: 745f 6365 6e73 7573 5f64 6963 7428 290d  t_census_dict().
-00037d90: 0a0d 0a20 2020 2020 2020 2020 2020 2069  ...            i
-00037da0: 6620 776d 7320 6e6f 7420 696e 2063 656e  f wms not in cen
-00037db0: 7375 735f 6469 6374 2e6b 6579 7328 293a  sus_dict.keys():
-00037dc0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00037dd0: 2020 7261 6973 6520 5661 6c75 6545 7272    raise ValueErr
-00037de0: 6f72 280d 0a20 2020 2020 2020 2020 2020  or(..           
-00037df0: 2020 2020 2020 2020 2066 2254 6865 2070           f"The p
-00037e00: 726f 7669 6465 6420 574d 5320 6973 2069  rovided WMS is i
-00037e10: 6e76 616c 6964 2e20 4974 206d 7573 7420  nvalid. It must 
-00037e20: 6265 206f 6e65 206f 6620 7b63 656e 7375  be one of {censu
-00037e30: 735f 6469 6374 2e6b 6579 7328 297d 220d  s_dict.keys()}".
-00037e40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00037e50: 2029 0d0a 0d0a 2020 2020 2020 2020 2020   )....          
-00037e60: 2020 6c61 7965 7273 203d 2063 656e 7375    layers = censu
-00037e70: 735f 6469 6374 5b77 6d73 5d5b 226c 6179  s_dict[wms]["lay
-00037e80: 6572 7322 5d0d 0a20 2020 2020 2020 2020  ers"]..         
-00037e90: 2020 2069 6620 6c61 7965 7220 6e6f 7420     if layer not 
-00037ea0: 696e 206c 6179 6572 733a 0d0a 2020 2020  in layers:..    
-00037eb0: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-00037ec0: 6520 5661 6c75 6545 7272 6f72 280d 0a20  e ValueError(.. 
-00037ed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00037ee0: 2020 2066 2254 6865 206c 6179 6572 206e     f"The layer n
-00037ef0: 616d 6520 6973 206e 6f74 2076 616c 6964  ame is not valid
-00037f00: 2e20 4974 206d 7573 7420 6265 206f 6e65  . It must be one
-00037f10: 206f 6620 7b6c 6179 6572 737d 220d 0a20   of {layers}".. 
-00037f20: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-00037f30: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00037f40: 7572 6c20 3d20 6365 6e73 7573 5f64 6963  url = census_dic
-00037f50: 745b 776d 735d 5b22 7572 6c22 5d0d 0a20  t[wms]["url"].. 
-00037f60: 2020 2020 2020 2020 2020 2069 6620 226e             if "n
-00037f70: 616d 6522 206e 6f74 2069 6e20 6b77 6172  ame" not in kwar
-00037f80: 6773 3a0d 0a20 2020 2020 2020 2020 2020  gs:..           
-00037f90: 2020 2020 206b 7761 7267 735b 226e 616d       kwargs["nam
-00037fa0: 6522 5d20 3d20 6c61 7965 720d 0a20 2020  e"] = layer..   
-00037fb0: 2020 2020 2020 2020 2069 6620 2261 7474           if "att
-00037fc0: 7269 6275 7469 6f6e 2220 6e6f 7420 696e  ribution" not in
-00037fd0: 206b 7761 7267 733a 0d0a 2020 2020 2020   kwargs:..      
-00037fe0: 2020 2020 2020 2020 2020 6b77 6172 6773            kwargs
-00037ff0: 5b22 6174 7472 6962 7574 696f 6e22 5d20  ["attribution"] 
-00038000: 3d20 2255 2e53 2e20 4365 6e73 7573 2042  = "U.S. Census B
-00038010: 7572 6561 7522 0d0a 2020 2020 2020 2020  ureau"..        
-00038020: 2020 2020 6966 2022 666f 726d 6174 2220      if "format" 
-00038030: 6e6f 7420 696e 206b 7761 7267 733a 0d0a  not in kwargs:..
-00038040: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00038050: 6b77 6172 6773 5b22 666f 726d 6174 225d  kwargs["format"]
-00038060: 203d 2022 696d 6167 652f 706e 6722 0d0a   = "image/png"..
-00038070: 2020 2020 2020 2020 2020 2020 6966 2022              if "
-00038080: 7472 616e 7370 6172 656e 7422 206e 6f74  transparent" not
-00038090: 2069 6e20 6b77 6172 6773 3a0d 0a20 2020   in kwargs:..   
-000380a0: 2020 2020 2020 2020 2020 2020 206b 7761               kwa
-000380b0: 7267 735b 2274 7261 6e73 7061 7265 6e74  rgs["transparent
-000380c0: 225d 203d 2054 7275 650d 0a0d 0a20 2020  "] = True....   
-000380d0: 2020 2020 2020 2020 2073 656c 662e 6164           self.ad
-000380e0: 645f 776d 735f 6c61 7965 7228 7572 6c2c  d_wms_layer(url,
-000380f0: 206c 6179 6572 2c20 2a2a 6b77 6172 6773   layer, **kwargs
-00038100: 290d 0a0d 0a20 2020 2020 2020 2065 7863  )....        exc
-00038110: 6570 7420 4578 6365 7074 696f 6e20 6173  ept Exception as
-00038120: 2065 3a0d 0a20 2020 2020 2020 2020 2020   e:..           
-00038130: 2072 6169 7365 2045 7863 6570 7469 6f6e   raise Exception
-00038140: 2865 290d 0a0d 0a20 2020 2064 6566 2061  (e)....    def a
-00038150: 6464 5f78 797a 5f73 6572 7669 6365 2873  dd_xyz_service(s
-00038160: 656c 662c 2070 726f 7669 6465 722c 202a  elf, provider, *
-00038170: 2a6b 7761 7267 7329 3a0d 0a20 2020 2020  *kwargs):..     
-00038180: 2020 2022 2222 4164 6420 6120 5859 5a20     """Add a XYZ 
-00038190: 7469 6c65 206c 6179 6572 2074 6f20 7468  tile layer to th
-000381a0: 6520 6d61 702e 0d0a 0d0a 2020 2020 2020  e map.....      
-000381b0: 2020 4172 6773 3a0d 0a20 2020 2020 2020    Args:..       
-000381c0: 2020 2020 2070 726f 7669 6465 7220 2873       provider (s
-000381d0: 7472 293a 2041 2074 696c 6520 6c61 7965  tr): A tile laye
-000381e0: 7220 6e61 6d65 2073 7461 7274 7320 7769  r name starts wi
-000381f0: 7468 2078 797a 206f 7220 716d 732e 2046  th xyz or qms. F
-00038200: 6f72 2065 7861 6d70 6c65 2c20 7879 7a2e  or example, xyz.
-00038210: 4f70 656e 546f 706f 4d61 702c 0d0a 0d0a  OpenTopoMap,....
-00038220: 2020 2020 2020 2020 5261 6973 6573 3a0d          Raises:.
-00038230: 0a20 2020 2020 2020 2020 2020 2056 616c  .            Val
-00038240: 7565 4572 726f 723a 2054 6865 2070 726f  ueError: The pro
-00038250: 7669 6465 7220 6973 206e 6f74 2076 616c  vider is not val
-00038260: 6964 2e20 4974 206d 7573 7420 7374 6172  id. It must star
-00038270: 7420 7769 7468 2078 797a 206f 7220 716d  t with xyz or qm
-00038280: 732e 0d0a 2020 2020 2020 2020 2222 220d  s...        """.
-00038290: 0a20 2020 2020 2020 2069 6d70 6f72 7420  .        import 
-000382a0: 7879 7a73 6572 7669 6365 732e 7072 6f76  xyzservices.prov
-000382b0: 6964 6572 7320 6173 2078 797a 0d0a 2020  iders as xyz..  
-000382c0: 2020 2020 2020 6672 6f6d 2078 797a 7365        from xyzse
-000382d0: 7276 6963 6573 2069 6d70 6f72 7420 5469  rvices import Ti
-000382e0: 6c65 5072 6f76 6964 6572 0d0a 0d0a 2020  leProvider....  
-000382f0: 2020 2020 2020 6966 2070 726f 7669 6465        if provide
-00038300: 722e 7374 6172 7473 7769 7468 2822 7879  r.startswith("xy
-00038310: 7a22 293a 0d0a 2020 2020 2020 2020 2020  z"):..          
-00038320: 2020 6e61 6d65 203d 2070 726f 7669 6465    name = provide
-00038330: 725b 343a 5d0d 0a20 2020 2020 2020 2020  r[4:]..         
-00038340: 2020 2078 797a 5f70 726f 7669 6465 7220     xyz_provider 
-00038350: 3d20 7879 7a2e 666c 6174 7465 6e28 295b  = xyz.flatten()[
-00038360: 6e61 6d65 5d0d 0a20 2020 2020 2020 2020  name]..         
-00038370: 2020 2075 726c 203d 2078 797a 5f70 726f     url = xyz_pro
-00038380: 7669 6465 722e 6275 696c 645f 7572 6c28  vider.build_url(
-00038390: 290d 0a20 2020 2020 2020 2020 2020 2061  )..            a
-000383a0: 7474 7269 6275 7469 6f6e 203d 2078 797a  ttribution = xyz
-000383b0: 5f70 726f 7669 6465 722e 6174 7472 6962  _provider.attrib
-000383c0: 7574 696f 6e0d 0a20 2020 2020 2020 2020  ution..         
-000383d0: 2020 2069 6620 6174 7472 6962 7574 696f     if attributio
-000383e0: 6e2e 7374 7269 7028 2920 3d3d 2022 223a  n.strip() == "":
-000383f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00038400: 2020 6174 7472 6962 7574 696f 6e20 3d20    attribution = 
-00038410: 2220 220d 0a20 2020 2020 2020 2020 2020  " "..           
-00038420: 2073 656c 662e 6164 645f 7469 6c65 5f6c   self.add_tile_l
-00038430: 6179 6572 2875 726c 2c20 6e61 6d65 2c20  ayer(url, name, 
-00038440: 6174 7472 6962 7574 696f 6e29 0d0a 2020  attribution)..  
-00038450: 2020 2020 2020 656c 6966 2070 726f 7669        elif provi
-00038460: 6465 722e 7374 6172 7473 7769 7468 2822  der.startswith("
-00038470: 716d 7322 293a 0d0a 2020 2020 2020 2020  qms"):..        
-00038480: 2020 2020 6e61 6d65 203d 2070 726f 7669      name = provi
-00038490: 6465 725b 343a 5d0d 0a20 2020 2020 2020  der[4:]..       
-000384a0: 2020 2020 2071 6d73 5f70 726f 7669 6465       qms_provide
-000384b0: 7220 3d20 5469 6c65 5072 6f76 6964 6572  r = TileProvider
-000384c0: 2e66 726f 6d5f 716d 7328 6e61 6d65 290d  .from_qms(name).
-000384d0: 0a20 2020 2020 2020 2020 2020 2075 726c  .            url
-000384e0: 203d 2071 6d73 5f70 726f 7669 6465 722e   = qms_provider.
-000384f0: 6275 696c 645f 7572 6c28 290d 0a20 2020  build_url()..   
-00038500: 2020 2020 2020 2020 2061 7474 7269 6275           attribu
-00038510: 7469 6f6e 203d 2071 6d73 5f70 726f 7669  tion = qms_provi
-00038520: 6465 722e 6174 7472 6962 7574 696f 6e0d  der.attribution.
-00038530: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00038540: 6174 7472 6962 7574 696f 6e2e 7374 7269  attribution.stri
-00038550: 7028 2920 3d3d 2022 223a 0d0a 2020 2020  p() == "":..    
-00038560: 2020 2020 2020 2020 2020 2020 6174 7472              attr
-00038570: 6962 7574 696f 6e20 3d20 2220 220d 0a20  ibution = " ".. 
-00038580: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00038590: 6164 645f 7469 6c65 5f6c 6179 6572 2875  add_tile_layer(u
-000385a0: 726c 2c20 6e61 6d65 2c20 6174 7472 6962  rl, name, attrib
-000385b0: 7574 696f 6e29 0d0a 2020 2020 2020 2020  ution)..        
-000385c0: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
-000385d0: 2020 2072 6169 7365 2056 616c 7565 4572     raise ValueEr
-000385e0: 726f 7228 0d0a 2020 2020 2020 2020 2020  ror(..          
-000385f0: 2020 2020 2020 6622 5468 6520 7072 6f76        f"The prov
-00038600: 6964 6572 207b 7072 6f76 6964 6572 7d20  ider {provider} 
-00038610: 6973 206e 6f74 2076 616c 6964 2e20 4974  is not valid. It
-00038620: 206d 7573 7420 7374 6172 7420 7769 7468   must start with
-00038630: 2078 797a 206f 7220 716d 732e 220d 0a20   xyz or qms.".. 
-00038640: 2020 2020 2020 2020 2020 2029 0d0a 0d0a             )....
-00038650: 0d0a 2320 5468 6520 6675 6e63 7469 6f6e  ..# The function
-00038660: 7320 6265 6c6f 7720 6172 6520 6f75 7473  s below are outs
-00038670: 6964 6520 7468 6520 4d61 7020 636c 6173  ide the Map clas
-00038680: 732e 0d0a 0d0a 0d0a 6465 6620 6565 5f74  s.......def ee_t
-00038690: 696c 655f 6c61 7965 7228 0d0a 2020 2020  ile_layer(..    
-000386a0: 6565 5f6f 626a 6563 742c 2076 6973 5f70  ee_object, vis_p
-000386b0: 6172 616d 733d 7b7d 2c20 6e61 6d65 3d22  arams={}, name="
-000386c0: 4c61 7965 7220 756e 7469 746c 6564 222c  Layer untitled",
-000386d0: 2073 686f 776e 3d54 7275 652c 206f 7061   shown=True, opa
-000386e0: 6369 7479 3d31 2e30 0d0a 293a 0d0a 2020  city=1.0..):..  
-000386f0: 2020 2222 2243 6f6e 7665 7274 7320 616e    """Converts an
-00038700: 6420 4561 7274 6820 456e 6769 6e65 206c  d Earth Engine l
-00038710: 6179 6572 2074 6f20 6970 796c 6561 666c  ayer to ipyleafl
-00038720: 6574 2054 696c 654c 6179 6572 2e0d 0a0d  et TileLayer....
-00038730: 0a20 2020 2041 7267 733a 0d0a 2020 2020  .    Args:..    
-00038740: 2020 2020 6565 5f6f 626a 6563 7420 2843      ee_object (C
-00038750: 6f6c 6c65 6374 696f 6e7c 4665 6174 7572  ollection|Featur
-00038760: 657c 496d 6167 657c 4d61 7049 6429 3a20  e|Image|MapId): 
-00038770: 5468 6520 6f62 6a65 6374 2074 6f20 6164  The object to ad
-00038780: 6420 746f 2074 6865 206d 6170 2e0d 0a20  d to the map... 
-00038790: 2020 2020 2020 2076 6973 5f70 6172 616d         vis_param
-000387a0: 7320 2864 6963 742c 206f 7074 696f 6e61  s (dict, optiona
-000387b0: 6c29 3a20 5468 6520 7669 7375 616c 697a  l): The visualiz
-000387c0: 6174 696f 6e20 7061 7261 6d65 7465 7273  ation parameters
-000387d0: 2e20 4465 6661 756c 7473 2074 6f20 7b7d  . Defaults to {}
-000387e0: 2e0d 0a20 2020 2020 2020 206e 616d 6520  ...        name 
-000387f0: 2873 7472 2c20 6f70 7469 6f6e 616c 293a  (str, optional):
-00038800: 2054 6865 206e 616d 6520 6f66 2074 6865   The name of the
-00038810: 206c 6179 6572 2e20 4465 6661 756c 7473   layer. Defaults
-00038820: 2074 6f20 274c 6179 6572 2075 6e74 6974   to 'Layer untit
-00038830: 6c65 6427 2e0d 0a20 2020 2020 2020 2073  led'...        s
-00038840: 686f 776e 2028 626f 6f6c 2c20 6f70 7469  hown (bool, opti
-00038850: 6f6e 616c 293a 2041 2066 6c61 6720 696e  onal): A flag in
-00038860: 6469 6361 7469 6e67 2077 6865 7468 6572  dicating whether
-00038870: 2074 6865 206c 6179 6572 2073 686f 756c   the layer shoul
-00038880: 6420 6265 206f 6e20 6279 2064 6566 6175  d be on by defau
-00038890: 6c74 2e20 4465 6661 756c 7473 2074 6f20  lt. Defaults to 
-000388a0: 5472 7565 2e0d 0a20 2020 2020 2020 206f  True...        o
-000388b0: 7061 6369 7479 2028 666c 6f61 742c 206f  pacity (float, o
-000388c0: 7074 696f 6e61 6c29 3a20 5468 6520 6c61  ptional): The la
-000388d0: 7965 7227 7320 6f70 6163 6974 7920 7265  yer's opacity re
-000388e0: 7072 6573 656e 7465 6420 6173 2061 206e  presented as a n
-000388f0: 756d 6265 7220 6265 7477 6565 6e20 3020  umber between 0 
-00038900: 616e 6420 312e 2044 6566 6175 6c74 7320  and 1. Defaults 
-00038910: 746f 2031 2e0d 0a20 2020 2022 2222 0d0a  to 1...    """..
-00038920: 0d0a 2020 2020 696d 6167 6520 3d20 4e6f  ..    image = No
-00038930: 6e65 0d0a 0d0a 2020 2020 6966 2028 0d0a  ne....    if (..
-00038940: 2020 2020 2020 2020 6e6f 7420 6973 696e          not isin
-00038950: 7374 616e 6365 2865 655f 6f62 6a65 6374  stance(ee_object
-00038960: 2c20 6565 2e49 6d61 6765 290d 0a20 2020  , ee.Image)..   
-00038970: 2020 2020 2061 6e64 206e 6f74 2069 7369       and not isi
-00038980: 6e73 7461 6e63 6528 6565 5f6f 626a 6563  nstance(ee_objec
-00038990: 742c 2065 652e 496d 6167 6543 6f6c 6c65  t, ee.ImageColle
-000389a0: 6374 696f 6e29 0d0a 2020 2020 2020 2020  ction)..        
-000389b0: 616e 6420 6e6f 7420 6973 696e 7374 616e  and not isinstan
-000389c0: 6365 2865 655f 6f62 6a65 6374 2c20 6565  ce(ee_object, ee
-000389d0: 2e46 6561 7475 7265 436f 6c6c 6563 7469  .FeatureCollecti
-000389e0: 6f6e 290d 0a20 2020 2020 2020 2061 6e64  on)..        and
-000389f0: 206e 6f74 2069 7369 6e73 7461 6e63 6528   not isinstance(
-00038a00: 6565 5f6f 626a 6563 742c 2065 652e 4665  ee_object, ee.Fe
-00038a10: 6174 7572 6529 0d0a 2020 2020 2020 2020  ature)..        
-00038a20: 616e 6420 6e6f 7420 6973 696e 7374 616e  and not isinstan
-00038a30: 6365 2865 655f 6f62 6a65 6374 2c20 6565  ce(ee_object, ee
-00038a40: 2e47 656f 6d65 7472 7929 0d0a 2020 2020  .Geometry)..    
-00038a50: 293a 0d0a 2020 2020 2020 2020 6572 725f  ):..        err_
-00038a60: 7374 7220 3d20 225c 6e5c 6e54 6865 2069  str = "\n\nThe i
-00038a70: 6d61 6765 2061 7267 756d 656e 7420 696e  mage argument in
-00038a80: 2027 6164 644c 6179 6572 2720 6675 6e63   'addLayer' func
-00038a90: 7469 6f6e 206d 7573 7420 6265 2061 6e20  tion must be an 
-00038aa0: 696e 7374 616e 6365 206f 6620 6f6e 6520  instance of one 
-00038ab0: 6f66 2065 652e 496d 6167 652c 2065 652e  of ee.Image, ee.
-00038ac0: 4765 6f6d 6574 7279 2c20 6565 2e46 6561  Geometry, ee.Fea
-00038ad0: 7475 7265 206f 7220 6565 2e46 6561 7475  ture or ee.Featu
-00038ae0: 7265 436f 6c6c 6563 7469 6f6e 2e22 0d0a  reCollection."..
-00038af0: 2020 2020 2020 2020 7261 6973 6520 4174          raise At
-00038b00: 7472 6962 7574 6545 7272 6f72 2865 7272  tributeError(err
-00038b10: 5f73 7472 290d 0a0d 0a20 2020 2069 6620  _str)....    if 
-00038b20: 280d 0a20 2020 2020 2020 2069 7369 6e73  (..        isins
-00038b30: 7461 6e63 6528 6565 5f6f 626a 6563 742c  tance(ee_object,
-00038b40: 2065 652e 6765 6f6d 6574 7279 2e47 656f   ee.geometry.Geo
-00038b50: 6d65 7472 7929 0d0a 2020 2020 2020 2020  metry)..        
-00038b60: 6f72 2069 7369 6e73 7461 6e63 6528 6565  or isinstance(ee
-00038b70: 5f6f 626a 6563 742c 2065 652e 6665 6174  _object, ee.feat
-00038b80: 7572 652e 4665 6174 7572 6529 0d0a 2020  ure.Feature)..  
-00038b90: 2020 2020 2020 6f72 2069 7369 6e73 7461        or isinsta
-00038ba0: 6e63 6528 6565 5f6f 626a 6563 742c 2065  nce(ee_object, e
-00038bb0: 652e 6665 6174 7572 6563 6f6c 6c65 6374  e.featurecollect
-00038bc0: 696f 6e2e 4665 6174 7572 6543 6f6c 6c65  ion.FeatureColle
-00038bd0: 6374 696f 6e29 0d0a 2020 2020 293a 0d0a  ction)..    ):..
-00038be0: 2020 2020 2020 2020 6665 6174 7572 6573          features
-00038bf0: 203d 2065 652e 4665 6174 7572 6543 6f6c   = ee.FeatureCol
-00038c00: 6c65 6374 696f 6e28 6565 5f6f 626a 6563  lection(ee_objec
-00038c10: 7429 0d0a 0d0a 2020 2020 2020 2020 7769  t)....        wi
-00038c20: 6474 6820 3d20 320d 0a0d 0a20 2020 2020  dth = 2....     
-00038c30: 2020 2069 6620 2277 6964 7468 2220 696e     if "width" in
-00038c40: 2076 6973 5f70 6172 616d 733a 0d0a 2020   vis_params:..  
-00038c50: 2020 2020 2020 2020 2020 7769 6474 6820            width 
-00038c60: 3d20 7669 735f 7061 7261 6d73 5b22 7769  = vis_params["wi
-00038c70: 6474 6822 5d0d 0a0d 0a20 2020 2020 2020  dth"]....       
-00038c80: 2063 6f6c 6f72 203d 2022 3030 3030 3030   color = "000000
-00038c90: 220d 0a0d 0a20 2020 2020 2020 2069 6620  "....        if 
-00038ca0: 2263 6f6c 6f72 2220 696e 2076 6973 5f70  "color" in vis_p
-00038cb0: 6172 616d 733a 0d0a 2020 2020 2020 2020  arams:..        
-00038cc0: 2020 2020 636f 6c6f 7220 3d20 7669 735f      color = vis_
-00038cd0: 7061 7261 6d73 5b22 636f 6c6f 7222 5d0d  params["color"].
-00038ce0: 0a0d 0a20 2020 2020 2020 2069 6d61 6765  ...        image
-00038cf0: 5f66 696c 6c20 3d20 6665 6174 7572 6573  _fill = features
-00038d00: 2e73 7479 6c65 282a 2a7b 2266 696c 6c43  .style(**{"fillC
-00038d10: 6f6c 6f72 223a 2063 6f6c 6f72 7d29 2e75  olor": color}).u
-00038d20: 7064 6174 654d 6173 6b28 0d0a 2020 2020  pdateMask(..    
-00038d30: 2020 2020 2020 2020 6565 2e49 6d61 6765          ee.Image
-00038d40: 2e63 6f6e 7374 616e 7428 302e 3529 0d0a  .constant(0.5)..
-00038d50: 2020 2020 2020 2020 290d 0a20 2020 2020          )..     
-00038d60: 2020 2069 6d61 6765 5f6f 7574 6c69 6e65     image_outline
-00038d70: 203d 2066 6561 7475 7265 732e 7374 796c   = features.styl
-00038d80: 6528 0d0a 2020 2020 2020 2020 2020 2020  e(..            
-00038d90: 2a2a 7b22 636f 6c6f 7222 3a20 636f 6c6f  **{"color": colo
-00038da0: 722c 2022 6669 6c6c 436f 6c6f 7222 3a20  r, "fillColor": 
-00038db0: 2230 3030 3030 3030 3022 2c20 2277 6964  "00000000", "wid
-00038dc0: 7468 223a 2077 6964 7468 7d0d 0a20 2020  th": width}..   
-00038dd0: 2020 2020 2029 0d0a 0d0a 2020 2020 2020       )....      
-00038de0: 2020 696d 6167 6520 3d20 696d 6167 655f    image = image_
-00038df0: 6669 6c6c 2e62 6c65 6e64 2869 6d61 6765  fill.blend(image
-00038e00: 5f6f 7574 6c69 6e65 290d 0a20 2020 2065  _outline)..    e
-00038e10: 6c69 6620 6973 696e 7374 616e 6365 2865  lif isinstance(e
-00038e20: 655f 6f62 6a65 6374 2c20 6565 2e69 6d61  e_object, ee.ima
-00038e30: 6765 2e49 6d61 6765 293a 0d0a 2020 2020  ge.Image):..    
-00038e40: 2020 2020 696d 6167 6520 3d20 6565 5f6f      image = ee_o
-00038e50: 626a 6563 740d 0a20 2020 2065 6c69 6620  bject..    elif 
-00038e60: 6973 696e 7374 616e 6365 2865 655f 6f62  isinstance(ee_ob
-00038e70: 6a65 6374 2c20 6565 2e69 6d61 6765 636f  ject, ee.imageco
-00038e80: 6c6c 6563 7469 6f6e 2e49 6d61 6765 436f  llection.ImageCo
-00038e90: 6c6c 6563 7469 6f6e 293a 0d0a 2020 2020  llection):..    
-00038ea0: 2020 2020 696d 6167 6520 3d20 6565 5f6f      image = ee_o
-00038eb0: 626a 6563 742e 6d6f 7361 6963 2829 0d0a  bject.mosaic()..
-00038ec0: 0d0a 2020 2020 6d61 705f 6964 5f64 6963  ..    map_id_dic
-00038ed0: 7420 3d20 6565 2e49 6d61 6765 2869 6d61  t = ee.Image(ima
-00038ee0: 6765 292e 6765 744d 6170 4964 2876 6973  ge).getMapId(vis
-00038ef0: 5f70 6172 616d 7329 0d0a 2020 2020 7469  _params)..    ti
-00038f00: 6c65 5f6c 6179 6572 203d 2069 7079 6c65  le_layer = ipyle
-00038f10: 6166 6c65 742e 5469 6c65 4c61 7965 7228  aflet.TileLayer(
-00038f20: 0d0a 2020 2020 2020 2020 7572 6c3d 6d61  ..        url=ma
-00038f30: 705f 6964 5f64 6963 745b 2274 696c 655f  p_id_dict["tile_
-00038f40: 6665 7463 6865 7222 5d2e 7572 6c5f 666f  fetcher"].url_fo
-00038f50: 726d 6174 2c0d 0a20 2020 2020 2020 2061  rmat,..        a
-00038f60: 7474 7269 6275 7469 6f6e 3d22 476f 6f67  ttribution="Goog
-00038f70: 6c65 2045 6172 7468 2045 6e67 696e 6522  le Earth Engine"
-00038f80: 2c0d 0a20 2020 2020 2020 206e 616d 653d  ,..        name=
-00038f90: 6e61 6d65 2c0d 0a20 2020 2020 2020 206f  name,..        o
-00038fa0: 7061 6369 7479 3d6f 7061 6369 7479 2c0d  pacity=opacity,.
-00038fb0: 0a20 2020 2020 2020 2076 6973 6962 6c65  .        visible
-00038fc0: 3d73 686f 776e 2c0d 0a20 2020 2029 0d0a  =shown,..    )..
-00038fd0: 2020 2020 7265 7475 726e 2074 696c 655f      return tile_
-00038fe0: 6c61 7965 720d 0a0d 0a0d 0a64 6566 206c  layer......def l
-00038ff0: 696e 6b65 645f 6d61 7073 280d 0a20 2020  inked_maps(..   
-00039000: 2072 6f77 733d 322c 0d0a 2020 2020 636f   rows=2,..    co
-00039010: 6c73 3d32 2c0d 0a20 2020 2068 6569 6768  ls=2,..    heigh
-00039020: 743d 2234 3030 7078 222c 0d0a 2020 2020  t="400px",..    
-00039030: 6565 5f6f 626a 6563 7473 3d5b 5d2c 0d0a  ee_objects=[],..
-00039040: 2020 2020 7669 735f 7061 7261 6d73 3d5b      vis_params=[
-00039050: 5d2c 0d0a 2020 2020 6c61 6265 6c73 3d5b  ],..    labels=[
-00039060: 5d2c 0d0a 2020 2020 6c61 6265 6c5f 706f  ],..    label_po
-00039070: 7369 7469 6f6e 3d22 746f 7072 6967 6874  sition="topright
-00039080: 222c 0d0a 2020 2020 2a2a 6b77 6172 6773  ",..    **kwargs
-00039090: 2c0d 0a29 3a0d 0a20 2020 2022 2222 4372  ,..):..    """Cr
-000390a0: 6561 7465 206c 696e 6b65 6420 6d61 7073  eate linked maps
-000390b0: 206f 6620 4561 7274 6820 456e 6769 6e65   of Earth Engine
-000390c0: 2064 6174 6120 6c61 7965 7273 2e0d 0a0d   data layers....
-000390d0: 0a20 2020 2041 7267 733a 0d0a 2020 2020  .    Args:..    
-000390e0: 2020 2020 726f 7773 2028 696e 742c 206f      rows (int, o
-000390f0: 7074 696f 6e61 6c29 3a20 5468 6520 6e75  ptional): The nu
-00039100: 6d62 6572 206f 6620 726f 7773 206f 6620  mber of rows of 
-00039110: 6d61 7073 2074 6f20 6372 6561 7465 2e20  maps to create. 
-00039120: 4465 6661 756c 7473 2074 6f20 322e 0d0a  Defaults to 2...
-00039130: 2020 2020 2020 2020 636f 6c73 2028 696e          cols (in
-00039140: 742c 206f 7074 696f 6e61 6c29 3a20 5468  t, optional): Th
-00039150: 6520 6e75 6d62 6572 206f 6620 636f 6c75  e number of colu
-00039160: 6d6e 7320 6f66 206d 6170 7320 746f 2063  mns of maps to c
-00039170: 7265 6174 652e 2044 6566 6175 6c74 7320  reate. Defaults 
-00039180: 746f 2032 2e0d 0a20 2020 2020 2020 2068  to 2...        h
-00039190: 6569 6768 7420 2873 7472 2c20 6f70 7469  eight (str, opti
-000391a0: 6f6e 616c 293a 2054 6865 2068 6569 6768  onal): The heigh
-000391b0: 7420 6f66 2065 6163 6820 6d61 7020 696e  t of each map in
-000391c0: 2070 6978 656c 732e 2044 6566 6175 6c74   pixels. Default
-000391d0: 7320 746f 2022 3430 3070 7822 2e0d 0a20  s to "400px"... 
-000391e0: 2020 2020 2020 2065 655f 6f62 6a65 6374         ee_object
-000391f0: 7320 286c 6973 742c 206f 7074 696f 6e61  s (list, optiona
-00039200: 6c29 3a20 5468 6520 6c69 7374 206f 6620  l): The list of 
-00039210: 4561 7274 6820 456e 6769 6e65 206f 626a  Earth Engine obj
-00039220: 6563 7473 2074 6f20 7573 6520 666f 7220  ects to use for 
-00039230: 6561 6368 206d 6170 2e20 4465 6661 756c  each map. Defaul
-00039240: 7473 2074 6f20 5b5d 2e0d 0a20 2020 2020  ts to []...     
-00039250: 2020 2076 6973 5f70 6172 616d 7320 286c     vis_params (l
-00039260: 6973 742c 206f 7074 696f 6e61 6c29 3a20  ist, optional): 
-00039270: 5468 6520 6c69 7374 206f 6620 7669 7375  The list of visu
-00039280: 616c 697a 6174 696f 6e20 7061 7261 6d65  alization parame
-00039290: 7465 7273 2074 6f20 7573 6520 666f 7220  ters to use for 
-000392a0: 6561 6368 206d 6170 2e20 4465 6661 756c  each map. Defaul
-000392b0: 7473 2074 6f20 5b5d 2e0d 0a20 2020 2020  ts to []...     
-000392c0: 2020 206c 6162 656c 7320 286c 6973 742c     labels (list,
-000392d0: 206f 7074 696f 6e61 6c29 3a20 5468 6520   optional): The 
-000392e0: 6c69 7374 206f 6620 6c61 6265 6c73 2074  list of labels t
-000392f0: 6f20 7368 6f77 206f 6e20 7468 6520 6d61  o show on the ma
-00039300: 702e 2044 6566 6175 6c74 7320 746f 205b  p. Defaults to [
-00039310: 5d2e 0d0a 2020 2020 2020 2020 6c61 6265  ]...        labe
-00039320: 6c5f 706f 7369 7469 6f6e 2028 7374 722c  l_position (str,
-00039330: 206f 7074 696f 6e61 6c29 3a20 5468 6520   optional): The 
-00039340: 706f 7369 7469 6f6e 206f 6620 7468 6520  position of the 
-00039350: 6c61 6265 6c2c 2063 616e 2062 6520 5b74  label, can be [t
-00039360: 6f70 6c65 6674 2c20 746f 7072 6967 6874  opleft, topright
-00039370: 2c20 626f 7474 6f6d 6c65 6674 2c20 626f  , bottomleft, bo
-00039380: 7474 6f6d 7269 6768 745d 2e20 4465 6661  ttomright]. Defa
-00039390: 756c 7473 2074 6f20 2274 6f70 7269 6768  ults to "toprigh
-000393a0: 7422 2e0d 0a0d 0a20 2020 2052 6169 7365  t".....    Raise
-000393b0: 733a 0d0a 2020 2020 2020 2020 5661 6c75  s:..        Valu
-000393c0: 6545 7272 6f72 3a20 4966 2074 6865 206c  eError: If the l
-000393d0: 656e 6774 6820 6f66 2065 655f 6f62 6a65  ength of ee_obje
-000393e0: 6374 7320 6973 206e 6f74 2065 7175 616c  cts is not equal
-000393f0: 2074 6f20 726f 7773 2a63 6f6c 732e 0d0a   to rows*cols...
-00039400: 2020 2020 2020 2020 5661 6c75 6545 7272          ValueErr
-00039410: 6f72 3a20 4966 2074 6865 206c 656e 6774  or: If the lengt
-00039420: 6820 6f66 2076 6973 5f70 6172 616d 7320  h of vis_params 
-00039430: 6973 206e 6f74 2065 7175 616c 2074 6f20  is not equal to 
-00039440: 726f 7773 2a63 6f6c 732e 0d0a 2020 2020  rows*cols...    
-00039450: 2020 2020 5661 6c75 6545 7272 6f72 3a20      ValueError: 
-00039460: 4966 2074 6865 206c 656e 6774 6820 6f66  If the length of
-00039470: 206c 6162 656c 7320 6973 206e 6f74 2065   labels is not e
-00039480: 7175 616c 2074 6f20 726f 7773 2a63 6f6c  qual to rows*col
-00039490: 732e 0d0a 0d0a 2020 2020 5265 7475 726e  s.....    Return
-000394a0: 733a 0d0a 2020 2020 2020 2020 6970 7977  s:..        ipyw
-000394b0: 6964 6765 743a 2041 2047 7269 6473 7065  idget: A Gridspe
-000394c0: 634c 6179 6f75 7420 7769 6467 6574 2e0d  cLayout widget..
-000394d0: 0a20 2020 2022 2222 0d0a 2020 2020 6772  .    """..    gr
-000394e0: 6964 203d 2077 6964 6765 7473 2e47 7269  id = widgets.Gri
-000394f0: 6473 7065 634c 6179 6f75 7428 726f 7773  dspecLayout(rows
-00039500: 2c20 636f 6c73 2c20 6772 6964 5f67 6170  , cols, grid_gap
-00039510: 3d22 3070 7822 290d 0a20 2020 2063 6f75  ="0px")..    cou
-00039520: 6e74 203d 2072 6f77 7320 2a20 636f 6c73  nt = rows * cols
-00039530: 0d0a 0d0a 2020 2020 6d61 7073 203d 205b  ....    maps = [
-00039540: 5d0d 0a0d 0a20 2020 2069 6620 6c65 6e28  ]....    if len(
-00039550: 6565 5f6f 626a 6563 7473 2920 3e20 303a  ee_objects) > 0:
-00039560: 0d0a 2020 2020 2020 2020 6966 206c 656e  ..        if len
-00039570: 2865 655f 6f62 6a65 6374 7329 203d 3d20  (ee_objects) == 
-00039580: 313a 0d0a 2020 2020 2020 2020 2020 2020  1:..            
-00039590: 6565 5f6f 626a 6563 7473 203d 2065 655f  ee_objects = ee_
-000395a0: 6f62 6a65 6374 7320 2a20 636f 756e 740d  objects * count.
-000395b0: 0a20 2020 2020 2020 2065 6c69 6620 6c65  .        elif le
-000395c0: 6e28 6565 5f6f 626a 6563 7473 2920 3c20  n(ee_objects) < 
-000395d0: 636f 756e 743a 0d0a 2020 2020 2020 2020  count:..        
-000395e0: 2020 2020 7261 6973 6520 5661 6c75 6545      raise ValueE
-000395f0: 7272 6f72 2866 2254 6865 206c 656e 6774  rror(f"The lengt
-00039600: 6820 6f66 2065 655f 6f62 6a65 6374 7320  h of ee_objects 
-00039610: 6d75 7374 2062 6520 6571 7561 6c20 746f  must be equal to
-00039620: 207b 636f 756e 747d 2e22 290d 0a0d 0a20   {count}.").... 
-00039630: 2020 2069 6620 6c65 6e28 7669 735f 7061     if len(vis_pa
-00039640: 7261 6d73 2920 3e20 303a 0d0a 2020 2020  rams) > 0:..    
-00039650: 2020 2020 6966 206c 656e 2876 6973 5f70      if len(vis_p
-00039660: 6172 616d 7329 203d 3d20 313a 0d0a 2020  arams) == 1:..  
-00039670: 2020 2020 2020 2020 2020 7669 735f 7061            vis_pa
-00039680: 7261 6d73 203d 2076 6973 5f70 6172 616d  rams = vis_param
-00039690: 7320 2a20 636f 756e 740d 0a20 2020 2020  s * count..     
-000396a0: 2020 2065 6c69 6620 6c65 6e28 7669 735f     elif len(vis_
-000396b0: 7061 7261 6d73 2920 3c20 636f 756e 743a  params) < count:
-000396c0: 0d0a 2020 2020 2020 2020 2020 2020 7261  ..            ra
-000396d0: 6973 6520 5661 6c75 6545 7272 6f72 2866  ise ValueError(f
-000396e0: 2254 6865 206c 656e 6774 6820 6f66 2076  "The length of v
-000396f0: 6973 5f70 6172 616d 7320 6d75 7374 2062  is_params must b
-00039700: 6520 6571 7561 6c20 746f 207b 636f 756e  e equal to {coun
-00039710: 747d 2e22 290d 0a0d 0a20 2020 2069 6620  t}.")....    if 
-00039720: 6c65 6e28 6c61 6265 6c73 2920 3e20 303a  len(labels) > 0:
-00039730: 0d0a 2020 2020 2020 2020 6966 206c 656e  ..        if len
-00039740: 286c 6162 656c 7329 203d 3d20 313a 0d0a  (labels) == 1:..
-00039750: 2020 2020 2020 2020 2020 2020 6c61 6265              labe
-00039760: 6c73 203d 206c 6162 656c 7320 2a20 636f  ls = labels * co
-00039770: 756e 740d 0a20 2020 2020 2020 2065 6c69  unt..        eli
-00039780: 6620 6c65 6e28 6c61 6265 6c73 2920 3c20  f len(labels) < 
-00039790: 636f 756e 743a 0d0a 2020 2020 2020 2020  count:..        
-000397a0: 2020 2020 7261 6973 6520 5661 6c75 6545      raise ValueE
-000397b0: 7272 6f72 2866 2254 6865 206c 656e 6774  rror(f"The lengt
-000397c0: 6820 6f66 206c 6162 656c 7320 6d75 7374  h of labels must
-000397d0: 2062 6520 6571 7561 6c20 746f 207b 636f   be equal to {co
-000397e0: 756e 747d 2e22 290d 0a0d 0a20 2020 2066  unt}.")....    f
-000397f0: 6f72 2069 2069 6e20 7261 6e67 6528 726f  or i in range(ro
-00039800: 7773 293a 0d0a 2020 2020 2020 2020 666f  ws):..        fo
-00039810: 7220 6a20 696e 2072 616e 6765 2863 6f6c  r j in range(col
-00039820: 7329 3a0d 0a20 2020 2020 2020 2020 2020  s):..           
-00039830: 2069 6e64 6578 203d 2069 202a 2072 6f77   index = i * row
-00039840: 7320 2b20 6a0d 0a20 2020 2020 2020 2020  s + j..         
-00039850: 2020 206d 203d 204d 6170 280d 0a20 2020     m = Map(..   
-00039860: 2020 2020 2020 2020 2020 2020 2068 6569               hei
-00039870: 6768 743d 6865 6967 6874 2c0d 0a20 2020  ght=height,..   
-00039880: 2020 2020 2020 2020 2020 2020 206c 6974               lit
-00039890: 655f 6d6f 6465 3d54 7275 652c 0d0a 2020  e_mode=True,..  
-000398a0: 2020 2020 2020 2020 2020 2020 2020 6164                ad
-000398b0: 645f 676f 6f67 6c65 5f6d 6170 3d46 616c  d_google_map=Fal
-000398c0: 7365 2c0d 0a20 2020 2020 2020 2020 2020  se,..           
-000398d0: 2020 2020 206c 6179 6f75 743d 7769 6467       layout=widg
-000398e0: 6574 732e 4c61 796f 7574 286d 6172 6769  ets.Layout(margi
-000398f0: 6e3d 2230 7078 222c 2070 6164 6469 6e67  n="0px", padding
-00039900: 3d22 3070 7822 292c 0d0a 2020 2020 2020  ="0px"),..      
-00039910: 2020 2020 2020 2020 2020 2a2a 6b77 6172            **kwar
-00039920: 6773 2c0d 0a20 2020 2020 2020 2020 2020  gs,..           
-00039930: 2029 0d0a 0d0a 2020 2020 2020 2020 2020   )....          
-00039940: 2020 6966 206c 656e 2865 655f 6f62 6a65    if len(ee_obje
-00039950: 6374 7329 203e 2030 3a0d 0a20 2020 2020  cts) > 0:..     
-00039960: 2020 2020 2020 2020 2020 206d 2e61 6464             m.add
-00039970: 4c61 7965 7228 6565 5f6f 626a 6563 7473  Layer(ee_objects
-00039980: 5b69 6e64 6578 5d2c 2076 6973 5f70 6172  [index], vis_par
-00039990: 616d 735b 696e 6465 785d 2c20 6c61 6265  ams[index], labe
-000399a0: 6c73 5b69 6e64 6578 5d29 0d0a 0d0a 2020  ls[index])....  
-000399b0: 2020 2020 2020 2020 2020 6966 206c 656e            if len
-000399c0: 286c 6162 656c 7329 203e 2030 3a0d 0a20  (labels) > 0:.. 
-000399d0: 2020 2020 2020 2020 2020 2020 2020 206c                 l
-000399e0: 6162 656c 203d 2077 6964 6765 7473 2e4c  abel = widgets.L
-000399f0: 6162 656c 280d 0a20 2020 2020 2020 2020  abel(..         
-00039a00: 2020 2020 2020 2020 2020 206c 6162 656c             label
-00039a10: 735b 696e 6465 785d 2c20 6c61 796f 7574  s[index], layout
-00039a20: 3d77 6964 6765 7473 2e4c 6179 6f75 7428  =widgets.Layout(
-00039a30: 7061 6464 696e 673d 2230 7078 2035 7078  padding="0px 5px
-00039a40: 2030 7078 2035 7078 2229 0d0a 2020 2020   0px 5px")..    
-00039a50: 2020 2020 2020 2020 2020 2020 290d 0a20              ).. 
-00039a60: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-00039a70: 6f6e 7472 6f6c 203d 2069 7079 6c65 6166  ontrol = ipyleaf
-00039a80: 6c65 742e 5769 6467 6574 436f 6e74 726f  let.WidgetContro
-00039a90: 6c28 0d0a 2020 2020 2020 2020 2020 2020  l(..            
-00039aa0: 2020 2020 2020 2020 7769 6467 6574 3d6c          widget=l
-00039ab0: 6162 656c 2c20 706f 7369 7469 6f6e 3d6c  abel, position=l
-00039ac0: 6162 656c 5f70 6f73 6974 696f 6e0d 0a20  abel_position.. 
-00039ad0: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-00039ae0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00039af0: 2020 6d2e 6164 645f 636f 6e74 726f 6c28    m.add_control(
-00039b00: 636f 6e74 726f 6c29 0d0a 0d0a 2020 2020  control)....    
-00039b10: 2020 2020 2020 2020 6d61 7073 2e61 7070          maps.app
-00039b20: 656e 6428 6d29 0d0a 2020 2020 2020 2020  end(m)..        
-00039b30: 2020 2020 7769 6467 6574 732e 6a73 6c69      widgets.jsli
-00039b40: 6e6b 2828 6d61 7073 5b30 5d2c 2022 6365  nk((maps[0], "ce
-00039b50: 6e74 6572 2229 2c20 286d 2c20 2263 656e  nter"), (m, "cen
-00039b60: 7465 7222 2929 0d0a 2020 2020 2020 2020  ter"))..        
-00039b70: 2020 2020 7769 6467 6574 732e 6a73 6c69      widgets.jsli
-00039b80: 6e6b 2828 6d61 7073 5b30 5d2c 2022 7a6f  nk((maps[0], "zo
-00039b90: 6f6d 2229 2c20 286d 2c20 227a 6f6f 6d22  om"), (m, "zoom"
-00039ba0: 2929 0d0a 0d0a 2020 2020 2020 2020 2020  ))....          
-00039bb0: 2020 6f75 7470 7574 203d 2077 6964 6765    output = widge
-00039bc0: 7473 2e4f 7574 7075 7428 290d 0a20 2020  ts.Output()..   
-00039bd0: 2020 2020 2020 2020 2077 6974 6820 6f75           with ou
-00039be0: 7470 7574 3a0d 0a20 2020 2020 2020 2020  tput:..         
-00039bf0: 2020 2020 2020 2064 6973 706c 6179 286d         display(m
-00039c00: 290d 0a20 2020 2020 2020 2020 2020 2067  )..            g
-00039c10: 7269 645b 692c 206a 5d20 3d20 6f75 7470  rid[i, j] = outp
-00039c20: 7574 0d0a 0d0a 2020 2020 7265 7475 726e  ut....    return
-00039c30: 2067 7269 640d 0a0d 0a0d 0a64 6566 2074   grid......def t
-00039c40: 735f 696e 7370 6563 746f 7228 0d0a 2020  s_inspector(..  
-00039c50: 2020 6c61 7965 7273 5f64 6963 743d 4e6f    layers_dict=No
-00039c60: 6e65 2c0d 0a20 2020 206c 6566 745f 6e61  ne,..    left_na
-00039c70: 6d65 3d4e 6f6e 652c 0d0a 2020 2020 7269  me=None,..    ri
-00039c80: 6768 745f 6e61 6d65 3d4e 6f6e 652c 0d0a  ght_name=None,..
-00039c90: 2020 2020 7769 6474 683d 2231 3230 7078      width="120px
-00039ca0: 222c 0d0a 2020 2020 6365 6e74 6572 3d5b  ",..    center=[
-00039cb0: 3430 2c20 2d31 3030 5d2c 0d0a 2020 2020  40, -100],..    
-00039cc0: 7a6f 6f6d 3d34 2c0d 0a20 2020 202a 2a6b  zoom=4,..    **k
-00039cd0: 7761 7267 732c 0d0a 293a 0d0a 0d0a 2020  wargs,..):....  
-00039ce0: 2020 6164 645f 7a6f 6f6d 203d 2054 7275    add_zoom = Tru
-00039cf0: 650d 0a20 2020 2061 6464 5f66 756c 6c73  e..    add_fulls
-00039d00: 6372 6565 6e20 3d20 5472 7565 0d0a 0d0a  creen = True....
-00039d10: 2020 2020 6966 2022 6461 7461 5f63 7472      if "data_ctr
-00039d20: 6c22 206e 6f74 2069 6e20 6b77 6172 6773  l" not in kwargs
-00039d30: 3a0d 0a20 2020 2020 2020 206b 7761 7267  :..        kwarg
-00039d40: 735b 2264 6174 615f 6374 726c 225d 203d  s["data_ctrl"] =
-00039d50: 2046 616c 7365 0d0a 2020 2020 6966 2022   False..    if "
-00039d60: 746f 6f6c 6261 725f 6374 726c 2220 6e6f  toolbar_ctrl" no
-00039d70: 7420 696e 206b 7761 7267 733a 0d0a 2020  t in kwargs:..  
-00039d80: 2020 2020 2020 6b77 6172 6773 5b22 746f        kwargs["to
-00039d90: 6f6c 6261 725f 6374 726c 225d 203d 2046  olbar_ctrl"] = F
-00039da0: 616c 7365 0d0a 2020 2020 6966 2022 6472  alse..    if "dr
-00039db0: 6177 5f63 7472 6c22 206e 6f74 2069 6e20  aw_ctrl" not in 
-00039dc0: 6b77 6172 6773 3a0d 0a20 2020 2020 2020  kwargs:..       
-00039dd0: 206b 7761 7267 735b 2264 7261 775f 6374   kwargs["draw_ct
-00039de0: 726c 225d 203d 2046 616c 7365 0d0a 2020  rl"] = False..  
-00039df0: 2020 6966 2022 6d65 6173 7572 655f 6374    if "measure_ct
-00039e00: 726c 2220 6e6f 7420 696e 206b 7761 7267  rl" not in kwarg
-00039e10: 733a 0d0a 2020 2020 2020 2020 6b77 6172  s:..        kwar
-00039e20: 6773 5b22 6d65 6173 7572 655f 6374 726c  gs["measure_ctrl
-00039e30: 225d 203d 2046 616c 7365 0d0a 2020 2020  "] = False..    
-00039e40: 6966 2022 7a6f 6f6d 5f63 7472 6c22 206e  if "zoom_ctrl" n
-00039e50: 6f74 2069 6e20 6b77 6172 6773 3a0d 0a20  ot in kwargs:.. 
-00039e60: 2020 2020 2020 206b 7761 7267 735b 227a         kwargs["z
-00039e70: 6f6f 6d5f 6374 726c 225d 203d 2046 616c  oom_ctrl"] = Fal
-00039e80: 7365 0d0a 2020 2020 656c 7365 3a0d 0a20  se..    else:.. 
-00039e90: 2020 2020 2020 2061 6464 5f7a 6f6f 6d20         add_zoom 
-00039ea0: 3d20 6b77 6172 6773 5b22 7a6f 6f6d 5f63  = kwargs["zoom_c
-00039eb0: 7472 6c22 5d0d 0a20 2020 2069 6620 2266  trl"]..    if "f
-00039ec0: 756c 6c73 6372 6565 6e5f 6374 726c 2220  ullscreen_ctrl" 
-00039ed0: 6e6f 7420 696e 206b 7761 7267 733a 0d0a  not in kwargs:..
-00039ee0: 2020 2020 2020 2020 6b77 6172 6773 5b22          kwargs["
-00039ef0: 6675 6c6c 7363 7265 656e 5f63 7472 6c22  fullscreen_ctrl"
-00039f00: 5d20 3d20 4661 6c73 650d 0a20 2020 2065  ] = False..    e
-00039f10: 6c73 653a 0d0a 2020 2020 2020 2020 6164  lse:..        ad
-00039f20: 645f 6675 6c6c 7363 7265 656e 203d 206b  d_fullscreen = k
-00039f30: 7761 7267 735b 2266 756c 6c73 6372 6565  wargs["fullscree
-00039f40: 6e5f 6374 726c 225d 0d0a 0d0a 2020 2020  n_ctrl"]....    
-00039f50: 6966 206c 6179 6572 735f 6469 6374 2069  if layers_dict i
-00039f60: 7320 4e6f 6e65 3a0d 0a20 2020 2020 2020  s None:..       
-00039f70: 206c 6179 6572 735f 6469 6374 203d 207b   layers_dict = {
-00039f80: 7d0d 0a20 2020 2020 2020 206b 6579 7320  }..        keys 
-00039f90: 3d20 6469 6374 2862 6173 656d 6170 5f74  = dict(basemap_t
-00039fa0: 696c 6573 292e 6b65 7973 2829 0d0a 2020  iles).keys()..  
-00039fb0: 2020 2020 2020 666f 7220 6b65 7920 696e        for key in
-00039fc0: 206b 6579 733a 0d0a 2020 2020 2020 2020   keys:..        
-00039fd0: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-00039fe0: 6528 6261 7365 6d61 705f 7469 6c65 735b  e(basemap_tiles[
-00039ff0: 6b65 795d 2c20 6970 796c 6561 666c 6574  key], ipyleaflet
-0003a000: 2e57 4d53 4c61 7965 7229 3a0d 0a20 2020  .WMSLayer):..   
-0003a010: 2020 2020 2020 2020 2020 2020 2070 6173               pas
-0003a020: 730d 0a20 2020 2020 2020 2020 2020 2065  s..            e
-0003a030: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
-0003a040: 2020 2020 2020 6c61 7965 7273 5f64 6963        layers_dic
-0003a050: 745b 6b65 795d 203d 2062 6173 656d 6170  t[key] = basemap
-0003a060: 5f74 696c 6573 5b6b 6579 5d0d 0a0d 0a20  _tiles[key].... 
-0003a070: 2020 206b 6579 7320 3d20 6c69 7374 286c     keys = list(l
-0003a080: 6179 6572 735f 6469 6374 2e6b 6579 7328  ayers_dict.keys(
-0003a090: 2929 0d0a 2020 2020 6966 206c 6566 745f  ))..    if left_
-0003a0a0: 6e61 6d65 2069 7320 4e6f 6e65 3a0d 0a20  name is None:.. 
-0003a0b0: 2020 2020 2020 206c 6566 745f 6e61 6d65         left_name
-0003a0c0: 203d 206b 6579 735b 305d 0d0a 2020 2020   = keys[0]..    
-0003a0d0: 6966 2072 6967 6874 5f6e 616d 6520 6973  if right_name is
-0003a0e0: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
-0003a0f0: 7269 6768 745f 6e61 6d65 203d 206b 6579  right_name = key
-0003a100: 735b 2d31 5d0d 0a0d 0a20 2020 206c 6566  s[-1]....    lef
-0003a110: 745f 6c61 7965 7220 3d20 6c61 7965 7273  t_layer = layers
-0003a120: 5f64 6963 745b 6c65 6674 5f6e 616d 655d  _dict[left_name]
-0003a130: 0d0a 2020 2020 7269 6768 745f 6c61 7965  ..    right_laye
-0003a140: 7220 3d20 6c61 7965 7273 5f64 6963 745b  r = layers_dict[
-0003a150: 7269 6768 745f 6e61 6d65 5d0d 0a0d 0a20  right_name].... 
-0003a160: 2020 206d 203d 204d 6170 2863 656e 7465     m = Map(cente
-0003a170: 723d 6365 6e74 6572 2c20 7a6f 6f6d 3d7a  r=center, zoom=z
-0003a180: 6f6f 6d2c 2067 6f6f 676c 655f 6d61 703d  oom, google_map=
-0003a190: 4e6f 6e65 2c20 2a2a 6b77 6172 6773 290d  None, **kwargs).
-0003a1a0: 0a20 2020 2063 6f6e 7472 6f6c 203d 2069  .    control = i
-0003a1b0: 7079 6c65 6166 6c65 742e 5370 6c69 744d  pyleaflet.SplitM
-0003a1c0: 6170 436f 6e74 726f 6c28 6c65 6674 5f6c  apControl(left_l
-0003a1d0: 6179 6572 3d6c 6566 745f 6c61 7965 722c  ayer=left_layer,
-0003a1e0: 2072 6967 6874 5f6c 6179 6572 3d72 6967   right_layer=rig
-0003a1f0: 6874 5f6c 6179 6572 290d 0a20 2020 206d  ht_layer)..    m
-0003a200: 2e61 6464 5f63 6f6e 7472 6f6c 2863 6f6e  .add_control(con
-0003a210: 7472 6f6c 290d 0a0d 0a20 2020 206c 6566  trol)....    lef
-0003a220: 745f 6472 6f70 646f 776e 203d 2077 6964  t_dropdown = wid
-0003a230: 6765 7473 2e44 726f 7064 6f77 6e28 0d0a  gets.Dropdown(..
-0003a240: 2020 2020 2020 2020 6f70 7469 6f6e 733d          options=
-0003a250: 6b65 7973 2c20 7661 6c75 653d 6c65 6674  keys, value=left
-0003a260: 5f6e 616d 652c 206c 6179 6f75 743d 7769  _name, layout=wi
-0003a270: 6467 6574 732e 4c61 796f 7574 2877 6964  dgets.Layout(wid
-0003a280: 7468 3d77 6964 7468 290d 0a20 2020 2029  th=width)..    )
-0003a290: 0d0a 0d0a 2020 2020 6c65 6674 5f63 6f6e  ....    left_con
-0003a2a0: 7472 6f6c 203d 2069 7079 6c65 6166 6c65  trol = ipyleafle
-0003a2b0: 742e 5769 6467 6574 436f 6e74 726f 6c28  t.WidgetControl(
-0003a2c0: 7769 6467 6574 3d6c 6566 745f 6472 6f70  widget=left_drop
-0003a2d0: 646f 776e 2c20 706f 7369 7469 6f6e 3d22  down, position="
-0003a2e0: 746f 706c 6566 7422 290d 0a20 2020 206d  topleft")..    m
-0003a2f0: 2e61 6464 5f63 6f6e 7472 6f6c 286c 6566  .add_control(lef
-0003a300: 745f 636f 6e74 726f 6c29 0d0a 0d0a 2020  t_control)....  
-0003a310: 2020 7269 6768 745f 6472 6f70 646f 776e    right_dropdown
-0003a320: 203d 2077 6964 6765 7473 2e44 726f 7064   = widgets.Dropd
-0003a330: 6f77 6e28 0d0a 2020 2020 2020 2020 6f70  own(..        op
-0003a340: 7469 6f6e 733d 6b65 7973 2c20 7661 6c75  tions=keys, valu
-0003a350: 653d 7269 6768 745f 6e61 6d65 2c20 6c61  e=right_name, la
-0003a360: 796f 7574 3d77 6964 6765 7473 2e4c 6179  yout=widgets.Lay
-0003a370: 6f75 7428 7769 6474 683d 7769 6474 6829  out(width=width)
-0003a380: 0d0a 2020 2020 290d 0a0d 0a20 2020 2072  ..    )....    r
-0003a390: 6967 6874 5f63 6f6e 7472 6f6c 203d 2069  ight_control = i
-0003a3a0: 7079 6c65 6166 6c65 742e 5769 6467 6574  pyleaflet.Widget
-0003a3b0: 436f 6e74 726f 6c28 7769 6467 6574 3d72  Control(widget=r
-0003a3c0: 6967 6874 5f64 726f 7064 6f77 6e2c 2070  ight_dropdown, p
-0003a3d0: 6f73 6974 696f 6e3d 2274 6f70 7269 6768  osition="toprigh
-0003a3e0: 7422 290d 0a20 2020 206d 2e61 6464 5f63  t")..    m.add_c
-0003a3f0: 6f6e 7472 6f6c 2872 6967 6874 5f63 6f6e  ontrol(right_con
-0003a400: 7472 6f6c 290d 0a0d 0a20 2020 2069 6620  trol)....    if 
-0003a410: 6164 645f 7a6f 6f6d 3a0d 0a20 2020 2020  add_zoom:..     
-0003a420: 2020 206d 2e61 6464 5f63 6f6e 7472 6f6c     m.add_control
-0003a430: 2869 7079 6c65 6166 6c65 742e 5a6f 6f6d  (ipyleaflet.Zoom
-0003a440: 436f 6e74 726f 6c28 2929 0d0a 2020 2020  Control())..    
-0003a450: 6966 2061 6464 5f66 756c 6c73 6372 6565  if add_fullscree
-0003a460: 6e3a 0d0a 2020 2020 2020 2020 6d2e 6164  n:..        m.ad
-0003a470: 645f 636f 6e74 726f 6c28 6970 796c 6561  d_control(ipylea
-0003a480: 666c 6574 2e46 756c 6c53 6372 6565 6e43  flet.FullScreenC
-0003a490: 6f6e 7472 6f6c 2829 290d 0a0d 0a20 2020  ontrol())....   
-0003a4a0: 2073 706c 6974 5f63 6f6e 7472 6f6c 203d   split_control =
-0003a4b0: 204e 6f6e 650d 0a20 2020 2066 6f72 2063   None..    for c
-0003a4c0: 7472 6c20 696e 206d 2e63 6f6e 7472 6f6c  trl in m.control
-0003a4d0: 733a 0d0a 2020 2020 2020 2020 6966 2069  s:..        if i
-0003a4e0: 7369 6e73 7461 6e63 6528 6374 726c 2c20  sinstance(ctrl, 
-0003a4f0: 6970 796c 6561 666c 6574 2e53 706c 6974  ipyleaflet.Split
-0003a500: 4d61 7043 6f6e 7472 6f6c 293a 0d0a 2020  MapControl):..  
-0003a510: 2020 2020 2020 2020 2020 7370 6c69 745f            split_
-0003a520: 636f 6e74 726f 6c20 3d20 6374 726c 0d0a  control = ctrl..
-0003a530: 2020 2020 2020 2020 2020 2020 6272 6561              brea
-0003a540: 6b0d 0a0d 0a20 2020 2064 6566 206c 6566  k....    def lef
-0003a550: 745f 6368 616e 6765 2863 6861 6e67 6529  t_change(change)
-0003a560: 3a0d 0a20 2020 2020 2020 2073 706c 6974  :..        split
-0003a570: 5f63 6f6e 7472 6f6c 2e6c 6566 745f 6c61  _control.left_la
-0003a580: 7965 722e 7572 6c20 3d20 6c61 7965 7273  yer.url = layers
-0003a590: 5f64 6963 745b 6c65 6674 5f64 726f 7064  _dict[left_dropd
-0003a5a0: 6f77 6e2e 7661 6c75 655d 2e75 726c 0d0a  own.value].url..
-0003a5b0: 0d0a 2020 2020 6c65 6674 5f64 726f 7064  ..    left_dropd
-0003a5c0: 6f77 6e2e 6f62 7365 7276 6528 6c65 6674  own.observe(left
-0003a5d0: 5f63 6861 6e67 652c 2022 7661 6c75 6522  _change, "value"
-0003a5e0: 290d 0a0d 0a20 2020 2064 6566 2072 6967  )....    def rig
-0003a5f0: 6874 5f63 6861 6e67 6528 6368 616e 6765  ht_change(change
-0003a600: 293a 0d0a 2020 2020 2020 2020 7370 6c69  ):..        spli
-0003a610: 745f 636f 6e74 726f 6c2e 7269 6768 745f  t_control.right_
-0003a620: 6c61 7965 722e 7572 6c20 3d20 6c61 7965  layer.url = laye
-0003a630: 7273 5f64 6963 745b 7269 6768 745f 6472  rs_dict[right_dr
-0003a640: 6f70 646f 776e 2e76 616c 7565 5d2e 7572  opdown.value].ur
-0003a650: 6c0d 0a0d 0a20 2020 2072 6967 6874 5f64  l....    right_d
-0003a660: 726f 7064 6f77 6e2e 6f62 7365 7276 6528  ropdown.observe(
-0003a670: 7269 6768 745f 6368 616e 6765 2c20 2276  right_change, "v
-0003a680: 616c 7565 2229 0d0a 0d0a 2020 2020 7265  alue")....    re
-0003a690: 7475 726e 206d 0d0a                      turn m..
+00035c90: 6169 7365 2046 696c 654e 6f74 466f 756e  aise FileNotFoun
+00035ca0: 6445 7272 6f72 2822 5468 6520 7370 6563  dError("The spec
+00035cb0: 6966 6965 6420 696e 7075 7420 6373 7620  ified input csv 
+00035cc0: 646f 6573 206e 6f74 2065 7869 7374 2e22  does not exist."
+00035cd0: 290d 0a0d 0a20 2020 2020 2020 2064 6620  )....        df 
+00035ce0: 3d20 7064 2e72 6561 645f 6373 7628 696e  = pd.read_csv(in
+00035cf0: 5f63 7376 290d 0a20 2020 2020 2020 2063  _csv)..        c
+00035d00: 6f6c 5f6e 616d 6573 203d 2064 662e 636f  ol_names = df.co
+00035d10: 6c75 6d6e 732e 7661 6c75 6573 2e74 6f6c  lumns.values.tol
+00035d20: 6973 7428 290d 0a0d 0a20 2020 2020 2020  ist()....       
+00035d30: 2069 6620 7820 6e6f 7420 696e 2063 6f6c   if x not in col
+00035d40: 5f6e 616d 6573 3a0d 0a20 2020 2020 2020  _names:..       
+00035d50: 2020 2020 2072 6169 7365 2056 616c 7565       raise Value
+00035d60: 4572 726f 7228 6622 7820 6d75 7374 2062  Error(f"x must b
+00035d70: 6520 6f6e 6520 6f66 2074 6865 2066 6f6c  e one of the fol
+00035d80: 6c6f 7769 6e67 3a20 7b27 2c20 272e 6a6f  lowing: {', '.jo
+00035d90: 696e 2863 6f6c 5f6e 616d 6573 297d 2229  in(col_names)}")
+00035da0: 0d0a 0d0a 2020 2020 2020 2020 6966 2079  ....        if y
+00035db0: 206e 6f74 2069 6e20 636f 6c5f 6e61 6d65   not in col_name
+00035dc0: 733a 0d0a 2020 2020 2020 2020 2020 2020  s:..            
+00035dd0: 7261 6973 6520 5661 6c75 6545 7272 6f72  raise ValueError
+00035de0: 2866 2279 206d 7573 7420 6265 206f 6e65  (f"y must be one
+00035df0: 206f 6620 7468 6520 666f 6c6c 6f77 696e   of the followin
+00035e00: 673a 207b 272c 2027 2e6a 6f69 6e28 636f  g: {', '.join(co
+00035e10: 6c5f 6e61 6d65 7329 7d22 290d 0a0d 0a20  l_names)}").... 
+00035e20: 2020 2020 2020 2069 6620 6c61 6265 6c20         if label 
+00035e30: 6973 206e 6f74 204e 6f6e 6520 616e 6420  is not None and 
+00035e40: 286c 6162 656c 206e 6f74 2069 6e20 636f  (label not in co
+00035e50: 6c5f 6e61 6d65 7329 3a0d 0a20 2020 2020  l_names):..     
+00035e60: 2020 2020 2020 2072 6169 7365 2056 616c         raise Val
+00035e70: 7565 4572 726f 7228 0d0a 2020 2020 2020  ueError(..      
+00035e80: 2020 2020 2020 2020 2020 6622 6c61 6265            f"labe
+00035e90: 6c20 6d75 7374 2062 6520 6f6e 6520 6f66  l must be one of
+00035ea0: 2074 6865 2066 6f6c 6c6f 7769 6e67 3a20   the following: 
+00035eb0: 7b27 2c20 272e 6a6f 696e 2863 6f6c 5f6e  {', '.join(col_n
+00035ec0: 616d 6573 297d 220d 0a20 2020 2020 2020  ames)}"..       
+00035ed0: 2020 2020 2029 0d0a 0d0a 2020 2020 2020       )....      
+00035ee0: 2020 7365 6c66 2e64 6566 6175 6c74 5f73    self.default_s
+00035ef0: 7479 6c65 203d 207b 2263 7572 736f 7222  tyle = {"cursor"
+00035f00: 3a20 2277 6169 7422 7d0d 0a0d 0a20 2020  : "wait"}....   
+00035f10: 2020 2020 2069 6620 746f 5f65 653a 0d0a       if to_ee:..
+00035f20: 2020 2020 2020 2020 2020 2020 6663 203d              fc =
+00035f30: 2063 7376 5f74 6f5f 6565 2869 6e5f 6373   csv_to_ee(in_cs
+00035f40: 762c 206c 6174 6974 7564 653d 792c 206c  v, latitude=y, l
+00035f50: 6f6e 6769 7475 6465 3d78 290d 0a20 2020  ongitude=x)..   
+00035f60: 2020 2020 2020 2020 2073 656c 662e 6164           self.ad
+00035f70: 644c 6179 6572 2866 632c 207b 7d2c 206c  dLayer(fc, {}, l
+00035f80: 6179 6572 5f6e 616d 6529 0d0a 0d0a 2020  ayer_name)....  
+00035f90: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
+00035fa0: 2020 2020 2020 2020 2070 6f69 6e74 7320           points 
+00035fb0: 3d20 6c69 7374 287a 6970 2864 665b 795d  = list(zip(df[y]
+00035fc0: 2c20 6466 5b78 5d29 290d 0a0d 0a20 2020  , df[x]))....   
+00035fd0: 2020 2020 2020 2020 2069 6620 6c61 6265           if labe
+00035fe0: 6c20 6973 206e 6f74 204e 6f6e 653a 0d0a  l is not None:..
+00035ff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00036000: 6c61 6265 6c73 203d 2064 665b 6c61 6265  labels = df[labe
+00036010: 6c5d 0d0a 2020 2020 2020 2020 2020 2020  l]..            
+00036020: 2020 2020 6d61 726b 6572 7320 3d20 5b0d      markers = [.
+00036030: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00036040: 2020 2020 2069 7079 6c65 6166 6c65 742e       ipyleaflet.
+00036050: 4d61 726b 6572 280d 0a20 2020 2020 2020  Marker(..       
+00036060: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00036070: 206c 6f63 6174 696f 6e3d 706f 696e 742c   location=point,
+00036080: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00036090: 2020 2020 2020 2020 2020 6472 6167 6761            dragga
+000360a0: 626c 653d 4661 6c73 652c 0d0a 2020 2020  ble=False,..    
+000360b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000360c0: 2020 2020 706f 7075 703d 7769 6467 6574      popup=widget
+000360d0: 732e 4854 4d4c 2873 7472 286c 6162 656c  s.HTML(str(label
+000360e0: 735b 696e 6465 785d 2929 2c0d 0a20 2020  s[index])),..   
+000360f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00036100: 2029 0d0a 2020 2020 2020 2020 2020 2020   )..            
+00036110: 2020 2020 2020 2020 666f 7220 696e 6465          for inde
+00036120: 782c 2070 6f69 6e74 2069 6e20 656e 756d  x, point in enum
+00036130: 6572 6174 6528 706f 696e 7473 290d 0a20  erate(points).. 
+00036140: 2020 2020 2020 2020 2020 2020 2020 205d                 ]
+00036150: 0d0a 2020 2020 2020 2020 2020 2020 656c  ..            el
+00036160: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
+00036170: 2020 2020 206d 6172 6b65 7273 203d 205b       markers = [
+00036180: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00036190: 2020 2020 2020 6970 796c 6561 666c 6574        ipyleaflet
+000361a0: 2e4d 6172 6b65 7228 6c6f 6361 7469 6f6e  .Marker(location
+000361b0: 3d70 6f69 6e74 2c20 6472 6167 6761 626c  =point, draggabl
+000361c0: 653d 4661 6c73 6529 0d0a 2020 2020 2020  e=False)..      
+000361d0: 2020 2020 2020 2020 2020 2020 2020 666f                fo
+000361e0: 7220 706f 696e 7420 696e 2070 6f69 6e74  r point in point
+000361f0: 730d 0a20 2020 2020 2020 2020 2020 2020  s..             
+00036200: 2020 205d 0d0a 0d0a 2020 2020 2020 2020     ]....        
+00036210: 2020 2020 6d61 726b 6572 5f63 6c75 7374      marker_clust
+00036220: 6572 203d 2069 7079 6c65 6166 6c65 742e  er = ipyleaflet.
+00036230: 4d61 726b 6572 436c 7573 7465 7228 6d61  MarkerCluster(ma
+00036240: 726b 6572 733d 6d61 726b 6572 732c 206e  rkers=markers, n
+00036250: 616d 653d 6c61 7965 725f 6e61 6d65 290d  ame=layer_name).
+00036260: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00036270: 662e 6164 645f 6c61 7965 7228 6d61 726b  f.add_layer(mark
+00036280: 6572 5f63 6c75 7374 6572 290d 0a0d 0a20  er_cluster).... 
+00036290: 2020 2020 2020 2073 656c 662e 6465 6661         self.defa
+000362a0: 756c 745f 7374 796c 6520 3d20 7b22 6375  ult_style = {"cu
+000362b0: 7273 6f72 223a 2022 6465 6661 756c 7422  rsor": "default"
+000362c0: 7d0d 0a0d 0a20 2020 2064 6566 2061 6464  }....    def add
+000362d0: 5f70 6c61 6e65 745f 6279 5f6d 6f6e 7468  _planet_by_month
+000362e0: 280d 0a20 2020 2020 2020 2073 656c 662c  (..        self,
+000362f0: 2079 6561 723d 3230 3136 2c20 6d6f 6e74   year=2016, mont
+00036300: 683d 312c 206e 616d 653d 4e6f 6e65 2c20  h=1, name=None, 
+00036310: 6170 695f 6b65 793d 4e6f 6e65 2c20 746f  api_key=None, to
+00036320: 6b65 6e5f 6e61 6d65 3d22 504c 414e 4554  ken_name="PLANET
+00036330: 5f41 5049 5f4b 4559 220d 0a20 2020 2029  _API_KEY"..    )
+00036340: 3a0d 0a20 2020 2020 2020 2022 2222 4164  :..        """Ad
+00036350: 6473 2061 2050 6c61 6e65 7420 676c 6f62  ds a Planet glob
+00036360: 616c 206d 6f73 6169 6320 6279 206d 6f6e  al mosaic by mon
+00036370: 7468 2074 6f20 7468 6520 6d61 702e 2054  th to the map. T
+00036380: 6f20 6765 7420 6120 506c 616e 6574 2041  o get a Planet A
+00036390: 5049 206b 6579 2c20 7365 6520 6874 7470  PI key, see http
+000363a0: 733a 2f2f 6465 7665 6c6f 7065 7273 2e70  s://developers.p
+000363b0: 6c61 6e65 742e 636f 6d2f 7175 6963 6b73  lanet.com/quicks
+000363c0: 7461 7274 2f61 7069 730d 0a0d 0a20 2020  tart/apis....   
+000363d0: 2020 2020 2041 7267 733a 0d0a 2020 2020       Args:..    
+000363e0: 2020 2020 2020 2020 7965 6172 2028 696e          year (in
+000363f0: 742c 206f 7074 696f 6e61 6c29 3a20 5468  t, optional): Th
+00036400: 6520 7965 6172 206f 6620 506c 616e 6574  e year of Planet
+00036410: 2067 6c6f 6261 6c20 6d6f 7361 6963 2c20   global mosaic, 
+00036420: 6d75 7374 2062 6520 3e3d 3230 3136 2e20  must be >=2016. 
+00036430: 4465 6661 756c 7473 2074 6f20 3230 3136  Defaults to 2016
+00036440: 2e0d 0a20 2020 2020 2020 2020 2020 206d  ...            m
+00036450: 6f6e 7468 2028 696e 742c 206f 7074 696f  onth (int, optio
+00036460: 6e61 6c29 3a20 5468 6520 6d6f 6e74 6820  nal): The month 
+00036470: 6f66 2050 6c61 6e65 7420 676c 6f62 616c  of Planet global
+00036480: 206d 6f73 6169 632c 206d 7573 7420 6265   mosaic, must be
+00036490: 2031 2d31 322e 2044 6566 6175 6c74 7320   1-12. Defaults 
+000364a0: 746f 2031 2e0d 0a20 2020 2020 2020 2020  to 1...         
+000364b0: 2020 206e 616d 6520 2873 7472 2c20 6f70     name (str, op
+000364c0: 7469 6f6e 616c 293a 2054 6865 206c 6179  tional): The lay
+000364d0: 6572 206e 616d 6520 746f 2075 7365 2e20  er name to use. 
+000364e0: 4465 6661 756c 7473 2074 6f20 4e6f 6e65  Defaults to None
+000364f0: 2e0d 0a20 2020 2020 2020 2020 2020 2061  ...            a
+00036500: 7069 5f6b 6579 2028 7374 722c 206f 7074  pi_key (str, opt
+00036510: 696f 6e61 6c29 3a20 5468 6520 506c 616e  ional): The Plan
+00036520: 6574 2041 5049 206b 6579 2e20 4465 6661  et API key. Defa
+00036530: 756c 7473 2074 6f20 4e6f 6e65 2e0d 0a20  ults to None... 
+00036540: 2020 2020 2020 2020 2020 2074 6f6b 656e             token
+00036550: 5f6e 616d 6520 2873 7472 2c20 6f70 7469  _name (str, opti
+00036560: 6f6e 616c 293a 2054 6865 2065 6e76 6972  onal): The envir
+00036570: 6f6e 6d65 6e74 2076 6172 6961 626c 6520  onment variable 
+00036580: 6e61 6d65 206f 6620 7468 6520 4150 4920  name of the API 
+00036590: 6b65 792e 2044 6566 6175 6c74 7320 746f  key. Defaults to
+000365a0: 2022 504c 414e 4554 5f41 5049 5f4b 4559   "PLANET_API_KEY
+000365b0: 222e 0d0a 2020 2020 2020 2020 2222 220d  "...        """.
+000365c0: 0a20 2020 2020 2020 206c 6179 6572 203d  .        layer =
+000365d0: 2070 6c61 6e65 745f 7469 6c65 5f62 795f   planet_tile_by_
+000365e0: 6d6f 6e74 6828 7965 6172 2c20 6d6f 6e74  month(year, mont
+000365f0: 682c 206e 616d 652c 2061 7069 5f6b 6579  h, name, api_key
+00036600: 2c20 746f 6b65 6e5f 6e61 6d65 290d 0a20  , token_name).. 
+00036610: 2020 2020 2020 2073 656c 662e 6164 645f         self.add_
+00036620: 6c61 7965 7228 6c61 7965 7229 0d0a 0d0a  layer(layer)....
+00036630: 2020 2020 6465 6620 6164 645f 706c 616e      def add_plan
+00036640: 6574 5f62 795f 7175 6172 7465 7228 0d0a  et_by_quarter(..
+00036650: 2020 2020 2020 2020 7365 6c66 2c20 7965          self, ye
+00036660: 6172 3d32 3031 362c 2071 7561 7274 6572  ar=2016, quarter
+00036670: 3d31 2c20 6e61 6d65 3d4e 6f6e 652c 2061  =1, name=None, a
+00036680: 7069 5f6b 6579 3d4e 6f6e 652c 2074 6f6b  pi_key=None, tok
+00036690: 656e 5f6e 616d 653d 2250 4c41 4e45 545f  en_name="PLANET_
+000366a0: 4150 495f 4b45 5922 0d0a 2020 2020 293a  API_KEY"..    ):
+000366b0: 0d0a 2020 2020 2020 2020 2222 2241 6464  ..        """Add
+000366c0: 7320 6120 506c 616e 6574 2067 6c6f 6261  s a Planet globa
+000366d0: 6c20 6d6f 7361 6963 2062 7920 7175 6172  l mosaic by quar
+000366e0: 7465 7220 746f 2074 6865 206d 6170 2e20  ter to the map. 
+000366f0: 546f 2067 6574 2061 2050 6c61 6e65 7420  To get a Planet 
+00036700: 4150 4920 6b65 792c 2073 6565 2068 7474  API key, see htt
+00036710: 7073 3a2f 2f64 6576 656c 6f70 6572 732e  ps://developers.
+00036720: 706c 616e 6574 2e63 6f6d 2f71 7569 636b  planet.com/quick
+00036730: 7374 6172 742f 6170 6973 0d0a 0d0a 2020  start/apis....  
+00036740: 2020 2020 2020 4172 6773 3a0d 0a20 2020        Args:..   
+00036750: 2020 2020 2020 2020 2079 6561 7220 2869           year (i
+00036760: 6e74 2c20 6f70 7469 6f6e 616c 293a 2054  nt, optional): T
+00036770: 6865 2079 6561 7220 6f66 2050 6c61 6e65  he year of Plane
+00036780: 7420 676c 6f62 616c 206d 6f73 6169 632c  t global mosaic,
+00036790: 206d 7573 7420 6265 203e 3d32 3031 362e   must be >=2016.
+000367a0: 2044 6566 6175 6c74 7320 746f 2032 3031   Defaults to 201
+000367b0: 362e 0d0a 2020 2020 2020 2020 2020 2020  6...            
+000367c0: 7175 6172 7465 7220 2869 6e74 2c20 6f70  quarter (int, op
+000367d0: 7469 6f6e 616c 293a 2054 6865 2071 7561  tional): The qua
+000367e0: 7274 6572 206f 6620 506c 616e 6574 2067  rter of Planet g
+000367f0: 6c6f 6261 6c20 6d6f 7361 6963 2c20 6d75  lobal mosaic, mu
+00036800: 7374 2062 6520 312d 3132 2e20 4465 6661  st be 1-12. Defa
+00036810: 756c 7473 2074 6f20 312e 0d0a 2020 2020  ults to 1...    
+00036820: 2020 2020 2020 2020 6e61 6d65 2028 7374          name (st
+00036830: 722c 206f 7074 696f 6e61 6c29 3a20 5468  r, optional): Th
+00036840: 6520 6c61 7965 7220 6e61 6d65 2074 6f20  e layer name to 
+00036850: 7573 652e 2044 6566 6175 6c74 7320 746f  use. Defaults to
+00036860: 204e 6f6e 652e 0d0a 2020 2020 2020 2020   None...        
+00036870: 2020 2020 6170 695f 6b65 7920 2873 7472      api_key (str
+00036880: 2c20 6f70 7469 6f6e 616c 293a 2054 6865  , optional): The
+00036890: 2050 6c61 6e65 7420 4150 4920 6b65 792e   Planet API key.
+000368a0: 2044 6566 6175 6c74 7320 746f 204e 6f6e   Defaults to Non
+000368b0: 652e 0d0a 2020 2020 2020 2020 2020 2020  e...            
+000368c0: 746f 6b65 6e5f 6e61 6d65 2028 7374 722c  token_name (str,
+000368d0: 206f 7074 696f 6e61 6c29 3a20 5468 6520   optional): The 
+000368e0: 656e 7669 726f 6e6d 656e 7420 7661 7269  environment vari
+000368f0: 6162 6c65 206e 616d 6520 6f66 2074 6865  able name of the
+00036900: 2041 5049 206b 6579 2e20 4465 6661 756c   API key. Defaul
+00036910: 7473 2074 6f20 2250 4c41 4e45 545f 4150  ts to "PLANET_AP
+00036920: 495f 4b45 5922 2e0d 0a20 2020 2020 2020  I_KEY"...       
+00036930: 2022 2222 0d0a 2020 2020 2020 2020 6c61   """..        la
+00036940: 7965 7220 3d20 706c 616e 6574 5f74 696c  yer = planet_til
+00036950: 655f 6279 5f71 7561 7274 6572 2879 6561  e_by_quarter(yea
+00036960: 722c 2071 7561 7274 6572 2c20 6e61 6d65  r, quarter, name
+00036970: 2c20 6170 695f 6b65 792c 2074 6f6b 656e  , api_key, token
+00036980: 5f6e 616d 6529 0d0a 2020 2020 2020 2020  _name)..        
+00036990: 7365 6c66 2e61 6464 5f6c 6179 6572 286c  self.add_layer(l
+000369a0: 6179 6572 290d 0a0d 0a20 2020 2064 6566  ayer)....    def
+000369b0: 2074 6f5f 7374 7265 616d 6c69 7428 0d0a   to_streamlit(..
+000369c0: 2020 2020 2020 2020 7365 6c66 2c20 7769          self, wi
+000369d0: 6474 683d 3730 302c 2068 6569 6768 743d  dth=700, height=
+000369e0: 3530 302c 2072 6573 706f 6e73 6976 653d  500, responsive=
+000369f0: 5472 7565 2c20 7363 726f 6c6c 696e 673d  True, scrolling=
+00036a00: 4661 6c73 652c 202a 2a6b 7761 7267 730d  False, **kwargs.
+00036a10: 0a20 2020 2029 3a0d 0a20 2020 2020 2020  .    ):..       
+00036a20: 2022 2222 5265 6e64 6572 7320 6d61 7020   """Renders map 
+00036a30: 6669 6775 7265 2069 6e20 6120 5374 7265  figure in a Stre
+00036a40: 616d 6c69 7420 6170 702e 0d0a 0d0a 2020  amlit app.....  
+00036a50: 2020 2020 2020 4172 6773 3a0d 0a20 2020        Args:..   
+00036a60: 2020 2020 2020 2020 2077 6964 7468 2028           width (
+00036a70: 696e 742c 206f 7074 696f 6e61 6c29 3a20  int, optional): 
+00036a80: 5769 6474 6820 6f66 2074 6865 206d 6170  Width of the map
+00036a90: 2e20 4465 6661 756c 7473 2074 6f20 3730  . Defaults to 70
+00036aa0: 302e 0d0a 2020 2020 2020 2020 2020 2020  0...            
+00036ab0: 6865 6967 6874 2028 696e 742c 206f 7074  height (int, opt
+00036ac0: 696f 6e61 6c29 3a20 4865 6967 6874 206f  ional): Height o
+00036ad0: 6620 7468 6520 6d61 702e 2044 6566 6175  f the map. Defau
+00036ae0: 6c74 7320 746f 2035 3030 2e0d 0a20 2020  lts to 500...   
+00036af0: 2020 2020 2020 2020 2072 6573 706f 6e73           respons
+00036b00: 6976 6520 2862 6f6f 6c2c 206f 7074 696f  ive (bool, optio
+00036b10: 6e61 6c29 3a20 5768 6574 6865 7220 746f  nal): Whether to
+00036b20: 206d 616b 6520 7468 6520 6d61 7020 7265   make the map re
+00036b30: 7370 6f6e 7369 7665 2e20 4465 6661 756c  sponsive. Defaul
+00036b40: 7473 2074 6f20 5472 7565 2e0d 0a20 2020  ts to True...   
+00036b50: 2020 2020 2020 2020 2073 6372 6f6c 6c69           scrolli
+00036b60: 6e67 2028 626f 6f6c 2c20 6f70 7469 6f6e  ng (bool, option
+00036b70: 616c 293a 2049 6620 5472 7565 2c20 7368  al): If True, sh
+00036b80: 6f77 2061 2073 6372 6f6c 6c62 6172 2077  ow a scrollbar w
+00036b90: 6865 6e20 7468 6520 636f 6e74 656e 7420  hen the content 
+00036ba0: 6973 206c 6172 6765 7220 7468 616e 2074  is larger than t
+00036bb0: 6865 2069 6672 616d 652e 204f 7468 6572  he iframe. Other
+00036bc0: 7769 7365 2c20 646f 206e 6f74 2073 686f  wise, do not sho
+00036bd0: 7720 6120 7363 726f 6c6c 6261 722e 2044  w a scrollbar. D
+00036be0: 6566 6175 6c74 7320 746f 2046 616c 7365  efaults to False
+00036bf0: 2e0d 0a0d 0a20 2020 2020 2020 2052 6574  .....        Ret
+00036c00: 7572 6e73 3a0d 0a20 2020 2020 2020 2020  urns:..         
+00036c10: 2020 2073 7472 6561 6d6c 6974 2e63 6f6d     streamlit.com
+00036c20: 706f 6e65 6e74 733a 2063 6f6d 706f 6e65  ponents: compone
+00036c30: 6e74 732e 6874 6d6c 206f 626a 6563 742e  nts.html object.
+00036c40: 0d0a 2020 2020 2020 2020 2222 220d 0a0d  ..        """...
+00036c50: 0a20 2020 2020 2020 2074 7279 3a0d 0a20  .        try:.. 
+00036c60: 2020 2020 2020 2020 2020 2069 6d70 6f72             impor
+00036c70: 7420 7374 7265 616d 6c69 7420 6173 2073  t streamlit as s
+00036c80: 740d 0a20 2020 2020 2020 2020 2020 2069  t..            i
+00036c90: 6d70 6f72 7420 7374 7265 616d 6c69 742e  mport streamlit.
+00036ca0: 636f 6d70 6f6e 656e 7473 2e76 3120 6173  components.v1 as
+00036cb0: 2063 6f6d 706f 6e65 6e74 730d 0a0d 0a20   components.... 
+00036cc0: 2020 2020 2020 2020 2020 2069 6620 7265             if re
+00036cd0: 7370 6f6e 7369 7665 3a0d 0a20 2020 2020  sponsive:..     
+00036ce0: 2020 2020 2020 2020 2020 206d 616b 655f             make_
+00036cf0: 6d61 705f 7265 7370 6f6e 7369 7665 203d  map_responsive =
+00036d00: 2022 2222 0d0a 2020 2020 2020 2020 2020   """..          
+00036d10: 2020 2020 2020 3c73 7479 6c65 3e0d 0a20        <style>.. 
+00036d20: 2020 2020 2020 2020 2020 2020 2020 205b                 [
+00036d30: 7469 746c 657e 3d22 7374 2e69 6672 616d  title~="st.ifram
+00036d40: 6522 5d20 7b20 7769 6474 683a 2031 3030  e"] { width: 100
+00036d50: 257d 0d0a 2020 2020 2020 2020 2020 2020  %}..            
+00036d60: 2020 2020 3c2f 7374 796c 653e 0d0a 2020      </style>..  
+00036d70: 2020 2020 2020 2020 2020 2020 2020 2222                ""
+00036d80: 220d 0a20 2020 2020 2020 2020 2020 2020  "..             
+00036d90: 2020 2073 742e 6d61 726b 646f 776e 286d     st.markdown(m
+00036da0: 616b 655f 6d61 705f 7265 7370 6f6e 7369  ake_map_responsi
+00036db0: 7665 2c20 756e 7361 6665 5f61 6c6c 6f77  ve, unsafe_allow
+00036dc0: 5f68 746d 6c3d 5472 7565 290d 0a20 2020  _html=True)..   
+00036dd0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00036de0: 636f 6d70 6f6e 656e 7473 2e68 746d 6c28  components.html(
+00036df0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00036e00: 2020 7365 6c66 2e74 6f5f 6874 6d6c 2829    self.to_html()
+00036e10: 2c20 7769 6474 683d 7769 6474 682c 2068  , width=width, h
+00036e20: 6569 6768 743d 6865 6967 6874 2c20 7363  eight=height, sc
+00036e30: 726f 6c6c 696e 673d 7363 726f 6c6c 696e  rolling=scrollin
+00036e40: 670d 0a20 2020 2020 2020 2020 2020 2029  g..            )
+00036e50: 0d0a 0d0a 2020 2020 2020 2020 6578 6365  ....        exce
+00036e60: 7074 2045 7863 6570 7469 6f6e 2061 7320  pt Exception as 
+00036e70: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+00036e80: 7261 6973 6520 4578 6365 7074 696f 6e28  raise Exception(
+00036e90: 6529 0d0a 0d0a 2020 2020 6465 6620 6164  e)....    def ad
+00036ea0: 645f 706f 696e 745f 6c61 7965 7228 0d0a  d_point_layer(..
+00036eb0: 2020 2020 2020 2020 7365 6c66 2c20 6669          self, fi
+00036ec0: 6c65 6e61 6d65 2c20 706f 7075 703d 4e6f  lename, popup=No
+00036ed0: 6e65 2c20 6c61 7965 725f 6e61 6d65 3d22  ne, layer_name="
+00036ee0: 4d61 726b 6572 2043 6c75 7374 6572 222c  Marker Cluster",
+00036ef0: 202a 2a6b 7761 7267 730d 0a20 2020 2029   **kwargs..    )
+00036f00: 3a0d 0a20 2020 2020 2020 2022 2222 4164  :..        """Ad
+00036f10: 6473 2061 2070 6f69 6e74 206c 6179 6572  ds a point layer
+00036f20: 2074 6f20 7468 6520 6d61 7020 7769 7468   to the map with
+00036f30: 2061 2070 6f70 7570 2061 7474 7269 6275   a popup attribu
+00036f40: 7465 2e0d 0a0d 0a20 2020 2020 2020 2041  te.....        A
+00036f50: 7267 733a 0d0a 2020 2020 2020 2020 2020  rgs:..          
+00036f60: 2020 6669 6c65 6e61 6d65 2028 7374 7229    filename (str)
+00036f70: 3a20 7374 722c 2068 7474 7020 7572 6c2c  : str, http url,
+00036f80: 2070 6174 6820 6f62 6a65 6374 206f 7220   path object or 
+00036f90: 6669 6c65 2d6c 696b 6520 6f62 6a65 6374  file-like object
+00036fa0: 2e20 4569 7468 6572 2074 6865 2061 6273  . Either the abs
+00036fb0: 6f6c 7574 6520 6f72 2072 656c 6174 6976  olute or relativ
+00036fc0: 6520 7061 7468 2074 6f20 7468 6520 6669  e path to the fi
+00036fd0: 6c65 206f 7220 5552 4c20 746f 2062 6520  le or URL to be 
+00036fe0: 6f70 656e 6564 2c20 6f72 2061 6e79 206f  opened, or any o
+00036ff0: 626a 6563 7420 7769 7468 2061 2072 6561  bject with a rea
+00037000: 6428 2920 6d65 7468 6f64 2028 7375 6368  d() method (such
+00037010: 2061 7320 616e 206f 7065 6e20 6669 6c65   as an open file
+00037020: 206f 7220 5374 7269 6e67 494f 290d 0a20   or StringIO).. 
+00037030: 2020 2020 2020 2020 2020 2070 6f70 7570             popup
+00037040: 2028 7374 7220 7c20 6c69 7374 2c20 6f70   (str | list, op
+00037050: 7469 6f6e 616c 293a 2043 6f6c 756d 6e20  tional): Column 
+00037060: 6e61 6d65 2873 2920 746f 2062 6520 7573  name(s) to be us
+00037070: 6564 2066 6f72 2070 6f70 7570 2e20 4465  ed for popup. De
+00037080: 6661 756c 7473 2074 6f20 4e6f 6e65 2e0d  faults to None..
+00037090: 0a20 2020 2020 2020 2020 2020 206c 6179  .            lay
+000370a0: 6572 5f6e 616d 6520 2873 7472 2c20 6f70  er_name (str, op
+000370b0: 7469 6f6e 616c 293a 2041 206c 6179 6572  tional): A layer
+000370c0: 206e 616d 6520 746f 2075 7365 2e20 4465   name to use. De
+000370d0: 6661 756c 7473 2074 6f20 224d 6172 6b65  faults to "Marke
+000370e0: 7220 436c 7573 7465 7222 2e0d 0a0d 0a20  r Cluster"..... 
+000370f0: 2020 2020 2020 2052 6169 7365 733a 0d0a         Raises:..
+00037100: 2020 2020 2020 2020 2020 2020 5661 6c75              Valu
+00037110: 6545 7272 6f72 3a20 4966 2074 6865 2073  eError: If the s
+00037120: 7065 6369 6669 6564 2063 6f6c 756d 6e20  pecified column 
+00037130: 6e61 6d65 2064 6f65 7320 6e6f 7420 6578  name does not ex
+00037140: 6973 742e 0d0a 2020 2020 2020 2020 2020  ist...          
+00037150: 2020 5661 6c75 6545 7272 6f72 3a20 4966    ValueError: If
+00037160: 2074 6865 2073 7065 6369 6669 6564 2063   the specified c
+00037170: 6f6c 756d 6e20 6e61 6d65 7320 646f 206e  olumn names do n
+00037180: 6f74 2065 7869 7374 2e0d 0a20 2020 2020  ot exist...     
+00037190: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
+000371a0: 696d 706f 7274 2077 6172 6e69 6e67 730d  import warnings.
+000371b0: 0a0d 0a20 2020 2020 2020 2077 6172 6e69  ...        warni
+000371c0: 6e67 732e 6669 6c74 6572 7761 726e 696e  ngs.filterwarnin
+000371d0: 6773 2822 6967 6e6f 7265 2229 0d0a 2020  gs("ignore")..  
+000371e0: 2020 2020 2020 6368 6563 6b5f 7061 636b        check_pack
+000371f0: 6167 6528 6e61 6d65 3d22 6765 6f70 616e  age(name="geopan
+00037200: 6461 7322 2c20 5552 4c3d 2268 7474 7073  das", URL="https
+00037210: 3a2f 2f67 656f 7061 6e64 6173 2e6f 7267  ://geopandas.org
+00037220: 2229 0d0a 2020 2020 2020 2020 696d 706f  ")..        impo
+00037230: 7274 2067 656f 7061 6e64 6173 2061 7320  rt geopandas as 
+00037240: 6770 640d 0a0d 0a20 2020 2020 2020 2073  gpd....        s
+00037250: 656c 662e 6465 6661 756c 745f 7374 796c  elf.default_styl
+00037260: 6520 3d20 7b22 6375 7273 6f72 223a 2022  e = {"cursor": "
+00037270: 7761 6974 227d 0d0a 0d0a 2020 2020 2020  wait"}....      
+00037280: 2020 6966 206e 6f74 2066 696c 656e 616d    if not filenam
+00037290: 652e 7374 6172 7473 7769 7468 2822 6874  e.startswith("ht
+000372a0: 7470 2229 3a0d 0a20 2020 2020 2020 2020  tp"):..         
+000372b0: 2020 2066 696c 656e 616d 6520 3d20 6f73     filename = os
+000372c0: 2e70 6174 682e 6162 7370 6174 6828 6669  .path.abspath(fi
+000372d0: 6c65 6e61 6d65 290d 0a20 2020 2020 2020  lename)..       
+000372e0: 2065 7874 203d 206f 732e 7061 7468 2e73   ext = os.path.s
+000372f0: 706c 6974 6578 7428 6669 6c65 6e61 6d65  plitext(filename
+00037300: 295b 315d 2e6c 6f77 6572 2829 0d0a 2020  )[1].lower()..  
+00037310: 2020 2020 2020 6966 2065 7874 203d 3d20        if ext == 
+00037320: 222e 6b6d 6c22 3a0d 0a20 2020 2020 2020  ".kml":..       
+00037330: 2020 2020 2067 7064 2e69 6f2e 6669 6c65       gpd.io.file
+00037340: 2e66 696f 6e61 2e64 7276 7375 7070 6f72  .fiona.drvsuppor
+00037350: 742e 7375 7070 6f72 7465 645f 6472 6976  t.supported_driv
+00037360: 6572 735b 224b 4d4c 225d 203d 2022 7277  ers["KML"] = "rw
+00037370: 220d 0a20 2020 2020 2020 2020 2020 2067  "..            g
+00037380: 6466 203d 2067 7064 2e72 6561 645f 6669  df = gpd.read_fi
+00037390: 6c65 2866 696c 656e 616d 652c 2064 7269  le(filename, dri
+000373a0: 7665 723d 224b 4d4c 222c 202a 2a6b 7761  ver="KML", **kwa
+000373b0: 7267 7329 0d0a 2020 2020 2020 2020 656c  rgs)..        el
+000373c0: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
+000373d0: 2067 6466 203d 2067 7064 2e72 6561 645f   gdf = gpd.read_
+000373e0: 6669 6c65 2866 696c 656e 616d 652c 202a  file(filename, *
+000373f0: 2a6b 7761 7267 7329 0d0a 2020 2020 2020  *kwargs)..      
+00037400: 2020 6466 203d 2067 6466 2e74 6f5f 6372    df = gdf.to_cr
+00037410: 7328 6570 7367 3d22 3433 3236 2229 0d0a  s(epsg="4326")..
+00037420: 2020 2020 2020 2020 636f 6c5f 6e61 6d65          col_name
+00037430: 7320 3d20 6466 2e63 6f6c 756d 6e73 2e76  s = df.columns.v
+00037440: 616c 7565 732e 746f 6c69 7374 2829 0d0a  alues.tolist()..
+00037450: 2020 2020 2020 2020 6966 2070 6f70 7570          if popup
+00037460: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
+00037470: 2020 2020 2020 2020 2020 2069 6620 6973             if is
+00037480: 696e 7374 616e 6365 2870 6f70 7570 2c20  instance(popup, 
+00037490: 7374 7229 2061 6e64 2028 706f 7075 7020  str) and (popup 
+000374a0: 6e6f 7420 696e 2063 6f6c 5f6e 616d 6573  not in col_names
+000374b0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+000374c0: 2020 2020 7261 6973 6520 5661 6c75 6545      raise ValueE
+000374d0: 7272 6f72 280d 0a20 2020 2020 2020 2020  rror(..         
+000374e0: 2020 2020 2020 2020 2020 2066 2270 6f70             f"pop
+000374f0: 7570 206d 7573 7420 6265 206f 6e65 206f  up must be one o
+00037500: 6620 7468 6520 666f 6c6c 6f77 696e 673a  f the following:
+00037510: 207b 272c 2027 2e6a 6f69 6e28 636f 6c5f   {', '.join(col_
+00037520: 6e61 6d65 7329 7d22 0d0a 2020 2020 2020  names)}"..      
+00037530: 2020 2020 2020 2020 2020 290d 0a20 2020            )..   
+00037540: 2020 2020 2020 2020 2065 6c69 6620 6973           elif is
+00037550: 696e 7374 616e 6365 2870 6f70 7570 2c20  instance(popup, 
+00037560: 6c69 7374 2920 616e 6420 280d 0a20 2020  list) and (..   
+00037570: 2020 2020 2020 2020 2020 2020 206e 6f74               not
+00037580: 2061 6c6c 2869 7465 6d20 696e 2063 6f6c   all(item in col
+00037590: 5f6e 616d 6573 2066 6f72 2069 7465 6d20  _names for item 
+000375a0: 696e 2070 6f70 7570 290d 0a20 2020 2020  in popup)..     
+000375b0: 2020 2020 2020 2029 3a0d 0a20 2020 2020         ):..     
+000375c0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+000375d0: 2056 616c 7565 4572 726f 7228 0d0a 2020   ValueError(..  
+000375e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000375f0: 2020 6622 416c 6c20 706f 7075 7020 6974    f"All popup it
+00037600: 656d 7320 6d75 7374 2062 6520 7365 6c65  ems must be sele
+00037610: 6374 2066 726f 6d3a 207b 272c 2027 2e6a  ct from: {', '.j
+00037620: 6f69 6e28 636f 6c5f 6e61 6d65 7329 7d22  oin(col_names)}"
+00037630: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00037640: 2020 290d 0a0d 0a20 2020 2020 2020 2064    )....        d
+00037650: 665b 2278 225d 203d 2064 662e 6765 6f6d  f["x"] = df.geom
+00037660: 6574 7279 2e78 0d0a 2020 2020 2020 2020  etry.x..        
+00037670: 6466 5b22 7922 5d20 3d20 6466 2e67 656f  df["y"] = df.geo
+00037680: 6d65 7472 792e 790d 0a0d 0a20 2020 2020  metry.y....     
+00037690: 2020 2070 6f69 6e74 7320 3d20 6c69 7374     points = list
+000376a0: 287a 6970 2864 665b 2279 225d 2c20 6466  (zip(df["y"], df
+000376b0: 5b22 7822 5d29 290d 0a0d 0a20 2020 2020  ["x"]))....     
+000376c0: 2020 2069 6620 706f 7075 7020 6973 206e     if popup is n
+000376d0: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
+000376e0: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
+000376f0: 6e63 6528 706f 7075 702c 2073 7472 293a  nce(popup, str):
+00037700: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00037710: 2020 6c61 6265 6c73 203d 2064 665b 706f    labels = df[po
+00037720: 7075 705d 0d0a 2020 2020 2020 2020 2020  pup]..          
+00037730: 2020 2020 2020 6d61 726b 6572 7320 3d20        markers = 
+00037740: 5b0d 0a20 2020 2020 2020 2020 2020 2020  [..             
+00037750: 2020 2020 2020 2069 7079 6c65 6166 6c65         ipyleafle
+00037760: 742e 4d61 726b 6572 280d 0a20 2020 2020  t.Marker(..     
+00037770: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00037780: 2020 206c 6f63 6174 696f 6e3d 706f 696e     location=poin
+00037790: 742c 0d0a 2020 2020 2020 2020 2020 2020  t,..            
+000377a0: 2020 2020 2020 2020 2020 2020 6472 6167              drag
+000377b0: 6761 626c 653d 4661 6c73 652c 0d0a 2020  gable=False,..  
+000377c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000377d0: 2020 2020 2020 706f 7075 703d 7769 6467        popup=widg
+000377e0: 6574 732e 4854 4d4c 2873 7472 286c 6162  ets.HTML(str(lab
+000377f0: 656c 735b 696e 6465 785d 2929 2c0d 0a20  els[index])),.. 
+00037800: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00037810: 2020 2029 0d0a 2020 2020 2020 2020 2020     )..          
+00037820: 2020 2020 2020 2020 2020 666f 7220 696e            for in
+00037830: 6465 782c 2070 6f69 6e74 2069 6e20 656e  dex, point in en
+00037840: 756d 6572 6174 6528 706f 696e 7473 290d  umerate(points).
+00037850: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00037860: 205d 0d0a 2020 2020 2020 2020 2020 2020   ]..            
+00037870: 656c 6966 2069 7369 6e73 7461 6e63 6528  elif isinstance(
+00037880: 706f 7075 702c 206c 6973 7429 3a0d 0a20  popup, list):.. 
+00037890: 2020 2020 2020 2020 2020 2020 2020 206c                 l
+000378a0: 6162 656c 7320 3d20 5b5d 0d0a 2020 2020  abels = []..    
+000378b0: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+000378c0: 6920 696e 2072 616e 6765 286c 656e 2870  i in range(len(p
+000378d0: 6f69 6e74 7329 293a 0d0a 2020 2020 2020  oints)):..      
+000378e0: 2020 2020 2020 2020 2020 2020 2020 6c61                la
+000378f0: 6265 6c20 3d20 2222 0d0a 2020 2020 2020  bel = ""..      
+00037900: 2020 2020 2020 2020 2020 2020 2020 666f                fo
+00037910: 7220 6974 656d 2069 6e20 706f 7075 703a  r item in popup:
+00037920: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00037930: 2020 2020 2020 2020 2020 6c61 6265 6c20            label 
+00037940: 3d20 6c61 6265 6c20 2b20 7374 7228 6974  = label + str(it
+00037950: 656d 2920 2b20 223a 2022 202b 2073 7472  em) + ": " + str
+00037960: 2864 665b 6974 656d 5d5b 695d 2920 2b20  (df[item][i]) + 
+00037970: 223c 6272 3e22 0d0a 2020 2020 2020 2020  "<br>"..        
+00037980: 2020 2020 2020 2020 2020 2020 6c61 6265              labe
+00037990: 6c73 2e61 7070 656e 6428 6c61 6265 6c29  ls.append(label)
+000379a0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000379b0: 2020 6466 5b22 706f 7075 7022 5d20 3d20    df["popup"] = 
+000379c0: 6c61 6265 6c73 0d0a 0d0a 2020 2020 2020  labels....      
+000379d0: 2020 2020 2020 2020 2020 6d61 726b 6572            marker
+000379e0: 7320 3d20 5b0d 0a20 2020 2020 2020 2020  s = [..         
+000379f0: 2020 2020 2020 2020 2020 2069 7079 6c65             ipyle
+00037a00: 6166 6c65 742e 4d61 726b 6572 280d 0a20  aflet.Marker(.. 
+00037a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00037a20: 2020 2020 2020 206c 6f63 6174 696f 6e3d         location=
+00037a30: 706f 696e 742c 0d0a 2020 2020 2020 2020  point,..        
+00037a40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00037a50: 6472 6167 6761 626c 653d 4661 6c73 652c  draggable=False,
+00037a60: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00037a70: 2020 2020 2020 2020 2020 706f 7075 703d            popup=
+00037a80: 7769 6467 6574 732e 4854 4d4c 286c 6162  widgets.HTML(lab
+00037a90: 656c 735b 696e 6465 785d 292c 0d0a 2020  els[index]),..  
+00037aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00037ab0: 2020 290d 0a20 2020 2020 2020 2020 2020    )..           
+00037ac0: 2020 2020 2020 2020 2066 6f72 2069 6e64           for ind
+00037ad0: 6578 2c20 706f 696e 7420 696e 2065 6e75  ex, point in enu
+00037ae0: 6d65 7261 7465 2870 6f69 6e74 7329 0d0a  merate(points)..
+00037af0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00037b00: 5d0d 0a0d 0a20 2020 2020 2020 2065 6c73  ]....        els
+00037b10: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+00037b20: 6d61 726b 6572 7320 3d20 5b0d 0a20 2020  markers = [..   
+00037b30: 2020 2020 2020 2020 2020 2020 2069 7079               ipy
+00037b40: 6c65 6166 6c65 742e 4d61 726b 6572 286c  leaflet.Marker(l
+00037b50: 6f63 6174 696f 6e3d 706f 696e 742c 2064  ocation=point, d
+00037b60: 7261 6767 6162 6c65 3d46 616c 7365 2920  raggable=False) 
+00037b70: 666f 7220 706f 696e 7420 696e 2070 6f69  for point in poi
+00037b80: 6e74 730d 0a20 2020 2020 2020 2020 2020  nts..           
+00037b90: 205d 0d0a 0d0a 2020 2020 2020 2020 6d61   ]....        ma
+00037ba0: 726b 6572 5f63 6c75 7374 6572 203d 2069  rker_cluster = i
+00037bb0: 7079 6c65 6166 6c65 742e 4d61 726b 6572  pyleaflet.Marker
+00037bc0: 436c 7573 7465 7228 6d61 726b 6572 733d  Cluster(markers=
+00037bd0: 6d61 726b 6572 732c 206e 616d 653d 6c61  markers, name=la
+00037be0: 7965 725f 6e61 6d65 290d 0a20 2020 2020  yer_name)..     
+00037bf0: 2020 2073 656c 662e 6164 645f 6c61 7965     self.add_laye
+00037c00: 7228 6d61 726b 6572 5f63 6c75 7374 6572  r(marker_cluster
+00037c10: 290d 0a0d 0a20 2020 2020 2020 2073 656c  )....        sel
+00037c20: 662e 6465 6661 756c 745f 7374 796c 6520  f.default_style 
+00037c30: 3d20 7b22 6375 7273 6f72 223a 2022 6465  = {"cursor": "de
+00037c40: 6661 756c 7422 7d0d 0a0d 0a20 2020 2064  fault"}....    d
+00037c50: 6566 2061 6464 5f63 656e 7375 735f 6461  ef add_census_da
+00037c60: 7461 2873 656c 662c 2077 6d73 2c20 6c61  ta(self, wms, la
+00037c70: 7965 722c 2063 656e 7375 735f 6469 6374  yer, census_dict
+00037c80: 3d4e 6f6e 652c 202a 2a6b 7761 7267 7329  =None, **kwargs)
+00037c90: 3a0d 0a20 2020 2020 2020 2022 2222 4164  :..        """Ad
+00037ca0: 6473 2061 2063 656e 7375 7320 6461 7461  ds a census data
+00037cb0: 206c 6179 6572 2074 6f20 7468 6520 6d61   layer to the ma
+00037cc0: 702e 0d0a 0d0a 2020 2020 2020 2020 4172  p.....        Ar
+00037cd0: 6773 3a0d 0a20 2020 2020 2020 2020 2020  gs:..           
+00037ce0: 2077 6d73 2028 7374 7229 3a20 5468 6520   wms (str): The 
+00037cf0: 776d 7320 746f 2075 7365 2e20 466f 7220  wms to use. For 
+00037d00: 6578 616d 706c 652c 2022 4375 7272 656e  example, "Curren
+00037d10: 7422 2c20 2241 4353 2032 3032 3122 2c20  t", "ACS 2021", 
+00037d20: 2243 656e 7375 7320 3230 3230 222e 2020  "Census 2020".  
+00037d30: 5365 6520 7468 6520 636f 6d70 6c65 7465  See the complete
+00037d40: 206c 6973 7420 6174 2068 7474 7073 3a2f   list at https:/
+00037d50: 2f74 6967 6572 7765 622e 6765 6f2e 6365  /tigerweb.geo.ce
+00037d60: 6e73 7573 2e67 6f76 2f74 6967 6572 7765  nsus.gov/tigerwe
+00037d70: 626d 6169 6e2f 5449 4745 5277 6562 5f77  bmain/TIGERweb_w
+00037d80: 6d73 2e68 746d 6c0d 0a20 2020 2020 2020  ms.html..       
+00037d90: 2020 2020 206c 6179 6572 2028 7374 7229       layer (str)
+00037da0: 3a20 5468 6520 6c61 7965 7220 6e61 6d65  : The layer name
+00037db0: 2074 6f20 6164 6420 746f 2074 6865 206d   to add to the m
+00037dc0: 6170 2e0d 0a20 2020 2020 2020 2020 2020  ap...           
+00037dd0: 2063 656e 7375 735f 6469 6374 2028 6469   census_dict (di
+00037de0: 6374 2c20 6f70 7469 6f6e 616c 293a 2041  ct, optional): A
+00037df0: 2064 6963 7469 6f6e 6172 7920 636f 6e74   dictionary cont
+00037e00: 6169 6e69 6e67 2063 656e 7375 7320 6461  aining census da
+00037e10: 7461 2e20 4465 6661 756c 7473 2074 6f20  ta. Defaults to 
+00037e20: 4e6f 6e65 2e20 4974 2063 616e 2062 6520  None. It can be 
+00037e30: 6f62 7461 696e 6564 2066 726f 6d20 7468  obtained from th
+00037e40: 6520 6765 745f 6365 6e73 7573 5f64 6963  e get_census_dic
+00037e50: 7428 2920 6675 6e63 7469 6f6e 2e0d 0a20  t() function... 
+00037e60: 2020 2020 2020 2022 2222 0d0a 0d0a 2020         """....  
+00037e70: 2020 2020 2020 7472 793a 0d0a 2020 2020        try:..    
+00037e80: 2020 2020 2020 2020 6966 2063 656e 7375          if censu
+00037e90: 735f 6469 6374 2069 7320 4e6f 6e65 3a0d  s_dict is None:.
+00037ea0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00037eb0: 2063 656e 7375 735f 6469 6374 203d 2067   census_dict = g
+00037ec0: 6574 5f63 656e 7375 735f 6469 6374 2829  et_census_dict()
+00037ed0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00037ee0: 6966 2077 6d73 206e 6f74 2069 6e20 6365  if wms not in ce
+00037ef0: 6e73 7573 5f64 6963 742e 6b65 7973 2829  nsus_dict.keys()
+00037f00: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00037f10: 2020 2072 6169 7365 2056 616c 7565 4572     raise ValueEr
+00037f20: 726f 7228 0d0a 2020 2020 2020 2020 2020  ror(..          
+00037f30: 2020 2020 2020 2020 2020 6622 5468 6520            f"The 
+00037f40: 7072 6f76 6964 6564 2057 4d53 2069 7320  provided WMS is 
+00037f50: 696e 7661 6c69 642e 2049 7420 6d75 7374  invalid. It must
+00037f60: 2062 6520 6f6e 6520 6f66 207b 6365 6e73   be one of {cens
+00037f70: 7573 5f64 6963 742e 6b65 7973 2829 7d22  us_dict.keys()}"
+00037f80: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00037f90: 2020 290d 0a0d 0a20 2020 2020 2020 2020    )....         
+00037fa0: 2020 206c 6179 6572 7320 3d20 6365 6e73     layers = cens
+00037fb0: 7573 5f64 6963 745b 776d 735d 5b22 6c61  us_dict[wms]["la
+00037fc0: 7965 7273 225d 0d0a 2020 2020 2020 2020  yers"]..        
+00037fd0: 2020 2020 6966 206c 6179 6572 206e 6f74      if layer not
+00037fe0: 2069 6e20 6c61 7965 7273 3a0d 0a20 2020   in layers:..   
+00037ff0: 2020 2020 2020 2020 2020 2020 2072 6169               rai
+00038000: 7365 2056 616c 7565 4572 726f 7228 0d0a  se ValueError(..
+00038010: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00038020: 2020 2020 6622 5468 6520 6c61 7965 7220      f"The layer 
+00038030: 6e61 6d65 2069 7320 6e6f 7420 7661 6c69  name is not vali
+00038040: 642e 2049 7420 6d75 7374 2062 6520 6f6e  d. It must be on
+00038050: 6520 6f66 207b 6c61 7965 7273 7d22 0d0a  e of {layers}"..
+00038060: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00038070: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+00038080: 2075 726c 203d 2063 656e 7375 735f 6469   url = census_di
+00038090: 6374 5b77 6d73 5d5b 2275 726c 225d 0d0a  ct[wms]["url"]..
+000380a0: 2020 2020 2020 2020 2020 2020 6966 2022              if "
+000380b0: 6e61 6d65 2220 6e6f 7420 696e 206b 7761  name" not in kwa
+000380c0: 7267 733a 0d0a 2020 2020 2020 2020 2020  rgs:..          
+000380d0: 2020 2020 2020 6b77 6172 6773 5b22 6e61        kwargs["na
+000380e0: 6d65 225d 203d 206c 6179 6572 0d0a 2020  me"] = layer..  
+000380f0: 2020 2020 2020 2020 2020 6966 2022 6174            if "at
+00038100: 7472 6962 7574 696f 6e22 206e 6f74 2069  tribution" not i
+00038110: 6e20 6b77 6172 6773 3a0d 0a20 2020 2020  n kwargs:..     
+00038120: 2020 2020 2020 2020 2020 206b 7761 7267             kwarg
+00038130: 735b 2261 7474 7269 6275 7469 6f6e 225d  s["attribution"]
+00038140: 203d 2022 552e 532e 2043 656e 7375 7320   = "U.S. Census 
+00038150: 4275 7265 6175 220d 0a20 2020 2020 2020  Bureau"..       
+00038160: 2020 2020 2069 6620 2266 6f72 6d61 7422       if "format"
+00038170: 206e 6f74 2069 6e20 6b77 6172 6773 3a0d   not in kwargs:.
+00038180: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00038190: 206b 7761 7267 735b 2266 6f72 6d61 7422   kwargs["format"
+000381a0: 5d20 3d20 2269 6d61 6765 2f70 6e67 220d  ] = "image/png".
+000381b0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+000381c0: 2274 7261 6e73 7061 7265 6e74 2220 6e6f  "transparent" no
+000381d0: 7420 696e 206b 7761 7267 733a 0d0a 2020  t in kwargs:..  
+000381e0: 2020 2020 2020 2020 2020 2020 2020 6b77                kw
+000381f0: 6172 6773 5b22 7472 616e 7370 6172 656e  args["transparen
+00038200: 7422 5d20 3d20 5472 7565 0d0a 0d0a 2020  t"] = True....  
+00038210: 2020 2020 2020 2020 2020 7365 6c66 2e61            self.a
+00038220: 6464 5f77 6d73 5f6c 6179 6572 2875 726c  dd_wms_layer(url
+00038230: 2c20 6c61 7965 722c 202a 2a6b 7761 7267  , layer, **kwarg
+00038240: 7329 0d0a 0d0a 2020 2020 2020 2020 6578  s)....        ex
+00038250: 6365 7074 2045 7863 6570 7469 6f6e 2061  cept Exception a
+00038260: 7320 653a 0d0a 2020 2020 2020 2020 2020  s e:..          
+00038270: 2020 7261 6973 6520 4578 6365 7074 696f    raise Exceptio
+00038280: 6e28 6529 0d0a 0d0a 2020 2020 6465 6620  n(e)....    def 
+00038290: 6164 645f 7879 7a5f 7365 7276 6963 6528  add_xyz_service(
+000382a0: 7365 6c66 2c20 7072 6f76 6964 6572 2c20  self, provider, 
+000382b0: 2a2a 6b77 6172 6773 293a 0d0a 2020 2020  **kwargs):..    
+000382c0: 2020 2020 2222 2241 6464 2061 2058 595a      """Add a XYZ
+000382d0: 2074 696c 6520 6c61 7965 7220 746f 2074   tile layer to t
+000382e0: 6865 206d 6170 2e0d 0a0d 0a20 2020 2020  he map.....     
+000382f0: 2020 2041 7267 733a 0d0a 2020 2020 2020     Args:..      
+00038300: 2020 2020 2020 7072 6f76 6964 6572 2028        provider (
+00038310: 7374 7229 3a20 4120 7469 6c65 206c 6179  str): A tile lay
+00038320: 6572 206e 616d 6520 7374 6172 7473 2077  er name starts w
+00038330: 6974 6820 7879 7a20 6f72 2071 6d73 2e20  ith xyz or qms. 
+00038340: 466f 7220 6578 616d 706c 652c 2078 797a  For example, xyz
+00038350: 2e4f 7065 6e54 6f70 6f4d 6170 2c0d 0a0d  .OpenTopoMap,...
+00038360: 0a20 2020 2020 2020 2052 6169 7365 733a  .        Raises:
+00038370: 0d0a 2020 2020 2020 2020 2020 2020 5661  ..            Va
+00038380: 6c75 6545 7272 6f72 3a20 5468 6520 7072  lueError: The pr
+00038390: 6f76 6964 6572 2069 7320 6e6f 7420 7661  ovider is not va
+000383a0: 6c69 642e 2049 7420 6d75 7374 2073 7461  lid. It must sta
+000383b0: 7274 2077 6974 6820 7879 7a20 6f72 2071  rt with xyz or q
+000383c0: 6d73 2e0d 0a20 2020 2020 2020 2022 2222  ms...        """
+000383d0: 0d0a 2020 2020 2020 2020 696d 706f 7274  ..        import
+000383e0: 2078 797a 7365 7276 6963 6573 2e70 726f   xyzservices.pro
+000383f0: 7669 6465 7273 2061 7320 7879 7a0d 0a20  viders as xyz.. 
+00038400: 2020 2020 2020 2066 726f 6d20 7879 7a73         from xyzs
+00038410: 6572 7669 6365 7320 696d 706f 7274 2054  ervices import T
+00038420: 696c 6550 726f 7669 6465 720d 0a0d 0a20  ileProvider.... 
+00038430: 2020 2020 2020 2069 6620 7072 6f76 6964         if provid
+00038440: 6572 2e73 7461 7274 7377 6974 6828 2278  er.startswith("x
+00038450: 797a 2229 3a0d 0a20 2020 2020 2020 2020  yz"):..         
+00038460: 2020 206e 616d 6520 3d20 7072 6f76 6964     name = provid
+00038470: 6572 5b34 3a5d 0d0a 2020 2020 2020 2020  er[4:]..        
+00038480: 2020 2020 7879 7a5f 7072 6f76 6964 6572      xyz_provider
+00038490: 203d 2078 797a 2e66 6c61 7474 656e 2829   = xyz.flatten()
+000384a0: 5b6e 616d 655d 0d0a 2020 2020 2020 2020  [name]..        
+000384b0: 2020 2020 7572 6c20 3d20 7879 7a5f 7072      url = xyz_pr
+000384c0: 6f76 6964 6572 2e62 7569 6c64 5f75 726c  ovider.build_url
+000384d0: 2829 0d0a 2020 2020 2020 2020 2020 2020  ()..            
+000384e0: 6174 7472 6962 7574 696f 6e20 3d20 7879  attribution = xy
+000384f0: 7a5f 7072 6f76 6964 6572 2e61 7474 7269  z_provider.attri
+00038500: 6275 7469 6f6e 0d0a 2020 2020 2020 2020  bution..        
+00038510: 2020 2020 6966 2061 7474 7269 6275 7469      if attributi
+00038520: 6f6e 2e73 7472 6970 2829 203d 3d20 2222  on.strip() == ""
+00038530: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00038540: 2020 2061 7474 7269 6275 7469 6f6e 203d     attribution =
+00038550: 2022 2022 0d0a 2020 2020 2020 2020 2020   " "..          
+00038560: 2020 7365 6c66 2e61 6464 5f74 696c 655f    self.add_tile_
+00038570: 6c61 7965 7228 7572 6c2c 206e 616d 652c  layer(url, name,
+00038580: 2061 7474 7269 6275 7469 6f6e 290d 0a20   attribution).. 
+00038590: 2020 2020 2020 2065 6c69 6620 7072 6f76         elif prov
+000385a0: 6964 6572 2e73 7461 7274 7377 6974 6828  ider.startswith(
+000385b0: 2271 6d73 2229 3a0d 0a20 2020 2020 2020  "qms"):..       
+000385c0: 2020 2020 206e 616d 6520 3d20 7072 6f76       name = prov
+000385d0: 6964 6572 5b34 3a5d 0d0a 2020 2020 2020  ider[4:]..      
+000385e0: 2020 2020 2020 716d 735f 7072 6f76 6964        qms_provid
+000385f0: 6572 203d 2054 696c 6550 726f 7669 6465  er = TileProvide
+00038600: 722e 6672 6f6d 5f71 6d73 286e 616d 6529  r.from_qms(name)
+00038610: 0d0a 2020 2020 2020 2020 2020 2020 7572  ..            ur
+00038620: 6c20 3d20 716d 735f 7072 6f76 6964 6572  l = qms_provider
+00038630: 2e62 7569 6c64 5f75 726c 2829 0d0a 2020  .build_url()..  
+00038640: 2020 2020 2020 2020 2020 6174 7472 6962            attrib
+00038650: 7574 696f 6e20 3d20 716d 735f 7072 6f76  ution = qms_prov
+00038660: 6964 6572 2e61 7474 7269 6275 7469 6f6e  ider.attribution
+00038670: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
+00038680: 2061 7474 7269 6275 7469 6f6e 2e73 7472   attribution.str
+00038690: 6970 2829 203d 3d20 2222 3a0d 0a20 2020  ip() == "":..   
+000386a0: 2020 2020 2020 2020 2020 2020 2061 7474               att
+000386b0: 7269 6275 7469 6f6e 203d 2022 2022 0d0a  ribution = " "..
+000386c0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+000386d0: 2e61 6464 5f74 696c 655f 6c61 7965 7228  .add_tile_layer(
+000386e0: 7572 6c2c 206e 616d 652c 2061 7474 7269  url, name, attri
+000386f0: 6275 7469 6f6e 290d 0a20 2020 2020 2020  bution)..       
+00038700: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
+00038710: 2020 2020 7261 6973 6520 5661 6c75 6545      raise ValueE
+00038720: 7272 6f72 280d 0a20 2020 2020 2020 2020  rror(..         
+00038730: 2020 2020 2020 2066 2254 6865 2070 726f         f"The pro
+00038740: 7669 6465 7220 7b70 726f 7669 6465 727d  vider {provider}
+00038750: 2069 7320 6e6f 7420 7661 6c69 642e 2049   is not valid. I
+00038760: 7420 6d75 7374 2073 7461 7274 2077 6974  t must start wit
+00038770: 6820 7879 7a20 6f72 2071 6d73 2e22 0d0a  h xyz or qms."..
+00038780: 2020 2020 2020 2020 2020 2020 290d 0a0d              )...
+00038790: 0a0d 0a23 2054 6865 2066 756e 6374 696f  ...# The functio
+000387a0: 6e73 2062 656c 6f77 2061 7265 206f 7574  ns below are out
+000387b0: 7369 6465 2074 6865 204d 6170 2063 6c61  side the Map cla
+000387c0: 7373 2e0d 0a0d 0a0d 0a64 6566 2065 655f  ss.......def ee_
+000387d0: 7469 6c65 5f6c 6179 6572 280d 0a20 2020  tile_layer(..   
+000387e0: 2065 655f 6f62 6a65 6374 2c20 7669 735f   ee_object, vis_
+000387f0: 7061 7261 6d73 3d7b 7d2c 206e 616d 653d  params={}, name=
+00038800: 224c 6179 6572 2075 6e74 6974 6c65 6422  "Layer untitled"
+00038810: 2c20 7368 6f77 6e3d 5472 7565 2c20 6f70  , shown=True, op
+00038820: 6163 6974 793d 312e 300d 0a29 3a0d 0a20  acity=1.0..):.. 
+00038830: 2020 2022 2222 436f 6e76 6572 7473 2061     """Converts a
+00038840: 6e64 2045 6172 7468 2045 6e67 696e 6520  nd Earth Engine 
+00038850: 6c61 7965 7220 746f 2069 7079 6c65 6166  layer to ipyleaf
+00038860: 6c65 7420 5469 6c65 4c61 7965 722e 0d0a  let TileLayer...
+00038870: 0d0a 2020 2020 4172 6773 3a0d 0a20 2020  ..    Args:..   
+00038880: 2020 2020 2065 655f 6f62 6a65 6374 2028       ee_object (
+00038890: 436f 6c6c 6563 7469 6f6e 7c46 6561 7475  Collection|Featu
+000388a0: 7265 7c49 6d61 6765 7c4d 6170 4964 293a  re|Image|MapId):
+000388b0: 2054 6865 206f 626a 6563 7420 746f 2061   The object to a
+000388c0: 6464 2074 6f20 7468 6520 6d61 702e 0d0a  dd to the map...
+000388d0: 2020 2020 2020 2020 7669 735f 7061 7261          vis_para
+000388e0: 6d73 2028 6469 6374 2c20 6f70 7469 6f6e  ms (dict, option
+000388f0: 616c 293a 2054 6865 2076 6973 7561 6c69  al): The visuali
+00038900: 7a61 7469 6f6e 2070 6172 616d 6574 6572  zation parameter
+00038910: 732e 2044 6566 6175 6c74 7320 746f 207b  s. Defaults to {
+00038920: 7d2e 0d0a 2020 2020 2020 2020 6e61 6d65  }...        name
+00038930: 2028 7374 722c 206f 7074 696f 6e61 6c29   (str, optional)
+00038940: 3a20 5468 6520 6e61 6d65 206f 6620 7468  : The name of th
+00038950: 6520 6c61 7965 722e 2044 6566 6175 6c74  e layer. Default
+00038960: 7320 746f 2027 4c61 7965 7220 756e 7469  s to 'Layer unti
+00038970: 746c 6564 272e 0d0a 2020 2020 2020 2020  tled'...        
+00038980: 7368 6f77 6e20 2862 6f6f 6c2c 206f 7074  shown (bool, opt
+00038990: 696f 6e61 6c29 3a20 4120 666c 6167 2069  ional): A flag i
+000389a0: 6e64 6963 6174 696e 6720 7768 6574 6865  ndicating whethe
+000389b0: 7220 7468 6520 6c61 7965 7220 7368 6f75  r the layer shou
+000389c0: 6c64 2062 6520 6f6e 2062 7920 6465 6661  ld be on by defa
+000389d0: 756c 742e 2044 6566 6175 6c74 7320 746f  ult. Defaults to
+000389e0: 2054 7275 652e 0d0a 2020 2020 2020 2020   True...        
+000389f0: 6f70 6163 6974 7920 2866 6c6f 6174 2c20  opacity (float, 
+00038a00: 6f70 7469 6f6e 616c 293a 2054 6865 206c  optional): The l
+00038a10: 6179 6572 2773 206f 7061 6369 7479 2072  ayer's opacity r
+00038a20: 6570 7265 7365 6e74 6564 2061 7320 6120  epresented as a 
+00038a30: 6e75 6d62 6572 2062 6574 7765 656e 2030  number between 0
+00038a40: 2061 6e64 2031 2e20 4465 6661 756c 7473   and 1. Defaults
+00038a50: 2074 6f20 312e 0d0a 2020 2020 2222 220d   to 1...    """.
+00038a60: 0a0d 0a20 2020 2069 6d61 6765 203d 204e  ...    image = N
+00038a70: 6f6e 650d 0a0d 0a20 2020 2069 6620 280d  one....    if (.
+00038a80: 0a20 2020 2020 2020 206e 6f74 2069 7369  .        not isi
+00038a90: 6e73 7461 6e63 6528 6565 5f6f 626a 6563  nstance(ee_objec
+00038aa0: 742c 2065 652e 496d 6167 6529 0d0a 2020  t, ee.Image)..  
+00038ab0: 2020 2020 2020 616e 6420 6e6f 7420 6973        and not is
+00038ac0: 696e 7374 616e 6365 2865 655f 6f62 6a65  instance(ee_obje
+00038ad0: 6374 2c20 6565 2e49 6d61 6765 436f 6c6c  ct, ee.ImageColl
+00038ae0: 6563 7469 6f6e 290d 0a20 2020 2020 2020  ection)..       
+00038af0: 2061 6e64 206e 6f74 2069 7369 6e73 7461   and not isinsta
+00038b00: 6e63 6528 6565 5f6f 626a 6563 742c 2065  nce(ee_object, e
+00038b10: 652e 4665 6174 7572 6543 6f6c 6c65 6374  e.FeatureCollect
+00038b20: 696f 6e29 0d0a 2020 2020 2020 2020 616e  ion)..        an
+00038b30: 6420 6e6f 7420 6973 696e 7374 616e 6365  d not isinstance
+00038b40: 2865 655f 6f62 6a65 6374 2c20 6565 2e46  (ee_object, ee.F
+00038b50: 6561 7475 7265 290d 0a20 2020 2020 2020  eature)..       
+00038b60: 2061 6e64 206e 6f74 2069 7369 6e73 7461   and not isinsta
+00038b70: 6e63 6528 6565 5f6f 626a 6563 742c 2065  nce(ee_object, e
+00038b80: 652e 4765 6f6d 6574 7279 290d 0a20 2020  e.Geometry)..   
+00038b90: 2029 3a0d 0a20 2020 2020 2020 2065 7272   ):..        err
+00038ba0: 5f73 7472 203d 2022 5c6e 5c6e 5468 6520  _str = "\n\nThe 
+00038bb0: 696d 6167 6520 6172 6775 6d65 6e74 2069  image argument i
+00038bc0: 6e20 2761 6464 4c61 7965 7227 2066 756e  n 'addLayer' fun
+00038bd0: 6374 696f 6e20 6d75 7374 2062 6520 616e  ction must be an
+00038be0: 2069 6e73 7461 6e63 6520 6f66 206f 6e65   instance of one
+00038bf0: 206f 6620 6565 2e49 6d61 6765 2c20 6565   of ee.Image, ee
+00038c00: 2e47 656f 6d65 7472 792c 2065 652e 4665  .Geometry, ee.Fe
+00038c10: 6174 7572 6520 6f72 2065 652e 4665 6174  ature or ee.Feat
+00038c20: 7572 6543 6f6c 6c65 6374 696f 6e2e 220d  ureCollection.".
+00038c30: 0a20 2020 2020 2020 2072 6169 7365 2041  .        raise A
+00038c40: 7474 7269 6275 7465 4572 726f 7228 6572  ttributeError(er
+00038c50: 725f 7374 7229 0d0a 0d0a 2020 2020 6966  r_str)....    if
+00038c60: 2028 0d0a 2020 2020 2020 2020 6973 696e   (..        isin
+00038c70: 7374 616e 6365 2865 655f 6f62 6a65 6374  stance(ee_object
+00038c80: 2c20 6565 2e67 656f 6d65 7472 792e 4765  , ee.geometry.Ge
+00038c90: 6f6d 6574 7279 290d 0a20 2020 2020 2020  ometry)..       
+00038ca0: 206f 7220 6973 696e 7374 616e 6365 2865   or isinstance(e
+00038cb0: 655f 6f62 6a65 6374 2c20 6565 2e66 6561  e_object, ee.fea
+00038cc0: 7475 7265 2e46 6561 7475 7265 290d 0a20  ture.Feature).. 
+00038cd0: 2020 2020 2020 206f 7220 6973 696e 7374         or isinst
+00038ce0: 616e 6365 2865 655f 6f62 6a65 6374 2c20  ance(ee_object, 
+00038cf0: 6565 2e66 6561 7475 7265 636f 6c6c 6563  ee.featurecollec
+00038d00: 7469 6f6e 2e46 6561 7475 7265 436f 6c6c  tion.FeatureColl
+00038d10: 6563 7469 6f6e 290d 0a20 2020 2029 3a0d  ection)..    ):.
+00038d20: 0a20 2020 2020 2020 2066 6561 7475 7265  .        feature
+00038d30: 7320 3d20 6565 2e46 6561 7475 7265 436f  s = ee.FeatureCo
+00038d40: 6c6c 6563 7469 6f6e 2865 655f 6f62 6a65  llection(ee_obje
+00038d50: 6374 290d 0a0d 0a20 2020 2020 2020 2077  ct)....        w
+00038d60: 6964 7468 203d 2032 0d0a 0d0a 2020 2020  idth = 2....    
+00038d70: 2020 2020 6966 2022 7769 6474 6822 2069      if "width" i
+00038d80: 6e20 7669 735f 7061 7261 6d73 3a0d 0a20  n vis_params:.. 
+00038d90: 2020 2020 2020 2020 2020 2077 6964 7468             width
+00038da0: 203d 2076 6973 5f70 6172 616d 735b 2277   = vis_params["w
+00038db0: 6964 7468 225d 0d0a 0d0a 2020 2020 2020  idth"]....      
+00038dc0: 2020 636f 6c6f 7220 3d20 2230 3030 3030    color = "00000
+00038dd0: 3022 0d0a 0d0a 2020 2020 2020 2020 6966  0"....        if
+00038de0: 2022 636f 6c6f 7222 2069 6e20 7669 735f   "color" in vis_
+00038df0: 7061 7261 6d73 3a0d 0a20 2020 2020 2020  params:..       
+00038e00: 2020 2020 2063 6f6c 6f72 203d 2076 6973       color = vis
+00038e10: 5f70 6172 616d 735b 2263 6f6c 6f72 225d  _params["color"]
+00038e20: 0d0a 0d0a 2020 2020 2020 2020 696d 6167  ....        imag
+00038e30: 655f 6669 6c6c 203d 2066 6561 7475 7265  e_fill = feature
+00038e40: 732e 7374 796c 6528 2a2a 7b22 6669 6c6c  s.style(**{"fill
+00038e50: 436f 6c6f 7222 3a20 636f 6c6f 727d 292e  Color": color}).
+00038e60: 7570 6461 7465 4d61 736b 280d 0a20 2020  updateMask(..   
+00038e70: 2020 2020 2020 2020 2065 652e 496d 6167           ee.Imag
+00038e80: 652e 636f 6e73 7461 6e74 2830 2e35 290d  e.constant(0.5).
+00038e90: 0a20 2020 2020 2020 2029 0d0a 2020 2020  .        )..    
+00038ea0: 2020 2020 696d 6167 655f 6f75 746c 696e      image_outlin
+00038eb0: 6520 3d20 6665 6174 7572 6573 2e73 7479  e = features.sty
+00038ec0: 6c65 280d 0a20 2020 2020 2020 2020 2020  le(..           
+00038ed0: 202a 2a7b 2263 6f6c 6f72 223a 2063 6f6c   **{"color": col
+00038ee0: 6f72 2c20 2266 696c 6c43 6f6c 6f72 223a  or, "fillColor":
+00038ef0: 2022 3030 3030 3030 3030 222c 2022 7769   "00000000", "wi
+00038f00: 6474 6822 3a20 7769 6474 687d 0d0a 2020  dth": width}..  
+00038f10: 2020 2020 2020 290d 0a0d 0a20 2020 2020        )....     
+00038f20: 2020 2069 6d61 6765 203d 2069 6d61 6765     image = image
+00038f30: 5f66 696c 6c2e 626c 656e 6428 696d 6167  _fill.blend(imag
+00038f40: 655f 6f75 746c 696e 6529 0d0a 2020 2020  e_outline)..    
+00038f50: 656c 6966 2069 7369 6e73 7461 6e63 6528  elif isinstance(
+00038f60: 6565 5f6f 626a 6563 742c 2065 652e 696d  ee_object, ee.im
+00038f70: 6167 652e 496d 6167 6529 3a0d 0a20 2020  age.Image):..   
+00038f80: 2020 2020 2069 6d61 6765 203d 2065 655f       image = ee_
+00038f90: 6f62 6a65 6374 0d0a 2020 2020 656c 6966  object..    elif
+00038fa0: 2069 7369 6e73 7461 6e63 6528 6565 5f6f   isinstance(ee_o
+00038fb0: 626a 6563 742c 2065 652e 696d 6167 6563  bject, ee.imagec
+00038fc0: 6f6c 6c65 6374 696f 6e2e 496d 6167 6543  ollection.ImageC
+00038fd0: 6f6c 6c65 6374 696f 6e29 3a0d 0a20 2020  ollection):..   
+00038fe0: 2020 2020 2069 6d61 6765 203d 2065 655f       image = ee_
+00038ff0: 6f62 6a65 6374 2e6d 6f73 6169 6328 290d  object.mosaic().
+00039000: 0a0d 0a20 2020 206d 6170 5f69 645f 6469  ...    map_id_di
+00039010: 6374 203d 2065 652e 496d 6167 6528 696d  ct = ee.Image(im
+00039020: 6167 6529 2e67 6574 4d61 7049 6428 7669  age).getMapId(vi
+00039030: 735f 7061 7261 6d73 290d 0a20 2020 2074  s_params)..    t
+00039040: 696c 655f 6c61 7965 7220 3d20 6970 796c  ile_layer = ipyl
+00039050: 6561 666c 6574 2e54 696c 654c 6179 6572  eaflet.TileLayer
+00039060: 280d 0a20 2020 2020 2020 2075 726c 3d6d  (..        url=m
+00039070: 6170 5f69 645f 6469 6374 5b22 7469 6c65  ap_id_dict["tile
+00039080: 5f66 6574 6368 6572 225d 2e75 726c 5f66  _fetcher"].url_f
+00039090: 6f72 6d61 742c 0d0a 2020 2020 2020 2020  ormat,..        
+000390a0: 6174 7472 6962 7574 696f 6e3d 2247 6f6f  attribution="Goo
+000390b0: 676c 6520 4561 7274 6820 456e 6769 6e65  gle Earth Engine
+000390c0: 222c 0d0a 2020 2020 2020 2020 6e61 6d65  ",..        name
+000390d0: 3d6e 616d 652c 0d0a 2020 2020 2020 2020  =name,..        
+000390e0: 6f70 6163 6974 793d 6f70 6163 6974 792c  opacity=opacity,
+000390f0: 0d0a 2020 2020 2020 2020 7669 7369 626c  ..        visibl
+00039100: 653d 7368 6f77 6e2c 0d0a 2020 2020 290d  e=shown,..    ).
+00039110: 0a20 2020 2072 6574 7572 6e20 7469 6c65  .    return tile
+00039120: 5f6c 6179 6572 0d0a 0d0a 0d0a 6465 6620  _layer......def 
+00039130: 6c69 6e6b 6564 5f6d 6170 7328 0d0a 2020  linked_maps(..  
+00039140: 2020 726f 7773 3d32 2c0d 0a20 2020 2063    rows=2,..    c
+00039150: 6f6c 733d 322c 0d0a 2020 2020 6865 6967  ols=2,..    heig
+00039160: 6874 3d22 3430 3070 7822 2c0d 0a20 2020  ht="400px",..   
+00039170: 2065 655f 6f62 6a65 6374 733d 5b5d 2c0d   ee_objects=[],.
+00039180: 0a20 2020 2076 6973 5f70 6172 616d 733d  .    vis_params=
+00039190: 5b5d 2c0d 0a20 2020 206c 6162 656c 733d  [],..    labels=
+000391a0: 5b5d 2c0d 0a20 2020 206c 6162 656c 5f70  [],..    label_p
+000391b0: 6f73 6974 696f 6e3d 2274 6f70 7269 6768  osition="toprigh
+000391c0: 7422 2c0d 0a20 2020 202a 2a6b 7761 7267  t",..    **kwarg
+000391d0: 732c 0d0a 293a 0d0a 2020 2020 2222 2243  s,..):..    """C
+000391e0: 7265 6174 6520 6c69 6e6b 6564 206d 6170  reate linked map
+000391f0: 7320 6f66 2045 6172 7468 2045 6e67 696e  s of Earth Engin
+00039200: 6520 6461 7461 206c 6179 6572 732e 0d0a  e data layers...
+00039210: 0d0a 2020 2020 4172 6773 3a0d 0a20 2020  ..    Args:..   
+00039220: 2020 2020 2072 6f77 7320 2869 6e74 2c20       rows (int, 
+00039230: 6f70 7469 6f6e 616c 293a 2054 6865 206e  optional): The n
+00039240: 756d 6265 7220 6f66 2072 6f77 7320 6f66  umber of rows of
+00039250: 206d 6170 7320 746f 2063 7265 6174 652e   maps to create.
+00039260: 2044 6566 6175 6c74 7320 746f 2032 2e0d   Defaults to 2..
+00039270: 0a20 2020 2020 2020 2063 6f6c 7320 2869  .        cols (i
+00039280: 6e74 2c20 6f70 7469 6f6e 616c 293a 2054  nt, optional): T
+00039290: 6865 206e 756d 6265 7220 6f66 2063 6f6c  he number of col
+000392a0: 756d 6e73 206f 6620 6d61 7073 2074 6f20  umns of maps to 
+000392b0: 6372 6561 7465 2e20 4465 6661 756c 7473  create. Defaults
+000392c0: 2074 6f20 322e 0d0a 2020 2020 2020 2020   to 2...        
+000392d0: 6865 6967 6874 2028 7374 722c 206f 7074  height (str, opt
+000392e0: 696f 6e61 6c29 3a20 5468 6520 6865 6967  ional): The heig
+000392f0: 6874 206f 6620 6561 6368 206d 6170 2069  ht of each map i
+00039300: 6e20 7069 7865 6c73 2e20 4465 6661 756c  n pixels. Defaul
+00039310: 7473 2074 6f20 2234 3030 7078 222e 0d0a  ts to "400px"...
+00039320: 2020 2020 2020 2020 6565 5f6f 626a 6563          ee_objec
+00039330: 7473 2028 6c69 7374 2c20 6f70 7469 6f6e  ts (list, option
+00039340: 616c 293a 2054 6865 206c 6973 7420 6f66  al): The list of
+00039350: 2045 6172 7468 2045 6e67 696e 6520 6f62   Earth Engine ob
+00039360: 6a65 6374 7320 746f 2075 7365 2066 6f72  jects to use for
+00039370: 2065 6163 6820 6d61 702e 2044 6566 6175   each map. Defau
+00039380: 6c74 7320 746f 205b 5d2e 0d0a 2020 2020  lts to []...    
+00039390: 2020 2020 7669 735f 7061 7261 6d73 2028      vis_params (
+000393a0: 6c69 7374 2c20 6f70 7469 6f6e 616c 293a  list, optional):
+000393b0: 2054 6865 206c 6973 7420 6f66 2076 6973   The list of vis
+000393c0: 7561 6c69 7a61 7469 6f6e 2070 6172 616d  ualization param
+000393d0: 6574 6572 7320 746f 2075 7365 2066 6f72  eters to use for
+000393e0: 2065 6163 6820 6d61 702e 2044 6566 6175   each map. Defau
+000393f0: 6c74 7320 746f 205b 5d2e 0d0a 2020 2020  lts to []...    
+00039400: 2020 2020 6c61 6265 6c73 2028 6c69 7374      labels (list
+00039410: 2c20 6f70 7469 6f6e 616c 293a 2054 6865  , optional): The
+00039420: 206c 6973 7420 6f66 206c 6162 656c 7320   list of labels 
+00039430: 746f 2073 686f 7720 6f6e 2074 6865 206d  to show on the m
+00039440: 6170 2e20 4465 6661 756c 7473 2074 6f20  ap. Defaults to 
+00039450: 5b5d 2e0d 0a20 2020 2020 2020 206c 6162  []...        lab
+00039460: 656c 5f70 6f73 6974 696f 6e20 2873 7472  el_position (str
+00039470: 2c20 6f70 7469 6f6e 616c 293a 2054 6865  , optional): The
+00039480: 2070 6f73 6974 696f 6e20 6f66 2074 6865   position of the
+00039490: 206c 6162 656c 2c20 6361 6e20 6265 205b   label, can be [
+000394a0: 746f 706c 6566 742c 2074 6f70 7269 6768  topleft, toprigh
+000394b0: 742c 2062 6f74 746f 6d6c 6566 742c 2062  t, bottomleft, b
+000394c0: 6f74 746f 6d72 6967 6874 5d2e 2044 6566  ottomright]. Def
+000394d0: 6175 6c74 7320 746f 2022 746f 7072 6967  aults to "toprig
+000394e0: 6874 222e 0d0a 0d0a 2020 2020 5261 6973  ht".....    Rais
+000394f0: 6573 3a0d 0a20 2020 2020 2020 2056 616c  es:..        Val
+00039500: 7565 4572 726f 723a 2049 6620 7468 6520  ueError: If the 
+00039510: 6c65 6e67 7468 206f 6620 6565 5f6f 626a  length of ee_obj
+00039520: 6563 7473 2069 7320 6e6f 7420 6571 7561  ects is not equa
+00039530: 6c20 746f 2072 6f77 732a 636f 6c73 2e0d  l to rows*cols..
+00039540: 0a20 2020 2020 2020 2056 616c 7565 4572  .        ValueEr
+00039550: 726f 723a 2049 6620 7468 6520 6c65 6e67  ror: If the leng
+00039560: 7468 206f 6620 7669 735f 7061 7261 6d73  th of vis_params
+00039570: 2069 7320 6e6f 7420 6571 7561 6c20 746f   is not equal to
+00039580: 2072 6f77 732a 636f 6c73 2e0d 0a20 2020   rows*cols...   
+00039590: 2020 2020 2056 616c 7565 4572 726f 723a       ValueError:
+000395a0: 2049 6620 7468 6520 6c65 6e67 7468 206f   If the length o
+000395b0: 6620 6c61 6265 6c73 2069 7320 6e6f 7420  f labels is not 
+000395c0: 6571 7561 6c20 746f 2072 6f77 732a 636f  equal to rows*co
+000395d0: 6c73 2e0d 0a0d 0a20 2020 2052 6574 7572  ls.....    Retur
+000395e0: 6e73 3a0d 0a20 2020 2020 2020 2069 7079  ns:..        ipy
+000395f0: 7769 6467 6574 3a20 4120 4772 6964 7370  widget: A Gridsp
+00039600: 6563 4c61 796f 7574 2077 6964 6765 742e  ecLayout widget.
+00039610: 0d0a 2020 2020 2222 220d 0a20 2020 2067  ..    """..    g
+00039620: 7269 6420 3d20 7769 6467 6574 732e 4772  rid = widgets.Gr
+00039630: 6964 7370 6563 4c61 796f 7574 2872 6f77  idspecLayout(row
+00039640: 732c 2063 6f6c 732c 2067 7269 645f 6761  s, cols, grid_ga
+00039650: 703d 2230 7078 2229 0d0a 2020 2020 636f  p="0px")..    co
+00039660: 756e 7420 3d20 726f 7773 202a 2063 6f6c  unt = rows * col
+00039670: 730d 0a0d 0a20 2020 206d 6170 7320 3d20  s....    maps = 
+00039680: 5b5d 0d0a 0d0a 2020 2020 6966 206c 656e  []....    if len
+00039690: 2865 655f 6f62 6a65 6374 7329 203e 2030  (ee_objects) > 0
+000396a0: 3a0d 0a20 2020 2020 2020 2069 6620 6c65  :..        if le
+000396b0: 6e28 6565 5f6f 626a 6563 7473 2920 3d3d  n(ee_objects) ==
+000396c0: 2031 3a0d 0a20 2020 2020 2020 2020 2020   1:..           
+000396d0: 2065 655f 6f62 6a65 6374 7320 3d20 6565   ee_objects = ee
+000396e0: 5f6f 626a 6563 7473 202a 2063 6f75 6e74  _objects * count
+000396f0: 0d0a 2020 2020 2020 2020 656c 6966 206c  ..        elif l
+00039700: 656e 2865 655f 6f62 6a65 6374 7329 203c  en(ee_objects) <
+00039710: 2063 6f75 6e74 3a0d 0a20 2020 2020 2020   count:..       
+00039720: 2020 2020 2072 6169 7365 2056 616c 7565       raise Value
+00039730: 4572 726f 7228 6622 5468 6520 6c65 6e67  Error(f"The leng
+00039740: 7468 206f 6620 6565 5f6f 626a 6563 7473  th of ee_objects
+00039750: 206d 7573 7420 6265 2065 7175 616c 2074   must be equal t
+00039760: 6f20 7b63 6f75 6e74 7d2e 2229 0d0a 0d0a  o {count}.")....
+00039770: 2020 2020 6966 206c 656e 2876 6973 5f70      if len(vis_p
+00039780: 6172 616d 7329 203e 2030 3a0d 0a20 2020  arams) > 0:..   
+00039790: 2020 2020 2069 6620 6c65 6e28 7669 735f       if len(vis_
+000397a0: 7061 7261 6d73 2920 3d3d 2031 3a0d 0a20  params) == 1:.. 
+000397b0: 2020 2020 2020 2020 2020 2076 6973 5f70             vis_p
+000397c0: 6172 616d 7320 3d20 7669 735f 7061 7261  arams = vis_para
+000397d0: 6d73 202a 2063 6f75 6e74 0d0a 2020 2020  ms * count..    
+000397e0: 2020 2020 656c 6966 206c 656e 2876 6973      elif len(vis
+000397f0: 5f70 6172 616d 7329 203c 2063 6f75 6e74  _params) < count
+00039800: 3a0d 0a20 2020 2020 2020 2020 2020 2072  :..            r
+00039810: 6169 7365 2056 616c 7565 4572 726f 7228  aise ValueError(
+00039820: 6622 5468 6520 6c65 6e67 7468 206f 6620  f"The length of 
+00039830: 7669 735f 7061 7261 6d73 206d 7573 7420  vis_params must 
+00039840: 6265 2065 7175 616c 2074 6f20 7b63 6f75  be equal to {cou
+00039850: 6e74 7d2e 2229 0d0a 0d0a 2020 2020 6966  nt}.")....    if
+00039860: 206c 656e 286c 6162 656c 7329 203e 2030   len(labels) > 0
+00039870: 3a0d 0a20 2020 2020 2020 2069 6620 6c65  :..        if le
+00039880: 6e28 6c61 6265 6c73 2920 3d3d 2031 3a0d  n(labels) == 1:.
+00039890: 0a20 2020 2020 2020 2020 2020 206c 6162  .            lab
+000398a0: 656c 7320 3d20 6c61 6265 6c73 202a 2063  els = labels * c
+000398b0: 6f75 6e74 0d0a 2020 2020 2020 2020 656c  ount..        el
+000398c0: 6966 206c 656e 286c 6162 656c 7329 203c  if len(labels) <
+000398d0: 2063 6f75 6e74 3a0d 0a20 2020 2020 2020   count:..       
+000398e0: 2020 2020 2072 6169 7365 2056 616c 7565       raise Value
+000398f0: 4572 726f 7228 6622 5468 6520 6c65 6e67  Error(f"The leng
+00039900: 7468 206f 6620 6c61 6265 6c73 206d 7573  th of labels mus
+00039910: 7420 6265 2065 7175 616c 2074 6f20 7b63  t be equal to {c
+00039920: 6f75 6e74 7d2e 2229 0d0a 0d0a 2020 2020  ount}.")....    
+00039930: 666f 7220 6920 696e 2072 616e 6765 2872  for i in range(r
+00039940: 6f77 7329 3a0d 0a20 2020 2020 2020 2066  ows):..        f
+00039950: 6f72 206a 2069 6e20 7261 6e67 6528 636f  or j in range(co
+00039960: 6c73 293a 0d0a 2020 2020 2020 2020 2020  ls):..          
+00039970: 2020 696e 6465 7820 3d20 6920 2a20 726f    index = i * ro
+00039980: 7773 202b 206a 0d0a 2020 2020 2020 2020  ws + j..        
+00039990: 2020 2020 6d20 3d20 4d61 7028 0d0a 2020      m = Map(..  
+000399a0: 2020 2020 2020 2020 2020 2020 2020 6865                he
+000399b0: 6967 6874 3d68 6569 6768 742c 0d0a 2020  ight=height,..  
+000399c0: 2020 2020 2020 2020 2020 2020 2020 6c69                li
+000399d0: 7465 5f6d 6f64 653d 5472 7565 2c0d 0a20  te_mode=True,.. 
+000399e0: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+000399f0: 6464 5f67 6f6f 676c 655f 6d61 703d 4661  dd_google_map=Fa
+00039a00: 6c73 652c 0d0a 2020 2020 2020 2020 2020  lse,..          
+00039a10: 2020 2020 2020 6c61 796f 7574 3d77 6964        layout=wid
+00039a20: 6765 7473 2e4c 6179 6f75 7428 6d61 7267  gets.Layout(marg
+00039a30: 696e 3d22 3070 7822 2c20 7061 6464 696e  in="0px", paddin
+00039a40: 673d 2230 7078 2229 2c0d 0a20 2020 2020  g="0px"),..     
+00039a50: 2020 2020 2020 2020 2020 202a 2a6b 7761             **kwa
+00039a60: 7267 732c 0d0a 2020 2020 2020 2020 2020  rgs,..          
+00039a70: 2020 290d 0a0d 0a20 2020 2020 2020 2020    )....         
+00039a80: 2020 2069 6620 6c65 6e28 6565 5f6f 626a     if len(ee_obj
+00039a90: 6563 7473 2920 3e20 303a 0d0a 2020 2020  ects) > 0:..    
+00039aa0: 2020 2020 2020 2020 2020 2020 6d2e 6164              m.ad
+00039ab0: 644c 6179 6572 2865 655f 6f62 6a65 6374  dLayer(ee_object
+00039ac0: 735b 696e 6465 785d 2c20 7669 735f 7061  s[index], vis_pa
+00039ad0: 7261 6d73 5b69 6e64 6578 5d2c 206c 6162  rams[index], lab
+00039ae0: 656c 735b 696e 6465 785d 290d 0a0d 0a20  els[index]).... 
+00039af0: 2020 2020 2020 2020 2020 2069 6620 6c65             if le
+00039b00: 6e28 6c61 6265 6c73 2920 3e20 303a 0d0a  n(labels) > 0:..
+00039b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00039b20: 6c61 6265 6c20 3d20 7769 6467 6574 732e  label = widgets.
+00039b30: 4c61 6265 6c28 0d0a 2020 2020 2020 2020  Label(..        
+00039b40: 2020 2020 2020 2020 2020 2020 6c61 6265              labe
+00039b50: 6c73 5b69 6e64 6578 5d2c 206c 6179 6f75  ls[index], layou
+00039b60: 743d 7769 6467 6574 732e 4c61 796f 7574  t=widgets.Layout
+00039b70: 2870 6164 6469 6e67 3d22 3070 7820 3570  (padding="0px 5p
+00039b80: 7820 3070 7820 3570 7822 290d 0a20 2020  x 0px 5px")..   
+00039b90: 2020 2020 2020 2020 2020 2020 2029 0d0a               )..
+00039ba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00039bb0: 636f 6e74 726f 6c20 3d20 6970 796c 6561  control = ipylea
+00039bc0: 666c 6574 2e57 6964 6765 7443 6f6e 7472  flet.WidgetContr
+00039bd0: 6f6c 280d 0a20 2020 2020 2020 2020 2020  ol(..           
+00039be0: 2020 2020 2020 2020 2077 6964 6765 743d           widget=
+00039bf0: 6c61 6265 6c2c 2070 6f73 6974 696f 6e3d  label, position=
+00039c00: 6c61 6265 6c5f 706f 7369 7469 6f6e 0d0a  label_position..
+00039c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00039c20: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00039c30: 2020 206d 2e61 6464 5f63 6f6e 7472 6f6c     m.add_control
+00039c40: 2863 6f6e 7472 6f6c 290d 0a0d 0a20 2020  (control)....   
+00039c50: 2020 2020 2020 2020 206d 6170 732e 6170           maps.ap
+00039c60: 7065 6e64 286d 290d 0a20 2020 2020 2020  pend(m)..       
+00039c70: 2020 2020 2077 6964 6765 7473 2e6a 736c       widgets.jsl
+00039c80: 696e 6b28 286d 6170 735b 305d 2c20 2263  ink((maps[0], "c
+00039c90: 656e 7465 7222 292c 2028 6d2c 2022 6365  enter"), (m, "ce
+00039ca0: 6e74 6572 2229 290d 0a20 2020 2020 2020  nter"))..       
+00039cb0: 2020 2020 2077 6964 6765 7473 2e6a 736c       widgets.jsl
+00039cc0: 696e 6b28 286d 6170 735b 305d 2c20 227a  ink((maps[0], "z
+00039cd0: 6f6f 6d22 292c 2028 6d2c 2022 7a6f 6f6d  oom"), (m, "zoom
+00039ce0: 2229 290d 0a0d 0a20 2020 2020 2020 2020  "))....         
+00039cf0: 2020 206f 7574 7075 7420 3d20 7769 6467     output = widg
+00039d00: 6574 732e 4f75 7470 7574 2829 0d0a 2020  ets.Output()..  
+00039d10: 2020 2020 2020 2020 2020 7769 7468 206f            with o
+00039d20: 7574 7075 743a 0d0a 2020 2020 2020 2020  utput:..        
+00039d30: 2020 2020 2020 2020 6469 7370 6c61 7928          display(
+00039d40: 6d29 0d0a 2020 2020 2020 2020 2020 2020  m)..            
+00039d50: 6772 6964 5b69 2c20 6a5d 203d 206f 7574  grid[i, j] = out
+00039d60: 7075 740d 0a0d 0a20 2020 2072 6574 7572  put....    retur
+00039d70: 6e20 6772 6964 0d0a 0d0a 0d0a 6465 6620  n grid......def 
+00039d80: 7473 5f69 6e73 7065 6374 6f72 280d 0a20  ts_inspector(.. 
+00039d90: 2020 206c 6179 6572 735f 6469 6374 3d4e     layers_dict=N
+00039da0: 6f6e 652c 0d0a 2020 2020 6c65 6674 5f6e  one,..    left_n
+00039db0: 616d 653d 4e6f 6e65 2c0d 0a20 2020 2072  ame=None,..    r
+00039dc0: 6967 6874 5f6e 616d 653d 4e6f 6e65 2c0d  ight_name=None,.
+00039dd0: 0a20 2020 2077 6964 7468 3d22 3132 3070  .    width="120p
+00039de0: 7822 2c0d 0a20 2020 2063 656e 7465 723d  x",..    center=
+00039df0: 5b34 302c 202d 3130 305d 2c0d 0a20 2020  [40, -100],..   
+00039e00: 207a 6f6f 6d3d 342c 0d0a 2020 2020 2a2a   zoom=4,..    **
+00039e10: 6b77 6172 6773 2c0d 0a29 3a0d 0a0d 0a20  kwargs,..):.... 
+00039e20: 2020 2061 6464 5f7a 6f6f 6d20 3d20 5472     add_zoom = Tr
+00039e30: 7565 0d0a 2020 2020 6164 645f 6675 6c6c  ue..    add_full
+00039e40: 7363 7265 656e 203d 2054 7275 650d 0a0d  screen = True...
+00039e50: 0a20 2020 2069 6620 2264 6174 615f 6374  .    if "data_ct
+00039e60: 726c 2220 6e6f 7420 696e 206b 7761 7267  rl" not in kwarg
+00039e70: 733a 0d0a 2020 2020 2020 2020 6b77 6172  s:..        kwar
+00039e80: 6773 5b22 6461 7461 5f63 7472 6c22 5d20  gs["data_ctrl"] 
+00039e90: 3d20 4661 6c73 650d 0a20 2020 2069 6620  = False..    if 
+00039ea0: 2274 6f6f 6c62 6172 5f63 7472 6c22 206e  "toolbar_ctrl" n
+00039eb0: 6f74 2069 6e20 6b77 6172 6773 3a0d 0a20  ot in kwargs:.. 
+00039ec0: 2020 2020 2020 206b 7761 7267 735b 2274         kwargs["t
+00039ed0: 6f6f 6c62 6172 5f63 7472 6c22 5d20 3d20  oolbar_ctrl"] = 
+00039ee0: 4661 6c73 650d 0a20 2020 2069 6620 2264  False..    if "d
+00039ef0: 7261 775f 6374 726c 2220 6e6f 7420 696e  raw_ctrl" not in
+00039f00: 206b 7761 7267 733a 0d0a 2020 2020 2020   kwargs:..      
+00039f10: 2020 6b77 6172 6773 5b22 6472 6177 5f63    kwargs["draw_c
+00039f20: 7472 6c22 5d20 3d20 4661 6c73 650d 0a20  trl"] = False.. 
+00039f30: 2020 2069 6620 226d 6561 7375 7265 5f63     if "measure_c
+00039f40: 7472 6c22 206e 6f74 2069 6e20 6b77 6172  trl" not in kwar
+00039f50: 6773 3a0d 0a20 2020 2020 2020 206b 7761  gs:..        kwa
+00039f60: 7267 735b 226d 6561 7375 7265 5f63 7472  rgs["measure_ctr
+00039f70: 6c22 5d20 3d20 4661 6c73 650d 0a20 2020  l"] = False..   
+00039f80: 2069 6620 227a 6f6f 6d5f 6374 726c 2220   if "zoom_ctrl" 
+00039f90: 6e6f 7420 696e 206b 7761 7267 733a 0d0a  not in kwargs:..
+00039fa0: 2020 2020 2020 2020 6b77 6172 6773 5b22          kwargs["
+00039fb0: 7a6f 6f6d 5f63 7472 6c22 5d20 3d20 4661  zoom_ctrl"] = Fa
+00039fc0: 6c73 650d 0a20 2020 2065 6c73 653a 0d0a  lse..    else:..
+00039fd0: 2020 2020 2020 2020 6164 645f 7a6f 6f6d          add_zoom
+00039fe0: 203d 206b 7761 7267 735b 227a 6f6f 6d5f   = kwargs["zoom_
+00039ff0: 6374 726c 225d 0d0a 2020 2020 6966 2022  ctrl"]..    if "
+0003a000: 6675 6c6c 7363 7265 656e 5f63 7472 6c22  fullscreen_ctrl"
+0003a010: 206e 6f74 2069 6e20 6b77 6172 6773 3a0d   not in kwargs:.
+0003a020: 0a20 2020 2020 2020 206b 7761 7267 735b  .        kwargs[
+0003a030: 2266 756c 6c73 6372 6565 6e5f 6374 726c  "fullscreen_ctrl
+0003a040: 225d 203d 2046 616c 7365 0d0a 2020 2020  "] = False..    
+0003a050: 656c 7365 3a0d 0a20 2020 2020 2020 2061  else:..        a
+0003a060: 6464 5f66 756c 6c73 6372 6565 6e20 3d20  dd_fullscreen = 
+0003a070: 6b77 6172 6773 5b22 6675 6c6c 7363 7265  kwargs["fullscre
+0003a080: 656e 5f63 7472 6c22 5d0d 0a0d 0a20 2020  en_ctrl"]....   
+0003a090: 2069 6620 6c61 7965 7273 5f64 6963 7420   if layers_dict 
+0003a0a0: 6973 204e 6f6e 653a 0d0a 2020 2020 2020  is None:..      
+0003a0b0: 2020 6c61 7965 7273 5f64 6963 7420 3d20    layers_dict = 
+0003a0c0: 7b7d 0d0a 2020 2020 2020 2020 6b65 7973  {}..        keys
+0003a0d0: 203d 2064 6963 7428 6261 7365 6d61 705f   = dict(basemap_
+0003a0e0: 7469 6c65 7329 2e6b 6579 7328 290d 0a20  tiles).keys().. 
+0003a0f0: 2020 2020 2020 2066 6f72 206b 6579 2069         for key i
+0003a100: 6e20 6b65 7973 3a0d 0a20 2020 2020 2020  n keys:..       
+0003a110: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
+0003a120: 6365 2862 6173 656d 6170 5f74 696c 6573  ce(basemap_tiles
+0003a130: 5b6b 6579 5d2c 2069 7079 6c65 6166 6c65  [key], ipyleafle
+0003a140: 742e 574d 534c 6179 6572 293a 0d0a 2020  t.WMSLayer):..  
+0003a150: 2020 2020 2020 2020 2020 2020 2020 7061                pa
+0003a160: 7373 0d0a 2020 2020 2020 2020 2020 2020  ss..            
+0003a170: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
+0003a180: 2020 2020 2020 206c 6179 6572 735f 6469         layers_di
+0003a190: 6374 5b6b 6579 5d20 3d20 6261 7365 6d61  ct[key] = basema
+0003a1a0: 705f 7469 6c65 735b 6b65 795d 0d0a 0d0a  p_tiles[key]....
+0003a1b0: 2020 2020 6b65 7973 203d 206c 6973 7428      keys = list(
+0003a1c0: 6c61 7965 7273 5f64 6963 742e 6b65 7973  layers_dict.keys
+0003a1d0: 2829 290d 0a20 2020 2069 6620 6c65 6674  ())..    if left
+0003a1e0: 5f6e 616d 6520 6973 204e 6f6e 653a 0d0a  _name is None:..
+0003a1f0: 2020 2020 2020 2020 6c65 6674 5f6e 616d          left_nam
+0003a200: 6520 3d20 6b65 7973 5b30 5d0d 0a20 2020  e = keys[0]..   
+0003a210: 2069 6620 7269 6768 745f 6e61 6d65 2069   if right_name i
+0003a220: 7320 4e6f 6e65 3a0d 0a20 2020 2020 2020  s None:..       
+0003a230: 2072 6967 6874 5f6e 616d 6520 3d20 6b65   right_name = ke
+0003a240: 7973 5b2d 315d 0d0a 0d0a 2020 2020 6c65  ys[-1]....    le
+0003a250: 6674 5f6c 6179 6572 203d 206c 6179 6572  ft_layer = layer
+0003a260: 735f 6469 6374 5b6c 6566 745f 6e61 6d65  s_dict[left_name
+0003a270: 5d0d 0a20 2020 2072 6967 6874 5f6c 6179  ]..    right_lay
+0003a280: 6572 203d 206c 6179 6572 735f 6469 6374  er = layers_dict
+0003a290: 5b72 6967 6874 5f6e 616d 655d 0d0a 0d0a  [right_name]....
+0003a2a0: 2020 2020 6d20 3d20 4d61 7028 6365 6e74      m = Map(cent
+0003a2b0: 6572 3d63 656e 7465 722c 207a 6f6f 6d3d  er=center, zoom=
+0003a2c0: 7a6f 6f6d 2c20 676f 6f67 6c65 5f6d 6170  zoom, google_map
+0003a2d0: 3d4e 6f6e 652c 202a 2a6b 7761 7267 7329  =None, **kwargs)
+0003a2e0: 0d0a 2020 2020 636f 6e74 726f 6c20 3d20  ..    control = 
+0003a2f0: 6970 796c 6561 666c 6574 2e53 706c 6974  ipyleaflet.Split
+0003a300: 4d61 7043 6f6e 7472 6f6c 286c 6566 745f  MapControl(left_
+0003a310: 6c61 7965 723d 6c65 6674 5f6c 6179 6572  layer=left_layer
+0003a320: 2c20 7269 6768 745f 6c61 7965 723d 7269  , right_layer=ri
+0003a330: 6768 745f 6c61 7965 7229 0d0a 2020 2020  ght_layer)..    
+0003a340: 6d2e 6164 645f 636f 6e74 726f 6c28 636f  m.add_control(co
+0003a350: 6e74 726f 6c29 0d0a 0d0a 2020 2020 6c65  ntrol)....    le
+0003a360: 6674 5f64 726f 7064 6f77 6e20 3d20 7769  ft_dropdown = wi
+0003a370: 6467 6574 732e 4472 6f70 646f 776e 280d  dgets.Dropdown(.
+0003a380: 0a20 2020 2020 2020 206f 7074 696f 6e73  .        options
+0003a390: 3d6b 6579 732c 2076 616c 7565 3d6c 6566  =keys, value=lef
+0003a3a0: 745f 6e61 6d65 2c20 6c61 796f 7574 3d77  t_name, layout=w
+0003a3b0: 6964 6765 7473 2e4c 6179 6f75 7428 7769  idgets.Layout(wi
+0003a3c0: 6474 683d 7769 6474 6829 0d0a 2020 2020  dth=width)..    
+0003a3d0: 290d 0a0d 0a20 2020 206c 6566 745f 636f  )....    left_co
+0003a3e0: 6e74 726f 6c20 3d20 6970 796c 6561 666c  ntrol = ipyleafl
+0003a3f0: 6574 2e57 6964 6765 7443 6f6e 7472 6f6c  et.WidgetControl
+0003a400: 2877 6964 6765 743d 6c65 6674 5f64 726f  (widget=left_dro
+0003a410: 7064 6f77 6e2c 2070 6f73 6974 696f 6e3d  pdown, position=
+0003a420: 2274 6f70 6c65 6674 2229 0d0a 2020 2020  "topleft")..    
+0003a430: 6d2e 6164 645f 636f 6e74 726f 6c28 6c65  m.add_control(le
+0003a440: 6674 5f63 6f6e 7472 6f6c 290d 0a0d 0a20  ft_control).... 
+0003a450: 2020 2072 6967 6874 5f64 726f 7064 6f77     right_dropdow
+0003a460: 6e20 3d20 7769 6467 6574 732e 4472 6f70  n = widgets.Drop
+0003a470: 646f 776e 280d 0a20 2020 2020 2020 206f  down(..        o
+0003a480: 7074 696f 6e73 3d6b 6579 732c 2076 616c  ptions=keys, val
+0003a490: 7565 3d72 6967 6874 5f6e 616d 652c 206c  ue=right_name, l
+0003a4a0: 6179 6f75 743d 7769 6467 6574 732e 4c61  ayout=widgets.La
+0003a4b0: 796f 7574 2877 6964 7468 3d77 6964 7468  yout(width=width
+0003a4c0: 290d 0a20 2020 2029 0d0a 0d0a 2020 2020  )..    )....    
+0003a4d0: 7269 6768 745f 636f 6e74 726f 6c20 3d20  right_control = 
+0003a4e0: 6970 796c 6561 666c 6574 2e57 6964 6765  ipyleaflet.Widge
+0003a4f0: 7443 6f6e 7472 6f6c 2877 6964 6765 743d  tControl(widget=
+0003a500: 7269 6768 745f 6472 6f70 646f 776e 2c20  right_dropdown, 
+0003a510: 706f 7369 7469 6f6e 3d22 746f 7072 6967  position="toprig
+0003a520: 6874 2229 0d0a 2020 2020 6d2e 6164 645f  ht")..    m.add_
+0003a530: 636f 6e74 726f 6c28 7269 6768 745f 636f  control(right_co
+0003a540: 6e74 726f 6c29 0d0a 0d0a 2020 2020 6966  ntrol)....    if
+0003a550: 2061 6464 5f7a 6f6f 6d3a 0d0a 2020 2020   add_zoom:..    
+0003a560: 2020 2020 6d2e 6164 645f 636f 6e74 726f      m.add_contro
+0003a570: 6c28 6970 796c 6561 666c 6574 2e5a 6f6f  l(ipyleaflet.Zoo
+0003a580: 6d43 6f6e 7472 6f6c 2829 290d 0a20 2020  mControl())..   
+0003a590: 2069 6620 6164 645f 6675 6c6c 7363 7265   if add_fullscre
+0003a5a0: 656e 3a0d 0a20 2020 2020 2020 206d 2e61  en:..        m.a
+0003a5b0: 6464 5f63 6f6e 7472 6f6c 2869 7079 6c65  dd_control(ipyle
+0003a5c0: 6166 6c65 742e 4675 6c6c 5363 7265 656e  aflet.FullScreen
+0003a5d0: 436f 6e74 726f 6c28 2929 0d0a 0d0a 2020  Control())....  
+0003a5e0: 2020 7370 6c69 745f 636f 6e74 726f 6c20    split_control 
+0003a5f0: 3d20 4e6f 6e65 0d0a 2020 2020 666f 7220  = None..    for 
+0003a600: 6374 726c 2069 6e20 6d2e 636f 6e74 726f  ctrl in m.contro
+0003a610: 6c73 3a0d 0a20 2020 2020 2020 2069 6620  ls:..        if 
+0003a620: 6973 696e 7374 616e 6365 2863 7472 6c2c  isinstance(ctrl,
+0003a630: 2069 7079 6c65 6166 6c65 742e 5370 6c69   ipyleaflet.Spli
+0003a640: 744d 6170 436f 6e74 726f 6c29 3a0d 0a20  tMapControl):.. 
+0003a650: 2020 2020 2020 2020 2020 2073 706c 6974             split
+0003a660: 5f63 6f6e 7472 6f6c 203d 2063 7472 6c0d  _control = ctrl.
+0003a670: 0a20 2020 2020 2020 2020 2020 2062 7265  .            bre
+0003a680: 616b 0d0a 0d0a 2020 2020 6465 6620 6c65  ak....    def le
+0003a690: 6674 5f63 6861 6e67 6528 6368 616e 6765  ft_change(change
+0003a6a0: 293a 0d0a 2020 2020 2020 2020 7370 6c69  ):..        spli
+0003a6b0: 745f 636f 6e74 726f 6c2e 6c65 6674 5f6c  t_control.left_l
+0003a6c0: 6179 6572 2e75 726c 203d 206c 6179 6572  ayer.url = layer
+0003a6d0: 735f 6469 6374 5b6c 6566 745f 6472 6f70  s_dict[left_drop
+0003a6e0: 646f 776e 2e76 616c 7565 5d2e 7572 6c0d  down.value].url.
+0003a6f0: 0a0d 0a20 2020 206c 6566 745f 6472 6f70  ...    left_drop
+0003a700: 646f 776e 2e6f 6273 6572 7665 286c 6566  down.observe(lef
+0003a710: 745f 6368 616e 6765 2c20 2276 616c 7565  t_change, "value
+0003a720: 2229 0d0a 0d0a 2020 2020 6465 6620 7269  ")....    def ri
+0003a730: 6768 745f 6368 616e 6765 2863 6861 6e67  ght_change(chang
+0003a740: 6529 3a0d 0a20 2020 2020 2020 2073 706c  e):..        spl
+0003a750: 6974 5f63 6f6e 7472 6f6c 2e72 6967 6874  it_control.right
+0003a760: 5f6c 6179 6572 2e75 726c 203d 206c 6179  _layer.url = lay
+0003a770: 6572 735f 6469 6374 5b72 6967 6874 5f64  ers_dict[right_d
+0003a780: 726f 7064 6f77 6e2e 7661 6c75 655d 2e75  ropdown.value].u
+0003a790: 726c 0d0a 0d0a 2020 2020 7269 6768 745f  rl....    right_
+0003a7a0: 6472 6f70 646f 776e 2e6f 6273 6572 7665  dropdown.observe
+0003a7b0: 2872 6967 6874 5f63 6861 6e67 652c 2022  (right_change, "
+0003a7c0: 7661 6c75 6522 290d 0a0d 0a20 2020 2072  value")....    r
+0003a7d0: 6574 7572 6e20 6d0d 0a                   eturn m..
```

### Comparing `geemap-0.9.4/geemap/legends.py` & `geemap-0.9.5/geemap/legends.py`

 * *Files 2% similar despite different names*

```diff
@@ -25,14 +25,27 @@
         "73 Lichens": "a3cc51",
         "74 Moss": "82ba9e",
         "81 Pasture/Hay": "dcd939",
         "82 Cultivated Crops": "ab6c28",
         "90 Woody Wetlands": "b8d9eb",
         "95 Emergent Herbaceous Wetlands": "6c9fb8",
     },
+    "ESA_WorldCover": {
+        "10 Trees": "006400",
+        "20 Shrubland": "ffbb22",
+        "30 Grassland": "ffff4c",
+        "40 Cropland": "f096ff",
+        "50 Built-up": "fa0000",
+        "60 Barren / sparse vegetation": "b4b4b4",
+        "70 Snow and ice": "f0f0f0",
+        "80 Open water": "0064c8",
+        "90 Herbaceous wetland": "0096a0",
+        "95 Mangroves": "00cf75",
+        "100 Moss and lichen": "fae6a0",
+    },
     # National Wetlands Inventory Legend: https://www.fws.gov/wetlands/data/Mapper-Wetlands-Legend.html
     "NWI": {
         "Freshwater- Forested and Shrub wetland": (0, 136, 55),
         "Freshwater Emergent wetland": (127, 195, 28),
         "Freshwater pond": (104, 140, 192),
         "Estuarine and Marine wetland": (102, 194, 165),
         "Riverine": (1, 144, 191),
```

### Comparing `geemap-0.9.4/geemap/ml.py` & `geemap-0.9.5/geemap/ml.py`

 * *Files identical despite different names*

### Comparing `geemap-0.9.4/geemap/toolbar.py` & `geemap-0.9.5/geemap/toolbar.py`

 * *Files 0% similar despite different names*

```diff
@@ -6,14 +6,15 @@
 import ipyevents
 import ipyleaflet
 import ipywidgets as widgets
 from ipyfilechooser import FileChooser
 from IPython.core.display import display
 
 from .common import *
+from .timelapse import *
 
 
 def tool_template(m=None):
 
     widget_width = "250px"
     padding = "0px 0px 0px 5px"  # upper, right, bottom, left
 
@@ -968,15 +969,15 @@
     tools_widget.options = all_tools
     left_widget.children = [category_widget, search_widget, label_widget, close_btn]
     center_widget.children = [tools_widget]
 
     return full_widget
 
 
-def timelapse(m=None):
+def timelapse_gui(m=None):
     """Creates timelapse animations.
 
     Args:
         m (geemap.Map, optional): A geemap Map instance. Defaults to None.
 
     Returns:
         ipywidgets: The interactive GUI.
```

### Comparing `geemap-0.9.4/geemap.egg-info/PKG-INFO` & `geemap-0.9.5/geemap.egg-info/PKG-INFO`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: geemap
-Version: 0.9.4
+Version: 0.9.5
 Summary: A Python package for interactive mapping using Google Earth Engine and ipyleaflet
 Home-page: https://github.com/giswqs/geemap
 Author: Qiusheng Wu
 Author-email: giswqs@gmail.com
 License: MIT license
 Keywords: geemap
 Platform: UNKNOWN
```

### Comparing `geemap-0.9.4/geemap.egg-info/SOURCES.txt` & `geemap-0.9.5/geemap.egg-info/SOURCES.txt`

 * *Files 2% similar despite different names*

```diff
@@ -31,24 +31,26 @@
 geemap/conversion.py
 geemap/datasets.py
 geemap/eefolium.py
 geemap/foliumap.py
 geemap/geemap.py
 geemap/legends.py
 geemap/ml.py
+geemap/timelapse.py
 geemap/toolbar.py
 geemap.egg-info/PKG-INFO
 geemap.egg-info/SOURCES.txt
 geemap.egg-info/dependency_links.txt
 geemap.egg-info/entry_points.txt
 geemap.egg-info/not-zip-safe
 geemap.egg-info/requires.txt
 geemap.egg-info/top_level.txt
 geemap/algorithms/river.py
 geemap/data/census_data.json
+geemap/data/fonts/alibaba.otf
 geemap/data/fonts/arial.ttf
 geemap/data/javascripts/ClippedComposite.js
 geemap/data/javascripts/FromName.js
 geemap/data/javascripts/ModisQaBands.js
 geemap/data/javascripts/NormalizedDifference.js
 geemap/data/javascripts/QualityMosaic.js
 geemap/data/python/javascript_to_python.py
```

### Comparing `geemap-0.9.4/setup.py` & `geemap-0.9.5/setup.py`

 * *Files 1% similar despite different names*

```diff
@@ -58,10 +58,10 @@
     keywords="geemap",
     name="geemap",
     packages=find_packages(include=["geemap", "geemap.*"]),
     setup_requires=setup_requirements,
     test_suite="tests",
     tests_require=test_requirements,
     url="https://github.com/giswqs/geemap",
-    version="0.9.4",
+    version="0.9.5",
     zip_safe=False,
 )
```

